import{r,I as p,b,C as g,j as a,T as n,S as R}from"./app-BNvUUmEl.js";import{A as x,g as N,d as y}from"./AgGridConfig-DKTRhQwD.js";import{R as E}from"./EyeOutlined-DiEETj_p.js";import{R as T}from"./EditOutlined-D08rt_V1.js";import{P as v}from"./index-CMRs0_Xi.js";import{R as _}from"./DeleteOutlined-DGkp8rPa.js";import"./ExclamationCircleFilled-BCKDqmzc.js";import"./useLocale-DhOjA_vR.js";var C={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},j=function(l,o){return r.createElement(p,b({},l,{ref:o,icon:C}))},D=r.forwardRef(j);const L=({users:i,showDrawer:l})=>{const o=g(),[s,c]=r.useState([]),[m,P]=r.useState([{headerName:"User Status",headerTooltip:"Employee Status",field:"status",pinned:"left",width:120,editable:!1,cellRenderer:e=>{const t=e.data.status,d={active:"active-status-progress",inactive:"active-status-revision",suspended:"active-status-hold",terminated:"active-status-cancelled",retired:"active-status-completed",default:"default"},h=d[t]||d.default;return a.jsx("span",{className:`${h}`,style:{padding:"3px",borderRadius:"3px"},children:t})}},{headerName:"User Name",headerTooltip:"Employee Name",field:"name",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.name?e.data.name:"⭕❌❌🚫"}},{headerName:"Password",headerTooltip:"Edit Password",field:"password",editable:!1,filter:!1,cellRenderer:()=>"➰➰➰➰➰"},{headerName:"Assign Role",headerTooltip:"User's Role",field:"role_id",editable:!1,cellRenderer:e=>{var t;return(t=e.data.role)!=null&&t.name?e.data.role.name:"⭕❌❌🚫"}},{headerName:"Email",headerTooltip:"Employee Email",field:"email",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.email?e.data.email:"⭕❌❌🚫"}},{headerName:"Phone",headerTooltip:"Employee Mobile Phone",field:"phone",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.phone?e.data.phone:"⭕❌❌🚫"}},{headerName:"Branch",headerTooltip:"Employee Branch Name",field:"branch_id",editable:!1,cellRenderer:e=>{var t;return(t=e.data.branch)!=null&&t.name?e.data.branch.name:"⭕❌❌🚫"}},{headerName:"Department",headerTooltip:"Employee Department Name",field:"department_id",editable:!1,cellRenderer:e=>{var t;return(t=e.data.department)!=null&&t.name?e.data.department.name:"⭕❌❌🚫"}},{headerName:"Designation",headerTooltip:"Employee Designation",field:"designation_id",editable:!1,cellRenderer:e=>{var t;return(t=e.data.designation)!=null&&t.name?e.data.designation.name:"⭕❌❌🚫"}},{headerName:"Country",headerTooltip:"Employee Country",field:"country",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.country?e.data.country:"⭕❌❌🚫"}},{headerName:"State",headerTooltip:"Employee State",field:"state",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.state?e.data.state:"⭕❌❌🚫"}},{headerName:"City",headerTooltip:"Employee City",field:"city",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.city?e.data.city:"⭕❌❌🚫"}},{headerName:"Postal/Zip Code",headerTooltip:"Employee Postal Or Zip Code",field:"postal_or_zip_code",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.postal_or_zip_code?e.data.postal_or_zip_code:"⭕❌❌🚫"}},{headerName:"Current Address",headerTooltip:"Employee Current Address",field:"current_address",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.current_address?e.data.current_address:"⭕❌❌🚫"}},{headerName:"Permanent Address",headerTooltip:"Employee Permanent Address",field:"permanent_address",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.permanent_address?e.data.permanent_address:"⭕❌❌🚫"}},{headerName:"DOB",headerTooltip:"Employee Date Of Birth",field:"dob",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.dob?e.data.dob:"⭕❌❌🚫"}},{headerName:"Joining Date",headerTooltip:"Employee Joining Date",field:"joining_date",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.joining_date?e.data.joining_date:"⭕❌❌🚫"}},{headerName:"Hiring Date",headerTooltip:"Employee Hiring Date",field:"hiring_date",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.hiring_date?e.data.hiring_date:"⭕❌❌🚫"}},{headerName:"Leaving Date",headerTooltip:"Employee Leaving Date",field:"leaving_date",editable:!1,cellRenderer:e=>{var t;return(t=e.data)!=null&&t.leaving_date?e.data.leaving_date:"⭕❌❌🚫"}},{field:"notes",editable:!0,cellEditorPopup:!0,cellRenderer:e=>{const t=document.createElement("div");t.innerHTML=e.value||"<i>No Notes</i>";const d=t.textContent||t.innerText||"";return d.length>100?d.substring(0,100)+"...":d}},{field:"notes_private",editable:!0,cellEditorPopup:!0,cellRenderer:e=>{const t=document.createElement("div");t.innerHTML=e.value||"<i>No Notes</i>";const d=t.textContent||t.innerText||"";return d.length>100?d.substring(0,100)+"...":d}},{headerName:"File | View | Edit | Delete",field:"actions",filter:!1,editable:!1,sortable:!1,pinned:"right",cellRenderer:e=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"",children:[a.jsx(n,{title:"View, Add, Edit, Del File.",color:"green",placement:"leftTop",children:a.jsx("button",{className:"btn btn-primary btn-sm me-1",onClick:()=>l("media",e.data),children:a.jsx(D,{})})}),a.jsx(n,{title:"View User With Full Record",color:"green",placement:"leftTop",children:a.jsx("button",{className:"btn btn-success btn-sm me-1",onClick:()=>l("view",e.data),children:a.jsx(E,{})})}),a.jsx(n,{title:"Edit User",color:"orange",placement:"leftTop",children:a.jsx("button",{className:"btn btn-warning btn-sm me-1",onClick:()=>l("edit",e.data),children:a.jsx(T,{})})}),a.jsx(n,{title:"Delete User",color:"red",placement:"leftTop",children:a.jsx(v,{title:`Are you sure you want to delete "${e.data.name}"?`,onConfirm:()=>u(e.data.id),okText:"Yes",cancelText:"No",children:a.jsx(_,{style:{border:"1px dashed red"},className:"btn btn-danger btn-sm"})})})]})})}]);r.useEffect(()=>{c(i)},[i]);const u=e=>new Promise(t=>{const d=o("user.destroy",e);R.delete(d,{preserveScroll:!0,onSuccess:()=>{t()},onError:()=>{message.error("Failed to delete user")}})}),f={onCellClicked:e=>{e.colDef.field!=="actions"&&l("EditUserColumn",{...e.data,field:e.colDef.field,value:e.value,id:e.data.id})}};return a.jsx(a.Fragment,{children:a.jsx(x,{rowData:s,...f,columnDefs:m,defaultColDef:{...y,flex:void 0},theme:N,pagination:!0,paginationAutoPageSize:!0})})};export{L as default};
