const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddBranch-99132KB6.js","assets/app-BNvUUmEl.js","assets/Editor-CDggPmT6.js","assets/skin-DY8BMAJN.js","assets/skin-C_AE50If.css","assets/index-CRvW1yVg.js","assets/BaseInput-DZa833Tk.js","assets/TextArea-BZPq0bZ8.js","assets/CloseCircleFilled-12r7ww41.js","assets/useVariants-BWWb-x4p.js","assets/pickAttrs-B-O1NeT5.js","assets/EyeOutlined-DiEETj_p.js","assets/SearchOutlined-CqZ0Ampv.js","assets/EditBranch-CF6ys7yB.js","assets/ViewBranch-Dm6KIZ7P.js","assets/Collapse-DNOFyZYK.js","assets/PhoneOutlined-CHa3bdgD.js","assets/MailOutlined-lkoHv3Q8.js"])))=>i.map(i=>d[i]);
import{C as S,r,j as e,T as h,S as A,J as D,t as v,a as p}from"./app-BNvUUmEl.js";import{A as y,g as L,d as k}from"./AgGridConfig-DKTRhQwD.js";import F from"./MyRichTextEditor-DIZfoaaM.js";import{R as I}from"./EyeOutlined-DiEETj_p.js";import{R as M}from"./EditOutlined-D08rt_V1.js";import{P as O}from"./index-CMRs0_Xi.js";import{R as V}from"./DeleteOutlined-DGkp8rPa.js";import{s as z}from"./index-D3jEMiZi.js";import{B as $}from"./Breadcrumb-BMFXy4AL.js";import{R as H}from"./SyncOutlined-liXqSQFG.js";import{D as G}from"./index-D8ScAOOO.js";import"./Editor-CDggPmT6.js";import"./skin-DY8BMAJN.js";import"./ExclamationCircleFilled-BCKDqmzc.js";import"./useLocale-DhOjA_vR.js";import"./context-D9W1Owti.js";import"./pickAttrs-B-O1NeT5.js";import"./CloseCircleFilled-12r7ww41.js";import"./CloseOutlined-DZW4jfaN.js";import"./DownOutlined-BiWLPvuA.js";import"./Skeleton-xgPywAPc.js";const J=r.lazy(()=>p(()=>import("./AddBranch-99132KB6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),W=r.lazy(()=>p(()=>import("./EditBranch-CF6ys7yB.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8,9,10,11,12]))),Y=r.lazy(()=>p(()=>import("./ViewBranch-Dm6KIZ7P.js"),__vite__mapDeps([14,1,15,10,16,17]))),xe=({branches:f})=>{const N=S(),[R,T]=r.useState([]),[B,q]=r.useState([{headerName:"Branch Name",headerTooltip:"Branch Name",field:"name",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,pinned:"left"},{headerName:"Main/Sub",headerTooltip:"Is Main Branch Or Sub Branch",field:"is_main",editable:!1,cellRenderer:t=>t.data.is_main===!0?"Main Branch":"Sub Branch"},{headerName:"Email",headerTooltip:"Branch Email",field:"email",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:t=>t.data.email?t.data.email:"Not Added"},{headerName:"Phone",headerTooltip:"Branch Phone",field:"phone",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:t=>t.data.phone?t.data.phone:"Not Added"},{headerName:"Fax",headerTooltip:"Branch Fax",field:"fax",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:t=>t.data.fax?t.data.fax:"Not Added"},{headerName:"Notes",headerTooltip:"PayGrade Notes",field:"notes",cellEditor:F,cellEditorPopup:!0,cellRenderer:t=>{const a=document.createElement("div");a.innerHTML=t.value||"<i>No Notes</i>";const o=a.textContent||a.innerText||"";return o.length>100?o.substring(0,100)+"...":o}},{headerName:"Action",filter:!1,editable:!1,sortable:!1,pinned:"right",cellRenderer:t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx(h,{title:"View Branch With Full Record",color:"green",placement:"leftTop",children:e.jsx("button",{className:"btn btn-success btn-sm me-1",onClick:()=>m("view",t.data),children:e.jsx(I,{})})}),e.jsx(h,{title:"Edit Branch",color:"orange",placement:"leftTop",children:e.jsx("button",{className:"btn btn-warning btn-sm me-1",onClick:()=>m("edit",t.data),children:e.jsx(M,{})})}),e.jsx(h,{title:"Delete Branch",color:"red",placement:"leftTop",children:e.jsx(O,{title:`Are you sure you want to delete "${t.data.name}"?`,onConfirm:()=>_(t.data.id),okText:"Yes",cancelText:"No",children:e.jsx(V,{className:"btn btn-danger btn-sm"})})})]})})}]);r.useEffect(()=>{T(f)},[f]);const[c,s]=r.useState(!1),[x,b]=r.useState(!1),[n,C]=r.useState("add"),[g,j]=r.useState(null),m=(t,a=null)=>{b(!0),C(t),j(a)},i=()=>{b(!1),j(null)},l=r.useRef(),P=()=>{l.current&&l.current.submitForm()},_=t=>new Promise(a=>{const o=N("branch.destroy",t);A.delete(o,{preserveScroll:!0,onSuccess:()=>{a()},onError:()=>{message.error("Failed to delete department")}})}),{flash:u,errors:d}=D().props,[E,w]=z.useNotification();return r.useEffect(()=>{u.message&&E.success({message:"Success",description:u.message,placement:"topRight"})},[u]),r.useEffect(()=>{d&&Object.keys(d).length>0&&Object.entries(d).forEach(([t,a])=>{const o=Array.isArray(a)?a.join(", "):a;E.error({message:"Validation Error",description:o,placement:"topRight"})})},[d]),e.jsxs(e.Fragment,{children:[w,e.jsxs("div",{className:"container-fluid p-0",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center ps-2 pe-2 mt-2",children:[e.jsx($,{className:"breadCrumb",items:[{title:e.jsx(v,{href:"/",children:"Home"})},{title:"Branch"}]}),e.jsx("button",{icon:c?e.jsx(H,{spin:!0}):null,className:"btn btn-primary btn-sm",onClick:()=>{s(!0),m("add"),setTimeout(()=>{s(!1)},300)},children:"Add Branch"})]}),e.jsx("div",{className:"ag-grid-wrapper",children:e.jsx(y,{rowData:R,columnDefs:B,defaultColDef:k,theme:L,pagination:!0,paginationAutoPageSize:!0})})]}),e.jsx(G,{title:n==="add"?"Add Branch":n==="edit"?"Edit Branch":"View Branch Full Detail: ",closable:{"aria-label":"Close Button"},placement:"left",width:"90%",onClose:i,open:x,maskClosable:!1,extra:n==="view"?e.jsx("button",{className:"btn btn-primary btn-sm",onClick:i,children:"Close"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary btn-sm me-2",disabled:c,onClick:i,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:P,disabled:c,children:n==="add"?"Add Branch":n==="edit"?"Save Changes":"Close"})]}),children:e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading form..."}),children:x&&(n==="add"?e.jsx(J,{setParentLoading:s,ref:l,onClose:i}):n==="edit"?e.jsx(W,{data:g,setParentLoading:s,ref:l,onClose:i}):e.jsx(Y,{data:g}))})})]})};export{xe as default};
