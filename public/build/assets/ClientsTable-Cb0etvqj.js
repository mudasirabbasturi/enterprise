import{C as h,r as l,j as n,T as i,S as x}from"./app-BNvUUmEl.js";import{A as C,g as T,d as b}from"./AgGridConfig-DKTRhQwD.js";import s from"./MyRichTextEditor-DIZfoaaM.js";import{R as g}from"./EyeOutlined-DiEETj_p.js";import{R}from"./EditOutlined-D08rt_V1.js";import{P as N}from"./index-CMRs0_Xi.js";import{R as j}from"./DeleteOutlined-DGkp8rPa.js";import"./Editor-CDggPmT6.js";import"./skin-DY8BMAJN.js";import"./ExclamationCircleFilled-BCKDqmzc.js";import"./useLocale-DhOjA_vR.js";const M=({clients:a,showDrawer:d})=>{const c=h(),[m,f]=l.useState([]),[u,E]=l.useState([{headerName:"Title",headerTooltip:"Client Title",field:"title",pinned:"left",cellRenderer:e=>{var r,t;return(r=e.data)!=null&&r.title?(t=e.data)==null?void 0:t.title:"⭕❌❌🚫"}},{headerName:"Client Name",headerTooltip:"Client Name",field:"name",cellRenderer:e=>{var r,t;return(r=e.data)!=null&&r.name?(t=e.data)==null?void 0:t.name:"⭕❌❌🚫"}},{headerName:"Email",headerTooltip:"Client Email",field:"email",cellRenderer:e=>{var r,t;return(r=e.data)!=null&&r.email?(t=e.data)==null?void 0:t.email:"⭕❌❌🚫"}},{headerName:"Phone",headerTooltip:"Client Phone",field:"phone",cellRenderer:e=>{var r,t;return(r=e.data)!=null&&r.phone?(t=e.data)==null?void 0:t.phone:"⭕❌❌🚫"}},{headerName:"Notes",headerTooltip:"Client Notes",field:"notes",cellEditor:s,cellEditorPopup:!0,cellRenderer:e=>{var r;if((r=e.data)!=null&&r.notes){const t=document.createElement("div");t.innerHTML=e.value||"<i>No Notes</i>";const o=t.textContent||t.innerText||"";return o.length>100?o.substring(0,100)+"...":o}return"⭕❌❌🚫"}},{headerName:"Action",filter:!1,editable:!1,sortable:!1,pinned:"right",cellRenderer:e=>n.jsx(n.Fragment,{children:n.jsxs("div",{class:"btn-group btn-group-sm",children:[n.jsx(i,{title:"View Client With Full Record",color:"green",placement:"leftTop",children:n.jsx("button",{className:"btn btn-success btn-sm me-1",onClick:()=>d("view",e.data),children:n.jsx(g,{})})}),n.jsx(i,{title:"Edit Client",color:"orange",placement:"leftTop",children:n.jsx("button",{className:"btn btn-warning btn-sm me-1",onClick:()=>d("edit",e.data),children:n.jsx(R,{})})}),n.jsx(i,{title:"Delete Client",color:"red",placement:"leftTop",children:n.jsx(N,{title:`Are you sure you want to delete "${e.data.name}"?`,onConfirm:()=>p(e.data.id),okText:"Yes",cancelText:"No",children:n.jsx(j,{style:{border:"1px dashed red"},className:"btn btn-danger btn-sm"})})})]})})}]);l.useEffect(()=>{f(a)},[a]);const p=e=>new Promise(r=>{const t=c("client.destroy",e);x.delete(t,{preserveScroll:!0,onSuccess:()=>{r()},onError:()=>{message.error("Failed to delete Client")}})});return n.jsx(n.Fragment,{children:n.jsx(C,{rowData:m,columnDefs:u,defaultColDef:{...b,flex:void 0},components:{MyRichTextEditor:s},theme:T,pagination:!0,paginationAutoPageSize:!0})})};export{M as default};
