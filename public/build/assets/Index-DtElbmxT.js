const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddRole-EyoZDATA.js","assets/app-BNvUUmEl.js","assets/index-CRvW1yVg.js","assets/BaseInput-DZa833Tk.js","assets/TextArea-BZPq0bZ8.js","assets/CloseCircleFilled-12r7ww41.js","assets/useVariants-BWWb-x4p.js","assets/pickAttrs-B-O1NeT5.js","assets/EyeOutlined-DiEETj_p.js","assets/SearchOutlined-CqZ0Ampv.js","assets/index-75qltQ9A.js","assets/EditRole-WM_ZRMqr.js","assets/ViewRole-DqFBvCK6.js","assets/index-CoErmdn2.js","assets/EditOutlined-D08rt_V1.js","assets/useLocale-DhOjA_vR.js","assets/CheckOutlined-UVMpW3zu.js"])))=>i.map(i=>d[i]);
import{J as S,C as I,r as o,j as e,T as d,S as F,t as O,a as f}from"./app-BNvUUmEl.js";import{A as z,g as B,d as M}from"./AgGridConfig-DKTRhQwD.js";import{R as A}from"./EyeOutlined-DiEETj_p.js";import{R as U}from"./EditOutlined-D08rt_V1.js";import{P as $}from"./index-CMRs0_Xi.js";import{R as H}from"./DeleteOutlined-DGkp8rPa.js";import{s as W}from"./index-D3jEMiZi.js";import{B as G}from"./Breadcrumb-BMFXy4AL.js";import{D as J}from"./index-D8ScAOOO.js";import"./ExclamationCircleFilled-BCKDqmzc.js";import"./useLocale-DhOjA_vR.js";import"./context-D9W1Owti.js";import"./pickAttrs-B-O1NeT5.js";import"./CloseCircleFilled-12r7ww41.js";import"./CloseOutlined-DZW4jfaN.js";import"./DownOutlined-BiWLPvuA.js";import"./Skeleton-xgPywAPc.js";const Y=o.lazy(()=>f(()=>import("./AddRole-EyoZDATA.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),q=o.lazy(()=>f(()=>import("./EditRole-WM_ZRMqr.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),K=o.lazy(()=>f(()=>import("./ViewRole-DqFBvCK6.js"),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,13,14,15,16,10]))),he=({roles:b,permissions:m})=>{var w,C;const{auth:T}=S().props,h=((C=(w=T.user)==null?void 0:w.role)==null?void 0:C.name)==="Super Admin",_=I(),[D,v]=o.useState([]),[y,X]=o.useState([{headerName:"Role",headerTooltip:"Role Name",field:"name",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,pinned:"left"},{headerName:"Notes",headerTooltip:"Role Notes",field:"notes",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:t=>t.data.notes?t.data.notes:"None"},{headerName:"Action",filter:!1,editable:!1,sortable:!1,pinned:"right",cellRenderer:t=>t.data.name==="Super Admin"&&!h?e.jsx("div",{className:"btn-group btn-group-sm",children:e.jsx(d,{title:"View Role With Full Record",color:"green",placement:"leftTop",children:e.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>a("view",t.data),children:e.jsx(A,{})})})}):e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx(d,{title:"View Role With Full Record",color:"green",placement:"leftTop",children:e.jsx("button",{className:"btn btn-success btn-sm me-1",onClick:()=>a("view",t.data),children:e.jsx(A,{})})}),e.jsx(d,{title:"Edit Role",color:"orange",placement:"leftTop",children:e.jsx("button",{className:"btn btn-warning btn-sm me-1",onClick:()=>a("edit",t.data),children:e.jsx(U,{})})}),e.jsx(d,{title:"Delete Role",color:"red",placement:"leftTop",children:e.jsx($,{title:`Are you sure you want to delete "${t.data.name}"?`,onConfirm:()=>L(t.data.id),okText:"Yes",cancelText:"No",children:e.jsx(H,{className:"btn btn-danger btn-sm"})})})]})}]);o.useEffect(()=>{v(b)},[b]);const[x,R]=o.useState(!1),[j,g]=o.useState(!1),[s,P]=o.useState("add"),[l,E]=o.useState(null),a=(t,r=null)=>{P(t),E(r),g(!0)},n=()=>{g(!1),E(null)},i=o.useRef(),k=()=>{i.current&&i.current.submitForm()},L=t=>new Promise(r=>{const p=_("role.destroy",t);F.delete(p,{preserveScroll:!0,onSuccess:()=>{r()},onError:()=>{message.error("Failed to delete role")}})}),{flash:u,errors:c}=S().props,[N,V]=W.useNotification();return o.useEffect(()=>{u.message&&N.success({message:"Success",description:u.message,placement:"topRight"})},[u]),o.useEffect(()=>{c&&Object.keys(c).length>0&&Object.entries(c).forEach(([t,r])=>{const p=Array.isArray(r)?r.join(", "):r;N.error({message:"Validation Error",description:p,placement:"topRight"})})},[c]),e.jsxs(e.Fragment,{children:[V,e.jsxs("div",{className:"container-fluid p-0",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center ps-2 pe-2 mt-2",children:[e.jsx(G,{className:"breadCrumb",items:[{title:e.jsx(O,{href:"/",children:"Home"})},{title:"Role"}]}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>a("add"),children:"Add Role"})]}),e.jsx("div",{className:"ag-grid-wrapper",children:e.jsx(z,{rowData:D,columnDefs:y,defaultColDef:M,theme:B,pagination:!0,paginationAutoPageSize:!0})})]}),e.jsx(J,{title:s==="add"?"Add Role":s==="edit"?"Edit Role":"View Role",closable:{"aria-label":"Close Button"},placement:"left",width:"90%",onClose:n,open:j,extra:s==="view"?e.jsx("button",{className:"btn btn-primary btn-sm",onClick:n,children:"Close"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary btn-sm me-2",disabled:x,onClick:n,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:k,disabled:x||!h&&l.name==="Super Admin",children:s==="add"?"Add Role":s==="edit"?"Save Changes":"Close"})]}),children:e.jsx(o.Suspense,{fallback:e.jsx("div",{children:"Loading form..."}),children:j&&(s==="add"?e.jsx(Y,{setParentLoading:R,ref:i,onClose:n,data:l,permissions:m}):s==="edit"?e.jsx(q,{setParentLoading:R,ref:i,onClose:n,data:l,permissions:m}):e.jsx(K,{data:l,permissions:m}))})})]})};export{he as default};
