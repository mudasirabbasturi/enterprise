var Kj={exports:{}},Vq;function qK(){return Vq||(Vq=1,function(um){(function(){var Eu=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},dm=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},ca=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},aa=function(e,n){return Aa(function(o,r){return e.eq(n(o),n(r))})},Aa=function(e){return{eq:e}},pr=Aa(function(e,n){return e===n}),rn=pr,Vs=function(e){return Aa(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e.eq(n[a],o[a]))return!1;return!0})},ti=function(e,n){return aa(Vs(e),function(o){return ca(o,n)})},Ns=function(e){return Aa(function(n,o){var r=Object.keys(n),a=Object.keys(o);if(!ti(rn).eq(r,a))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},zc=Aa(function(e,n){if(e===n)return!0;var o=Eu(e),r=Eu(n);return o!==r?!1:dm(o)?e===n:o==="array"?Vs(zc).eq(e,n):o==="object"?Ns(zc).eq(e,n):!1});const ar=Object.getPrototypeOf,Lr=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},el=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Lr(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Po=e=>n=>el(n)===e,St=e=>n=>typeof n===e,Vc=e=>n=>e===n,en=(e,n)=>Ot(e)&&Lr(e,n,(o,r)=>ar(o)===r),ae=Po("string"),Ot=Po("object"),Oa=e=>en(e,Object),$n=Po("array"),te=Vc(null),Sn=St("boolean"),bs=Vc(void 0),Rn=e=>e==null,De=e=>!Rn(e),le=St("function"),Bs=St("number"),bn=(e,n)=>{if($n(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},wt=()=>{},A=(e,n)=>(...o)=>e(n.apply(null,o)),Xo=(e,n)=>o=>e(n(o)),lt=e=>()=>e,Jo=e=>e,Xt=(e,n)=>e===n;function ze(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const bo=e=>n=>!e(n),br=e=>()=>{throw new Error(e)},go=e=>e(),vr=e=>{e()},Pe=lt(!1),ft=lt(!0);class L{constructor(n,o){this.tag=n,this.value=o}static some(n){return new L(!0,n)}static none(){return L.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?L.some(n(this.value)):L.none()}bind(n){return this.tag?n(this.value):L.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:L.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return De(n)?L.some(n):L.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}L.singletonNone=new L(!1);const ni=Array.prototype.slice,ho=Array.prototype.indexOf,ao=Array.prototype.push,xo=(e,n)=>ho.call(e,n),Li=(e,n)=>{const o=xo(e,n);return o===-1?L.none():L.some(o)},Jt=(e,n)=>xo(e,n)>-1,vo=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},qt=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},_e=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},Da=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},gs=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},Rt=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Ar=(e,n,o)=>(Da(e,(r,a)=>{o=n(o,r,a)}),o),Ro=(e,n,o)=>(_e(e,(r,a)=>{o=n(o,r,a)}),o),Tu=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return L.some(u);if(o(u,r))break}return L.none()},ts=(e,n)=>Tu(e,n,Pe),Hr=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return L.some(o)}return L.none()},Bl=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!$n(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);ao.apply(n,e[o])}return n},zr=(e,n)=>Bl(qt(e,n)),An=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},$o=e=>{const n=ni.call(e,0);return n.reverse(),n},ku=(e,n)=>Rt(e,o=>!Jt(n,o)),vs=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Io=(e,n)=>{const o=ni.call(e,0);return o.sort(n),o},tl=(e,n)=>n>=0&&n<e.length?L.some(e[n]):L.none(),Ks=e=>tl(e,0),Us=e=>tl(e,e.length-1),lr=le(Array.from)?Array.from:e=>ni.call(e),la=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return L.none()},Pl=(e,n)=>{const o=[],r=le(n)?a=>vo(o,u=>n(u,a)):a=>Jt(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},yr=Object.keys,_u=Object.hasOwnProperty,at=(e,n)=>{const o=yr(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},In=(e,n)=>ac(e,(o,r)=>({k:r,v:n(o,r)})),ac=(e,n)=>{const o={};return at(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},xd=e=>(n,o)=>{e[o]=n},Uc=(e,n,o,r)=>{at(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},Et=(e,n)=>{const o={},r={};return Uc(e,n,xd(o),xd(r)),{t:o,f:r}},nl=(e,n)=>{const o={};return Uc(e,n,xd(o),wt),o},Mo=(e,n)=>{const o=[];return at(e,(r,a)=>{o.push(n(r,a))}),o},df=e=>Mo(e,Jo),yo=(e,n)=>Kt(e,n)?L.from(e[n]):L.none(),Kt=(e,n)=>_u.call(e,n),$l=(e,n)=>Kt(e,n)&&e[n]!==void 0&&e[n]!==null,mf=(e,n,o=zc)=>Ns(o).eq(e,n),Vr={generate:e=>{if(!$n(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return _e(e,(r,a)=>{const u=yr(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!$n(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const E=y.length;if(E!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+E);return{fold:(...B)=>{if(B.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+B.length);return B[a].apply(null,y)},match:B=>{const P=yr(B);if(n.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+P.join(","));if(!An(n,j=>Jt(P,j)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+n.join(", "));return B[f].apply(null,y)},log:B=>{console.log(B,{constructors:n,constructor:f,params:y})}}}}),o}},ns=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},mm=e=>{const n=u=>u(e),o=lt(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:ft,isError:Pe,map:u=>Fo.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>L.some(e)};return a},Qt=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:Pe,isError:ft,map:n,mapError:r=>Fo.error(r(e)),bind:n,exists:Pe,forall:ft,getOr:Jo,or:Jo,getOrThunk:go,orThunk:go,getOrDie:br(String(e)),each:wt,toOptional:L.none};return o},Fo={value:mm,error:Qt,fromOption:(e,n)=>e.fold(()=>Qt(n),mm)},Ed=typeof window<"u"?window:Function("return this;")(),Td=(e,n,o)=>Math.min(Math.max(e,n),o),Lh=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let qo=0;const lc=e=>{const o=new Date().getTime(),r=Math.floor(Lh()*1e9);return qo++,e+"_"+r+qo+String(o)},Au=(e,n)=>n,kd=(e,n)=>Oa(e)&&Oa(n)?Cr(e,n):n,ol=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)Kt(a,u)&&(o[u]=e(o[u],a[u]))}return o},Cr=ol(kd),_d=ol(Au),ba=(e,n,o=Xt)=>e.exists(r=>o(r,n)),nt=(e,n,o=Xt)=>Ys(e,n,o).getOr(e.isNone()&&n.isNone()),pg=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Ys=(e,n,o)=>e.isSome()&&n.isSome()?L.some(o(e.getOrDie(),n.getOrDie())):L.none(),Ou=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?L.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):L.none(),uo=(e,n)=>e?L.some(n):L.none(),ff=(e,n)=>{let o=n??Ed;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},Wc=(e,n)=>{const o=e.split(".");return ff(o,n)};Vr.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const bg=e=>{const n=[],o=[];return _e(e,r=>{r.fold(a=>{n.push(a)},a=>{o.push(a)})}),{errors:n,values:o}},oi=e=>{const n=ns(L.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(L.some(b))}}},fm=e=>{const n=ns(L.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(L.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(L.some(setInterval(b,e)))}}},Ur=()=>{const e=oi(wt);return{...e,on:o=>e.get().each(o)}},Or=(e,n)=>e.substring(n),Ra=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,Sr=(e,n)=>Ps(e,n)?Or(e,n.length):e,ir=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?bs(r)?!0:a+n.length<=r:!1},Ps=(e,n)=>Ra(e,n,0),Hi=(e,n)=>Ra(e,n,e.length-n.length),si=e=>n=>n.replace(e,""),ia=si(/^\s+|\s+$/g),vg=si(/^\s+/g),Ma=si(/\s+$/g),dn=e=>e.length>0,Xs=e=>!dn(e),ic=(e,n)=>n<=0?"":new Array(n+1).join(e),os=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?L.none():L.some(o)},uc=(e,n)=>{let o=null;return{cancel:()=>{te(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{te(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},zi=(e,n)=>{let o=null;const r=()=>{te(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},No=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Wr="\uFEFF",Eo=" ",_c=e=>e===Wr,ct=e=>e.replace(/\uFEFF/g,""),sl=e=>{const n={};return _e(e,o=>{n[o]={}}),yr(n)},rl=e=>e.length!==void 0,Na=Array.isArray,yg=e=>{if(Na(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},va=(e,n,o)=>{if(!e)return!1;if(o=o||e,rl(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Kt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},cl=(e,n)=>{const o=[];return va(e,(r,a)=>{o.push(n(r,a,e))}),o},Dr=(e,n)=>{const o=[];return va(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},Du=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},Ru=(e,n,o,r)=>{let a=bs(o)?e[0]:o;for(let u=0;u<e.length;u++)a=n.call(r,a,e[u],u);return a},Vi=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e))return r;return-1},Zr=e=>e[e.length-1],gm=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=a||!u&&f&&r("(min-device-width:768px)"),E=u||f&&!y,R=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,B=!E&&!y&&!R;return{isiPad:lt(a),isiPhone:lt(u),isTablet:lt(y),isPhone:lt(E),isTouch:lt(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:lt(R),isDesktop:lt(B)}},ri=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},Cg=(e,n)=>{const o=ri(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return Ad(r(1),r(2))},Je=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?Mu():Cg(e,o)},Mu=()=>Ad(0,0),Ad=(e,n)=>({major:e,minor:n}),V={nu:Ad,detect:Je,unknown:Mu},J=(e,n)=>la(n.brands,o=>{const r=o.brand.toLowerCase();return ts(e,a=>{var u;return r===((u=a.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:V.nu(parseInt(o.version,10),0)}))}),fe=(e,n)=>{const o=String(n).toLowerCase();return ts(e,r=>r.search(o))},Re=(e,n)=>fe(e,n).map(o=>{const r=V.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Ke=(e,n)=>fe(e,n).map(o=>{const r=V.detect(o.versionRegexes,n);return{current:o.name,version:r}}),bt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,yn=e=>n=>ir(n,e),Cn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>ir(e,"edge/")&&ir(e,"chrome")&&ir(e,"safari")&&ir(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,bt],search:e=>ir(e,"chrome")&&!ir(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>ir(e,"msie")||ir(e,"trident")},{name:"Opera",versionRegexes:[bt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:yn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:yn("firefox")},{name:"Safari",versionRegexes:[bt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(ir(e,"safari")||ir(e,"mobile/"))&&ir(e,"applewebkit")}],Yn=[{name:"Windows",search:yn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>ir(e,"iphone")||ir(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:yn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:yn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:yn("linux"),versionRegexes:[]},{name:"Solaris",search:yn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:yn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:yn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ls={browsers:lt(Cn),oses:lt(Yn)},Qo="Edge",al="Chromium",Il="IE",hm="Opera",Hh="Firefox",Ba="Safari",Od=()=>Pa({current:void 0,version:V.unknown()}),Pa=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(Qo),isChromium:r(al),isIE:r(Il),isOpera:r(hm),isFirefox:r(Hh),isSafari:r(Ba)}},Nu={unknown:Od,nu:Pa},lo="Windows",gf="iOS",Bu="Android",ci="Linux",zh="macOS",Vh="Solaris",Sg="FreeBSD",pm="ChromeOS",bm=()=>Dd({current:void 0,version:V.unknown()}),Dd=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(lo),isiOS:r(gf),isAndroid:r(Bu),isMacOS:r(zh),isLinux:r(ci),isSolaris:r(Vh),isFreeBSD:r(Sg),isChromeOS:r(pm)}},hf={unknown:bm,nu:Dd},Uh={detect:(e,n,o)=>{const r=ls.browsers(),a=ls.oses(),u=n.bind(y=>J(r,y)).orThunk(()=>Re(r,e)).fold(Nu.unknown,Nu.nu),f=Ke(a,e).fold(hf.unknown,hf.nu),b=gm(f,u,e,o);return{browser:u,os:f,deviceType:b}}},ai=e=>window.matchMedia(e).matches;let ll=No(()=>Uh.detect(window.navigator.userAgent,L.from(window.navigator.userAgentData),ai));const jr=()=>ll(),vm=(e,n)=>Wc(e,n),Wh=(e,n)=>{const o=vm(e,n);if(o==null)throw new Error(e+" not available on this browser");return o},ua=Object.getPrototypeOf,Zh=e=>Wh("HTMLElement",e),Ui=e=>{const n=Wc("ownerDocument.defaultView",e);return Ot(e)&&(Zh(n).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(ua(e).constructor.name))},jh=window.navigator.userAgent,xg=jr(),il=xg.browser,Fl=xg.os,li=xg.deviceType,Eg=jh.indexOf("Windows Phone")!==-1,Wn={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:il.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!il.isIE(),windowsPhone:Eg,browser:{current:il.current,version:il.version,isChromium:il.isChromium,isEdge:il.isEdge,isFirefox:il.isFirefox,isIE:il.isIE,isOpera:il.isOpera,isSafari:il.isSafari},os:{current:Fl.current,version:Fl.version,isAndroid:Fl.isAndroid,isChromeOS:Fl.isChromeOS,isFreeBSD:Fl.isFreeBSD,isiOS:Fl.isiOS,isLinux:Fl.isLinux,isMacOS:Fl.isMacOS,isSolaris:Fl.isSolaris,isWindows:Fl.isWindows},deviceType:{isDesktop:li.isDesktop,isiPad:li.isiPad,isiPhone:li.isiPhone,isPhone:li.isPhone,isTablet:li.isTablet,isTouch:li.isTouch,isWebView:li.isWebView}},g1=/^\s*|\s*$/g,Gh=e=>Rn(e)?"":(""+e).replace(g1,""),h1=(e,n)=>n?n==="array"&&Na(e)?!0:typeof e===n:e!==void 0,pf=(e,n,o={})=>{const r=ae(e)?e.split(n||","):e||[];let a=r.length;for(;a--;)o[r[a]]={};return o},p1=Kt,b1=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if(Kt(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},Tg=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),va(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(Tg(a,n,o,r),!0)))},Xe={trim:Gh,isArray:Na,is:h1,toArray:yg,makeMap:pf,each:va,map:cl,grep:Dr,inArray:Du,hasOwn:p1,extend:b1,walk:Tg,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>$n(e)?e:e===""?[]:cl(e.split(n||","),Gh),_addCacheSuffix:e=>{const n=Wn.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},_g=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return Lo(r.childNodes[0])},Ib=(e,n)=>{const r=(n||document).createElement(e);return Lo(r)},v1=(e,n)=>{const r=(n||document).createTextNode(e);return Lo(r)},Lo=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ne={fromHtml:_g,fromTag:Ib,fromText:v1,fromDom:Lo,fromPoint:(e,n,o)=>L.from(e.dom.elementFromPoint(n,o)).map(Lo)},y1=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},dc=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Rd=(e,n,o)=>{const r=e.document.createRange();return y1(r,n),dc(r,o),r},da=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},Md=Vr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ym=(e,n,o)=>n(ne.fromDom(o.startContainer),o.startOffset,ne.fromDom(o.endContainer),o.endOffset),Zi=(e,n)=>n.match({domRange:o=>({ltr:lt(o),rtl:L.none}),relative:(o,r)=>({ltr:No(()=>Rd(e,o,r)),rtl:No(()=>L.some(Rd(e,r,o)))}),exact:(o,r,a,u)=>({ltr:No(()=>da(e,o,r,a,u)),rtl:No(()=>L.some(da(e,a,u,o,r)))})}),Zc=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>Md.rtl(ne.fromDom(a.endContainer),a.endOffset,ne.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>ym(e,Md.ltr,o)):ym(e,Md.ltr,o)},ji=(e,n)=>{const o=Zi(e,n);return Zc(e,o)};Md.ltr,Md.rtl;const Cm=8,Pu=9,Ac=11,wr=1,$u=3,ya=(e,n)=>{const o=e.dom;if(o.nodeType!==wr)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},ul=e=>e.nodeType!==wr&&e.nodeType!==Pu&&e.nodeType!==Ac||e.childElementCount===0,Oc=(e,n)=>{const o=n===void 0?document:n.dom;return ul(o)?[]:qt(o.querySelectorAll(e),ne.fromDom)},Iu=(e,n)=>{const o=n===void 0?document:n.dom;return ul(o)?L.none():L.from(o.querySelector(e)).map(ne.fromDom)},On=(e,n)=>e.dom===n.dom,dl=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},bf=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let a=n(e);do a=a.bind(r);while(a.isSome());return o},Un=e=>e.dom.nodeName.toLowerCase(),mc=e=>e.dom.nodeType,Ll=e=>n=>mc(n)===e,Fu=e=>mc(e)===Cm||Un(e)==="#comment",ii=e=>Gr(e)&&Ui(e.dom),Gr=Ll(wr),qr=Ll($u),C1=Ll(Pu),Lu=Ll(Ac),ys=e=>n=>Gr(n)&&Un(n)===e,ml=e=>ne.fromDom(e.dom.ownerDocument),fl=e=>C1(e)?e:ml(e),Gi=e=>ne.fromDom(fl(e).dom.documentElement),gl=e=>ne.fromDom(fl(e).dom.defaultView),To=e=>L.from(e.dom.parentNode).map(ne.fromDom),Sm=e=>L.from(e.dom.parentElement).map(ne.fromDom),qh=(e,n)=>{const o=le(n)?n:Pe;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=ne.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},Kr=e=>{const n=o=>Rt(o,r=>!On(e,r));return To(e).map(ur).map(n).getOr([])},fc=e=>L.from(e.dom.previousSibling).map(ne.fromDom),hl=e=>L.from(e.dom.nextSibling).map(ne.fromDom),$s=e=>$o(bf(e,fc)),qi=e=>bf(e,hl),ur=e=>qt(e.dom.childNodes,ne.fromDom),Dc=(e,n)=>{const o=e.dom.childNodes;return L.from(o[n]).map(ne.fromDom)},Ho=e=>Dc(e,0),ss=e=>Dc(e,e.dom.childNodes.length-1),wm=e=>e.dom.childNodes.length,$a=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ne.fromDom(n)},ro=e=>Lu(e)&&De(e.dom.host),pl=e=>ne.fromDom(e.dom.getRootNode()),bl=e=>ro(e)?e:$a(fl(e)),vl=e=>ro(e)?e:ne.fromDom(fl(e).dom.body),Is=e=>{const n=pl(e);return ro(n)?L.some(n):L.none()},Hu=e=>ne.fromDom(e.dom.host),Ag=e=>{if(De(e.target)){const n=ne.fromDom(e.target);if(Gr(n)&&Kh(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Ks(o)}}return L.from(e.target)},Kh=e=>De(e.dom.shadowRoot),jc=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),Yh=e=>{const n=ne.fromDom(Ag(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=A(r,o);return jc(n,e.clientX,e.clientY,o,r,a,e)},vf=(e,n)=>o=>{e(o)&&n(Yh(o))},Xh=(e,n,o,r,a)=>{const u=vf(o,r);return e.dom.addEventListener(n,u,a),{unbind:ze(Hl,e,n,u,a)}},Wt=(e,n,o,r)=>Xh(e,n,o,r,!1),Hl=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Js=ft,Ws=(e,n,o)=>Wt(e,n,Js,o),Og=()=>ne.fromDom(document),Ln=(e,n=!1)=>e.dom.focus({preventScroll:n}),Nd=e=>{const n=pl(e).dom;return e.dom===n.activeElement},Ia=(e=Og())=>L.from(e.dom.activeElement).map(ne.fromDom),yl=e=>Ia(pl(e)).filter(n=>e.dom.contains(n.dom)),Rr=(e,n)=>{To(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Yr=(e,n)=>{hl(e).fold(()=>{To(e).each(a=>{Ts(a,n)})},r=>{Rr(r,n)})},zu=(e,n)=>{Ho(e).fold(()=>{Ts(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},Ts=(e,n)=>{e.dom.appendChild(n.dom)},xm=(e,n)=>{Rr(e,n),Ts(n,e)},Fa=(e,n)=>{_e(n,(o,r)=>{const a=r===0?e:n[r-1];Yr(a,o)})},ui=(e,n)=>{_e(n,o=>{Ts(e,o)})},Em=(e,n,o)=>{if(ae(o)||Sn(o)||Bs(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},dr=(e,n,o)=>{Em(e.dom,n,o)},Gc=(e,n)=>{const o=e.dom;at(n,(r,a)=>{Em(o,a,r)})},Cs=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},gc=(e,n)=>L.from(Cs(e,n)),zl=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Zs=(e,n)=>{e.dom.removeAttribute(n)},Dg=e=>{const n=e.dom.attributes;return n==null||n.length===0},on=e=>Ro(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Qs=e=>{e.dom.textContent="",_e(ur(e),n=>{x(n)})},x=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},M=e=>{const n=ur(e);n.length>0&&Fa(e,n),x(e)},H=(e,n)=>ne.fromDom(e.dom.cloneNode(n)),X=e=>H(e,!1),re=e=>H(e,!0),Ve=(e,n)=>{const o=ne.fromTag(n),r=on(e);return Gc(o,r),o},Ye=(e,n)=>{const o=Ve(e,n);Yr(e,o);const r=ur(e);return ui(o,r),x(e),o},cn=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,ur(ne.fromDom(r))},un=e=>qt(e,ne.fromDom),Lt=e=>e.dom.innerHTML,wn=(e,n)=>{const r=ml(e).dom,a=ne.fromDom(r.createDocumentFragment()),u=cn(n,r);ui(a,u),Qs(e),Ts(e,a)},Ko=e=>{const n=ne.fromTag("div"),o=ne.fromDom(e.dom.cloneNode(!0));return Ts(n,o),Lt(n)},xr=e=>e.style!==void 0&&le(e.style.getPropertyValue),ks=e=>{const n=qr(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Is(ne.fromDom(n)).fold(()=>o.body.contains(n),Xo(ks,Hu))},Bd=(e,n,o)=>{if(!ae(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);xr(e)&&e.style.setProperty(n,o)},Pd=(e,n)=>{xr(e)&&e.style.removeProperty(n)},yf=(e,n,o)=>{const r=e.dom;Bd(r,n,o)},Rg=(e,n)=>{const o=e.dom;at(n,(r,a)=>{Bd(o,a,r)})},_s=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!ks(e)?Cf(o,n):a},Cf=(e,n)=>xr(e)?e.style.getPropertyValue(n):"",Jh=(e,n)=>{const o=e.dom,r=Cf(o,n);return L.from(r).filter(a=>a.length>0)},Mg=e=>{const n={},o=e.dom;if(xr(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},Vu=(e,n)=>{const o=e.dom;Pd(o,n),ba(gc(e,"style").map(ia),"")&&Zs(e,"style")},is=e=>e.dom.offsetWidth,Tm=((e,n)=>{const o=(b,y)=>{if(!Bs(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const E=b.dom;xr(E)&&(E.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const E=_s(b,e);return parseFloat(E)||0}return y},a=r,u=(b,y)=>Ro(y,(E,R)=>{const B=_s(b,R),P=B===void 0?0:parseInt(B,10);return isNaN(P)?E:E+P},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(b,y,E)=>{const R=u(b,E);return y>R?y-R:0}}})("height",e=>{const n=e.dom;return ks(e)?n.getBoundingClientRect().height:n.offsetHeight}),Xr=e=>Tm.get(e),$d=(e,n)=>({left:e,top:n,translate:(r,a)=>$d(e+r,n+a)}),er=$d,mr=e=>{const n=e.getBoundingClientRect();return er(n.left,n.top)},Sf=(e,n)=>e!==void 0?e:n!==void 0?n:0,v2=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return er(o.offsetLeft,o.offsetTop);const u=Sf(r==null?void 0:r.pageYOffset,a.scrollTop),f=Sf(r==null?void 0:r.pageXOffset,a.scrollLeft),b=Sf(a.clientTop,o.clientTop),y=Sf(a.clientLeft,o.clientLeft);return S1(e).translate(f-y,u-b)},S1=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?er(r.offsetLeft,r.offsetTop):ks(e)?mr(n):er(0,0)},Ng=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return er(o,r)},Ki=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},Qh=(e,n)=>{jr().browser.isSafari()&&le(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Lb=(e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?L.from(u.dom.nodeValue):L.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}},km=(e,n)=>{const r=document.createDocumentFragment();return _e(e,a=>{r.appendChild(a.dom)}),ne.fromDom(r)},ep=Lb(qr,"text"),_m=e=>ep.get(e),wf=e=>ep.getOption(e),w1=(e,n)=>ep.set(e,n),tp=(e,n)=>{const o=Cs(e,n);return o===void 0||o===""?[]:o.split(" ")},y2=(e,n,o)=>{const a=tp(e,n).concat([o]);return dr(e,n,a.join(" ")),!0},C2=(e,n,o)=>{const r=Rt(tp(e,n),a=>a!==o);return r.length>0?dr(e,n,r.join(" ")):Zs(e,n),!1};var Vl=(e,n,o,r,a)=>e(o,r)?L.some(o):le(a)&&a(o)?L.none():n(o,r,a);const Yi=(e,n,o)=>{let r=e.dom;const a=le(o)?o:Pe;for(;r.parentNode;){r=r.parentNode;const u=ne.fromDom(r);if(n(u))return L.some(u);if(a(u))break}return L.none()},Ca=(e,n,o)=>Vl((a,u)=>u(a),Yi,e,n,o),io=(e,n)=>{const o=e.dom;return o.parentNode?hc(ne.fromDom(o.parentNode),r=>!On(e,r)&&n(r)):L.none()},hc=(e,n)=>{const o=a=>n(ne.fromDom(a));return ts(e.dom.childNodes,o).map(ne.fromDom)},x1=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=ne.fromDom(r.childNodes[a]);if(n(u))return L.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return L.none()};return o(e.dom)},Bg=(e,n,o)=>Yi(e,r=>ya(r,n),o),Uu=(e,n)=>Iu(n,e),Id=(e,n,o)=>Vl((a,u)=>ya(a,u),Bg,e,n,o),Cl=e=>e.dom.classList!==void 0,E1=e=>tp(e,"class"),T1=(e,n)=>y2(e,"class",n),hs=(e,n)=>C2(e,"class",n),k1=(e,n)=>Jt(E1(e),n)?hs(e,n):T1(e,n),Ao=(e,n)=>{Cl(e)?e.dom.classList.add(n):T1(e,n)},_1=e=>{(Cl(e)?e.dom.classList:E1(e)).length===0&&Zs(e,"class")},Jr=(e,n)=>{Cl(e)?e.dom.classList.remove(n):hs(e,n),_1(e)},xf=(e,n)=>{const o=Cl(e)?e.dom.classList.toggle(n):k1(e,n);return _1(e),o},Rc=(e,n)=>Cl(e)&&e.dom.classList.contains(n),A1=(e,n)=>{_e(n,o=>{Ao(e,o)})},Hb=(e,n)=>{_e(n,o=>{Jr(e,o)})},S2=e=>Id(e,"[contenteditable]"),Wu=(e,n=!1)=>ks(e)?e.dom.isContentEditable:S2(e).fold(lt(n),o=>zb(o)==="true"),zb=e=>e.dom.contentEditable,Sa=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Fs=(e,n)=>Rt(ur(e),n),Am=(e,n)=>{let o=[];return _e(ur(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Am(r,n))}),o},zo=(e,n)=>Oc(n,e),O1=(e,n,o)=>Yi(e,n,o).isSome(),Om=(e,n)=>io(e,n).isSome(),np=(e,n)=>x1(e,n).isSome(),Vb=(e,n,o)=>Bg(e,n,o).isSome(),Pg=e=>le(e)?e:Pe,w=(e,n,o)=>{let r=e.dom;const a=Pg(o);for(;r.parentNode;){r=r.parentNode;const u=ne.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return L.none()},_=(e,n,o)=>{const r=n(e),a=Pg(o);return r.orThunk(()=>a(e)?L.none():w(e,n,a))},I=e=>wf(e).filter(n=>n.trim().length!==0||n.indexOf(Eo)>-1).isSome(),G=e=>ii(e)&&Cs(e,"contenteditable")==="false",ie=["img","br"],Ne=e=>I(e)||Jt(ie,Un(e))||G(e),tt=e=>x1(e,Ne),hn={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},pn=Vr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Bo=(e,n,o,r)=>e.fold(n,o,r),rs=e=>e.fold(Jo,Jo,Jo),tr=pn.before,La=pn.on,Zu=pn.after,qc={before:tr,on:La,after:Zu,cata:Bo,getStart:rs},di=Vr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Dm=e=>di.exact(e.start,e.soffset,e.finish,e.foffset),$g=e=>e.match({domRange:n=>ne.fromDom(n.startContainer),relative:(n,o)=>qc.getStart(n),exact:(n,o,r,a)=>n}),Ef=di.domRange,Tf=di.relative,D1=di.exact,Ig=e=>{const n=$g(e);return gl(n)},op=hn.create,kf={domRange:Ef,relative:Tf,exact:D1,exactFromRange:Dm,getWin:Ig,range:op},w2=(e,n,o)=>{var r;return L.from((r=e.caretPositionFromPoint)===null||r===void 0?void 0:r.call(e,n,o)).bind(a=>{if(a.offsetNode===null)return L.none();const u=e.createRange();return u.setStart(a.offsetNode,a.offset),u.collapse(),L.some(u)})},Jn=(e,n,o)=>{var r;return L.from((r=e.caretRangeFromPoint)===null||r===void 0?void 0:r.call(e,n,o))},cs=(e,n,o)=>e.caretPositionFromPoint?w2(e,n,o):e.caretRangeFromPoint?Jn(e,n,o):L.none(),pc=(e,n,o)=>{const r=e.document;return cs(r,n,o).map(a=>hn.create(ne.fromDom(a.startContainer),a.startOffset,ne.fromDom(a.endContainer),a.endOffset))},Kc=(e,n)=>{const o=Un(e);return o==="input"?qc.after(e):Jt(["br","img"],o)?n===0?qc.before(e):qc.after(e):qc.on(e,n)},R1=(e,n)=>{const o=e.fold(qc.before,Kc,qc.after),r=n.fold(qc.before,Kc,qc.after);return kf.relative(o,r)},Rm=(e,n,o,r)=>{const a=Kc(e,n),u=Kc(o,r);return kf.relative(a,u)},Fg=e=>e.match({domRange:n=>{const o=ne.fromDom(n.startContainer),r=ne.fromDom(n.endContainer);return Rm(o,n.startOffset,r,n.endOffset)},relative:R1,exact:Rm}),Lg=e=>{const n=kf.getWin(e).dom,o=(a,u,f,b)=>da(n,a,u,f,b),r=Fg(e);return ji(n,r).match({ltr:o,rtl:o})},Cw=(e,n,o)=>pc(e,n,o),_f=e=>{const n=e===void 0?window:e;return jr().browser.isFirefox()?L.none():L.from(n.visualViewport)},Ub=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),Hg=e=>{const n=e===void 0?window:e,o=n.document,r=Ng(ne.fromDom(o));return _f(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return Ub(r.left,r.top,u,f)},a=>Ub(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))};class bc{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,a){if(n){if(!a&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const Wb=/^[ \t\r\n]*$/,Ss=e=>Wb.test(e),Qr=e=>{for(const n of e)if(!_c(n))return!1;return!0},Fd=e=>" \f	\v".indexOf(e)!==-1,sp=e=>e===`
`||e==="\r",ck=(e,n)=>n<e.length&&n>=0?sp(e[n]):!1,Mc=(e,n=4,o=!0,r=!0)=>{const a=ic(" ",n),u=e.replace(/\t/g,a);return Ro(u,(b,y)=>Fd(y)||y===Eo?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||ck(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Eo}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:sp(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},mi=e=>n=>!!n&&n.nodeType===e,Af=e=>!!e&&!Object.getPrototypeOf(e),ht=mi(1),ju=e=>ht(e)&&ii(ne.fromDom(e)),Sw=e=>ht(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",vc=e=>{const n=e.toLowerCase();return o=>De(o)&&o.nodeName.toLowerCase()===n},Ha=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Jt(n,r)}return!1}},Zb=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(ht(r)){const a=r.ownerDocument.defaultView;if(a)for(let u=0;u<o.length;u++){const f=a.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},ww=e=>n=>ht(n)&&n.hasAttribute(e),Mm=e=>ht(e)&&e.hasAttribute("data-mce-bogus"),ak=e=>ht(e)&&e.getAttribute("data-mce-bogus")==="all",Ld=e=>ht(e)&&e.tagName==="TABLE",jb=e=>n=>!!(ju(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),Gb=Ha(["textarea","input"]),je=mi(3),kR=mi(4),Ls=mi(7),Hd=mi(8),Gu=mi(9),Nm=mi(11),As=vc("br"),xw=vc("img"),Ew=vc("a"),Xi=jb("true"),as=jb("false"),zg=e=>ju(e)&&e.isContentEditable&&De(e.parentElement)&&!e.parentElement.isContentEditable,qb=Ha(["td","th"]),qu=Ha(["td","th","caption"]),Ji=Ha(["video","audio","object","embed"]),x2=vc("li"),tn=vc("details"),rp=vc("summary"),cp={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},E2=(e,n,o)=>{const r=ne.fromDom(n),a=ne.fromDom(e),u=o.getWhitespaceElements();return O1(a,b=>Kt(u,Un(b)),ze(On,r))},Tw=e=>ht(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Qi=(e,n)=>ht(e)&&Kt(n.getNonEmptyElements(),e.nodeName),T2=ww("data-mce-bookmark"),k2=e=>Sm(ne.fromDom(e)).exists(n=>!Wu(n)),Vg=(e,n,o)=>Ss(e.data)&&!E2(e,n,o),M1=(e,n,o,r)=>je(e)&&!Vg(e,n,o)&&(!r.includeZwsp||!Qr(e.data)),Kb=(e,n,o,r)=>le(r.isContent)&&r.isContent(n)||Qi(n,e)||T2(n)||Tw(n)||M1(n,o,e,r)||as(n)||Xi(n)&&k2(n),Ku=(e,n,o)=>{const r={...cp,...o};if(r.checkRootAsContent&&Kb(e,n,n,r))return!1;let a=n.firstChild,u=0;if(!a)return!0;const f=new bc(a,n);do{if(r.skipBogus&&ht(a)){const b=a.getAttribute("data-mce-bogus");if(b){a=f.next(b==="all");continue}}if(Hd(a)){a=f.next(!0);continue}if(As(a)){u++,a=f.next();continue}if(Kb(e,a,n,r))return!1;a=f.next()}while(a);return u<=1},ma=(e,n,o)=>Ku(e,n.dom,{checkRootAsContent:!0,...o}),N1=(e,n,o)=>Kb(e,n,n,{includeZwsp:cp.includeZwsp,...o}),_2=e=>{const n=e.toLowerCase();return n==="svg"?"svg":n==="math"?"math":"html"},Bm=e=>_2(e)!=="html",A2=e=>Bm(e.nodeName),kw=e=>_2(e.nodeName),O2=["svg","math"],D2=()=>{const e=Ur(),n=()=>e.get().map(kw).getOr("html");return{track:a=>(A2(a)?e.set(a):e.get().exists(u=>!u.contains(a))&&e.clear(),n()),current:n,reset:()=>{e.clear()}}},B1="data-mce-block",lk=e=>Rt(yr(e),n=>!/[A-Z]/.test(n)),P1=e=>qt(lk(e),n=>{const o=CSS.escape(n);return`${o}:`+qt(O2,r=>`not(${r} ${o})`).join(":")}).join(","),_w=(e,n)=>De(n.querySelector(e))?(n.setAttribute(B1,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(B1),!1),$1=(e,n)=>{const o=P1(e.getTransparentElements()),r=P1(e.getBlockElements());return Rt(n.querySelectorAll(o),a=>_w(r,a))},Aw=(e,n,o)=>{var r;const a=o?"lastChild":"firstChild";for(let u=n[a];u;u=u[a])if(Ku(e,u,{checkRootAsContent:!0})){(r=u.parentNode)===null||r===void 0||r.removeChild(u);return}},_R=(e,n,o)=>{const r=document.createRange(),a=n.parentNode;if(a){r.setStartBefore(n),r.setEndBefore(o);const u=r.extractContents();Aw(e,u,!0),r.setStartAfter(o),r.setEndAfter(n);const f=r.extractContents();Aw(e,f,!1),Ku(e,u,{checkRootAsContent:!0})||a.insertBefore(u,n),Ku(e,o,{checkRootAsContent:!0})||a.insertBefore(o,n),Ku(e,f,{checkRootAsContent:!0})||a.insertBefore(f,n),a.removeChild(n)}},za=(e,n,o)=>{const r=e.getBlockElements(),a=ne.fromDom(n),u=b=>Un(b)in r,f=b=>On(b,a);_e(un(o),b=>{Yi(b,u,f).each(y=>{const E=Fs(b,R=>u(R)&&!e.isValidChild(Un(y),Un(R)));if(E.length>0){const R=Sm(y);_e(E,B=>{Yi(B,u,f).each(P=>{_R(e,P.dom,B.dom)})}),R.each(B=>$1(e,B.dom))}})})},Zt=(e,n,o)=>{_e([...o,...fi(e,n)?[n]:[]],r=>_e(zo(ne.fromDom(r),r.nodeName.toLowerCase()),a=>{M2(e,a.dom)&&M(a)}))},Yu=(e,n)=>{const o=$1(e,n);za(e,n,o),Zt(e,n,o)},Yb=(e,n)=>{if(Xb(e,n)){const o=P1(e.getBlockElements());_w(o,n)}},ik=(e,n,o)=>{const r=u=>On(u,ne.fromDom(n)),a=qh(ne.fromDom(o),r);tl(a,a.length-2).filter(Gr).fold(()=>Yu(e,n),u=>Yu(e,u.dom))},R2=e=>e.hasAttribute(B1),Ug=(e,n)=>Kt(e.getTransparentElements(),n),Xb=(e,n)=>ht(n)&&Ug(e,n.nodeName),fi=(e,n)=>Xb(e,n)&&R2(n),M2=(e,n)=>Xb(e,n)&&!R2(n),Wg=(e,n)=>n.type===1&&Ug(e,n.name)&&ae(n.attr(B1)),Ow=jr().browser,Dw=e=>ts(e,Gr),ws=e=>Ow.isFirefox()&&Un(e)==="table"?Dw(ur(e)).filter(n=>Un(n)==="caption").bind(n=>Dw(qi(n)).map(o=>{const r=o.dom.offsetTop,a=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=a?-u:0})).getOr(0):0,gi=(e,n)=>e.children&&Jt(e.children,n),Va=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&_s(ne.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!gi(f,o);){const b=f;r+=b.offsetLeft||0,a+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!gi(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=ws(ne.fromDom(n))}return{x:r,y:a}},Of=(e,n={})=>{let o=0;const r={},a=ne.fromDom(e),u=fl(a),f=oe=>{n.referrerPolicy=oe},b=oe=>{n.contentCssCors=oe},y=oe=>{Ts(bl(a),oe)},E=oe=>{const me=bl(a);Uu(me,"#"+oe).each(x)},R=oe=>yo(r,oe).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),B=oe=>new Promise((me,ge)=>{let ve;const Ie=Xe._addCacheSuffix(oe),Ze=R(Ie);r[Ie]=Ze,Ze.count++;const pt=(gt,$t)=>{_e(gt,vr),Ze.status=$t,Ze.passed=[],Ze.failed=[],ve&&(ve.onload=null,ve.onerror=null,ve=null)},Ae=()=>pt(Ze.passed,2),we=()=>pt(Ze.failed,3);if(me&&Ze.passed.push(me),ge&&Ze.failed.push(ge),Ze.status===1)return;if(Ze.status===2){Ae();return}if(Ze.status===3){we();return}Ze.status=1;const Le=ne.fromTag("link",u.dom);Gc(Le,{rel:"stylesheet",type:"text/css",id:Ze.id}),n.contentCssCors&&dr(Le,"crossOrigin","anonymous"),n.referrerPolicy&&dr(Le,"referrerpolicy",n.referrerPolicy),ve=Le.dom,ve.onload=Ae,ve.onerror=we,y(Le),dr(Le,"href",Ie)}),P=(oe,me)=>{const ge=R(oe);r[oe]=ge,ge.count++;const ve=ne.fromTag("style",u.dom);Gc(ve,{rel:"stylesheet",type:"text/css",id:ge.id,"data-mce-key":oe}),ve.dom.innerHTML=me,y(ve)},z=oe=>Promise.allSettled(qt(oe,ge=>B(ge).then(lt(ge)))).then(ge=>{const ve=gs(ge,Ie=>Ie.status==="fulfilled");return ve.fail.length>0?Promise.reject(qt(ve.fail,Ie=>Ie.reason)):qt(ve.pass,Ie=>Ie.value)}),j=oe=>{const me=Xe._addCacheSuffix(oe);yo(r,me).each(ge=>{--ge.count===0&&(delete r[me],E(ge.id))})};return{load:B,loadRawCss:P,loadAll:z,unload:j,unloadRawCss:oe=>{yo(r,oe).each(me=>{--me.count===0&&(delete r[oe],E(me.id))})},unloadAll:oe=>{_e(oe,me=>{j(me)})},_setReferrerPolicy:f,_setContentCssCors:b}},N2=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=pl(o).dom;return L.from(e.get(u)).getOrThunk(()=>{const f=Of(u,r);return e.set(u,f),f})}}})(),Bc=e=>e.nodeName.toLowerCase()==="span",Yc=(e,n)=>De(e)&&(N1(n,e)||n.isInline(e.nodeName.toLowerCase())),Jb=(e,n,o)=>{const r=new bc(e,n).prev(!1),a=new bc(e,n).next(!1),u=bs(r)||Yc(r,o),f=bs(a)||Yc(a,o);return u&&f},$e=e=>Bc(e)&&e.getAttribute("data-mce-type")==="bookmark",Sl=(e,n,o)=>je(e)&&e.data.length>0&&Jb(e,n,o),Rw=e=>ht(e)?e.childNodes.length>0:!1,Mr=e=>Nm(e)||Gu(e),wl=(e,n,o,r)=>{var a;const u=r||n;if(ht(n)&&$e(n))return n;const f=n.childNodes;for(let b=f.length-1;b>=0;b--)wl(e,f[b],o,u);if(ht(n)){const b=n.childNodes;b.length===1&&$e(b[0])&&((a=n.parentNode)===null||a===void 0||a.insertBefore(b[0],n))}return!Mr(n)&&!N1(o,n)&&!Rw(n)&&!Sl(n,u,o)&&e.remove(n),n},eu=Xe.makeMap,Qb=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tu=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mw=/[<>&\"\']/g,xl=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Qn={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Ua={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},I1={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},nr=e=>{const n=ne.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},F1=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!Ua[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},hi=F1("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ev=(e,n)=>e.replace(n?Qb:tu,o=>Ua[o]||o),El=e=>(""+e).replace(Mw,n=>Ua[n]||n),Nw=(e,n)=>e.replace(n?Qb:tu,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Ua[o]||"&#"+o.charCodeAt(0)+";"),pe=(e,n,o)=>{const r=o||hi;return e.replace(n?Qb:tu,a=>Ua[a]||r[a]||a)},Vo={encodeRaw:ev,encodeAllRaw:El,encodeNumeric:Nw,encodeNamed:pe,getEncodeFunc:(e,n)=>{const o=F1(n)||hi,r=(f,b)=>f.replace(b?Qb:tu,y=>Ua[y]!==void 0?Ua[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),a=(f,b)=>pe(f,b,o),u=eu(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:pe:u.numeric?Nw:ev},decode:e=>e.replace(xl,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Qn[o]||String.fromCharCode(o)):I1[n]||hi[n]||nr(n))},us=(e,n)=>(e=Xe.trim(e),e?e.split(n||" "):[]),yc=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),Uo=e=>Ot(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Pw=e=>{const n=o=>$n(o)?qt(o,n):Uo(o)?new RegExp(o.source,o.flags):Ot(o)?In(o,n):o;return n(e)},Df=e=>{const n=/^(~)?(.+)$/;return zr(us(e,","),o=>{const r=n.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},B2=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),Zg=e=>{let n,o;n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(n+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));const r=[n,o].join(" ");return{blockContent:n,phrasingContent:o,flowContent:r}},jg=e=>{const{blockContent:n,phrasingContent:o,flowContent:r}=Zg(e),a=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:a(n),phrasingContent:a(o),flowContent:a(r)})},$w={html4:No(()=>jg("html4")),html5:No(()=>jg("html5")),"html5-strict":No(()=>jg("html5-strict"))},Iw=(e,n)=>{const{blockContent:o,phrasingContent:r,flowContent:a}=$w[e]();return n==="blocks"?L.some(o):n==="phrasing"?L.some(r):n==="flow"?L.some(a):L.none()},Gg=e=>{const n=B2(e),{phrasingContent:o,flowContent:r}=Zg(e),a={},u=(y,E,R)=>{a[y]={attributes:vs(E,lt({})),attributesOrder:E,children:vs(R,lt({}))}},f=(y,E="",R="")=>{const B=us(R),P=us(y);let z=P.length;const j=[...n,...us(E)];for(;z--;)u(P[z],j.slice(),B)},b=(y,E)=>{const R=us(y),B=us(E);let P=R.length;for(;P--;){const z=a[R[P]];for(let j=0,Z=B.length;j<Z;j++)z.attributes[B[j]]={},z.attributesOrder.push(B[j])}};return e!=="html5-strict"&&(_e(us("acronym applet basefont big font strike tt"),R=>{f(R,"",o)}),_e(us("center dir isindex noframes"),R=>{f(R,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&_e([a.video,a.audio],y=>{delete y.children.audio,delete y.children.video}),_e(us("a form meter progress dfn"),y=>{a[y]&&delete a[y].children[y]}),delete a.caption.children.table,delete a.script,a},ap=e=>e==="-"?"remove":"add",P2=e=>{const n=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return L.from(n.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},uk=e=>{const n=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return zr(us(e,","),o=>{const r=n.exec(o);if(r){const a=r[1],u=a?ap(a):"replace",f=r[2],b=zr(us(r[3],"|"),y=>P2(y).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},Fw=(e,n)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:a,attributesOrder:u}=n;return _e(us(e,"|"),f=>{const b=o.exec(f);if(b){const y={},E=b[1],R=b[2].replace(/[\\:]:/g,":"),B=b[3],P=b[4];if(E==="!"&&(n.attributesRequired=n.attributesRequired||[],n.attributesRequired.push(R),y.required=!0),E==="-"){delete a[R],u.splice(Xe.inArray(u,R),1);return}if(B&&(B==="="?(n.attributesDefault=n.attributesDefault||[],n.attributesDefault.push({name:R,value:P}),y.defaultValue=P):B==="~"?(n.attributesForced=n.attributesForced||[],n.attributesForced.push({name:R,value:P}),y.forcedValue=P):B==="<"&&(y.validValues=Xe.makeMap(P,"?"))),r.test(R)){const z=y;n.attributePatterns=n.attributePatterns||[],z.pattern=yc(R),n.attributePatterns.push(z)}else a[R]||u.push(R),a[R]=y}})},Pc=(e,n)=>{at(e.attributes,(o,r)=>{n.attributes[r]=o}),n.attributesOrder.push(...e.attributesOrder)},Pm=(e,n)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return zr(us(n,","),r=>{const a=o.exec(r);if(a){const u=a[1],f=a[2],b=a[3],y=a[4],E=a[5],R={attributes:{},attributesOrder:[]};if(e.each(B=>Pc(B,R)),u==="#"?R.paddEmpty=!0:u==="-"&&(R.removeEmpty=!0),y==="!"&&(R.removeEmptyAttrs=!0),E&&Fw(E,R),b&&(R.outputName=f),f==="@")if(e.isNone())e=L.some(R);else return[];return[b?{name:f,element:R,aliasName:b}:{name:f,element:R}]}else return[]})},nu={},Xu=Xe.makeMap,Tl=Xe.each,wa=Xe.extend,qg=Xe.explode,Er=(e,n={})=>{const o=Xu(e," ",Xu(e.toUpperCase()," "));return wa(o,n)},tv=e=>Er("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Ul=(e,n)=>{if(e){const o={};return ae(e)&&(e={"*":e}),Tl(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?Xu(r,/[, ]/):qg(r,/[, ]/)}),o}else return},Xc=(e={})=>{var n;const o={},r={};let a=[];const u={},f={},b=(Ht,Vn,Gs)=>{const Ir=e[Ht];if(Ir)return Xu(Ir,/[, ]/,Xu(Ir.toUpperCase(),/[, ]/));{let kc=nu[Ht];return kc||(kc=Er(Vn,Gs),nu[Ht]=kc),kc}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",E=Gg(y);e.verify_html===!1&&(e.valid_elements="*[*]");const R=Ul(e.valid_styles),B=Ul(e.invalid_styles,"map"),P=Ul(e.valid_classes,"map"),z=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),j=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Z=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Y=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),oe="td th iframe video audio object script code",me=b("non_empty_elements",oe+" pre svg textarea summary",Z),ge=b("move_caret_before_on_enter_elements",oe+" table",Z),ve="h1 h2 h3 h4 h5 h6",Ie=b("text_block_elements",ve+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Ze=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",Ie),pt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Ae=b("transparent_elements","a ins del canvas map"),we=b("wrap_block_elements","pre "+ve);Tl("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Ht=>{f[Ht]=new RegExp("</"+Ht+"[^>]*>","gi")});const Le=Ht=>{const Vn=L.from(o["@"]),Gs=/[*?+]/;_e(Pm(Vn,Ht??""),({name:Ir,element:kc,aliasName:Fr})=>{if(Fr&&(o[Fr]=kc),Gs.test(Ir)){const Rs=kc;Rs.pattern=yc(Ir),a.push(Rs)}else o[Ir]=kc})},gt=Ht=>{a=[],_e(yr(o),Vn=>{delete o[Vn]}),Le(Ht)},$t=(Ht,Vn)=>{var Gs,Ir;delete nu.text_block_elements,delete nu.block_elements;const kc=Vn.extends?!ka(Vn.extends):!1,Fr=Vn.extends;if(r[Ht]=Fr?r[Fr]:{},u[Ht]=Fr??Ht,me[Ht.toUpperCase()]={},me[Ht]={},kc||(Ze[Ht.toUpperCase()]={},Ze[Ht]={}),Fr&&!o[Ht]&&o[Fr]){const Rs=Pw(o[Fr]);delete Rs.removeEmptyAttrs,delete Rs.removeEmpty,o[Ht]=Rs}else o[Ht]={attributesOrder:[],attributes:{}};if($n(Vn.attributes)){const Rs=Nl=>{Ms.attributesOrder.push(Nl),Ms.attributes[Nl]={}},Ms=(Gs=o[Ht])!==null&&Gs!==void 0?Gs:{};delete Ms.attributesDefault,delete Ms.attributesForced,delete Ms.attributePatterns,delete Ms.attributesRequired,Ms.attributesOrder=[],Ms.attributes={},_e(Vn.attributes,Nl=>{const cm=B2(y);P2(Nl).each(({preset:fg,name:lf})=>{fg?lf==="global"&&_e(cm,Rs):Rs(lf)})}),o[Ht]=Ms}if(Sn(Vn.padEmpty)){const Rs=(Ir=o[Ht])!==null&&Ir!==void 0?Ir:{};Rs.paddEmpty=Vn.padEmpty,o[Ht]=Rs}if($n(Vn.children)){const Rs={},Ms=cm=>{Rs[cm]={}},Nl=cm=>{Iw(y,cm).each(fg=>{_e(fg,Ms)})};_e(Vn.children,cm=>{P2(cm).each(({preset:fg,name:lf})=>{fg?Nl(lf):Ms(lf)})}),r[Ht]=Rs}Fr&&at(r,(Rs,Ms)=>{Rs[Fr]&&(r[Ms]=Rs=wa({},r[Ms]),Rs[Ht]=Rs[Fr])})},kn=Ht=>{_e(Df(Ht??""),({name:Vn,cloneName:Gs})=>{$t(Vn,{extends:Gs})})},Dn=Ht=>{Ot(Ht)?at(Ht,(Vn,Gs)=>$t(Gs,Vn)):ae(Ht)&&kn(Ht)},oo=Ht=>{_e(uk(Ht??""),({operation:Vn,name:Gs,validChildren:Ir})=>{const kc=Vn==="replace"?{"#comment":{}}:r[Gs],Fr=Ms=>{Vn==="remove"?delete kc[Ms]:kc[Ms]={}},Rs=Ms=>{Iw(y,Ms).each(Nl=>{_e(Nl,Fr)})};_e(Ir,({preset:Ms,name:Nl})=>{Ms?Rs(Nl):Fr(Nl)}),r[Gs]=kc})},ko=Ht=>{const Vn=o[Ht];if(Vn)return Vn;let Gs=a.length;for(;Gs--;){const Ir=a[Gs];if(Ir.pattern.test(Ht))return Ir}},Ds=()=>{e.valid_elements?(gt(e.valid_elements),Tl(E,(Ht,Vn)=>{r[Vn]=Ht.children})):(Tl(E,(Ht,Vn)=>{o[Vn]={attributes:Ht.attributes,attributesOrder:Ht.attributesOrder},r[Vn]=Ht.children}),Tl(us("strong/b em/i"),Ht=>{const Vn=us(Ht,"/");o[Vn[1]].outputName=Vn[0]}),Tl(pt,(Ht,Vn)=>{o[Vn]&&(e.padd_empty_block_inline_children&&(o[Vn].paddInEmptyBlock=!0),o[Vn].removeEmpty=!0)}),Tl(us("ol ul blockquote a table tbody"),Ht=>{o[Ht]&&(o[Ht].removeEmpty=!0)}),Tl(us("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),Ht=>{o[Ht]&&(o[Ht].paddEmpty=!0)}),Tl(us("span"),Ht=>{o[Ht].removeEmptyAttrs=!0})),delete o.svg,Dn(e.custom_elements),oo(e.valid_children),Le(e.extended_valid_elements),oo("+ol[ul|ol],+ul[ul|ol]"),Tl({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Ht,Vn)=>{o[Vn]&&(o[Vn].parentsRequired=us(Ht))}),e.invalid_elements&&Tl(qg(e.invalid_elements),Ht=>{o[Ht]&&delete o[Ht]}),ko("span")||Le("span[!data-mce-type|*]")},cc=lt(R),Tc=lt(B),st=lt(P),Bt=lt(Y),Xn=lt(Ze),so=lt(Ie),Be=lt(pt),Ge=lt(Object.seal(Z)),Nt=lt(j),_n=lt(me),Pn=lt(ge),fo=lt(z),Cd=lt(Ae),mg=lt(we),Ya=lt(Object.seal(f)),Xl=(Ht,Vn)=>{const Gs=r[Ht.toLowerCase()];return!!(Gs&&Gs[Vn.toLowerCase()])},yu=(Ht,Vn)=>{const Gs=ko(Ht);if(Gs)if(Vn){if(Gs.attributes[Vn])return!0;const Ir=Gs.attributePatterns;if(Ir){let kc=Ir.length;for(;kc--;)if(Ir[kc].pattern.test(Vn))return!0}}else return!0;return!1},ka=Ht=>Kt(Xn(),Ht),Ml=Ht=>!Ps(Ht,"#")&&yu(Ht)&&!ka(Ht),Sd=Ht=>Kt(mg(),Ht)||Ml(Ht),d1=lt(u);return Ds(),{type:y,children:r,elements:o,getValidStyles:cc,getValidClasses:st,getBlockElements:Xn,getInvalidStyles:Tc,getVoidElements:Ge,getTextBlockElements:so,getTextInlineElements:Be,getBoolAttrs:Bt,getElementRule:ko,getSelfClosingElements:Nt,getNonEmptyElements:_n,getMoveCaretBeforeOnEnterElements:Pn,getWhitespaceElements:fo,getTransparentElements:Cd,getSpecialElements:Ya,isValidChild:Xl,isValid:yu,isBlock:ka,isInline:Ml,isWrapper:Sd,getCustomElements:d1,addValidElements:Le,setValidElements:gt,addCustomElements:Dn,addValidChildren:oo}},Lw=e=>({value:ec(e)}),ec=e=>Sr(e,"#").toUpperCase(),Rf=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},$m=e=>{const n=Rf(e.red)+Rf(e.green)+Rf(e.blue);return Lw(n)},Mf=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,Nf=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,dk=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),L1=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return dk(a,u,f,b)},lp=e=>Mf.test(e)?"rgb":Nf.test(e)?"rgba":"other",Hw=e=>{const n=Mf.exec(e);if(n!==null)return L.some(L1(n[1],n[2],n[3],"1"));const o=Nf.exec(e);return o!==null?L.some(L1(o[1],o[2],o[3],o[4])):L.none()},or=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,H1=e=>Hw(e).map($m).map(n=>"#"+n.value).getOr(e),zd=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,b;const y=Wr;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const E=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let B=0;B<E.length;B++)u[E[B]]=y+B,u[y+B]=E[B];const R={parse:B=>{const P={};let z=!1;const j=e.url_converter,Z=e.url_converter_scope||R,Y=(Ae,we,Le)=>{const gt=P[Ae+"-top"+we];if(!gt)return;const $t=P[Ae+"-right"+we];if(!$t)return;const kn=P[Ae+"-bottom"+we];if(!kn)return;const Dn=P[Ae+"-left"+we];if(!Dn)return;const oo=[gt,$t,kn,Dn];let ko=oo.length-1;for(;ko--&&oo[ko]===oo[ko+1];);ko>-1&&Le||(P[Ae+we]=ko===-1?oo[0]:oo.join(" "),delete P[Ae+"-top"+we],delete P[Ae+"-right"+we],delete P[Ae+"-bottom"+we],delete P[Ae+"-left"+we])},oe=Ae=>{const we=P[Ae];if(!we)return;const Le=we.indexOf(",")>-1?[we]:we.split(" ");let gt=Le.length;for(;gt--;)if(Le[gt]!==Le[0])return!1;return P[Ae]=Le[0],!0},me=(Ae,we,Le,gt)=>{oe(we)&&oe(Le)&&oe(gt)&&(P[Ae]=P[we]+" "+P[Le]+" "+P[gt],delete P[we],delete P[Le],delete P[gt])},ge=Ae=>(z=!0,u[Ae]),ve=(Ae,we)=>(z&&(Ae=Ae.replace(/\uFEFF[0-9]/g,Le=>u[Le])),we||(Ae=Ae.replace(/\\([\'\";:])/g,"$1")),Ae),Ie=Ae=>String.fromCharCode(parseInt(Ae.slice(1),16)),Ze=Ae=>Ae.replace(/\\[0-9a-f]+/gi,Ie),pt=(Ae,we,Le,gt,$t,kn)=>{if($t=$t||kn,$t)return $t=ve($t),"'"+$t.replace(/\'/g,"\\'")+"'";if(we=ve(we||Le||gt||""),!e.allow_script_urls){const Dn=we.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Dn)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Dn))return""}return j&&(we=j.call(Z,we,"style")),"url('"+we.replace(/\'/g,"\\'")+"')"};if(B){B=B.replace(/[\u0000-\u001F]/g,""),B=B.replace(/\\[\"\';:\uFEFF]/g,ge).replace(/\"[^\"]+\"|\'[^\']+\'/g,we=>we.replace(/[;:]/g,ge));let Ae;for(;Ae=r.exec(B);){r.lastIndex=Ae.index+Ae[0].length;let we=Ae[1].replace(a,"").toLowerCase(),Le=Ae[2].replace(a,"");if(we&&Le){if(we=Ze(we),Le=Ze(Le),we.indexOf(y)!==-1||we.indexOf('"')!==-1||!e.allow_script_urls&&(we==="behavior"||/expression\s*\(|\/\*|\*\//.test(Le)))continue;we==="font-weight"&&Le==="700"?Le="bold":(we==="color"||we==="background-color")&&(Le=Le.toLowerCase()),lp(Le)==="rgb"&&Hw(Le).each(gt=>{Le=H1(or(gt)).toLowerCase()}),Le=Le.replace(o,pt),P[we]=z?ve(Le,!0):Le}}Y("border","",!0),Y("border","-width"),Y("border","-color"),Y("border","-style"),Y("padding",""),Y("margin",""),me("border","border-width","border-style","border-color"),P.border==="medium none"&&delete P.border,P["border-image"]==="none"&&delete P["border-image"]}return P},serialize:(B,P)=>{let z="";const j=(Y,oe)=>{const me=oe[Y];if(me)for(let ge=0,ve=me.length;ge<ve;ge++){const Ie=me[ge],Ze=B[Ie];Ze&&(z+=(z.length>0?" ":"")+Ie+": "+Ze+";")}},Z=(Y,oe)=>{if(!b||!oe)return!0;let me=b["*"];return me&&me[Y]?!1:(me=b[oe],!(me&&me[Y]))};return P&&f?(j("*",f),j(P,f)):at(B,(Y,oe)=>{Y&&Z(oe,P)&&(z+=(z.length>0?" ":"")+oe+": "+Y+";")}),z}};return R},z1={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},$2=e=>e instanceof Event||le(e.initEvent),Kg=e=>e.isDefaultPrevented===ft||e.isDefaultPrevented===Pe,Wl=e=>Rn(e.preventDefault)||$2(e),Bf=(e,n)=>{const o=n??{};for(const r in e)Kt(z1,r)||(o[r]=e[r]);return De(e.composedPath)&&(o.composedPath=()=>e.composedPath()),De(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),De(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},Pf=(e,n,o,r)=>{var a;const u=Bf(n,r);return u.type=e,Rn(u.target)&&(u.target=(a=u.srcElement)!==null&&a!==void 0?a:o),Wl(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=ft,le(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=ft,le(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=ft,u.stopPropagation()},Kg(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?ft:Pe,u.isPropagationStopped=u.cancelBubble===!0?ft:Pe,u.isImmediatePropagationStopped=Pe)),u},zw="mce-data-",nv=/^(?:mouse|contextmenu)|click/,V1=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},Yg=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},Vw=e=>De(e)&&nv.test(e.type),ip=(e,n)=>{const o=Pf(e.type,e,document,n);if(Vw(e)&&bs(e.pageX)&&!bs(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},I2=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{Yg(e,"DOMContentLoaded",f),Yg(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(a)),e=null};u()?f():V1(e,"DOMContentLoaded",f),o.domLoaded||V1(e,"load",f)};class Ju{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=zw+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const b=window,y=P=>{u.executeHandlers(ip(P||b.event),E)};if(!n||je(n)||Hd(n))return r;let E;n[u.expando]?E=n[u.expando]:(E=u.count++,n[u.expando]=E,u.events[E]={}),a=a||n;const R=o.split(" ");let B=R.length;for(;B--;){let P=R[B],z=y,j=!1,Z=!1;if(P==="DOMContentLoaded"&&(P="ready"),u.domLoaded&&P==="ready"&&n.readyState==="complete"){r.call(a,ip({type:P}));continue}!u.hasFocusIn&&(P==="focusin"||P==="focusout")&&(j=!0,Z=P==="focusin"?"focus":"blur",z=Y=>{const oe=ip(Y||b.event);oe.type=oe.type==="focus"?"focusin":"focusout",u.executeHandlers(oe,E)}),f=u.events[E][P],f?P==="ready"&&u.domLoaded?r(ip({type:P})):f.push({func:r,scope:a}):(u.events[E][P]=f=[{func:r,scope:a}],f.fakeName=Z,f.capture=j,f.nativeHandler=z,P==="ready"?I2(n,z,u):V1(n,Z||P,z,j))}return n=f=null,r}unbind(n,o,r){if(!n||je(n)||Hd(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],E=u[y];if(E){if(r){let R=E.length;for(;R--;)if(E[R].func===r){const B=E.nativeHandler,P=E.fakeName,z=E.capture,j=E.slice(0,R).concat(E.slice(R+1));j.nativeHandler=B,j.fakeName=P,j.capture=z,u[y]=j}}(!r||E.length===0)&&(delete u[y],Yg(n,E.fakeName||y,E.nativeHandler,E.capture))}}}else at(u,(f,b)=>{Yg(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Kt(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||je(n)||Hd(n))return this;const a=ip({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(a,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!a.isPropagationStopped());return this}clean(n){if(!n||je(n)||Hd(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const b=a[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Ju.Event=new Ju;const bi=Xe.each,Vd=Xe.grep,Im="data-mce-style",Uw=Xe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),$f=(e,n,o)=>{Rn(o)||o===""?Zs(e,n):dr(e,n,o)},ov=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Xg=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&je(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},F2=(e,n)=>{const o=Cs(n,"style"),r=e.serialize(e.parse(o),Un(n));$f(n,Im,r)},Ww=(e,n)=>Bs(e)?Kt(Uw,n)?e+"":e+"px":e,U1=(e,n,o)=>{const r=ov(n);Rn(o)||o===""?Vu(e,r):yf(e,r,Ww(o,r))},sv=(e,n,o)=>{const r=n.keep_values,a={set:(f,b,y)=>{const E=ne.fromDom(f);le(n.url_converter)&&De(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const R="data-mce-"+y;$f(E,R,b),$f(E,y,b)},get:(f,b)=>{const y=ne.fromDom(f);return Cs(y,"data-mce-"+b)||Cs(y,b)}},u={style:{set:(f,b)=>{const y=ne.fromDom(f);r&&$f(y,Im,b),Zs(y,"style"),ae(b)&&Rg(y,e.parse(b))},get:f=>{const b=ne.fromDom(f),y=Cs(b,Im)||Cs(b,"style");return e.serialize(e.parse(y),Un(b))}}};return r&&(u.href=u.src=a),u},mo=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,b=!0,y=N2.forElement(ne.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),E=[],R=n.schema?n.schema:Xc({}),B=zd({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),P=n.ownEvents?new Ju:Ju.Event,z=R.getBlockElements(),j=be=>ae(be)?Kt(z,be):ht(be)&&(Kt(z,be.nodeName)||fi(R,be)),Z=be=>be&&e&&ae(be)?e.getElementById(be):be,Y=be=>{const Se=Z(be);return De(Se)?ne.fromDom(Se):null},oe=(be,Se,ot="")=>{let qe;const Gt=Y(be);if(De(Gt)&&Gr(Gt)){const Kn=Mb[Se];Kn&&Kn.get?qe=Kn.get(Gt.dom,Se):qe=Cs(Gt,Se)}return De(qe)?qe:ot},me=be=>{const Se=Z(be);return Rn(Se)?[]:Se.attributes},ge=(be,Se,ot)=>{Bt(be,qe=>{if(ht(qe)){const Gt=ne.fromDom(qe),Kn=ot===""?null:ot,qs=Cs(Gt,Se),_a=Mb[Se];_a&&_a.set?_a.set(Gt.dom,Kn,Se):$f(Gt,Se,Kn),qs!==Kn&&n.onSetAttrib&&n.onSetAttrib({attrElm:Gt.dom,attrName:Se,attrValue:Kn})}})},ve=(be,Se)=>be.cloneNode(Se),Ie=()=>n.root_element||e.body,Ze=be=>{const Se=Hg(be);return{x:Se.x,y:Se.y,w:Se.width,h:Se.height}},pt=(be,Se)=>Va(e.body,Z(be),Se),Ae=(be,Se,ot)=>{Bt(be,qe=>{const Gt=ne.fromDom(qe);U1(Gt,Se,ot),n.update_styles&&F2(B,Gt)})},we=(be,Se)=>{Bt(be,ot=>{const qe=ne.fromDom(ot);at(Se,(Gt,Kn)=>{U1(qe,Kn,Gt)}),n.update_styles&&F2(B,qe)})},Le=(be,Se,ot)=>{const qe=Z(be);if(!(Rn(qe)||!ju(qe)&&!Sw(qe)))return ot?_s(ne.fromDom(qe),ov(Se)):(Se=Se.replace(/-(\D)/g,(Gt,Kn)=>Kn.toUpperCase()),Se==="float"&&(Se="cssFloat"),qe.style?qe.style[Se]:void 0)},gt=be=>{const Se=Z(be);if(!Se)return{w:0,h:0};let ot=Le(Se,"width"),qe=Le(Se,"height");return(!ot||ot.indexOf("px")===-1)&&(ot="0"),(!qe||qe.indexOf("px")===-1)&&(qe="0"),{w:parseInt(ot,10)||Se.offsetWidth||Se.clientWidth,h:parseInt(qe,10)||Se.offsetHeight||Se.clientHeight}},$t=be=>{const Se=Z(be),ot=pt(Se),qe=gt(Se);return{x:ot.x,y:ot.y,w:qe.w,h:qe.h}},kn=(be,Se)=>{if(!be)return!1;const ot=$n(be)?be:[be];return vo(ot,qe=>ya(ne.fromDom(qe),Se))},Dn=(be,Se,ot,qe)=>{const Gt=[];let Kn=Z(be);qe=qe===void 0;const qs=ot||(Ie().nodeName!=="BODY"?Ie().parentNode:null);if(ae(Se))if(Se==="*")Se=ht;else{const _a=Se;Se=am=>kn(am,_a)}for(;Kn&&!(Kn===qs||Rn(Kn.nodeType)||Gu(Kn)||Nm(Kn));){if(!Se||Se(Kn))if(qe)Gt.push(Kn);else return[Kn];Kn=Kn.parentNode}return qe?Gt:null},oo=(be,Se,ot)=>{const qe=Dn(be,Se,ot,!1);return qe&&qe.length>0?qe[0]:null},ko=(be,Se,ot)=>{let qe=Se;if(be){ae(Se)&&(qe=Gt=>kn(Gt,Se));for(let Gt=be[ot];Gt;Gt=Gt[ot])if(le(qe)&&qe(Gt))return Gt}return null},Ds=(be,Se)=>ko(be,Se,"nextSibling"),cc=(be,Se)=>ko(be,Se,"previousSibling"),Tc=be=>le(be.querySelectorAll),st=(be,Se)=>{var ot,qe;const Gt=(qe=(ot=Z(Se))!==null&&ot!==void 0?ot:n.root_element)!==null&&qe!==void 0?qe:e;return Tc(Gt)?lr(Gt.querySelectorAll(be)):[]},Bt=function(be,Se,ot){const qe=ot??this;if($n(be)){const Gt=[];return bi(be,(Kn,qs)=>{const _a=Z(Kn);_a&&Gt.push(Se.call(qe,_a,qs))}),Gt}else{const Gt=Z(be);return Gt?Se.call(qe,Gt):!1}},Xn=(be,Se)=>{Bt(be,ot=>{at(Se,(qe,Gt)=>{ge(ot,Gt,qe)})})},so=(be,Se)=>{Bt(be,ot=>{const qe=ne.fromDom(ot);wn(qe,Se)})},Be=(be,Se,ot,qe,Gt)=>Bt(be,Kn=>{const qs=ae(Se)?e.createElement(Se):Se;return De(ot)&&Xn(qs,ot),qe&&(!ae(qe)&&qe.nodeType?qs.appendChild(qe):ae(qe)&&so(qs,qe)),Gt?qs:Kn.appendChild(qs)}),Ge=(be,Se,ot)=>Be(e.createElement(be),be,Se,ot,!0),Nt=Vo.decode,_n=Vo.encodeAllRaw,Pn=(be,Se,ot="")=>{let qe="<"+be;for(const Gt in Se)$l(Se,Gt)&&(qe+=" "+Gt+'="'+_n(Se[Gt])+'"');return Xs(ot)&&Kt(R.getVoidElements(),be)?qe+" />":qe+">"+ot+"</"+be+">"},fo=be=>{const Se=e.createElement("div"),ot=e.createDocumentFragment();ot.appendChild(Se),be&&(Se.innerHTML=be);let qe;for(;qe=Se.firstChild;)ot.appendChild(qe);return ot.removeChild(Se),ot},Cd=(be,Se)=>Bt(be,ot=>{const qe=ne.fromDom(ot);return Se&&_e(ur(qe),Gt=>{qr(Gt)&&Gt.dom.length===0?x(Gt):Rr(qe,Gt)}),x(qe),qe.dom}),mg=be=>Bt(be,Se=>{const ot=Se.attributes;for(let qe=ot.length-1;qe>=0;qe--)Se.removeAttributeNode(ot.item(qe))}),Ya=be=>B.parse(be),Xl=(be,Se)=>B.serialize(be,Se),yu=be=>{if(gg!==mo.DOM&&e===document){if(o[be])return;o[be]=!0}let Se=e.getElementById("mceDefaultStyles");if(!Se){Se=e.createElement("style"),Se.id="mceDefaultStyles",Se.type="text/css";const ot=e.head;ot.firstChild?ot.insertBefore(Se,ot.firstChild):ot.appendChild(Se)}Se.styleSheet?Se.styleSheet.cssText+=be:Se.appendChild(e.createTextNode(be))},ka=be=>{be||(be=""),_e(be.split(","),Se=>{a[Se]=!0,y.load(Se).catch(wt)})},Ml=(be,Se,ot)=>{Bt(be,qe=>{if(ht(qe)){const Gt=ne.fromDom(qe),Kn=Se.split(" ");_e(Kn,qs=>{De(ot)?(ot?Ao:Jr)(Gt,qs):xf(Gt,qs)})}})},Sd=(be,Se)=>{Ml(be,Se,!0)},d1=(be,Se)=>{Ml(be,Se,!1)},Ht=(be,Se)=>{const ot=Y(be),qe=Se.split(" ");return De(ot)&&An(qe,Gt=>Rc(ot,Gt))},Vn=be=>{Bt(be,Se=>Vu(ne.fromDom(Se),"display"))},Gs=be=>{Bt(be,Se=>yf(ne.fromDom(Se),"display","none"))},Ir=be=>{const Se=Y(be);return De(Se)&&ba(Jh(Se,"display"),"none")},kc=be=>(be||"mce_")+u++,Fr=be=>{const Se=Y(be);return De(Se)?ht(Se.dom)?Se.dom.outerHTML:Ko(Se):""},Rs=(be,Se)=>{Bt(be,ot=>{ht(ot)&&(ot.outerHTML=Se)})},Ms=(be,Se)=>{const ot=Z(Se);return Bt(be,qe=>{const Gt=ot==null?void 0:ot.parentNode,Kn=ot==null?void 0:ot.nextSibling;return Gt&&(Kn?Gt.insertBefore(qe,Kn):Gt.appendChild(qe)),qe})},Nl=(be,Se,ot)=>Bt(Se,qe=>{var Gt;const Kn=$n(Se)?be.cloneNode(!0):be;return ot&&bi(Vd(qe.childNodes),qs=>{Kn.appendChild(qs)}),(Gt=qe.parentNode)===null||Gt===void 0||Gt.replaceChild(Kn,qe),qe}),cm=(be,Se)=>{if(be.nodeName!==Se.toUpperCase()){const ot=Ge(Se);return bi(me(be),qe=>{ge(ot,qe.nodeName,oe(be,qe.nodeName))}),Nl(ot,be,!0),ot}else return be},fg=(be,Se)=>{let ot=be;for(;ot;){let qe=Se;for(;qe&&ot!==qe;)qe=qe.parentNode;if(ot===qe)break;ot=ot.parentNode}return!ot&&be.ownerDocument?be.ownerDocument.documentElement:ot},lf=(be,Se,ot)=>Oa(Se)?Ku(R,be,{...ot,isContent:Gt=>{const Kn=Gt.nodeName.toLowerCase();return!!Se[Kn]}}):Ku(R,be,ot),m2=()=>e.createRange(),Rb=(be,Se,ot)=>{let qe=m2(),Gt,Kn;if(be&&Se&&be.parentNode&&Se.parentNode){const qs=be.parentNode;return qe.setStart(qs,Xg(be)),qe.setEnd(Se.parentNode,Xg(Se)),Gt=qe.extractContents(),qe=m2(),qe.setStart(Se.parentNode,Xg(Se)+1),qe.setEnd(qs,Xg(be)+1),Kn=qe.extractContents(),qs.insertBefore(wl(gg,Gt,R),be),ot?qs.insertBefore(ot,be):qs.insertBefore(Se,be),qs.insertBefore(wl(gg,Kn,R),be),Cd(be),ot||Se}else return},$h=(be,Se,ot,qe)=>{if($n(be)){let Gt=be.length;const Kn=[];for(;Gt--;)Kn[Gt]=$h(be[Gt],Se,ot,qe);return Kn}else return n.collect&&(be===e||be===r)&&E.push([be,Se,ot,qe]),P.bind(be,Se,ot,qe||gg)},wd=(be,Se,ot)=>{if($n(be)){let qe=be.length;const Gt=[];for(;qe--;)Gt[qe]=wd(be[qe],Se,ot);return Gt}else{if(E.length>0&&(be===e||be===r)){let qe=E.length;for(;qe--;){const[Gt,Kn,qs]=E[qe];be===Gt&&(!Se||Se===Kn)&&(!ot||ot===qs)&&P.unbind(Gt,Kn,qs)}}return P.unbind(be,Se,ot)}},Ih=(be,Se,ot)=>P.dispatch(be,Se,ot),pw=(be,Se,ot)=>P.dispatch(be,Se,ot),f2=be=>{if(be&&ju(be)){const Se=be.getAttribute("data-mce-contenteditable");return Se&&Se!=="inherit"?Se:be.contentEditable!=="inherit"?be.contentEditable:null}else return null},gg={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:E,styles:B,schema:R,events:P,isBlock:j,root:null,clone:ve,getRoot:Ie,getViewPort:Ze,getRect:$t,getSize:gt,getParent:oo,getParents:Dn,get:Z,getNext:Ds,getPrev:cc,select:st,is:kn,add:Be,create:Ge,createHTML:Pn,createFragment:fo,remove:Cd,setStyle:Ae,getStyle:Le,setStyles:we,removeAllAttribs:mg,setAttrib:ge,setAttribs:Xn,getAttrib:oe,getPos:pt,parseStyle:Ya,serializeStyle:Xl,addStyle:yu,loadCSS:ka,addClass:Sd,removeClass:d1,hasClass:Ht,toggleClass:Ml,show:Vn,hide:Gs,isHidden:Ir,uniqueId:kc,setHTML:so,getOuterHTML:Fr,setOuterHTML:Rs,decode:Nt,encode:_n,insertAfter:Ms,replace:Nl,rename:cm,findCommonAncestor:fg,run:Bt,getAttribs:me,isEmpty:lf,createRng:m2,nodeIndex:Xg,split:Rb,bind:$h,unbind:wd,fire:pw,dispatch:Ih,getContentEditable:f2,getContentEditableParent:be=>{const Se=Ie();let ot=null;for(let qe=be;qe&&qe!==Se&&(ot=f2(qe),ot===null);qe=qe.parentNode);return ot},isEditable:be=>{if(De(be)){const Se=ht(be)?be:be.parentElement;return De(Se)&&ju(Se)&&Wu(ne.fromDom(Se))}else return!1},destroy:()=>{if(E.length>0){let be=E.length;for(;be--;){const[Se,ot,qe]=E[be];P.unbind(Se,ot,qe)}}at(a,(be,Se)=>{y.unload(Se),delete a[Se]})},isChildOf:(be,Se)=>be===Se||Se.contains(be),dumpRng:be=>"startContainer: "+be.startContainer.nodeName+", startOffset: "+be.startOffset+", endContainer: "+be.endContainer.nodeName+", endOffset: "+be.endOffset},Mb=sv(B,n,lt(gg));return gg};mo.DOM=mo(document),mo.nodeIndex=Xg;const Zw=mo.DOM,up=0,L2=1,W1=2,mk=3;class Nr{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const a=Zw;let u;const f=()=>{a.remove(E),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},E=a.uniqueId();u=document.createElement("script"),u.id=E,u.type="text/javascript",u.src=Xe._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===W1}markDone(n){this.states[n]=W1}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=up),new Promise((a,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:a,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,E)=>{yo(o.scriptLoadedCallbacks,E).each(R=>{_e(R,B=>B[y](E))}),delete o.scriptLoadedCallbacks[E]},a=y=>{const E=Rt(y,R=>R.status==="rejected");return E.length>0?Promise.reject(zr(E,({reason:R})=>$n(R)?R:[R])):Promise.resolve()},u=y=>Promise.allSettled(qt(y,E=>o.states[E]===W1?(r("resolve",E),Promise.resolve()):o.states[E]===mk?(r("reject",E),Promise.reject(E)):(o.states[E]=L2,o.loadScript(E).then(()=>{o.states[E]=W1,r("resolve",E);const R=o.queue;return R.length>0?(o.queue=[],u(R).then(a)):Promise.resolve()},()=>(o.states[E]=mk,r("reject",E),Promise.reject(E)))))),f=y=>(o.loading=!0,u(y).then(E=>{o.loading=!1;const R=o.queueLoadedCallbacks.shift();return L.from(R).each(vr),a(E)})),b=sl(n);return o.loading?new Promise((y,E)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(y,E)})}):f(b)}}Nr.ScriptLoader=new Nr;const fk=(e,n)=>{const o=e.indexOf(n);return o!==-1&&e.indexOf(n,o+1)>o},gk=e=>Ot(e)&&Kt(e,"raw"),H2=e=>$n(e)&&e.length>1,rv={},z2=ns("en"),V2=()=>yo(rv,z2.get()),fr={getData:()=>In(rv,e=>({...e})),setCode:e=>{e&&z2.set(e)},getCode:()=>z2.get(),add:(e,n)=>{let o=rv[e];o||(rv[e]=o={});const r=qt(yr(n),a=>a.toLowerCase());at(n,(a,u)=>{const f=u.toLowerCase();f!==u&&fk(r,f)?(Kt(n,f)||(o[f]=a),o[u]=a):o[f]=a})},translate:e=>{const n=V2().getOr({}),o=f=>le(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,a=f=>{const b=o(f);return Kt(n,b)?o(n[b]):yo(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(gk(e))return o(e.raw);if(H2(e)){const f=e.slice(1),b=a(e[0]).replace(/\{([0-9]+)\}/g,(y,E)=>Kt(f,E)?o(f[E]):y);return u(b)}return u(a(e))},isRtl:()=>V2().bind(e=>yo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Kt(rv,e)},Br=()=>{const e=[],n={},o={},r=[],a=(Z,Y)=>{const oe=Rt(r,me=>me.name===Z&&me.state===Y);_e(oe,me=>me.resolve())},u=Z=>Kt(n,Z),f=Z=>Kt(o,Z),b=Z=>{if(o[Z])return o[Z].instance},y=(Z,Y)=>{const oe=fr.getCode(),me=","+(Y||"")+",";!oe||Y&&me.indexOf(","+oe+",")===-1||Nr.ScriptLoader.add(n[Z]+"/langs/"+oe+".js")},E=(Z,Y)=>{Br.languageLoad!==!1&&(u(Z)?y(Z,Y):j(Z,"loaded").then(()=>y(Z,Y)))},R=(Z,Y)=>(e.push(Y),o[Z]={instance:Y},a(Z,"added"),Y),B=Z=>{delete n[Z],delete o[Z]},P=(Z,Y)=>ae(Y)?ae(Z)?{prefix:"",resource:Y,suffix:""}:{prefix:Z.prefix,resource:Y,suffix:Z.suffix}:Y,z=(Z,Y)=>{if(n[Z])return Promise.resolve();let oe=ae(Y)?Y:Y.prefix+Y.resource+Y.suffix;oe.indexOf("/")!==0&&oe.indexOf("://")===-1&&(oe=Br.baseURL+"/"+oe),n[Z]=oe.substring(0,oe.lastIndexOf("/"));const me=()=>(a(Z,"loaded"),Promise.resolve());return o[Z]?me():Nr.ScriptLoader.add(oe).then(me)},j=(Z,Y="added")=>Y==="added"&&f(Z)||Y==="loaded"&&u(Z)?Promise.resolve():new Promise(oe=>{r.push({name:Z,state:Y,resolve:oe})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:E,add:R,remove:B,createUrl:P,load:z,waitFor:j}};Br.languageLoad=!0,Br.baseURL="",Br.PluginManager=Br(),Br.ThemeManager=Br(),Br.ModelManager=Br();const If=lt("mce-annotation"),Co=lt("data-mce-annotation"),Jg=lt("data-mce-annotation-uid"),dp=lt("data-mce-annotation-active"),Z1=lt("data-mce-annotation-classes"),Qg=lt("data-mce-annotation-attrs"),av=e=>n=>On(n,e),Gw=(e,n)=>{const o=e.selection.getRng(),r=ne.fromDom(o.startContainer),a=ne.fromDom(e.getBody()),u=n.fold(()=>"."+If(),y=>`[${Co()}="${y}"]`),f=Dc(r,o.startOffset).getOr(r);return Id(f,u,av(a)).bind(y=>gc(y,`${Jg()}`).bind(E=>gc(y,`${Co()}`).map(R=>{const B=lv(e,E);return{uid:E,name:R,elements:B}})))},qw=e=>Gr(e)&&Rc(e,If()),W2=(e,n)=>zl(e,"data-mce-bogus")||Vb(e,'[data-mce-bogus="all"]',av(n)),lv=(e,n)=>{const o=ne.fromDom(e.getBody()),r=zo(o,`[${Jg()}="${n}"]`);return Rt(r,a=>!W2(a,o))},iv=(e,n)=>{const o=ne.fromDom(e.getBody()),r=zo(o,`[${Co()}="${n}"]`),a={};return _e(r,u=>{if(!W2(u,o)){const f=Cs(u,Jg()),b=yo(a,f).getOr([]);a[f]=b.concat([u])}}),a},Kw=(e,n)=>{const o=ns({}),r=()=>({listeners:[],previous:Ur()}),a=(B,P)=>{u(B,z=>(P(z),z))},u=(B,P)=>{const z=o.get(),j=yo(z,B).getOrThunk(r),Z=P(j);z[B]=Z,o.set(z)},f=(B,P,z)=>{a(B,j=>{_e(j.listeners,Z=>Z(!0,B,{uid:P,nodes:qt(z,Y=>Y.dom)}))})},b=B=>{a(B,P=>{_e(P.listeners,z=>z(!1,B))})},y=(B,P)=>{_e(lv(e,B),z=>{P?dr(z,dp(),"true"):Zs(z,dp())})},E=zi(()=>{const B=Io(n.getNames());_e(B,P=>{u(P,z=>{const j=z.previous.get();return Gw(e,L.some(P)).fold(()=>{j.each(Z=>{b(P),z.previous.clear(),y(Z,!1)})},({uid:Z,name:Y,elements:oe})=>{ba(j,Z)||(j.each(me=>y(me,!1)),f(Y,Z,oe),z.previous.set(Z),y(Z,!0))}),{previous:z.previous,listeners:z.listeners}})})},30);return e.on("remove",()=>{E.cancel()}),e.on("NodeChange",()=>{E.throttle()}),{addListener:(B,P)=>{u(B,z=>({previous:z.previous,listeners:z.listeners.concat([P])}))}}},Yw=(e,n)=>{const o=Co(),r=u=>L.from(u.attr(o)).bind(n.lookup),a=u=>{var f,b;u.attr(Jg(),null),u.attr(Co(),null),u.attr(dp(),null);const y=L.from(u.attr(Qg())).map(P=>P.split(",")).getOr([]),E=L.from(u.attr(Z1())).map(P=>P.split(",")).getOr([]);_e(y,P=>u.attr(P,null));const R=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],B=ku(R,[If()].concat(E));u.attr("class",B.length>0?B.join(" "):null),u.attr(Z1(),null),u.attr(Qg(),null)};e.serializer.addTempAttr(dp()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},Ff=()=>{const e={};return{register:(a,u)=>{e[a]={name:a,settings:u}},lookup:a=>yo(e,a).map(u=>u.settings),getNames:()=>yr(e)}},mp=(e,n,o=Pe)=>{const r=new bc(e,n),a=u=>{let f;do f=r[u]();while(f&&!je(f)&&!o(f));return L.from(f).filter(je)};return{current:()=>L.from(r.current()).filter(je),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},su=(e,n)=>{const o=n||(f=>e.isBlock(f)||As(f)||as(f)),r=(f,b,y,E)=>{if(je(f)){const R=E(f,b,f.data);if(R!==-1)return L.some({container:f,offset:R})}return y().bind(R=>r(R.container,R.offset,y,E))};return{backwards:(f,b,y,E)=>{const R=mp(f,E??e.getRoot(),o);return r(f,b,()=>R.prev().map(B=>({container:B,offset:B.length})),y).getOrNull()},forwards:(f,b,y,E)=>{const R=mp(f,E??e.getRoot(),o);return r(f,b,()=>R.next().map(B=>({container:B,offset:0})),y).getOrNull()}}},uv=["td","th"],fp=["thead","tbody","tfoot"],j1=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],Xw=["li","dd","dt"],Jw=["ul","ol","dl"],OR=["pre","script","textarea","style"],G1=e=>{let n;return o=>(n=n||vs(e,ft),Kt(n,Un(o)))},Z2=e=>Un(e)==="table",Fm=e=>Gr(e)&&Un(e)==="br",j2=G1(j1),gp=G1(Jw),vi=G1(Xw),dv=G1(fp),Lm=G1(uv),eh=G1(OR),pk=e=>{const n=[];let o=e.dom;for(;o;)n.push(ne.fromDom(o)),o=o.lastChild;return n},mv=e=>{const n=zo(e,"br"),o=Rt(pk(e).slice(-1),Fm);n.length===o.length&&_e(o,x)},Hm=()=>{const e=ne.fromTag("br");return dr(e,"data-mce-bogus","1"),e},zm=e=>{Qs(e),Ts(e,Hm())},bk=(e,n)=>{ss(e).each(o=>{fc(o).each(r=>{n.isBlock(Un(e))&&Fm(o)&&n.isBlock(Un(r))&&x(o)})})},tc=Wr,q1=_c,Wa=ct,K1=e=>e.insertContent(tc,{preserve_zwsp:!0}),Qw=ht,Ud=je,Tr=e=>(Ud(e)&&(e=e.parentNode),Qw(e)&&e.hasAttribute("data-mce-caret")),Jc=e=>Ud(e)&&q1(e.data),gr=e=>Tr(e)||Jc(e),Y1=e=>e.firstChild!==e.lastChild||!As(e.firstChild),G2=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(tc),u=e.parentNode;if(n){const f=e.previousSibling;if(Ud(f)){if(gr(f))return f;if(fv(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(a,e)}else{const f=e.nextSibling;if(Ud(f)){if(gr(f))return f;if(hp(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(a,e.nextSibling):u==null||u.appendChild(a)}return a},q2=e=>{const n=e.container();return je(n)?n.data.charAt(e.offset())===tc||e.isAtStart()&&Jc(n.previousSibling):!1},X1=e=>{const n=e.container();return je(n)?n.data.charAt(e.offset()-1)===tc||e.isAtEnd()&&Jc(n.nextSibling):!1},vk=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Hm().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},hp=e=>Ud(e)&&e.data[0]===tc,fv=e=>Ud(e)&&e.data[e.data.length-1]===tc,K2=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Mm(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},gv=e=>e&&e.hasAttribute("data-mce-caret")?(K2(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Y2=e=>Tr(e.startContainer),Lf=Math.round,Wd=e=>e?{left:Lf(e.left),top:Lf(e.top),bottom:Lf(e.bottom),right:Lf(e.right),width:Lf(e.width),height:Lf(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},So=(e,n)=>(e=Wd(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Hf=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,J1=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,zf=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:J1(n.top-e.bottom,e,n)},pp=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:J1(n.bottom-e.top,e,n),X2=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,ex=e=>Ro(e,(n,o)=>n.fold(()=>L.some(o),r=>{const a=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return L.some({top:u,right:f,bottom:b,left:a,width:f-a,height:b-u})}),L.none()),Vf=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-a)*(o-a))},Q1=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),bp=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Qc=(e,n)=>{if(ht(e)&&e.hasChildNodes()){const o=e.childNodes,r=Td(n,0,o.length-1);return o[r]}else return e},e0=(e,n)=>{if(!(n<0&&ht(e)&&e.hasChildNodes()))return Qc(e,n)},$c=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Qu=e=>ae(e)&&e.charCodeAt(0)>=768&&$c.test(e),J2=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},tx=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Q2=Xi,hv=as,eC=As,tC=je,nC=Ha(["script","style","textarea"]),t0=Ha(["img","input","textarea","hr","iframe","video","audio","object","embed"]),oC=Ha(["table"]),n0=gr,ru=e=>n0(e)?!1:tC(e)?!nC(e.parentNode):t0(e)||eC(e)||oC(e)||nc(e),nx=e=>ht(e)&&e.getAttribute("unselectable")==="true",nc=e=>!nx(e)&&hv(e),yk=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(nc(o))return!1;if(Q2(o))return!0}return!0},Uf=e=>nc(e)?!Ro(lr(e.getElementsByTagName("*")),(n,o)=>n||Q2(o),!1):!1,ox=e=>t0(e)||Uf(e),pv=(e,n)=>ru(e)&&yk(e,n),bv=ht,o0=ru,vv=Zb("display","block table"),sx=Zb("float","left right"),s0=tx(bv,o0,bo(sx)),r0=bo(Zb("white-space","pre pre-line pre-wrap")),Hs=je,sr=As,Cc=mo.nodeIndex,kr=e0,_r=e=>e?e.createRange():mo.DOM.createRng(),js=e=>ae(e)&&/[\r\n\t ]/.test(e),c0=e=>!!e.setStart&&!!e.setEnd,a0=e=>{const n=e.startContainer,o=e.startOffset;if(js(e.toString())&&r0(n.parentNode)&&je(n)){const r=n.data;if(js(r[o-1])||js(r[o+1]))return!0}return!1},sC=e=>{const n=e.ownerDocument,o=_r(n),r=n.createTextNode(Eo),a=e.parentNode;a.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Wd(o.getBoundingClientRect());return a.removeChild(r),u},rx=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&je(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),Vm(u)}else return null},yv=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Vm=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=Wd(r[0]):o=Wd(e.getBoundingClientRect()),!c0(e)&&sr(e)&&yv(o)?sC(e):yv(o)&&c0(e)&&(n=rx(e))!==null&&n!==void 0?n:o},Um=(e,n)=>{const o=So(e,n);return o.width=1,o.right=o.left+1,o},rC=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&Hf(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=_r(f.ownerDocument);if(b<f.data.length){if(Qu(f.data[b]))return;if(Qu(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!a0(y))){o(Um(Vm(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),a0(y)||o(Um(Vm(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),a0(y)||o(Um(Vm(y),!0)))},a=e.container(),u=e.offset();if(Hs(a))return r(a,u),n;if(bv(a))if(e.isAtEnd()){const f=kr(a,u);Hs(f)&&r(f,f.data.length),s0(f)&&!sr(f)&&o(Um(Vm(f),!1))}else{const f=kr(a,u);if(Hs(f)&&r(f,0),s0(f)&&e.isAtEnd())return o(Um(Vm(f),!1)),n;const b=kr(e.container(),e.offset()-1);s0(b)&&!sr(b)&&(vv(b)||vv(f)||!s0(f))&&o(Um(Vm(b),!1)),s0(f)&&o(Um(Vm(f),!0))}return n},Oe=(e,n,o)=>{const r=()=>(Hs(e),n===0),a=()=>Hs(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const R=_r(e.ownerDocument);return R.setStart(e,n),R.setEnd(e,n),R},f=()=>(o||(o=rC(Oe(e,n))),o),b=()=>f().length>0,y=R=>R&&e===R.container()&&n===R.offset(),E=R=>kr(e,R?n-1:n);return{container:lt(e),offset:lt(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:a,isEqual:y,getNode:E}};Oe.fromRangeStart=e=>Oe(e.startContainer,e.startOffset),Oe.fromRangeEnd=e=>Oe(e.endContainer,e.endOffset),Oe.after=e=>Oe(e.parentNode,Cc(e)+1),Oe.before=e=>Oe(e.parentNode,Cc(e)),Oe.isAbove=(e,n)=>Ys(Ks(n.getClientRects()),Us(e.getClientRects()),zf).getOr(!1),Oe.isBelow=(e,n)=>Ys(Us(n.getClientRects()),Ks(e.getClientRects()),pp).getOr(!1),Oe.isAtStart=e=>e?e.isAtStart():!1,Oe.isAtEnd=e=>e?e.isAtEnd():!1,Oe.isTextPosition=e=>e?je(e.container()):!1,Oe.isElementPosition=e=>!Oe.isTextPosition(e);const l0=(e,n)=>{je(n)&&n.data.length===0&&e.remove(n)},cx=(e,n,o)=>{n.insertNode(o),l0(e,o.previousSibling),l0(e,o.nextSibling)},Ck=(e,n,o)=>{const r=L.from(o.firstChild),a=L.from(o.lastChild);n.insertNode(o),r.each(u=>l0(e,u.previousSibling)),a.each(u=>l0(e,u.nextSibling))},ed=(e,n,o)=>{Nm(o)?Ck(e,n,o):cx(e,n,o)},yi=je,cC=Mm,i0=mo.nodeIndex,vp=e=>{const n=e.parentNode;return cC(n)?vp(n):n},yp=e=>e?Ru(e.childNodes,(n,o)=>(cC(o)&&o.nodeName!=="BR"?n=n.concat(yp(o)):n.push(o),n),[]):[],ax=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&yi(o);)n+=o.data.length;return n},Cp=e=>n=>e===n,Cv=e=>{let n,o;n=yp(vp(e)),o=Vi(n,Cp(e),e),n=n.slice(0,o+1);const r=Ru(n,(a,u,f)=>(yi(u)&&yi(n[f-1])&&a++,a),0);return n=Dr(n,Ha([e.nodeName])),o=Vi(n,Cp(e),e),o-r},th=e=>(yi(e)?"text()":e.nodeName.toLowerCase())+"["+Cv(e)+"]",Zd=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e;a=a.parentNode)r.push(a);return r},Zl=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(yi(r))u=ax(r,a);else{const b=r.childNodes;a>=b.length?(u="after",a=b.length-1):u="before",r=b[a]}o.push(th(r));let f=Zd(e,r);return f=Dr(f,bo(Mm)),o=o.concat(cl(f,b=>th(b))),o.reverse().join("/")+","+u},Sp=(e,n,o)=>{let r=yp(e);return r=Dr(r,(a,u)=>!yi(a)||!yi(r[u-1])),r=Dr(r,Ha([n])),r[o]},u0=(e,n)=>{let o=e,r=0;for(;yi(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!yi(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return yi(e)&&n>e.data.length&&(n=e.data.length),Oe(e,n)},aC=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=Ru(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),Sp(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!yi(u)&&u.parentNode){let f;return a==="after"?f=i0(u)+1:f=i0(u),Oe(u.parentNode,f)}return u0(u,parseInt(a,10))},Sv=as,xa=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let a=n.previousSibling;a&&je(a);a=a.previousSibling)r+=e(a.data).length;return r},d0=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(je(u))b.push(o?xa(n,u,f):f);else{let E=0;const R=u.childNodes;f>=R.length&&R.length&&(E=1,f=Math.max(0,R.length-1)),b.push(e.nodeIndex(R[f],o)+E)}for(let E=u;E&&E!==y;E=E.parentNode)b.push(e.nodeIndex(E,o));return b},Sk=(e,n,o,r)=>{const a=n.dom,u=d0(a,e,o,r,!0),f=n.isForward(),b=Y2(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=d0(a,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},wv=(e,n,o)=>{let r=0;return Xe.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},lC=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(ht(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},nh=e=>(lC(e,!0),lC(e,!1),e),xv=(e,n)=>{if(ht(e)&&(e=Qc(e,n),Sv(e)))return e;if(gr(e)){je(e)&&Tr(e)&&(e=e.parentNode);let o=e.previousSibling;if(Sv(o)||(o=e.nextSibling,Sv(o)))return o}},Wm=e=>xv(e.startContainer,e.startOffset)||xv(e.endContainer,e.endOffset),Ev=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||Sv(r)){const f=r.nodeName;return{name:f,index:wv(o.dom,f,r)}}const u=Wm(a);if(u){const f=u.tagName;return{name:f,index:wv(o.dom,f,u)}}return Sk(e,o,n,a)},wk=e=>{const n=e.getRng();return{start:Zl(e.dom.getRoot(),Oe.fromRangeStart(n)),end:Zl(e.dom.getRoot(),Oe.fromRangeEnd(n)),forward:e.isForward()}},ea=e=>({rng:e.getRng(),forward:e.isForward()}),cu=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},kl=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:wv(o,b,f)};const E=nh(r.cloneRange());if(!u){E.collapse(!1);const B=cu(o,a+"_end",n);ed(o,E,B)}r=nh(r),r.collapse(!0);const R=cu(o,a+"_start",n);return ed(o,r,R),e.moveToBookmark({id:a,keep:!0,forward:y}),{id:a,forward:y}},xk=(e,n,o=!1)=>n===2?Ev(Wa,o,e):n===3?wk(e):n?ea(e):kl(e,!1),Wf=ze(Ev,Jo,!0),Ek=e=>e.type==="inline-command"||e.type==="inline-format",Tk=e=>e.type==="block-command"||e.type==="block-format",kk=(e,n)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===n,_k=e=>{var n;const o=a=>Fo.error({message:a,pattern:e}),r=(a,u,f)=>{if(e.format!==void 0){let b;if($n(e.format)){if(!An(e.format,ae))return o(a+" pattern has non-string items in the `format` array");b=e.format}else if(ae(e.format))b=[e.format];else return o(a+" pattern has non-string `format` parameter");return Fo.value(u(b))}else return e.cmd!==void 0?ae(e.cmd)?Fo.value(f(e.cmd,e.value)):o(a+" pattern has non-string `cmd` parameter"):o(a+" pattern is missing both `format` and `cmd` parameters")};if(!Ot(e))return o("Raw pattern is not an object");if(!ae(e.start))return o("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!ae(e.end))return o("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return o("Inline pattern has empty `start` and `end` parameters");let a=e.start,u=e.end;return u.length===0&&(u=a,a=""),r("Inline",f=>({type:"inline-format",start:a,end:u,format:f}),(f,b)=>({type:"inline-command",start:a,end:u,cmd:f,value:b}))}else{if(e.replacement!==void 0)return ae(e.replacement)?e.start.length===0?o("Replacement pattern has empty `start` parameter"):Fo.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):o("Replacement pattern has non-string `replacement` parameter");{const a=(n=e.trigger)!==null&&n!==void 0?n:"space";return e.start.length===0?o("Block pattern has empty `start` parameter"):r("Block",u=>({type:"block-format",start:e.start,format:u[0],trigger:a}),(u,f)=>({type:"block-command",start:e.start,cmd:u,value:f,trigger:a}))}}},Tn=e=>Rt(e,Tk),Pt=e=>Rt(e,Ek),oh=(e,n)=>({inlinePatterns:Pt(e),blockPatterns:Tn(e),dynamicPatternsLookup:n}),m0=(e,n)=>({...e,blockPatterns:Rt(e.blockPatterns,o=>kk(o,n))}),Tv=e=>{const n=bg(qt(e,_k));return _e(n.errors,o=>console.error(o.message,o.pattern)),n.values},Ak=e=>n=>{const o=e(n);return Tv(o)},lx=(e,n)=>e.dispatch("PreProcess",n),es=(e,n)=>e.dispatch("PostProcess",n),kv=e=>{e.dispatch("remove")},iC=e=>{e.dispatch("detach")},ix=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},Me=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},_v=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},ux=e=>{e.dispatch("PreInit")},Av=e=>{e.dispatch("PostRender")},dx=e=>{e.dispatch("Init")},Zf=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},sh=(e,n,o)=>{e.dispatch(n,o)},jf=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},mx=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},wp=(e,n)=>e.dispatch("BeforeSetContent",n),Wo=(e,n)=>e.dispatch("SetContent",n),td=(e,n)=>e.dispatch("BeforeGetContent",n),uC=(e,n)=>e.dispatch("GetContent",n),Zm=(e,n)=>{e.dispatch("AutocompleterStart",n)},au=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},dC=(e,n)=>{e.dispatch("AutocompleterUpdateActiveRange",n)},Ok=e=>{e.dispatch("AutocompleterEnd")},mC=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Dk=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),fx=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Rk=(e,n)=>e.dispatch("EditableRootStateChange",{state:n}),Mk=(e,n)=>e.dispatch("DisabledStateChange",{state:n}),Ov=jr().deviceType,We=Ov.isTouch(),Nk=mo.DOM,Sc=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ro(n,(o,r)=>{const a=r.split("="),u=a[0],f=a.length>1?a[1]:u;return o[ia(u)]=ia(f),o},{})},gx=e=>en(e,RegExp),vt=e=>n=>n.options.get(e),Dv=e=>ae(e)||Ot(e),hx=(e,n="")=>o=>{const r=ae(o);if(r)if(o.indexOf("=")!==-1){const a=Sc(o);return{value:yo(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},sn=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:hx(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:hx(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=ae(o)&&dn(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=Jt(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Sn(o)?{valid:!0,value:o}:ae(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||ae(o)||bn(o,ae);return r?ae(o)?{value:qt(o.split(","),ia),valid:r}:$n(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Gn(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=ae(o)||bn(o,ae);return r?{value:$n(o)?o:qt(o.split(","),ia),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("extended_mathml_attributes",{processor:"string[]"}),n("extended_mathml_elements",{processor:"string[]"}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Sn(o)||ae(o);return r?o===!1||Ov.isiPhone()||Ov.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!We}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"string"}),n("service_message",{processor:"string"}),n("onboarding",{processor:"boolean",default:!0}),n("tiny_cloud_entry_url",{processor:"string"}),n("theme",{processor:o=>o===!1||ae(o)||le(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||ae(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("disabled",{processor:o=>Sn(o)?(e.initialized&&Rp(e)!==o&&Promise.resolve().then(()=>{Mk(e,o)}),{valid:!0,value:o}):{valid:!1,message:"The value must be a boolean."},default:!1}),n("readonly",{processor:"boolean",default:!1}),n("editable_root",{processor:"boolean",default:!0}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("allow_mathml_annotation_encodings",{processor:o=>{const r=bn(o,ae);return r?{value:o,valid:r}:{valid:!1,message:"Must be an array of strings."}},default:[]}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean",default:!0}),n("pad_empty_with_br",{processor:"boolean",default:!1}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:Dv}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Dv}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Dv}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Dv}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>ae(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("license_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>bn(o,Ot)||o===!1?{value:Tv(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),n("text_patterns_lookup",{processor:o=>le(o)?{value:Ak(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>bn(o,gx)?{value:o,valid:!0}:gx(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),n("highlight_on_focus",{processor:"boolean",default:!0}),n("xss_sanitization",{processor:"boolean",default:!0}),n("details_initial_state",{processor:o=>{const r=Jt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("details_serialized_state",{processor:o=>{const r=Jt(["inherited","collapsed","expanded"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),n("init_content_sync",{processor:"boolean",default:!1}),n("newdocument_content",{processor:"string",default:""}),n("sandbox_iframes",{processor:"boolean",default:!0}),n("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),n("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:fr.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:Nk.getAttrib(e.getElement(),"placeholder")})})},Bk=vt("iframe_attrs"),px=vt("doctype"),Pk=vt("document_base_url"),$k=vt("body_id"),Ik=vt("body_class"),Fk=vt("content_security_policy"),Lk=vt("br_in_pre"),ta=vt("forced_root_block"),f0=vt("forced_root_block_attrs"),Yt=vt("newline_behavior"),fC=vt("br_newline_selector"),jm=vt("no_newline_selector"),Ci=vt("keep_styles"),Rv=vt("end_container_on_empty_block"),Za=vt("automatic_uploads"),g0=vt("images_reuse_filename"),h0=vt("images_replace_blob_uris"),p0=vt("icons"),xp=vt("icons_url"),bx=vt("images_upload_url"),Hk=vt("images_upload_base_path"),lu=vt("images_upload_credentials"),rh=vt("images_upload_handler"),zn=vt("content_css_cors"),Si=vt("referrer_policy"),Gf=vt("language"),zk=vt("language_url"),Ep=vt("indent_use_margin"),jn=vt("indentation"),Vk=vt("content_css"),Uk=vt("content_style"),gC=vt("font_css"),Wk=vt("directionality"),Mv=vt("inline_boundaries_selector"),Zk=vt("object_resizing"),DR=vt("resize_img_proportional"),RR=vt("placeholder"),vx=vt("event_root"),hC=vt("service_message"),b0=vt("theme"),Nv=vt("theme_url"),Bv=vt("model"),yx=vt("model_url"),Tp=vt("inline_boundaries"),jk=vt("formats"),pC=vt("preview_styles"),bC=vt("format_empty_lines"),Cx=vt("format_noneditable_selector"),Sx=vt("custom_ui_selector"),Gn=vt("inline"),wx=vt("hidden_input"),v0=vt("submit_patch"),xx=vt("add_form_submit_trigger"),ch=vt("add_unload_trigger"),Ex=vt("custom_undo_redo_levels"),Gk=vt("disable_nodechange"),Pv=vt("readonly"),ah=vt("editable_root"),Tx=vt("content_css_cors"),qf=vt("plugins"),kp=vt("external_plugins"),qk=vt("block_unsupported_drop"),kx=vt("visual"),Kk=vt("visual_table_class"),Yk=vt("visual_anchor_class"),_x=vt("iframe_aria_text"),Kf=vt("setup"),Xk=vt("init_instance_callback"),Ax=vt("urlconverter_callback"),Ox=vt("auto_focus"),vC=vt("browser_spellcheck"),yC=vt("protect"),$v=vt("paste_block_drop"),y0=vt("paste_data_images"),CC=vt("paste_preprocess"),Iv=vt("paste_postprocess"),C0=vt("newdocument_content"),Dx=vt("paste_webkit_styles"),Fv=vt("paste_remove_styles_if_webkit"),S0=vt("paste_merge_formats"),lh=vt("smart_paste"),_p=vt("paste_as_text"),Rx=vt("paste_tab_spaces"),Mx=vt("allow_html_data_urls"),Jk=vt("text_patterns"),Qk=vt("text_patterns_lookup"),Nx=vt("noneditable_class"),e3=vt("editable_class"),Lv=vt("noneditable_regexp"),Ap=vt("preserve_cdata"),ih=vt("highlight_on_focus"),Yf=vt("xss_sanitization"),SC=vt("init_content_sync"),Bx=e=>e.options.isSet("text_patterns_lookup"),wC=e=>Xe.explode(e.options.get("font_size_style_values")),Px=e=>Xe.explode(e.options.get("font_size_classes")),t3=e=>e.options.get("encoding")==="xml",$x=e=>Xe.explode(e.options.get("images_file_types")),n3=vt("table_tab_navigation"),xC=vt("details_initial_state"),EC=vt("details_serialized_state"),Op=vt("sandbox_iframes"),Dp=e=>e.options.get("sandbox_iframes_exclusions"),Hv=vt("convert_unsafe_embeds"),Ix=vt("license_key"),o3=vt("api_key"),Rp=vt("disabled"),Fx=ht,TC=je,zv=e=>{const n=e.parentNode;n&&n.removeChild(e)},kC=e=>{const n=Wa(e);return{count:e.length-n.length,text:n}},Lx=e=>{let n;for(;(n=e.data.lastIndexOf(tc))!==-1;)e.deleteData(n,1)},s3=(e,n)=>(Xf(e),n),Mp=(e,n)=>{const o=kC(e.data.substr(0,n.offset())),r=kC(e.data.substr(n.offset()));return(o.text+r.text).length>0?(Lx(e),Oe(e,n.offset()-o.count)):n},r3=(e,n)=>{const o=n.container(),r=Li(lr(o.childNodes),e).map(a=>a<n.offset()?Oe(o,n.offset()-1):n).getOr(n);return Xf(e),r},Vv=(e,n)=>TC(e)&&n.container()===e?Mp(e,n):s3(e,n),Hx=(e,n)=>n.container()===e.parentNode?r3(e,n):s3(e,n),zx=(e,n)=>Oe.isTextPosition(n)?Vv(e,n):Hx(e,n),Xf=e=>{Fx(e)&&gr(e)&&(Y1(e)?e.removeAttribute("data-mce-caret"):zv(e)),TC(e)&&(Lx(e),e.data.length===0&&zv(e))},c3=as,Vx=Ji,Ux=qb,Uv="*[contentEditable=false],video,audio,embed,object",Wx=(e,n,o)=>{const r=So(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;a=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();a=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},Zx=e=>{var n,o;const r=zo(ne.fromDom(e),Uv);for(let a=0;a<r.length;a++){const u=r[a].dom;let f=u.previousSibling;if(fv(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,hp(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},a3=(e,n,o,r)=>{const a=Ur();let u,f;const b=ta(e),y=e.dom,E=(Z,Y)=>{let oe;if(R(),Ux(Y))return null;if(o(Y)){const me=vk(b,Y,Z),ge=Wx(n,Y,Z);y.setStyle(me,"top",ge.top),y.setStyle(me,"caret-color","transparent"),f=me;const ve=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(ve,{...ge}),y.add(n,ve),a.set({caret:ve,element:Y,before:Z}),Z&&y.addClass(ve,"mce-visual-caret-before"),B(),oe=Y.ownerDocument.createRange(),oe.setStart(me,0),oe.setEnd(me,0)}else return f=G2(Y,Z),oe=Y.ownerDocument.createRange(),x0(f.nextSibling)?(oe.setStart(f,0),oe.setEnd(f,0)):(oe.setStart(f,1),oe.setEnd(f,1)),oe;return oe},R=()=>{Zx(n),f&&(Xf(f),f=null),a.on(Z=>{y.remove(Z.caret),a.clear()}),u&&(clearInterval(u),u=void 0)},B=()=>{u=window.setInterval(()=>{a.on(Z=>{r()?y.toggleClass(Z.caret,"mce-visual-caret-hidden"):y.addClass(Z.caret,"mce-visual-caret-hidden")})},500)},P=()=>{a.on(Z=>{const Y=Wx(n,Z.element,Z.before);y.setStyles(Z.caret,{...Y})})},z=()=>clearInterval(u),j=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:a.isSet,show:E,hide:R,getCss:j,reposition:P,destroy:z}},w0=()=>Wn.browser.isFirefox(),x0=e=>c3(e)||Vx(e),E0=e=>(x0(e)||Ld(e)&&w0())&&Sm(ne.fromDom(e)).exists(Wu),MR=Xi,jx=as,Np=Ji,uh=Zb("display","block table table-cell table-row table-caption list-item"),T0=gr,_C=Tr,l3=ht,i3=je,u3=ru,Bp=e=>e===1,jd=e=>e===-1,dh=(e,n)=>{let o;for(;o=e(n);)if(!_C(o))return o;return null},mh=(e,n,o,r,a)=>{const u=new bc(e,r),f=jx(e)||_C(e);let b;if(jd(n)){if(f&&(b=dh(u.prev.bind(u),!0),o(b)))return b;for(;b=dh(u.prev.bind(u),a);)if(o(b))return b}if(Bp(n)){if(f&&(b=dh(u.next.bind(u),!0),o(b)))return b;for(;b=dh(u.next.bind(u),a);)if(o(b))return b}return null},d3=(e,n)=>{const o=a=>MR(a.dom),r=a=>a.dom===n;return Yi(ne.fromDom(e),o,r).map(a=>a.dom).getOr(n)},Gm=(e,n)=>{for(;e&&e!==n;){if(uh(e))return e;e=e.parentNode}return null},nd=(e,n,o)=>Gm(e.container(),o)===Gm(n.container(),o),Pp=(e,n)=>{if(!n)return L.none();const o=n.container(),r=n.offset();return l3(o)?L.from(o.childNodes[r+e]):L.none()},AC=(e,n)=>{var o;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},Gx=(e,n,o)=>Gm(n,e)===Gm(o,e),OC=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==n;){let u=a[r];if(u&&T0(u)&&(u=u[r]),jx(u)||Np(u)){if(Gx(n,u,a))return u;break}if(u3(u))break;a=a.parentNode}return null},od=ze(AC,!0),k0=ze(AC,!1),iu=(e,n,o)=>{let r;const a=ze(OC,!0,n),u=ze(OC,!1,n),f=o.startContainer,b=o.startOffset;if(Tr(f)){const y=i3(f)?f.parentNode:f,E=y.getAttribute("data-mce-caret");if(E==="before"&&(r=y.nextSibling,E0(r)))return od(r);if(E==="after"&&(r=y.previousSibling,E0(r)))return k0(r)}if(!o.collapsed)return o;if(je(f)){if(T0(f)){if(e===1){if(r=u(f),r)return od(r);if(r=a(f),r)return k0(r)}if(e===-1){if(r=a(f),r)return k0(r);if(r=u(f),r)return od(r)}return o}if(fv(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?od(r):o;if(hp(f)&&b<=1)return e===-1&&(r=a(f),r)?k0(r):o;if(b===f.data.length)return r=u(f),r?od(r):o;if(b===0)return r=a(f),r?k0(r):o}return o},qx=(e,n)=>Pp(e?0:-1,n).filter(jx),$p=(e,n,o)=>{const r=iu(e,n,o);return e===-1?Oe.fromRangeStart(r):Oe.fromRangeEnd(r)},Wv=e=>L.from(e.getNode()).map(ne.fromDom),NR=e=>L.from(e.getNode(!0)).map(ne.fromDom),DC=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},Zv=(e,n)=>{const o=nd(e,n);return!o&&As(e.getNode())?!0:o},m3=as,Gd=je,jv=ht,RC=As,fh=ru,Gv=ox,kt=pv,qv=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},_0=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,MC=(e,n)=>{if(Bp(e)){if(fh(n.previousSibling)&&!Gd(n.previousSibling))return Oe.before(n);if(Gd(n))return Oe(n,0)}if(jd(e)){if(fh(n.nextSibling)&&!Gd(n.nextSibling))return Oe.after(n);if(Gd(n))return Oe(n,n.data.length)}return jd(e)?RC(n)?Oe.before(n):Oe.after(n):Oe.before(n)},NC=(e,n)=>{const o=n.nextSibling;return o&&fh(o)?Gd(o)?Oe(o,0):Oe.before(o):Ip(1,Oe.after(n),e)},Ip=(e,n,o)=>{let r,a,u,f;if(!jv(o)||!n)return null;if(n.isEqual(Oe.after(o))&&o.lastChild){if(f=Oe.after(o.lastChild),jd(e)&&fh(o.lastChild)&&jv(o.lastChild))return RC(o.lastChild)?Oe.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(Gd(b)){if(jd(e)&&y>0)return Oe(b,--y);if(Bp(e)&&y<b.length)return Oe(b,++y);r=b}else{if(jd(e)&&y>0&&(a=_0(b,y-1),fh(a)))return!Gv(a)&&(u=mh(a,e,kt,a),u)?Gd(u)?Oe(u,u.data.length):Oe.after(u):Gd(a)?Oe(a,a.data.length):Oe.before(a);if(Bp(e)&&y<b.childNodes.length&&(a=_0(b,y),fh(a)))return RC(a)?NC(o,a):!Gv(a)&&(u=mh(a,e,kt,a),u)?Gd(u)?Oe(u,0):Oe.before(u):Gd(a)?Oe(a,0):Oe.after(a);r=a||f.getNode()}if(r&&(Bp(e)&&f.isAtEnd()||jd(e)&&f.isAtStart())&&(r=mh(r,e,ft,o,!0),kt(r,o)))return MC(e,r);a=r&&mh(r,e,kt,o);const E=Zr(Rt(qv(b,o),m3));return E&&(!a||!E.contains(a))?(Bp(e)?f=Oe.after(E):f=Oe.before(E),f):a?MC(e,a):null},uu=e=>({next:n=>Ip(1,n,e),prev:n=>Ip(-1,n,e)}),A0=(e,n,o)=>{const r=e?Oe.before(o):Oe.after(o);return wi(e,n,r)},Fp=e=>As(e)?Oe.before(e):Oe.after(e),Kv=e=>Oe.isTextPosition(e)?e.offset()===0:ru(e.getNode()),Yv=e=>{if(Oe.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return ru(e.getNode(!0))},BC=(e,n)=>!Oe.isTextPosition(e)&&!Oe.isTextPosition(n)&&e.getNode()===n.getNode(!0),Kx=e=>!Oe.isTextPosition(e)&&As(e.getNode()),Yx=(e,n,o)=>e?!BC(n,o)&&!Kx(n)&&Yv(n)&&Kv(o):!BC(o,n)&&Kv(n)&&Yv(o),wi=(e,n,o)=>{const r=uu(n);return L.from(e?r.next(o):r.prev(o))},du=(e,n,o)=>wi(e,n,o).bind(r=>nd(o,r,n)&&Yx(e,o,r)?wi(e,n,r):L.some(r)),Xv=(e,n,o,r)=>du(e,n,o).bind(a=>r(a)?Xv(e,n,a,r):L.some(a)),Jf=(e,n)=>{const o=e?n.firstChild:n.lastChild;return je(o)?L.some(Oe(o,e?0:o.data.length)):o?ru(o)?L.some(e?Oe.before(o):Fp(o)):A0(e,n,o):L.none()},Os=ze(wi,!0),fa=ze(wi,!1),Pr=ze(Jf,!0),Ic=ze(Jf,!1),Jv="_mce_caret",xi=e=>ht(e)&&e.id===Jv,qm=(e,n)=>{let o=n;for(;o&&o!==e;){if(xi(o))return o;o=o.parentNode}return null},gh=e=>ae(e.start),Xx=e=>Kt(e,"rng"),PC=e=>Kt(e,"id"),Qv=e=>Kt(e,"name"),Jx=e=>Xe.isArray(e.start),Lp=e=>!Qv(e)&&Sn(e.forward)?e.forward:!0,Qx=(e,n)=>(ht(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),f3=(e,n)=>{const o=L.from(aC(e.getRoot(),n.start)),r=L.from(aC(e.getRoot(),n.end));return Ys(o,r,(a,u)=>{const f=e.createRng();return f.setStart(a.container(),a.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Lp(n)}})},g3=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(tc);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},Hp=e=>!e.hasChildNodes(),h3=(e,n)=>Ic(e).fold(Pe,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),eE=(e,n,o)=>Hp(n)&&qm(e,n)?(g3(n,o),!0):!1,ey=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,b=a[0];for(let y=a.length-1;f&&y>=1;y--){const E=f.childNodes;if(eE(u,f,r))return!0;if(a[y]>E.length-1)return eE(u,f,r)?!0:h3(f,r);f=E[a[y]]}je(f)&&(b=Math.min(a[0],f.data.length)),ht(f)&&(b=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},$C=e=>je(e)&&e.data.length>0,ty=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):$C(r.nextSibling)?(f=r.nextSibling,b=0):$C(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)+1):(f=a,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):$C(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=a,b=e.nodeIndex(r)):(f=a,b=e.nodeIndex(r)),!u){const y=r.previousSibling,E=r.nextSibling;Xe.each(Xe.grep(r.childNodes),B=>{je(B)&&(B.data=B.data.replace(/\uFEFF/g,""))});let R;for(;R=e.get(o.id+"_"+n);)e.remove(R,!0);if(je(E)&&je(y)&&!Wn.browser.isOpera()){const B=y.data.length;y.appendData(E.data),e.remove(E),f=y,b=B}}return L.some(Oe(f,b))}else return L.none()},ny=(e,n)=>{const o=e.createRng();return ey(e,!0,n,o)&&ey(e,!1,n,o)?L.some({range:o,forward:Lp(n)}):L.none()},tE=(e,n)=>{const o=ty(e,"start",n),r=ty(e,"end",n);return Ys(o,r.or(o),(a,u)=>{const f=e.createRng();return f.setStart(Qx(e,a.container()),a.offset()),f.setEnd(Qx(e,u.container()),u.offset()),{range:f,forward:Lp(n)}})},zp=(e,n)=>L.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),oy=(e,n)=>{const o=e.dom;if(n){if(Jx(n))return ny(o,n);if(gh(n))return f3(o,n);if(PC(n))return tE(o,n);if(Qv(n))return zp(o,n);if(Xx(n))return L.some({range:n.rng,forward:Lp(n)})}return L.none()},an=(e,n,o)=>xk(e,n,o),p3=(e,n)=>{oy(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Ei=e=>ht(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",sy=(e=>n=>e===n)(Eo),Km=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,mu=e=>!Km(e)&&!sy(e)&&!_c(e),ry=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},v3=e=>zr(e,n=>{const o=bp(n);return o?[ne.fromDom(o)]:[]}),IC=e=>ry(e).length>1,O0=e=>Rt(v3(e),Lm),Vp=e=>zo(e,"td[data-mce-selected],th[data-mce-selected]"),FC=(e,n)=>{const o=Vp(n);return o.length>0?o:O0(e)},qd=e=>FC(ry(e.selection.getSel()),ne.fromDom(e.getBody())),sd=(e,n)=>Bg(e,"table",n),y3=e=>{const n=e.startContainer,o=e.startOffset;return je(n)?o===0?L.some(ne.fromDom(n)):L.none():L.from(n.childNodes[o]).map(ne.fromDom)},C3=e=>{const n=e.endContainer,o=e.endOffset;return je(n)?o===n.data.length?L.some(ne.fromDom(n)):L.none():L.from(n.childNodes[o-1]).map(ne.fromDom)},nE=e=>Ho(e).fold(lt([e]),n=>[e].concat(nE(n))),cy=e=>ss(e).fold(lt([e]),n=>Un(n)==="br"?fc(n).map(o=>[e].concat(cy(o))).getOr([]):[e].concat(cy(n))),Up=(e,n)=>Ys(y3(n),C3(n),(o,r)=>{const a=ts(nE(e),ze(On,o)),u=ts(cy(e),ze(On,r));return a.isSome()&&u.isSome()}).getOr(!1),$r=(e,n,o,r)=>{const a=o,u=new bc(o,a),f=nl(e.schema.getMoveCaretBeforeOnEnterElements(),(y,E)=>!Jt(["td","th","table"],E.toLowerCase()));let b=o;do{if(je(b)&&Xe.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},ay=e=>{const n=e.selection.getSel();return De(n)&&n.rangeCount>0},ly=(e,n)=>{const o=qd(e);o.length>0?_e(o,r=>{const a=r.dom,u=e.dom.createRng();u.setStartBefore(a),u.setEndAfter(a),n(u,!0)}):n(e.selection.getRng(),!1)},oE=(e,n,o)=>{const r=kl(e,n);o(r),e.moveToBookmark(r)},hh=e=>Bs(e==null?void 0:e.nodeType),LC=e=>ht(e)&&!Ei(e)&&!xi(e)&&!Mm(e),S3=(e,n)=>{if(LC(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},sE=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=as(u);oE(r,!0,()=>{n()}),f&&as(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&w3(a,r)},w3=(e,n)=>{var o,r;const a=n.getRng(),{startContainer:u,startOffset:f}=a,b=n.getNode();if(!S3(e,b)&&ht(u)){const y=u.childNodes,E=e.getRoot();let R;if(f<y.length){const B=y[f];R=new bc(B,(o=e.getParent(B,e.isBlock))!==null&&o!==void 0?o:E)}else{const B=y[y.length-1];R=new bc(B,(r=e.getParent(B,e.isBlock))!==null&&r!==void 0?r:E),R.next(!0)}for(let B=R.current();B;B=R.next()){if(e.getContentEditable(B)==="false")return;if(je(B)&&!D0(B)){a.setStart(B,0),n.setRng(a);return}}}},rE=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(ht(e)||!D0(e))return e}},Wp=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||fi(e,n),ph=(e,n,o)=>e.schema.isValidChild(n,o),D0=(e,n=!1)=>{if(De(e)&&je(e)){const o=n?e.data.replace(/ /g," "):e.data;return Ss(o)}else return!1},Ym=e=>De(e)&&je(e)&&e.length===0,cE=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Cx(e),a=Xs(r)?o:`${o},${r}`;return ya(ne.fromDom(n),a)},iy=(e,n)=>{const o=e.dom;return LC(n)&&o.getContentEditable(n)==="false"&&cE(e,n)&&o.select('[contenteditable="true"]',n).length===0},Xm=(e,n)=>le(e)?e(n):(De(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),uy=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),dy=(e,n)=>{if(Rn(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=H1(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},R0=(e,n,o)=>{const r=e.getStyle(n,o);return dy(r,o)},HC=(e,n)=>{let o;return e.getParent(n,r=>ht(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},M0=(e,n,o)=>e.getParents(n,o,e.getRoot()),zC=(e,n,o)=>{const r=e.formatter.get(n);return De(r)&&vo(r,o)},VC=(e,n)=>zC(e,n,r=>{const a=u=>le(u)||u.length>1&&u.charAt(0)==="%";return vo(["styles","attributes"],u=>yo(r,u).exists(f=>{const b=$n(f)?f:df(f);return vo(b,a)}))}),x3=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=u=>nl(u,(f,b)=>vo(r,y=>y===b));return zC(e,n,u=>{const f=a(u);return zC(e,o,b=>{const y=a(b);return mf(f,y)})})},Kd=e=>$l(e,"block"),E3=e=>Kd(e)&&e.wrapper===!0,UC=e=>Kd(e)&&e.wrapper!==!0,Ti=e=>$l(e,"selector"),oc=e=>$l(e,"inline"),aE=e=>Ti(e)&&oc(e)&&ba(yo(e,"mixed"),!0),N0=e=>Ti(e)&&e.expand!==!1&&!oc(e),T3=e=>{const n=[];let o=e;for(;o;){if(je(o)&&o.data!==tc||o.childNodes.length>1)return[];ht(o)&&n.push(o),o=o.firstChild}return n},Yo=e=>T3(e).length>0,my=e=>xi(e.dom)&&Yo(e.dom),Zp=Ei,lE=M0,fy=D0,na=Wp,jl=e=>As(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,i=(e,n)=>{let o=n;for(;o;){if(ht(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},m=(e,n,o,r)=>{const a=n.data;if(e){for(let u=o;u>0;u--)if(r(a.charAt(u-1)))return u}else for(let u=o;u<a.length;u++)if(r(a.charAt(u)))return u;return-1},p=(e,n,o)=>m(e,n,o,r=>sy(r)||Km(r)),v=(e,n,o)=>m(e,n,o,mu),k=(e,n,o,r,a,u)=>{let f;const b=e.getParent(o,B=>zg(B)||e.isBlock(B)),y=De(b)?b:n,E=(B,P,z)=>{const j=su(e),Z=a?j.backwards:j.forwards;return L.from(Z(B,P,(Y,oe)=>Zp(Y.parentNode)?-1:(f=Y,z(a,Y,oe)),y))};return E(o,r,p).bind(B=>u?E(B.container,B.offset+(a?-1:0),v):L.some(B)).orThunk(()=>f?L.some({container:f,offset:a?0:f.length}):L.none())},D=(e,n,o,r,a)=>{const u=r[a];je(r)&&Xs(r.data)&&u&&(r=u);const f=lE(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const E=n[y];if(!(De(E.collapsed)&&E.collapsed!==o.collapsed)&&Ti(E)&&e.is(f[b],E.selector))return f[b]}return r},$=(e,n,o,r)=>{var a;let u=o;const f=e.getRoot(),b=n[0];if(Kd(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(a=e.getParent(o,"LI,TD,TH,SUMMARY"))!==null&&a!==void 0?a:f;u=e.getParent(je(o)?o.parentNode:o,E=>E!==f&&na(e.schema,E),y)}if(u&&Kd(b)&&b.wrapper&&(u=lE(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!uy(u,"br")););return u||o},U=(e,n,o,r)=>{const a=o.parentNode;return De(o[r])?!1:a===n||Rn(a)||e.isBlock(a)?!0:U(e,n,a,r)},K=(e,n,o,r,a,u)=>{let f=o;const b=a?"previousSibling":"nextSibling",y=e.getRoot();if(je(o)&&!fy(o)&&(a?r>0:r<o.data.length))return o;for(;f;){if(zg(f))return o;if(!n[0].block_expand&&e.isBlock(f))return u?f:o;for(let E=f[b];E;E=E[b]){const R=je(E)&&!U(e,y,E,b);if(!Zp(E)&&!jl(E)&&!fy(E,R))return f}if(f===y||f.parentNode===y){o=f;break}f=f.parentNode}return o},se=e=>Zp(e.parentNode)||Zp(e),he=(e,n,o,r={})=>{const{includeTrailingSpace:a=!1,expandToBlock:u=!0}=r,f=e.getParent(n.commonAncestorContainer,z=>zg(z)),b=De(f)?f:e.getRoot();let{startContainer:y,startOffset:E,endContainer:R,endOffset:B}=n;const P=o[0];return ht(y)&&y.hasChildNodes()&&(y=Qc(y,E),je(y)&&(E=0)),ht(R)&&R.hasChildNodes()&&(R=Qc(R,n.collapsed?B:B-1),je(R)&&(B=R.data.length)),y=i(e,y),R=i(e,R),se(y)&&(y=Zp(y)?y:y.parentNode,n.collapsed?y=y.previousSibling||y:y=y.nextSibling||y,je(y)&&(E=n.collapsed?y.length:0)),se(R)&&(R=Zp(R)?R:R.parentNode,n.collapsed?R=R.nextSibling||R:R=R.previousSibling||R,je(R)&&(B=n.collapsed?0:R.length)),n.collapsed&&(k(e,b,y,E,!0,a).each(({container:Z,offset:Y})=>{y=Z,E=Y}),k(e,b,R,B,!1,a).each(({container:Z,offset:Y})=>{R=Z,B=Y})),(oc(P)||P.block_expand)&&((!oc(P)||!je(y)||E===0)&&(y=K(e,o,y,E,!0,u)),(!oc(P)||!je(R)||B===R.data.length)&&(R=K(e,o,R,B,!1,u))),N0(P)&&(y=D(e,o,n,y,"previousSibling"),R=D(e,o,n,R,"nextSibling")),(Kd(P)||Ti(P))&&(y=$(e,o,y,"previousSibling"),R=$(e,o,R,"nextSibling"),Kd(P)&&(e.isBlock(y)||(y=K(e,o,y,E,!0,u),je(y)&&(E=0)),e.isBlock(R)||(R=K(e,o,R,B,!1,u),je(R)&&(B=R.data.length)))),ht(y)&&y.parentNode&&(E=e.nodeIndex(y),y=y.parentNode),ht(R)&&R.parentNode&&(B=e.nodeIndex(R)+1,R=R.parentNode),{startContainer:y,startOffset:E,endContainer:R,endOffset:B}},Ce=(e,n,o)=>{var r;const a=n.startOffset,u=Qc(n.startContainer,a),f=n.endOffset,b=Qc(n.endContainer,f-1),y=Y=>{const oe=Y[0];je(oe)&&oe===u&&a>=oe.data.length&&Y.splice(0,1);const me=Y[Y.length-1];return f===0&&Y.length>0&&me===b&&je(me)&&Y.splice(Y.length-1,1),Y},E=(Y,oe,me)=>{const ge=[];for(;Y&&Y!==me;Y=Y[oe])ge.push(Y);return ge},R=(Y,oe)=>e.getParent(Y,me=>me.parentNode===oe,oe),B=(Y,oe,me)=>{const ge=me?"nextSibling":"previousSibling";for(let ve=Y,Ie=ve.parentNode;ve&&ve!==oe;ve=Ie){Ie=ve.parentNode;const Ze=E(ve===Y?ve:ve[ge],ge);Ze.length&&(me||Ze.reverse(),o(y(Ze)))}};if(u===b)return o(y([u]));const P=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return B(u,P,!0);if(e.isChildOf(b,u))return B(b,P);const z=R(u,P)||u,j=R(b,P)||b;B(u,z,!0);const Z=E(z===u?z:z.nextSibling,"nextSibling",j===b?j.nextSibling:j);Z.length&&o(y(Z)),B(b,j)},ut=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],it=e=>qr(e)&&_m(e)===tc,Mt=(e,n,o,r)=>Sm(n).fold(()=>"skipping",a=>r==="br"||it(n)?"valid":qw(n)?"existing":xi(n.dom)?"caret":vo(ut,u=>ya(n,u))?"valid-block":!ph(e,o,r)||!ph(e,Un(a),o)?"invalid-child":"valid"),Qe=(e,n)=>{const o=he(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},He=(e,n,o,r,a,u)=>{const{uid:f=n,...b}=o;Ao(e,If()),dr(e,`${Jg()}`,f),dr(e,`${Co()}`,r);const{attributes:y={},classes:E=[]}=a(f,b);if(Gc(e,y),A1(e,E),u){E.length>0&&dr(e,`${Z1()}`,E.join(","));const R=yr(y);R.length>0&&dr(e,`${Qg()}`,R.join(","))}},Vt=e=>{Jr(e,If()),Zs(e,`${Jg()}`),Zs(e,`${Co()}`),Zs(e,`${dp()}`);const n=gc(e,`${Qg()}`).map(r=>r.split(",")).getOr([]),o=gc(e,`${Z1()}`).map(r=>r.split(",")).getOr([]);_e(n,r=>Zs(e,r)),Hb(e,o),Zs(e,`${Z1()}`),Zs(e,`${Qg()}`)},Tt=(e,n,o,r,a)=>{const u=ne.fromTag("span",e);return He(u,n,o,r,a,!1),u},yt=(e,n,o,r,a,u)=>{const f=[],b=Tt(e.getDoc(),o,u,r,a),y=Ur(),E=()=>{y.clear()},R=()=>y.get().getOrThunk(()=>{const j=X(b);return f.push(j),y.set(j),j}),B=j=>{_e(j,P)},P=j=>{switch(Mt(e,j,"span",Un(j))){case"invalid-child":{E();const Y=ur(j);B(Y),E();break}case"valid-block":{E(),He(j,o,u,r,a,!0);break}case"valid":{const Y=R();xm(j,Y);break}}},z=j=>{const Z=qt(j,ne.fromDom);B(Z)};return Ce(e.dom,n,j=>{E(),z(j)}),f},co=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=qd(e).length>0,b=lc("mce-annotation");if(u.collapsed&&!f&&Qe(e,u),a.getRng().collapsed&&!f){const y=Tt(e.getDoc(),b,r,n,o.decorate);wn(y,Eo),a.getRng().insertNode(y.dom),a.select(y.dom)}else oE(a,!1,()=>{ly(e,y=>{yt(e,y,b,n,o.decorate,r)})})})},eo=e=>{const n=Ff();Yw(e,n);const o=Kw(e,n),r=ys("span"),a=u=>{_e(u,f=>{r(f)?M(f):Vt(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{co(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{Gw(e,L.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();a(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();at(iv(e,u),(b,y)=>{a(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=iv(e,u);return In(f,b=>qt(b,y=>y.dom))}}},to=e=>({getBookmark:ze(an,e),moveToBookmark:ze(p3,e)});to.isBookmarkNode=Ei;const rr=(e,n,o)=>o.collapsed?!1:vo(o.getClientRects(),r=>X2(r,e,n)),ki=(e,n)=>{const o=qr(n)?_m(n).length:ur(n).length+1;return e>o?o:e<0?0:e},bh=e=>kf.range(e.start,ki(e.soffset,e.start),e.finish,ki(e.foffset,e.finish)),Jm=(e,n)=>!Af(n.dom)&&(dl(e,n)||On(e,n)),Qf=e=>n=>Jm(e,n.start)&&Jm(e,n.finish),po=e=>e.inline||Wn.browser.isFirefox(),oa=e=>kf.range(ne.fromDom(e.startContainer),e.startOffset,ne.fromDom(e.endContainer),e.endOffset),ga=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?L.none():L.from(n.getRangeAt(0))).map(oa)},rd=e=>{const n=gl(e);return ga(n.dom).filter(Qf(e))},_i=(e,n)=>L.from(n).filter(Qf(e)).map(bh),B0=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),L.some(n)}catch{return L.none()}},sa=e=>{const n=po(e)?rd(ne.fromDom(e.getBody())):L.none();e.bookmark=n.isSome()?n:e.bookmark},P0=e=>(e.bookmark?e.bookmark:L.none()).bind(o=>_i(ne.fromDom(e.getBody()),o)).bind(B0),$0=e=>{P0(e).each(n=>e.selection.setRng(n))},ps={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},k3=(e,n)=>(Bs(n)||(n=0),window.setTimeout(e,n)),iE=(e,n)=>(Bs(n)||(n=0),window.setInterval(e,n)),Ai={setEditorTimeout:(e,n,o)=>k3(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=iE(()=>{e.removed?window.clearInterval(r):n()},o);return r}},uE=(e,n)=>e.view(n).fold(lt([]),r=>{const a=e.owner(r),u=uE(e,a);return[r].concat(u)}),_3=(e,n)=>{const o=n.owner(e);return uE(n,o)};var vh=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?L.none():L.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ne.fromDom)},owner:e=>fl(e)});const dE=e=>{const n=Og(),o=Ng(n),r=_3(e,vh),a=S1(e),u=Ar(r,(f,b)=>{const y=S1(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return er(u.left+a.left+o.left,u.top+a.top+o.top)},O3=e=>e.type==="nodechange"&&e.selectionChange,SI=(e,n)=>{const o=()=>{n.throttle()};mo.DOM.bind(document,"mouseup",o),e.on("remove",()=>{mo.DOM.unbind(document,"mouseup",o)})},wI=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},xI=(e,n)=>{wI(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{O3(o)||sa(e)})},EI=e=>{const n=uc(()=>{sa(e)},0);e.on("init",()=>{e.inline&&SI(e,n),xI(e,n)}),e.on("remove",()=>{n.cancel()})};let jp;const mE=mo.DOM,TI=e=>ht(e)&&ps.isEditorUIElement(e),fE=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},gE=(e,n)=>{const o=Sx(e);return mE.getParent(n,a=>TI(a)||(o?e.dom.is(a,o):!1))!==null},ZC=e=>{try{const n=pl(ne.fromDom(e.getElement()));return Ia(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},kI=(e,n)=>{const o=n.editor;EI(o);const r=(u,f)=>{if(ih(u)&&u.inline!==!0){const b=ne.fromDom(u.getContainer());f(b,"tox-edit-focus")}},a=u=>{if(!u.iframeElement)return;const b=ne.fromDom(u.iframeElement),y=dE(b),E=Hg(window);(y.top<E.y||y.top>E.bottom-25)&&b.dom.scrollIntoView({block:"center"})};o.on("focusin",()=>{const u=e.focusedEditor;if(fE(ZC(o))&&r(o,Ao),u!==o){u&&u.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:u}),o.focus(!0);const f=jr().browser;o.inline!==!0&&(f.isSafari()||f.isChromium())&&a(o)}}),o.on("focusout",()=>{Ai.setEditorTimeout(o,()=>{const u=e.focusedEditor;(!fE(ZC(o))||u!==o)&&r(o,Jr),!gE(o,ZC(o))&&u===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),jp||(jp=u=>{const f=e.activeEditor;f&&Ag(u).each(b=>{const y=b;y.ownerDocument===document&&y!==document.body&&!gE(f,y)&&e.focusedEditor===f&&(f.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},mE.bind(document,"focusin",jp))},_I=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&jp&&(mE.unbind(document,"focusin",jp),jp=null)},AI=e=>{e.on("AddEditor",ze(kI,e)),e.on("RemoveEditor",ze(_I,e))},OI=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),DI=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="false")!==null,BR=e=>e.collapsed?L.from(Qc(e.startContainer,e.startOffset)).map(ne.fromDom):L.none(),D3=(e,n)=>BR(n).bind(o=>dv(o)?L.some(o):dl(e,o)?L.none():L.some(e)),R3=(e,n)=>{D3(ne.fromDom(e.getBody()),n).bind(o=>Pr(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},jC=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},RI=e=>Nd(e)||yl(e).isSome(),MI=e=>De(e.iframeElement)&&Nd(ne.fromDom(e.iframeElement)),NI=e=>{const n=e.getBody();return n&&RI(ne.fromDom(n))},hE=e=>{const n=pl(ne.fromDom(e.getElement()));return Ia(n).filter(o=>!fE(o.dom)&&gE(e,o.dom)).isSome()},I0=e=>e.inline?NI(e):MI(e),pE=e=>I0(e)||hE(e),BI=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable();const a=f=>{P0(f).each(b=>{f.selection.setRng(b),r=b})};!I0(e)&&e.hasEditableRoot()&&a(e);const u=OI(e,n.getNode());if(u&&e.dom.isChildOf(u,o)){DI(e,u)||jC(o),jC(u),e.hasEditableRoot()||a(e),R3(e,r),M3(e);return}e.inline||(Wn.browser.isOpera()||jC(o),e.getWin().focus()),(Wn.browser.isFirefox()||e.inline)&&(jC(o),R3(e,r)),M3(e)},M3=e=>e.editorManager.setActive(e),Yj=(e,n)=>{e.removed||(n?M3(e):BI(e))},xt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||xt.metaKeyPressed(e),metaKeyPressed:e=>Wn.os.isMacOS()||Wn.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},gy="data-mce-selected",PI="table,img,figure.image,hr,video,span.mce-preview-object,details",$I=Math.abs,bE=Math.round,N3={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Xj=e=>e.type==="longpress"||e.type.indexOf("touch")===0,PR=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,b,y,E,R,B,P,z,j,Z,Y,oe,me,ge,ve;const Ie=Be=>De(Be)&&(xw(Be)||o.is(Be,"figure.image")),Ze=Be=>Ji(Be)||o.hasClass(Be,"mce-preview-object"),pt=(Be,Ge)=>{if(Xj(Be)){const Nt=Be.touches[0];return Ie(Be.target)&&!rr(Nt.clientX,Nt.clientY,Ge)}else return Ie(Be.target)&&!rr(Be.clientX,Be.clientY,Ge)},Ae=Be=>{const Ge=Be.target;pt(Be,n.selection.getRng())&&!Be.isDefaultPrevented()&&n.selection.select(Ge)},we=Be=>o.hasClass(Be,"mce-preview-object")&&De(Be.firstElementChild)?[Be,Be.firstElementChild]:o.is(Be,"figure.image")?[Be.querySelector("img")]:[Be],Le=Be=>{const Ge=Zk(n);return!Ge||n.mode.isReadOnly()||Be.getAttribute("data-mce-resize")==="false"||Be===n.getBody()?!1:o.hasClass(Be,"mce-preview-object")&&De(Be.firstElementChild)?ya(ne.fromDom(Be.firstElementChild),Ge):ya(ne.fromDom(Be),Ge)},gt=(Be,Ge)=>{if(Ze(Ge))return Be.create("img",{src:Wn.transparentSrc});if(Ld(Ge)){const _n=Ps(E.name,"n")?Ks:Us,Pn=Ge.cloneNode(!0);return _n(Be.select("tr",Pn)).each(fo=>{const Cd=Be.select("td,th",fo);Be.setStyle(fo,"height",null),_e(Cd,mg=>Be.setStyle(mg,"height",null))}),Pn}else return Ge.cloneNode(!0)},$t=(Be,Ge,Nt)=>{if(De(Nt)){const _n=we(Be);_e(_n,Pn=>{Pn.style[Ge]||!n.schema.isValid(Pn.nodeName.toLowerCase(),Ge)?o.setStyle(Pn,Ge,Nt):o.setAttrib(Pn,Ge,""+Nt)})}},kn=(Be,Ge,Nt)=>{$t(Be,"width",Ge),$t(Be,"height",Nt)},Dn=Be=>{let Ge,Nt,_n,Pn,fo;Ge=Be.screenX-B,Nt=Be.screenY-P,oe=Ge*E[2]+z,me=Nt*E[3]+j,oe=oe<5?5:oe,me=me<5?5:me,(Ie(f)||Ze(f))&&DR(n)!==!1?_n=!xt.modifierPressed(Be):_n=xt.modifierPressed(Be),_n&&($I(Ge)>$I(Nt)?(me=bE(oe*Z),oe=bE(me/Z)):(oe=bE(me/Z),me=bE(oe*Z))),kn(b,oe,me),Pn=E.startPos.x+Ge,fo=E.startPos.y+Nt,Pn=Pn>0?Pn:0,fo=fo>0?fo:0,o.setStyles(y,{left:Pn,top:fo,display:"block"}),y.innerHTML=oe+" &times; "+me,Ge=u.scrollWidth-ge,Nt=u.scrollHeight-ve,Ge+Nt!==0&&o.setStyles(y,{left:Pn-Ge,top:fo-Nt}),Y||(Me(n,f,z,j,"corner-"+E.name),Y=!0)},oo=()=>{const Be=Y;Y=!1,Be&&($t(f,"width",oe),$t(f,"height",me)),o.unbind(r,"mousemove",Dn),o.unbind(r,"mouseup",oo),a!==r&&(o.unbind(a,"mousemove",Dn),o.unbind(a,"mouseup",oo)),o.remove(b),o.remove(y),o.remove(R),ko(f),Be&&(_v(n,f,oe,me,"corner-"+E.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},ko=Be=>{Bt();const Ge=o.getPos(Be,u),Nt=Ge.x,_n=Ge.y,Pn=Be.getBoundingClientRect(),fo=Pn.width||Pn.right-Pn.left,Cd=Pn.height||Pn.bottom-Pn.top;f!==Be&&(cc(),f=Be,oe=me=0);const mg=n.dispatch("ObjectSelected",{target:Be});Le(Be)&&!mg.isDefaultPrevented()?at(N3,(Ya,Xl)=>{const yu=Ml=>{const Sd=we(f)[0];B=Ml.screenX,P=Ml.screenY,z=Sd.clientWidth,j=Sd.clientHeight,Z=j/z,E=Ya,E.name=Xl,E.startPos={x:fo*Ya[0]+Nt,y:Cd*Ya[1]+_n},ge=u.scrollWidth,ve=u.scrollHeight,R=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(R,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=gt(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:Nt,top:_n,margin:0}),kn(b,fo,Cd),b.removeAttribute(gy),u.appendChild(b),o.bind(r,"mousemove",Dn),o.bind(r,"mouseup",oo),a!==r&&(o.bind(a,"mousemove",Dn),o.bind(a,"mouseup",oo)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},z+" &times; "+j)};let ka=o.get("mceResizeHandle"+Xl);ka&&o.remove(ka),ka=o.add(u,"div",{id:"mceResizeHandle"+Xl,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Xl+"-resize; margin:0; padding:0"}),o.bind(ka,"mousedown",Ml=>{Ml.stopImmediatePropagation(),Ml.preventDefault(),yu(Ml)}),Ya.elm=ka,o.setStyles(ka,{left:fo*Ya[0]+Nt-ka.offsetWidth/2,top:Cd*Ya[1]+_n-ka.offsetHeight/2})}):cc(!1)},Ds=uc(ko,0),cc=(Be=!0)=>{Ds.cancel(),Bt(),f&&Be&&f.removeAttribute(gy),at(N3,(Ge,Nt)=>{const _n=o.get("mceResizeHandle"+Nt);_n&&(o.unbind(_n),o.remove(_n))})},Tc=(Be,Ge)=>o.isChildOf(Be,Ge),st=Be=>{if(Y||n.removed||n.composing)return;const Ge=Be.type==="mousedown"?Be.target:e.getNode(),Nt=Id(ne.fromDom(Ge),PI).map(Pn=>Pn.dom).filter(Pn=>o.isEditable(Pn.parentElement)||Pn.nodeName==="IMG"&&o.isEditable(Pn)).getOrUndefined(),_n=De(Nt)?o.getAttrib(Nt,gy,"1"):"1";if(_e(o.select(`img[${gy}],hr[${gy}]`),Pn=>{Pn.removeAttribute(gy)}),De(Nt)&&Tc(Nt,u)&&pE(n)){Xn();const Pn=e.getStart(!0);if(Tc(Pn,Nt)&&Tc(e.getEnd(!0),Nt)){o.setAttrib(Nt,gy,_n),Ds.throttle(Nt);return}}cc()},Bt=()=>{at(N3,Be=>{Be.elm&&(o.unbind(Be.elm),delete Be.elm)})},Xn=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Xn(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",st),n.on("keyup compositionend",Be=>{f&&f.nodeName==="TABLE"&&st(Be)}),n.on("hide blur",cc),n.on("contextmenu longpress",Ae,!0)}),n.on("remove",Bt),{isResizable:Le,showResizeRect:ko,hideResizeRect:cc,updateResizeRect:st,destroy:()=>{Ds.cancel(),f=b=R=null}}},ds=(e,n,o)=>{const r=gl(ne.fromDom(o));return Cw(r.dom,e,n).map(a=>{const u=o.createRange();return u.setStart(a.start.dom,a.soffset),u.setEnd(a.finish.dom,a.foffset),u}).getOrUndefined()},GC=(e,n)=>De(e)&&De(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,vE=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},qC=(e,n,o)=>vE(e,n,o)!==null,yh=(e,n,o)=>qC(e,n,r=>r.nodeName===o),yE=(e,n)=>gr(e)&&!qC(e,n,xi),F0=(e,n,o)=>{const r=n.parentNode;if(r){const a=new bc(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=a[o?"prev":"next"]();)if(As(u))return!0}return!1},$R=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},II=(e,n)=>{let o=n;for(;o&&o!==e;){if(as(o))return!0;o=o.parentNode}return!1},B3=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=a.parentNode;let y,E;if(!b)return L.none();const R=e.getParent(b,e.isBlock)||u;if(r&&As(a)&&n&&e.isEmpty(R))return L.some(Oe(b,e.nodeIndex(a)));const B=new bc(a,R);for(;E=B[r?"prev":"next"]();){if(e.getContentEditableParent(E)==="false"||yE(E,u))return L.none();if(je(E)&&E.data.length>0)return yh(E,u,"A")?L.none():L.some(Oe(E,r?E.data.length:0));if(e.isBlock(E)||f[E.nodeName.toLowerCase()])return L.none();y=E}return Hd(y)?L.none():o&&y?L.some(Oe(y,0)):L.none()},P3=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const E=ht(b)&&y===b.childNodes.length,R=e.schema.getNonEmptyElements();let B=o;if(gr(b))return L.none();if(ht(b)&&y>b.childNodes.length-1&&(B=!1),Gu(b)&&(b=a,y=0),b===a){if(B&&(u=b.childNodes[y>0?y-1:0],u&&(gr(u)||R[u.nodeName]||Ld(u))))return L.none();if(b.hasChildNodes()){if(y=Math.min(!B&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=je(b)&&E?b.data.length:0,!n&&b===a.lastChild&&Ld(b)||II(a,b)||gr(b)||tn(b))return L.none();if(b.hasChildNodes()&&!Ld(b)){u=b;const P=new bc(b,a);do{if(as(u)||gr(u)){f=!1;break}if(je(u)&&u.data.length>0){y=B?0:u.data.length,b=u,f=!0;break}if(R[u.nodeName.toLowerCase()]&&!qu(u)){y=e.nodeIndex(u),b=u.parentNode,B||y++,f=!0;break}}while(u=B?P.next():P.prev())}}}return n&&(je(b)&&y===0&&B3(e,E,n,!0,b).each(P=>{b=P.container(),y=P.offset(),f=!0}),ht(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&As(u)&&!$R(u,"A")&&!F0(e,u,!1)&&!F0(e,u,!0)&&B3(e,E,n,!0,u).each(P=>{b=P.container(),y=P.offset(),f=!0}))),B&&!n&&je(b)&&y===b.data.length&&B3(e,E,n,!1,b).each(P=>{b=P.container(),y=P.offset(),f=!0}),f&&b?L.some(Oe(b,y)):L.none()},CE=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=Oe.fromRangeStart(n);return P3(e,o,!0,r).each(u=>{(!o||!Oe.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||P3(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),GC(n,r)?L.none():L.some(r)},hy=(e,n)=>e.splitText(n),L0=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&je(n)){if(o>0&&o<n.data.length)if(r=hy(n,o),n=r.previousSibling,a>o){a=a-o;const u=hy(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(je(n)&&o>0&&o<n.data.length&&(n=hy(n,o),o=0),je(r)&&a>0&&a<r.data.length){const u=hy(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},fu=e=>({walk:(u,f)=>Ce(e,u,f),split:L0,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=he(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>CE(e,u).fold(Pe,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});fu.compareRanges=GC,fu.getCaretRangeFromPoint=ds,fu.getSelectedNode=bp,fu.getNode=Qc;const Ch=e=>Un(e)==="textarea",IR=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),FI=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},LI=(e,n)=>{const o=ur(e);if(o.length===0||Ch(e))return{element:e,offset:n};if(n<o.length&&!Ch(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return Ch(r)?{element:e,offset:n}:Un(r)==="img"?{element:r,offset:1}:qr(r)?{element:r,offset:_m(r).length}:{element:r,offset:ur(r).length}}},FR=(e,n)=>{const o=v2(e),r=Xr(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},HI=(e,n)=>{const o=LI(e,n),r=ne.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+tc+"</span>");return Rr(o.element,r),FR(r,()=>x(r))},zI=e=>FR(ne.fromDom(e),wt),LR=(e,n,o,r)=>{UI(e,(a,u)=>VI(e,n,o,r),o)},$3=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(IR(e,u))return;const f=Ng(n).top;o(e,n,f,r,a),FI(e,u)},VI=(e,n,o,r)=>{const a=ne.fromDom(e.getBody()),u=ne.fromDom(e.getDoc());is(a);const f=HI(ne.fromDom(o.startContainer),o.startOffset);$3(e,u,n,f,r),f.cleanup()},HR=(e,n,o,r)=>{const a=ne.fromDom(e.getDoc());$3(e,a,o,zI(n),r)},UI=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(ne.fromDom(r),ne.fromDom(u));const b=e.dom.createRng();b.setStart(r,a),b.setEnd(u,f),e.selection.setRng(o)},zR=(e,n,o,r,a)=>{const u=n.pos,f=30;if(r)Ki(u.left,Math.max(0,u.top-f),a);else{const b=u.top-o+n.height+f;Ki(-e.getBody().getBoundingClientRect().left,b,a)}},VR=(e,n,o,r,a,u)=>{const f=r+o,b=a.pos.top,y=a.bottom,E=y-b>=r;b<o?zR(e,a,r,u!==!1,n):b>f?zR(e,a,r,E?u!==!1:u===!0,n):y>f&&!E&&zR(e,a,r,u===!0,n)},wc=(e,n,o,r,a)=>{const u=gl(n).dom.innerHeight;VR(e,n,o,u,r,a)},KC=(e,n,o,r,a)=>{const u=gl(n).dom.innerHeight;VR(e,n,o,u,r,a);const f=dE(r.element),b=Hg(window);f.top<b.y?Qh(r.element,a!==!1):f.top>b.bottom&&Qh(r.element,a===!0)},ra=(e,n,o)=>LR(e,wc,n,o),Yd=(e,n,o)=>HR(e,n,wc,o),WI=(e,n,o)=>LR(e,KC,n,o),UR=(e,n,o)=>HR(e,n,KC,o),ZI=(e,n,o)=>{(e.inline?Yd:UR)(e,n,o)},H0=(e,n,o)=>{(e.inline?ra:WI)(e,n,o)},WR=(e,n)=>n.collapsed?e.isEditable(n.startContainer):e.isEditable(n.startContainer)&&e.isEditable(n.endContainer),I3=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return L.from(u).map(ne.fromDom).map(b=>!r||!n.collapsed?Dc(b,a(b,f)).getOr(b):b).bind(b=>Gr(b)?L.some(b):To(b).filter(Gr)).map(b=>b.dom).getOr(e)},ZR=(e,n,o=!1)=>I3(e,n,!0,o,(r,a)=>Math.min(wm(r),a)),jR=(e,n,o=!1)=>I3(e,n,!1,o,(r,a)=>a>0?a-1:a),GR=(e,n)=>{const o=e;for(;e&&je(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},gu=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),je(o)&&je(r)&&(o.length===a?o=GR(o.nextSibling,!0):o=o.parentNode,u===0?r=GR(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=je(f)?f.parentNode:f;return ju(b)?b:e},ja=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||ZR(u,n,n.collapsed),e.isBlock),b=e.getParent(r||jR(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&b&&f!==b){let y;const E=new bc(f,u);for(;(y=E.next())&&y!==b;)e.isBlock(y)&&a.push(y)}return b&&f!==b&&b!==u&&a.push(b),a},Jj=(e,n,o)=>L.from(n).bind(r=>L.from(r.parentNode).map(a=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(a,u),f.setEnd(a,u+1),o&&($r(e,f,r,!0),$r(e,f,r,!1)),f})),cd=(e,n)=>qt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),F3={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},SE=(e,n,o)=>{const r=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[a];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[a],u)return u}},jI=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Ss(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},L3=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class _l{static create(n,o){const r=new _l(n,F3[n]||1);return o&&at(o,(a,u)=>{r.attr(u,a)}),r}constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!ae(n))return De(n)&&at(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new _l(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(a[a.length]={name:b.name,value:b.value},a.map[b.name]=b.value)}o.attributes=a}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,a=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):a&&(a.next=r),o.lastChild===n?(o.lastChild=a,a&&(a.next=null)):r&&(r.prev=a),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const a=o.parent||this;return r?(o===a.firstChild?a.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===a.lastChild?a.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=a,n}getAll(n){const o=this,r=[];for(let a=o.firstChild;a;a=SE(a,o))a.name===n&&r.push(a);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let a=n.firstChild;a;a=SE(a,n))o.push(a);let r=o.length;for(;r--;){const a=o[r];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var a;const u=this;let f=u.firstChild;if(L3(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||L3(f))return!1}if(f.type===8||f.type===3&&!jI(f)||f.type===3&&f.parent&&o[f.parent.name]&&Ss((a=f.value)!==null&&a!==void 0?a:"")||r&&r(f))return!1}while(f=SE(f,u));return!0}walk(n){return SE(this,null,n)}}const qR=Xe.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),KR=e=>ae(e.nodeValue)&&e.nodeValue.includes(tc),wE=e=>`${e.length===0?"":`${qt(e,n=>`[${n}]`).join(",")},`}[data-mce-bogus="all"]`,GI=(e,n)=>n.querySelectorAll(wE(e)),YR=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,n=>KR(n)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),XR=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,n=>{if(KR(n)){const o=n.parentNode;return o&&Kt(qR,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),qI=e=>YR(e).nextNode()!==null,JR=e=>XR(e).nextNode()!==null,H3=(e,n)=>n.querySelector(wE(e))!==null,QR=(e,n)=>{_e(GI(e,n),o=>{const r=ne.fromDom(o);Cs(r,"data-mce-bogus")==="all"?x(r):_e(e,a=>{zl(r,a)&&Zs(r,a)})})},xE=e=>{let n=e.nextNode();for(;n!==null;)n.nodeValue=null,n=e.nextNode()},KI=A(xE,YR),Qj=A(xE,XR),YI=(e,n)=>{const o=[{condition:ze(H3,n),action:ze(QR,n)},{condition:qI,action:KI},{condition:JR,action:Qj}];let r=e,a=!1;return _e(o,({condition:u,action:f})=>{u(r)&&(a||(r=e.cloneNode(!0),a=!0),f(r))}),r},e5=e=>{const n=zo(e,"[data-mce-bogus]");_e(n,o=>{Cs(o,"data-mce-bogus")==="all"?x(o):Fm(o)?(Rr(o,ne.fromText(Wr)),x(o)):M(o)})},z3=e=>{const n=zo(e,"input");_e(n,o=>{Zs(o,"name")})},XI=(e,n)=>{const o=ta(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},JI=(e,n)=>{const o=e.getDoc(),r=pl(ne.fromDom(e.getBody())),a=ne.fromTag("div",o);dr(a,"data-mce-bogus","all"),Rg(a,{position:"fixed",left:"-9999999px",top:"0"}),wn(a,n.innerHTML),e5(a),z3(a);const u=vl(r);Ts(u,a);const f=Wa(a.dom.innerText);return x(a),f},QI=(e,n,o)=>{let r;return n.format==="raw"?r=Xe.trim(Wa(YI(o,e.serializer.getTempAttrs()).innerHTML)):n.format==="text"?r=JI(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=XI(e,e.serializer.serialize(o,n)),n.format!=="text"&&!eh(ne.fromDom(o))&&ae(r)?Xe.trim(r):r},eG=(e,n)=>L.from(e.getBody()).fold(lt(n.format==="tree"?new _l("body",11):""),o=>QI(e,n,o)),e7=Xe.makeMap,V3=e=>{const n=[];e=e||{};const o=e.indent,r=e7(e.indent_before||""),a=e7(e.indent_after||""),u=Vo.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,E)=>{if(o&&r[b]&&n.length>0){const R=n[n.length-1];R.length>0&&R!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let R=0,B=y.length;R<B;R++){const P=y[R];n.push(" ",P.name,'="',u(P.value,!0),'"')}if(!E||f?n[n.length]=">":n[n.length]=" />",E&&o&&a[b]&&n.length>0){const R=n[n.length-1];R.length>0&&R!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&a[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Sh=(e={},n=Xc())=>{const o=V3(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:y=>{var E;o.text((E=y.value)!==null&&E!==void 0?E:"",y.raw)},8:y=>{var E;o.comment((E=y.value)!==null&&E!==void 0?E:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var E;o.doctype((E=y.value)!==null&&E!==void 0?E:"")},4:y=>{var E;o.cdata((E=y.value)!==null&&E!==void 0?E:"")},11:y=>{let E=y;if(E=E.firstChild)do b(E);while(E=E.next)}};o.reset();const b=y=>{var E;const R=f[y.type];if(R)R(y);else{const B=y.name,P=B in n.getVoidElements();let z=y.attributes;if(u&&z&&z.length>1){const j=[];j.map={};const Z=n.getElementRule(y.name);if(Z){for(let Y=0,oe=Z.attributesOrder.length;Y<oe;Y++){const me=Z.attributesOrder[Y];if(me in z.map){const ge=z.map[me];j.map[me]=ge,j.push({name:me,value:ge})}}for(let Y=0,oe=z.length;Y<oe;Y++){const me=z[Y].name;if(!(me in j.map)){const ge=z.map[me];j.map[me]=ge,j.push({name:me,value:ge})}}z=j}}if(o.start(B,z,P),Bm(B))ae(y.value)&&o.text(y.value,!0),o.end(B);else if(!P){let j=y.firstChild;if(j){(B==="pre"||B==="textarea")&&j.type===3&&((E=j.value)===null||E===void 0?void 0:E[0])===`
`&&o.text(`
`,!0);do b(j);while(j=j.next)}o.end(B)}}};return a.type===1&&!e.inner?b(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},t5=new Set;_e(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{t5.add(n)});const n5=new Set;_e(["background-color"],n=>{n5.add(n)});const o5=["font","text-decoration","text-emphasis"],tG=(e,n)=>e.parseStyle(e.getAttrib(n,"style")),YC=(e,n)=>yr(tG(e,n)),nG=e=>t5.has(e),t7=e=>n5.has(e),n7=(e,n)=>vo(YC(e,n),o=>nG(o)),o7=(e,n)=>n7(e,n)&&vo(YC(e,n),o=>t7(o)),z0=e=>Rt(e,n=>vo(o5,o=>Ps(n,o))),s7=(e,n,o)=>{const r=YC(e,n),a=YC(e,o),u=f=>{var b,y;const E=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",R=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return dn(E)&&dn(R)&&E!==R};return vo(r,f=>{const b=y=>vo(y,E=>E===f);if(!b(a)&&b(o5)){const y=z0(a);return vo(y,u)}else return u(f)})},U3=(e,n,o)=>L.from(o.container()).filter(je).exists(r=>{const a=e?0:-1;return n(r.data.charAt(o.offset()+a))}),EE=ze(U3,!0,Km),TE=ze(U3,!1,Km),s5=e=>{const n=e.container();return je(n)&&(n.data.length===0||q1(n.data)&&to.isBookmarkNode(n.parentNode))},eg=(e,n)=>o=>Pp(e?0:-1,o).filter(n).isSome(),r7=e=>xw(e)&&_s(ne.fromDom(e),"display")==="block",r5=e=>as(e)&&!ak(e),oG=eg(!0,r7),c7=eg(!1,r7),XC=eg(!0,Ji),V0=eg(!1,Ji),W3=eg(!0,Ld),c5=eg(!1,Ld),U0=eg(!0,r5),W0=eg(!1,r5),a7=e=>e.slice(0,-1),sG=(e,n,o)=>dl(n,e)?a7(qh(e,r=>o(r)||On(r,n))):[],a5=(e,n)=>sG(e,n,Pe),tg=(e,n)=>[e].concat(a5(e,n)),Z3=(e,n,o)=>Xv(e,n,o,s5),l5=e=>n=>e.isBlock(Un(n)),l7=(e,n,o)=>ts(tg(ne.fromDom(n.container()),e),l5(o)),i5=(e,n,o,r)=>Z3(e,n.dom,o).forall(a=>l7(n,o,r).fold(()=>!nd(a,o,n.dom),u=>!nd(a,o,n.dom)&&dl(u,ne.fromDom(a.container())))),j3=(e,n,o,r)=>l7(n,o,r).fold(()=>Z3(e,n.dom,o).forall(a=>!nd(a,o,n.dom)),a=>Z3(e,a.dom,o).isNone()),G3=ze(j3,!1),u5=ze(j3,!0),i7=ze(i5,!1),u7=ze(i5,!0),d7=e=>Wv(e).exists(Fm),kE=(e,n,o,r)=>{const a=Rt(tg(ne.fromDom(o.container()),n),f=>r.isBlock(Un(f))),u=Ks(a).getOr(n);return wi(e,u.dom,o).filter(d7)},q3=(e,n,o)=>Wv(n).exists(Fm)||kE(!0,e,n,o).isSome(),_E=(e,n,o)=>NR(n).exists(Fm)||kE(!1,e,n,o).isSome(),d5=ze(kE,!1),m7=ze(kE,!0),m5=e=>Oe.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),f5=(e,n,o)=>{const r=Rt(tg(ne.fromDom(n.container()),e),a=>o.isBlock(Un(a)));return Ks(r).getOr(e)},g5=(e,n,o)=>m5(n)?TE(n):TE(n)||fa(f5(e,n,o).dom,n).exists(TE),h5=(e,n,o)=>m5(n)?EE(n):EE(n)||Os(f5(e,n,o).dom,n).exists(EE),dt=e=>Jt(["pre","pre-wrap"],e),Xd=e=>Wv(e).bind(n=>Ca(n,Gr)).exists(n=>dt(_s(n,"white-space"))),rG=(e,n)=>fa(e.dom,n).isNone(),f7=(e,n)=>Os(e.dom,n).isNone(),K3=(e,n,o)=>rG(e,n)||f7(e,n)||G3(e,n,o)||u5(e,n,o)||_E(e,n,o)||q3(e,n,o),p5=e=>De(e)&&as(e)&&uh(e),Y3=(e,n)=>o=>p5(new bc(o,e)[n]()),X3=(e,n)=>{const o=Os(e.dom,n).getOr(n),r=Y3(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},g7=(e,n)=>{const o=fa(e.dom,n).getOr(n),r=Y3(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},J3=(e,n,o)=>Xd(n)?!1:K3(e,n,o)||g5(e,n,o)||h5(e,n,o),JC=(e,n,o)=>Xd(n)?!1:G3(e,n,o)||i7(e,n,o)||_E(e,n,o)||g5(e,n,o)||g7(e,n),h7=e=>{const n=e.container(),o=e.offset();return je(n)&&o<n.data.length?Oe(n,o+1):e},QC=(e,n,o)=>Xd(n)?!1:u5(e,n,o)||u7(e,n,o)||q3(e,n,o)||h5(e,n,o)||X3(e,n),Q3=(e,n,o)=>JC(e,n,o)||QC(e,h7(n),o),b5=(e,n)=>sy(e.charAt(n)),eS=(e,n)=>Km(e.charAt(n)),p7=e=>{const n=e.container();return je(n)&&ir(n.data,Eo)},b7=e=>{const n=e.split("");return qt(n,(o,r)=>sy(o)&&r>0&&r<n.length-1&&mu(n[r-1])&&mu(n[r+1])?" ":o).join("")},v5=(e,n,o,r)=>{const a=n.data,u=Oe(n,0);return!o&&b5(a,0)&&!Q3(e,u,r)?(n.data=" "+a.slice(1),!0):o&&eS(a,0)&&JC(e,u,r)?(n.data=Eo+a.slice(1),!0):!1},v7=e=>{const n=e.data,o=b7(n);return o!==n?(e.data=o,!0):!1},y5=(e,n,o,r)=>{const a=n.data,u=Oe(n,a.length-1);return!o&&b5(a,a.length-1)&&!Q3(e,u,r)?(n.data=a.slice(0,-1)+" ",!0):o&&eS(a,a.length-1)&&QC(e,u,r)?(n.data=a.slice(0,-1)+Eo,!0):!1},C5=(e,n,o)=>{const r=n.container();if(!je(r))return L.none();if(p7(n)){const a=v5(e,r,!1,o)||v7(r)||y5(e,r,!1,o);return uo(a,n)}else if(Q3(e,n,o)){const a=v5(e,r,!0,o)||y5(e,r,!0,o);return uo(a,n)}else return L.none()},AE=e=>{const n=ne.fromDom(e.getBody());e.selection.isCollapsed()&&C5(n,Oe.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},S5=(e,n,o,r)=>{if(o===0)return;const a=ne.fromDom(e),u=Yi(a,E=>r.isBlock(Un(E))).getOr(a),f=e.data.slice(n,n+o),b=n+o>=e.data.length&&QC(u,Oe(e,e.data.length),r),y=n===0&&JC(u,Oe(e,0),r);e.replaceData(n,o,Mc(f,4,y,b))},OE=(e,n,o)=>{const r=e.data.slice(n),a=r.length-vg(r).length;S5(e,n,a,o)},e_=(e,n,o)=>{const r=e.data.slice(0,n),a=r.length-Ma(r).length;S5(e,n-a,a,o)},t_=(e,n,o,r,a=!0)=>{const u=Ma(e.data).length,f=a?e:n,b=a?n:e;return a?f.appendData(b.data):f.insertData(0,b.data),x(ne.fromDom(b)),r&&OE(f,u,o),f},y7=(e,n)=>{const o=e.container(),r=e.offset();return!Oe.isTextPosition(e)&&o===n.parentNode&&r>Oe.before(n).offset()},C7=(e,n)=>y7(n,e)?Oe(n.container(),n.offset()-1):n,S7=e=>je(e)?Oe(e,0):Oe.before(e),w7=e=>je(e)?Oe(e,e.data.length):Oe.after(e),w5=e=>ru(e.previousSibling)?L.some(w7(e.previousSibling)):e.previousSibling?Ic(e.previousSibling):L.none(),x5=e=>ru(e.nextSibling)?L.some(S7(e.nextSibling)):e.nextSibling?Pr(e.nextSibling):L.none(),x7=(e,n)=>L.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>fa(e,Oe.before(o))).orThunk(()=>Os(e,Oe.after(n))),E7=(e,n)=>Os(e,Oe.after(n)).orThunk(()=>fa(e,Oe.before(n))),T7=(e,n)=>w5(n).orThunk(()=>x5(n)).orThunk(()=>x7(e,n)),k7=(e,n)=>x5(n).orThunk(()=>w5(n)).orThunk(()=>E7(e,n)),E5=(e,n,o)=>e?k7(n,o):T7(n,o),_7=(e,n,o)=>E5(e,n,o).map(ze(C7,o)),T5=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},DE=e=>n=>n.dom===e,Gp=(e,n)=>n&&Kt(e.schema.getBlockElements(),Un(n)),RE=(e,n,o)=>{if(ma(e,n)){const r=ne.fromHtml('<br data-mce-bogus="1">');return o?_e(ur(n),a=>{my(a)||x(a)}):Qs(n),Ts(n,r),L.some(Oe.before(r.dom))}else return L.none()},A7=(e,n,o,r)=>{const a=fc(e).filter(qr),u=hl(e).filter(qr);return x(e),Ou(a,u,n,(f,b,y)=>{const E=f.dom,R=b.dom,B=E.data.length;return t_(E,R,o,r),y.container()===R?Oe(E,B):y}).orThunk(()=>(r&&(a.each(f=>e_(f.dom,f.dom.length,o)),u.each(f=>OE(f.dom,0,o))),n))},O7=(e,n)=>Kt(e.schema.getTextInlineElements(),Un(n)),Z0=(e,n,o,r=!0,a=!1)=>{const u=_7(n,e.getBody(),o.dom),f=Yi(o,ze(Gp,e),DE(e.getBody())),b=A7(o,u,e.schema,O7(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(y=>RE(e.schema,y,a)).fold(()=>{r&&T5(e,n,b)},y=>{r&&T5(e,n,L.some(y))})},D7=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,k5=e=>D7.test(e),j0=(e,n)=>ya(ne.fromDom(n),Mv(e))&&!fi(e.schema,n)&&e.dom.isEditable(n),_5=e=>{var n;return mo.DOM.getStyle(e,"direction",!0)==="rtl"||k5((n=e.textContent)!==null&&n!==void 0?n:"")},A5=(e,n,o)=>Rt(mo.DOM.getParents(o.container(),"*",n),e),qp=(e,n,o)=>{const r=A5(e,n,o);return L.from(r[r.length-1])},O5=(e,n,o)=>{const r=Gm(n,e),a=Gm(o,e);return De(r)&&r===a},R7=e=>q2(e)||X1(e),ad=(e,n)=>{const o=n.container(),r=n.offset();return e?Jc(o)?je(o.nextSibling)?Oe(o.nextSibling,0):Oe.after(o):q2(n)?Oe(o,r+1):n:Jc(o)?je(o.previousSibling)?Oe(o.previousSibling,o.previousSibling.data.length):Oe.before(o):X1(n)?Oe(o,r-1):n},D5=ze(ad,!0),n_=ze(ad,!1),ME=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},R5=e=>{e.execCommand("delete")},NE=e=>ME(e,"Delete"),M5=e=>ME(e,"ForwardDelete"),BE=e=>n=>ba(To(n),e,On),M7=e=>j2(e)||vi(e),tS=(e,n)=>dl(e,n)?Ca(n,M7,BE(e)):L.none(),nS=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},o_=(e,n,o)=>Ys(Pr(o),Ic(o),(r,a)=>{const u=ad(!0,r),f=ad(!1,a),b=ad(!1,n);return e?Os(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):fa(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),N5=e=>(Fu(e)?fc(e):ss(e)).bind(N5).orThunk(()=>L.some(e)),B5=(e,n,o,r=!0)=>{var a;n.deleteContents();const u=N5(o).getOr(o),f=ne.fromDom((a=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(f.dom===e.getBody()?nS(e,r):ma(e.schema,f,{checkRootAsContent:!1})&&(zm(f),r&&e.selection.setCursorLocation(f.dom,0)),!On(o,f)){const b=ba(To(f),o)?[]:Kr(f);_e(b.concat(ur(o)),y=>{!On(y,f)&&!dl(y,f)&&ma(e.schema,y)&&x(y)})}},PE=e=>n=>On(e,n),$E=e=>zo(e,"td,th"),s_=(e,n)=>sd(ne.fromDom(e),n),P5=e=>Ys(e.startTable,e.endTable,(n,o)=>{const r=np(n,u=>On(u,o)),a=np(o,u=>On(u,n));return!r&&!a?e:{...e,startTable:r?L.none():e.startTable,endTable:a?L.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),$5=e=>P5(e),I5=(e,n)=>{const o=s_(e.startContainer,n),r=s_(e.endContainer,n),a=o.isSome(),u=r.isSome(),f=Ys(o,r,On).getOr(!1);return $5({startTable:o,endTable:r,isStartInTable:a,isEndInTable:u,isSameTable:f,isMultiTable:!f&&a&&u})},IE=(e,n)=>({start:e,end:n}),F5=(e,n,o)=>({rng:e,table:n,cells:o}),py=Vr.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),oS=(e,n)=>Id(ne.fromDom(e),"td,th",n),r_=e=>!On(e.start,e.end),L5=(e,n)=>sd(e.start,n).bind(o=>sd(e.end,n).bind(r=>uo(On(o,r),o))),N7=(e,n)=>!r_(e)&&L5(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),B7=(e,n)=>{const o=oS(e.startContainer,n),r=oS(e.endContainer,n);return Ys(o,r,IE)},P7=e=>n=>sd(n,e).bind(o=>Us($E(o)).map(r=>IE(n,r))),$7=e=>n=>sd(n,e).bind(o=>Ks($E(o)).map(r=>IE(r,n))),c_=e=>n=>L5(n,e).map(o=>F5(n,o,$E(o))),H5=(e,n,o,r)=>{if(o.collapsed||!e.forall(r_))return L.none();if(n.isSameTable){const a=e.bind(c_(r));return L.some({start:a,end:a})}else{const a=oS(o.startContainer,r),u=oS(o.endContainer,r),f=a.bind(P7(r)).bind(c_(r)),b=u.bind($7(r)).bind(c_(r));return L.some({start:f,end:b})}},z5=(e,n)=>Hr(e,o=>On(o,n)),a_=e=>Ys(z5(e.cells,e.rng.start),z5(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),I7=(e,n,o)=>e.exists(r=>N7(r,o)&&Up(r.start,n)),l_=(e,n)=>{const{startTable:o,endTable:r}=n,a=e.cloneRange();return o.each(u=>a.setStartAfter(u.dom)),r.each(u=>a.setEndBefore(u.dom)),a},cG=(e,n,o,r)=>H5(e,n,o,r).bind(({start:a,end:u})=>a.or(u)).bind(a=>{const{isSameTable:u}=n,f=a_(a).getOr([]);if(u&&a.cells.length===f.length)return L.some(py.fullTable(a.table));if(f.length>0){if(u)return L.some(py.partialTable(f,L.none()));{const b=l_(o,n);return L.some(py.partialTable(f,L.some({...n,rng:b})))}}else return L.none()}),aG=(e,n,o,r)=>H5(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(a_).getOr([]),b=u.bind(a_).getOr([]);if(f.length>0&&b.length>0){const y=l_(o,n);return L.some(py.multiTable(f,b,y))}else return L.none()}),F7=(e,n)=>{const o=PE(e),r=B7(n,o),a=I5(n,o);return I7(r,n,o)?r.map(u=>py.singleCellTable(n,u.start)):a.isMultiTable?aG(r,a,n,o):cG(r,a,n,o)},L7=e=>_e(e,n=>{Zs(n,"contenteditable"),zm(n)}),H7=(e,n)=>L.from(e.dom.getParent(n,e.dom.isBlock)).map(ne.fromDom),Ea=(e,n,o)=>{o.each(r=>{n?x(r):(zm(r),e.selection.setCursorLocation(r.dom,0))})},i_=(e,n,o,r)=>{const a=o.cloneRange();r?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(n.dom.lastChild)):(a.setStartBefore(n.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),Al(e,a,n,!1).each(u=>u())},z7=e=>{const n=qd(e),o=ne.fromDom(e.selection.getNode());qb(o.dom)&&ma(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&vo(n,r=>On(r,o))&&dr(o,"data-mce-selected","1")},V5=(e,n,o)=>L.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const b=H7(e,f?u.endContainer:u.startContainer);u.deleteContents(),Ea(e,f,b.filter(ze(ma,e.schema)));const y=f?n[0]:n[n.length-1];return i_(e,y,r,f),ma(e.schema,y)?L.none():L.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);L7(a),z7(e)}),V7=(e,n,o,r)=>L.some(()=>{const a=e.selection.getRng(),u=n[0],f=o[o.length-1];i_(e,u,a,!0),i_(e,f,a,!1);const b=ma(e.schema,u)?n:n.slice(1),y=ma(e.schema,f)?o:o.slice(0,-1);L7(b.concat(y)),r.deleteContents(),z7(e)}),Al=(e,n,o,r=!0)=>L.some(()=>{B5(e,n,o,r)}),lG=(e,n)=>L.some(()=>Z0(e,!1,n)),U7=(e,n,o)=>F7(n,o).bind(r=>r.fold(ze(Al,e),ze(lG,e),ze(V5,e),ze(V7,e))),iG=(e,n)=>sS(e,n),W7=(e,n,o,r)=>u_(n,r).fold(()=>U7(e,n,o),a=>iG(e,a)),Z7=(e,n,o)=>{const r=ne.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?V5(e,o,L.none()):W7(e,r,a,n)},j7=(e,n)=>ts(tg(n,e),Lm),u_=(e,n)=>ts(tg(n,e),ys("caption")),Oi=(e,n,o,r,a)=>du(o,e.getBody(),a).bind(u=>j7(n,ne.fromDom(u.getNode())).bind(f=>On(f,r)?L.none():L.some(wt))),sS=(e,n)=>L.some(()=>{zm(n),e.selection.setCursorLocation(n.dom,0)}),U5=(e,n,o,r)=>Pr(e.dom).bind(a=>Ic(e.dom).map(u=>n?o.isEqual(a)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(a))).getOr(!0),G7=(e,n)=>sS(e,n),q7=(e,n,o)=>u_(e,ne.fromDom(o.getNode())).fold(()=>L.some(wt),r=>uo(!On(r,n),wt)),W5=(e,n,o,r,a)=>du(o,e.getBody(),a).fold(()=>L.some(wt),u=>U5(r,o,a,u)?G7(e,r):q7(n,r,u)),Z5=(e,n,o,r)=>{const a=Oe.fromRangeStart(e.selection.getRng());return j7(o,r).bind(u=>ma(e.schema,u,{checkRootAsContent:!1})?sS(e,u):Oi(e,o,n,u,a))},K7=(e,n,o,r)=>{const a=Oe.fromRangeStart(e.selection.getRng());return ma(e.schema,r)?sS(e,r):W5(e,o,n,r,a)},j5=(e,n)=>e?W3(n):c5(n),Y7=(e,n)=>{const o=Oe.fromRangeStart(e.selection.getRng());return j5(n,o)||wi(n,e.getBody(),o).exists(r=>j5(n,r))},X7=(e,n,o)=>{const r=ne.fromDom(e.getBody());return u_(r,o).fold(()=>Z5(e,n,r,o).orThunk(()=>uo(Y7(e,n),wt)),a=>K7(e,n,r,a))},FE=(e,n)=>{const o=ne.fromDom(e.selection.getStart(!0)),r=qd(e);return e.selection.isCollapsed()&&r.length===0?X7(e,n,o):Z7(e,o,r)},G0=(e,n)=>{let o=n;for(;o&&o!==e;){if(Xi(o)||as(o))return o;o=o.parentNode}return null},G5=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],J7=Xe.each,q5=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=E=>{const R={};return J7(n.getAttribs(E),B=>{const P=B.nodeName.toLowerCase();P!=="style"&&!a(P)&&(R[P]=n.getAttrib(E,P))}),R},y=(E,R)=>{for(const B in E)if(Kt(E,B)){const P=R[B];if(bs(P)||E[B]!==P)return!1;delete R[B]}for(const B in R)if(Kt(R,B))return!1;return!0};return ht(u)&&ht(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Ei(u)&&!Ei(f)},a=u=>vo(G5,f=>Ps(u,f))||o.has(u);return{compare:r,isAttributeInternal:a}},K5=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),Q7=e=>e.name==="summary",uG=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},Y5=(e,n,o,r)=>{const a=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===a){const y=r.nodes[a];y?y.nodes.push(o):r.nodes[a]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const E=r.attributes[y];E?E.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},qn=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&uG(o,a=>{Y5(e,n,a,r)}),r},by=(e,n)=>{const o=(r,a)=>{at(r,u=>{const f=lr(u.nodes);_e(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const E=f[y];(!(a?E.attr(u.filter.name)!==void 0:E.name===u.filter.name)||Rn(E.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},ng=(e,n,o,r={})=>{const a=qn(e,n,o);by(a,r)},wh=(e,n,o,r)=>{if((e.pad_empty_with_br||n.insert)&&o(r)){const u=new _l("br",1);n.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new _l("#text",3)).value=Eo},LE=e=>{var n;return HE(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Eo},HE=(e,n)=>{const o=e==null?void 0:e.firstChild;return De(o)&&o===e.lastChild&&o.name===n},d_=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},vy=(e,n,o,r)=>r.isEmpty(n,o,a=>d_(e,a)),eF=(e,n)=>De(e)&&(n(e)||e.name==="br"),X5=e=>{let n;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(n=o)}return L.from(n)},zE=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const a of r)o&&!n.isValidChild(o.name,a.name)&&zE(a,n,o);e.unwrap()}},m_=(e,n,o,r=wt)=>{const a=n.getTextBlockElements(),u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Xe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),y=new Set,E=R=>R!==o&&!b[R.name];for(let R=0;R<e.length;R++){const B=e[R];let P,z,j;if(!B.parent||y.has(B))continue;if(a[B.name]&&B.parent.name==="li"){let Y=B.next;for(;Y&&a[Y.name];){Y.name="li",y.add(Y),B.parent.insert(Y,B.parent);Y=Y.next}B.unwrap();continue}const Z=[B];for(P=B.parent;P&&!n.isValidChild(P.name,B.name)&&E(P);P=P.parent)Z.push(P);if(P&&Z.length>1)if(f_(n,B,P))zE(B,n);else{Z.reverse(),z=Z[0].clone(),r(z);let Y=z;for(let oe=0;oe<Z.length-1;oe++){n.isValidChild(Y.name,Z[oe].name)&&oe>0?(j=Z[oe].clone(),r(j),Y.append(j)):j=Y;for(let me=Z[oe].firstChild;me&&me!==Z[oe+1];){const ge=me.next;j.append(me),me=ge}Y=j}vy(n,u,f,z)?P.insert(B,Z[0],!0):(P.insert(z,Z[0],!0),P.insert(B,z)),P=Z[0],(vy(n,u,f,P)||HE(P,"br"))&&P.empty().remove()}else if(B.parent){if(B.name==="li"){let Y=B.prev;if(Y&&(Y.name==="ul"||Y.name==="ol")){Y.append(B);continue}if(Y=B.next,Y&&(Y.name==="ul"||Y.name==="ol")&&Y.firstChild){Y.insert(B,Y.firstChild,!0);continue}const oe=new _l("ul",1);r(oe),B.wrap(oe);continue}if(n.isValidChild(B.parent.name,"div")&&n.isValidChild("div",B.name)){const Y=new _l("div",1);r(Y),B.wrap(Y)}else zE(B,n)}}},tF=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},f_=(e,n,o=n.parent)=>o?e.children[n.name]&&!e.isValidChild(o.name,n.name)||n.name==="a"&&tF(o,"a")?!0:Q7(o)&&K5(n)?!((o==null?void 0:o.firstChild)===n&&(o==null?void 0:o.lastChild)===n):!1:!1,nF=(e,n,o,r)=>{const a=document.createRange();return a.setStart(e,n),a.setEnd(o,r),a},oF=e=>{const n=Oe.fromRangeStart(e),o=Oe.fromRangeEnd(e),r=e.commonAncestorContainer;return wi(!1,r,o).map(a=>!nd(n,o,r)&&nd(n,a,r)?nF(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},g_=e=>e.collapsed?e:oF(e),J5=e=>De(e.firstChild)&&e.firstChild===e.lastChild,Q5=e=>e.name==="br"||e.value===Eo,dG=(e,n)=>e.getBlockElements()[n.name]&&J5(n)&&Q5(n.firstChild),mG=(e,n)=>{const o=e.getNonEmptyElements();return De(n)&&(n.isEmpty(o)||dG(e,n))},fG=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),mG(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},sF=e=>{var n,o;const r=e.firstChild,a=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},gG=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return sF(a)},hG=e=>{var n;return Rt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},rF=e=>e.data===Eo||As(e),cF=e=>De(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&rF(e.firstChild),pG=e=>!e.firstChild||cF(e),aF=e=>e.length>0&&pG(e[e.length-1])?e.slice(0,-1):e,Ga=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},bG=(e,n)=>!!Ga(e,n),lF=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},eM=(e,n)=>{const o=Oe.before(e),a=uu(n).next(o);return a?a.toRange():null},iF=(e,n)=>{const o=Oe.after(e),a=uu(n).prev(o);return a?a.toRange():null},uF=(e,n,o,r)=>{const a=lF(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),Xe.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),iF(n[n.length-1],o)},dF=(e,n,o)=>{const r=e.parentNode;return r&&Xe.each(n,a=>{r.insertBefore(a,e)}),eM(e,o)},mF=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),iF(n[0],o)),h_=(e,n,o,r)=>{const a=gG(n,e,r),u=Ga(n,o.startContainer),f=aF(hG(a.firstChild)),b=1,y=2,E=n.getRoot(),R=B=>{const P=Oe.fromRangeStart(o),z=uu(n.getRoot()),j=B===b?z.prev(P):z.next(P),Z=j==null?void 0:j.getNode();return Z?Ga(n,Z)!==u:!0};return u?R(b)?dF(u,f,E):R(y)?mF(u,f,E,n):uF(u,f,E,o):null},vG=["pre"],fF=(e,n,o,r)=>{var a;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,E=Jt(vG,u.name);if(y&&E){const R=u.attr("contenteditable")!=="false",B=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===u.name,P=L.from(G0(r,o)).forall(Xi);return R&&B&&P}else return!1},p_=qb,Zo=(e,n,o)=>{if(De(o)){const r=e.getParent(n.endContainer,p_);return o===r&&Up(ne.fromDom(o),n)}else return!1},gF=(e,n)=>{if(e.isBlock(n)&&e.isEditable(n)){const o=n.childNodes;return o.length===1&&As(o[0])||o.length===0}else return!1},hF=(e,n,o)=>{var r;o.getAttribute("data-mce-bogus")==="all"?(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o):gF(e.dom,o)?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})},rS=(e,n,o)=>{L.from(e.getParent(n,"td,th")).map(ne.fromDom).each(r=>bk(r,o))},tM=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=q5(e),f="*[data-mce-fragment]",b=r.select(f);Xe.each(b,y=>{const E=P=>De(o[P.nodeName.toLowerCase()]),R=P=>P.childNodes.length===1;if((P=>!(n7(r,P)||o7(r,P)))(y)&&E(y)&&R(y)){const P=YC(r,y),z=(oe,me)=>An(oe,ge=>Jt(me,ge)),j=oe=>R(y)&&r.is(oe,f)&&E(oe)&&(oe.nodeName===y.nodeName&&z(P,YC(r,oe))||j(oe.children[0])),Z=oe=>De(oe)&&oe!==a&&(u.compare(y,oe)||Z(oe.parentElement)),Y=oe=>De(oe)&&oe!==a&&r.is(oe,f)&&(s7(r,y,oe)||Y(oe.parentElement));(j(y.children[0])||Z(y.parentElement)&&!Y(y.parentElement))&&r.remove(y,!0)}})}},pF=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},bF=e=>{Xe.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},vF=e=>!!e.getAttribute("data-mce-fragment"),nM=(e,n)=>De(n)&&!e.schema.getVoidElements()[n.nodeName],yF=(e,n)=>{var o,r,a;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=G0(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let E=f.createRng();const R=n.previousSibling;if(je(R)){E.setStart(R,(r=(o=R.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const z=n.nextSibling;je(z)&&(R.appendData(z.data),(a=z.parentNode)===null||a===void 0||a.removeChild(z))}else E.setStartBefore(n),E.setEndBefore(n);const B=z=>{let j=Oe.fromRangeStart(z);return j=uu(e.getBody()).next(j),j==null?void 0:j.toRange()},P=f.getParent(n,f.isBlock);if(f.remove(n),P&&f.isEmpty(P)){const z=p_(P);Qs(ne.fromDom(P)),E.setStart(P,0),E.setEnd(P,0),!z&&!vF(P)&&(u=B(E))?(E=u,f.remove(P)):f.add(P,f.create("br",z?{}:{"data-mce-bogus":"1"}))}b.setRng(E)},yG=e=>{const n=e.dom,o=g_(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,p_);Zo(n,o,r)?Al(e,o,ne.fromDom(r)):CF(o)||CG(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},CG=e=>oM(e,je),CF=e=>oM(e,Ew),oM=(e,n)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&n(e.startContainer.childNodes[e.startOffset]),SF=e=>{for(let n=e;n;n=n.walk())if(n.attr("id")==="mce_marker")return L.some(n);return L.none()},wF=(e,n,o)=>{var r;return vo(o.children(),K5)&&((r=e.getParent(n,e.isBlock))===null||r===void 0?void 0:r.nodeName)==="SUMMARY"},sM=(e,n,o)=>{var r,a;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,E=Sh({validate:!0},e.schema),R='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(n=Wa(n)),n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,R);let B=u.getRng();const P=B.startContainer,z=e.getBody();P===z&&u.isCollapsed()&&f.isBlock(z.firstChild)&&nM(e,z.firstChild)&&f.isEmpty(z.firstChild)&&(B=f.createRng(),B.setStart(z.firstChild,0),B.setEnd(z.firstChild,0),u.setRng(B)),u.isCollapsed()||yG(e);const j=u.getNode(),Z={context:j.nodeName.toLowerCase(),data:o.data,insert:!0},Y=b.parse(n,Z);if(o.paste===!0&&fG(e.schema,Y)&&bG(f,j))return B=h_(E,f,u.getRng(),Y),B&&u.setRng(B),n;o.paste===!0&&fF(f,Y,j,e.getBody())&&((r=Y.firstChild)===null||r===void 0||r.unwrap()),pF(Y);let oe=Y.lastChild;if(oe&&oe.attr("id")==="mce_marker"){const me=oe;for(oe=oe.prev;oe&&oe.name!=="table";oe=oe.walk(!0))if(oe.type===3||!f.isBlock(oe.name)){oe.parent&&e.schema.isValidChild(oe.parent.name,"span")&&oe.parent.insert(me,oe,oe.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(j),!Z.invalid&&!wF(f,j,Y))n=E.serialize(Y),hF(e,n,j);else{e.selection.setContent(R);let me=u.getNode(),ge;const ve=e.getBody();for(Gu(me)?me=ge=ve:ge=me;ge&&ge!==ve;)me=ge,ge=ge.parentNode;n=me===ve?ve.innerHTML:f.getOuterHTML(me);const Ie=b.parse(n),Ze=SF(Ie),pt=Ze.bind(X5).getOr(Ie);Ze.each(gt=>gt.replace(Y));const Ae=Y.children(),we=(a=Y.parent)!==null&&a!==void 0?a:Ie;Y.unwrap();const Le=Rt(Ae,gt=>f_(e.schema,gt,we));m_(Le,e.schema,pt),ng(b.getNodeFilters(),b.getAttributeFilters(),Ie),n=E.serialize(Ie),me===ve?f.setHTML(ve,n):f.setOuterHTML(me,n)}return tM(e,y),yF(e,f.get("mce_marker")),bF(e.getBody()),rS(f,u.getStart(),e.schema),ik(e.schema,e.getBody(),u.getStart()),n},VE=e=>e instanceof _l,xn=e=>{I0(e)&&Pr(e.getBody()).each(n=>{const o=n.getNode(),r=Ld(o)?Pr(o).getOr(n):n;e.selection.setRng(r.toRange())})},UE=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&xn(e)},cS=(e,n,o,r)=>{if(o=Wa(o),o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=ta(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,f0(e),o)):o||(o=a),UE(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Sh({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=eh(ne.fromDom(n))?o:Xe.trim(o);return UE(e,a,r.no_selection),{content:a,html:a}}},aS=(e,n,o,r)=>{ng(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=Sh({validate:!1},e.schema).serialize(o),u=Wa(eh(ne.fromDom(n))?a:Xe.trim(a));return UE(e,u,r.no_selection),{content:o,html:u}},lS=(e,n,o)=>L.from(e.getBody()).map(r=>VE(n)?aS(e,r,n,o):cS(e,r,n,o)).getOr({content:n,html:VE(o.content)?"":o.content}),q0=uy,b_=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(Ti(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},rM=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>b_(e,b,o)?!0:b.parentNode===u||!!xh(e,b,o,r,!0));return!!xh(e,f,o,r,a)},v_=(e,n,o)=>oc(o)&&q0(n,o.inline)||Kd(o)&&q0(n,o.block)?!0:Ti(o)?ht(n)&&e.is(n,o.selector):!1,xF=(e,n,o,r,a,u)=>{const f=o[r],b=r==="attributes";if(le(o.onmatch))return o.onmatch(n,o,r);if(f){if(rl(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):R0(e,n,f[y]))return!0}else for(const y in f)if(Kt(f,y)){const E=b?e.getAttrib(n,y):R0(e,n,y),R=Xm(f[y],u),B=Rn(E)||Xs(E);if(B&&Rn(R))continue;if(a&&B&&!o.exact||(!a||o.exact)&&!q0(E,dy(R,y)))return!1}}return!0},xh=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&ht(n))for(let b=0;b<u.length;b++){const y=u[b];if(v_(e.dom,n,y)&&xF(f,n,y,"attributes",a,r)&&xF(f,n,y,"styles",a,r)){const E=y.classes;if(E){for(let R=0;R<E.length;R++)if(!e.dom.hasClass(n,Xm(E[R],r)))return}return y}}},y_=(e,n,o,r,a)=>{if(r)return rM(e,r,n,o,a);if(r=e.selection.getNode(),rM(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&rM(e,u,n,o,a))},SG=(e,n,o)=>{const r=[],a={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!a[y]&&xh(e,f,y,o)&&(a[y]=!0,r.push(y))}},e.dom.getRoot()),r},EF=(e,n)=>{const o=a=>On(a,ne.fromDom(e.getBody())),r=(a,u)=>xh(e,a.dom,u)?L.some(u):L.none();return L.from(e.selection.getStart(!0)).bind(a=>_(ne.fromDom(a),u=>la(n,f=>r(u,f)),o)).getOrNull()},TF=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o&&e.selection.isEditable()){const a=e.selection.getStart(),u=M0(r,a);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Ti(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},wG=(e,n,o)=>Ro(o,(r,a)=>{const u=VC(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),iS=tc,ms=(e,n)=>e.importNode(n,!0),kF=e=>{if(e){const n=new bc(e,e);for(let o=n.current();o;o=n.next())if(je(o))return o}return null},cM=e=>{const n=ne.fromTag("span");return Gc(n,{id:Jv,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ts(n,ne.fromText(iS)),n},_F=e=>{const n=kF(e);return n&&n.data.charAt(0)===iS&&n.deleteData(0,1),n},K0=(e,n,o)=>{const r=e.dom,a=e.selection;if(Yo(n))Z0(e,!1,ne.fromDom(n),o,!0);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,E=u.endContainer,R=u.endOffset,B=_F(n);r.remove(n,!0),b===B&&y>0&&u.setStart(B,y-1),E===B&&R>0&&u.setEnd(B,R-1),f&&r.isEmpty(f)&&zm(ne.fromDom(f)),a.setRng(u)}},C_=(e,n,o)=>{const r=e.dom,a=e.selection;if(n)K0(e,n,o);else if(n=qm(e.getBody(),a.getStart()),!n)for(;n=r.get(Jv);)K0(e,n,o)},AF=(e,n,o)=>{var r,a;const u=e.dom,f=u.getParent(o,ze(Wp,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(mv(ne.fromDom(o)),u.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(n,o):u.insertAfter(n,o))},og=(e,n)=>(e.appendChild(n),n),no=(e,n)=>{var o;const r=Ar(e,(u,f)=>og(u,f.cloneNode(!1)),n),a=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return og(r,a.createTextNode(iS))},xc=(e,n,o,r,a,u)=>{const f=e.formatter,b=e.dom,y=Rt(yr(f.get()),B=>B!==r&&!ir(B,"removeformat")),E=wG(e,o,y);if(Rt(E,B=>!x3(e,B,r)).length>0){const B=o.cloneNode(!1);return b.add(n,B),f.remove(r,a,B,u),b.remove(B),L.some(B)}else return L.none()},Qm=e=>w1(e,_m(e).replace(new RegExp(`${Eo}$`)," ")),sg=(e,n)=>{const o=()=>{n!==null&&!e.dom.isEmpty(n)&&fc(ne.fromDom(n)).each(r=>{qr(r)?Qm(r):x1(r,a=>qr(a)).each(a=>{qr(a)&&Qm(a)})})};e.once("input",r=>{r.data&&!Km(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},Kp=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let b=f.startOffset;const E=f.startContainer.nodeValue;r=qm(e.getBody(),a.getStart());const R=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(E&&b>0&&b<E.length&&R.test(E.charAt(b))&&R.test(E.charAt(b-1))){const B=a.getBookmark();f.collapse(!0);let P=he(e.dom,f,u);P=L0(P),e.formatter.apply(n,o,P),a.moveToBookmark(B)}else{let B=r?kF(r):null;(!r||(B==null?void 0:B.data)!==iS)&&(r=ms(e.getDoc(),cM(!0).dom),B=r.firstChild,f.insertNode(r),b=1,sg(e,r)),e.formatter.apply(n,o,r),a.setCursorLocation(B,b)}},S_=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),E=y.startContainer,R=y.startOffset;let B=E;je(E)&&(R!==E.data.length&&(f=!0),B=B.parentNode);const P=[];let z;for(;B;){if(xh(e,B,n,o,r)){z=B;break}B.nextSibling&&(f=!0),P.push(B),B=B.parentNode}if(z)if(f){const j=u.getBookmark();y.collapse(!0);let Z=he(a,y,b,{includeTrailingSpace:!0});Z=L0(Z),e.formatter.remove(n,o,Z,r),u.moveToBookmark(j)}else{const j=qm(e.getBody(),z),Z=De(j)?a.getParents(z.parentNode,ft,j):[],Y=cM(!1).dom;AF(e,Y,j??z);const oe=xc(e,Y,z,n,o,r),me=no([...P,...oe.toArray(),...Z],Y);j&&K0(e,j,De(j)),u.setCursorLocation(me,1),sg(e,Y),a.isEmpty(z)&&a.remove(z)}},OF=(e,n,o)=>{const r=e.selection,a=e.getBody();C_(e,null,o),(n===8||n===46)&&r.isCollapsed()&&r.getStart().innerHTML===iS&&C_(e,qm(a,r.getStart()),!0),(n===37||n===39)&&C_(e,qm(a,r.getStart()),!0)},DF=e=>je(e)&&Hi(e.data,Eo),RF=e=>{e.on("mouseup keydown",n=>{OF(e,n.keyCode,DF(e.selection.getRng().endContainer))})},aM=e=>{const n=cM(!1),o=no(e,n.dom);return{caretContainer:n,caretPosition:Oe(o,0)}},w_=(e,n)=>{const{caretContainer:o,caretPosition:r}=aM(n);return Rr(ne.fromDom(e),o),x(ne.fromDom(e)),r},uS=(e,n)=>{const{caretContainer:o,caretPosition:r}=aM(n);return e.insertNode(o.dom),r},x_=(e,n)=>{if(xi(n.dom))return!1;const o=e.schema.getTextInlineElements();return Kt(o,Un(n))&&!xi(n.dom)&&!Mm(n.dom)},yy={},lM=Ha(["pre"]),MF=(e,n)=>{yy[e]||(yy[e]=[]),yy[e].push(n)},NF=(e,n)=>{Kt(yy,e)&&_e(yy[e],o=>{o(n)})};MF("pre",e=>{const n=e.selection.getRng(),o=a=>u=>{const f=u.previousSibling;return lM(f)&&Jt(a,f)},r=(a,u)=>{const f=ne.fromDom(u),b=fl(f).dom;x(f),ui(ne.fromDom(a),[ne.fromTag("br",b),ne.fromTag("br",b),...ur(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=Rt(Rt(a,lM),o(a));_e(u,f=>{r(f.previousSibling,f)})}});const E_=["fontWeight","fontStyle","color","fontSize","fontFamily"],BF=e=>Ot(e.styles)&&vo(yr(e.styles),n=>Jt(E_,n)),PF=e=>ts(e,n=>oc(n)&&n.inline==="span"&&BF(n)),iM=(e,n)=>{const o=e.get(n);return $n(o)?PF(o):L.none()},uM=(e,n)=>fa(n,Oe.fromRangeStart(e)).isNone(),WE=(e,n)=>Os(n,Oe.fromRangeEnd(e)).exists(o=>!As(o.getNode())||Os(n,o).isSome())===!1,T_=e=>n=>x2(n)&&e.isEditable(n),ZE=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return uM(o,n[0])&&WE(o,n[0])?n:[];{const r=Ks(n).filter(f=>uM(o,f)).toArray(),a=Us(n).filter(f=>WE(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},xG=e=>Rt(ZE(e),T_(e.dom)),Fc=e=>Rt(e.getSelectedBlocks(),T_(e.dom)),k_=Xe.each,dM=e=>ht(e)&&!Ei(e)&&!xi(e)&&!Mm(e),mM=(e,n)=>{for(let o=e;o;o=o[n]){if(je(o)&&dn(o.data))return e;if(ht(o)&&!Ei(o))return o}return e},fM=(e,n,o)=>{const r=q5(e),a=ju(n)&&e.dom.isEditable(n),u=ju(o)&&e.dom.isEditable(o);if(a&&u){const f=mM(n,"previousSibling"),b=mM(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const E=y;y=y.nextSibling,f.appendChild(E)}return e.dom.remove(b),Xe.each(Xe.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},gM=(e,n,o,r)=>{var a;if(r&&n.merge_siblings!==!1){const u=(a=fM(e,rE(r),r))!==null&&a!==void 0?a:r;fM(e,u,rE(u,!0))}},$F=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";k_(e.select(r,o),a=>{dM(a)&&e.isEditable(a)&&k_(n.styles,(u,f)=>{e.setStyle(a,f,"")})})}},jE=(e,n,o)=>{k_(e.childNodes,r=>{dM(r)&&(n(r)&&o(r),r.hasChildNodes()&&jE(r,n,o))})},dS=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},hM=(e,n)=>o=>!!(o&&R0(e,o,n)),__=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),dS(e,r)},Y0=Vr.generate([{keep:[]},{rename:["name"]},{removed:[]}]),X0=/^(src|href|style)$/,GE=Xe.each,mS=uy,pM=e=>/^(TR|TH|TD)$/.test(e.nodeName),A_=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),O_=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if(ht(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return je(r)&&o&&a>=r.data.length&&(r=new bc(r,e.getBody()).next()||r),je(r)&&!o&&a===0&&(r=new bc(r,e.getBody()).prev()||r),r},bM=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return pM(e)&&r?e.nodeName==="TR"&&r[o]||r:e},qE=(e,n,o,r)=>{var a;const u=e.create(o,r);return(a=n.parentNode)===null||a===void 0||a.insertBefore(u,n),u.appendChild(n),u},vM=(e,n,o,r,a)=>{const u=ne.fromDom(n),f=ne.fromDom(e.create(r,a)),b=o?qi(u):$s(u);return ui(f,b),o?(Rr(u,f),zu(f,u)):(Yr(u,f),Ts(f,u)),f.dom},IF=(e,n)=>n.links&&e.nodeName==="A",yM=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=ta(e);Kd(o)&&r===u.getRoot()&&(!o.list_block||!mS(n,o.list_block))&&_e(lr(n.childNodes),b=>{ph(e,f,b.nodeName.toLowerCase())?a?a.appendChild(b):(a=qE(u,b,f),u.setAttribs(a,f0(e))):a=null}),!(aE(o)&&!mS(o.inline,n))&&u.remove(n,!0)},CM=(e,n,o)=>Bs(e)?{name:n,value:null}:{name:e,value:Xm(n,o)},SM=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},FF=(e,n,o,r,a)=>{let u=!1;GE(o.styles,(f,b)=>{const{name:y,value:E}=CM(b,f,r),R=dy(E,y);(o.remove_similar||te(E)||!ht(a)||mS(R0(e,a,y),R))&&e.setStyle(n,y,""),u=!0}),u&&SM(e,n)},LF=(e,n,o)=>{n==="removeformat"?_e(Fc(e.selection),r=>{_e(E_,a=>e.dom.setStyle(r,a,"")),SM(e.dom,r)}):iM(e.formatter,n).each(r=>{_e(Fc(e.selection),a=>FF(e.dom,a,r,o,null))})},wM=(e,n,o,r,a)=>{const u=e.dom,f=q5(e),b=e.schema;if(oc(n)&&Ug(b,n.inline)&&fi(b,r)&&r.parentElement===e.getBody())return yM(e,r,n),Y0.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!v_(u,r,n)&&!IF(r,n))return Y0.keep();const y=r,E=n.preserve_attributes;if(oc(n)&&n.remove==="all"&&$n(E)){const R=Rt(u.getAttribs(y),B=>Jt(E,B.name.toLowerCase()));if(u.removeAllAttribs(y),_e(R,B=>u.setAttrib(y,B.name,B.value)),R.length>0)return Y0.rename("span")}if(n.remove!=="all"){FF(u,y,n,o,a),GE(n.attributes,(B,P)=>{const{name:z,value:j}=CM(P,B,o);if(n.remove_similar||te(j)||!ht(a)||mS(u.getAttrib(a,z),j)){if(z==="class"){const Z=u.getAttrib(y,z);if(Z){let Y="";if(_e(Z.split(/\s+/),oe=>{/mce\-\w+/.test(oe)&&(Y+=(Y?" ":"")+oe)}),Y){u.setAttrib(y,z,Y);return}}}if(X0.test(z)&&y.removeAttribute("data-mce-"+z),z==="style"&&Ha(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(z),u.setStyle(y,"list-style-type","none");return}z==="class"&&y.removeAttribute("className"),y.removeAttribute(z)}}),GE(n.classes,B=>{B=Xm(B,o),(!ht(a)||u.hasClass(a,B))&&u.removeClass(y,B)});const R=u.getAttribs(y);for(let B=0;B<R.length;B++){const P=R[B].nodeName;if(!f.isAttributeInternal(P))return Y0.keep()}}return n.remove!=="none"?(yM(e,y,n),Y0.removed()):Y0.keep()},EG=(e,n,o,r,a)=>{let u;return n.parentNode&&_e(M0(e.dom,n.parentNode).reverse(),f=>{if(!u&&ht(f)&&f.id!=="_start"&&f.id!=="_end"){const b=xh(e,f,o,r,a);b&&b.split!==!1&&(u=f)}}),u},HF=(e,n,o,r)=>wM(e,n,o,r,r).fold(lt(r),a=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,a)),lt(null)),D_=(e,n,o,r,a,u,f,b)=>{var y,E;let R,B;const P=e.dom;if(o){const z=o.parentNode;for(let j=r.parentNode;j&&j!==z;j=j.parentNode){let Z=P.clone(j,!1);for(let Y=0;Y<n.length&&(Z=HF(e,n[Y],b,Z),Z!==null);Y++);Z&&(R&&Z.appendChild(R),B||(B=Z),R=Z)}(!f.mixed||!P.isBlock(o))&&(r=(y=P.split(o,r))!==null&&y!==void 0?y:r),R&&B&&((E=a.parentNode)===null||E===void 0||E.insertBefore(R,a),B.appendChild(a),oc(f)&&gM(e,f,b,R))}return r},R_=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,E=Z=>{const Y=EG(e,Z,n,o,a);return D_(e,u,Y,Z,Z,!0,f,o)},R=Z=>Ei(Z)&&ht(Z)&&(Z.id==="_start"||Z.id==="_end"),B=Z=>vo(u,Y=>KE(e,Y,o,Z,Z)),P=Z=>{const Y=lr(Z.childNodes),me=B(Z)||vo(u,Ie=>v_(b,Z,Ie)),ge=Z.parentNode;if(!me&&De(ge)&&N0(f)&&B(ge),f.deep&&Y.length)for(let Ie=0;Ie<Y.length;Ie++)P(Y[Ie]);_e(["underline","line-through","overline"],Ie=>{ht(Z)&&e.dom.getStyle(Z,"text-decoration")===Ie&&Z.parentNode&&HC(b,Z.parentNode)===Ie&&KE(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Ie}},void 0,Z)})},z=Z=>{const Y=b.get(Z?"_start":"_end");if(Y){let oe=Y[Z?"firstChild":"lastChild"];return R(oe)&&(oe=oe[Z?"firstChild":"lastChild"]),je(oe)&&oe.data.length===0&&(oe=Z?Y.previousSibling||Y.nextSibling:Y.nextSibling||Y.previousSibling),b.remove(Y,!0),oe}else return null},j=Z=>{let Y,oe,me=he(b,Z,u,{includeTrailingSpace:Z.collapsed});if(f.split){if(me=L0(me),Y=O_(e,me,!0),oe=O_(e,me),Y!==oe){if(Y=bM(Y,!0),oe=bM(oe,!1),A_(b,Y,oe)){const ve=L.from(Y.firstChild).getOr(Y);E(vM(b,ve,!0,"span",{id:"_start","data-mce-type":"bookmark"})),z(!0);return}if(A_(b,oe,Y)){const ve=L.from(oe.lastChild).getOr(oe);E(vM(b,ve,!1,"span",{id:"_end","data-mce-type":"bookmark"})),z(!1);return}Y=qE(b,Y,"span",{id:"_start","data-mce-type":"bookmark"}),oe=qE(b,oe,"span",{id:"_end","data-mce-type":"bookmark"});const ge=b.createRng();ge.setStartAfter(Y),ge.setEndBefore(oe),Ce(b,ge,ve=>{_e(ve,Ie=>{!Ei(Ie)&&!Ei(Ie.parentNode)&&E(Ie)})}),E(Y),E(oe),Y=z(!0),oe=z()}else Y=oe=E(Y);me.startContainer=Y.parentNode?Y.parentNode:Y,me.startOffset=b.nodeIndex(Y),me.endContainer=oe.parentNode?oe.parentNode:oe,me.endOffset=b.nodeIndex(oe)+1}Ce(b,me,ge=>{_e(ge,P)})};if(r){if(hh(r)){const Z=b.createRng();Z.setStartBefore(r),Z.setEndAfter(r),j(Z)}else j(r);mx(e,n,r,o);return}!y.isCollapsed()||!oc(f)||qd(e).length?(sE(e,()=>ly(e,j),Z=>oc(f)&&y_(e,n,o,Z)),e.nodeChanged()):S_(e,n,o,a),LF(e,n,o),mx(e,n,r,o)},xM=(e,n,o,r,a)=>{(r||e.selection.isEditable())&&R_(e,n,o,r,a)},KE=(e,n,o,r,a)=>wM(e,n,o,r,a).fold(Pe,u=>(e.dom.rename(r,u),!0),ft),EM=Xe.each,zF=(e,n,o,r)=>{const a=u=>{if(ju(u)&&ht(u.parentNode)&&e.isEditable(u)){const f=HC(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Xe.walk(r,a,"childNodes"),a(r))},VF=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=hM(e,"fontSize");jE(r,u=>a(u)&&e.isEditable(u),__(e,"backgroundColor",Xm(n.styles.backgroundColor,o)))}},UF=(e,n,o,r)=>{if(oc(n)&&(n.inline==="sub"||n.inline==="sup")){const a=hM(e,"fontSize");jE(r,f=>a(f)&&e.isEditable(f),__(e,"fontSize",""));const u=Rt(e.select(n.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},WF=(e,n,o,r)=>{EM(n,a=>{oc(a)&&EM(e.dom.select(a.inline,r),u=>{dM(u)&&KE(e,a,o,u,a.exact?u:null)}),$F(e.dom,a,r)})},ZF=(e,n,o,r,a)=>{const u=a.parentNode;xh(e,u,o,r)&&KE(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>xh(e,f,o,r)?(KE(e,n,r,a),!0):!1)},YE=Xe.each,TM=(e,n,o,r)=>{if(bC(e)&&oc(n)&&o.parentNode){const a=tv(e.schema),u=Om(ne.fromDom(o),f=>xi(f.dom));return $l(a,r)&&Ku(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},kM=(e,n,o,r)=>{if(YE(o.styles,(a,u)=>{e.setStyle(n,u,Xm(a,r))}),o.styles){const a=e.getAttrib(n,"style");a&&e.setAttrib(n,"data-mce-style",a)}},jF=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,E=(j,Z=u)=>{le(Z.onformat)&&Z.onformat(j,Z,o,r),kM(b,j,Z,o),YE(Z.attributes,(Y,oe)=>{b.setAttrib(j,oe,Xm(Y,o))}),YE(Z.classes,Y=>{const oe=Xm(Y,o);b.hasClass(j,oe)||b.addClass(j,oe)})},R=(j,Z)=>{let Y=!1;return YE(j,oe=>Ti(oe)?b.getContentEditable(Z)==="false"&&!oe.ceFalseOverride||De(oe.collapsed)&&oe.collapsed!==f?!0:b.is(Z,oe.selector)&&!xi(Z)?(E(Z,oe),Y=!0,!1):!0:!1),Y},B=j=>{if(ae(j)){const Z=b.create(j);return E(Z),Z}else return null},P=(j,Z,Y)=>{const oe=[];let me=!0;const ge=u.inline||u.block,ve=B(ge),Ie=Ae=>E3(u)&&xh(e,Ae,n,o),Ze=(Ae,we,Le)=>{const gt=UC(u)&&Wp(e.schema,Ae)&&ph(e,we,ge);return Le&&gt},pt=(Ae,we,Le,gt)=>{const $t=Ae.nodeName.toLowerCase(),kn=ph(e,ge,$t)&&ph(e,we,ge),Dn=!Y&&je(Ae)&&q1(Ae.data),oo=xi(Ae),ko=!oc(u)||!j.isBlock(Ae);return(Le||gt)&&kn&&!Dn&&!oo&&ko};Ce(j,Z,Ae=>{let we;const Le=gt=>{let $t=!1,kn=me,Dn=!1;const oo=gt.parentNode,ko=oo.nodeName.toLowerCase(),Ds=j.getContentEditable(gt);De(Ds)&&(kn=me,me=Ds==="true",$t=!0,Dn=iy(e,gt));const cc=me&&!$t;if(As(gt)&&!TM(e,u,gt,ko)){we=null,Kd(u)&&j.remove(gt);return}if(Ie(gt)){we=null;return}if(Ze(gt,ko,cc)){const Tc=j.rename(gt,ge);E(Tc),oe.push(Tc),we=null;return}if(Ti(u)){let Tc=R(a,gt);if(!Tc&&De(oo)&&N0(u)&&(Tc=R(a,oo)),!oc(u)||Tc){we=null;return}}De(ve)&&pt(gt,ko,cc,Dn)?(we||(we=j.clone(ve,!1),oo.insertBefore(we,gt),oe.push(we)),Dn&&$t&&(me=kn),we.appendChild(gt)):(we=null,_e(lr(gt.childNodes),Le),$t&&(me=kn),we=null)};_e(Ae,Le)}),u.links===!0&&_e(oe,Ae=>{const we=Le=>{Le.nodeName==="A"&&E(Le,u),_e(lr(Le.childNodes),we)};we(Ae)}),_e(oe,Ae=>{const we=$t=>{let kn=0;return _e($t.childNodes,Dn=>{!Ym(Dn)&&!Ei(Dn)&&kn++}),kn},Le=$t=>ts($t.childNodes,LC).filter(Dn=>j.getContentEditable(Dn)!=="false"&&v_(j,Dn,u)).map(Dn=>{const oo=j.clone(Dn,!1);return E(oo),j.replace(oo,$t,!0),j.remove(Dn,!0),oo}).getOr($t),gt=we(Ae);if((oe.length>1||!j.isBlock(Ae))&&gt===0){j.remove(Ae,!0);return}(oc(u)||Kd(u)&&u.wrapper)&&(!u.exact&&gt===1&&(Ae=Le(Ae)),WF(e,a,o,Ae),ZF(e,u,n,o,Ae),VF(j,u,o,Ae),zF(j,u,o,Ae),UF(j,u,o,Ae),gM(e,u,o,Ae))})},z=hh(r)?r:y.getNode();if(b.getContentEditable(z)==="false"&&!iy(e,z)){r=z,R(a,r),jf(e,n,r,o);return}if(u){if(r)if(hh(r)){if(!R(a,r)){const j=b.createRng();j.setStartBefore(r),j.setEndAfter(r),P(b,he(b,j,a),!0)}}else P(b,r,!0);else!f||!oc(u)||qd(e).length?(y.setRng(g_(y.getRng())),sE(e,()=>{ly(e,(j,Z)=>{const Y=Z?j:he(b,j,a);P(b,Y,!1)})},ft),e.nodeChanged()):Kp(e,n,o),iM(e.formatter,n).each(j=>{_e(xG(e.selection),Z=>kM(b,Z,j,o))});NF(n,e)}jf(e,n,r,o)},rg=(e,n,o,r)=>{(r||e.selection.isEditable())&&jF(e,n,o,r)},_M=e=>Kt(e,"vars"),AM=(e,n)=>{e.set({}),n.on("NodeChange",o=>{N_(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=L.from(o.node).map(a=>hh(a)?a:a.startContainer).bind(a=>ht(a)?L.some(a):L.from(a.parentElement)).getOrThunk(()=>OM(n));N_(n,r,e.get())})},OM=e=>e.selection.getStart(),DM=(e,n,o,r,a)=>Tu(n,b=>{const y=e.formatter.matchNode(b,o,a??{},r);return!bs(y)},b=>b_(e,b,o)?!0:r?!1:De(e.formatter.matchNode(b,o,a,!0))),M_=(e,n)=>{const o=n??OM(e);return Rt(M0(e.dom,o),r=>ht(r)&&!Mm(r))},N_=(e,n,o)=>{const r=M_(e,n);at(o,(a,u)=>{const f=b=>{const y=DM(e,r,u,b.similar,_M(b)?b.vars:void 0),E=y.isSome();if(b.state.get()!==E){b.state.set(E);const R=y.getOr(n);_M(b)?b.callback(E,{node:R,format:u,parents:r}):_e(b.callbacks,B=>B(E,{node:R,format:u,parents:r}))}};_e([a.withSimilar,a.withoutSimilar],f),_e(a.withVars,f)})},RM=(e,n,o,r,a,u)=>{const f=n.get();_e(o.split(","),b=>{const y=yo(f,b).getOrThunk(()=>{const R={withSimilar:{state:ns(!1),similar:!0,callbacks:[]},withoutSimilar:{state:ns(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=R,R}),E=()=>{const R=M_(e);return DM(e,R,b,a,u).isSome()};if(bs(u)){const R=a?y.withSimilar:y.withoutSimilar;R.callbacks.push(r),R.callbacks.length===1&&R.state.set(E())}else y.withVars.push({state:ns(E()),similar:a,vars:u,callback:r})}),n.set(f)},MM=(e,n,o)=>{const r=e.get();_e(n.split(","),a=>yo(r,a).each(u=>{r[a]={withSimilar:{...u.withSimilar,callbacks:Rt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Rt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Rt(u.withVars,f=>f.callback!==o)}})),e.set(r)},GF=(e,n,o,r,a,u)=>(RM(e,n,o,r,a,u),{unbind:()=>MM(n,o,r)}),qF=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(y_(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?xM(e,n,o,r):rg(e,n,o,r))},NM=Xe.explode,BM=()=>{const e={};return{addFilter:(a,u)=>{_e(NM(a),f=>{Kt(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>df(e),removeFilter:(a,u)=>{_e(NM(a),f=>{if(Kt(e,f))if(De(u)){const b=e[f],y=Rt(b.callbacks,E=>E!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},KF=(e,n)=>{_e(n,o=>{e.attr(o,null)})},J0=(e,n,o)=>{e.addNodeFilter("font",r=>{_e(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),b=a.attr("face"),y=a.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&os(y).each(E=>{u["font-size"]=o[E-1]}),a.name="span",a.attr("style",n.serialize(u)),KF(a,["color","face","size"])})})},PM=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";_e(r,u=>{if(a)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},$M=(e,n,o)=>{var r;const a=zd();n.convert_fonts_to_spans&&J0(e,a,Xe.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),PM(e,o,a)},YF=(e,n,o)=>{n.inline_styles&&$M(e,n,o)},B_=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),XF=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},P_=e=>{try{return decodeURIComponent(e)}catch{return e}},XE=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=P_(r),b=u?XF(f):f;return L.some({type:a[1],data:b,base64Encoded:u})}else return L.none()},IM=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return L.none()}const a=new Uint8Array(r.length);for(let u=0;u<a.length;u++)a[u]=r.charCodeAt(u);return L.some(new Blob([a],{type:e}))},JF=e=>new Promise((n,o)=>{XE(e).bind(({type:r,data:a,base64Encoded:u})=>IM(r,a,u)).fold(()=>o("Invalid data URI"),n)}),JE=e=>Ps(e,"blob:")?B_(e):Ps(e,"data:")?JF(e):Promise.reject("Unknown URI format"),FM=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)===null||a===void 0?void 0:a.message)},r.readAsDataURL(e)});let $_=0;const QF=e=>"blobid"+$_++,I_=(e,n,o)=>XE(e).bind(({data:r,type:a,base64Encoded:u})=>{if(n&&!u)return L.none();{const f=u?r:btoa(r);return o(f,a)}}),F_=(e,n,o)=>{const r=e.create(QF(),n,o);return e.add(r),r},QE=(e,n,o=!1)=>I_(n,o,(r,a)=>L.from(e.getByData(r,a)).orThunk(()=>IM(a,r).map(u=>F_(e,u,r)))),LM=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Ps(n,"blob:")){const r=e.getByUri(n);return De(r)?Promise.resolve(r):JE(n).then(a=>FM(a).then(u=>I_(u,!1,f=>L.some(F_(e,a,f))).getOrThunk(o)))}else return Ps(n,"data:")?QE(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},L_=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,eL=e=>L.from(e.match(L_)).bind(n=>tl(n,1)).map(n=>Ps(n,"www.")?n.substring(4):n),HM=(e,n)=>{L.from(e.attr("src")).bind(eL).forall(o=>!Jt(n,o))&&e.attr("sandbox","")},H_=(e,n)=>Ps(e,`${n}/`),hu=e=>bs(e)?"iframe":H_(e,"image")?"img":H_(e,"video")?"video":H_(e,"audio")?"audio":"iframe",zM=({type:e,src:n,width:o,height:r}={},a,u)=>{const f=hu(e),b=new _l(f,1);return b.attr(f==="audio"?{src:n}:{src:n,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&a&&HM(b,u),b},tL=e=>De(e.attr("data-mce-bogus")),VM=e=>e.attr("src")===Wn.transparentSrc||De(e.attr("data-mce-placeholder")),nL=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");VM(a)||tL(a)||Rn(u)||QE(o,u,!0).each(f=>{a.attr("src",f.blobUri())})};e.addAttributeFilter("src",a=>_e(a,r))}},oL=(e,n)=>{var o,r;const a=e.schema;e.addAttributeFilter("href",y=>{let E=y.length;const R=P=>P.split(" ").filter(j=>j.length>0).concat(["noopener"]).sort().join(" "),B=P=>{const z=P?Xe.trim(P):"";return/\b(noopener)\b/g.test(z)?z:R(z)};if(!n.allow_unsafe_link_target)for(;E--;){const P=y[E];P.name==="a"&&P.attr("target")==="_blank"&&P.attr("rel",B(P.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",y=>{let E=y.length,R,B,P,z;for(;E--;)if(z=y[E],z.name==="a"&&z.firstChild&&!z.attr("href"))for(P=z.parent,R=z.lastChild;R&&P;)B=R.prev,P.insert(R,z),R=B}),n.fix_list_elements&&e.addNodeFilter("ul,ol",y=>{let E=y.length,R,B;for(;E--;)if(R=y[E],B=R.parent,B&&(B.name==="ul"||B.name==="ol"))if(R.prev&&R.prev.name==="li")R.prev.append(R);else{const P=new _l("li",1);P.attr("style","list-style-type: none"),R.wrap(P)}});const u=a.getValidClasses();n.validate&&u&&e.addAttributeFilter("class",y=>{var E;let R=y.length;for(;R--;){const B=y[R],P=(E=B.attr("class"))!==null&&E!==void 0?E:"",z=Xe.explode(P," ");let j="";for(let Z=0;Z<z.length;Z++){const Y=z[Z];let oe=!1,me=u["*"];me&&me[Y]&&(oe=!0),me=u[B.name],!oe&&me&&me[Y]&&(oe=!0),oe&&(j&&(j+=" "),j+=Y)}j.length||(j=null),B.attr("class",j)}}),nL(e,n);const f=(o=n.sandbox_iframes)!==null&&o!==void 0?o:!1,b=Pl((r=n.sandbox_iframes_exclusions)!==null&&r!==void 0?r:[]);n.convert_unsafe_embeds&&e.addNodeFilter("object,embed",y=>_e(y,E=>{E.replace(zM({type:E.attr("type"),src:E.name==="object"?E.attr("data"):E.attr("src"),width:E.attr("width"),height:E.attr("height")},f,b))})),f&&e.addNodeFilter("iframe",y=>_e(y,E=>HM(E,b)))};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:UM,setPrototypeOf:Q0,isFrozen:Cy,getPrototypeOf:TG,getOwnPropertyDescriptor:sL}=Object;let{freeze:Di,seal:Lc,create:WM}=Object,{apply:z_,construct:Sy}=typeof Reflect<"u"&&Reflect;Di||(Di=function(n){return n}),Lc||(Lc=function(n){return n}),z_||(z_=function(n,o,r){return n.apply(o,r)}),Sy||(Sy=function(n,o){return new n(...o)});const eT=Mi(Array.prototype.forEach),V_=Mi(Array.prototype.lastIndexOf),tT=Mi(Array.prototype.pop),wy=Mi(Array.prototype.push),rL=Mi(Array.prototype.splice),U_=Mi(String.prototype.toLowerCase),cg=Mi(String.prototype.toString),ZM=Mi(String.prototype.match),fS=Mi(String.prototype.replace),cL=Mi(String.prototype.indexOf),Mn=Mi(String.prototype.trim),ef=Mi(Object.prototype.hasOwnProperty),Ri=Mi(RegExp.prototype.test),xy=aL(TypeError);function Mi(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return z_(e,n,r)}}function aL(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Sy(e,o)}}function vn(e,n){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:U_;Q0&&Q0(e,null);let r=n.length;for(;r--;){let a=n[r];if(typeof a=="string"){const u=o(a);u!==a&&(Cy(n)||(n[r]=u),a=u)}e[a]=!0}return e}function lL(e){for(let n=0;n<e.length;n++)ef(e,n)||(e[n]=null);return e}function eb(e){const n=WM(null);for(const[o,r]of UM(e))ef(e,o)&&(Array.isArray(r)?n[o]=lL(r):r&&typeof r=="object"&&r.constructor===Object?n[o]=eb(r):n[o]=r);return n}function gS(e,n){for(;e!==null;){const r=sL(e,n);if(r){if(r.get)return Mi(r.get);if(typeof r.value=="function")return Mi(r.value)}e=TG(e)}function o(){return null}return o}const jM=Di(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fs=Di(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),nT=Di(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),GM=Di(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),W_=Di(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qM=Di(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),KM=Di(["#text"]),ag=Di(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),hS=Di(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),YM=Di(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),oT=Di(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Z_=Lc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),iL=Lc(/<%[\w\W]*|[\w\W]*%>/gm),uL=Lc(/\$\{[\w\W]*/gm),sc=Lc(/^data-[\-\w.\u00B7-\uFFFF]+$/),dL=Lc(/^aria-[\-\w]+$/),Eh=Lc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mL=Lc(/^(?:\w+script|data):/i),fL=Lc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),XM=Lc(/^html$/i),gL=Lc(/^[a-z][.\w]*(-[.\w]+)+$/i);var JM=Object.freeze({__proto__:null,ARIA_ATTR:dL,ATTR_WHITESPACE:fL,CUSTOM_ELEMENT:gL,DATA_ATTR:sc,DOCTYPE_NAME:XM,ERB_EXPR:iL,IS_ALLOWED_URI:Eh,IS_SCRIPT_OR_DATA:mL,MUSTACHE_EXPR:Z_,TMPLIT_EXPR:uL});const pS={element:1,text:3,progressingInstruction:7,comment:8,document:9},hL=function(){return typeof window>"u"?null:window},pL=function(n,o){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const a="data-tt-policy-suffix";o&&o.hasAttribute(a)&&(r=o.getAttribute(a));const u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},QM=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function bS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hL();const n=Fn=>bS(Fn);if(n.version="3.2.4",n.removed=[],!e||!e.document||e.document.nodeType!==pS.document||!e.Element)return n.isSupported=!1,n;let{document:o}=e;const r=o,a=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:y,NodeFilter:E,NamedNodeMap:R=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:B,DOMParser:P,trustedTypes:z}=e,j=y.prototype,Z=gS(j,"cloneNode"),Y=gS(j,"remove"),oe=gS(j,"nextSibling"),me=gS(j,"childNodes"),ge=gS(j,"parentNode");if(typeof f=="function"){const Fn=o.createElement("template");Fn.content&&Fn.content.ownerDocument&&(o=Fn.content.ownerDocument)}let ve,Ie="";const{implementation:Ze,createNodeIterator:pt,createDocumentFragment:Ae,getElementsByTagName:we}=o,{importNode:Le}=r;let gt=QM();n.isSupported=typeof UM=="function"&&typeof ge=="function"&&Ze&&Ze.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:$t,ERB_EXPR:kn,TMPLIT_EXPR:Dn,DATA_ATTR:oo,ARIA_ATTR:ko,IS_SCRIPT_OR_DATA:Ds,ATTR_WHITESPACE:cc,CUSTOM_ELEMENT:Tc}=JM;let{IS_ALLOWED_URI:st}=JM,Bt=null;const Xn=vn({},[...jM,...fs,...nT,...W_,...KM]);let so=null;const Be=vn({},[...ag,...hS,...YM,...oT]);let Ge=Object.seal(WM(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Nt=null,_n=null,Pn=!0,fo=!0,Cd=!1,mg=!0,Ya=!1,Xl=!0,yu=!1,ka=!1,Ml=!1,Sd=!1,d1=!1,Ht=!1,Vn=!0,Gs=!1;const Ir="user-content-";let kc=!0,Fr=!1,Rs={},Ms=null;const Nl=vn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let cm=null;const fg=vn({},["audio","video","img","source","image","track"]);let lf=null;const m2=vn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Rb="http://www.w3.org/1998/Math/MathML",$h="http://www.w3.org/2000/svg",wd="http://www.w3.org/1999/xhtml";let Ih=wd,pw=!1,f2=null;const rI=vn({},[Rb,$h,wd],cg);let g2=vn({},["mi","mo","mn","ms","mtext"]),h2=vn({},["annotation-xml"]);const cI=vn({},["title","style","font","a","script"]);let p2=null;const gg=["application/xhtml+xml","text/html"],Mb="text/html";let be=null,Se=null;const ot=o.createElement("form"),qe=function(xe){return xe instanceof RegExp||xe instanceof Function},Gt=function(){let xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Se&&Se===xe)){if((!xe||typeof xe!="object")&&(xe={}),xe=eb(xe),p2=gg.indexOf(xe.PARSER_MEDIA_TYPE)===-1?Mb:xe.PARSER_MEDIA_TYPE,be=p2==="application/xhtml+xml"?cg:U_,Bt=ef(xe,"ALLOWED_TAGS")?vn({},xe.ALLOWED_TAGS,be):Xn,so=ef(xe,"ALLOWED_ATTR")?vn({},xe.ALLOWED_ATTR,be):Be,f2=ef(xe,"ALLOWED_NAMESPACES")?vn({},xe.ALLOWED_NAMESPACES,cg):rI,lf=ef(xe,"ADD_URI_SAFE_ATTR")?vn(eb(m2),xe.ADD_URI_SAFE_ATTR,be):m2,cm=ef(xe,"ADD_DATA_URI_TAGS")?vn(eb(fg),xe.ADD_DATA_URI_TAGS,be):fg,Ms=ef(xe,"FORBID_CONTENTS")?vn({},xe.FORBID_CONTENTS,be):Nl,Nt=ef(xe,"FORBID_TAGS")?vn({},xe.FORBID_TAGS,be):{},_n=ef(xe,"FORBID_ATTR")?vn({},xe.FORBID_ATTR,be):{},Rs=ef(xe,"USE_PROFILES")?xe.USE_PROFILES:!1,Pn=xe.ALLOW_ARIA_ATTR!==!1,fo=xe.ALLOW_DATA_ATTR!==!1,Cd=xe.ALLOW_UNKNOWN_PROTOCOLS||!1,mg=xe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ya=xe.SAFE_FOR_TEMPLATES||!1,Xl=xe.SAFE_FOR_XML!==!1,yu=xe.WHOLE_DOCUMENT||!1,Sd=xe.RETURN_DOM||!1,d1=xe.RETURN_DOM_FRAGMENT||!1,Ht=xe.RETURN_TRUSTED_TYPE||!1,Ml=xe.FORCE_BODY||!1,Vn=xe.SANITIZE_DOM!==!1,Gs=xe.SANITIZE_NAMED_PROPS||!1,kc=xe.KEEP_CONTENT!==!1,Fr=xe.IN_PLACE||!1,st=xe.ALLOWED_URI_REGEXP||Eh,Ih=xe.NAMESPACE||wd,g2=xe.MATHML_TEXT_INTEGRATION_POINTS||g2,h2=xe.HTML_INTEGRATION_POINTS||h2,Ge=xe.CUSTOM_ELEMENT_HANDLING||{},xe.CUSTOM_ELEMENT_HANDLING&&qe(xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ge.tagNameCheck=xe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),xe.CUSTOM_ELEMENT_HANDLING&&qe(xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ge.attributeNameCheck=xe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),xe.CUSTOM_ELEMENT_HANDLING&&typeof xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ge.allowCustomizedBuiltInElements=xe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ya&&(fo=!1),d1&&(Sd=!0),Rs&&(Bt=vn({},KM),so=[],Rs.html===!0&&(vn(Bt,jM),vn(so,ag)),Rs.svg===!0&&(vn(Bt,fs),vn(so,hS),vn(so,oT)),Rs.svgFilters===!0&&(vn(Bt,nT),vn(so,hS),vn(so,oT)),Rs.mathMl===!0&&(vn(Bt,W_),vn(so,YM),vn(so,oT))),xe.ADD_TAGS&&(Bt===Xn&&(Bt=eb(Bt)),vn(Bt,xe.ADD_TAGS,be)),xe.ADD_ATTR&&(so===Be&&(so=eb(so)),vn(so,xe.ADD_ATTR,be)),xe.ADD_URI_SAFE_ATTR&&vn(lf,xe.ADD_URI_SAFE_ATTR,be),xe.FORBID_CONTENTS&&(Ms===Nl&&(Ms=eb(Ms)),vn(Ms,xe.FORBID_CONTENTS,be)),kc&&(Bt["#text"]=!0),yu&&vn(Bt,["html","head","body"]),Bt.table&&(vn(Bt,["tbody"]),delete Nt.tbody),xe.TRUSTED_TYPES_POLICY){if(typeof xe.TRUSTED_TYPES_POLICY.createHTML!="function")throw xy('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof xe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xy('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ve=xe.TRUSTED_TYPES_POLICY,Ie=ve.createHTML("")}else ve===void 0&&(ve=pL(z,a)),ve!==null&&typeof Ie=="string"&&(Ie=ve.createHTML(""));Di&&Di(xe),Se=xe}},Kn=vn({},[...fs,...nT,...GM]),qs=vn({},[...W_,...qM]),_a=function(xe){let It=ge(xe);(!It||!It.tagName)&&(It={namespaceURI:Ih,tagName:"template"});const En=U_(xe.tagName),hr=U_(It.tagName);return f2[xe.namespaceURI]?xe.namespaceURI===$h?It.namespaceURI===wd?En==="svg":It.namespaceURI===Rb?En==="svg"&&(hr==="annotation-xml"||g2[hr]):!!Kn[En]:xe.namespaceURI===Rb?It.namespaceURI===wd?En==="math":It.namespaceURI===$h?En==="math"&&h2[hr]:!!qs[En]:xe.namespaceURI===wd?It.namespaceURI===$h&&!h2[hr]||It.namespaceURI===Rb&&!g2[hr]?!1:!qs[En]&&(cI[En]||!Kn[En]):!!(p2==="application/xhtml+xml"&&f2[xe.namespaceURI]):!1},am=function(xe){wy(n.removed,{element:xe});try{ge(xe).removeChild(xe)}catch{Y(xe)}},b2=function(xe,It){try{wy(n.removed,{attribute:It.getAttributeNode(xe),from:It})}catch{wy(n.removed,{attribute:null,from:It})}if(It.removeAttribute(xe),xe==="is")if(Sd||d1)try{am(It)}catch{}else try{It.setAttribute(xe,"")}catch{}},aI=function(xe){let It=null,En=null;if(Ml)xe="<remove></remove>"+xe;else{const Ja=ZM(xe,/^[\r\n\t ]+/);En=Ja&&Ja[0]}p2==="application/xhtml+xml"&&Ih===wd&&(xe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+xe+"</body></html>");const hr=ve?ve.createHTML(xe):xe;if(Ih===wd)try{It=new P().parseFromString(hr,p2)}catch{}if(!It||!It.documentElement){It=Ze.createDocument(Ih,"template",null);try{It.documentElement.innerHTML=pw?Ie:hr}catch{}}const Xa=It.body||It.documentElement;return xe&&En&&Xa.insertBefore(o.createTextNode(En),Xa.childNodes[0]||null),Ih===wd?we.call(It,yu?"html":"body")[0]:yu?It.documentElement:Xa},bw=function(xe){return pt.call(xe.ownerDocument||xe,xe,E.SHOW_ELEMENT|E.SHOW_COMMENT|E.SHOW_TEXT|E.SHOW_PROCESSING_INSTRUCTION|E.SHOW_CDATA_SECTION,null)},bR=function(xe){return xe instanceof B&&(typeof xe.nodeName!="string"||typeof xe.textContent!="string"||typeof xe.removeChild!="function"||!(xe.attributes instanceof R)||typeof xe.removeAttribute!="function"||typeof xe.setAttribute!="function"||typeof xe.namespaceURI!="string"||typeof xe.insertBefore!="function"||typeof xe.hasChildNodes!="function")},lI=function(xe){return typeof b=="function"&&xe instanceof b};function Fh(Fn,xe,It){eT(Fn,En=>{En.call(n,xe,It,Se)})}const vR=function(xe){let It=null;if(Fh(gt.beforeSanitizeElements,xe,null),bR(xe))return am(xe),!0;const En=be(xe.nodeName);if(Fh(gt.uponSanitizeElement,xe,{tagName:En,allowedTags:Bt}),xe.hasChildNodes()&&!lI(xe.firstElementChild)&&Ri(/<[/\w]/g,xe.innerHTML)&&Ri(/<[/\w]/g,xe.textContent)||xe.nodeType===pS.progressingInstruction||Xl&&xe.nodeType===pS.comment&&Ri(/<[/\w]/g,xe.data))return am(xe),!0;if(!Bt[En]||Nt[En]){if(!Nt[En]&&yR(En)&&(Ge.tagNameCheck instanceof RegExp&&Ri(Ge.tagNameCheck,En)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(En)))return!1;if(kc&&!Ms[En]){const hr=ge(xe)||xe.parentNode,Xa=me(xe)||xe.childNodes;if(Xa&&hr){const Ja=Xa.length;for(let Ii=Ja-1;Ii>=0;--Ii){const uf=Z(Xa[Ii],!0);uf.__removalCount=(xe.__removalCount||0)+1,hr.insertBefore(uf,oe(xe))}}}return am(xe),!0}return xe instanceof y&&!_a(xe)||(En==="noscript"||En==="noembed"||En==="noframes")&&Ri(/<\/no(script|embed|frames)/i,xe.innerHTML)?(am(xe),!0):(Ya&&xe.nodeType===pS.text&&(It=xe.textContent,eT([$t,kn,Dn],hr=>{It=fS(It,hr," ")}),xe.textContent!==It&&(wy(n.removed,{element:xe.cloneNode()}),xe.textContent=It)),Fh(gt.afterSanitizeElements,xe,null),!1)},iI=function(xe,It,En){if(Vn&&(It==="id"||It==="name")&&(En in o||En in ot))return!1;if(!(fo&&!_n[It]&&Ri(oo,It))){if(!(Pn&&Ri(ko,It))){if(!so[It]||_n[It]){if(!(yR(xe)&&(Ge.tagNameCheck instanceof RegExp&&Ri(Ge.tagNameCheck,xe)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(xe))&&(Ge.attributeNameCheck instanceof RegExp&&Ri(Ge.attributeNameCheck,It)||Ge.attributeNameCheck instanceof Function&&Ge.attributeNameCheck(It))||It==="is"&&Ge.allowCustomizedBuiltInElements&&(Ge.tagNameCheck instanceof RegExp&&Ri(Ge.tagNameCheck,En)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(En))))return!1}else if(!lf[It]){if(!Ri(st,fS(En,cc,""))){if(!((It==="src"||It==="xlink:href"||It==="href")&&xe!=="script"&&cL(En,"data:")===0&&cm[xe])){if(!(Cd&&!Ri(Ds,fS(En,cc,"")))){if(En)return!1}}}}}}return!0},yR=function(xe){return xe!=="annotation-xml"&&ZM(xe,Tc)},uI=function(xe){Fh(gt.beforeSanitizeAttributes,xe,null);const{attributes:It}=xe;if(!It||bR(xe))return;const En={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:so,forceKeepAttr:void 0};let hr=It.length;for(;hr--;){const Xa=It[hr],{name:Ja,namespaceURI:Ii,value:uf}=Xa,vw=be(Ja);let Qa=Ja==="value"?uf:Mn(uf);const $j=Qa;if(En.attrName=vw,En.attrValue=Qa,En.keepAttr=!0,En.forceKeepAttr=void 0,Fh(gt.uponSanitizeAttribute,xe,En),Qa=En.attrValue,Gs&&(vw==="id"||vw==="name")&&(b2(Ja,xe),Qa=Ir+Qa),Xl&&Ri(/((--!?|])>)|<\/(style|title)/i,Qa)){b2(Ja,xe);continue}if(En.forceKeepAttr)continue;if(!En.keepAttr){b2(Ja,xe);continue}if(!mg&&Ri(/\/>/i,Qa)){b2(Ja,xe);continue}Ya&&eT([$t,kn,Dn],mI=>{Qa=fS(Qa,mI," ")});const dI=be(xe.nodeName);if(!iI(dI,vw,Qa)){b2(Ja,xe);continue}if(ve&&typeof z=="object"&&typeof z.getAttributeType=="function"&&!Ii)switch(z.getAttributeType(dI,vw)){case"TrustedHTML":{Qa=ve.createHTML(Qa);break}case"TrustedScriptURL":{Qa=ve.createScriptURL(Qa);break}}if(Qa!==$j)try{Ii?xe.setAttributeNS(Ii,Ja,Qa):xe.setAttribute(Ja,Qa),bR(xe)?am(xe):tT(n.removed)}catch{}}Fh(gt.afterSanitizeAttributes,xe,null)},Pj=function Fn(xe){let It=null;const En=bw(xe);for(Fh(gt.beforeSanitizeShadowDOM,xe,null);It=En.nextNode();)Fh(gt.uponSanitizeShadowNode,It,null),vR(It),uI(It),It.content instanceof u&&Fn(It.content);Fh(gt.afterSanitizeShadowDOM,xe,null)};return n.sanitize=function(Fn){let xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},It=null,En=null,hr=null,Xa=null;if(pw=!Fn,pw&&(Fn="<!-->"),typeof Fn!="string"&&!lI(Fn))if(typeof Fn.toString=="function"){if(Fn=Fn.toString(),typeof Fn!="string")throw xy("dirty is not a string, aborting")}else throw xy("toString is not a function");if(!n.isSupported)return Fn;if(ka||Gt(xe),n.removed=[],typeof Fn=="string"&&(Fr=!1),Fr){if(Fn.nodeName){const uf=be(Fn.nodeName);if(!Bt[uf]||Nt[uf])throw xy("root node is forbidden and cannot be sanitized in-place")}}else if(Fn instanceof b)It=aI("<!---->"),En=It.ownerDocument.importNode(Fn,!0),En.nodeType===pS.element&&En.nodeName==="BODY"||En.nodeName==="HTML"?It=En:It.appendChild(En);else{if(!Sd&&!Ya&&!yu&&Fn.indexOf("<")===-1)return ve&&Ht?ve.createHTML(Fn):Fn;if(It=aI(Fn),!It)return Sd?null:Ht?Ie:""}It&&Ml&&am(It.firstChild);const Ja=bw(Fr?Fn:It);for(;hr=Ja.nextNode();)vR(hr),uI(hr),hr.content instanceof u&&Pj(hr.content);if(Fr)return Fn;if(Sd){if(d1)for(Xa=Ae.call(It.ownerDocument);It.firstChild;)Xa.appendChild(It.firstChild);else Xa=It;return(so.shadowroot||so.shadowrootmode)&&(Xa=Le.call(r,Xa,!0)),Xa}let Ii=yu?It.outerHTML:It.innerHTML;return yu&&Bt["!doctype"]&&It.ownerDocument&&It.ownerDocument.doctype&&It.ownerDocument.doctype.name&&Ri(XM,It.ownerDocument.doctype.name)&&(Ii="<!DOCTYPE "+It.ownerDocument.doctype.name+`>
`+Ii),Ya&&eT([$t,kn,Dn],uf=>{Ii=fS(Ii,uf," ")}),ve&&Ht?ve.createHTML(Ii):Ii},n.setConfig=function(){let Fn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Gt(Fn),ka=!0},n.clearConfig=function(){Se=null,ka=!1},n.isValidAttribute=function(Fn,xe,It){Se||Gt({});const En=be(Fn),hr=be(xe);return iI(En,hr,It)},n.addHook=function(Fn,xe){typeof xe=="function"&&wy(gt[Fn],xe)},n.removeHook=function(Fn,xe){if(xe!==void 0){const It=V_(gt[Fn],xe);return It===-1?void 0:rL(gt[Fn],It,1)[0]}return tT(gt[Fn])},n.removeHooks=function(Fn){gt[Fn]=[]},n.removeAllHooks=function(){gt=QM()},n}var j_=bS();const eN=Xe.each,kG=Xe.trim,vS=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],bL={ftp:21,http:80,https:443,mailto:25},G_=["img","video"],vL=(e,n)=>De(e)?!e:De(n)?!Jt(G_,n):!0,yL=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},tN=(e,n,o)=>{const r=yL(n).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?vL(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Jd{static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),a=/data:([^;]+)/.exec(r[0]);return a&&(o=a[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const a=Vo.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!tN(r,a,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}constructor(n,o={}){this.path="",this.directory="",n=kG(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Jd(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&eN(vS,(b,y)=>{let E=f[y];E&&(E=E.replace(/\(mce_at\)/g,"@@")),a[b]=E}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Jd(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Jd(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?bL[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,a="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?a+="/"+y[u]:a+=y[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];eN(u,B=>{B&&b.push(B)});const y=[];for(let B=f.length-1;B>=0;B--)if(!(f[B].length===0||f[B]===".")){if(f[B]===".."){r++;continue}if(r>0){r--;continue}y.push(f[B])}const E=b.length-r;let R;return E<=0?R=$o(y).join("/"):R=b.slice(0,E).join("/")+"/"+$o(y).join("/"),R.indexOf("/")!==0&&(R="/"+R),a&&R.lastIndexOf("/")!==R.length-1&&(R+=a),R}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const tb=Xe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Th="data-mce-type";let yS=0;const CS=(e,n,o,r,a)=>{var u,f,b,y;const E=n.validate,R=o.getSpecialElements();e.nodeType===Cm&&!n.allow_conditional_comments&&/^\[if/i.test((u=e.nodeValue)!==null&&u!==void 0?u:"")&&(e.nodeValue=" "+e.nodeValue);const B=(f=a==null?void 0:a.tagName)!==null&&f!==void 0?f:e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){De(a)&&(a.allowedTags[B]=!0);return}if(e.nodeType!==wr||B==="body")return;const P=ne.fromDom(e),z=zl(P,Th),j=Cs(P,"data-mce-bogus");if(!z&&ae(j)){j==="all"?x(P):M(P);return}const Z=o.getElementRule(B);if(E&&!Z){Kt(R,B)?x(P):M(P);return}else De(a)&&(a.allowedTags[B]=!0);if(E&&Z&&!z){if(_e((b=Z.attributesForced)!==null&&b!==void 0?b:[],Y=>{dr(P,Y.name,Y.value==="{$uid}"?`mce_${yS++}`:Y.value)}),_e((y=Z.attributesDefault)!==null&&y!==void 0?y:[],Y=>{zl(P,Y.name)||dr(P,Y.name,Y.value==="{$uid}"?`mce_${yS++}`:Y.value)}),Z.attributesRequired&&!vo(Z.attributesRequired,Y=>zl(P,Y))){M(P);return}if(Z.removeEmptyAttrs&&Dg(P)){M(P);return}Z.outputName&&Z.outputName!==B&&Ye(P,Z.outputName)}},nb=(e,n,o,r,a)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=a;a.keepAttr=Yp(n,o,r,u,f,b),a.keepAttr?(a.allowedAttributes[f]=!0,wS(f,o)&&(a.attrValue=f),n.allow_svg_data_urls&&Ps(b,"data:image/svg+xml")&&(a.forceKeepAttr=!0)):SS(e,f)&&(a.forceKeepAttr=!0)},Yp=(e,n,o,r,a,u)=>o!=="html"&&!Bm(r)?!0:!(a in tb&&tN(e,u,r))&&(!e.validate||n.isValid(r,a)||Ps(a,"data-")||Ps(a,"aria-")),SS=(e,n)=>e.hasAttribute(Th)&&(n==="id"||n==="class"||n==="style"),wS=(e,n)=>e in n.getBoolAttrs(),nN=(e,n,o,r)=>{const{attributes:a}=e;for(let u=a.length-1;u>=0;u--){const f=a[u],b=f.name,y=f.value;!Yp(n,o,r,e.tagName.toLowerCase(),b,y)&&!SS(e,b)?e.removeAttribute(b):wS(b,o)&&e.setAttribute(b,b)}},q_=(e,n,o)=>{const r=j_();return r.addHook("uponSanitizeElement",(a,u)=>{CS(a,e,n,o.track(a),u)}),r.addHook("uponSanitizeAttribute",(a,u)=>{nb(a,e,n,o.current(),u)}),r},K_=(e,n)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[],SAFE_FOR_XML:!1}};return r.PARSER_MEDIA_TYPE=n,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},oN=e=>{const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};j_().sanitize(e,o)},sN=(e,n)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=j_(),a=n.allow_mathml_annotation_encodings,u=$n(a)&&a.length>0,f=y=>{const E=y.getAttribute("encoding");return u&&ae(E)&&Jt(a,E)},b=(y,E)=>u&&E==="semantics"?L.some(!0):E==="annotation"?L.some(ht(y)&&f(y)):$n(n.extended_mathml_elements)&&n.extended_mathml_elements.includes(E)?L.from(!0):L.none();r.addHook("uponSanitizeElement",(y,E)=>{var R;const B=(R=E.tagName)!==null&&R!==void 0?R:y.nodeName.toLowerCase();b(y,B).each(z=>{E.allowedTags[B]=z,!z&&n.sanitize&&ht(y)&&y.remove()})}),r.addHook("uponSanitizeAttribute",(y,E)=>{$n(n.extended_mathml_attributes)&&n.extended_mathml_attributes.includes(E.attrName)&&(E.forceKeepAttr=!0)}),r.sanitize(e,o)},Ey=e=>n=>{const o=kw(n);if(o==="svg")oN(n);else if(o==="math")sN(n,e);else throw new Error("Not a namespace element")},rN=(e,n)=>{const o=D2();if(e.sanitize){const r=q_(e,n,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,K_(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:Ey(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let y;for(;y=b.nextNode();){const E=o.track(y);CS(y,e,n,E),ht(y)&&nN(y,e,n,E)}o.reset()},sanitizeNamespaceElement:wt}},Y_=Xe.makeMap,X_=Xe.extend,xS=(e,n,o,r)=>{const a=e.name,u=a in o&&a!=="title"&&a!=="textarea"&&a!=="noscript",f=n.childNodes;for(let b=0,y=f.length;b<y;b++){const E=f[b],R=new _l(E.nodeName.toLowerCase(),E.nodeType);if(ht(E)){const B=E.attributes;for(let P=0,z=B.length;P<z;P++){const j=B[P];R.attr(j.name,j.value)}Bm(R.name)&&(r(E),R.value=E.innerHTML)}else je(E)?(R.value=E.data,u&&(R.raw=!0)):(Hd(E)||kR(E)||Ls(E))&&(R.value=E.data);Bm(R.name)||xS(R,E,o,r),e.append(R)}},cN=(e,n,o)=>{const r=[];for(let a=e,u=a;a;u=a,a=a.walk()){const f=a;_e(n,b=>b(f)),Rn(f.parent)&&f!==e?a=u:r.push(f)}for(let a=r.length-1;a>=0;a--){const u=r[a];_e(o,f=>f(u))}},aN=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=X_(Y_("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=tv(n),E=/[ \t\r\n]+/g,R=/^[ \t\r\n]+/,B=/[ \t\r\n]+$/,P=me=>{let ge=me.parent;for(;De(ge);){if(ge.name in f)return!0;ge=ge.parent}return!1},z=me=>{let ge=me;for(;De(ge);){if(ge.name in y)return vy(n,u,f,ge);ge=ge.parent}return!1},j=me=>me.name in b||Wg(n,me)||Bm(me.name)&&me.parent===e,Z=(me,ge)=>{const ve=ge?me.prev:me.next;return De(ve)||Rn(me.parent)?!1:j(me.parent)&&(me.parent!==e||r.isRootContent===!0)};return[me=>{var ge;if(me.type===3&&!P(me)){let ve=(ge=me.value)!==null&&ge!==void 0?ge:"";ve=ve.replace(E," "),(eF(me.prev,j)||Z(me,!0))&&(ve=ve.replace(R,"")),ve.length===0||ve===" "&&me.prev&&me.prev.type===Cm&&me.next&&me.next.type===Cm?me.remove():me.value=ve}},me=>{var ge;if(me.type===1){const ve=n.getElementRule(me.name);if(a&&ve){const Ie=vy(n,u,f,me);ve.paddInEmptyBlock&&Ie&&z(me)?wh(o,r,j,me):ve.removeEmpty&&Ie?j(me)?me.remove():me.unwrap():ve.paddEmpty&&(Ie||LE(me))&&wh(o,r,j,me)}}else if(me.type===3&&!P(me)){let ve=(ge=me.value)!==null&&ge!==void 0?ge:"";(me.next&&j(me.next)||Z(me,!1))&&(ve=ve.replace(B,"")),ve.length===0?me.remove():me.value=ve}}]},lN=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},ob=(e={},n=Xc())=>{const o=BM(),r=BM(),a={validate:!0,root_name:"body",sanitize:!0,...e},u=new DOMParser,f=rN(a,n),b=(ge,ve,Ie="html")=>{const Ze=Ie==="xhtml"?"application/xhtml+xml":"text/html",pt=Kt(n.getSpecialElements(),ve.toLowerCase()),Ae=pt?`<${ve}>${ge}</${ve}>`:ge,we=()=>Ie==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${Ae}</body></html>`:/^[\s]*<head/i.test(ge)||/^[\s]*<html/i.test(ge)||/^[\s]*<!DOCTYPE/i.test(ge)?`<html>${Ae}</html>`:`<body>${Ae}</body>`,Le=u.parseFromString(we(),Ze).body;return f.sanitizeHtmlElement(Le,Ze),pt?Le.firstChild:Le},y=o.addFilter,E=o.getFilters,R=o.removeFilter,B=r.addFilter,P=r.getFilters,z=r.removeFilter,j=(ge,ve)=>{f_(n,ge)&&ve.push(ge)},Z=(ge,ve)=>{const Ie=ae(ve.attr(Th)),Ze=ve.type===1&&!Kt(ge,ve.name)&&!Wg(n,ve)&&!Bm(ve.name);return ve.type===3||Ze&&!Ie},Y=(ge,ve)=>{const Ie=X_(Y_("script,style,head,html,body,title,meta,param"),n.getBlockElements()),Ze=/^[ \t\r\n]+/,pt=/[ \t\r\n]+$/;let Ae=ge.firstChild,we=null;const Le=gt=>{var $t,kn;gt&&(Ae=gt.firstChild,Ae&&Ae.type===3&&(Ae.value=($t=Ae.value)===null||$t===void 0?void 0:$t.replace(Ze,"")),Ae=gt.lastChild,Ae&&Ae.type===3&&(Ae.value=(kn=Ae.value)===null||kn===void 0?void 0:kn.replace(pt,"")))};if(n.isValidChild(ge.name,ve.toLowerCase())){for(;Ae;){const gt=Ae.next;Z(Ie,Ae)?(we||(we=new _l(ve,1),we.attr(a.forced_root_block_attrs),ge.insert(we,Ae)),we.append(Ae)):(Le(we),we=null),Ae=gt}Le(we)}},me={schema:n,addAttributeFilter:B,getAttributeFilters:P,removeAttributeFilter:z,addNodeFilter:y,getNodeFilters:E,removeNodeFilter:R,parse:(ge,ve={})=>{var Ie;const Ze=a.validate,pt=(Ie=ve.context)!==null&&Ie!==void 0?Ie:a.root_name,Ae=b(ge,pt,ve.format);Yu(n,Ae);const we=new _l(pt,11);xS(we,Ae,n.getSpecialElements(),f.sanitizeNamespaceElement),Ae.innerHTML="";const[Le,gt]=aN(we,n,a,ve),$t=[],kn=Ze?Ds=>j(Ds,$t):wt,Dn={nodes:{},attributes:{}},oo=Ds=>Y5(E(),P(),Ds,Dn);if(cN(we,[Le,oo],[gt,kn]),$t.reverse(),Ze&&$t.length>0)if(ve.context){const{pass:Ds,fail:cc}=gs($t,Tc=>Tc.parent===we);m_(cc,n,we,oo),ve.invalid=Ds.length>0}else m_($t,n,we,oo);const ko=lN(a,ve);return ko&&(we.name==="body"||ve.isRootContent)&&Y(we,ko),ve.invalid||by(Dn,ve),we}};return oL(me,a),YF(me,a,n),me},kh=e=>VE(e)?Sh({validate:!1}).serialize(e):e,_h=(e,n,o)=>{const r=kh(e),a=n(r);if(a.isDefaultPrevented())return a;if(VE(e))if(a.content!==r){const u=ob({validate:!1,forced_root_block:!1,...o}).parse(a.content,{context:e.name});return{...a,content:u}}else return{...a,content:e};else return a},ld=e=>({sanitize:Yf(e),sandbox_iframes:Op(e),sandbox_iframes_exclusions:Dp(e)}),iN=(e,n)=>{if(n.no_events)return Fo.value(n);{const o=td(e,n);return o.isDefaultPrevented()?Fo.error(uC(e,{content:"",...o}).content):Fo.value(o)}},uN=(e,n,o)=>o.no_events?n:_h(n,a=>uC(e,{...o,content:a}),ld(e)).content,J_=(e,n)=>{if(n.no_events)return Fo.value(n);{const o=_h(n.content,r=>wp(e,{...n,content:r}),ld(e));return o.isDefaultPrevented()?(Wo(e,o),Fo.error(void 0)):Fo.value(o)}},Q_=(e,n,o)=>{o.no_events||Wo(e,{...o,content:n})},eA=(e,n,o)=>({element:e,width:n,rows:o}),dN=(e,n)=>({element:e,cells:n}),CL=(e,n)=>({x:e,y:n}),mN=(e,n)=>gc(e,n).bind(os).getOr(1),SL=(e,n,o,r,a)=>{const u=mN(a,"rowspan"),f=mN(a,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=dN(re(r),[]));for(let E=n;E<n+f;E++){const R=b[y].cells;R[E]=y===o&&E===n?a:X(a)}}},wL=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},xL=(e,n,o)=>{for(;wL(e,n,o);)n++;return n},fN=e=>Ro(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),sT=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const a=o[r].cells;for(let u=0;u<a.length;u++)if(On(a[u],n))return L.some(CL(u,r))}return L.none()},rT=(e,n,o,r,a)=>{const u=[],f=e.rows;for(let b=o;b<=a;b++){const y=f[b].cells,E=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(dN(f[b].element,E))}return u},gN=(e,n,o)=>{const r=n.x,a=n.y,u=o.x,f=o.y,b=a<f?rT(e,r,a,u,f):rT(e,r,f,u,a);return eA(e.element,fN(b),b)},EL=(e,n)=>{const o=X(e.element),r=ne.fromTag("tbody");return ui(r,n),Ts(o,r),o},TL=e=>qt(e.rows,n=>{const o=qt(n.cells,a=>{const u=re(a);return Zs(u,"colspan"),Zs(u,"rowspan"),u}),r=X(n.element);return ui(r,o),r}),hN=e=>{const n=eA(X(e),0,[]);return _e(zo(e,"tr"),(o,r)=>{_e(zo(o,"td,th"),(a,u)=>{SL(n,xL(n,u,r),r,o,a)})}),eA(n.element,fN(n.rows),n.rows)},pN=e=>EL(e,TL(e)),tA=(e,n,o)=>sT(e,n).bind(r=>sT(e,o).map(a=>gN(e,r,a))),bN=e=>ts(e,n=>Un(n)==="ul"||Un(n)==="ol"),vN=(e,n)=>ts(e,o=>Un(o)==="li"&&Up(o,n)).fold(lt([]),o=>bN(e).map(r=>{const a=ne.fromTag(Un(r)),u=nl(Mg(r),(f,b)=>Ps(b,"list-style"));return Rg(a,u),[ne.fromTag("li"),a]}).getOr([])),nA=(e,n)=>{const o=Ro(n,(r,a)=>(Ts(a,r),a),e);return n.length>0?km([o]):o},kL=e=>vi(e)?To(e).filter(gp).fold(lt([]),n=>[e,n]):gp(e)?[e]:[],_L=(e,n,o)=>{const r=ne.fromDom(n.commonAncestorContainer),a=tg(r,e),u=Rt(a,y=>o.isWrapper(Un(y))),f=vN(a,n),b=u.concat(f.length?f:kL(r));return qt(b,X)},tf=()=>km([]),Qd=(e,n,o)=>nA(ne.fromDom(n.cloneContents()),_L(e,n,o)),cT=(e,n)=>Bg(n,"table",ze(On,e)),yN=(e,n)=>cT(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=hN(o);return tA(u,r,a).map(f=>km([pN(f)]))}).getOrThunk(tf),aT=(e,n,o)=>n.length>0&&n[0].collapsed?tf():Qd(e,n[0],o),CN=(e,n,o)=>{const r=FC(n,e);return r.length>0?yN(e,r):aT(e,n,o)},ES=(e,n)=>n>=0&&n<e.length&&Km(e.charAt(n)),oA=e=>Wa(e.innerText),SN=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),wN=e=>L.from(e.selection.getRng()).map(n=>{var o;const r=L.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),u=SN(r),f=ne.fromDom(n.cloneContents());e5(f),z3(f);const b=e.dom.add(a,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=oA(b),E=Wa((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),ES(E,0)||ES(E,E.length-1)){const R=r.getOr(a),B=oA(R),P=B.indexOf(y);if(P===-1)return y;{const z=ES(B,P-1),j=ES(B,P+y.length);return(z?" ":"")+y+(j?" ":"")}}else return y}).getOr(""),xN=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=cd(e,ry(a)),f=n.contextual?CN(ne.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},lT=(e,n)=>{if(n.format==="text")return wN(e);{const o=xN(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},sA=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),AL=(e,n,o={})=>{const r=sA(o,n);return iN(e,r).fold(Jo,a=>{const u=lT(e,a);return uN(e,u,a)})},rA=0,EN=1,TN=2,kN=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(R,B,P)=>({start:R,end:B,diag:P}),f=(R,B,P,z,j)=>{const Z=y(R,B,P,z);if(Z===null||Z.start===B&&Z.diag===B-z||Z.end===R&&Z.diag===R-P){let Y=R,oe=P;for(;Y<B||oe<z;)Y<B&&oe<z&&e[Y]===n[oe]?(j.push([rA,e[Y]]),++Y,++oe):B-R>z-P?(j.push([TN,e[Y]]),++Y):(j.push([EN,n[oe]]),++oe)}else{f(R,Z.start,P,Z.start-Z.diag,j);for(let Y=Z.start;Y<Z.end;++Y)j.push([rA,e[Y]]);f(Z.end,B,Z.end-Z.diag,z,j)}},b=(R,B,P,z)=>{let j=R;for(;j-B<z&&j<P&&e[j]===n[j-B];)++j;return u(R,j,B)},y=(R,B,P,z)=>{const j=B-R,Z=z-P;if(j===0||Z===0)return null;const Y=j-Z,oe=Z+j,me=(oe%2===0?oe:oe+1)/2;r[1+me]=R,a[1+me]=B+1;let ge,ve,Ie,Ze,pt;for(ge=0;ge<=me;++ge){for(ve=-ge;ve<=ge;ve+=2){for(Ie=ve+me,ve===-ge||ve!==ge&&r[Ie-1]<r[Ie+1]?r[Ie]=r[Ie+1]:r[Ie]=r[Ie-1]+1,Ze=r[Ie],pt=Ze-R+P-ve;Ze<B&&pt<z&&e[Ze]===n[pt];)r[Ie]=++Ze,++pt;if(Y%2!==0&&Y-ge<=ve&&ve<=Y+ge&&a[Ie-Y]<=r[Ie])return b(a[Ie-Y],ve+R-P,B,z)}for(ve=Y-ge;ve<=Y+ge;ve+=2){for(Ie=ve+me-Y,ve===Y-ge||ve!==Y+ge&&a[Ie+1]<=a[Ie-1]?a[Ie]=a[Ie+1]-1:a[Ie]=a[Ie-1],Ze=a[Ie]-1,pt=Ze-R+P-ve;Ze>=R&&pt>=P&&e[Ze]===n[pt];)a[Ie]=Ze--,pt--;if(Y%2===0&&-ge<=ve&&ve<=ge&&a[Ie]<=r[Ie+Y])return b(a[Ie],ve+R-P,B,z)}}return null},E=[];return f(0,e.length,0,n.length,E),E},_N=e=>ht(e)?e.outerHTML:je(e)?Vo.encodeRaw(e.data,!1):Hd(e)?"<!--"+e.data+"-->":"",OL=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},cA=(e,n,o)=>{const r=OL(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},DL=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},RL=(e,n)=>{let o=0;_e(e,r=>{r[0]===rA?o++:r[0]===EN?(cA(n,r[1],o),o++):r[0]===TN&&DL(n,o)})},ML=(e,n)=>Rt(qt(lr(e.childNodes),A(Wa,_N)),o=>o.length>0),NL=(e,n)=>{const o=qt(lr(n.childNodes),_N);return RL(kN(o,e),n),n},BL=No(()=>document.implementation.createHTMLDocument("undo")),PL=e=>e.querySelector("iframe")!==null,$L=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),iT=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Ty=e=>{const n=e.serializer.getTempAttrs(),o=YI(e.getBody(),n);return PL(o)?$L(ML(o)):iT(Wa(o.innerHTML))},aA=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?NL(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:De(r)&&Jx(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},lA=e=>e.type==="fragmented"?e.fragments.join(""):e.content,AN=e=>{const n=ne.fromTag("body",BL());return wn(n,lA(e)),_e(zo(n,"*[data-mce-bogus]"),M),Lt(n)},IL=(e,n)=>lA(e)===lA(n),ON=(e,n)=>AN(e)===AN(n),iA=(e,n)=>!e||!n?!1:IL(e,n)?!0:ON(e,n),uA=e=>e.get()===0,ky=(e,n,o)=>{uA(o)&&(e.typing=n)},DN=(e,n)=>{e.typing&&(ky(e,!1,n),e.add())},FL=e=>{e.typing&&(e.typing=!1,e.add())},LL=(e,n,o)=>{uA(n)&&o.set(Wf(e.selection))},HL=(e,n,o,r,a,u,f)=>{const b=Ty(e),y=Xe.extend(u||{},b);if(!uA(r)||e.removed)return null;const E=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:E,originalEvent:f}).isDefaultPrevented()||E&&iA(E,y))return null;n.data[o.get()]&&a.get().each(P=>{n.data[o.get()].beforeBookmark=P});const R=Ex(e);if(R&&n.data.length>R){for(let P=0;P<n.data.length-1;P++)n.data[P]=n.data[P+1];n.data.length--,o.set(n.data.length)}y.bookmark=Wf(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const B={level:y,lastLevel:E,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",B),e.dispatch("change",B)):e.dispatch("AddUndo",B),y},zL=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},VL=(e,n,o,r,a)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];aA(e,f,!0),n.transact(a)&&(n.data[o.get()-1].beforeBookmark=u)}},UL=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],aA(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},uT=(e,n,o,r)=>{let a;return n.typing&&(n.add(),n.typing=!1,ky(n,!1,o)),r.get()>0&&(r.set(r.get()-1),a=n.data[r.get()],aA(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},dT=e=>{e.clear(),e.add()},WL=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!iA(Ty(e),n.data[0]),ZL=(e,n)=>n.get()<e.data.length-1&&!e.typing,mT=(e,n,o)=>(DN(e,n),e.beforeChange(),e.ignore(o),e.add()),jL=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},GL=(e,n)=>{const o=e.dom,r=De(n)?n:e.getBody();_e(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=Kk(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const b=o.getAttrib(a,"name")||a.id,y=Yk(e);b&&e.hasVisual?o.addClass(a,y):o.removeClass(a,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},RN=e=>({init:{bindEvents:wt},undoManager:{beforeChange:(n,o)=>LL(e,n,o),add:(n,o,r,a,u,f)=>HL(e,n,o,r,a,u,f),undo:(n,o,r)=>uT(e,n,o,r),redo:(n,o)=>UL(e,n,o),clear:(n,o)=>zL(e,n,o),reset:n=>dT(n),hasUndo:(n,o)=>WL(e,n,o),hasRedo:(n,o)=>ZL(n,o),transact:(n,o,r)=>mT(n,o,r),ignore:(n,o)=>jL(n,o),extra:(n,o,r,a)=>VL(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>y_(e,n,o,r,a),matchAll:(n,o)=>SG(e,n,o),matchNode:(n,o,r,a)=>xh(e,n,o,r,a),canApply:n=>TF(e,n),closest:n=>EF(e,n),apply:(n,o,r)=>rg(e,n,o,r),remove:(n,o,r,a)=>xM(e,n,o,r,a),toggle:(n,o,r)=>qF(e,n,o,r),formatChanged:(n,o,r,a,u)=>GF(e,n,o,r,a,u)},editor:{getContent:n=>eG(e,n),setContent:(n,o)=>lS(e,n,o),insertContent:(n,o)=>sM(e,n,o),addVisual:n=>GL(e,n)},selection:{getContent:(n,o)=>AL(e,n,o)},autocompleter:{addDecoration:wt,removeDecoration:wt},raw:{getModel:()=>L.none()}}),qL=e=>{const n=E=>Ot(E)?E:{},{init:o,undoManager:r,formatter:a,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(E,R,B)=>r.transact(B),ignore:(E,R)=>r.ignore(R),extra:(E,R,B,P)=>r.extra(B,P)},formatter:{match:(E,R,B,P)=>a.match(E,n(R),P),matchAll:a.matchAll,matchNode:a.matchNode,canApply:E=>a.canApply(E),closest:E=>a.closest(E),apply:(E,R,B)=>a.apply(E,n(R)),remove:(E,R,B,P)=>a.remove(E,n(R)),toggle:(E,R,B)=>a.toggle(E,n(R)),formatChanged:(E,R,B,P,z)=>a.formatChanged(R,B,P,z)},editor:{getContent:E=>u.getContent(E),setContent:(E,R)=>({content:u.setContent(E,R),html:""}),insertContent:(E,R)=>(u.insertContent(E),""),addVisual:u.addVisual},selection:{getContent:(E,R)=>f.getContent(R)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>L.some(y.getRawModel())}}},KL=()=>{const e=lt(null),n=lt("");return{init:{bindEvents:wt},undoManager:{beforeChange:wt,add:e,undo:e,redo:e,clear:wt,reset:wt,hasUndo:Pe,hasRedo:Pe,transact:e,ignore:wt,extra:wt},formatter:{match:Pe,matchAll:lt([]),matchNode:lt(void 0),canApply:Pe,closest:n,apply:wt,remove:wt,toggle:wt,formatChanged:lt({unbind:wt})},editor:{getContent:n,setContent:lt({content:"",html:""}),insertContent:lt(""),addVisual:wt},selection:{getContent:n},autocompleter:{addDecoration:wt,removeDecoration:wt},raw:{getModel:lt(L.none())}}},lg=e=>Kt(e.plugins,"rtc"),YL=e=>yo(e.plugins,"rtc").bind(n=>L.from(n.setup)),XL=e=>{const n=e;return YL(e).fold(()=>(n.rtcInstance=RN(e),L.none()),o=>(n.rtcInstance=KL(),L.some(()=>o().then(r=>(n.rtcInstance=qL(r),r.rtc.isRemote)))))},dA=e=>e.rtcInstance?e.rtcInstance:RN(e),Ec=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},JL=(e,n,o)=>{Ec(e).undoManager.beforeChange(n,o)},_G=(e,n,o,r,a,u,f)=>Ec(e).undoManager.add(n,o,r,a,u,f),em=(e,n,o,r)=>Ec(e).undoManager.undo(n,o,r),MN=(e,n,o)=>Ec(e).undoManager.redo(n,o),QL=(e,n,o)=>{Ec(e).undoManager.clear(n,o)},NN=(e,n)=>{Ec(e).undoManager.reset(n)},eH=(e,n,o)=>Ec(e).undoManager.hasUndo(n,o),tH=(e,n,o)=>Ec(e).undoManager.hasRedo(n,o),AG=(e,n,o,r)=>Ec(e).undoManager.transact(n,o,r),Ta=(e,n,o)=>{Ec(e).undoManager.ignore(n,o)},nH=(e,n,o,r,a)=>{Ec(e).undoManager.extra(n,o,r,a)},oH=(e,n,o,r,a)=>Ec(e).formatter.match(n,o,r,a),sH=(e,n,o)=>Ec(e).formatter.matchAll(n,o),rH=(e,n,o,r,a)=>Ec(e).formatter.matchNode(n,o,r,a),cH=(e,n)=>Ec(e).formatter.canApply(n),fT=(e,n)=>Ec(e).formatter.closest(n),aH=(e,n,o,r)=>{Ec(e).formatter.apply(n,o,r)},mA=(e,n,o,r,a)=>{Ec(e).formatter.remove(n,o,r,a)},BN=(e,n,o,r)=>{Ec(e).formatter.toggle(n,o,r)},gT=(e,n,o,r,a,u)=>Ec(e).formatter.formatChanged(n,o,r,a,u),lH=(e,n)=>dA(e).editor.getContent(n),iH=(e,n,o)=>dA(e).editor.setContent(n,o),uH=(e,n,o)=>dA(e).editor.insertContent(n,o),dH=(e,n,o)=>Ec(e).selection.getContent(n,o),mH=(e,n)=>Ec(e).editor.addVisual(n),fA=e=>Ec(e).init.bindEvents(),fH=(e,n={})=>{const o=n.format?n.format:"html";return dH(e,o,n)},gA=e=>e.dom.length===0?(x(e),L.none()):L.some(e),PN=(e,n)=>e.filter(o=>to.isBookmarkNode(o.dom)).bind(n?hl:fc),gH=(e,n,o,r,a)=>{const u=e.dom,f=n.dom,b=r?u.length:f.length;r?(t_(u,f,a,!1,!r),o.setStart(f,b)):(t_(f,u,a,!1,!r),o.setEnd(f,b))},hH=(e,n,o)=>{To(e).each(r=>{const a=e.dom;n&&JC(r,Oe(a,0),o)?OE(a,0,o):!n&&QC(r,Oe(a,a.length),o)&&e_(a,a.length,o)})},$N=(e,n,o,r,a)=>{e.bind(u=>((r?e_:OE)(u.dom,r?u.dom.length:0,a),n.filter(qr).map(b=>gH(u,b,o,r,a)))).orThunk(()=>PN(n,r).or(n).filter(qr).map(f=>hH(f,r,a)))},pH=(e,n,o)=>{const r=L.from(n.firstChild).map(ne.fromDom),a=L.from(n.lastChild).map(ne.fromDom);e.deleteContents(),e.insertNode(n);const u=r.bind(fc).filter(qr).bind(gA),f=a.bind(hl).filter(qr).bind(gA);$N(u,r,e,!0,o),$N(f,a,e,!1,o),e.collapse(!1)},bH=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),hT=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return Sh({validate:!1},e.schema).serialize(u)}else return n.content},IN=(e,n,o={})=>{const r=bH(o,n);J_(e,r).each(a=>{const u=hT(e,a),f=e.selection.getRng();pH(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),H0(e,f),Q_(e,u,a)})},hA=(e,n,o)=>{if(Kt(e,n)){const r=Rt(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var vH=(e,n)=>{let o,r;const a=(b,y)=>ts(y,E=>e.is(E,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,E=u(y),R={};at(o,(B,P)=>{a(P,E).each(z=>{r[P]||(_e(B,j=>{j(!0,{node:z,selector:P,parents:E})}),r[P]=B),R[P]=B})}),at(r,(B,P)=>{R[P]||(delete r[P],_e(B,z=>{z(!1,{node:y,selector:P,parents:E})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),a(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{hA(o,b,y),hA(r,b,y)}})}};const pA=e=>!!(e&&e.ownerDocument)&&dl(ne.fromDom(e.ownerDocument),ne.fromDom(e)),yH=e=>e?pA(e.startContainer)&&pA(e.endContainer):!1,FN=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=vH(e,r),b=(st,Bt)=>{const Xn=e.createRng();De(st)&&De(Bt)?(Xn.setStart(st,Bt),Xn.setEnd(st,Bt),ve(Xn),oe(!1)):($r(e,Xn,r.getBody(),!0),ve(Xn))},y=st=>fH(r,st),E=(st,Bt)=>IN(r,st,Bt),R=st=>ZR(r.getBody(),ge(),st),B=st=>jR(r.getBody(),ge(),st),P=(st,Bt)=>cc.getBookmark(st,Bt),z=st=>cc.moveToBookmark(st),j=(st,Bt)=>(Jj(e,st,Bt).each(ve),st),Z=()=>{const st=ge(),Bt=me();return!st||st.item?!1:st.compareEndPoints?st.compareEndPoints("StartToEnd",st)===0:!Bt||st.collapsed},Y=()=>{if(r.mode.isReadOnly())return!1;const st=ge(),Bt=r.getBody().querySelectorAll('[data-mce-selected="1"]');return Bt.length>0?An(Bt,Xn=>e.isEditable(Xn.parentElement)):WR(e,st)},oe=st=>{const Bt=ge();Bt.collapse(!!st),ve(Bt)},me=()=>n.getSelection?n.getSelection():n.document.selection,ge=()=>{let st;const Bt=(so,Be,Ge)=>{try{return Be.compareBoundaryPoints(so,Ge)}catch{return-1}},Xn=n.document;if(De(r.bookmark)&&!I0(r)){const so=P0(r);if(so.isSome())return so.map(Be=>cd(r,[Be])[0]).getOr(Xn.createRange())}try{const so=me();so&&!Af(so.anchorNode)&&(so.rangeCount>0?st=so.getRangeAt(0):st=Xn.createRange(),st=cd(r,[st])[0])}catch{}if(st||(st=Xn.createRange()),Gu(st.startContainer)&&st.collapsed){const so=e.getRoot();st.setStart(so,0),st.setEnd(so,0)}return a&&u&&(Bt(st.START_TO_START,st,a)===0&&Bt(st.END_TO_END,st,a)===0?st=u:(a=null,u=null)),st},ve=(st,Bt)=>{if(!yH(st))return;const Xn=me();if(st=r.dispatch("SetSelectionRange",{range:st,forward:Bt}).range,Xn){u=st;try{Xn.removeAllRanges(),Xn.addRange(st)}catch{}Bt===!1&&Xn.extend&&(Xn.collapse(st.endContainer,st.endOffset),Xn.extend(st.startContainer,st.startOffset)),a=Xn.rangeCount>0?Xn.getRangeAt(0):null}if(!st.collapsed&&st.startContainer===st.endContainer&&(Xn!=null&&Xn.setBaseAndExtent)&&st.endOffset-st.startOffset<2&&st.startContainer.hasChildNodes()){const Be=st.startContainer.childNodes[st.startOffset];Be&&Be.nodeName==="IMG"&&(Xn.setBaseAndExtent(st.startContainer,st.startOffset,st.endContainer,st.endOffset),(Xn.anchorNode!==st.startContainer||Xn.focusNode!==st.endContainer)&&Xn.setBaseAndExtent(Be,0,Be,1))}r.dispatch("AfterSetSelectionRange",{range:st,forward:Bt})},Ie=st=>(E(e.getOuterHTML(st)),st),Ze=()=>gu(r.getBody(),ge()),pt=(st,Bt)=>ja(e,ge(),st,Bt),Ae=()=>{const st=me(),Bt=st==null?void 0:st.anchorNode,Xn=st==null?void 0:st.focusNode;if(!st||!Bt||!Xn||Af(Bt)||Af(Xn))return!0;const so=e.createRng(),Be=e.createRng();try{so.setStart(Bt,st.anchorOffset),so.collapse(!0),Be.setStart(Xn,st.focusOffset),Be.collapse(!0)}catch{return!0}return so.compareBoundaryPoints(so.START_TO_START,Be)<=0},Ds={dom:e,win:n,serializer:o,editor:r,expand:(st={type:"word"})=>ve(fu(e).expand(ge(),st)),collapse:oe,setCursorLocation:b,getContent:y,setContent:E,getBookmark:P,moveToBookmark:z,select:j,isCollapsed:Z,isEditable:Y,isForward:Ae,setNode:Ie,getNode:Ze,getSel:me,setRng:ve,getRng:ge,getStart:R,getEnd:B,getSelectedBlocks:pt,normalize:()=>{const st=ge(),Bt=me();if(!IC(Bt)&&ay(r)){const Xn=CE(e,st);return Xn.each(so=>{ve(so,Ae())}),Xn.getOr(st)}return st},selectorChanged:(st,Bt)=>(f(st,Bt),Ds),selectorChangedWithUnbind:f,getScrollContainer:()=>{let st,Bt=e.getRoot();for(;Bt&&Bt.nodeName!=="BODY";){if(Bt.scrollHeight>Bt.clientHeight){st=Bt;break}Bt=Bt.parentNode}return st},scrollIntoView:(st,Bt)=>{De(st)?ZI(r,st,Bt):H0(r,ge(),Bt)},placeCaretAt:(st,Bt)=>ve(ds(st,Bt,r.getDoc())),getBoundingClientRect:()=>{const st=ge();return st.collapsed?Oe.fromRangeStart(st).getClientRects()[0]:st.getBoundingClientRect()},destroy:()=>{n=a=u=null,Tc.destroy()}},cc=to(Ds),Tc=PR(Ds,r);return Ds.bookmarkManager=cc,Ds.controlSelection=Tc,Ds},CH=(e,n,o)=>{n.addNodeFilter("br",(r,a,u)=>{const f=Xe.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),y=o.getWhitespaceElements();f.body=1;const E=R=>R.name in f||Wg(o,R);for(let R=0,B=r.length;R<B;R++){let P=r[R],z=P.parent;if(z&&E(z)&&P===z.lastChild){let j=P.prev;for(;j;){const Z=j.name;if(Z!=="span"||j.attr("data-mce-type")!=="bookmark"){Z==="br"&&(P=null);break}j=j.prev}if(P&&(P.remove(),vy(o,b,y,z))){const Z=o.getElementRule(z.name);Z&&(Z.removeEmpty?z.remove():Z.paddEmpty&&wh(e,u,E,z))}}else{let j=P;for(;z&&z.firstChild===j&&z.lastChild===j&&(j=z,!f[z.name]);)z=z.parent;if(j===z){const Z=new _l("#text",3);Z.value=Eo,P.replace(Z)}}}})},bA=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(a,null)}}),e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const E=r[y];let R=E.attr(u);R!==void 0?(E.attr(a,R.length>0?R:null),E.attr(u,null)):(R=E.attr(a),a==="style"?R=o.serializeStyle(o.parseStyle(R),E.name):f&&(R=f.call(b,R,a,E.name)),E.attr(a,R.length>0?R:null))}}),e.addAttributeFilter("class",r=>{let a=r.length;for(;a--;){const u=r[a];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(L.from(b.firstChild).exists(E=>{var R;return!q1((R=E.value)!==null&&R!==void 0?R:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,a)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],E=y.firstChild,R=(u=E==null?void 0:E.value)!==null&&u!==void 0?u:"";if(a==="script"){const B=y.attr("type");B&&y.attr("type",B==="mce-no/type"?null:B.replace(/^mce\-/,"")),n.element_format==="xhtml"&&E&&R.length>0&&(E.value=`// <![CDATA[
`+f(R)+`
// ]]>`)}else n.element_format==="xhtml"&&E&&R.length>0&&(E.value=`<!--
`+f(R)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{_e(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.remove_trailing_brs&&CH(n,e,e.schema)},vA=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},SH=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Xe.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=a.doc,a.doc=b}return lx(e,{...o,node:u}),r&&(a.doc=r),u},yA=(e,n)=>De(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,wH=(e,n,o)=>yA(e,o)?SH(e,n,o):n,xH=(e,n,o)=>{Xe.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.push(o))},EH=(e,n,o)=>!n.no_events&&e?es(e,{...n,content:o}).content:o,TH=(e,n,o)=>{const r=Wa(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||eh(ne.fromDom(n))?r:Xe.trim(r)},kH=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return vA(a),a},_H=(e,n,o)=>Sh(e,n).serialize(o),LN=(e,n,o,r,a)=>{const u=_H(n,o,r);return EH(e,a,u)},AH=(e,n)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},a=n&&n.dom?n.dom:mo.DOM,u=n&&n.schema?n.schema:Xc(r),f=ob(r,u);bA(f,r,a);const b=(y,E={})=>{const R={format:"html",...E},B=wH(n,y,R),P=TH(a,B,R),z=kH(f,P,R);return R.format==="tree"?z:LN(n,r,u,z,R)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:ze(xH,f,o),getTempAttrs:lt(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},HN=(e,n)=>{const o=AH(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},OH="html",DH=(e,n)=>({...e,format:n,get:!0,getInner:!0}),RH=(e,n={})=>{const o=n.format?n.format:OH,r=DH(n,o);return iN(e,r).fold(Jo,a=>{const u=lH(e,a);return uN(e,u,a)})},MH="html",NH=(e,n)=>({format:MH,...e,set:!0,content:n}),Xp=(e,n,o={})=>{const r=NH(o,n);return J_(e,r).map(a=>{const u=iH(e,a.content,a);return Q_(e,u.html,a),u.content}).getOr(n)},pT="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),zN=[],VN="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),UN=[{name:"export",replacedWith:"Export to PDF"}],WN=(e,n)=>{const o=Rt(n,r=>Kt(e,r));return Io(o)},CA=e=>{const n=WN(e,pT),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Io(n)},BH=e=>WN(e,zN),ZN=(e,n)=>{const o=Xe.makeMap(e.plugins," "),a=Rt(n,u=>Kt(o,u));return Io(a)},PH=e=>ZN(e,VN),$H=e=>ZN(e,UN.map(n=>n.name)),IH=(e,n)=>{const o=CA(e),r=PH(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",E=a?`

Plugins:${b}${r.join(b)}`:"",R=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+y+E+R)}},bT=e=>ts(UN,n=>n.name===e).fold(()=>e,n=>n.replacedWith?`${e}, replaced by ${n.replacedWith}`:e),TS=(e,n)=>{const o=BH(e),r=$H(n),a=r.length>0,u=o.length>0;if(a||u){const f=`
- `,b=a?`

Plugins:${f}${r.map(bT).join(f)}`:"",y=u?`

Options:${f}${o.join(f)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+y)}},FH=(e,n)=>{IH(e,n),TS(e,n)},Ah=mo.DOM,id=e=>{Ah.setStyle(e.id,"display",e.orgDisplay)},Jp=e=>L.from(e).each(n=>n.destroy()),Oo=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},kS=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),Ah.unbind(n,"submit reset",e.formEventDelegate))},jN=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&De(a==null?void 0:a.nextSibling)&&Ah.remove(a.nextSibling),kv(e),e.editorManager.remove(e),!e.inline&&r&&id(e),iC(e),Ah.remove(e.getContainer()),Jp(n),Jp(o),e.destroy()}},GN=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Jp(o),Jp(r)),kS(e),Oo(e),e.destroyed=!0}},_y=(()=>{const e={};return{add:(a,u)=>{e[a]=u},get:a=>e[a]?e[a]:{icons:{}},has:a=>Kt(e,a)}})(),Qp=Br.ModelManager,vT=(e,n)=>n.dom[e],yT=(e,n)=>parseInt(_s(n,e),10),CT=ze(vT,"clientWidth"),wA=ze(vT,"clientHeight"),qN=ze(yT,"margin-top"),KN=ze(yT,"margin-left"),YN=e=>e.dom.getBoundingClientRect(),XN=(e,n,o)=>{const r=CT(e),a=wA(e);return n>=0&&o>=0&&n<=r&&o<=a},JN=(e,n,o,r)=>{const a=YN(n),u=e?a.left+n.dom.clientLeft+KN(n):0,f=e?a.top+n.dom.clientTop+qN(n):0,b=o-u,y=r-f;return{x:b,y}},Ay=(e,n,o)=>{const r=ne.fromDom(e.getBody()),a=e.inline?r:Gi(r),u=JN(e.inline,a,n,o);return XN(a,u.x,u.y)},QN=e=>L.from(e).map(ne.fromDom),xA=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return QN(n).map(ks).getOr(!1)};var LH=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const eB=e=>{const n=[],o=()=>{const P=e.theme;return P&&P.getNotificationManagerImpl?P.getNotificationManagerImpl():LH()},r=()=>L.from(n[0]),a=(P,z)=>P.type===z.type&&P.text===z.text&&!P.progressBar&&!P.timeout&&!z.progressBar&&!z.timeout,u=()=>{r().each(P=>{P.reposition()})},f=P=>{n.push(P)},b=P=>{Hr(n,z=>z===P).each(z=>{n.splice(z,1)})},y=(P,z=!0)=>e.removed||!xA(e)?{}:(z&&e.dispatch("BeforeOpenNotification",{notification:P}),ts(n,j=>a(o().getArgs(j),P)).getOrThunk(()=>{e.editorManager.setActive(e);const j=o().open(P,()=>{b(j)},()=>pE(e));return f(j),u(),e.dispatch("OpenNotification",{notification:{...j}}),j})),E=()=>{r().each(P=>{o().close(P),b(P),u()})},R=lt(n);return(P=>{P.on("SkinLoaded",()=>{const z=hC(P);z&&y({text:z,type:"warning",timeout:0},!1),u()}),P.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),P.on("remove",()=>{_e(n.slice(),z=>{o().close(z)})}),P.on("keydown",z=>{var j;const Z=((j=z.key)===null||j===void 0?void 0:j.toLowerCase())==="f12"||z.keyCode===123;z.altKey&&Z&&(z.preventDefault(),r().map(Y=>ne.fromDom(Y.getEl())).each(Y=>Ln(Y)))})})(e),{open:y,close:E,getNotifications:R}},sb=Br.PluginManager,e1=Br.ThemeManager;var tB=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const _S=e=>{let n=[];const o=()=>{const Z=e.theme;return Z&&Z.getWindowManagerImpl?Z.getWindowManagerImpl():tB()},r=(Z,Y)=>(...oe)=>Y?Y.apply(Z,oe):void 0,a=Z=>{e.dispatch("OpenWindow",{dialog:Z})},u=Z=>{e.dispatch("CloseWindow",{dialog:Z})},f=Z=>{n.push(Z),a(Z)},b=Z=>{u(Z),n=Rt(n,Y=>Y!==Z),n.length===0&&e.focus()},y=()=>L.from(n[n.length-1]),E=Z=>{e.editorManager.setActive(e),sa(e),e.ui.show();const Y=Z();return f(Y),Y},R=(Z,Y)=>E(()=>o().open(Z,Y,b)),B=Z=>E(()=>o().openUrl(Z,b)),P=(Z,Y,oe)=>{const me=o();me.alert(Z,r(oe||me,Y))},z=(Z,Y,oe)=>{const me=o();me.confirm(Z,r(oe||me,Y))},j=()=>{y().each(Z=>{o().close(Z),b(Z)})};return e.on("remove",()=>{_e(n,Z=>{o().close(Z)})}),{open:R,openUrl:B,alert:P,confirm:z,close:j}},EA=(e,n)=>{e.notificationManager.open({type:"error",text:n})},AS=(e,n)=>{e._skinLoaded?EA(e,n):e.on("SkinLoaded",()=>{EA(e,n)})},nB=(e,n)=>{AS(e,fr.translate(["Failed to upload image: {0}",n]))},Oy=(e,n,o)=>{sh(e,n,{message:o}),console.error(o)},Dy=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,oB=(e,n,o)=>{Oy(e,"PluginLoadError",Dy("plugin",n,o))},sB=(e,n,o)=>{Oy(e,"IconsLoadError",Dy("icons",n,o))},rB=(e,n,o)=>{Oy(e,"LanguageLoadError",Dy("language",n,o))},cB=(e,n,o)=>{Oy(e,"ThemeLoadError",Dy("theme",n,o))},aB=(e,n,o)=>{Oy(e,"ModelLoadError",Dy("model",n,o))},TA=(e,n,o)=>{const r=fr.translate(["Failed to initialize plugin: {0}",n]);sh(e,"PluginLoadError",{message:r}),OS(r,o),AS(e,r)},OS=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},lB=e=>{L.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},ST=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},iB=(e,n)=>{ST(e,"StyleWithCSS",n),ST(e,"enableInlineTableEditing",n),ST(e,"enableObjectResizing",n)},uB=e=>{e.selection.setRng(e.selection.getRng())},kA=(e,n,o)=>{Rc(e,n)&&!o?Jr(e,n):o&&Ao(e,n)},_A=e=>{const n=ne.fromDom(e.getBody());kA(n,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),lB(e)},wT=e=>{const n=ne.fromDom(e.getBody());kA(n,"mce-content-readonly",!1),e.hasEditableRoot()&&Sa(n,!0),iB(e,!1),pE(e)&&e.focus(),uB(e),e.nodeChanged()},tm=e=>Rp(e),t1="data-mce-contenteditable",HH=e=>{_e(zo(e,'*[contenteditable="true"]'),n=>{dr(n,t1,"true"),Sa(n,!1)})},dB=e=>{_e(zo(e,`*[${t1}="true"]`),n=>{Zs(n,t1),Sa(n,!0)})},DS=(e,n)=>{const o=ne.fromDom(e.getBody());n?(_A(e),Sa(o,!1),HH(o)):(dB(o),wT(e))},AA=e=>{e.serializer?Ry(e):e.on("PreInit",()=>{Ry(e)})},Ry=e=>{e.parser.addAttributeFilter("contenteditable",n=>{tm(e)&&_e(n,o=>{o.attr(t1,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(t1,n=>{tm(e)&&_e(n,o=>{o.attr("contenteditable",o.attr(t1))})}),e.serializer.addTempAttr(t1)},OA=e=>e.type==="click",mB=["copy"],My=e=>Jt(mB,e.type),DA=(e,n)=>Id(n,"a",r=>On(r,ne.fromDom(e.getBody()))).bind(r=>gc(r,"href")),RA=(e,n)=>{if(OA(n)&&!xt.metaKeyPressed(n)){const o=ne.fromDom(n.target);DA(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const a=e.dom.select(`${r},[name="${Sr(r,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else My(n)&&e.dispatch(n.type,n)},Ny=e=>{e.on("ShowCaret ObjectSelected",n=>{tm(e)&&n.preventDefault()}),e.on("DisabledStateChange",n=>{n.isDefaultPrevented()||DS(e,n.state)})},n1=e=>{AA(e),Ny(e)},fB=e=>/^[a-z0-9\-]+$/i.test(e),MA=e=>"content/"+e+"/content.css",zH=e=>tinymce.Resource.has(MA(e)),gB=e=>NA(e,Vk(e)),hB=e=>NA(e,gC(e)),NA=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return qt(n,u=>zH(u)?u:fB(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},VH=e=>{e.contentCSS=e.contentCSS.concat(gB(e),hB(e))},o1=e=>e?lr(e.getElementsByTagName("img")):[],rb=(e,n)=>{const o={};return{findAll:(a,u=ft)=>{const f=Rt(o1(a),y=>{const E=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!E||E===Wn.transparentSrc?!1:Ps(E,"blob:")?!e.isUploaded(E)&&u(y):Ps(E,"data:")?u(y):!1}),b=qt(f,y=>{const E=y.src;if(Kt(o,E))return o[E].then(R=>ae(R)?R:{image:y,blobInfo:R.blobInfo});{const R=LM(n,E).then(B=>(delete o[E],{image:y,blobInfo:B})).catch(B=>(delete o[E],B));return o[E]=R,R}});return Promise.all(b)}}},BA=()=>{let o={};const r=(P,z)=>({status:P,resultUri:z}),a=P=>P in o;return{hasBlobUri:a,getResultUri:P=>{const z=o[P];return z?z.resultUri:null},isPending:P=>a(P)?o[P].status===1:!1,isUploaded:P=>a(P)?o[P].status===2:!1,markPending:P=>{o[P]=r(1,null)},markUploaded:(P,z)=>{o[P]=r(2,z)},removeFailed:P=>{delete o[P]},destroy:()=>{o={}}}};let pB=0;const UH=()=>{const e=()=>Math.round(Lh()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},WH=e=>e+pB+++UH(),ZH=()=>{let e=[];const n=B=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[B.toLowerCase()]||"dat",o=(B,P,z,j,Z)=>{if(ae(B))return r({id:B,name:j,filename:Z,blob:P,base64:z});if(Ot(B))return r(B);throw new Error("Unknown input type")},r=B=>{if(!B.blob||!B.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const P=B.id||WH("blobid"),z=B.name||P,j=B.blob;return{id:lt(P),name:lt(z),filename:lt(B.filename||z+"."+n(j.type)),blob:lt(j),base64:lt(B.base64),blobUri:lt(B.blobUri||URL.createObjectURL(j)),uri:lt(B.uri)}},a=B=>{f(B.id())||e.push(B)},u=B=>ts(e,B).getOrUndefined(),f=B=>u(P=>P.id()===B);return{create:o,add:a,get:f,getByUri:B=>u(P=>P.blobUri()===B),getByData:(B,P)=>u(z=>z.base64()===B&&z.blob().type===P),findFirst:u,removeByUri:B=>{e=Rt(e,P=>P.blobUri()===B?(URL.revokeObjectURL(P.blobUri()),!1):!0)},destroy:()=>{_e(e,B=>{URL.revokeObjectURL(B.blobUri())}),e=[]}}},Ni=(e,n)=>{const o={},r=(Z,Y)=>Z?Z.replace(/\/$/,"")+"/"+Y.replace(/^\//,""):Y,a=(Z,Y)=>new Promise((oe,me)=>{const ge=new XMLHttpRequest;ge.open("POST",n.url),ge.withCredentials=n.credentials,ge.upload.onprogress=Ie=>{Y(Ie.loaded/Ie.total*100)},ge.onerror=()=>{me("Image upload failed due to a XHR Transport error. Code: "+ge.status)},ge.onload=()=>{if(ge.status<200||ge.status>=300){me("HTTP Error: "+ge.status);return}const Ie=JSON.parse(ge.responseText);if(!Ie||!ae(Ie.location)){me("Invalid JSON: "+ge.responseText);return}oe(r(n.basePath,Ie.location))};const ve=new FormData;ve.append("file",Z.blob(),Z.filename()),ge.send(ve)}),u=le(n.handler)?n.handler:a,f=()=>new Promise(Z=>{Z([])}),b=(Z,Y)=>({url:Y,blobInfo:Z,status:!0}),y=(Z,Y)=>({url:"",blobInfo:Z,status:!1,error:Y}),E=(Z,Y)=>{Xe.each(o[Z],oe=>{oe(Y)}),delete o[Z]},R=(Z,Y,oe)=>(e.markPending(Z.blobUri()),new Promise(me=>{let ge,ve;try{const Ie=()=>{ge&&(ge.close(),ve=wt)},Ze=Ae=>{Ie(),e.markUploaded(Z.blobUri(),Ae),E(Z.blobUri(),b(Z,Ae)),me(b(Z,Ae))},pt=Ae=>{Ie(),e.removeFailed(Z.blobUri()),E(Z.blobUri(),y(Z,Ae)),me(y(Z,Ae))};ve=Ae=>{Ae<0||Ae>100||L.from(ge).orThunk(()=>L.from(oe).map(go)).each(we=>{ge=we,we.progressBar.value(Ae)})},Y(Z,ve).then(Ze,Ae=>{pt(ae(Ae)?{message:Ae}:Ae)})}catch(Ie){me(y(Z,Ie))}})),B=Z=>Z===a,P=Z=>{const Y=Z.blobUri();return new Promise(oe=>{o[Y]=o[Y]||[],o[Y].push(oe)})},z=(Z,Y)=>(Z=Xe.grep(Z,oe=>!e.isUploaded(oe.blobUri())),Promise.all(Xe.map(Z,oe=>e.isPending(oe.blobUri())?P(oe):R(oe,u,Y))));return{upload:(Z,Y)=>!n.url&&B(u)?f():z(Z,Y)}},ud=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),PA=(e,n)=>Ni(n,{url:bx(e),basePath:Hk(e),credentials:lu(e),handler:rh(e)}),$A=e=>{const n=BA(),o=PA(e,n);return{upload:(r,a=!0)=>o.upload(r,a?ud(e):void 0)}},IA=(e,n)=>e.dom.isEmpty(n.dom)&&De(e.schema.getTextBlockElements()[Un(n)]),xT=e=>n=>{IA(e,n)&&Ts(n,ne.fromHtml('<br data-mce-bogus="1" />'))},jH=e=>{const n=ZH();let o,r;const a=BA(),u=[],f=ge=>ve=>e.selection?ge(ve):[],b=ge=>ge+(ge.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(ge,ve,Ie)=>{let Ze=0;do Ze=ge.indexOf(ve,Ze),Ze!==-1&&(ge=ge.substring(0,Ze)+Ie+ge.substr(Ze+ve.length),Ze+=Ie.length-ve.length+1);while(Ze!==-1);return ge},E=(ge,ve,Ie)=>{const Ze=`src="${Ie}"${Ie===Wn.transparentSrc?' data-mce-placeholder="1"':""}`;return ge=y(ge,`src="${ve}"`,Ze),ge=y(ge,'data-mce-src="'+ve+'"','data-mce-src="'+Ie+'"'),ge},R=(ge,ve)=>{_e(e.undoManager.data,Ie=>{Ie.type==="fragmented"?Ie.fragments=qt(Ie.fragments,Ze=>E(Ze,ge,ve)):Ie.content=E(Ie.content,ge,ve)})},B=(ge,ve)=>{const Ie=e.convertURL(ve,"src");R(ge.src,ve),Gc(ne.fromDom(ge),{src:g0(e)?b(ve):ve,"data-mce-src":Ie})},P=()=>(o||(o=PA(e,a)),Y().then(f(ge=>{const ve=qt(ge,Ie=>Ie.blobInfo);return o.upload(ve,ud(e)).then(f(Ie=>{const Ze=[];let pt=!1;const Ae=qt(Ie,(we,Le)=>{const{blobInfo:gt,image:$t}=ge[Le];let kn=!1;return we.status&&h0(e)?(we.url&&!ir($t.src,we.url)&&(pt=!0),n.removeByUri($t.src),lg(e)||B($t,we.url)):we.error&&(we.error.remove&&(R($t.src,Wn.transparentSrc),Ze.push($t),kn=!0),nB(e,we.error.message)),{element:$t,status:we.status,uploadUri:we.url,blobInfo:gt,removed:kn}});return Ze.length>0&&!lg(e)?e.undoManager.transact(()=>{_e(un(Ze),we=>{const Le=To(we);x(we),Le.each(xT(e)),n.removeByUri(we.dom.src)})}):pt&&e.undoManager.dispatchChange(),Ae}))}))),z=()=>Za(e)?P():Promise.resolve([]),j=ge=>An(u,ve=>ve(ge)),Z=ge=>{u.push(ge)},Y=()=>(r||(r=rb(a,n)),r.findAll(e.getBody(),j).then(f(ge=>{const ve=Rt(ge,Ie=>ae(Ie)?(AS(e,Ie),!1):Ie.uriType!=="blob");return lg(e)||_e(ve,Ie=>{R(Ie.image.src,Ie.blobInfo.blobUri()),Ie.image.src=Ie.blobInfo.blobUri(),Ie.image.removeAttribute("data-mce-src")}),ve}))),oe=()=>{n.destroy(),a.destroy(),r=o=null},me=ge=>ge.replace(/src="(blob:[^"]+)"/g,(ve,Ie)=>{const Ze=a.getResultUri(Ie);if(Ze)return'src="'+Ze+'"';let pt=n.getByUri(Ie);return pt||(pt=Ro(e.editorManager.get(),(Ae,we)=>Ae||we.editorUpload&&we.editorUpload.blobCache.getByUri(Ie),void 0)),pt?'src="data:'+pt.blob().type+";base64,"+pt.base64()+'"':ve});return e.on("SetContent",()=>{Za(e)?z():Y()}),e.on("RawSaveContent",ge=>{ge.content=me(ge.content)}),e.on("GetContent",ge=>{ge.source_view||ge.format==="raw"||ge.format==="tree"||(ge.content=me(ge.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ge=>{_e(ge,ve=>{const Ie=ve.attr("src");if(!Ie||n.getByUri(Ie))return;const Ze=a.getResultUri(Ie);Ze&&ve.attr("src",Ze)})})}),{blobCache:n,addFilter:Z,uploadImages:P,uploadImagesAuto:z,scanForImages:Y,destroy:oe}},bB=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,u,f)=>ht(a)&&a.hasAttribute("href"),onformat:(a,u,f)=>{Xe.each(f,(b,y)=>{n.setAttrib(a,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>{var u;return(u=a==null?void 0:a.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Xe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),a=>{r[a]={block:a,remove:"all"}}),r},By={remove_similar:!0,inherit:!1},Py={selector:"td,th",...By},ET={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Py},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Py},tablecellbordercolor:{styles:{borderColor:"%value"},...Py},tablecellclass:{classes:["%value"],...Py},tableclass:{selector:"table",classes:["%value"],...By},tablecellborderstyle:{styles:{borderStyle:"%value"},...Py},tablecellborderwidth:{styles:{borderWidth:"%value"},...Py}},FA=lt(ET),vB=e=>{const n={},o=f=>De(f)?n[f]:n,r=f=>Kt(n,f),a=(f,b)=>{f&&(ae(f)?($n(b)||(b=[b]),_e(b,y=>{bs(y.deep)&&(y.deep=!Ti(y)),bs(y.split)&&(y.split=!Ti(y)||oc(y)),bs(y.remove)&&Ti(y)&&!oc(y)&&(y.remove="none"),Ti(y)&&oc(y)&&(y.mixed=!0,y.block_expand=!0),ae(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):at(f,(y,E)=>{a(E,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return a(bB(e)),a(FA()),a(jk(e)),{get:o,has:r,register:a,unregister:u}},s1=Xe.each,dd=mo.DOM,LA=e=>De(e)&&Ot(e),nm=(e,n)=>{const o=n&&n.schema||Xc({}),r=(y,E)=>{E.classes.length>0&&dd.addClass(y,E.classes.join(" ")),dd.setAttribs(y,E.attrs)},a=y=>{const E=ae(y)?{name:y,classes:[],attrs:{}}:y,R=dd.create(E.name);return r(R,E),R},u=(y,E)=>{const R=o.getElementRule(y.nodeName.toLowerCase()),B=R==null?void 0:R.parentsRequired;return B&&B.length?E&&Jt(B,E)?E:B[0]:!1},f=(y,E,R)=>{let B;const P=E[0],z=LA(P)?P.name:void 0,j=u(y,z);if(j)z===j?(B=P,E=E.slice(1)):B=j;else if(P)B=P,E=E.slice(1);else if(!R)return y;const Z=B?a(B):dd.create("div");Z.appendChild(y),R&&Xe.each(R,oe=>{const me=a(oe);Z.insertBefore(me,y)});const Y=LA(B)?B.siblings:void 0;return f(Z,E,Y)},b=dd.create("div");if(e.length>0){const y=e[0],E=a(y),R=LA(y)?y.siblings:void 0;b.appendChild(f(E,e.slice(1),R))}return b},Bi=e=>{e=Xe.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,b)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Xe.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},RS=e=>ae(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Xe.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Xe.map(n.split(/(?:~\+|~|\+)/),Bi),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],Pi=(e,n)=>{let o="",r=pC(e);if(r==="")return"";const a=P=>ae(P)?P.replace(/%(\w+)/g,""):"",u=(P,z)=>dd.getStyle(z??e.getBody(),P,!0);if(ae(n)){const P=e.formatter.get(n);if(!P)return"";n=P[0]}if("preview"in n){const P=n.preview;if(P===!1)return"";r=P||r}let f=n.block||n.inline||"span",b;const y=RS(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=nm(y,e)):b=nm([f],e);const E=dd.select(f,b)[0]||b.firstChild;s1(n.styles,(P,z)=>{const j=a(P);j&&dd.setStyle(E,z,j)}),s1(n.attributes,(P,z)=>{const j=a(P);j&&dd.setAttrib(E,z,j)}),s1(n.classes,P=>{const z=a(P);dd.hasClass(E,z)||dd.addClass(E,z)}),e.dispatch("PreviewFormats"),dd.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const R=u("fontSize"),B=/px$/.test(R)?parseInt(R,10):0;return s1(r.split(" "),P=>{let z=u(P,E);if(!(P==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(z)&&(z=u(P),H1(z).toLowerCase()==="#ffffff"))&&!(P==="color"&&H1(z).toLowerCase()==="#000000")){if(P==="font-size"&&/em|%$/.test(z)){if(B===0)return;z=parseFloat(z)/(/%$/.test(z)?100:1)*B+"px"}P==="border"&&z&&(o+="padding:0 2px;"),o+=P+":"+z+";"}}),e.dispatch("AfterPreviewFormats"),dd.remove(b),o},GH=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},jo=e=>{const n=vB(e),o=ns({});return GH(e),RF(e),lg(e)||AM(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{aH(e,r,a,u)},remove:(r,a,u,f)=>{mA(e,r,a,u,f)},toggle:(r,a,u)=>{BN(e,r,a,u)},match:(r,a,u,f)=>oH(e,r,a,u,f),closest:r=>fT(e,r),matchAll:(r,a)=>sH(e,r,a),matchNode:(r,a,u,f)=>rH(e,r,a,u,f),canApply:r=>cH(e,r),formatChanged:(r,a,u,f)=>gT(e,o,r,a,u,f),getCssText:ze(Pi,e)}},yB=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},cb=(e,n,o)=>{const r=ns(!1),a=y=>{ky(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const E=y.command;yB(E)||(DN(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const E=y.command;yB(E)||a(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",y=>{const E=y.keyCode;if(y.isDefaultPrevented())return;const R=Wn.os.isMacOS()&&y.key==="Meta";(E>=33&&E<=36||E>=37&&E<=40||E===45||y.ctrlKey||R)&&(a(),e.nodeChanged()),(E===46||E===8)&&e.nodeChanged(),r.get()&&n.typing&&!iA(Ty(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",y=>{const E=y.keyCode;if(y.isDefaultPrevented())return;if(E>=33&&E<=36||E>=37&&E<=40||E===45){n.typing&&a(y);return}const R=y.ctrlKey&&!y.altKey||y.metaKey;if((E<16||E>20)&&E!==224&&E!==91&&!n.typing&&!R){n.beforeChange(),ky(n,!0,o),n.add({},y),r.set(!0);return}(Wn.os.isMacOS()?y.metaKey:y.ctrlKey&&!y.altKey)&&n.beforeChange()}),e.on("mousedown",y=>{n.typing&&a(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&a(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},MS=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},HA=e=>{const n=Ur(),o=ns(0),r=ns(0),a={data:[],typing:!1,beforeChange:()=>{JL(e,o,n)},add:(u,f)=>_G(e,a,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=Ty(e);u.bookmark=Wf(e.selection),e.dispatch("change",{level:u,lastLevel:tl(a.data,r.get()).getOrUndefined()})},undo:()=>em(e,a,o,r),redo:()=>MN(e,r,a.data),clear:()=>{QL(e,a,r)},reset:()=>{NN(e,a)},hasUndo:()=>eH(e,a,r),hasRedo:()=>tH(e,a,r),transact:u=>AG(e,a,o,u),ignore:u=>{Ta(e,o,u)},extra:(u,f)=>{nH(e,a,r,u,f)}};return lg(e)||cb(e,a,o),MS(e),a},zA=[9,27,xt.HOME,xt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,xt.DOWN,xt.UP,xt.LEFT,xt.RIGHT].concat(Wn.browser.isFirefox()?[224]:[]),TT="data-mce-placeholder",CB=e=>e.type==="keydown"||e.type==="keyup",kT=e=>{const n=e.keyCode;return n===xt.BACKSPACE||n===xt.DELETE},qH=e=>{if(CB(e)){const n=e.keyCode;return!kT(e)&&(xt.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||Jt(zA,n))}else return!1},SB=e=>CB(e)&&!(kT(e)||e.type==="keyup"&&e.keyCode===229),wB=(e,n,o)=>{if(e.isEmpty(n,void 0,{skipBogus:!1,includeZwsp:!0})){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},VA=e=>{var n;const o=e.dom,r=ta(e),a=(n=RR(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(qH(f))return;const y=e.getBody(),E=SB(f)?!1:wB(o,y,r);(o.getAttrib(y,TT)!==""!==E||b)&&(o.setAttrib(y,TT,E?a:null),Zf(e,E),e.on(E?"keydown":"keyup",u),e.off(E?"keyup":"keydown",u))};dn(a)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Ai.setEditorTimeout(e,()=>u(b)))})},xB=(e,n)=>({block:e,position:n}),_T=(e,n)=>({from:e,to:n}),UA=(e,n)=>{const o=ne.fromDom(e),r=ne.fromDom(n.container());return tS(o,r).map(a=>xB(a,n))},KH=e=>!(dl(e.to.block,e.from.block)||dl(e.from.block,e.to.block)),YH=e=>!On(e.from.block,e.to.block),EB=(e,n)=>Ca(n,a=>Lm(a)||Xi(a.dom),a=>On(a,e)).filter(Gr).getOr(e),XH=(e,n)=>{const o=ne.fromDom(e);return On(EB(o,n.from.block),EB(o,n.to.block))},TB=e=>as(e.from.block.dom)===!1&&as(e.to.block.dom)===!1,JH=e=>{const n=o=>j2(o)||R2(o.dom)||vi(o);return n(e.from.block)&&n(e.to.block)},QH=(e,n,o,r)=>As(r.position.getNode())&&!ma(e,r.block)?Jf(!1,r.block.dom).bind(a=>a.isEqual(r.position)?wi(o,n,a).bind(u=>UA(n,u)):L.some(r)).getOr(r):r,kB=(e,n,o,r)=>{const a=UA(n,Oe.fromRangeStart(r)),u=a.bind(f=>wi(o,n,f.position).bind(b=>UA(n,b).map(y=>QH(e,n,o,y))));return Ys(a,u,_T).filter(f=>YH(f)&&XH(n,f)&&TB(f)&&JH(f)&&KH(f))},e9=(e,n,o,r)=>r.collapsed?kB(e,n,o,r):L.none(),_B=(e,n)=>{const o=ur(e);return Hr(o,r=>n.isBlock(Un(r))).fold(lt(o),r=>o.slice(0,r))},$y=(e,n)=>{const o=_B(e,n);return _e(o,x),o},AB=(e,n,o)=>{const r=tg(o,n);return ts(r.reverse(),a=>ma(e,a)).each(x)},t9=(e,n)=>Rt($s(n),o=>!ma(e,o)).length===0,OB=(e,n,o,r,a)=>{if(ma(r,o))return zm(o),Pr(o.dom);t9(r,a)&&ma(r,n)&&Rr(a,ne.fromTag("br"));const u=fa(o.dom,Oe.before(a.dom));return _e($y(n,r),f=>{Rr(a,f)}),AB(r,e,n),u},DB=(e,n)=>e.isInline(Un(n)),n9=(e,n,o,r)=>{if(ma(r,o)){if(ma(r,n)){const f=Ar((b=>{const y=(E,R)=>Ho(E).fold(()=>R,B=>DB(r,B)?y(B,R.concat(X(B))):R);return y(b,[])})(o),(b,y)=>(xm(b,y),y),Hm());Qs(n),Ts(n,f)}return x(o),Pr(n.dom)}const a=Ic(o.dom);return _e($y(n,r),u=>{Ts(o,u)}),AB(r,e,n),a},RB=(e,n)=>{const o=tg(n,e);return L.from(o[o.length-1])},md=(e,n)=>dl(n,e)?RB(n,e):L.none(),MB=(e,n)=>{Jf(e,n.dom).bind(o=>L.from(o.getNode())).map(ne.fromDom).filter(Fm).each(x)},WA=(e,n,o,r)=>(MB(!0,n),MB(!1,o),md(n,o).fold(ze(n9,e,n,o,r),ze(OB,e,n,o,r))),AT=(e,n,o,r,a)=>n?WA(e,r,o,a):WA(e,o,r,a),NS=(e,n)=>{const o=ne.fromDom(e.getBody());return e9(e.schema,o.dom,n,e.selection.getRng()).map(a=>()=>{AT(o,n,a.from.block,a.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},NB=(e,n,o)=>{const r=n.getRng();return Ys(tS(e,ne.fromDom(r.startContainer)),tS(e,ne.fromDom(r.endContainer)),(a,u)=>On(a,u)?L.none():L.some(()=>{r.deleteContents(),AT(e,!0,a,u,o).each(f=>{n.setRng(f.toRange())})})).getOr(L.none())},ZA=(e,n)=>{const o=ne.fromDom(n),r=ze(On,e);return Yi(o,Lm,r).isSome()},o9=(e,n)=>ZA(e,n.startContainer)||ZA(e,n.endContainer),s9=(e,n)=>{const o=fa(e.dom,Oe.fromRangeStart(n)).isNone(),r=Os(e.dom,Oe.fromRangeEnd(n)).isNone();return!o9(e,n)&&o&&r},BB=e=>L.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),PB=e=>{const n=ne.fromDom(e.getBody()),o=e.selection.getRng();return s9(n,o)?BB(e):NB(n,e.selection,e.schema)},Gl=(e,n)=>e.selection.isCollapsed()?L.none():PB(e),Oh=(e,n,o,r,a)=>L.from(n._selectionOverrides.showCaret(e,o,r,a)),r9=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},OT=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?L.none():L.some(r9(n)),jA=(e,n,o)=>{const r=iu(1,e.getBody(),n),a=Oe.fromRangeStart(r),u=a.getNode();if(x0(u))return Oh(1,e,u,!a.isAtEnd(),!1);const f=a.getNode(!0);if(x0(f))return Oh(1,e,f,!1,!1);const b=G0(e.dom.getRoot(),a.getNode());return x0(b)?Oh(1,e,b,!1,o):L.none()},GA=(e,n,o)=>n.collapsed?jA(e,n,o).getOr(n):n,OG=e=>U0(e)||XC(e),c9=e=>W0(e)||V0(e),qA=(e,n)=>{je(n)&&n.data.length===0&&e.remove(n)},fd=(e,n,o,r,a,u)=>{Oh(r,e,u.getNode(!a),a,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();a?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),qA(e.dom,o)},KA=(e,n)=>{const o=e.selection.getRng();if(!je(o.commonAncestorContainer))return L.none();const r=n?1:-1,a=uu(e.getBody()),u=ze(DC,n?a.next:a.prev),f=n?OG:c9,b=$p(r,e.getBody(),o),y=u(b),E=y&&ad(n,y);if(!E||!Zv(b,E))return L.none();if(f(E))return L.some(()=>fd(e,o,b.getNode(),r,n,E));const R=u(E);return R&&f(R)&&Zv(E,R)?L.some(()=>fd(e,o,b.getNode(),r,n,R)):L.none()},Iy=(e,n)=>KA(e,n),BS=(e,n)=>{const o=e.getBody();return n?Pr(o).filter(U0):Ic(o).filter(W0)},YA=e=>{const n=e.selection.getRng();return!n.collapsed&&(BS(e,!0).exists(o=>o.isEqual(Oe.fromRangeStart(n)))||BS(e,!1).exists(o=>o.isEqual(Oe.fromRangeEnd(n))))},XA=e=>De(e)&&(Lm(ne.fromDom(e))||vi(ne.fromDom(e))),pu=Vr.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),$B=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return ht(o)&&o.getAttribute("data-mce-caret")===r},a9=(e,n,o,r,a)=>{const u=f=>a.isInline(f.nodeName.toLowerCase())&&!nd(o,r,e);return qx(!n,o).fold(()=>qx(n,r).fold(Pe,u),u)},IB=(e,n,o,r,a)=>{const u=a.getNode(!o);return tS(ne.fromDom(n),ne.fromDom(r.getNode())).map(f=>ma(e,f)?pu.remove(f.dom):pu.moveToElement(u)).orThunk(()=>L.some(pu.moveToElement(u)))},DT=(e,n,o,r)=>wi(n,e,o).bind(a=>XA(a.getNode())||a9(e,n,o,a,r)?L.none():n&&as(a.getNode())||!n&&as(a.getNode(!0))?IB(r,e,n,o,a):n&&W0(o)||!n&&U0(o)?L.some(pu.moveToPosition(a)):L.none()),l9=(e,n)=>Rn(n)?L.none():e&&as(n.nextSibling)?L.some(pu.moveToElement(n.nextSibling)):!e&&as(n.previousSibling)?L.some(pu.moveToElement(n.previousSibling)):L.none(),FB=(e,n,o)=>o.fold(r=>L.some(pu.remove(r)),r=>L.some(pu.moveToElement(r)),r=>nd(n,r,e)?L.none():L.some(pu.moveToPosition(r))),i9=(e,n,o,r)=>$B(n,o)?l9(n,o.getNode(!n)).orThunk(()=>DT(e,n,o,r)):DT(e,n,o,r).bind(a=>FB(e,o,a)),ab=(e,n,o,r)=>{const a=iu(n?1:-1,e,o),u=Oe.fromRangeStart(a),f=ne.fromDom(e);return!n&&W0(u)?L.some(pu.remove(u.getNode(!0))):n&&U0(u)?L.some(pu.remove(u.getNode())):!n&&U0(u)&&_E(f,u,r)?d5(f,u,r).map(b=>pu.remove(b.getNode())):n&&W0(u)&&q3(f,u,r)?m7(f,u,r).map(b=>pu.remove(b.getNode())):i9(e,n,u,r)},LB=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),Z0(e,n,ne.fromDom(o)),!0),u9=(e,n)=>o=>{const r=n?Oe.before(o):Oe.after(o);return e.selection.setRng(r.toRange()),!0},HB=e=>n=>(e.selection.setRng(n.toRange()),!0),zB=(e,n)=>L.from(G0(e.getBody(),n)),d9=(e,n)=>{const o=e.selection.getNode();return zB(e,o).filter(as).fold(()=>ab(e.getBody(),n,e.selection.getRng(),e.schema).map(r=>()=>r.fold(LB(e,n),u9(e,n),HB(e))),()=>L.some(wt))},m9=e=>{_e(zo(e,".mce-offscreen-selection"),x)},f9=(e,n)=>{const o=e.selection.getNode();return as(o)&&!qb(o)?zB(e,o.parentNode).filter(as).fold(()=>L.some(()=>{m9(ne.fromDom(e.getBody())),Z0(e,n,ne.fromDom(e.selection.getNode())),nS(e)}),()=>L.some(wt)):YA(e)?L.some(()=>{B5(e,e.selection.getRng(),ne.fromDom(e.getBody()))}):L.none()},VB=e=>{const n=e.dom,o=e.selection,r=G0(e.getBody(),o.getNode());if(Xi(r)&&n.isBlock(r)&&n.isEmpty(r)){const a=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(a),o.setRng(Oe.before(a).toRange())}return!0},RT=(e,n)=>e.selection.isCollapsed()?d9(e,n):f9(e,n),UB=e=>e.hasOwnProperty("text"),MT=e=>e.hasOwnProperty("marker"),Dh=(e,n)=>{const o=(u,f)=>{if(je(u))return{text:u,offset:f};{const b=n(),y=u.childNodes;return f<y.length?(u.insertBefore(b,y[f]),{marker:b,before:!0}):(u.appendChild(b),{marker:b,before:!1})}},r=o(e.endContainer,e.endOffset);return{start:o(e.startContainer,e.startOffset),end:r}},WB=e=>{var n,o;const{start:r,end:a}=e,u=new window.Range;return UB(r)?u.setStart(r.text,r.offset):MT(r)&&(r.before?u.setStartBefore(r.marker):u.setStartAfter(r.marker),(n=r.marker.parentNode)===null||n===void 0||n.removeChild(r.marker)),UB(a)?u.setEnd(a.text,a.offset):MT(a)&&(a.before?u.setEndBefore(a.marker):u.setEndAfter(a.marker),(o=a.marker.parentNode)===null||o===void 0||o.removeChild(a.marker)),u},JA=(e,n)=>{var o;const r=e.dom,a=r.getParent(e.selection.getStart(),r.isBlock),u=r.getParent(e.selection.getEnd(),r.isBlock),f=e.getBody();if(((o=a==null?void 0:a.nodeName)===null||o===void 0?void 0:o.toLowerCase())==="div"&&a&&u&&a===f.firstChild&&u===f.lastChild&&!r.isEmpty(f)){const y=a.cloneNode(!1),E=()=>{if(n?M5(e):NE(e),f.firstChild!==a){const R=Dh(e.selection.getRng(),()=>document.createElement("span"));Array.from(f.childNodes).forEach(B=>y.appendChild(B)),f.appendChild(y),e.selection.setRng(WB(R))}};return L.some(E)}return L.none()},NT=(e,n)=>{const o=Oe.fromRangeStart(e.selection.getRng());return wi(n,e.getBody(),o).filter(r=>n?oG(r):c7(r)).bind(r=>Pp(n?0:-1,r)).map(r=>()=>e.selection.select(r))},BT=(e,n)=>e.selection.isCollapsed()?NT(e,n):L.none(),lb=je,QA=e=>lb(e)&&e.data[0]===tc,PS=e=>lb(e)&&e.data[e.data.length-1]===tc,eO=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(tc)},g9=e=>{var n;if(lb(e.previousSibling))return PS(e.previousSibling)||e.previousSibling.appendData(tc),e.previousSibling;if(lb(e))return QA(e)||e.insertData(0,tc),e;{const o=eO(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},ZB=e=>{var n,o;if(lb(e.nextSibling))return QA(e.nextSibling)||e.nextSibling.insertData(0,tc),e.nextSibling;if(lb(e))return PS(e)||e.appendData(tc),e;{const r=eO(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},PT=(e,n)=>e?g9(n):ZB(n),h9=ze(PT,!0),$T=ze(PT,!1),tO=(e,n)=>je(e.container())?PT(n,e.container()):PT(n,e.getNode()),$S=(e,n)=>{const o=n.get();return o&&e.container()===o&&Jc(o)},nO=(e,n)=>n.fold(o=>{Xf(e.get());const r=h9(o);return e.set(r),L.some(Oe(r,r.length-1))},o=>Pr(o).map(r=>{if($S(r,e)){const a=e.get();return Oe(a,1)}else{Xf(e.get());const a=tO(r,!0);return e.set(a),Oe(a,1)}}),o=>Ic(o).map(r=>{if($S(r,e)){const a=e.get();return Oe(a,a.length-1)}else{Xf(e.get());const a=tO(r,!1);return e.set(a),Oe(a,a.length-1)}}),o=>{Xf(e.get());const r=$T(o);return e.set(r),L.some(Oe(r,1))}),jB=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return L.none()},Ol=Vr.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),oO=(e,n)=>{const o=Gm(n,e);return o||e},sO=(e,n,o)=>{const r=D5(o),a=oO(n,r.container());return qp(e,a,r).fold(()=>Os(a,r).bind(ze(qp,e,a)).map(u=>Ol.before(u)),L.none)},GB=(e,n)=>qm(e,n)===null,qB=(e,n,o)=>qp(e,n,o).filter(ze(GB,n)),p9=(e,n,o)=>{const r=n_(o);return qB(e,n,r).bind(a=>fa(a,r).isNone()?L.some(Ol.start(a)):L.none())},b9=(e,n,o)=>{const r=D5(o);return qB(e,n,r).bind(a=>Os(a,r).isNone()?L.some(Ol.end(a)):L.none())},IS=(e,n,o)=>{const r=n_(o),a=oO(n,r.container());return qp(e,a,r).fold(()=>fa(a,r).bind(ze(qp,e,a)).map(u=>Ol.after(u)),L.none)},om=e=>!_5(FS(e)),ig=(e,n,o)=>jB([sO,p9,b9,IS],[e,n,o]).filter(om),FS=e=>e.fold(Jo,Jo,Jo,Jo),zs=e=>e.fold(lt("before"),lt("start"),lt("end"),lt("after")),Fy=e=>e.fold(Ol.before,Ol.before,Ol.after,Ol.after),Ly=e=>e.fold(Ol.start,Ol.start,Ol.end,Ol.end),Rh=(e,n)=>zs(e)===zs(n)&&FS(e)===FS(n),KB=(e,n,o,r,a,u)=>Ys(qp(n,o,r),qp(n,o,a),(f,b)=>f!==b&&O5(o,f,b)?Ol.after(e?f:b):u).getOr(u),rO=(e,n)=>e.fold(ft,o=>!Rh(o,n)),v9=(e,n,o,r,a)=>{const u=ad(e,a);return wi(e,o,u).map(ze(ad,e)).fold(()=>r.map(Fy),y=>ig(n,o,y).map(ze(KB,e,n,o,u,y)).filter(ze(rO,r))).filter(om)},Hy=(e,n)=>e?n.fold(A(L.some,Ol.start),L.none,A(L.some,Ol.after),L.none):n.fold(L.none,A(L.some,Ol.before),L.none,A(L.some,Ol.end)),y9=(e,n,o,r)=>{const a=ad(e,r),u=ig(n,o,a);return ig(n,o,a).bind(ze(Hy,e)).orThunk(()=>v9(e,n,o,u,r))},C9=e=>le(e.selection.getSel().modify),ib=(e,n,o)=>{const r=e?1:-1;return n.setRng(Oe(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},S9=(e,n)=>{const o=n.selection.getRng(),r=e?Oe.fromRangeEnd(o):Oe.fromRangeStart(o);return C9(n)?e&&q2(r)?ib(!0,n.selection,r):!e&&X1(r)?ib(!1,n.selection,r):!1:!1};var ql;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(ql||(ql={}));const IT=(e,n)=>e===-1?$o(n):n,r1=(e,n,o)=>e===1?n.next(o):n.prev(o),w9=(e,n,o,r)=>As(r.getNode(n===1))?ql.Br:nd(o,r)===!1?ql.Block:ql.Wrap,bu=(e,n,o,r)=>{const a=uu(o);let u=r;const f=[];for(;u;){const b=r1(n,a,u);if(!b)break;if(As(b.getNode(!1)))return n===1?{positions:IT(n,f).concat([b]),breakType:ql.Br,breakAt:L.some(b)}:{positions:IT(n,f),breakType:ql.Br,breakAt:L.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=w9(o,n,u,b);return{positions:IT(n,f),breakType:y,breakAt:L.some(b)}}f.push(b),u=b}return{positions:IT(n,f),breakType:ql.Eol,breakAt:L.none()}},c1=(e,n,o,r)=>n(o,r).breakAt.map(a=>{const u=n(o,a).positions;return e===-1?u.concat(a):[a].concat(u)}).getOr([]),ub=(e,n)=>Ro(e,(o,r)=>o.fold(()=>L.some(r),a=>Ys(Ks(a.getClientRects()),Ks(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:a}).or(o)),L.none()),zy=(e,n)=>Ks(n.getClientRects()).bind(o=>ub(e,o.left)),LS=ze(bu,Oe.isAbove,-1),ug=ze(bu,Oe.isBelow,1),YB=ze(c1,-1,LS),gd=ze(c1,1,ug),HS=(e,n)=>LS(e,n).breakAt.isNone(),cO=(e,n)=>ug(e,n).breakAt.isNone(),aO=e=>Pr(e).map(n=>[n].concat(ug(e,n).positions)).getOr([]),lO=e=>Ic(e).map(n=>LS(e,n).positions.concat(n)).getOr([]),db=(e,n)=>zy(YB(e,n),n),iO=(e,n)=>zy(gd(e,n),n),x9=as,XB=(e,n)=>Math.abs(e.left-n),JB=(e,n)=>Math.abs(e.right-n),E9=e=>$l(e,"node"),QB=(e,n)=>Ru(e,(o,r)=>{const a=Math.min(XB(o,n),JB(o,n)),u=Math.min(XB(r,n),JB(r,n));return u===a&&E9(r)&&x9(r.node)||u<a?r:o}),T9=e=>{const n=o=>qt(o,r=>{const a=Wd(r);return a.node=e,a});if(ht(e))return n(e.getClientRects());if(je(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},mb=e=>zr(e,T9);var Dl;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Dl||(Dl={}));const k9=(e,n,o,r)=>{let a=r;for(;a=mh(a,e,pv,n);)if(o(a))return},eP=(e,n,o,r,a,u)=>{let f=0;const b=[],y=B=>{let P=mb([B]);e===Dl.Up&&(P=P.reverse());for(let z=0;z<P.length;z++){const j=P[z];if(!o(j,E)){if(b.length>0&&n(j,Zr(b))&&f++,j.line=f,a(j))return!0;b.push(j)}}return!1},E=Zr(u.getClientRects());if(!E)return b;const R=u.getNode();return R&&(y(R),k9(e,r,y,R)),b},_9=(e,n)=>n.line>e,A9=(e,n)=>n.line===e,O9=ze(eP,Dl.Up,zf,pp),D9=ze(eP,Dl.Down,pp,zf),tP=e=>Zr(e.getClientRects()),R9=(e,n,o,r)=>{const a=uu(n);let u,f,b,y;const E=[];let R=0;e===Dl.Down?(u=a.next,f=pp,b=zf,y=Oe.after(r)):(u=a.prev,f=zf,b=pp,y=Oe.before(r));const B=tP(y);do{if(!y.isVisible())continue;const P=tP(y);if(b(P,B))continue;E.length>0&&f(P,Zr(E))&&R++;const z=Wd(P);if(z.position=y,z.line=R,o(z))return E;E.push(z)}while(y=u(y));return E},nP=e=>n=>_9(e,n),oP=e=>n=>A9(e,n),Mh=(e,n)=>{e.selection.setRng(n),H0(e,e.selection.getRng())},uO=(e,n,o)=>L.some(GA(e,n,o)),sP=(e,n,o,r,a,u)=>{const f=n===1,b=uu(e.getBody()),y=ze(DC,f?b.next:b.prev),E=f?r:a;if(!o.collapsed){const j=bp(o);if(u(j))return Oh(n,e,j,n===-1,!1);if(YA(e)){const Z=o.cloneRange();return Z.collapse(n===-1),L.from(Z)}}const R=$p(n,e.getBody(),o);if(E(R))return OT(e,R.getNode(!f));let B=y(R);const P=Y2(o);if(B)B=ad(f,B);else return P?L.some(o):L.none();if(E(B))return Oh(n,e,B.getNode(!f),f,!1);const z=y(B);return z&&E(z)&&Zv(B,z)?Oh(n,e,z.getNode(!f),f,!1):P?uO(e,B.toRange(),!1):L.none()},rP=(e,n,o,r,a,u)=>{const f=$p(n,e.getBody(),o),b=Zr(f.getClientRects()),y=n===Dl.Down,E=e.getBody();if(!b)return L.none();if(YA(e)){const Y=y?Oe.fromRangeEnd(o):Oe.fromRangeStart(o);return(y?iO:db)(E,Y).orThunk(()=>L.from(Y)).map(me=>me.toRange())}const B=(y?D9:O9)(E,nP(1),f),P=Rt(B,oP(1)),z=b.left,j=QB(P,z);if(j&&u(j.node)){const Y=Math.abs(z-j.left),oe=Math.abs(z-j.right);return Oh(n,e,j.node,Y<oe,!1)}let Z;if(r(f)?Z=f.getNode():a(f)?Z=f.getNode(!0):Z=bp(o),Z){const Y=R9(n,E,nP(1),Z);let oe=QB(Rt(Y,oP(1)),z);if(oe||(oe=Zr(Rt(Y,oP(0))),oe))return uO(e,oe.position.toRange(),!1)}return P.length===0?dO(e,y).filter(y?a:r).map(Y=>GA(e,Y.toRange(),!1)):L.none()},dO=(e,n)=>{const o=e.selection.getRng(),r=n?Oe.fromRangeEnd(o):Oe.fromRangeStart(o),a=d3(r.container(),e.getBody());if(n){const u=ug(a,r);return Us(u.positions)}else{const u=LS(a,r);return Ks(u.positions)}},cP=(e,n,o)=>dO(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),nf=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},aP=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},lP=(e,n,o)=>nO(n,o).map(r=>(nf(e,r),o)),mO=(e,n,o)=>{const r=Oe.fromRangeStart(e);if(e.collapsed)return r;{const a=Oe.fromRangeEnd(e);return o?fa(n,a).getOr(a):Os(n,r).getOr(r)}},iP=(e,n,o)=>{const r=e.getBody(),a=mO(e.selection.getRng(),r,o),u=ze(j0,e);return y9(o,u,r,a).bind(b=>lP(e,n,b))},fO=(e,n,o)=>{const r=qt(zo(ne.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=Rt(r,e),u=Rt(o,e);_e(ku(a,u),ze(aP,!1)),_e(ku(u,a),ze(aP,!0))},M9=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Oe.fromRangeStart(e.selection.getRng());Oe.isTextPosition(r)&&!R7(r)&&(nf(e,zx(o,r)),n.set(null))}},N9=(e,n,o,r)=>{if(n.selection.isCollapsed()){const a=Rt(r,e);_e(a,u=>{const f=Oe.fromRangeStart(n.selection.getRng());ig(e,n.getBody(),f).bind(b=>lP(n,o,b))})}},uP=(e,n,o)=>Tp(e)?iP(e,n,o).isSome():!1,dP=(e,n,o)=>Tp(n)?S9(e,n):!1,B9=e=>{const n=ns(null),o=ze(j0,e);return e.on("NodeChange",r=>{Tp(e)&&(fO(o,e.dom,r.parents),M9(e,n),N9(o,e,n,r.parents))}),n},P9=ze(dP,!0),$9=ze(dP,!1),FT=(e,n,o)=>{if(Tp(e)){const r=dO(e,n).getOrThunk(()=>{const a=e.selection.getRng();return n?Oe.fromRangeEnd(a):Oe.fromRangeStart(a)});return ig(ze(j0,e),e.getBody(),r).exists(a=>{const u=Fy(a);return nO(o,u).exists(f=>(nf(e,f),!0))})}else return!1},I9=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},F9=e=>Ys(Pr(e),Ic(e),(n,o)=>{const r=ad(!0,n),a=ad(!1,o);return Os(e,r).forall(u=>u.isEqual(a))}).getOr(!0),mP=(e,n)=>o=>nO(n,o).map(r=>()=>nf(e,r)),fP=(e,n,o,r)=>{const a=e.getBody(),u=ze(j0,e);e.undoManager.ignore(()=>{e.selection.setRng(I9(o,r)),NE(e),ig(u,a,Oe.fromRangeStart(e.selection.getRng())).map(Ly).bind(mP(e,n)).each(vr)}),e.nodeChanged()},L9=(e,n)=>{const o=Gm(n,e);return o||e},H9=(e,n,o,r)=>{const a=L9(e.getBody(),r.container()),u=ze(j0,e),f=ig(u,a,r);return f.bind(y=>o?y.fold(lt(L.some(Ly(y))),L.none,lt(L.some(Fy(y))),L.none):y.fold(L.none,lt(L.some(Fy(y))),L.none,lt(L.some(Ly(y))))).map(mP(e,n)).getOrThunk(()=>{const y=du(o,a,r),E=y.bind(R=>ig(u,a,R));return Ys(f,E,()=>qp(u,a,r).bind(R=>F9(R)?L.some(()=>{Z0(e,o,ne.fromDom(R))}):L.none())).getOrThunk(()=>E.bind(()=>y.map(R=>()=>{o?fP(e,n,r,R):fP(e,n,R,r)})))})},gO=(e,n,o)=>{if(e.selection.isCollapsed()&&Tp(e)){const r=Oe.fromRangeStart(e.selection.getRng());return H9(e,n,o,r)}return L.none()},z9=e=>wm(e)>1,gP=(e,n)=>{const o=ne.fromDom(e.getBody()),r=ne.fromDom(e.selection.getStart()),a=tg(r,o);return Hr(a,n).fold(lt(a),u=>a.slice(0,u))},V9=e=>wm(e)===1,U9=e=>gP(e,n=>e.schema.isBlock(Un(n))||z9(n)),W9=e=>gP(e,n=>e.schema.isBlock(Un(n))),hO=(e,n)=>{const o=ze(x_,e);return zr(n,r=>o(r)?[r.dom]:[])},hP=e=>{const n=W9(e);return hO(e,n)},Z9=(e,n,o,r)=>{const a=hO(n,r);if(a.length===0)Z0(n,e,o);else{const u=w_(o.dom,a);n.selection.setRng(u.toRange())}},j9=(e,n)=>{const o=Rt(U9(e),V9);return Us(o).bind(r=>{const a=Oe.fromRangeStart(e.selection.getRng());return o_(n,a,r.dom)&&!my(r)?L.some(()=>Z9(n,e,r,o)):L.none()})},G9=(e,n)=>{const o=n.parentElement;return As(n)&&!te(o)&&e.dom.isEmpty(o)},q9=e=>my(ne.fromDom(e)),pP=(e,n)=>{const o=e.selection.getStart(),r=G9(e,o)||q9(o)?w_(o,n):uS(e.selection.getRng(),n);e.selection.setRng(r.toRange())},K9=(e,n)=>{const o=ku(n,hP(e));o.length>0&&pP(e,o)},bP=e=>je(e.startContainer),vP=e=>e.startOffset===0&&bP(e),Y9=(e,n)=>{const o=n.startContainer.parentElement;return!te(o)&&x_(e,ne.fromDom(o))},X9=e=>{const n=e.startContainer.parentNode,o=e.endContainer.parentNode;return!te(n)&&!te(o)&&n.isEqualNode(o)},J9=e=>{const n=e.endContainer;return e.endOffset===(je(n)?n.length:n.childNodes.length)},Q9=e=>X9(e)&&J9(e),ez=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),tz=e=>Q9(e)||ez(e),nz=e=>{const n=e.selection.getRng();return vP(n)&&Y9(e,n)&&tz(n)},oz=e=>{if(nz(e)){const n=hP(e);return L.some(()=>{NE(e),K9(e,n)})}else return L.none()},pO=(e,n)=>e.selection.isCollapsed()?j9(e,n):oz(e),yP=(e,n)=>O1(e,o=>xi(o.dom),o=>n.isBlock(Un(o))),CP=e=>yP(ne.fromDom(e.selection.getStart()),e.schema),SP=e=>{const n=e.selection.getRng();return n.collapsed&&(bP(n)||e.dom.isEmpty(n.startContainer))&&!CP(e)},LT=e=>(SP(e)&&pP(e,[]),!0),HT=(e,n,o)=>De(o)?L.some(()=>{e._selectionOverrides.hideFakeCaret(),Z0(e,n,ne.fromDom(o))}):L.none(),sz=(e,n)=>{const o=n?XC:V0,a=$p(n?1:-1,e.getBody(),e.selection.getRng());return o(a)?HT(e,n,a.getNode(!n)):L.from(ad(n,a)).filter(u=>o(u)&&Zv(a,u)).bind(u=>HT(e,n,u.getNode(!n)))},wP=(e,n)=>{const o=e.selection.getNode();return Ji(o)?HT(e,n,o):L.none()},bO=(e,n)=>e.selection.isCollapsed()?sz(e,n):wP(e,n),rz=e=>Ca(e,n=>Xi(n.dom)||as(n.dom)).exists(n=>Xi(n.dom)),vO=e=>os(e??"").getOr(0),xP=(e,n)=>{const o=e||Z2(n)?"margin":"padding",r=_s(n,"direction")==="rtl"?"-right":"-left";return o+r},cz=(e,n,o,r,a,u)=>{const f=xP(o,ne.fromDom(u)),b=vO(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+a:"")}else{const y=b+r+a;e.setStyle(u,f,y)}},az=(e,n)=>An(n,o=>{const r=xP(Ep(e),o),a=Jh(o,r).map(vO).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),zT=e=>{const n=yO(e);return!e.mode.isReadOnly()&&(n.length>1||az(e,n))},VT=e=>gp(e)||vi(e),lz=e=>To(e).exists(VT),yO=e=>Rt(un(e.selection.getSelectedBlocks()),n=>!VT(n)&&!lz(n)&&rz(n)),EP=(e,n)=>{var o,r;if(e.mode.isReadOnly())return;const{dom:a}=e,u=jn(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=vO(u),y=Ep(e);_e(yO(e),E=>{cz(a,n,y,b,f,E.dom)})},iz=e=>EP(e,"indent"),TP=e=>EP(e,"outdent"),kP=e=>{if(e.selection.isCollapsed()&&zT(e)){const n=e.dom,o=e.selection.getRng(),r=Oe.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&G3(ne.fromDom(a),r,e.schema))return L.some(()=>TP(e))}return L.none()},_P=(e,n,o)=>la([kP,RT,Iy,(r,a)=>gO(r,n,a),NS,FE,BT,bO,Gl,pO,JA],r=>r(e,o)).filter(r=>e.selection.isEditable()),uz=(e,n)=>{_P(e,n,!1).fold(()=>{e.selection.isEditable()&&(NE(e),nS(e))},vr)},dz=(e,n)=>{_P(e,n,!0).fold(()=>{e.selection.isEditable()&&M5(e)},vr)},mz=(e,n)=>{e.addCommand("delete",()=>{uz(e,n)}),e.addCommand("forwardDelete",()=>{dz(e,n)})},AP=5,fz=400,UT=e=>e.touches===void 0||e.touches.length!==1?L.none():L.some(e.touches[0]),gz=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>AP||r>AP},hz=e=>{const n=Ur(),o=ns(!1),r=zi(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},fz);e.on("touchstart",a=>{UT(a).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:a.target};r.throttle(a),o.set(!1),n.set(f)})},!0),e.on("touchmove",a=>{r.cancel(),UT(a).each(u=>{n.on(f=>{gz(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},CO=(e,n)=>Kt(e,n.nodeName),pz=(e,n)=>je(n)?!0:ht(n)?!CO(e.getBlockElements(),n)&&!Ei(n)&&!fi(e,n)&&!A2(n):!1,bz=(e,n,o)=>vo(a5(ne.fromDom(o),ne.fromDom(n)),r=>CO(e,r.dom)),OP=(e,n)=>{if(je(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data))return!n.nextSibling||CO(e,n.nextSibling)||A2(n.nextSibling)}return!1},Nh=e=>e.dom.create(ta(e),f0(e)),DP=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,E=null;const R=ta(e);if(!u||!ht(u))return;const B=f.nodeName.toLowerCase();if(!r.isValidChild(B,R.toLowerCase())||bz(a,f,u))return;if(f.firstChild===f.lastChild&&As(f.firstChild)){b=Nh(e),b.appendChild(Hm().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let P=f.firstChild;for(;P;)if(ht(P)&&Yb(r,P),pz(r,P)){if(OP(a,P)){y=P,P=P.nextSibling,n.remove(y);continue}if(!b){if(!E&&e.hasFocus()&&(E=Dh(e.selection.getRng(),()=>document.createElement("span"))),!P.parentNode){P=null;break}b=Nh(e),f.insertBefore(b,P)}y=P,P=P.nextSibling,b.appendChild(y)}else b=null,P=P.nextSibling;E&&(e.selection.setRng(WB(E)),e.nodeChanged())},RP=(e,n,o)=>{const r=ne.fromDom(Nh(e)),a=Hm();Ts(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},vz=e=>{e.on("NodeChange",()=>DP(e))},MP=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,yz=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},Vy=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],yz(e,a,Nx(e)));o.content=a}},Cz=(e,n)=>An(e,o=>{const r=n.match(o);return r!==null&&r[0].length===n.length}),SO=e=>{const n="contenteditable",o=" "+Xe.trim(e3(e))+" ",r=" "+Xe.trim(Nx(e))+" ",a=MP(o),u=MP(r),f=Lv(e);f.length>0&&e.on("BeforeSetContent",b=>{Vy(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const E=b[y];a(E)?E.attr(n,"true"):u(E)&&E.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const E=b[y];if(!a(E)&&!u(E))continue;const R=E.attr("data-mce-content");f.length>0&&R?Cz(f,R)?(E.name="#text",E.type=3,E.raw=!0,E.value=R):E.remove():E.attr(n,null)}})},wO=e=>Uu(ne.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),NP=(e,n)=>{n.hasAttribute("data-mce-caret")&&(gv(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},BP=(e,n)=>{const o=wO(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),NP(e,o);return}Y1(o)&&(NP(e,o),e.undoManager.add())}},WT=e=>{e.on("keyup compositionstart",ze(BP,e))},PP=as,Sz=(e,n,o)=>sP(n,e,o,U0,W0,PP),wz=(e,n,o)=>rP(n,e,o,u=>U0(u)||W3(u),u=>W0(u)||c5(u),PP),xz=e=>{const n=e.dom.create(ta(e));return n.innerHTML='<br data-mce-bogus="1">',n},$P=(e,n,o)=>{const r=uu(e.getBody()),a=ze(DC,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(Oe.fromRangeStart(o))){const b=ne.fromDom(xz(e));n===1?Yr(ne.fromDom(u),b):Rr(ne.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},xO=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Sz(o,e,r).orThunk(()=>($P(e,o,r),L.none()))},Ez=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return wz(o,e,r).orThunk(()=>($P(e,o,r),L.none()))},Tz=(e,n)=>{const o=n?e.getEnd(!0):e.getStart(!0);return _5(o)?!n:n},IP=(e,n)=>xO(e,Tz(e.selection,n)).exists(o=>(Mh(e,o),!0)),FP=(e,n)=>Ez(e,n).exists(o=>(Mh(e,o),!0)),LP=(e,n)=>cP(e,n,n?W0:U0),ZT=(e,n)=>BS(e,!n).map(o=>{const r=o.toRange(),a=e.selection.getRng();return n?r.setStart(a.startContainer,a.startOffset):r.setEnd(a.endContainer,a.endOffset),r}).exists(o=>(Mh(e,o),!0)),kz=e=>Jt(["figcaption"],Un(e)),_z=(e,n,o)=>{const r=ze(On,n);return Ca(ne.fromDom(e.container()),a=>o.isBlock(Un(a)),r).filter(kz)},Az=(e,n,o)=>n?cO(e.dom,o):HS(e.dom,o),Oz=(e,n)=>{const o=ne.fromDom(e.getBody()),r=Oe.fromRangeStart(e.selection.getRng());return _z(r,o,e.schema).exists(()=>{if(Az(o,n,r)){const u=RP(e,o,n?Ts:zu);return e.selection.setRng(u),!0}else return!1})},HP=(e,n)=>e.selection.isCollapsed()?Oz(e,n):!1,Dz=(e,n,o)=>{const r=e.selection.getRng(),a=Oe.fromRangeStart(r);return e.getBody().firstChild===n&&HS(o,a)?(e.execCommand("InsertNewBlockBefore"),!0):!1},Rz=(e,n)=>{const o=e.selection.getRng(),r=Oe.fromRangeStart(o);return e.getBody().lastChild===n&&cO(n,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},Mz=(e,n)=>n?L.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>Rz(e,o)).getOr(!1):L.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>L.from(e.dom.getParent(o,"details")).map(r=>Dz(e,r,o))).getOr(!1),EO=(e,n)=>Mz(e,n),zP={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},Nz=e=>qt(e,n=>({...zP,...n})),Bz=e=>qt(e,n=>({...zP,...n})),VP=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,Pz=(e,n)=>zr(Nz(e),o=>VP(o,n)?[o]:[]),TO=(e,n)=>zr(Bz(e),o=>VP(o,n)?[o]:[]),ln=(e,...n)=>()=>e.apply(null,n),zS=(e,n)=>ts(Pz(e,n),o=>o.action()),UP=(e,n)=>la(TO(e,n),o=>o.action()),WP=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return sP(e,o,r,XC,V0,Ji).exists(a=>(Mh(e,a),!0))},ZP=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return rP(e,o,r,XC,V0,Ji).exists(a=>(Mh(e,a),!0))},jP=(e,n)=>cP(e,n,n?V0:XC),$z=(e,n)=>GP(e,n,ft),GP=(e,n,o)=>zr(ur(e),r=>ya(r,n)?o(r)?[r]:[]:GP(r,n,o)),Iz=(e,n,o=Pe)=>{if(o(n))return L.none();if(Jt(e,Un(n)))return L.some(n);const r=a=>ya(a,"table")||o(a);return Bg(n,e.join(","),r)},Fz=(e,n)=>Iz(["td","th"],e,n),Lz=e=>$z(e,"th,td"),qP=(e,n)=>Id(e,"table",n),KP=Vr.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),VS={...KP,none:e=>KP.none(e)},kO=(e,n,o,r,a=ft)=>{const u=r===1;if(!u&&o<=0)return VS.first(e[0]);if(u&&o>=e.length-1)return VS.last(e[e.length-1]);{const f=o+r,b=e[f];return a(b)?VS.middle(n,b):kO(e,n,f,r,a)}},YP=(e,n)=>qP(e,n).bind(o=>{const r=Lz(o);return Hr(r,u=>On(e,u)).map(u=>({index:u,all:r}))}),Hz=(e,n,o)=>YP(e,o).fold(()=>VS.none(e),a=>kO(a.all,e,a.index,1,n)),zz=(e,n,o)=>YP(e,o).fold(()=>VS.none(),a=>kO(a.all,e,a.index,-1,n)),XP=lc("image"),Vz=e=>{const n=e;return L.from(n[XP])},JP=(e,n)=>{const o=e;o[XP]=n},_O=lc("event"),Uz=e=>{const n=e;return L.from(n[_O])},US=e=>n=>{const o=n;o[_O]=e},Wz=(e,n)=>US(n)(e),QP=US(0),Zz=US(2),jz=US(1),t6=(e=>n=>{const o=n;return L.from(o[_O]).exists(r=>r===e)})(0),RG=()=>Object.freeze({length:0,item:e=>null}),fb=lc("mode"),MG=e=>{const n=e;return L.from(n[fb])},AO=e=>n=>{const o=n;o[fb]=e},Gz=(e,n)=>AO(n)(e),qz=AO(0),$i=AO(2),WS=AO(1),sm=e=>n=>{const o=n;return L.from(o[fb]).exists(r=>r===e)},hd=sm(0),jT=sm(1),n6=(e,n)=>({...n,get length(){return n.length},add:(o,r)=>{if(hd(e))if(ae(o)){if(!bs(r))return n.add(o,r)}else return n.add(o);return null},remove:o=>{hd(e)&&n.remove(o)},clear:()=>{hd(e)&&n.clear()}}),ZS=["none","copy","link","move"],Kz=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],GT=()=>{const e=new window.DataTransfer;let n="move",o="all";const r={get dropEffect(){return n},set dropEffect(a){Jt(ZS,a)&&(n=a)},get effectAllowed(){return o},set effectAllowed(a){t6(r)&&Jt(Kz,a)&&(o=a)},get items(){return n6(r,e.items)},get files(){return jT(r)?RG():e.files},get types(){return e.types},setDragImage:(a,u,f)=>{hd(r)&&(JP(r,{image:a,x:u,y:f}),e.setDragImage(a,u,f))},getData:a=>jT(r)?"":e.getData(a),setData:(a,u)=>{hd(r)&&e.setData(a,u)},clearData:a=>{hd(r)&&e.clearData(a)}};return qz(r),r},NG=e=>{const n=GT(),o=MG(e);return $i(e),QP(n),n.dropEffect=e.dropEffect,n.effectAllowed=e.effectAllowed,Vz(e).each(r=>n.setDragImage(r.image,r.x,r.y)),_e(e.types,r=>{r!=="Files"&&n.setData(r,e.getData(r))}),_e(e.files,r=>n.items.add(r)),Uz(e).each(r=>{Wz(n,r)}),o.each(r=>{Gz(e,r),Gz(n,r)}),n},Yz=e=>{const n=e.getData("text/html");return n===""?L.none():L.some(n)},Uy=(e,n)=>e.setData("text/html",n),o6=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),cr=(e,n)=>zr(n,o=>{const r=o6(Wd(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),Xz=(e,n,o)=>Ro(e,(r,a)=>r.fold(()=>L.some(a),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(a.x-n)+Math.abs(a.y-o));return L.some(b<f?a:u)}),L.none()),s6=(e,n,o,r,a)=>{const u=zo(ne.fromDom(o),"td,th,caption").map(b=>b.dom),f=Rt(cr(e,u),b=>n(b,a));return Xz(f,r,a).map(b=>b.cell)},Wy=e=>e.bottom,gb=e=>e.top,hb=(e,n)=>e.y<n,Jz=(e,n)=>e.y>n,Qz=ze(s6,Wy,hb),OO=ze(s6,gb,Jz),DO=(e,n)=>Ks(n.getClientRects()).bind(o=>Qz(e,o.left,o.top)).bind(o=>zy(lO(o),n)),r6=(e,n)=>Us(n.getClientRects()).bind(o=>OO(e,o.left,o.top)).bind(o=>zy(aO(o),n)),c6=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),eV=e=>e.breakType===ql.Wrap&&e.positions.length===0,tV=e=>e.breakType===ql.Br&&e.positions.length===1,qT=(e,n,o)=>{const r=e(n,o);return eV(r)||!As(o.getNode())&&tV(r)?!c6(e,n,r):r.breakAt.isNone()},nV=ze(qT,LS),oV=ze(qT,ug),sV=(e,n,o)=>{const r=Oe.fromRangeStart(n);return Jf(!e,o).exists(a=>a.isEqual(r))},rV=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return w0()&&sV(n,a,o)?(Oh(u,e,o,!n,!1).each(f=>{Mh(e,f)}),!0):!1},cV=(e,n,o)=>DO(n,o).orThunk(()=>Ks(o.getClientRects()).bind(r=>ub(YB(e,Oe.before(n)),r.left))).getOr(Oe.before(n)),RO=(e,n,o)=>r6(n,o).orThunk(()=>Ks(o.getClientRects()).bind(r=>ub(gd(e,Oe.after(n)),r.left))).getOr(Oe.after(n)),MO=(e,n)=>{const o=n.getNode(e);return Ld(o)?L.some(o):L.none()},aV=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Yr:Rr,a=RP(n,ne.fromDom(o),r);Mh(n,a)})},a6=(e,n,o)=>{const r=MO(!!n,o),a=n===!1;r.fold(()=>Mh(e,o.toRange()),u=>Jf(a,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Mh(e,o.toRange()),f=>aV(n,e,u)))},Zy=(e,n,o,r)=>{const a=e.selection.getRng(),u=Oe.fromRangeStart(a),f=e.getBody();if(!n&&nV(r,u)){const b=cV(f,o,u);return a6(e,n,b),!0}else if(n&&oV(r,u)){const b=RO(f,o,u);return a6(e,n,b),!0}else return!1},NO=(e,n,o)=>L.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>L.from(e.dom.getParent(r,"table")).map(a=>o(e,n,a,r))).getOr(!1),l6=(e,n)=>NO(e,n,rV),KT=(e,n)=>NO(e,n,Zy),lV=e=>{const n=kf.exact(e,0,e,0);return Lg(n)},BO=(e,n,o)=>o.fold(L.none,L.none,(r,a)=>tt(a).map(u=>lV(u)),r=>e.mode.isReadOnly()||!iV(r)?L.none():(e.execCommand("mceTableInsertRowAfter"),PO(e,n,r))),iV=e=>Ca(e,ys("table")).exists(Wu),PO=(e,n,o)=>BO(e,n,Hz(o,$O)),i6=(e,n,o)=>BO(e,n,zz(o,$O)),$O=e=>Wu(e)||np(e,u6),u6=e=>ii(e)&&Wu(e),IO=(e,n)=>{const o=["table","li","dl"],r=ne.fromDom(e.getBody()),a=b=>{const y=Un(b);return On(b,r)||Jt(o,y)},u=e.selection.getRng(),f=ne.fromDom(n?u.endContainer:u.startContainer);return Fz(f,a).map(b=>(qP(b,a).each(R=>{e.model.table.clearSelectedCells(R.dom)}),e.selection.collapse(!n),(n?PO:i6)(e,a,b).each(R=>{e.selection.setRng(R)}),!0)).getOr(!1)},d6=(e,n,o)=>{const r=Wn.os.isMacOS()||Wn.os.isiOS();zS([{keyCode:xt.RIGHT,action:ln(IP,e,!0)},{keyCode:xt.LEFT,action:ln(IP,e,!1)},{keyCode:xt.UP,action:ln(FP,e,!1)},{keyCode:xt.DOWN,action:ln(FP,e,!0)},...r?[{keyCode:xt.UP,action:ln(ZT,e,!1),metaKey:!0,shiftKey:!0},{keyCode:xt.DOWN,action:ln(ZT,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:xt.RIGHT,action:ln(l6,e,!0)},{keyCode:xt.LEFT,action:ln(l6,e,!1)},{keyCode:xt.UP,action:ln(KT,e,!1)},{keyCode:xt.DOWN,action:ln(KT,e,!0)},{keyCode:xt.UP,action:ln(KT,e,!1)},{keyCode:xt.UP,action:ln(EO,e,!1)},{keyCode:xt.DOWN,action:ln(EO,e,!0)},{keyCode:xt.RIGHT,action:ln(WP,e,!0)},{keyCode:xt.LEFT,action:ln(WP,e,!1)},{keyCode:xt.UP,action:ln(ZP,e,!1)},{keyCode:xt.DOWN,action:ln(ZP,e,!0)},{keyCode:xt.RIGHT,action:ln(uP,e,n,!0)},{keyCode:xt.LEFT,action:ln(uP,e,n,!1)},{keyCode:xt.RIGHT,ctrlKey:!r,altKey:r,action:ln(P9,e,n)},{keyCode:xt.LEFT,ctrlKey:!r,altKey:r,action:ln($9,e,n)},{keyCode:xt.UP,action:ln(HP,e,!1)},{keyCode:xt.DOWN,action:ln(HP,e,!0)}],o).each(a=>{o.preventDefault()})},uV=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||d6(e,n,o)})},of=(e,n)=>({container:e,offset:n}),YT=mo.DOM,jy=e=>n=>e===n?-1:0,jS=e=>n=>e.isBlock(n)||Jt(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",pb=(e,n,o)=>{if(je(e)&&n>=0)return L.some(of(e,n));{const r=su(YT);return L.from(r.backwards(e,n,jy(e),o)).map(a=>of(a.container,a.container.data.length))}},FO=(e,n,o)=>{if(je(e)&&n>=e.length)return L.some(of(e,n));{const r=su(YT);return L.from(r.forwards(e,n,jy(e),o)).map(a=>of(a.container,0))}},XT=(e,n,o)=>{if(!je(e))return L.none();const r=e.data;if(n>=0&&n<=r.length)return L.some(of(e,n));{const a=su(YT);return L.from(a.backwards(e,n,jy(e),o)).bind(u=>{const f=u.container.data;return XT(u.container,n+f.length,o)})}},LO=(e,n,o)=>{if(!je(e))return L.none();const r=e.data;if(n<=r.length)return L.some(of(e,n));{const a=su(YT);return L.from(a.forwards(e,n,jy(e),o)).bind(u=>LO(u.container,n-r.length,o))}},Gy=(e,n,o,r,a)=>{const u=su(e,jS(e));return L.from(u.backwards(n,o,r,a))},dV=e=>e.collapsed&&je(e.startContainer),mV=e=>Wa(e.toString().replace(/\u00A0/g," ")),a1=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,HO=(e,n)=>e.substring(n.length),m6=(e,n,o,r=!1)=>{let a;const u=o.charAt(0);for(a=n-1;a>=0;a--){const f=e.charAt(a);if(!r&&a1(f))return L.none();if(u===f&&ir(e,o,a,n))break}return L.some(a)},bb=(e,n,o,r=!1)=>{if(!dV(n))return L.none();const a={text:"",offset:0},u=(b,y,E)=>(a.text=E+a.text,a.offset+=y,m6(a.text,a.offset,o,r).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return Gy(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return L.none();const E=mV(y);return E.lastIndexOf(o)!==0?L.none():L.some({text:HO(E,o),range:y,trigger:o})})},f6=e=>e.nodeType===$u,zO=e=>e.nodeType===wr,VO=e=>{if(f6(e))return of(e,e.data.length);{const n=e.childNodes;return n.length>0?VO(n[n.length-1]):of(e,n.length)}},UO=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?UO(o[n],0):o.length>0&&zO(e)&&o.length===n?VO(o[o.length-1]):of(e,n)},fV=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return Gy(e,n.container,n.offset,(a,u)=>u===0?-1:u,r).filter(a=>{const u=a.container.data.charAt(a.offset-1);return!a1(u)}).isSome()},g6=e=>n=>{const o=UO(n.startContainer,n.startOffset);return!fV(e,o)},gV=(e,n,o)=>la(o.triggers,r=>bb(e,n,r)),hV=(e,n)=>{const o=n(),r=e.selection.getRng();return gV(e.dom,r,o).bind(a=>h6(e,n,a))},h6=(e,n,o,r={})=>{var a;const u=n(),b=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",y=Rt(u.lookupByTrigger(o.trigger),R=>o.text.length>=R.minChars&&R.matches.getOrThunk(()=>g6(e.dom))(o.range,b,o.text));if(y.length===0)return L.none();const E=Promise.all(qt(y,R=>R.fetch(o.text,R.maxResults,r).then(P=>({matchText:o.text,items:P,columns:R.columns,onAction:R.onAction,highlightOn:R.highlightOn}))));return L.some({lookupData:E,context:o})};var sf;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(sf||(sf={}));const GS=(e,n,o)=>e.stype===sf.Error?n(e.serror):o(e.svalue),pV=e=>{const n=[],o=[];return _e(e,r=>{GS(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},p6=(e,n)=>e.stype===sf.Error?{stype:sf.Error,serror:n(e.serror)}:e,bV=(e,n)=>e.stype===sf.Value?{stype:sf.Value,svalue:n(e.svalue)}:e,vV=(e,n)=>e.stype===sf.Value?n(e.svalue):e,yV=(e,n)=>e.stype===sf.Error?n(e.serror):e,b6=e=>({stype:sf.Value,svalue:e}),v6=e=>({stype:sf.Error,serror:e}),qa={fromResult:e=>e.fold(v6,b6),toResult:e=>GS(e,Fo.error,Fo.value),svalue:b6,partition:pV,serror:v6,bind:vV,bindError:yV,map:bV,mapError:p6,fold:GS},y6=e=>Ot(e)&&yr(e).length>100?" removed due to size":JSON.stringify(e,null,2),CV=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:lt("... (only showing first ten failures)")}]):e;return qt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},C6=(e,n)=>qa.serror([{path:e,getErrorInfo:n}]),S6=(e,n,o)=>C6(e,()=>'Could not find valid *required* value for "'+n+'" in '+y6(o)),SV=(e,n)=>C6(e,lt(n)),qS=e=>{const n=(r,a)=>qa.bindError(e(a),u=>SV(r,u)),o=lt("val");return{extract:n,toString:o}},Ka=qS(qa.svalue),wV=lt(Ka),qy=(e,n)=>qS(o=>{const r=typeof o;return e(o)?qa.svalue(o):qa.serror(`Expected type: ${n} but got: ${r}`)}),vb=qy(Bs,"number"),WO=qy(ae,"string"),Kl=qy(le,"function"),yb=()=>({tag:"required",process:{}}),w6=e=>({tag:"defaultedThunk",process:e}),x6=e=>w6(lt(e)),E6=()=>({tag:"option",process:{}}),xV=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),ZO=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},jO=(e,n)=>e.length>0?qa.svalue(Cr(n,_d.apply(void 0,e))):qa.svalue(n),JT=e=>A(qa.serror,Bl)(e),T6={consolidateObj:(e,n)=>{const o=qa.partition(e);return o.errors.length>0?JT(o.errors):jO(o.values,n)},consolidateArr:e=>{const n=qa.partition(e);return n.errors.length>0?JT(n.errors):qa.svalue(n.values)}},rf=(e,n,o,r)=>yo(n,o).fold(()=>S6(e,o,n),r),QT=(e,n,o,r)=>{const a=yo(e,n).getOrThunk(()=>o(e));return r(a)},EV=(e,n,o)=>o(yo(e,n)),e4=(e,n,o,r)=>{const a=yo(e,n).map(u=>u===!0?o(e):u);return r(a)},GO=(e,n,o,r,a)=>{const u=b=>a.extract(n.concat([r]),b),f=b=>b.fold(()=>qa.svalue(L.none()),y=>{const E=a.extract(n.concat([r]),y);return qa.map(E,L.some)});switch(e.tag){case"required":return rf(n,o,r,u);case"defaultedThunk":return QT(o,r,e.process,u);case"option":return EV(o,r,f);case"defaultedOptionThunk":return e4(o,r,e.process,f);case"mergeWithThunk":return QT(o,r,lt({}),b=>{const y=Cr(e.process(o),b);return u(y)})}},k6=(e,n,o)=>{const r={},a=[];for(const u of o)ZO(u,(f,b,y,E)=>{const R=GO(y,e,n,f,E);qa.fold(R,B=>{a.push(...B)},B=>{r[b]=B})},(f,b)=>{r[f]=b(n)});return a.length>0?qa.serror(a):qa.svalue(r)},_6=e=>({extract:(r,a)=>k6(r,a,e),toString:()=>`obj{
`+qt(e,a=>ZO(a,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),A6=e=>({extract:(r,a)=>{const u=qt(a,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return T6.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),TV=(e,n,o)=>{const r=n.extract([e],o);return qa.mapError(r,a=>({input:o,errors:a}))},kV=(e,n,o)=>qa.toResult(TV(e,n,o)),_V=e=>`Errors: 
`+CV(e.errors).join(`
`)+`

Input object: `+y6(e.input),t4=xV,O6=(e,n)=>t4(e,e,yb(),n),qO=e=>O6(e,WO),D6=e=>O6(e,Kl),AV=(e,n)=>t4(e,e,E6(),n),OV=e=>AV(e,Kl),R6=(e,n)=>t4(e,e,x6(n),wV()),n4=(e,n,o)=>t4(e,e,x6(n),o),o4=(e,n)=>n4(e,n,vb),M6=(e,n,o)=>n4(e,n,A6(o)),KO=qO("type"),N6=D6("fetch"),B6=D6("onAction"),YO=e=>R6("columns",e),P6=_6([KO,qO("trigger"),o4("minChars",1),YO(1),o4("maxResults",10),OV("matches"),N6,B6,M6("highlightOn",[],WO)]),$6=e=>kV("Autocompleter",P6,e),I6=()=>{const e={},n={},o={},r={},a={},u={},f={},b={},y={},E=(z,j)=>(Z,Y)=>{z[Z.toLowerCase()]={...Y,type:j}},R=(z,j)=>(Z,Y)=>{z[Z.toLowerCase()]={type:j,...Y}},B=(z,j)=>r[z.toLowerCase()]=j,P=(z,j)=>f[z.toLowerCase()]=j;return{addButton:E(e,"button"),addGroupToolbarButton:E(e,"grouptoolbarbutton"),addToggleButton:E(e,"togglebutton"),addMenuButton:E(e,"menubutton"),addSplitButton:E(e,"splitbutton"),addMenuItem:E(n,"menuitem"),addNestedMenuItem:E(n,"nestedmenuitem"),addToggleMenuItem:E(n,"togglemenuitem"),addAutocompleter:E(o,"autocompleter"),addContextMenu:E(a,"contextmenu"),addContextToolbar:E(u,"contexttoolbar"),addContextForm:R(u,"contextform"),addSidebar:E(b,"sidebar"),addView:E(y,"views"),addIcon:B,addContext:P,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:u,sidebars:b,views:y,contexts:f})}},DV=e=>{const n=e.ui.registry.getAll().popups,o=In(n,f=>$6(f).fold(b=>{throw new Error(_V(b))},Jo)),r=sl(Mo(o,f=>f.trigger)),a=df(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Rt(a,b=>b.trigger===f)}},RV=(e,n)=>{const o=zi(n.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27?(o.cancel(),n.cancelIfNecessary()):(a===38||a===40)&&o.cancel()},!0),e.on("remove",o.cancel)},s4=e=>{const n=Ur(),o=ns(!1),r=n.isSet,a=()=>{r()&&(Ok(e),o.set(!1),n.clear())},u=B=>{r()||n.set({trigger:B.trigger,matchLength:B.text.length})},f=No(()=>DV(e)),b=B=>n.get().map(P=>bb(e.dom,e.selection.getRng(),P.trigger,!0).bind(z=>h6(e,f,z,B))).getOrThunk(()=>hV(e,f)),y=B=>{b(B).fold(a,P=>{u(P.context),P.lookupData.then(z=>{n.get().map(j=>{const Z=P.context;j.trigger===Z.trigger&&(n.set({...j,matchLength:Z.text.length}),o.get()?(dC(e,{range:Z.range}),au(e,{lookupData:z})):(o.set(!0),dC(e,{range:Z.range}),Zm(e,{lookupData:z})))})})})},E=(B,P)=>{const z=B.compareBoundaryPoints(window.Range.START_TO_START,P),j=B.compareBoundaryPoints(window.Range.END_TO_END,P);return z>=0&&j<=0},R=()=>n.get().bind(({trigger:B})=>{const P=e.selection.getRng();return bb(e.dom,P,B,o.get()).filter(({range:z})=>E(P,z)).map(({range:z})=>z)});e.addCommand("mceAutocompleterReload",(B,P)=>{const z=Ot(P)?P.fetchOptions:{};y(z)}),e.addCommand("mceAutocompleterClose",a),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{R().each(B=>{dC(e,{range:B})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>R().isSome()),RV(e,{cancelIfNecessary:a,load:y})},KS=jr().browser.isSafari(),F6=e=>zm(ne.fromDom(e)),L6=(e,n)=>{var o;return e.startOffset===0&&e.endOffset===((o=n.textContent)===null||o===void 0?void 0:o.length)},r4=(e,n)=>L.from(e.getParent(n.container(),"details")),H6=(e,n)=>r4(e,n).isSome(),z6=(e,n)=>{const o=L.from(e.getParent(n.startContainer,"details")),r=L.from(e.getParent(n.endContainer,"details"));if(o.isSome()||r.isSome()){const a=o.bind(u=>L.from(e.select("summary",u)[0]));return L.some({startSummary:a,startDetails:o,endDetails:r})}else return L.none()},V6=(e,n)=>Pr(n).exists(o=>o.isEqual(e)),MV=(e,n)=>Ic(n).exists(o=>As(o.getNode())&&fa(n,o).exists(r=>r.isEqual(e))||o.isEqual(e)),NV=(e,n)=>n.startSummary.exists(o=>V6(e,o)),BV=(e,n)=>n.startSummary.exists(o=>MV(e,o)),PV=(e,n)=>n.startDetails.exists(o=>fa(o,e).forall(r=>n.startSummary.exists(a=>!a.contains(e.container())&&a.contains(r.container())))),$V=(e,n,o)=>o.startDetails.exists(r=>Os(e,n).forall(a=>!r.contains(a.container()))),XO=(e,n)=>{const o=n.getNode();bs(o)||e.selection.setCursorLocation(o,n.offset())},IV=(e,n,o)=>{const r=e.dom.getParent(n.container(),"details");if(r&&!r.open){const a=e.dom.select("summary",r)[0];a&&(o?Pr(a):Ic(a)).each(f=>XO(e,f))}else XO(e,n)},FV=(e,n)=>{const o=y=>y.contains(e.startContainer),r=y=>y.contains(e.endContainer),a=n.startSummary.exists(o),u=n.startSummary.exists(r),f=n.startDetails.forall(y=>n.endDetails.forall(E=>y!==E));return(a||u)&&!(a&&u)||f},U6=(e,n,o)=>{const{dom:r,selection:a}=e,u=e.getBody();if(o==="character"){const f=Oe.fromRangeStart(a.getRng()),b=r.getParent(f.container(),r.isBlock),y=r4(r,f),E=b&&r.isEmpty(b),R=te(b==null?void 0:b.previousSibling),B=te(b==null?void 0:b.nextSibling);return E&&(n?B:R)&&du(!n,u,f).exists(j=>H6(r,j)&&!nt(y,r4(r,j)))?!0:du(n,u,f).fold(Pe,P=>{const z=r4(r,P);if(H6(r,P)&&!nt(y,z)){if(n||IV(e,P,!1),b&&E){if(n&&R)return!0;if(!n&&B)return!0;IV(e,P,n),e.dom.remove(b)}return!0}else return!1})}else return!1},LV=(e,n,o,r)=>{const u=e.selection.getRng(),f=Oe.fromRangeStart(u),b=e.getBody();return r==="selection"?FV(u,n):o?BV(f,n)||$V(b,f,n):NV(f,n)||PV(f,n)},HV=(e,n,o)=>z6(e.dom,e.selection.getRng()).fold(()=>U6(e,n,o),r=>LV(e,r,n,o)||U6(e,n,o)),zV=(e,n,o)=>{const r=e.selection,a=r.getNode(),u=r.getRng(),f=Oe.fromRangeStart(u);return rp(a)?(o==="selection"&&L6(u,a)||o_(n,f,a)?F6(a):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:y,anchorOffset:E,focusNode:R,focusOffset:B}=b??{};const P=()=>{De(y)&&De(E)&&De(R)&&De(B)&&(b==null||b.setBaseAndExtent(y,E,R,B))},z=()=>{y=b==null?void 0:b.anchorNode,E=b==null?void 0:b.anchorOffset,R=b==null?void 0:b.focusNode,B=b==null?void 0:b.focusOffset},j=(Y,oe)=>{_e(Y.childNodes,me=>{hh(me)&&oe.appendChild(me)})},Z=e.dom.create("span",{"data-mce-bogus":"1"});j(a,Z),a.appendChild(Z),P(),(o==="word"||o==="line")&&(b==null||b.modify("extend",n?"right":"left",o)),!r.isCollapsed()&&L6(r.getRng(),Z)?F6(a):(e.execCommand(n?"ForwardDelete":"Delete"),z(),j(Z,a),P()),e.dom.remove(Z)}),!0):!1},Cb=(e,n,o)=>HV(e,n,o)||KS&&zV(e,n,o)?L.some(wt):L.none(),W6=e=>(n,o,r={})=>{const a=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:wt,inputType:o},f=Bf(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},Ky=W6("input"),c4=W6("beforeinput"),Z6=jr(),j6=Z6.os,G6=j6.isMacOS()||j6.isiOS(),VV=Z6.browser.isFirefox(),UV=(e,n,o)=>{const r=o.keyCode===xt.BACKSPACE?"deleteContentBackward":"deleteContentForward",a=e.selection.isCollapsed(),u=a?"character":"selection",f=b=>a?b?"word":"line":"selection";UP([{keyCode:xt.BACKSPACE,action:ln(kP,e)},{keyCode:xt.BACKSPACE,action:ln(RT,e,!1)},{keyCode:xt.DELETE,action:ln(RT,e,!0)},{keyCode:xt.BACKSPACE,action:ln(Iy,e,!1)},{keyCode:xt.DELETE,action:ln(Iy,e,!0)},{keyCode:xt.BACKSPACE,action:ln(gO,e,n,!1)},{keyCode:xt.DELETE,action:ln(gO,e,n,!0)},{keyCode:xt.BACKSPACE,action:ln(FE,e,!1)},{keyCode:xt.DELETE,action:ln(FE,e,!0)},{keyCode:xt.BACKSPACE,action:ln(Cb,e,!1,u)},{keyCode:xt.DELETE,action:ln(Cb,e,!0,u)},...G6?[{keyCode:xt.BACKSPACE,altKey:!0,action:ln(Cb,e,!1,f(!0))},{keyCode:xt.DELETE,altKey:!0,action:ln(Cb,e,!0,f(!0))},{keyCode:xt.BACKSPACE,metaKey:!0,action:ln(Cb,e,!1,f(!1))}]:[{keyCode:xt.BACKSPACE,ctrlKey:!0,action:ln(Cb,e,!1,f(!0))},{keyCode:xt.DELETE,ctrlKey:!0,action:ln(Cb,e,!0,f(!0))}],{keyCode:xt.BACKSPACE,action:ln(BT,e,!1)},{keyCode:xt.DELETE,action:ln(BT,e,!0)},{keyCode:xt.BACKSPACE,action:ln(bO,e,!1)},{keyCode:xt.DELETE,action:ln(bO,e,!0)},{keyCode:xt.BACKSPACE,action:ln(Gl,e,!1)},{keyCode:xt.DELETE,action:ln(Gl,e,!0)},{keyCode:xt.BACKSPACE,action:ln(NS,e,!1)},{keyCode:xt.DELETE,action:ln(NS,e,!0)},{keyCode:xt.BACKSPACE,action:ln(pO,e,!1)},{keyCode:xt.DELETE,action:ln(pO,e,!0)},{keyCode:xt.BACKSPACE,action:ln(JA,e,!1)},{keyCode:xt.DELETE,action:ln(JA,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),c4(e,r).isDefaultPrevented()||(b(),Ky(e,r))})},WV=(e,n,o)=>zS([{keyCode:xt.BACKSPACE,action:ln(VB,e)},{keyCode:xt.DELETE,action:ln(VB,e)},...G6?[{keyCode:xt.BACKSPACE,altKey:!0,action:ln(LT,e)},{keyCode:xt.DELETE,altKey:!0,action:ln(LT,e)},...o?[{keyCode:VV?224:91,action:ln(LT,e)}]:[]]:[{keyCode:xt.BACKSPACE,ctrlKey:!0,action:ln(LT,e)},{keyCode:xt.DELETE,ctrlKey:!0,action:ln(LT,e)}]],n),ZV=(e,n)=>{let o=!1;e.on("keydown",r=>{o=r.keyCode===xt.BACKSPACE,r.isDefaultPrevented()||UV(e,n,r)}),e.on("keyup",r=>{r.isDefaultPrevented()||WV(e,r,o),o=!1})},jV=e=>{for(;e;){if(ht(e)||je(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Sb=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=jV(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Eo),n.firstChild)}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new bc(n,n);let f=n,b;for(;b=u.current();){if(je(b)){a.setStart(b,0),a.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){a.setStartBefore(b),a.setEndBefore(b);break}f=b,b=u.next()}b||(a.setStart(f,0),a.setEnd(f,0))}else As(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),H0(e,a)},YS=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";){if(e.getContentEditable(a)==="true"){r=a;break}a=a.parentNode}return a!==o?r:o},JO=e=>L.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),GV=e=>JO(e).fold(lt(""),n=>n.nodeName.toUpperCase()),a4=e=>JO(e).filter(n=>vi(ne.fromDom(n))).isSome(),QO=e=>{e.innerHTML='<br data-mce-bogus="1">'},qV=(e,n,o)=>{const r=e.dom;L.from(o.style).map(r.parseStyle).each(y=>{const R={...Mg(ne.fromDom(n)),...y};r.setStyles(n,R)});const a=L.from(o.class).map(y=>y.split(/\s+/)),u=L.from(n.className).map(y=>Rt(y.split(/\s+/),E=>E!==""));Ys(a,u,(y,E)=>{const R=Rt(E,P=>!Jt(y,P)),B=[...y,...R];r.setAttrib(n,"class",B.join(" "))});const f=["style","class"],b=nl(o,(y,E)=>!Jt(f,E));r.setAttribs(n,b)},Yy=(e,n)=>{if(ta(e).toLowerCase()===n.tagName.toLowerCase()){const r=f0(e);qV(e,n,r)}},l4=(e,n,o,r,a=!0,u,f)=>{const b=e.dom,y=e.schema,E=ta(e),R=o?o.nodeName.toUpperCase():"";let B=n;const P=y.getTextInlineElements();let z;u||R==="TABLE"||R==="HR"?z=b.create(u||E,f||{}):z=o.cloneNode(!1);let j=z;if(!a)b.setAttrib(z,"style",null),b.setAttrib(z,"class",null);else do if(P[B.nodeName]){if(xi(B)||Ei(B))continue;const Z=B.cloneNode(!1);b.setAttrib(Z,"id",""),z.hasChildNodes()?(Z.appendChild(z.firstChild),z.appendChild(Z)):(j=Z,z.appendChild(Z))}while((B=B.parentNode)&&B!==r);return Yy(e,z),QO(j),z},KV=(e,n)=>e.dom.getParent(n,tn),YV=(e,n,o)=>{let r=n;for(;r&&r!==e&&te(r.nextSibling);){const a=r.parentElement;if(!a||!o(a))return tn(a);r=a}return!1},HG=(e,n,o)=>!n&&o.nodeName.toLowerCase()===ta(e)&&e.dom.isEmpty(o)&&YV(e.getBody(),o,r=>Kt(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),XV=(e,n,o)=>{var r,a,u;const f=n(ta(e)),b=KV(e,o);b&&(e.dom.insertAfter(f,b),Sb(e,f),((u=(a=(r=o.parentElement)===null||r===void 0?void 0:r.childNodes)===null||a===void 0?void 0:a.length)!==null&&u!==void 0?u:0)>1&&e.dom.remove(o))},JV=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,QV=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},Xy=(e,n)=>{const o=e==null?void 0:e.parentNode;return De(o)&&o.nodeName===n},q6=e=>De(e)&&/^(OL|UL|LI)$/.test(e.nodeName),eD=e=>De(e)&&/^(LI|DT|DD)$/.test(e.nodeName),eU=e=>q6(e)&&q6(e.parentNode),XS=e=>{const n=e.parentNode;return eD(n)?n:e},cf=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!ht(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},Rl=e=>Ro(Mo(Mg(ne.fromDom(e)),(n,o)=>`${o}: ${n};`),(n,o)=>n+o,""),K6=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;eU(o)&&(a="LI");const y=eD(r)?Rl(r):void 0;let E=eD(r)&&y?n(a,{style:Rl(r)}):n(a);if(cf(o,r,!0)&&cf(o,r,!1))if(Xy(o,"LI")){const R=XS(o);u.insertAfter(E,R),QV(o)?u.remove(R):u.remove(o)}else u.replace(E,o);else if(cf(o,r,!0))Xy(o,"LI")?(u.insertAfter(E,XS(o)),E.appendChild(u.doc.createTextNode(" ")),E.appendChild(o)):b.insertBefore(E,o),u.remove(r);else if(cf(o,r,!1))u.insertAfter(E,XS(o)),u.remove(r);else{o=XS(o);const R=f.cloneRange();R.setStartAfter(r),R.setEndAfter(o);const B=R.extractContents();if(a==="LI"&&JV(B,"LI")){const P=Rt(qt(E.children,ne.fromDom),bo(ys("br")));E=B.firstChild,u.insertAfter(B,o),_e(P,z=>zu(ne.fromDom(E),z)),y&&E.setAttribute("style",y)}else u.insertAfter(B,o),u.insertAfter(E,o);u.remove(r)}Sb(e,E)},JS=e=>{_e(Am(ne.fromDom(e),qr),n=>{const o=n.dom;o.nodeValue=Wa(o.data)})},l1=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},dg=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),wb=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,tD=(e,n)=>e.nodeName===n||e.nextSibling&&e.nextSibling.nodeName===n,QS=(e,n)=>De(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.isEditable(n.parentNode)&&e.getContentEditable(n)!=="false",Y6=(e,n,o)=>{var r;const a=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;ht(u)&&!n[u.nodeName.toLowerCase()]&&a.push(u)}let f=a.length;for(;f--;)u=a[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||dg(e,u))&&e.remove(u)},i4=(e,n,o)=>je(n)?e?o===1&&n.data.charAt(o-1)===tc?0:o:o===n.data.length-1&&n.data.charAt(o)===tc?n.data.length:o:o,tU=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,i4(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,i4(!1,e.endContainer,e.endOffset)),n},nU=e=>{let n=e;do je(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},X6=(e,n,o,r,a)=>{var u,f;const b=e.dom,y=(u=YS(b,r))!==null&&u!==void 0?u:b.getRoot();let E=b.getParent(r,b.isBlock);if(!E||!QS(b,E)){if(E=E||y,!E.hasChildNodes()){const z=b.create(n);return Yy(e,z),E.appendChild(z),o.setStart(z,0),o.setEnd(z,0),z}let R=r;for(;R&&R.parentNode!==E;)R=R.parentNode;let B;for(;R&&!b.isBlock(R);)B=R,R=R.previousSibling;const P=(f=B==null?void 0:B.parentElement)===null||f===void 0?void 0:f.nodeName;if(B&&P&&e.schema.isValidChild(P,n.toLowerCase())){const z=B.parentNode,j=b.create(n);for(Yy(e,j),z.insertBefore(j,B),R=B;R&&!b.isBlock(R);){const Z=R.nextSibling;j.appendChild(R),R=Z}o.setStart(r,a),o.setEnd(r,a)}}return r},J6=(e,n)=>{n.normalize();const o=n.lastChild;(!o||ht(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},Q6=(e,n)=>{const o=Rv(e);return Rn(n)?!1:ae(o)?Jt(Xe.explode(o),n.nodeName.toLowerCase()):o},oU={insert:(e,n)=>{let o,r,a,u,f=!1;const b=e.dom,y=e.schema,E=y.getNonEmptyElements(),R=e.selection.getRng(),B=ta(e),P=ne.fromDom(R.startContainer),z=Dc(P,R.startOffset),j=z.exists(Le=>ii(Le)&&!Wu(Le)),Z=R.collapsed&&j,Y=(Le,gt)=>l4(e,o,Ze,Ie,Ci(e),Le,gt),oe=Le=>{const gt=i4(Le,o,r);if(je(o)&&(Le?gt>0:gt<o.data.length))return!1;if((o.parentNode===Ze||o===Ze)&&f&&!Le||Le&&ht(o)&&o===Ze.firstChild)return!0;if(wb(o,"TABLE")||wb(o,"HR"))return tD(o,"BR")?!Le:f&&!Le||!f&&Le;const $t=new bc(o,Ze);je(o)&&(Le&&gt===0?$t.prev():!Le&&gt===o.data.length&&$t.next());let kn;for(;kn=$t.current();){if(ht(kn)){if(!kn.getAttribute("data-mce-bogus")){const Dn=kn.nodeName.toLowerCase();if(E[Dn]&&Dn!=="br")return!1}}else if(je(kn)&&!Ss(kn.data))return!1;Le?$t.prev():$t.next()}return!0},me=()=>{let Le;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&pt!=="HGROUP"?Le=Y(B):Le=Y(),Q6(e,u)&&QS(b,u)&&b.isEmpty(Ze,void 0,{includeZwsp:!0})?Le=b.split(u,Ze):b.insertAfter(Le,Ze),Sb(e,Le),Le};CE(b,R).each(Le=>{R.setStart(Le.startContainer,Le.startOffset),R.setEnd(Le.endContainer,Le.endOffset)}),o=R.startContainer,r=R.startOffset;const ge=!!(n&&n.shiftKey),ve=!!(n&&n.ctrlKey);ht(o)&&o.hasChildNodes()&&!Z&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&je(o)?r=o.data.length:r=0);const Ie=YS(b,o);if(!Ie||l1(e,o))return;ge||(o=X6(e,B,R,o,r));let Ze=b.getParent(o,b.isBlock)||b.getRoot();u=De(Ze==null?void 0:Ze.parentNode)?b.getParent(Ze.parentNode,b.isBlock):null,a=Ze?Ze.nodeName.toUpperCase():"";const pt=u?u.nodeName.toUpperCase():"";if(pt==="LI"&&!ve){const Le=u;Ze=Le,u=Le.parentNode,a=pt}if(ht(u)&&HG(e,ge,Ze))return XV(e,Y,Ze);if(/^(LI|DT|DD)$/.test(a)&&ht(u)&&b.isEmpty(Ze)){K6(e,Y,u,Ze,B);return}if(!Z&&(Ze===e.getBody()||!QS(b,Ze)))return;const Ae=Ze.parentNode;let we;if(Z)we=Y(B),z.fold(()=>{Ts(P,ne.fromDom(we))},Le=>{Rr(Le,ne.fromDom(we))}),e.selection.setCursorLocation(we,0);else if(Tr(Ze))we=gv(Ze),b.isEmpty(Ze)&&QO(Ze),Yy(e,we),Sb(e,we);else if(oe(!1))we=me();else if(oe(!0)&&Ae){const Le=Oe.fromRangeStart(R),gt=c5(Le),$t=ne.fromDom(Ze),Dn=_E($t,Le,e.schema)?d5($t,Le,e.schema).bind(ko=>L.from(ko.getNode())):L.none();we=Ae.insertBefore(Y(),Ze);const oo=wb(Ze,"HR")||gt?we:Dn.getOr(Ze);Sb(e,oo)}else{const Le=tU(R).cloneRange();Le.setEndAfter(Ze);const gt=Le.extractContents();JS(gt),nU(gt),we=gt.firstChild,b.insertAfter(gt,Ze),Y6(b,E,we),J6(b,Ze),b.isEmpty(Ze)&&QO(Ze),we.normalize(),b.isEmpty(we)?(b.remove(we),me()):(Yy(e,we),Sb(e,we))}b.setAttrib(we,"id",""),e.dispatch("NewBlock",{newBlock:we})},fakeEventName:"insertParagraph"},VG=(e,n,o)=>{const r=new bc(n,o);let a;const u=e.getNonEmptyElements();for(;a=r.next();)if(u[a.nodeName.toLowerCase()]||je(a)&&a.length>0)return!0;return!1},pd=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),H0(e,r)},sU=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;CE(r,a).each(z=>{a.setStart(z.startContainer,z.startOffset),a.setEnd(z.endContainer,z.endOffset)});let b=a.startOffset,y=a.startContainer;if(ht(y)&&y.hasChildNodes()){const z=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,z&&je(y)?b=y.data.length:b=0}let E=r.getParent(y,r.isBlock);const R=E&&E.parentNode?r.getParent(E.parentNode,r.isBlock):null,B=R?R.nodeName.toUpperCase():"",P=!!(n&&n.ctrlKey);B==="LI"&&!P&&(E=R),je(y)&&b>=y.data.length&&(VG(e.schema,y,E||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),ed(r,a,u),pd(e,u,f),e.undoManager.add()},rU=(e,n)=>{const o=ne.fromTag("br");Rr(ne.fromDom(n),o),e.undoManager.add()},xb=(e,n)=>{cU(e.getBody(),n)||Yr(ne.fromDom(n),ne.fromTag("br"));const o=ne.fromTag("br");Yr(ne.fromDom(n),o),pd(e,o.dom,!1),e.undoManager.add()},e$=e=>As(e.getNode()),cU=(e,n)=>e$(Oe.after(n))?!0:Os(e,Oe.after(n)).map(o=>As(o.getNode())).getOr(!1),ew=e=>e&&e.nodeName==="A"&&"href"in e,nD=e=>e.fold(Pe,ew,ew,Pe),t$=e=>{const n=ze(j0,e),o=Oe.fromRangeStart(e.selection.getRng());return ig(n,e.getBody(),o).filter(nD)},n$=(e,n)=>{n.fold(wt,ze(rU,e),ze(xb,e),wt)},oD={insert:(e,n)=>{const o=t$(e);o.isSome()?o.each(ze(n$,e)):sU(e,n)},fakeEventName:"insertLineBreak"},sD=(e,n)=>JO(e).filter(o=>n.length>0&&ya(ne.fromDom(o),n)).isSome(),rD=e=>sD(e,fC(e)),lU=e=>sD(e,jm(e)),vu=Vr.generate([{br:[]},{block:[]},{none:[]}]),iU=(e,n)=>lU(e),o$=e=>(n,o)=>a4(n)===e,s$=(e,n)=>(o,r)=>GV(o)===e.toUpperCase()===n,uU=e=>{const n=YS(e.dom,e.selection.getStart());return Rn(n)},tw=e=>s$("pre",e),dU=()=>s$("summary",!0),nw=e=>(n,o)=>Lk(n)===e,mU=(e,n)=>rD(e),rm=(e,n)=>n,cD=e=>{const n=ta(e),o=YS(e.dom,e.selection.getStart());return De(o)&&e.schema.isValidChild(o.nodeName,n)},fU=e=>{const n=e.selection.getRng(),o=ne.fromDom(n.startContainer),a=Dc(o,n.startOffset).map(u=>ii(u)&&!Wu(u));return n.collapsed&&a.getOr(!0)},bd=(e,n)=>(o,r)=>Ro(e,(u,f)=>u&&f(o,r),!0)?L.some(n):L.none(),gU=(e,n)=>jB([bd([iU],vu.none()),bd([tw(!0),uU],vu.none()),bd([dU()],vu.br()),bd([tw(!0),nw(!1),rm],vu.br()),bd([tw(!0),nw(!1)],vu.block()),bd([tw(!0),nw(!0),rm],vu.block()),bd([tw(!0),nw(!0)],vu.br()),bd([o$(!0),rm],vu.br()),bd([o$(!0)],vu.block()),bd([mU],vu.br()),bd([rm],vu.br()),bd([cD],vu.block()),bd([fU],vu.block())],[e,!!(n&&n.shiftKey)]).getOr(vu.none()),Jy=(e,n,o)=>{n.mode.isReadOnly()||(n.selection.isCollapsed()||R5(n),!(De(o)&&c4(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),De(o)&&Ky(n,e.fakeEventName)))},u4=(e,n)=>{if(e.mode.isReadOnly())return;const o=()=>Jy(oD,e,n),r=()=>Jy(oU,e,n),a=gU(e,n);switch(Yt(e)){case"linebreak":a.fold(o,o,wt);break;case"block":a.fold(r,r,wt);break;case"invert":a.fold(r,o,wt);break;default:a.fold(o,r,wt);break}},aD=jr(),r$=aD.os.isiOS()&&aD.browser.isSafari(),lD=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),FL(e.undoManager),e.undoManager.transact(()=>{u4(e,n)}))},hU=e=>{if(!e.collapsed)return!1;const n=e.startContainer;if(je(n)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=n.data.charAt(e.startOffset-1);return o.test(r)}else return!1},ow=e=>{let n=L.none();const o=a=>{n=L.some(a.selection.getBookmark()),a.undoManager.add()},r=(a,u)=>{a.undoManager.undo(),n.fold(wt,f=>a.selection.moveToBookmark(f)),lD(a,u),n=L.none()};e.on("keydown",a=>{a.keyCode===xt.ENTER&&(r$&&hU(e.selection.getRng())?o(e):lD(e,a))}),e.on("keyup",a=>{a.keyCode===xt.ENTER&&n.each(()=>r(e,a))})},d4=(e,n,o)=>{const r=Wn.os.isMacOS()||Wn.os.isiOS();zS([{keyCode:xt.END,action:ln(LP,e,!0)},{keyCode:xt.HOME,action:ln(LP,e,!1)},...r?[]:[{keyCode:xt.HOME,action:ln(ZT,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:xt.END,action:ln(ZT,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:xt.END,action:ln(jP,e,!0)},{keyCode:xt.HOME,action:ln(jP,e,!1)},{keyCode:xt.END,action:ln(FT,e,!0,n)},{keyCode:xt.HOME,action:ln(FT,e,!1,n)}],o).each(a=>{o.preventDefault()})},c$=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||d4(e,n,o)})},a$=e=>{e.on("input",n=>{n.isComposing||AE(e)})},l$=jr(),i$=(e,n,o)=>{zS([{keyCode:xt.PAGE_UP,action:ln(FT,e,!1,n)},{keyCode:xt.PAGE_DOWN,action:ln(FT,e,!0,n)}],o)},sw=e=>e.stopImmediatePropagation(),m4=e=>e.keyCode===xt.PAGE_UP||e.keyCode===xt.PAGE_DOWN,Qy=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",sw,!0):!o&&e.get()&&n.off("NodeChange",sw),e.set(o)},pU=(e,n)=>{if(l$.os.isMacOS())return;const o=ns(!1);e.on("keydown",r=>{m4(r)&&Qy(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||i$(e,n,r),m4(r)&&o.get()&&(Qy(o,e,!1),e.nodeChanged())})},iD=(e,n)=>e===n||e.contains(n),bU=(e,n)=>!iD(e.getBody(),n.startContainer)||!iD(e.getBody(),n.endContainer)?!0:WR(e.dom,n),vU=e=>{e.on("beforeinput",n=>{(!e.selection.isEditable()||vo(n.getTargetRanges(),o=>!bU(e,o)))&&n.preventDefault()})},uD=(e,n)=>{const o=n.container(),r=n.offset();return je(o)?(o.insertData(r,e),L.some(Oe(o,r+e.length))):Wv(n).map(a=>{const u=ne.fromText(e);return n.isAtEnd()?Yr(a,u):Rr(a,u),Oe(u.dom,e.length)})},u$=ze(uD,Eo),dD=ze(uD," "),WG=(e,n,o)=>J3(e,n,o)?u$(n):dD(n),yU=e=>n=>n.fold(o=>fa(e.dom,Oe.before(o)),o=>Pr(o),o=>Ic(o),o=>Os(e.dom,Oe.after(o))),CU=(e,n,o)=>r=>J3(e,r,o)?u$(n):dD(n),d$=e=>n=>{e.selection.setRng(n.toRange()),e.nodeChanged()},SU=(e,n)=>e.isEditable(e.getParent(n,"summary")),wU=e=>{const n=Oe.fromRangeStart(e.selection.getRng()),o=ne.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=ze(j0,e),a=Oe.fromRangeStart(e.selection.getRng());return ig(r,e.getBody(),a).bind(yU(o)).map(u=>()=>CU(o,n,e.schema)(u).each(d$(e)))}else return L.none()},xU=e=>{const n=()=>{const o=ne.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Oe.fromRangeStart(e.selection.getRng());WG(o,r,e.schema).each(d$(e))};return uo(Wn.browser.isFirefox()&&e.selection.isEditable()&&SU(e.dom,e.selection.getRng().startContainer),n)},EU=(e,n)=>{UP([{keyCode:xt.SPACEBAR,action:ln(wU,e)},{keyCode:xt.SPACEBAR,action:ln(xU,e)}],n).each(o=>{n.preventDefault(),c4(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Ky(e,"insertText",{data:" "}))})},mD=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||EU(e,n)})},TU=e=>n3(e)?[{keyCode:xt.TAB,action:ln(IO,e,!0)},{keyCode:xt.TAB,shiftKey:!0,action:ln(IO,e,!1)}]:[],i1=(e,n)=>{zS([...TU(e)],n).each(o=>{n.preventDefault()})},m$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||i1(e,n)})},fD=e=>{if(e.addShortcut("Meta+P","","mcePrint"),s4(e),lg(e))return ns(null);{const n=B9(e);return vU(e),WT(e),uV(e,n),ZV(e,n),ow(e),mD(e),a$(e),m$(e),c$(e,n),pU(e,n),n}};class f${constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!GC(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{sa(n),n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);a&&ay(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&ay(n)&&(n.selection.getNode().nodeName==="IMG"?Ai.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor,r=o.selection;let a;if(o.initialized&&r&&!Gk(o)&&!Rp(o)){const u=o.getBody();a=r.getStart(!0)||u,(a.ownerDocument!==o.getDoc()||!o.dom.isChildOf(a,u))&&(a=u);const f=[];o.dom.getParent(a,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...n,element:a,parents:f})}}isSameElementPath(n){let o;const r=this.editor,a=$o(r.dom.getParents(n,ft,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const f4="x-tinymce/html",af=lt(f4),g4="<!-- "+f4+" -->",vd=e=>g4+e,Eb=e=>e.replace(g4,""),gD=e=>e.indexOf(g4)!==-1,hD=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),kU=(e,n)=>{let o="<"+e;const r=Mo(n,(a,u)=>u+'="'+Vo.encodeAllRaw(a)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},g$=(e,n,o)=>{const r=e.split(/\n\n/),a=kU(n,o),u="</"+n+">",f=qt(r,y=>y.split(/\n/).join("<br />")),b=y=>a+y+u;return f.length===1?f[0]:qt(f,b).join("")},h$="%MCEPASTEBIN%",_U=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},h$);Wn.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},AU=(e,n)=>{const o=e.dom;if(pD(e)){let r;const a=n.get();for(;r=pD(e);)o.remove(r),o.unbind(r);a&&e.selection.setRng(a)}n.set(null)},pD=e=>e.dom.get("mcepastebin"),OU=e=>De(e)&&e.id==="mcepastebin",p$=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...a]=Rt(e.getBody().childNodes,OU);_e(a,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},b$=e=>e===h$,DU=e=>{const n=ns(null);return{create:()=>_U(e,n),remove:()=>AU(e,n),getEl:()=>pD(e),getHtml:()=>p$(e),getLastRng:n.get}},Tb=(e,n)=>(Xe.each(n,o=>{en(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),h4=e=>{const n=Xc(),o=ob({},n);let r="";const a=n.getVoidElements(),u=Xe.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const E=y.name,R=y;if(E==="br"){r+=`
`;return}if(E!=="wbr"){if(a[E]&&(r+=" "),u[E]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let B=y.firstChild;if(B)do b(B);while(B=B.next)}f[E]&&R.next&&(r+=`
`,E==="p"&&(r+=`
`))}};return e=Tb(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},bD=e=>(e=Tb(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":Eo],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),v$=e=>{let n=0;return()=>e+n++},vD=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Xe.hasOwn(o,n)?"image/"+o[n]:"image/"+n},RU=(e,n)=>{const o=ob({sanitize:Yf(e),sandbox_iframes:Op(e),sandbox_iframes_exclusions:Dp(e),convert_unsafe_embeds:Hv(e)},e.schema);o.addNodeFilter("meta",a=>{Xe.each(a,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Sh({validate:!0},e.schema).serialize(r)},y$=(e,n)=>({content:e,cancelled:n}),MU=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=Dk(e,r,o);return y$(a.node.innerHTML,a.isDefaultPrevented())},C$=(e,n,o)=>{const r=mC(e,n,o),a=RU(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?MU(e,a,o):y$(a,r.isDefaultPrevented())},p4=(e,n,o)=>C$(e,n,o),b4=(e,n)=>(e.insertContent(n,{merge:S0(e),paste:!0}),!0),e2=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),NU=(e,n)=>e2(n)&&vo($x(e),o=>Hi(n.toLowerCase(),`.${o.toLowerCase()}`)),S$=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),BU=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),PU=(e,n,o)=>!e.selection.isCollapsed()&&e2(n)?BU(e,n,o):!1,$U=(e,n,o)=>NU(e,n)?S$(e,n,o):!1,w$=(e,n)=>{Xe.each([PU,$U,b4],o=>!o(e,n,b4))},IU=(e,n,o)=>{o||!lh(e)?b4(e,n):w$(e,n)},FU=v$("mceclip"),x$=e=>{const n=GT();return Uy(n,e),$i(n),n},t2=(e,n,o,r,a)=>{const u=p4(e,n,o);if(!u.cancelled){const f=u.content,b=()=>IU(e,f,r);a?c4(e,"insertFromPaste",{dataTransfer:x$(f)}).isDefaultPrevented()||(b(),Ky(e,"insertFromPaste")):b()}},v4=(e,n,o,r)=>{const a=o||gD(n);t2(e,Eb(n),a,!1,r)},y4=(e,n,o)=>{const r=e.dom.encode(n).replace(/\r\n/g,`
`),a=Mc(r,Rx(e)),u=g$(a,ta(e),f0(e));t2(e,u,!1,!0,o)},yD=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Bh=(e,n)=>n in e&&e[n].length>0,C4=e=>Bh(e,"text/html")||Bh(e,"text/plain"),E$=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return De(o)?e.dom.encode(o[1]):void 0},LU=(e,n,o,r)=>{const a=FU(),u=g0(e)&&De(o.name),f=u?E$(e,o.name):a,b=u?o.name:void 0,y=n.create(a,o,r,f,b);return n.add(y),y},T$=(e,n)=>{XE(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),E=y??LU(e,b,f,u);v4(e,`<img src="${E.blobUri()}">`,!1,!0)})},HU=e=>e.type==="paste",zU=e=>Promise.all(qt(e,n=>FM(n).then(o=>({file:n,uri:o})))),VU=e=>{const n=$x(e);return o=>Ps(o.type,"image/")&&vo(n,r=>vD(r)===o.type)},CD=(e,n)=>{const o=n.items?zr(lr(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?lr(n.files):[];return Rt(o.length>0?o:r,VU(e))},k$=(e,n,o)=>{const r=HU(n)?n.clipboardData:n.dataTransfer;if(y0(e)&&r){const a=CD(e,r);if(a.length>0)return n.preventDefault(),zU(a).then(u=>{o&&e.selection.setRng(o),_e(u,f=>{T$(e,f)})}),!0}return!1},UU=e=>{var n,o;return Wn.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},S4=e=>xt.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,SD=(e,n,o,r,a)=>{let u=bD(o);const f=Bh(n,af())||gD(o),b=!f&&hD(u),y=e2(u);(b$(u)||!u.length||b&&!y)&&(r=!0),(r||y)&&(Bh(n,"text/plain")&&b?u=n["text/plain"]:u=h4(u)),!b$(u)&&(r?y4(e,u,a):v4(e,u,f,a))},wD=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{S4(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||UU(u))return;const f=o.get()==="text"||r;r=!1;const b=yD(u.clipboardData);!C4(b)&&k$(e,u,a())||(Bh(b,"text/html")?(u.preventDefault(),SD(e,b,b["text/html"],f,!0)):Bh(b,"text/plain")&&Bh(b,"text/uri-list")?(u.preventDefault(),SD(e,b,b["text/plain"],f,!0)):(n.create(),Ai.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),SD(e,b,y,f,!1)},0)))})},_$=e=>{const n=a=>Ps(a,"webkit-fake-url"),o=a=>Ps(a,"data:"),r=a=>{var u;return((u=a.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!y0(e)&&r(f))for(const b of a){const y=b.attr("src");ae(y)&&!b.attr("data-mce-object")&&y!==Wn.transparentSrc&&(n(y)||!Mx(e)&&o(y))&&b.remove()}})},A$=(e,n,o)=>{wD(e,n,o),_$(e)},O$=(e,n)=>{n.get()==="text"?(n.set("html"),fx(e,!1)):(n.set("text"),fx(e,!0)),e.focus()},WU=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{O$(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&v4(e,r.html,r.internal,!1),r.text&&y4(e,r.text,!1)})},ZU=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(af(),n),!0}catch{return!1}else return!1},D$=(e,n,o,r)=>{ZU(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},R$=e=>(n,o)=>{const{dom:r,selection:a}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=a.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),a.setRng(y),Ai.setEditorTimeout(e,()=>{a.setRng(b),r.remove(u),o()},0)},rw=e=>({html:vd(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),jU=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),M$=e=>!e.selection.isCollapsed()||jU(e),GU=e=>n=>{!n.isDefaultPrevented()&&M$(e)&&e.selection.isEditable()&&D$(n,rw(e),R$(e),()=>{if(Wn.browser.isChromium()||Wn.browser.isFirefox()){const o=e.selection.getRng();Ai.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},xD=e=>n=>{!n.isDefaultPrevented()&&M$(e)&&D$(n,rw(e),R$(e),wt)},qU=e=>{e.on("cut",GU(e)),e.on("copy",xD(e))},N$=(e,n)=>{var o,r;return fu.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},B$=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},P$=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},KU=e=>vo(e.files,n=>/^image\//.test(n.type)),YU=(e,n,o,r)=>{const a=e.getParent(o,f=>fi(n,f));if(!te(e.getParent(o,"summary")))return!0;if(a&&Kt(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!te(f.querySelector(a.nodeName.toLowerCase()))}else return!1},XU=e=>{e.on("input",n=>{const o=r=>te(r.querySelector("summary"));if(n.inputType==="deleteByDrag"){const r=Rt(e.dom.select("details"),o);_e(r,a=>{As(a.firstChild)&&a.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Hm().dom),a.prepend(u)})}})},JU=(e,n)=>{$v(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),y0(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&KU(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=N$(e,o);if(Rn(r))return;const a=yD(o.dataTransfer),u=Bh(a,af());if((!C4(a)||B$(a))&&k$(e,o,r))return;const f=a[af()],b=f||a["text/html"]||a["text/plain"],y=YU(e.dom,e.schema,r.startContainer,a),E=n.get();E&&!y||b&&(o.preventDefault(),Ai.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||E&&y)&&e.execCommand("Delete"),P$(e,r);const R=bD(b);a["text/html"]?v4(e,R,u,!0):y4(e,R,!0)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{y0(e)&&!n.get()&&(o.preventDefault(),P$(e,N$(e,o))),o.type==="dragend"&&n.set(!1)}),XU(e)},QU=e=>{const n=a=>u=>{a(e,u)},o=CC(e);le(o)&&e.on("PastePreProcess",n(o));const r=Iv(e);le(r)&&e.on("PastePostProcess",n(r))},ED=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},eW=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,TD=e=>Xe.trim(e).replace(eW,H1).toLowerCase(),tW=(e,n,o)=>{const r=Dx(e);if(o||r==="all"||!Fv(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,E,R)=>{const B=u.parseStyle(u.decode(E)),P={};for(let j=0;j<a.length;j++){const Z=B[a[j]];let Y=Z,oe=u.getStyle(f,a[j],!0);/color/.test(a[j])&&(Y=TD(Y),oe=TD(oe)),oe!==Y&&(P[a[j]]=Z)}const z=u.serializeStyle(P,"span");return z?y+' style="'+z+'"'+R:y+R})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},nW=e=>{(Wn.browser.isChromium()||Wn.browser.isSafari())&&ED(e,tW)},oW=e=>{const n=ns(!1),o=ns(_p(e)?"text":"html"),r=DU(e);nW(e),WU(e,o),QU(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>o.get()==="text"),e.on("PreInit",()=>{qU(e),JU(e,n),A$(e,r,o)})},sW=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},rc=e=>{e.parser.addNodeFilter("details",n=>{const o=xC(e);_e(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",n=>{const o=EC(e);_e(n,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},rW=e=>{sW(e),rc(e)},cW=As,$$=je,I$=e=>as(e.dom),kD=e=>Xi(e.dom),_D=e=>n=>On(ne.fromDom(e),n),cw=(e,n,o)=>Ca(ne.fromDom(e),r=>kD(r)||o.isBlock(Un(r)),_D(n)).getOr(ne.fromDom(n)).dom,F$=(e,n)=>Ca(ne.fromDom(e),I$,_D(n)),L$=(e,n,o)=>{const r=new bc(e,n),a=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:a();f&&!cW(f);f=a())ru(f)&&(u=f);return u},aW=(e,n,o)=>{const a=Oe.fromRangeStart(e).getNode(),u=cw(a,n,o),f=L$(a,u,!1),b=L$(a,u,!0),y=document.createRange();return F$(f,u).fold(()=>{$$(f)?y.setStart(f,0):y.setStartBefore(f)},E=>y.setStartBefore(E.dom)),F$(b,u).fold(()=>{$$(b)?y.setEnd(b,b.data.length):y.setEndAfter(b)},E=>y.setEndAfter(E.dom)),y},lW=e=>{const n=aW(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(g_(n))},iW=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),lW(e))})};var n2;(function(e){e.Before="before",e.After="after"})(n2||(n2={}));const uW=(e,n)=>Math.abs(e.left-n),dW=(e,n)=>Math.abs(e.right-n),mW=(e,n)=>e>=n.top&&e<=n.bottom,fW=(e,n)=>e.top<n.bottom&&e.bottom>n.top,gW=(e,n)=>{const o=Q1(e,n)/Math.min(e.height,n.height);return fW(e,n)&&o>.5},hW=(e,n)=>{const o=Rt(e,r=>mW(n,r));return ex(o).fold(()=>[[],e],r=>{const{pass:a,fail:u}=gs(e,f=>gW(f,r));return[a,u]})},pW=(e,n)=>({node:e.node,position:uW(e,n)<dW(e,n)?n2.Before:n2.After}),bW=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),w4=(e,n,o,r)=>{const a=B=>ru(B.node)?L.some(B):ht(B.node)?w4(lr(B.node.childNodes),n,o,!1):L.none(),u=(B,P,z)=>a(P).filter(j=>Math.abs(z(B,n,o)-z(j,n,o))<2&&je(j.node)),f=(B,P)=>{const z=Io(B,(j,Z)=>P(j,n,o)-P(Z,n,o));return la(z,a).map(j=>r&&!je(j.node)&&z.length>1?u(j,z[1],P).getOr(j):j)},[b,y]=hW(mb(e),o),{pass:E,fail:R}=gs(y,B=>B.top<o);return f(b,bW).orThunk(()=>f(R,Vf)).orThunk(()=>f(E,Vf))},H$=(e,n,o,r)=>{const a=(u,f)=>{const b=E=>ht(E)&&E.classList.contains("mce-drag-container"),y=Rt(u.dom.childNodes,bo(b));return f.fold(()=>w4(y,o,r,!0),E=>{const R=Rt(y,B=>B!==E.dom);return w4(R,o,r,!0)}).orThunk(()=>(On(u,e)?L.none():Sm(u)).bind(R=>a(R,L.some(u))))};return a(n,L.none())},z$=(e,n,o)=>{const r=ne.fromDom(e),a=fl(r),f=ne.fromPoint(a,n,o).filter(b=>dl(r,b)).getOr(r);return H$(r,f,n,o)},V$=(e,n,o)=>z$(e,n,o).filter(r=>E0(r.node)).map(r=>pW(r,n)),U$=e=>{var n,o;const r=e.getBoundingClientRect(),a=e.ownerDocument,u=a.documentElement,f=a.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},vW=e=>e.inline?U$(e.getBody()):{left:0,top:0},yW=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},W$=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},a={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:a},CW=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=U$(e.getContentAreaContainer()),r=W$(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},Z$=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),SW=(e,n)=>Z$(vW(e),yW(e),CW(e,n)),AD=e=>({target:e,srcElement:e}),j$=(e,n,o,r)=>({...n,dataTransfer:r,type:e,...AD(o)}),wW=(e,n,o)=>{const r=br("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:wt,stopImmediatePropagation:wt,stopPropagation:wt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...AD(n)}},xW=(e,n)=>{const o=NG(e);return n==="dragstart"?(QP(o),qz(o)):n==="drop"?(Zz(o),$i(o)):(jz(o),WS(o)),o},EW=(e,n,o,r)=>{const a=xW(o,e);return bs(r)?wW(e,n,a):j$(e,r,n,a)},x4=32,G$=100,E4=8,T4=16,OD=as,TW=J2(OD,Xi),kW=(e,n,o)=>OD(o)&&o!==n&&e.isEditable(o.parentElement),q$=(e,n,o)=>Rn(n)||n===o||e.dom.isChildOf(n,o)?!1:e.dom.isEditable(n),_W=(e,n,o,r)=>{const a=e.dom,u=n.cloneNode(!0);a.setStyles(u,{width:o,height:r}),a.setAttrib(u,"data-mce-selected",null);const f=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),a.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},AW=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},k4=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},DD=k4("left",-x4),RD=k4("left",x4),K$=k4("top",-x4),Y$=k4("top",x4),OW=(e,n,o,r,a,u,f,b,y,E,R,B)=>{let P=0,z=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&(P=n.pageX+o-a),n.pageY+r>u&&(z=n.pageY+r-u),e.style.width=o-P+"px",e.style.height=r-z+"px";const j=y.clientHeight,Z=y.clientWidth,Y=f+y.getBoundingClientRect().top,oe=b+y.getBoundingClientRect().left;R.on(me=>{me.intervalId.clear(),me.dragging&&B&&(f+E4>=j?me.intervalId.set(Y$(E)):f-E4<=0?me.intervalId.set(K$(E)):b+E4>=Z?me.intervalId.set(RD(E)):b-E4<=0?me.intervalId.set(DD(E)):Y+T4>=window.innerHeight?me.intervalId.set(Y$(window)):Y-T4<=0?me.intervalId.set(K$(window)):oe+T4>=window.innerWidth?me.intervalId.set(RD(window)):oe-T4<=0&&me.intervalId.set(DD(window)))})},X$=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},DW=(e,n)=>{const o=e.getParent(n.parentNode,e.isBlock);X$(n),o&&o!==e.getRoot()&&e.isEmpty(o)&&zm(ne.fromDom(o))},RW=e=>e.button===0,MW=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),NW=(e,n)=>o=>{if(RW(o)){const r=ts(n.dom.getParents(o.target),TW).getOr(null);if(De(r)&&kW(n.dom,n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dataTransfer:GT(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:_W(n,r,r.offsetWidth,r.offsetHeight),intervalId:fm(G$)})}}},ZG=(e,n,o)=>{e._selectionOverrides.hideFakeCaret(),V$(e.getBody(),n,o).fold(()=>e.selection.placeCaretAt(n,o),r=>{const a=e._selectionOverrides.showCaret(1,r.node,r.position===n2.Before,!1);a?e.selection.setRng(a):e.selection.placeCaretAt(n,o)})},aw=(e,n,o,r,a)=>{n==="dragstart"&&Uy(r,e.dom.getOuterHTML(o));const u=EW(n,o,r,a);return e.dispatch(n,u)},_4=(e,n)=>{const o=uc((a,u)=>ZG(n,a,u),0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){const b=aw(n,"dragstart",u.element,u.dataTransfer,a);if(De(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=a.currentTarget===n.getDoc().documentElement,y=MW(u,SW(n,a));AW(u.ghost,n.getBody()),OW(u.ghost,y,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(a.clientX,a.clientY)}})},J$=e=>{const n=e.getSel();if(De(n)){const r=n.getRangeAt(0).startContainer;return je(r)?r.parentNode:r}else return null},Q$=(e,n)=>o=>{e.on(r=>{var a;if(r.intervalId.clear(),r.dragging){if(q$(n,J$(n.selection),r.element)){const u=(a=n.getDoc().elementFromPoint(o.clientX,o.clientY))!==null&&a!==void 0?a:n.getBody();aw(n,"drop",u,r.dataTransfer,o).isDefaultPrevented()||n.undoManager.transact(()=>{DW(n.dom,r.element),Yz(r.dataTransfer).each(b=>n.insertContent(b)),n._selectionOverrides.hideFakeCaret()})}aw(n,"dragend",n.getBody(),r.dataTransfer,o)}}),MD(e)},e8=(e,n,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>aw(n,"dragend",r.element,r.dataTransfer),a=>aw(n,"dragend",r.element,r.dataTransfer,a))}),MD(e)},t8=(e,n)=>o=>e8(e,n,L.some(o)),MD=e=>{e.on(n=>{n.intervalId.clear(),X$(n.ghost)}),e.clear()},BW=e=>{const n=Ur(),o=mo.DOM,r=document,a=NW(n,e),u=_4(n,e),f=Q$(n,e),b=t8(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===xt.ESC&&e8(n,e,L.none())})},PW=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&(Jt(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&AS(e,"Dropped file type is not supported"))}},o=a=>{gE(e,a.target)&&n(a)},r=()=>{const a=mo.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];_e(y,E=>{a.bind(f,E,o),u.bind(b,E,n)}),e.on("remove",()=>{_e(y,E=>{a.unbind(f,E,o),u.unbind(b,E,n)})})};e.on("init",()=>{Ai.setEditorTimeout(e,r,0)})},$W=e=>{BW(e),qk(e)&&PW(e)},n8=e=>{const n=uc(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=GA(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},IW=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ji(o)){const r=G0(e.getBody(),o),a=as(r)?r:o;e.selection.getNode()!==a&&OT(e,a).each(u=>e.selection.setRng(u))}})})},kb=as,o8=(e,n)=>G0(e.getBody(),n),FW=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=a3(e,r,o.isBlock,()=>I0(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=pt=>De(pt)&&o.hasClass(pt,"mce-offscreen-selection"),E=pt=>pt!==r&&(kb(pt)||Ji(pt))&&o.isChildOf(pt,r)&&o.isEditable(pt.parentNode),R=pt=>{pt&&n.setRng(pt)},B=(pt,Ae,we,Le=!0)=>e.dispatch("ShowCaret",{target:Ae,direction:pt,before:we}).isDefaultPrevented()?null:(Le&&n.scrollIntoView(Ae,pt===-1),a.show(we,Ae)),P=pt=>{pt.hasAttribute("data-mce-caret")&&(gv(pt),n.scrollIntoView(pt))},z=()=>{e.on("click",Ae=>{o.isEditable(Ae.target)||(Ae.preventDefault(),e.focus())}),e.on("blur NewBlock",ve),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",Ae=>{const we=Ae.target,Le=o8(e,we);kb(Le)?(Ae.preventDefault(),OT(e,Le).each(ge)):E(we)&&OT(e,we).each(ge)},!0),e.on("mousedown",Ae=>{const we=Ae.target;if(we!==r&&we.nodeName!=="HTML"&&!o.isChildOf(we,r)||!Ay(e,Ae.clientX,Ae.clientY))return;ve(),Ze();const Le=o8(e,we);kb(Le)?(Ae.preventDefault(),OT(e,Le).each(ge)):V$(r,Ae.clientX,Ae.clientY).each(gt=>{Ae.preventDefault();const $t=B(1,gt.node,gt.position===n2.Before,!1);R($t),ju(Le)?Le.focus():e.getBody().focus()})}),e.on("keypress",Ae=>{xt.modifierPressed(Ae)||kb(n.getNode())&&Ae.preventDefault()}),e.on("GetSelectionRange",Ae=>{let we=Ae.range;if(b){if(!b.parentNode){b=null;return}we=we.cloneRange(),we.selectNode(b),Ae.range=we}}),e.on("focusin",Ae=>{if(a.isShowing()&&e.getBody().contains(Ae.target)&&Ae.target!==e.getBody()&&!e.dom.isEditable(Ae.target.parentNode)){a.hide(),Ae.target.contains(e.selection.getNode())||(e.selection.select(Ae.target,!0),e.selection.collapse(!0));const we=ge(e.selection.getRng(),!0);we&&e.selection.setRng(we)}}),e.on("SetSelectionRange",Ae=>{Ae.range=Y(Ae.range);const we=ge(Ae.range,Ae.forward);we&&(Ae.range=we)});const pt=Ae=>ht(Ae)&&Ae.id==="mcepastebin";e.on("AfterSetSelectionRange",Ae=>{const we=Ae.range,Le=we.startContainer.parentElement;!Z(we)&&!pt(Le)&&Ze(),y(Le)||ve()}),$W(e),n8(e),IW(e)},j=pt=>gr(pt)||hp(pt)||fv(pt),Z=pt=>j(pt.startContainer)||j(pt.endContainer),Y=pt=>{const Ae=e.schema.getVoidElements(),we=o.createRng(),Le=pt.startContainer,gt=pt.startOffset,$t=pt.endContainer,kn=pt.endOffset;return Kt(Ae,Le.nodeName.toLowerCase())?gt===0?we.setStartBefore(Le):we.setStartAfter(Le):we.setStart(Le,gt),Kt(Ae,$t.nodeName.toLowerCase())?kn===0?we.setEndBefore($t):we.setEndAfter($t):we.setEnd($t,kn),we},oe=(pt,Ae)=>{const we=ne.fromDom(e.getBody()),Le=e.getDoc(),gt=Uu(we,"#"+u).getOrThunk(()=>{const Dn=ne.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Le);return dr(Dn,"id",u),Ts(we,Dn),Dn}),$t=o.createRng();Qs(gt),ui(gt,[ne.fromText(Eo,Le),ne.fromDom(Ae),ne.fromText(Eo,Le)]),$t.setStart(gt.dom.firstChild,1),$t.setEnd(gt.dom.lastChild,0),Rg(gt,{top:o.getPos(pt,e.getBody()).y+"px"}),Ln(gt);const kn=n.getSel();return kn&&(kn.removeAllRanges(),kn.addRange($t)),$t},me=pt=>{const Ae=pt.cloneNode(!0),we=e.dispatch("ObjectSelected",{target:pt,targetClone:Ae});if(we.isDefaultPrevented())return null;const Le=oe(pt,we.targetClone),gt=ne.fromDom(pt);return _e(zo(ne.fromDom(e.getBody()),`*[${f}]`),$t=>{On(gt,$t)||Zs($t,f)}),o.getAttrib(pt,f)||pt.setAttribute(f,"1"),b=pt,Ze(),Le},ge=(pt,Ae)=>{if(!pt)return null;if(pt.collapsed){if(!Z(pt)){const $t=Ae?1:-1,kn=$p($t,r,pt),Dn=kn.getNode(!Ae);if(De(Dn)){if(E0(Dn))return B($t,Dn,Ae?!kn.isAtEnd():!1,!1);if(Jc(Dn)&&as(Dn.nextSibling)){const ko=o.createRng();return ko.setStart(Dn,0),ko.setEnd(Dn,0),ko}}const oo=kn.getNode(Ae);if(De(oo)){if(E0(oo))return B($t,oo,Ae?!1:!kn.isAtEnd(),!1);if(Jc(oo)&&as(oo.previousSibling)){const ko=o.createRng();return ko.setStart(oo,1),ko.setEnd(oo,1),ko}}}return null}let we=pt.startContainer,Le=pt.startOffset;const gt=pt.endOffset;if(je(we)&&Le===0&&kb(we.parentNode)&&(we=we.parentNode,Le=o.nodeIndex(we),we=we.parentNode),!ht(we))return null;if(gt===Le+1&&we===pt.endContainer){const $t=we.childNodes[Le];if(E($t))return me($t)}return null},ve=()=>{b&&b.removeAttribute(f),Uu(ne.fromDom(e.getBody()),"#"+u).each(x),b=null},Ie=()=>{a.destroy(),b=null},Ze=()=>{a.hide()};return lg(e)||z(),{showCaret:B,showBlockCaretContainer:P,hideFakeCaret:Ze,destroy:Ie}},LW=(e,n)=>{let o=n;for(let r=e.previousSibling;je(r);r=r.previousSibling)o+=r.data.length;return o},ND=(e,n,o,r,a)=>{if(je(o)&&(r<0||r>o.data.length))return[];const u=a&&je(o)?[LW(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,a)),f=f.parentNode;return f===n?u.reverse():[]},BD=(e,n,o,r,a,u,f=!1)=>{const b=ND(e,n,o,r,f),y=ND(e,n,a,u,f);return{start:b,end:y}},s8=(e,n)=>{const o=n.slice(),r=o.pop();return Bs(r)?Ro(o,(u,f)=>u.bind(b=>L.from(b.childNodes[f])),L.some(e)).bind(u=>je(u)&&(r<0||r>u.data.length)?L.none():L.some({node:u,offset:r})):L.none()},r8=(e,n)=>s8(e,n.start).bind(({node:o,offset:r})=>s8(e,n.end).map(({node:a,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(a,u),f})),HW=(e,n,o,r=!1)=>BD(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),o2=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n,je(n.firstChild)&&Ss(n.firstChild.data)),o2(e,r,o)}},A4=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(je(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),je(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),o2(e,a,o),a!==u&&o2(e,u,o))},O4=(e,n)=>L.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),D4=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Tn(r).concat(e.blockPatterns),inlinePatterns:Pt(r).concat(e.inlinePatterns)}},PD=(e,n,o,r)=>{const a=e.createRng();return a.setStart(n,0),a.setEnd(o,r),a.toString()},R4=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),yd=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},$D=(e,n,o)=>{const r=r8(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?a:a.splitText(r.startOffset),y=b.parentNode,E=f.parentNode;return{prefix:n,end:E.insertBefore(R4(e,n+"-end"),f),start:y.insertBefore(R4(e,n+"-start"),b)}},ID=(e,n,o)=>{o2(e,e.get(n.prefix+"-end"),o),o2(e,e.get(n.prefix+"-start"),o)},FD=e=>e.start.length===0,M4=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},N4=(e,n,o,r)=>{const a=n.start;return Gy(e,r.container,r.offset,M4(a),o).bind(f=>{var b,y;const E=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(a))!==null&&y!==void 0?y:-1;if(E!==-1&&f.offset>=E+a.length){const B=e.createRng();return B.setStart(f.container,f.offset-a.length),B.setEnd(f.container,f.offset),L.some(B)}else{const B=f.offset-a.length;return XT(f.container,B,o).map(P=>{const z=e.createRng();return z.setStart(P.container,P.offset),z.setEnd(f.container,f.offset),z}).filter(P=>P.toString()===a).orThunk(()=>N4(e,n,o,of(f.container,0)))}})},c8=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),L.some(f)}return pb(o,r,a).bind(f=>N4(e,n,a,f).bind(y=>{var E;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return L.none();if(f.offset===0&&((E=y.endContainer.textContent)===null||E===void 0?void 0:E.length)===y.endOffset)return L.none()}return L.some(y)}))},a8=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return XT(b,y-o.pattern.end.length,n).bind(E=>{const R=BD(a,u,E.container,E.offset,b,y,r);if(FD(f))return L.some({matches:[{pattern:f,startRng:R,endRng:R}],position:E});{const B=B4(e,o.remainingPatterns,E.container,E.offset,n,r),P=B.getOr({matches:[],position:E}),z=P.position;return c8(a,f,z.container,z.offset,n,B.isNone()).map(Z=>{const Y=HW(a,u,Z,r);return{matches:P.matches.concat([{pattern:f,startRng:Y,endRng:R}]),position:of(Z.startContainer,Z.startOffset)}})}})},B4=(e,n,o,r,a,u)=>{const f=e.dom;return pb(o,r,f.getRoot()).bind(b=>{const y=PD(f,a,o,r);for(let E=0;E<n.length;E++){const R=n[E];if(!Hi(y,R.end))continue;const B=n.slice();B.splice(E,1);const P=a8(e,a,{pattern:R,remainingPatterns:B,position:b},u);if(P.isNone()&&r>0)return B4(e,n,o,r-1,a,u);if(P.isSome())return P}return L.none()})},l8=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?_e(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},zW=(e,n,o,r)=>{const a=yd(e.dom,o);A4(e.dom,a,r),l8(e,n,a)},VW=(e,n,o,r,a)=>{const u=e.dom,f=yd(u,r),b=yd(u,o);A4(u,b,a),A4(u,f,a);const y={prefix:o.prefix,start:o.end,end:r.start},E=yd(u,y);l8(e,n,E)},UW=(e,n)=>{const o=lc("mce_textpattern"),r=Ar(n,(a,u)=>{const f=$D(e,o+`_end${a.length}`,u.endRng);return a.concat([{...u,endMarker:f}])},[]);return Ar(r,(a,u)=>{const f=r.length-a.length-1,b=FD(u.pattern)?u.endMarker:$D(e,o+`_start${f}`,u.startRng);return a.concat([{...u,startMarker:b}])},[])},i8=e=>Io(e,(n,o)=>o.end.length-n.end.length),WW=(e,n)=>{const o=An(e,r=>vo(n,a=>r.pattern.start===a.pattern.start&&r.pattern.end===a.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},u8=(e,n,o,r,a,u)=>{const f=B4(e,a.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=B4(e,i8(a.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return WW(f,b)},ZW=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=UW(o,n);_e(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;FD(u.pattern)?zW(e,u.pattern,u.endMarker,b):VW(e,u.pattern,u.startMarker,u.endMarker,b),ID(o,u.endMarker,b),ID(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},P4=(e,n,o)=>FO(n,0,n).map(r=>{const a=r.container;return LO(a,o.start.length,n).each(u=>{const f=e.createRng();f.setStart(a,0),f.setEnd(u.container,u.offset),A4(e,f,b=>b===n)}),a}),d8=e=>(n,o)=>{const r=n.dom,a=o.pattern,u=r8(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,y)=>{const E=y.get(b);return $n(E)&&Ks(E).exists(R=>Kt(R,"block"))};return O4(n,u).each(b=>{a.type==="block-format"?f(a.format,n.formatter)&&n.undoManager.transact(()=>{e(n.dom,b,a),n.formatter.apply(a.format)}):a.type==="block-command"&&n.undoManager.transact(()=>{e(n.dom,b,a),n.execCommand(a.cmd,!1,a.value)})}),!0},jW=e=>Io(e,(n,o)=>o.start.length-n.start.length),m8=e=>(n,o)=>{const r=jW(n),a=o.replace(Eo," ");return ts(r,u=>e(u,o,a))},f8=(e,n)=>(o,r,a,u,f)=>{var b;f===void 0&&(f=(b=r.textContent)!==null&&b!==void 0?b:"");const y=o.dom,E=ta(o);return y.is(r,E)?e(a.blockPatterns,f).map(R=>n&&Xe.trim(f).length===R.start.length?[]:[{pattern:R,range:BD(y,y.getRoot(),r,0,r,0,u)}]).getOr([]):[]},GW=e=>/^\s[^\s]/.test(e),qW=d8((e,n,o)=>{P4(e,n,o).each(r=>{const a=ne.fromDom(r),u=_m(a);GW(u)&&w1(a,u.slice(1))})}),KW=m8((e,n,o)=>n.indexOf(e.start)===0||o.indexOf(e.start)===0),$4=f8(KW,!0),YW=(e,n)=>{const o=e.selection.getRng();return O4(e,o).map(r=>{var a;const u=Math.max(0,o.startOffset),f=D4(n,r,(a=r.textContent)!==null&&a!==void 0?a:""),b=u8(e,r,o.startContainer,u,f,!0),y=$4(e,r,f,!0);return{inlineMatches:b,blockMatches:y}}).filter(({inlineMatches:r,blockMatches:a})=>a.length>0||r.length>0)},XW=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();_e(n,r=>qW(e,r)),e.selection.moveToBookmark(o)},LD=d8(P4),HD=m8((e,n,o)=>n===e.start||o===e.start),JW=f8(HD,!1),QW=(e,n)=>{const o=e.selection.getRng();return O4(e,o).map(r=>{const a=Math.max(0,o.startOffset),u=PD(e.dom,r,o.startContainer,a),f=D4(n,r,u);return JW(e,r,f,!1,u)}).filter(r=>r.length>0)},g8=(e,n)=>{_e(n,o=>LD(e,o))},eZ=(e,n)=>YW(e,n).fold(Pe,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{K1(e),ZW(e,o),XW(e,r);const a=e.selection.getRng(),u=pb(a.startContainer,a.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Wr&&(b.deleteData(f.offset-1,1),o2(e.dom,b.parentNode,y=>y===e.dom.getRoot()))})}),!0)),tZ=(e,n)=>{const o=e.selection.getRng();O4(e,o).map(r=>{const a=Math.max(0,o.startOffset-1),u=PD(e.dom,r,o.startContainer,a),f=D4(n,r,u),b=u8(e,r,o.startContainer,a,f,!1);b.length>0&&e.undoManager.transact(()=>{ZW(e,b)})})},nZ=(e,n)=>QW(e,n).fold(Pe,o=>(e.undoManager.transact(()=>{g8(e,o)}),!0)),h8=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},oZ=(e,n)=>h8(e,n,(o,r)=>o===r.keyCode&&!xt.modifierPressed(r)),sZ=(e,n)=>h8(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),p8=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>oh(Jk(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),Qk(e)),a=()=>Bx(e);e.on("keydown",f=>{if(f.keyCode===13&&!xt.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=m0(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||a())&&eZ(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=m0(r(),"space");(b.blockPatterns.length>0||a())&&nZ(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=m0(r(),"space");(f.inlinePatterns.length>0||a())&&tZ(e,f)}};e.on("keyup",f=>{oZ(o,f)&&u()}),e.on("keypress",f=>{sZ(n,f)&&Ai.setEditorTimeout(e,u)})},I4=e=>{p8(e)},b8=e=>{const n=Xe.each,o=xt.BACKSPACE,r=xt.DELETE,a=e.dom,u=e.selection,f=e.parser,b=Wn.browser,y=b.isFirefox(),E=b.isChromium()||b.isSafari(),R=Wn.deviceType.isiPhone()||Wn.deviceType.isiPad(),B=Wn.os.isMacOS()||Wn.os.isiOS(),P=(Be,Ge)=>{try{e.getDoc().execCommand(Be,!1,String(Ge))}catch{}},z=Be=>Be.isDefaultPrevented(),j=()=>{const Be=Nt=>{const _n=a.create("body"),Pn=Nt.cloneContents();return _n.appendChild(Pn),u.serializer.serialize(_n,{format:"html"})},Ge=Nt=>{const _n=Be(Nt),Pn=a.createRng();Pn.selectNode(e.getBody());const fo=Be(Pn);return _n===fo};e.on("keydown",Nt=>{const _n=Nt.keyCode;if(!z(Nt)&&(_n===r||_n===o)&&e.selection.isEditable()){const Pn=e.selection.isCollapsed(),fo=e.getBody();if(Pn&&!Ku(e.schema,fo)||!Pn&&!Ge(e.selection.getRng()))return;Nt.preventDefault(),e.setContent(""),fo.firstChild&&a.isBlock(fo.firstChild)?e.selection.setCursorLocation(fo.firstChild,0):e.selection.setCursorLocation(fo,0),e.nodeChanged()}})},Z=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},Y=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",Be=>{let Ge;if(Be.target===e.getDoc().documentElement)if(Ge=u.getRng(),e.getBody().focus(),Be.type==="mousedown"){if(gr(Ge.startContainer))return;u.placeCaretAt(Be.clientX,Be.clientY)}else u.setRng(Ge)})},oe=()=>{e.on("keydown",Be=>{if(!z(Be)&&Be.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Ge=u.getNode(),Nt=Ge.previousSibling;if(Ge.nodeName==="HR"){a.remove(Ge),Be.preventDefault();return}Nt&&Nt.nodeName&&Nt.nodeName.toLowerCase()==="hr"&&(a.remove(Nt),Be.preventDefault())}}})},me=()=>{Range.prototype.getClientRects||e.on("mousedown",Be=>{if(!z(Be)&&Be.target.nodeName==="HTML"){const Ge=e.getBody();Ge.blur(),Ai.setEditorTimeout(e,()=>{Ge.focus()})}})},ge=()=>{const Be=Yk(e);e.on("click",Ge=>{const Nt=Ge.target;/^(IMG|HR)$/.test(Nt.nodeName)&&a.isEditable(Nt)&&(Ge.preventDefault(),e.selection.select(Nt),e.nodeChanged()),Nt.nodeName==="A"&&a.hasClass(Nt,Be)&&Nt.childNodes.length===0&&a.isEditable(Nt.parentNode)&&(Ge.preventDefault(),u.select(Nt))})},ve=()=>{const Be=Ge=>Ge.nodeName==="IMG"&&e.dom.isEditable(Ge);e.on("mousedown",Ge=>{Ys(L.from(Ge.clientX),L.from(Ge.clientY),(Nt,_n)=>{const Pn=e.getDoc().caretPositionFromPoint(Nt,_n);if(Pn&&Be(Pn.offsetNode)){const fo=Pn.offsetNode.getBoundingClientRect();Ge.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(Pn.offsetNode),Ge.clientX<fo.left||Ge.clientY<fo.top?e.selection.collapse(!0):(Ge.clientX>fo.right||Ge.clientY>fo.bottom)&&e.selection.collapse(!1)}})})},Ie=()=>{const Be=()=>{const Nt=a.getAttribs(u.getStart().cloneNode(!1));return()=>{const _n=u.getStart();_n!==e.getBody()&&(a.setAttrib(_n,"style",null),n(Nt,Pn=>{_n.setAttributeNode(Pn.cloneNode(!0))}))}},Ge=()=>!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock);e.on("keypress",Nt=>{let _n;return!z(Nt)&&(Nt.keyCode===8||Nt.keyCode===46)&&Ge()?(_n=Be(),e.getDoc().execCommand("delete",!1),_n(),Nt.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",Nt=>{if(!z(Nt)&&Ge()){const _n=Be();Ai.setEditorTimeout(e,()=>{_n()})}})},Ze=()=>{e.on("keydown",Be=>{if(!z(Be)&&Be.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Ge=u.getNode().previousSibling;if(Ge&&Ge.nodeName&&Ge.nodeName.toLowerCase()==="table")return Be.preventDefault(),!1}return!0})},pt=()=>{e.on("keydown",Be=>{if(z(Be)||Be.keyCode!==xt.BACKSPACE)return;let Ge=u.getRng();const Nt=Ge.startContainer,_n=Ge.startOffset,Pn=a.getRoot();let fo=Nt;if(!(!Ge.collapsed||_n!==0)){for(;fo.parentNode&&fo.parentNode.firstChild===fo&&fo.parentNode!==Pn;)fo=fo.parentNode;fo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,fo),Ge=a.createRng(),Ge.setStart(Nt,0),Ge.setEnd(Nt,0),u.setRng(Ge))}})},Ae=()=>{const Be=()=>{P("StyleWithCSS",!1),P("enableInlineTableEditing",!1),Zk(e)||P("enableObjectResizing",!1)};Pv(e)||e.on("BeforeExecCommand mousedown",Be)},we=()=>{const Be=()=>{n(a.select("a:not([data-mce-block])"),Ge=>{var Nt;let _n=Ge.parentNode;const Pn=a.getRoot();if((_n==null?void 0:_n.lastChild)===Ge){for(;_n&&!a.isBlock(_n);){if(((Nt=_n.parentNode)===null||Nt===void 0?void 0:Nt.lastChild)!==_n||_n===Pn)return;_n=_n.parentNode}a.add(_n,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Ge=>{(Ge.type==="setcontent"||Ge.command==="mceInsertLink")&&Be()})},Le=()=>{e.on("init",()=>{P("DefaultParagraphSeparator",ta(e))})},gt=Be=>{const Ge=Be.getBody(),Nt=Be.selection.getRng();return Nt.startContainer===Nt.endContainer&&Nt.startContainer===Ge&&Nt.startOffset===0&&Nt.endOffset===Ge.childNodes.length},$t=()=>{e.on("keyup focusin mouseup",Be=>{!xt.modifierPressed(Be)&&!gt(e)&&u.normalize()},!0)},kn=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Dn=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},oo=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Be=>{let Ge;Be.target.nodeName==="HTML"&&(Ge=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Ge),e.selection.normalize(),e.nodeChanged())}))},ko=()=>{B&&e.on("keydown",Be=>{xt.metaKeyPressed(Be)&&!Be.shiftKey&&(Be.keyCode===37||Be.keyCode===39)&&(Be.preventDefault(),e.selection.getSel().modify("move",Be.keyCode===37?"backward":"forward","lineboundary"))})},Ds=()=>{e.on("click",Be=>{let Ge=Be.target;do if(Ge.tagName==="A"){Be.preventDefault();return}while(Ge=Ge.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},cc=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Be=>{Be.preventDefault()})})},Tc=()=>{f.addNodeFilter("br",Be=>{let Ge=Be.length;for(;Ge--;)Be[Ge].attr("class")==="Apple-interchange-newline"&&Be[Ge].remove()})},st=wt,Bt=()=>{if(!y||e.removed)return!1;const Be=e.selection.getSel();return!Be||!Be.rangeCount||Be.rangeCount===0},Xn=()=>{E&&(Y(),ge(),cc(),Z(),R&&(Dn(),oo(),Ds())),y&&(me(),Ae(),kn(),ko())},so=()=>{pt(),j(),Wn.windowsPhone||$t(),E&&(Y(),ge(),Le(),cc(),Ze(),Tc(),R?(Dn(),oo(),Ds()):Z()),y&&(ve(),oe(),me(),Ie(),Ae(),we(),kn(),ko(),Ze())};return lg(e)?Xn():so(),{refreshContentEditable:st,isHidden:Bt}},v8=e=>e.toLowerCase()==="gpl",rZ=e=>e.length>=64&&e.length<=255,cZ=e=>v8(e)||rZ(e)?"VALID":"INVALID",F4=e=>{const n=Ix(e);!ae(o3(e))&&(bs(n)||cZ(n)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},zD=mo.DOM,y8=(e,n)=>{const o=ne.fromDom(e.getBody()),r=bl(pl(o)),a=ne.fromTag("style");dr(a,"type","text/css"),Ts(a,ne.fromText(n)),Ts(r,a),e.on("remove",()=>{x(a)})},aZ=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,L4=e=>nl(e,n=>bs(n)===!1),C8=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return L4({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_mathml_annotation_encodings:n("allow_mathml_annotation_encodings"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_unsafe_embeds:n("convert_unsafe_embeds"),convert_fonts_to_spans:n("convert_fonts_to_spans"),extended_mathml_attributes:n("extended_mathml_attributes"),extended_mathml_elements:n("extended_mathml_elements"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),inline_styles:n("inline_styles"),root_name:aZ(e),sandbox_iframes:n("sandbox_iframes"),sandbox_iframes_exclusions:Dp(e),sanitize:n("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},S8=e=>{const n=e.options.get;return L4({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},lZ=e=>{const n=e.options.get;return{...C8(e),...S8(e),...L4({remove_trailing_brs:n("remove_trailing_brs"),pad_empty_with_br:n("pad_empty_with_br"),url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},iZ=e=>{const n=ob(C8(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=a.serializeStyle(a.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),Ap(e)&&n.addNodeFilter("#cdata",o=>{var r;let a=o.length;for(;a--;){const u=o[a];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new _l("br",1))}}),n},uZ=e=>{const n=Ox(e);n&&Ai.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},s2=e=>{const n=e.dom.getRoot();!e.inline&&(!ay(e)||e.selection.getStart(!0)===n)&&Pr(n).each(o=>{const r=o.getNode(),a=Ld(r)?Pr(r).getOr(o):o;e.selection.setRng(a.toRange())})},dZ=e=>{e.bindPendingEventDelegates(),e.initialized=!0,dx(e),e.focus(!0),s2(e),e.nodeChanged({initial:!0});const n=Xk(e);le(n)&&n.call(e,e),uZ(e),tm(e)&&DS(e,!0)},VD=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,w8=(e,n,o)=>{const{pass:r,fail:a}=gs(n,b=>tinymce.Resource.has(MA(b))),f=[...r.map(b=>{const y=tinymce.Resource.get(MA(b));return ae(y)?Promise.resolve(VD(e).loadRawCss(b,y)):Promise.resolve()}),VD(e).loadAll(a)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},x8=e=>{const n=VD(e),o=gC(e),r=e.contentCSS,a=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let y="";Xe.each(e.contentStyles,E=>{y+=E+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(w8(e,r,o)).then(u).catch(u),b=Uk(e);return b&&y8(e,b),f},mZ=e=>{const n=e.getDoc(),o=e.getBody();ux(e),vC(e)||(n.body.spellcheck=!1,zD.setAttrib(o,"spellcheck","false")),e.quirks=b8(e),Av(e);const r=Wk(e);r!==void 0&&(o.dir=r);const a=yC(e);a&&e.on("BeforeSetContent",u=>{Xe.each(a,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},fZ=e=>{lg(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},H4=e=>{e.removed!==!0&&(fZ(e),dZ(e))},gZ=e=>{let n=!1;const o=setTimeout(()=>{n||e.setProgressState(!0)},500);return()=>{clearTimeout(o),n=!0,e.setProgressState(!1)}},E8=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(zD.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=Pv(e),e._editableRoot=ah(e),!Rp(e)&&e.hasEditableRoot()&&(e.inline&&zD.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=jH(e),e.schema=Xc(S8(e)),e.dom=mo(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:zn(e),referrerPolicy:Si(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=iZ(e),e.serializer=HN(lZ(e),e),e.selection=FN(e.dom,e.getWin(),e.serializer,e),e.annotator=eo(e),e.formatter=jo(e),e.undoManager=HA(e),e._nodeChangeDispatcher=new f$(e),e._selectionOverrides=FW(e),hz(e),rW(e),SO(e),lg(e)||(iW(e),I4(e));const a=fD(e);mz(e,a),vz(e),VA(e),oW(e);const u=XL(e);mZ(e),F4(e),u.fold(()=>{const f=gZ(e);x8(e).then(()=>{H4(e),f()})},f=>{e.setProgressState(!0),x8(e).then(()=>{f().then(b=>{e.setProgressState(!1),H4(e),fA(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),H4(e),fA(e)})})})},T8=mo.DOM,z4=(e,n,o,r)=>{const a=ne.fromTag("iframe");return r.each(u=>dr(a,"tabindex",u)),Gc(a,o),Gc(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Ao(a,"tox-edit-area__iframe"),a},hZ=e=>{let n=px(e)+"<html><head>";Pk(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=$k(e),r=Ik(e),a=e.translate(_x(e));return Fk(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Fk(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${a}"><br></body></html>`,n},pZ=(e,n)=>{const o=Wn.browser.isFirefox()?_x(e):"Rich Text Area",r=e.translate(o),a=gc(ne.fromDom(e.getElement()),"tabindex").bind(os),u=z4(e.id,r,Bk(e),a).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=u,e.iframeHTML=hZ(e),T8.add(n.iframeContainer,u)},bZ=e=>{const n=e.iframeElement,o=()=>{e.contentDocument=n.contentDocument,E8(e)};if(SC(e)||Wn.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=Ws(ne.fromDom(n),"load",()=>{r.unbind(),o()});n.srcdoc=e.iframeHTML}},vZ=(e,n)=>{pZ(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=T8.isHidden(n.editorContainer)),e.getElement().style.display="none",T8.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,bZ(e)},k8=mo.DOM,yZ=(e,n,o)=>{const r=sb.get(o),a=sb.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Xe.trim(o),r&&Xe.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,le(u.init)&&(u.init(e,a),n.push(o))}catch(u){TA(e,o,u)}}},CZ=e=>e.replace(/^\-/,""),SZ=e=>{const n=[];_e(qf(e),o=>{yZ(e,n,CZ(o))})},wZ=e=>{const n=Xe.trim(p0(e)),o=e.ui.registry.getAll().icons,r={..._y.get("default").icons,..._y.get(n).icons};at(r,(a,u)=>{Kt(o,u)||e.ui.registry.addIcon(u,a)})},xZ=e=>{const n=b0(e);if(ae(n)){const o=e1.get(n);e.theme=o(e,e1.urls[n])||{},le(e.theme.init)&&e.theme.init(e,e1.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},EZ=e=>{const n=Bv(e),o=Qp.get(n);e.model=o(e,Qp.urls[n])},TZ=e=>{const n=e.theme.renderUI;return n?n():UD(e)},kZ=e=>{const n=e.getElement(),r=b0(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},Go=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),_Z=e=>{const n=k8.create("div");return k8.insertAfter(n,e),Go(n,n)},UD=e=>{const n=e.getElement();return e.inline?Go(null):_Z(n)},AZ=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,ae(b0(e))?TZ(e):le(b0(e))?kZ(e):UD(e)},WD=(e,n)=>{const o={show:L.from(n.show).getOr(wt),hide:L.from(n.hide).getOr(wt),isEnabled:L.from(n.isEnabled).getOr(ft),setEnabled:r=>{r&&(e.mode.get()==="readonly"||tm(e))||L.from(n.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},_8=async e=>{e.dispatch("ScriptsLoaded"),wZ(e),xZ(e),EZ(e),SZ(e);const n=await AZ(e);WD(e,L.from(n.api).getOr({})),e.editorContainer=n.editorContainer,VH(e),e.inline?E8(e):vZ(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},_b=mo.DOM,A8=e=>e.charAt(0)==="-",OZ=(e,n)=>{const o=Gf(n),r=zk(n);if(!fr.hasCode(o)&&o!=="en"){const a=dn(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{rB(n,a,o)})}},O8=(e,n)=>{const o=b0(e);if(ae(o)&&!A8(o)&&!Kt(e1.urls,o)){const r=Nv(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;e1.load(o,a).catch(()=>{cB(e,a,o)})}},V4=(e,n)=>{const o=Bv(e);if(o!=="plugin"&&!Kt(Qp.urls,o)){const r=yx(e),a=ae(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Qp.load(o,a).catch(()=>{aB(e,a,o)})}},DZ=e=>L.from(xp(e)).filter(dn).map(n=>({url:n,name:L.none()})),D8=(e,n,o)=>L.from(n).filter(r=>dn(r)&&!_y.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:L.some(r)})),ZD=(e,n,o)=>{const r=D8(n,"default",o),a=DZ(n).orThunk(()=>D8(n,p0(n),""));_e(pg([r,a]),u=>{e.add(u.url).catch(()=>{sB(n,u.url,u.name.getOrUndefined())})})},RZ=(e,n)=>{const o=(r,a)=>{sb.load(r,a).catch(()=>{oB(e,a,r)})};at(kp(e),(r,a)=>{o(a,r),e.options.set("plugins",qf(e).concat(a))}),_e(qf(e),r=>{r=Xe.trim(r),r&&!sb.urls[r]&&!A8(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},MZ=e=>{const n=b0(e);return!ae(n)||De(e1.get(n))},NZ=e=>{const n=Bv(e);return De(Qp.get(n))},BZ=(e,n)=>{const o=Nr.ScriptLoader,r=()=>{!e.removed&&MZ(e)&&NZ(e)&&_8(e)};O8(e,n),V4(e,n),OZ(o,e),ZD(o,e,n),RZ(e,n),o.loadQueue().then(r,r)},R8=(e,n)=>N2.forElement(e,{contentCssCors:Tx(n),referrerPolicy:Si(n)}),PZ=e=>{const n=e.id;fr.setCode(Gf(e));const o=()=>{_b.unbind(window,"ready",o),e.render()};if(!Ju.Event.domLoaded){_b.bind(window,"ready",o);return}if(!e.getElement())return;const r=ne.fromDom(e.getElement()),a=on(r);e.on("remove",()=>{Da(r.dom.attributes,f=>Zs(r,f.name)),Gc(r,a)}),e.ui.styleSheetLoader=R8(r,e),Gn(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||_b.getParent(n,"form");u&&(e.formElement=u,wx(e)&&!Gb(e.getElement())&&(_b.insertAfter(_b.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},_b.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),v0(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=_S(e),e.notificationManager=eB(e),t3(e)&&e.on("GetContent",f=>{f.save&&(f.content=_b.encode(f.content))}),xx(e)&&e.on("submit",()=>{e.initialized&&e.save()}),ch(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),BZ(e,e.suffix)},$Z=(e,n)=>{e._editableRoot!==n&&(e._editableRoot=n,tm(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),Rk(e,n))},M8=e=>e._editableRoot,IZ=(e,n)=>({sections:lt(e),options:lt(n)}),jD=jr().deviceType,GD=jD.isPhone(),qD=jD.isTablet(),lw=e=>{if(Rn(e))return[];{const n=$n(e)?e:e.split(/[ ,]/),o=qt(n,ia);return Rt(o,dn)}},N8=(e,n)=>{const o=Et(n,(r,a)=>Jt(e,a));return IZ(o.t,o.f)},FZ=(e,n,o={})=>{const r=e.sections(),a=yo(r,n).getOr({});return Xe.extend({},o,a)},iw=(e,n)=>Kt(e.sections(),n),LZ=(e,n)=>iw(e,n)?e.sections()[n]:{},B8=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:yo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),HZ=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Xe.extend({},e.external_plugins,r):r},zZ=(e,n)=>[...lw(e),...lw(n)],VZ=(e,n,o,r)=>e&&iw(n,"mobile")?r:o,P8=(e,n,o,r)=>{const a=lw(o.forced_plugins),u=lw(r.plugins),f=LZ(n,"mobile"),b=f.plugins?lw(f.plugins):u,y=VZ(e,n,u,b),E=zZ(a,y);return Xe.extend(r,{forced_plugins:a,plugins:E})},UZ=(e,n)=>e&&iw(n,"mobile"),$8=(e,n,o,r,a)=>{var u;const f=e?{mobile:B8((u=a.mobile)!==null&&u!==void 0?u:{},n)}:{},b=N8(["mobile"],Cr(f,a)),y=Xe.extend(o,r,b.options(),UZ(e,b)?FZ(b,"mobile"):{},{external_plugins:HZ(r,b.options())});return P8(e,b,r,y)},U4=(e,n)=>{const o=_d(n);return $8(GD||qD,GD,o,e,o)},KD=(e,n)=>mH(e,n),YD=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{_e("left,center,right,justify".split(","),a=>{r!==a&&e.formatter.remove("align"+a)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},WZ=e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return vo(a,u=>De(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},ZZ=e=>{YD(e),WZ(e)},r2=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Wn.os.isMacOS()||Wn.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:a,type:"error"})}}})},jZ=(e,n,o,r)=>{const a=ne.fromDom(e.getRoot());return JC(a,Oe.fromRangeStart(n),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),QC(a,Oe.fromRangeEnd(n),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},c2=e=>{if(typeof e!="string"){const n=Xe.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},uw=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?jZ(r,o.getRng(),n,e.schema):n},W4=(e,n)=>{if(e.selection.isEditable()){const{content:o,details:r}=c2(n);J_(e,{...r,content:uw(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=uH(e,a.content,r);Q_(e,u,a),e.addVisual()})}},GZ=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{W4(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{W4(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{W4(e,r)},mceInsertContent:(n,o,r)=>{W4(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(C0(e))}})},a2={"font-size":"size","font-family":"face"},qZ=ys("font"),XD=(e,n,o)=>{const r=u=>Jh(u,e).orThunk(()=>qZ(u)?yo(a2,e).bind(f=>gc(u,f)):L.none()),a=u=>On(ne.fromDom(n),u);return _(ne.fromDom(o),u=>r(u),a)},KZ=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),I8=(e,n)=>L.from(mo.DOM.getStyle(n,e,!0)),JD=e=>(n,o)=>L.from(o).map(ne.fromDom).filter(Gr).bind(r=>XD(e,n,r.dom).or(I8(e,r.dom))).getOr(""),QD=JD("font-size"),F8=A(KZ,JD("font-family")),YZ=e=>Pr(e.getBody()).bind(n=>{const o=n.container();return L.from(je(o)?o.parentNode:o)}),XZ=e=>L.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?L.none():L.from(e.selection.getStart(!0))}),L8=(e,n)=>XZ(e).orThunk(ze(YZ,e)).map(ne.fromDom).filter(Gr).bind(n),eR=(e,n)=>L8(e,Xo(L.some,n)),tR=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=wC(e),a=Px(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},nR=e=>{const n=e.split(/\s*,\s*/);return qt(n,o=>o.indexOf(" ")!==-1&&!(Ps(o,'"')||Ps(o,"'"))?`'${o}'`:o).join(",")},H8=(e,n)=>{const o=tR(e,n);e.formatter.toggle("fontname",{value:nR(o)}),e.nodeChanged()},JZ=e=>eR(e,n=>F8(e.getBody(),n.dom)).getOr(""),QZ=(e,n)=>{e.formatter.toggle("fontsize",{value:tR(e,n)}),e.nodeChanged()},ej=e=>eR(e,n=>QD(e.getBody(),n.dom)).getOr(""),z8=e=>eR(e,n=>{const o=ne.fromDom(e.getBody()),r=_(n,u=>Jh(u,"line-height"),ze(On,o)),a=()=>{const u=parseFloat(_s(n,"line-height")),f=parseFloat(_s(n,"font-size"));return String(u/f)};return r.getOrThunk(a)}).getOr(""),oR=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},tj=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,a)=>{n(o,{value:a})},BackColor:(o,r,a)=>{n("hilitecolor",{value:a})},FontName:(o,r,a)=>{H8(e,a)},FontSize:(o,r,a)=>{QZ(e,a)},LineHeight:(o,r,a)=>{oR(e,a)},Lang:(o,r,a)=>{var u;n(o,{value:a.code,customValue:(u=a.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,a)=>{n(ae(a)?a:"p")},mceToggleFormat:(o,r,a)=>{n(a)}})},V8=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>JZ(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>ej(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>z8(e))},U8=e=>{tj(e),V8(e)},nj=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},W8=e=>{e.editorCommands.addCommands({Indent:()=>{iz(e)},Outdent:()=>{TP(e)}}),e.editorCommands.addCommands({Outdent:()=>zT(e)},"state")},oj=e=>{const n=(o,r,a)=>{if(e.mode.isReadOnly())return;const u=ae(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");Ot(u)&&ae(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:n,createLink:n})},sj=(e,n,o,r)=>{const a=e.dom,u=b=>a.isBlock(b)&&b.parentElement===o,f=u(n)?n:a.getParent(r,u,o);return L.from(f).map(ne.fromDom)},dw=(e,n)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),a=n?e.selection.getStart():e.selection.getEnd(),u=n?r.startContainer:r.endContainer,f=YS(o,u);if(!f||!f.isContentEditable)return;const b=n?Rr:Yr,y=ta(e);sj(e,a,f,u).each(E=>{const R=l4(e,u,E.dom,f,!1,y);b(E,ne.fromDom(R)),e.selection.setCursorLocation(R,0),e.dispatch("NewBlock",{newBlock:R}),Ky(e,"insertParagraph")})},rj=e=>dw(e,!0),cj=e=>dw(e,!1),Z8=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{rj(e)},InsertNewBlockAfter:()=>{cj(e)}})},j8=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Jy(oU,e)},mceInsertNewLine:(n,o,r)=>{u4(e,r)},InsertLineBreak:(n,o,r)=>{Jy(oD,e)}})},aj=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>ht(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Xi);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},lj=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r??e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{Yj(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},ij=e=>{ZZ(e),r2(e),nj(e),aj(e),GZ(e),oj(e),W8(e),Z8(e),j8(e),U8(e),lj(e)},uj=["toggleview"],G8=e=>Jt(uj,e.toLowerCase());class sR{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),b=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():$0(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const E=this.commands.exec[f];return le(E)?(E(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!G8(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return le(r)?r(o):!1}queryCommandValue(n){if(!G8(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return le(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;at(n,(a,u)=>{_e(u.toLowerCase().split(","),f=>{r[o][f]=a})})}addCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const dj=Xe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class rR{static isNative(n){return!!dj[n.toLowerCase()]}constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Pe}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),a=Pf(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),a.isImmediatePropagationStopped())return a;if(y.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=Pe),o){const u={func:o,removed:!1};a&&Xe.extend(u,a);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let E=this.bindings[y];E||(E=[],this.toggleEvent(y,!0)),r?E=[u,...E]:E=[...E,u],this.bindings[y]=E}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return at(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=gs(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,_e(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else at(this.bindings,(r,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const mw=e=>(e._eventDispatcher||(e._eventDispatcher=new rR({scope:e,toggleEvent:(n,o)=>{rR.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),cR={fire(e,n,o){return console.warn('The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',new Error().stack),this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return Pf(e.toLowerCase(),n??{},r);const a=mw(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},on(e,n,o){return mw(this).on(e,n,o)},off(e,n){return mw(this).off(e,n)},once(e,n){return mw(this).once(e,n)},hasEventListeners(e){return mw(this).has(e)}},Z4=mo.DOM;let Ab;const j4=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(n))return e.getDoc().documentElement;const o=vx(e);return o?(e.eventRoot||(e.eventRoot=Z4.select(o)[0]),e.eventRoot):e.getBody()},mj=e=>!e.hidden&&!tm(e),aR=(e,n,o)=>{mj(e)?e.dispatch(n,o):tm(e)&&RA(e,o)},lR=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=j4(e,n);if(vx(e)){if(Ab||(Ab={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Ab&&(at(Ab,(a,u)=>{e.dom.unbind(j4(e,u))}),Ab=null)})),Ab[n])return;const r=a=>{const u=a.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||Z4.isChildOf(u,y))&&aR(f[b],n,a)}};Ab[n]=r,Z4.bind(o,n,r)}else{const r=a=>{aR(e,n,a)};Z4.bind(o,n,r),e.delegates[n]=r}},q8={...cR,bindPendingEventDelegates(){const e=this;Xe.each(e._pendingNativeEvents,n=>{lR(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?lR(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(j4(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(at(e.delegates,(r,a)=>{e.dom.unbind(j4(e,a),a,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},fj=e=>ae(e)?{value:e.split(/[ ,]/),valid:!0}:bn(e,ae)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},gj=e=>{const n=(()=>{switch(e){case"array":return $n;case"boolean":return Sn;case"function":return le;case"number":return Bs;case"object":return Ot;case"string":return ae;case"string[]":return fj;case"object[]":return o=>bn(o,Ot);case"regexp":return o=>en(o,RegExp);default:return ft}})();return o=>G4(o,n,`The value must be a ${e}.`)},fw=e=>ae(e.processor),K8=(e,n)=>{const o=Xs(n.message)?"":`. ${n.message}`;return e+o},Y8=e=>e.valid,G4=(e,n,o="")=>{const r=n(e);return Sn(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},hj=(e,n,o)=>{if(!bs(n)){const r=G4(n,o);if(Y8(r))return r.value;console.error(K8(`Invalid default value passed for the "${e}" option`,r))}},pj=(e,n,o=n)=>{const r={},a={},u=(z,j,Z)=>{const Y=G4(j,Z);return Y8(Y)?(a[z]=Y.value,!0):(console.warn(K8(`Invalid value passed for the ${z} option`,Y)),!1)},f=(z,j)=>{const Z=fw(j)?gj(j.processor):j.processor,Y=hj(z,j.default,Z);r[z]={...j,default:Y,processor:Z},yo(a,z).orThunk(()=>yo(n,z)).each(me=>u(z,me,Z))},b=z=>Kt(r,z);return{register:f,isRegistered:b,get:z=>yo(a,z).orThunk(()=>yo(r,z).map(j=>j.default)).getOrUndefined(),set:(z,j)=>{if(b(z)){const Z=r[z];return Z.immutable?(console.error(`"${z}" is an immutable option and cannot be updated`),!1):u(z,j,Z.processor)}else return console.warn(`"${z}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:z=>{const j=b(z);return j&&delete a[z],j},isSet:z=>Kt(a,z),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(z,j)=>Sn(j)||Bs(j)||ae(j)||te(j)||$n(j)||Oa(j)?j:Object.prototype.toString.call(j))))}catch(z){console.error(z)}}}},bj=(e,n)=>{e.dom.contentEditable="true"},vj=(e,n)=>{const o=ne.fromDom(e.getBody());n?(e.readonly=!0,e.hasEditableRoot()&&bj(o),_A(e)):(e.readonly=!1,wT(e))},l2=e=>e.readonly,q4=e=>{const n=e.undoManager.add();De(n)&&(e.undoManager.undo(),e.undoManager.reset())},X8=e=>vo(e,n=>n.type==="characterData"||n.type==="childList"),J8=e=>{const n=r=>{l2(e)&&X8(r)&&q4(e)},o=new MutationObserver(n);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{l2(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&l2(e)&&r.preventDefault()}),e.on("compositionstart",()=>{l2(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(l2(e)){const r=o.takeRecords();n(r)}o.disconnect()})},yj=["design","readonly"],Q8=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&vj(e,u.editorReadOnly),n.set(r),ix(e,r)},Cj=(e,n,o,r)=>{if(!(r===o.get()||e.initialized&&tm(e))){if(!Kt(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?Q8(e,o,n,r):e.on("init",()=>Q8(e,o,n,r))}},GG=(e,n,o)=>{if(Jt(yj,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},Sj=e=>{const n=ns("design"),o=ns({design:{activate:wt,deactivate:wt,editorReadOnly:!1},readonly:{activate:wt,deactivate:wt,editorReadOnly:!0}});return J8(e),n1(e),{isReadOnly:()=>l2(e),set:r=>Cj(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(GG(o.get(),r,a))}}},iR=Xe.each,gw=Xe.explode,K4={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},eI=Xe.makeMap("alt,ctrl,shift,meta,access"),wj=e=>e in eI,xj=e=>{const n={},o=Wn.os.isMacOS()||Wn.os.isiOS();iR(gw(e.toLowerCase(),"+"),u=>{wj(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=K4[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in eI)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class uR{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(iR(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,a){const u=this,f=u.normalizeCommandFunc(r);return iR(gw(Xe.trim(n)),b=>{const y=u.createShortcut(b,o,f,a);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Xe.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,a){const u=Xe.map(gw(n,">"),xj);return u[u.length-1]=Xe.extend(u[u.length-1],{func:r,scope:a||this.editor}),Xe.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const Ej=()=>{const e=I6();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Ph=mo.DOM,dR=Xe.extend,Tj=Xe.each;class Y4{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,dR(this,q8);const a=this;this.id=n,this.hidden=!1;const u=U4(r.defaultOptions,o);this.options=pj(a,u,o),sn(a);const f=this.options.get;f("deprecation_warnings")&&FH(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const E=Si(a);E&&(Nr.ScriptLoader._setReferrerPolicy(E),mo.DOM.styleSheetLoader._setReferrerPolicy(E));const R=Tx(a);De(R)&&mo.DOM.styleSheetLoader._setContentCssCors(R),Br.languageLoad=f("language_load"),Br.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Jd(Pk(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Gn(a),this.hasVisual=kx(a),this.shortcuts=new uR(this),this.editorCommands=new sR(this),ij(this);const B=f("cache_suffix");B&&(Wn.cacheSuffix=B.replace(/^[\?\&]+/,"")),this.ui={registry:Ej(),styleSheetLoader:void 0,show:wt,hide:wt,setEnabled:wt,isEnabled:ft},this.mode=Sj(a),r.dispatch("SetupEditor",{editor:this});const P=Kf(a);le(P)&&P.call(a,a)}render(){PZ(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return I0(this)}translate(n){return fr.translate(n)}getParam(n,o,r){const a=this.options;return a.isRegistered(n)||(De(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:ft,default:o})),!a.isSet(n)&&!bs(o)?o:a.get(n)}hasPlugin(n,o){return Jt(qf(this),n)?o?sb.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,a){this.shortcuts.add(n,o,r,a)}execCommand(n,o,r,a){return this.editorCommands.execCommand(n,o,r,a)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Ph.show(n.getContainer()),Ph.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Ph.hide(n.getContainer()),Ph.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const a={...n,load:!0},u=Gb(r)?r.value:r.innerHTML,f=o.setContent(u,a);return a.no_events||o.dispatch("LoadContent",{...a,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Gb(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=Ph.getParent(o.id,"form");b&&Tj(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return Xp(this,n,o)}getContent(n){return RH(this,n)}insertContent(n,o){o&&(n=dR({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Xp(this,this.startContent,{format:"raw"}):Xp(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Ph.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ph.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const a=this,u=a.options.get,f=Ax(a);if(le(f))return f.call(a,n,r,!0,o);if(!u("convert_urls")||r==="link"||Ot(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0)return n;const b=new Jd(n);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){KD(this,n)}setEditableRoot(n){$Z(this,n)}hasEditableRoot(){return M8(this)}remove(){jN(this)}destroy(n){GN(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Ob=mo.DOM,X4=Xe.each;let kj=!1,J4,Yl=[];const Q4=e=>{const n=e.type;X4(u1.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},mR=e=>{if(e!==kj){const n=mo.DOM;e?(n.bind(window,"resize",Q4),n.bind(window,"scroll",Q4)):(n.unbind(window,"resize",Q4),n.unbind(window,"scroll",Q4)),kj=e}},Db=e=>{const n=Yl;return Yl=Rt(Yl,o=>e!==o),u1.activeEditor===e&&(u1.activeEditor=Yl.length>0?Yl[0]:null),u1.focusedEditor===e&&(u1.focusedEditor=null),n.length!==Yl.length},tI=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Db(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},_j=document.compatMode!=="CSS1Compat",u1={...cR,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"9.1",releaseDate:"2025-05-29",i18n:fr,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Jd.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Jd(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Jd(e.baseURL),e.suffix=o,AI(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&at(r,(a,u)=>{Br.PluginManager.urls[u]=a})},init(e){const n=this;let o;const r=Xe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(R,B)=>R.inline&&B.tagName.toLowerCase()in r,u=R=>{let B=R.id;return B||(B=yo(R,"name").filter(P=>!Ob.get(P)).getOrThunk(Ob.uniqueId),R.setAttribute("id",B)),B},f=R=>{const B=e[R];if(B)return B.apply(n,[])},b=R=>Wn.browser.isIE()||Wn.browser.isEdge()?(OS("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):_j?(OS("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):ae(R.selector)?Ob.select(R.selector):De(R.target)?[R.target]:[];let y=R=>{o=R};const E=()=>{let R=0;const B=[];let P;const z=(j,Z,Y)=>{const oe=new Y4(j,Z,n);B.push(oe),oe.on("init",()=>{++R===P.length&&y(B)}),oe.targetElm=oe.targetElm||Y,oe.render()};Ob.unbind(window,"ready",E),f("onpageload"),P=Pl(b(e)),Xe.each(P,j=>{tI(n.get(j.id))}),P=Xe.grep(P,j=>!n.get(j.id)),P.length===0?y([]):X4(P,j=>{a(e,j)?OS("Could not initialize inline editor on invalid inline target element",j):z(u(j),e,j)})};return Ob.bind(window,"ready",E),new Promise(R=>{o?R(o):y=B=>{R(B)}})},get(e){return arguments.length===0?Yl.slice(0):ae(e)?ts(Yl,n=>n.id===e).getOr(null):Bs(e)&&Yl[e]?Yl[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Yl.push(e),mR(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),J4||(J4=r=>{const a=n.dispatch("BeforeUnload");if(a.returnValue)return r.preventDefault(),r.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",J4))),e},createEditor(e,n){return this.add(new Y4(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Yl.length-1;r>=0;r--)n.remove(Yl[r]);return}if(ae(e)){X4(Ob.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,te(n.get(o.id))?null:(Db(o)&&n.dispatch("RemoveEditor",{editor:o}),Yl.length===0&&window.removeEventListener("beforeunload",J4),o.remove(),mR(Yl.length>0),o)},execCommand(e,n,o){var r;const a=this,u=Ot(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(u)){const f=o.options;new Y4(u,f,a).render()}return!0}case"mceRemoveEditor":{const f=a.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=a.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{X4(Yl,e=>{e.save()})},addI18n:(e,n)=>{fr.add(e,n)},translate:e=>fr.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Jd(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Jd(this.baseURL)}};u1.setup();const Aj=(()=>{const e=Ur(),n=u=>({items:u,types:yr(u),getType:f=>yo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),fR=Math.min,i2=Math.max,hw=Math.round,nI=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,E=(o||"").split("");return E[0]==="b"&&(a+=y),E[1]==="r"&&(r+=b),E[0]==="c"&&(a+=hw(y/2)),E[1]==="c"&&(r+=hw(b/2)),E[3]==="b"&&(a-=f),E[4]==="r"&&(r-=u),E[3]==="c"&&(a-=hw(f/2)),E[4]==="c"&&(r-=hw(u/2)),u2(r,a,u,f)},Oj=(e,n,o,r)=>{for(let a=0;a<r.length;a++){const u=nI(e,n,r[a]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[a]}return null},gR=(e,n,o)=>u2(e.x-n,e.y-o,e.w+n*2,e.h+o*2),oI=(e,n)=>{const o=i2(e.x,n.x),r=i2(e.y,n.y),a=fR(e.x+e.w,n.x+n.w),u=fR(e.y+e.h,n.y+n.h);return a-o<0||u-r<0?null:u2(o,r,a-o,u-r)},KG=(e,n,o)=>{let r=e.x,a=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,E=i2(0,n.x-r),R=i2(0,n.y-a),B=i2(0,u-b),P=i2(0,f-y);return r+=E,a+=R,o&&(u+=E,f+=R,r-=B,a-=P),u-=B,f-=P,u2(r,a,u-r,f-a)},u2=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),Rj={inflate:gR,relativePosition:nI,findBestRelativePosition:Oj,intersect:oI,clamp:KG,create:u2,fromClientRect:e=>u2(e.left,e.top,e.width,e.height)},hR=(e,n,o=1e3)=>{let r=!1,a=null;const u=E=>(...R)=>{r||(r=!0,a!==null&&(window.clearTimeout(a),a=null),E.apply(null,R))},f=u(e),b=u(n);return{start:(...E)=>{!r&&a===null&&(a=window.setTimeout(()=>b.apply(null,E),o))},resolve:f,reject:b}},Mj=(()=>{const e={},n={},o={};return{load:(y,E)=>{const R=`Script at URL "${E}" failed to load`,B=`Script at URL "${E}" did not call \`tinymce.Resource.add('${y}', data)\` within 1 second`;if(e[y]!==void 0)return e[y];{const P=new Promise((z,j)=>{const Z=hR(z,j);n[y]=Z.resolve,Nr.ScriptLoader.loadScript(E).then(()=>Z.start(B),()=>Z.reject(R))});return e[y]=P,P}},add:(y,E)=>{n[y]!==void 0&&(n[y](E),delete n[y]),e[y]=Promise.resolve(E),o[y]=E},has:y=>y in o,get:y=>o[y],unload:y=>{delete e[y],delete o[y]}}})(),Nj=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let d2;try{const e="__storage_test__";d2=window.localStorage,d2.setItem(e,e),d2.removeItem(e)}catch{d2=Nj()}var ek=d2;const sI={geom:{Rect:Rj},util:{Delay:Ai,Tools:Xe,VK:xt,URI:Jd,EventDispatcher:rR,Observable:cR,I18n:fr,LocalStorage:ek,ImageUploader:$A},dom:{EventUtils:Ju,TreeWalker:bc,TextSeeker:su,DOMUtils:mo,ScriptLoader:Nr,RangeUtils:fu,Serializer:HN,StyleSheetLoader:Of,ControlSelection:PR,BookmarkManager:to,Selection:FN,Event:Ju.Event},html:{Styles:zd,Entities:Vo,Node:_l,Schema:Xc,DomParser:ob,Writer:V3,Serializer:Sh},Env:Wn,AddOnManager:Br,Annotator:eo,Formatter:jo,UndoManager:HA,EditorCommands:sR,WindowManager:_S,NotificationManager:eB,EditorObservable:q8,Shortcuts:uR,Editor:Y4,FocusManager:ps,EditorManager:u1,DOM:mo.DOM,ScriptLoader:Nr.ScriptLoader,PluginManager:sb,ThemeManager:e1,ModelManager:Qp,IconManager:_y,Resource:Mj,FakeClipboard:Aj,trim:Xe.trim,isArray:Xe.isArray,is:Xe.is,toArray:Xe.toArray,makeMap:Xe.makeMap,each:Xe.each,map:Xe.map,grep:Xe.grep,inArray:Xe.inArray,extend:Xe.extend,walk:Xe.walk,resolve:Xe.resolve,explode:Xe.explode,_addCacheSuffix:Xe._addCacheSuffix},pR=Xe.extend(u1,sI),Bj=e=>{try{um.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(pR),Bj(pR)})()}(Kj)),Kj.exports}qK();var Uq={},Wq={},Zq;function KK(){return Zq||(Zq=1,tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})),Wq}var jq;function YK(){return jq||(jq=1,KK()),Uq}YK();var Gq={},qq={},Kq;function XK(){return Kq||(Kq=1,function(){const um=Object.getPrototypeOf,Eu=(t,s,c)=>{var l;return c(t,s.prototype)?!0:((l=t.constructor)===null||l===void 0?void 0:l.name)===s.name},dm=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&Eu(t,String,(c,l)=>l.isPrototypeOf(c))?"string":s},ca=t=>s=>dm(s)===t,aa=t=>s=>typeof s===t,Aa=t=>s=>t===s,pr=(t,s)=>Vs(t)&&Eu(t,s,(c,l)=>um(c)===l),rn=ca("string"),Vs=ca("object"),ti=t=>pr(t,Object),Ns=ca("array"),zc=Aa(null),ar=aa("boolean"),Lr=Aa(void 0),el=t=>t==null,Po=t=>!el(t),St=aa("function"),Vc=aa("number"),en=(t,s)=>{if(Ns(t)){for(let c=0,l=t.length;c<l;++c)if(!s(t[c]))return!1;return!0}return!1},ae=()=>{},Ot=t=>()=>t(),Oa=(t,s)=>(...c)=>t(s.apply(null,c)),$n=(t,s)=>c=>t(s(c)),te=t=>()=>t,Sn=t=>t,bs=(t,s)=>t===s;function Rn(t,...s){return(...c)=>{const l=s.concat(c);return t.apply(null,l)}}const De=t=>s=>!t(s),le=t=>()=>{throw new Error(t)},Bs=t=>t(),bn=te(!1),wt=te(!0);class A{constructor(s,c){this.tag=s,this.value=c}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Po(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const Xo=Array.prototype.slice,lt=Array.prototype.indexOf,Jo=Array.prototype.push,Xt=(t,s)=>lt.call(t,s),ze=(t,s)=>{const c=Xt(t,s);return c===-1?A.none():A.some(c)},bo=(t,s)=>Xt(t,s)>-1,br=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];if(s(d,c))return!0}return!1},go=(t,s)=>{const c=[];for(let l=0;l<t;l++)c.push(s(l));return c},vr=(t,s)=>{const c=[];for(let l=0;l<t.length;l+=s){const d=Xo.call(t,l,l+s);c.push(d)}return c},Pe=(t,s)=>{const c=t.length,l=new Array(c);for(let d=0;d<c;d++){const g=t[d];l[d]=s(g,d)}return l},ft=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];s(d,c)}},L=(t,s)=>{for(let c=t.length-1;c>=0;c--){const l=t[c];s(l,c)}},ni=(t,s)=>{const c=[],l=[];for(let d=0,g=t.length;d<g;d++){const h=t[d];(s(h,d)?c:l).push(h)}return{pass:c,fail:l}},ho=(t,s)=>{const c=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];s(g,l)&&c.push(g)}return c},ao=(t,s,c)=>(L(t,(l,d)=>{c=s(c,l,d)}),c),xo=(t,s,c)=>(ft(t,(l,d)=>{c=s(c,l,d)}),c),Li=(t,s,c)=>{for(let l=0,d=t.length;l<d;l++){const g=t[l];if(s(g,l))return A.some(g);if(c(g,l))break}return A.none()},Jt=(t,s)=>Li(t,s,bn),vo=(t,s)=>{for(let c=0,l=t.length;c<l;c++){const d=t[c];if(s(d,c))return A.some(c)}return A.none()},qt=t=>{const s=[];for(let c=0,l=t.length;c<l;++c){if(!Ns(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);Jo.apply(s,t[c])}return s},_e=(t,s)=>qt(Pe(t,s)),Da=(t,s)=>{for(let c=0,l=t.length;c<l;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},gs=t=>{const s=Xo.call(t,0);return s.reverse(),s},Rt=(t,s)=>ho(t,c=>!bo(s,c)),Ar=(t,s)=>{const c={};for(let l=0,d=t.length;l<d;l++){const g=t[l];c[String(g)]=s(g,l)}return c},Ro=t=>[t],Tu=(t,s)=>{const c=Xo.call(t,0);return c.sort(s),c},ts=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),Hr=t=>ts(t,0),Bl=t=>ts(t,t.length-1),zr=St(Array.from)?Array.from:t=>Xo.call(t),An=(t,s)=>{for(let c=0;c<t.length;c++){const l=s(t[c],c);if(l.isSome())return l}return A.none()},$o=Object.keys,ku=Object.hasOwnProperty,vs=(t,s)=>{const c=$o(t);for(let l=0,d=c.length;l<d;l++){const g=c[l],h=t[g];s(h,g)}},Io=(t,s)=>tl(t,(c,l)=>({k:l,v:s(c,l)})),tl=(t,s)=>{const c={};return vs(t,(l,d)=>{const g=s(l,d);c[g.k]=g.v}),c},Ks=t=>(s,c)=>{t[c]=s},Us=(t,s,c,l)=>{vs(t,(d,g)=>{(s(d,g)?c:l)(d,g)})},lr=(t,s)=>{const c={},l={};return Us(t,s,Ks(c),Ks(l)),{t:c,f:l}},la=(t,s)=>{const c={};return Us(t,s,Ks(c),ae),c},Pl=(t,s)=>{const c=[];return vs(t,(l,d)=>{c.push(s(l,d))}),c},yr=(t,s)=>{const c=$o(t);for(let l=0,d=c.length;l<d;l++){const g=c[l],h=t[g];if(s(h,g,t))return A.some(h)}return A.none()},_u=t=>Pl(t,Sn),at=(t,s)=>In(t,s)?A.from(t[s]):A.none(),In=(t,s)=>ku.call(t,s),ac=(t,s)=>In(t,s)&&t[s]!==void 0&&t[s]!==null,Uc={generate:t=>{if(!Ns(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return ft(t,(l,d)=>{const g=$o(l);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=l[h];if(c[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ns(C))throw new Error("case arguments must be an array");s.push(h),c[h]=(...S)=>{const T=S.length;if(T!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+T);return{fold:(...N)=>{if(N.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+N.length);return N[d].apply(null,S)},match:N=>{const F=$o(N);if(s.length!==F.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+F.join(","));if(!Da(s,q=>bo(F,q)))throw new Error("Not all branches were specified when using match. Specified: "+F.join(", ")+`
Required: `+s.join(", "));return N[h].apply(null,S)},log:N=>{console.log(N,{constructors:s,constructor:h,params:S})}}}}),c}},Et=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},nl=t=>{let s=A.none(),c=[];const l=T=>nl(O=>{d(N=>{O(T(N))})}),d=T=>{h()?S(T):c.push(T)},g=T=>{h()||(s=A.some(T),C(c),c=[])},h=()=>s.isSome(),C=T=>{ft(T,S)},S=T=>{s.each(O=>{setTimeout(()=>{T(O)},0)})};return t(g),{get:d,map:l,isReady:h}},df={nu:nl,pure:t=>nl(s=>{s(t)})},yo=t=>{setTimeout(()=>{throw t},0)},Kt=t=>{const s=S=>{t().then(S,yo)};return{map:S=>Kt(()=>t().then(S)),bind:S=>Kt(()=>t().then(T=>S(T).toPromise())),anonBind:S=>Kt(()=>t().then(()=>S.toPromise())),toLazy:()=>df.nu(s),toCached:()=>{let S=null;return Kt(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},_o={nu:t=>Kt(()=>new Promise(t)),pure:t=>Kt(()=>Promise.resolve(t))},Vr=t=>{const s=g=>g(t),c=te(t),l=()=>d,d={tag:!0,inner:t,fold:(g,h)=>h(t),isValue:wt,isError:bn,map:g=>Qt.value(g(t)),mapError:l,bind:s,exists:s,forall:s,getOr:c,or:l,getOrThunk:c,orThunk:l,getOrDie:c,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},ns=t=>{const s=()=>c,c={tag:!1,inner:t,fold:(l,d)=>l(t),isValue:bn,isError:wt,map:s,mapError:l=>Qt.error(l(t)),bind:s,exists:bn,forall:wt,getOr:Sn,or:Sn,getOrThunk:Bs,orThunk:Bs,getOrDie:le(String(t)),each:ae,toOptional:A.none};return c},Qt={value:Vr,error:ns,fromOption:(t,s)=>t.fold(()=>ns(s),Vr)},pa=t=>({...t,toCached:()=>pa(t.toCached()),bindFuture:S=>pa(t.bind(T=>T.fold(O=>_o.pure(Qt.error(O)),O=>S(O)))),bindResult:S=>pa(t.map(T=>T.bind(S))),mapResult:S=>pa(t.map(T=>T.map(S))),mapError:S=>pa(t.map(T=>T.mapError(S))),foldResult:(S,T)=>t.map(O=>O.fold(S,T)),withTimeout:(S,T)=>pa(_o.nu(O=>{let N=!1;const F=setTimeout(()=>{N=!0,O(Qt.error(T()))},S);t.get(W=>{N||(clearTimeout(F),O(W))})}))}),Fo=t=>pa(_o.nu(t)),Ed=t=>pa(_o.pure(Qt.value(t))),Au={nu:Fo,wrap:pa,pure:Ed,value:Ed,error:t=>pa(_o.pure(Qt.error(t))),fromResult:t=>pa(_o.pure(t)),fromFuture:t=>pa(t.map(Qt.value)),fromPromise:t=>Fo(s=>{t.then(c=>{s(Qt.value(c))},c=>{s(Qt.error(c))})})},kd=typeof window<"u"?window:Function("return this;")(),ol=(t,s,c,l)=>{const d=t+s;return d>l?c:d<c?l:d},Cr=(t,s,c)=>Math.min(Math.max(t,s),c),_d=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let ba=0;const nt=t=>{const c=new Date().getTime(),l=Math.floor(_d()*1e9);return ba++,t+"_"+l+ba+String(c)},pg=(t,s)=>s,Ys=(t,s)=>ti(t)&&ti(s)?uo(t,s):s,Ou=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)In(d,g)&&(c[g]=t(c[g],d[g]))}return c},uo=Ou(Ys),ff=Ou(pg),Wc=(t,s,c=bs)=>t.exists(l=>c(l,s)),bg=(t,s,c=bs)=>Ur(t,s,c).getOr(t.isNone()&&s.isNone()),oi=t=>{const s=[],c=l=>{s.push(l)};for(let l=0;l<t.length;l++)t[l].each(c);return s},fm=t=>{const s=[];for(let c=0;c<t.length;c++){const l=t[c];if(l.isSome())s.push(l.getOrDie());else return A.none()}return A.some(s)},Ur=(t,s,c)=>t.isSome()&&s.isSome()?A.some(c(t.getOrDie(),s.getOrDie())):A.none(),Or=(t,s,c,l)=>t.isSome()&&s.isSome()&&c.isSome()?A.some(l(t.getOrDie(),s.getOrDie(),c.getOrDie())):A.none(),Ra=(t,s)=>t!=null?A.some(s(t)):A.none(),Sr=(t,s)=>t?A.some(s):A.none(),ir=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ps=(t,s)=>{let c=s??kd;for(let l=0;l<t.length&&c!==void 0&&c!==null;++l)c=c[t[l]];return c},Hi=(t,s)=>{const c=t.split(".");return Ps(c,s)};Uc.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const si=t=>{const s=[],c=[];return ft(t,l=>{l.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},ia=t=>{const s=Et(A.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{c(),s.set(A.some(C))}}},vg=()=>ia(t=>t.destroy()),Ma=()=>ia(t=>t.unbind()),dn=()=>{const t=ia(ae);return{...t,on:c=>t.get().each(c)}},Xs=(t,s)=>t+s,ic=(t,s)=>t.substring(s),os=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,uc=(t,s)=>Wr(t,s)?ic(t,s.length):t,zi=(t,s)=>Eo(t,s)?t:Xs(t,s),No=(t,s,c=0,l)=>{const d=t.indexOf(s,c);return d!==-1?Lr(l)?!0:d+s.length<=l:!1},Wr=(t,s)=>os(t,s,0),Eo=(t,s)=>os(t,s,t.length-s.length),ct=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),sl=t=>t.length>0,rl=t=>!sl(t),Na=t=>{const s=parseFloat(t);return isNaN(s)?A.none():A.some(s)},yg=(t,s)=>{let c=null,l=null;return{cancel:()=>{zc(c)||(clearTimeout(c),c=null,l=null)},throttle:(...h)=>{l=h,zc(c)&&(c=setTimeout(()=>{const C=l;c=null,l=null,t.apply(null,C)},s))}}},va=(t,s)=>{let c=null;return{cancel:()=>{zc(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{zc(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},cl=(t,s)=>{let c=null;const l=()=>{zc(c)||(clearTimeout(c),c=null)};return{cancel:l,throttle:(...g)=>{l(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},Dr=t=>{let s=!1,c;return(...l)=>(s||(s=!0,c=t.apply(null,l)),c)},Du="\uFEFF",Ru=" ",Vi=(t,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=t,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return ri(l.childNodes[0])},Zr=(t,s)=>{const l=(s||document).createElement(t);return ri(l)},gm=(t,s)=>{const l=(s||document).createTextNode(t);return ri(l)},ri=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Je={fromHtml:Vi,fromTag:Zr,fromText:gm,fromDom:ri,fromPoint:(t,s,c)=>A.from(t.dom.elementFromPoint(s,c)).map(ri)},Mu=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,l)=>{t.setStart(c.dom,l)},c=>{t.setStartAfter(c.dom)})},Ad=(t,s)=>{s.fold(c=>{t.setEndBefore(c.dom)},(c,l)=>{t.setEnd(c.dom,l)},c=>{t.setEndAfter(c.dom)})},V=(t,s,c)=>{const l=t.document.createRange();return Mu(l,s),Ad(l,c),l},J=(t,s,c,l,d)=>{const g=t.document.createRange();return g.setStart(s.dom,c),g.setEnd(l.dom,d),g},fe=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Re=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?A.some(c).map(fe):A.none()},Ke=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(fe):A.none()},bt=Uc.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),yn=(t,s,c)=>s(Je.fromDom(c.startContainer),c.startOffset,Je.fromDom(c.endContainer),c.endOffset),Cn=(t,s)=>s.match({domRange:c=>({ltr:te(c),rtl:A.none}),relative:(c,l)=>({ltr:Dr(()=>V(t,c,l)),rtl:Dr(()=>A.some(V(t,l,c)))}),exact:(c,l,d,g)=>({ltr:Dr(()=>J(t,c,l,d,g)),rtl:Dr(()=>A.some(J(t,d,g,c,l)))})}),Yn=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>bt.rtl(Je.fromDom(d.endContainer),d.endOffset,Je.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>yn(t,bt.ltr,c)):yn(t,bt.ltr,c)},ls=(t,s)=>{const c=Cn(t,s);return Yn(t,c)},Qo=(t,s)=>ls(t,s).match({ltr:(l,d,g,h)=>{const C=t.document.createRange();return C.setStart(l.dom,d),C.setEnd(g.dom,h),C},rtl:(l,d,g,h)=>{const C=t.document.createRange();return C.setStart(g.dom,h),C.setEnd(l.dom,d),C}});bt.ltr,bt.rtl;const al=9,Il=11,hm=1,Hh=3,Ba=(t,s)=>{const c=t.dom;if(c.nodeType!==hm)return!1;{const l=c;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Od=t=>t.nodeType!==hm&&t.nodeType!==al&&t.nodeType!==Il||t.childElementCount===0,Pa=(t,s)=>{const c=s===void 0?document:s.dom;return Od(c)?[]:Pe(c.querySelectorAll(t),Je.fromDom)},Nu=(t,s)=>{const c=s===void 0?document:s.dom;return Od(c)?A.none():A.from(c.querySelector(t)).map(Je.fromDom)},lo=(t,s)=>t.dom===s.dom,gf=(t,s)=>{const c=t.dom,l=s.dom;return c===l?!1:c.contains(l)},Bu=(t,s,c,l)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,h=t.isiOS()||t.isAndroid(),C=h||l("(pointer:coarse)"),S=d||!g&&h&&l("(min-device-width:768px)"),T=g||h&&!S,O=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,N=!T&&!S&&!O;return{isiPad:te(d),isiPhone:te(g),isTablet:te(S),isPhone:te(T),isTouch:te(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:te(O),isDesktop:te(N)}},ci=(t,s)=>{for(let c=0;c<t.length;c++){const l=t[c];if(l.test(s))return l}},zh=(t,s)=>{const c=ci(t,s);if(!c)return{major:0,minor:0};const l=d=>Number(s.replace(c,"$"+d));return pm(l(1),l(2))},Vh=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?Sg():zh(t,c)},Sg=()=>pm(0,0),pm=(t,s)=>({major:t,minor:s}),bm={nu:pm,detect:Vh,unknown:Sg},Dd=(t,s)=>An(s.brands,c=>{const l=c.brand.toLowerCase();return Jt(t,d=>{var g;return l===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:bm.nu(parseInt(c.version,10),0)}))}),hf=(t,s)=>{const c=String(s).toLowerCase();return Jt(t,l=>l.search(c))},wg=(t,s)=>hf(t,s).map(c=>{const l=bm.detect(c.versionRegexes,s);return{current:c.name,version:l}}),Uh=(t,s)=>hf(t,s).map(c=>{const l=bm.detect(c.versionRegexes,s);return{current:c.name,version:l}}),ai=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ll=t=>s=>No(s,t),jr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>No(t,"edge/")&&No(t,"chrome")&&No(t,"safari")&&No(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ai],search:t=>No(t,"chrome")&&!No(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>No(t,"msie")||No(t,"trident")},{name:"Opera",versionRegexes:[ai,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ll("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ll("firefox")},{name:"Safari",versionRegexes:[ai,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(No(t,"safari")||No(t,"mobile/"))&&No(t,"applewebkit")}],vm=[{name:"Windows",search:ll("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>No(t,"iphone")||No(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ll("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ll("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ll("linux"),versionRegexes:[]},{name:"Solaris",search:ll("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ll("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ll("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Wh={browsers:te(jr),oses:te(vm)},ua="Edge",Zh="Chromium",Ui="IE",jh="Opera",xg="Firefox",il="Safari",Fl=()=>li({current:void 0,version:bm.unknown()}),li=t=>{const s=t.current,c=t.version,l=d=>()=>s===d;return{current:s,version:c,isEdge:l(ua),isChromium:l(Zh),isIE:l(Ui),isOpera:l(jh),isFirefox:l(xg),isSafari:l(il)}},Eg={unknown:Fl,nu:li},Wn="Windows",g1="iOS",Gh="Android",h1="Linux",pf="macOS",p1="Solaris",b1="FreeBSD",Tg="ChromeOS",$b=()=>kg({current:void 0,version:bm.unknown()}),kg=t=>{const s=t.current,c=t.version,l=d=>()=>s===d;return{current:s,version:c,isWindows:l(Wn),isiOS:l(g1),isAndroid:l(Gh),isMacOS:l(pf),isLinux:l(h1),isSolaris:l(p1),isFreeBSD:l(b1),isChromeOS:l(Tg)}},Es={unknown:$b,nu:kg},_g={detect:(t,s,c)=>{const l=Wh.browsers(),d=Wh.oses(),g=s.bind(S=>Dd(l,S)).orThunk(()=>wg(l,t)).fold(Eg.unknown,Eg.nu),h=Uh(d,t).fold(Es.unknown,Es.nu),C=Bu(h,g,t,c);return{browser:g,os:h,deviceType:C}}},Ib=t=>window.matchMedia(t).matches;let v1=Dr(()=>_g.detect(window.navigator.userAgent,A.from(window.navigator.userAgentData),Ib));const Lo=()=>v1(),Wi=(t,s)=>Hi(t,s),ne=(t,s)=>{const c=Wi(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},y1=Object.getPrototypeOf,dc=t=>ne("HTMLElement",t),Rd=t=>{const s=Hi("ownerDocument.defaultView",t);return Vs(t)&&(dc(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(y1(t).constructor.name))},da=t=>t.dom.nodeName.toLowerCase(),Md=t=>t.dom.nodeType,ym=t=>s=>Md(s)===t,Zi=t=>Zc(t)&&Rd(t.dom),Zc=ym(hm),ji=ym(Hh),Cm=ym(al),Pu=ym(Il),Ac=t=>s=>Zc(s)&&da(s)===t,wr=t=>Je.fromDom(t.dom.ownerDocument),$u=t=>Cm(t)?t:wr(t),ya=t=>Je.fromDom($u(t).dom.documentElement),ul=t=>Je.fromDom($u(t).dom.defaultView),Oc=t=>A.from(t.dom.parentNode).map(Je.fromDom),Iu=t=>Oc(t),On=t=>A.from(t.dom.parentElement).map(Je.fromDom),dl=(t,s)=>{const c=St(s)?s:bn;let l=t.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,h=Je.fromDom(g);if(d.push(h),c(h)===!0)break;l=g}return d},bf=t=>A.from(t.dom.offsetParent).map(Je.fromDom),Un=t=>A.from(t.dom.nextSibling).map(Je.fromDom),mc=t=>Pe(t.dom.childNodes,Je.fromDom),Ll=(t,s)=>{const c=t.dom.childNodes;return A.from(c[s]).map(Je.fromDom)},Fu=t=>Ll(t,0),ii=(t,s)=>({element:t,offset:s}),Gr=(t,s)=>{const c=mc(t);return c.length>0&&s<c.length?ii(c[s],0):ii(t,s)},qr=(t,s,c,l)=>{const g=wr(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,l),g},C1=(t,s,c,l)=>{const d=qr(t,s,c,l),g=lo(t,c)&&s===l;return d.collapsed&&!g},Lu=t=>Pu(t)&&Po(t.dom.host),ys=t=>Je.fromDom(t.dom.getRootNode()),ml=t=>Lu(t)?t:Je.fromDom($u(t).dom.body),fl=t=>Gi(t).isSome(),Gi=t=>{const s=ys(t);return Lu(s)?A.some(s):A.none()},gl=t=>Je.fromDom(t.dom.host),To=t=>{if(Po(t.target)){const s=Je.fromDom(t.target);if(Zc(s)&&Sm(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return Hr(c)}}return A.from(t.target)},Sm=t=>Po(t.dom.shadowRoot),qh=(t,s,c,l,d,g,h)=>({target:t,x:s,y:c,stop:l,prevent:d,kill:g,raw:h}),Kr=t=>{const s=Je.fromDom(To(t).getOr(t.target)),c=()=>t.stopPropagation(),l=()=>t.preventDefault(),d=Oa(l,c);return qh(s,t.clientX,t.clientY,c,l,d,t)},fc=(t,s)=>c=>{t(c)&&s(Kr(c))},hl=(t,s,c,l,d)=>{const g=fc(c,l);return t.dom.addEventListener(s,g,d),{unbind:Rn(ur,t,s,g,d)}},$s=(t,s,c,l)=>hl(t,s,c,l,!1),qi=(t,s,c,l)=>hl(t,s,c,l,!0),ur=(t,s,c,l)=>{t.dom.removeEventListener(s,c,l)},Dc=wt,Ho=(t,s,c)=>$s(t,s,Dc,c),ss=(t,s,c)=>qi(t,s,Dc,c),wm=Kr,$a=()=>Je.fromDom(document),ro=(t,s=!1)=>t.dom.focus({preventScroll:s}),pl=t=>t.dom.blur(),bl=t=>{const s=ys(t).dom;return t.dom===s.activeElement},vl=(t=$a())=>A.from(t.dom.activeElement).map(Je.fromDom),Is=t=>vl(ys(t)).filter(s=>t.dom.contains(s.dom)),Hu=(t,s)=>{Oc(t).each(l=>{l.dom.insertBefore(s.dom,t.dom)})},Ag=(t,s)=>{Un(t).fold(()=>{Oc(t).each(d=>{jc(d,s)})},l=>{Hu(l,s)})},Kh=(t,s)=>{Fu(t).fold(()=>{jc(t,s)},l=>{t.dom.insertBefore(s.dom,l.dom)})},jc=(t,s)=>{t.dom.appendChild(s.dom)},Yh=(t,s,c)=>{Ll(t,c).fold(()=>{jc(t,s)},l=>{Hu(l,s)})},vf=(t,s)=>{ft(s,c=>{jc(t,c)})},Xh=(t,s,c)=>{if(rn(c)||ar(c)||Vc(c))t.setAttribute(s,c+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",c,":: Element ",t),new Error("Attribute value was not simple")},Wt=(t,s,c)=>{Xh(t.dom,s,c)},Hl=(t,s)=>{const c=t.dom;vs(s,(l,d)=>{Xh(c,d,l)})},Js=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},Ws=(t,s)=>A.from(Js(t,s)),Og=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},Ln=(t,s)=>{t.dom.removeAttribute(s)},Nd=t=>xo(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),Ia=t=>{t.dom.textContent="",ft(mc(t),s=>{yl(s)})},yl=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Rr=(t,s)=>Je.fromDom(t.dom.cloneNode(s)),Yr=t=>Rr(t,!1),zu=t=>Rr(t,!0),Ts=(t,s)=>{const l=(s||document).createElement("div");return l.innerHTML=t,mc(Je.fromDom(l))},xm=t=>t.dom.innerHTML,Fa=(t,s)=>{const l=wr(t).dom,d=Je.fromDom(l.createDocumentFragment()),g=Ts(s,l);vf(d,g),Ia(t),jc(t,d)},ui=t=>{const s=Je.fromTag("div"),c=Je.fromDom(t.dom.cloneNode(!0));return jc(s,c),xm(s)},Em=t=>{if(Lu(t))return"#shadow-root";{const s=Yr(t);return ui(s)}},dr=t=>new Promise((s,c)=>{const l=()=>{g(),s(t)},d=[Ho(t,"load",l),Ho(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>ft(d,h=>h.unbind());t.dom.complete&&l()}),Gc=t=>t.style!==void 0&&St(t.style.getPropertyValue),Cs=t=>{const s=ji(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return Gi(Je.fromDom(s)).fold(()=>c.body.contains(s),$n(Cs,gl))},gc=()=>zl(Je.fromDom(document)),zl=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Je.fromDom(s)},Zs=(t,s,c)=>{if(!rn(c))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",c,":: Element ",t),new Error("CSS value must be a string: "+c);Gc(t)&&t.style.setProperty(s,c)},Dg=(t,s)=>{Gc(t)&&t.style.removeProperty(s)},on=(t,s,c)=>{const l=t.dom;Zs(l,s,c)},Qs=(t,s)=>{const c=t.dom;vs(s,(l,d)=>{Zs(c,d,l)})},x=(t,s)=>{const c=t.dom;vs(s,(l,d)=>{l.fold(()=>{Dg(c,d)},g=>{Zs(c,d,g)})})},M=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!Cs(t)?H(c,s):d},H=(t,s)=>Gc(t)?t.style.getPropertyValue(s):"",X=(t,s)=>{const c=t.dom,l=H(c,s);return A.from(l).filter(d=>d.length>0)},re=t=>{const s={},c=t.dom;if(Gc(c))for(let l=0;l<c.style.length;l++){const d=c.style.item(l);s[d]=c.style[d]}return s},Ve=(t,s,c)=>{const l=Je.fromTag(t);return on(l,s,c),X(l,s).isSome()},Ye=(t,s)=>{const c=t.dom;Dg(c,s),Wc(Ws(t,"style").map(ct),"")&&Ln(t,"style")},cn=t=>t.dom.offsetWidth,un=(t,s)=>{const c=(C,S)=>{if(!Vc(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);const T=C.dom;Gc(T)&&(T.style[t]=S+"px")},l=C=>{const S=s(C);if(S<=0||S===null){const T=M(C,t);return parseFloat(T)||0}return S},d=l,g=(C,S)=>xo(S,(T,O)=>{const N=M(C,O),F=N===void 0?0:parseInt(N,10);return isNaN(F)?T:T+F},0);return{set:c,get:l,getOuter:d,aggregate:g,max:(C,S,T)=>{const O=g(C,T);return S>O?S-O:0}}},Lt=un("height",t=>{const s=t.dom;return Cs(t)?s.getBoundingClientRect().height:s.offsetHeight}),wn=t=>Lt.get(t),Ko=t=>Lt.getOuter(t),xr=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=Lt.max(t,s,c);on(t,"max-height",l+"px")},ks=t=>t.offsetWidth<=0&&t.offsetHeight<=0,Bd=t=>!ks(t.dom),Pd=un("width",t=>t.dom.offsetWidth),yf=un("width",t=>{const s=t.dom;return Cs(t)?s.getBoundingClientRect().width:s.offsetWidth}),Rg=(t,s)=>Pd.set(t,s),_s=t=>Pd.get(t),Cf=t=>Pd.getOuter(t),Jh=t=>yf.getOuter(t),Mg=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=Pd.max(t,s,c);on(t,"max-width",l+"px")},Vu=(t,s)=>({left:t,top:s,translate:(l,d)=>Vu(t+l,s+d)}),is=Vu,Fb=t=>{const s=t.getBoundingClientRect();return is(s.left,s.top)},Tm=(t,s)=>t!==void 0?t:s!==void 0?s:0,Xr=t=>{const s=t.dom.ownerDocument,c=s.body,l=s.defaultView,d=s.documentElement;if(c===t.dom)return is(c.offsetLeft,c.offsetTop);const g=Tm(l==null?void 0:l.pageYOffset,d.scrollTop),h=Tm(l==null?void 0:l.pageXOffset,d.scrollLeft),C=Tm(d.clientTop,c.clientTop),S=Tm(d.clientLeft,c.clientLeft);return $d(t).translate(h-S,g-C)},$d=t=>{const s=t.dom,l=s.ownerDocument.body;return l===s?is(l.offsetLeft,l.offsetTop):Cs(t)?Fb(s):is(0,0)},er=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return is(c,l)},mr=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},v2=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:c,getOption:l,set:(g,h)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(ji,"text"),S1=t=>v2.get(t),Ng=(t,s)=>c=>Ki(c)==="rtl"?s:t,Ki=t=>M(t,"direction")==="rtl"?"rtl":"ltr",Qh=(t,s)=>{const c=Js(t,s);return c===void 0||c===""?[]:c.split(" ")},Lb=(t,s,c)=>{const d=Qh(t,s).concat([c]);return Wt(t,s,d.join(" ")),!0},km=(t,s,c)=>{const l=ho(Qh(t,s),d=>d!==c);return l.length>0?Wt(t,s,l.join(" ")):Ln(t,s),!1};var ep=(t,s,c,l,d)=>t(c,l)?A.some(c):St(d)&&d(c)?A.none():s(c,l,d);const _m=(t,s,c)=>{let l=t.dom;const d=St(c)?c:bn;for(;l.parentNode;){l=l.parentNode;const g=Je.fromDom(l);if(s(g))return A.some(g);if(d(g))break}return A.none()},wf=(t,s,c)=>ep((d,g)=>g(d),_m,t,s,c),w1=(t,s)=>{const c=t.dom;return c.parentNode?tp(Je.fromDom(c.parentNode),l=>!lo(t,l)&&s(l)):A.none()},tp=(t,s)=>{const c=d=>s(Je.fromDom(d));return Jt(t.dom.childNodes,c).map(Je.fromDom)},y2=(t,s)=>{const c=l=>{for(let d=0;d<l.childNodes.length;d++){const g=Je.fromDom(l.childNodes[d]);if(s(g))return A.some(g);const h=c(l.childNodes[d]);if(h.isSome())return h}return A.none()};return c(t.dom)},C2=t=>Nu(t),Vl=(t,s,c)=>_m(t,l=>Ba(l,s),c),Yi=(t,s)=>w1(t,c=>Ba(c,s)),Ca=(t,s)=>tp(t,c=>Ba(c,s)),io=(t,s)=>Nu(s,t),hc=(t,s,c)=>ep((d,g)=>Ba(d,g),Vl,t,s,c),x1=(t,s)=>{t.dom.checked=s},Bg=t=>t.dom.checked,Uu=t=>t.dom.classList!==void 0,Id=t=>Qh(t,"class"),Cl=(t,s)=>Lb(t,"class",s),E1=(t,s)=>km(t,"class",s),T1=(t,s)=>bo(Id(t),s)?E1(t,s):Cl(t,s),hs=(t,s)=>{Uu(t)?t.dom.classList.add(s):Cl(t,s)},k1=t=>{(Uu(t)?t.dom.classList:Id(t)).length===0&&Ln(t,"class")},Ao=(t,s)=>{Uu(t)?t.dom.classList.remove(s):E1(t,s),k1(t)},_1=(t,s)=>{const c=Uu(t)?t.dom.classList.toggle(s):T1(t,s);return k1(t),c},Jr=(t,s)=>Uu(t)&&t.dom.classList.contains(s),xf=(t,s)=>{ft(s,c=>{hs(t,c)})},Rc=(t,s)=>{ft(s,c=>{Ao(t,c)})},A1=(t,s)=>{ft(s,c=>{_1(t,c)})},Hb=(t,s)=>Da(s,c=>Jr(t,c)),S2=t=>{const s=t.dom.classList,c=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(c[l]=d)}return c},Wu=t=>Uu(t)?S2(t):Id(t),zb=t=>t.dom.textContent,Sa=t=>t.dom.value,Fs=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Am=(t,s,c)=>ho(dl(t,c),s),zo=(t,s)=>Pa(s,t),O1=(t,s,c)=>wf(t,s,c).isSome(),Om=(t,s,c)=>hc(t,s,c).isSome(),np=t=>St(t)?t:bn,Vb=(t,s,c)=>{let l=t.dom;const d=np(c);for(;l.parentNode;){l=l.parentNode;const g=Je.fromDom(l),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},Pg=(t,s,c)=>{const l=s(t),d=np(c);return l.orThunk(()=>d(t)?A.none():Vb(t,s,d))},_={create:(t,s,c,l)=>({start:t,soffset:s,finish:c,foffset:l})},I=Uc.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),G=(t,s,c,l)=>t.fold(s,c,l),ie=t=>t.fold(Sn,Sn,Sn),Ne=I.before,tt=I.on,At=I.after,hn={before:Ne,on:tt,after:At,cata:G,getStart:ie},pn=Uc.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Bo=t=>pn.exact(t.start,t.soffset,t.finish,t.foffset),rs=t=>t.match({domRange:s=>Je.fromDom(s.startContainer),relative:(s,c)=>hn.getStart(s),exact:(s,c,l,d)=>s}),tr=pn.domRange,La=pn.relative,Zu=pn.exact,qc=t=>{const s=rs(t);return ul(s)},di=_.create,Dm={domRange:tr,relative:La,exact:Zu,exactFromRange:Bo,getWin:qc,range:di},$g=t=>A.from(t.getSelection()),Ef=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return A.some(_.create(Je.fromDom(s.startContainer),s.startOffset,Je.fromDom(c.endContainer),c.endOffset))}else return A.none()},Tf=t=>{if(t.anchorNode===null||t.focusNode===null)return Ef(t);{const s=Je.fromDom(t.anchorNode),c=Je.fromDom(t.focusNode);return C1(s,t.anchorOffset,c,t.focusOffset)?A.some(_.create(s,t.anchorOffset,c,t.focusOffset)):Ef(t)}},D1=t=>$g(t).filter(s=>s.rangeCount>0).bind(Tf),Ig=(t,s)=>{const c=Qo(t,s);return Re(c)},op=(t,s)=>{const c=Qo(t,s);return Ke(c)},kf={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},w2=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),l="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",t+l+d(t)+d(c),l+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),Jn=(t,s)=>br(s,c=>br(kf[c],l=>t===l)),cs=(t,s)=>A.from(w2.exec(t)).bind(l=>{const d=Number(l[1]),g=l[2];return Jn(g,s)?A.some({value:d,unit:g}):A.none()}),pc=(t,s)=>cs(t,s).map(({value:c,unit:l})=>c+l),Kc=t=>{const s=t===void 0?window:t;return Lo().browser.isFirefox()?A.none():A.from(s.visualViewport)},R1=(t,s,c,l)=>({x:t,y:s,width:c,height:l,right:t+c,bottom:s+l}),Rm=t=>{const s=t===void 0?window:t,c=s.document,l=er(Je.fromDom(c));return Kc(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return R1(l.left,l.top,g,h)},d=>R1(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},Fg=(t,s)=>t.view(s).fold(te([]),l=>{const d=t.owner(l),g=Fg(t,d);return[l].concat(g)}),Lg=(t,s)=>{const c=s.owner(t),l=Fg(s,c);return A.some(l)};var Ub=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Je.fromDom)},owner:t=>wr(t)});const Hg=t=>{const s=$a(),c=er(s);return Lg(t,Ub).fold(Rn(Xr,t),d=>{const g=$d(t),h=ao(d,(C,S)=>{const T=$d(S);return{left:C.left+T.left,top:C.top+T.top}},{left:0,top:0});return is(h.left+g.left+c.left,h.top+g.top+c.top)})},bc=(t,s,c)=>({point:t,width:s,height:c}),Wb=(t,s,c,l)=>({x:t,y:s,width:c,height:l}),Ss=(t,s,c,l)=>({x:t,y:s,width:c,height:l,right:t+c,bottom:s+l}),Qr=t=>{const s=Xr(t),c=Cf(t),l=Ko(t);return Ss(s.left,s.top,c,l)},Fd=t=>{const s=Hg(t),c=Cf(t),l=Ko(t);return Ss(s.left,s.top,c,l)},sp=(t,s)=>{const c=Math.max(t.x,s.x),l=Math.max(t.y,s.y),d=Math.min(t.right,s.right),g=Math.min(t.bottom,s.bottom),h=d-c,C=g-l;return Ss(c,l,h,C)},ck=(t,s)=>xo(s,(c,l)=>sp(c,l),t),Mc=()=>Rm(window),mi=(t,s)=>lo(t.element,s.event.target),Af=t=>(Wc(X(t,"position"),"fixed")?A.none():bf(t)).orThunk(()=>{const l=Je.fromTag("span");return Oc(t).bind(d=>{jc(d,l);const g=bf(l);return yl(l),g})}),ht=t=>Af(t).map(Xr).getOrThunk(()=>is(0,0)),ju=(t,s)=>{const c=A.from(Js(t,"id")).getOrThunk(()=>{const l=nt("aria");return Wt(s,"id",l),l});Wt(t,"aria-describedby",c)},Sw=t=>{Ln(t,"aria-describedby")};var vc;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(vc||(vc={}));const Ha=(t,s,c)=>t.stype===vc.Error?s(t.serror):c(t.svalue),Zb=t=>{const s=[],c=[];return ft(t,l=>{Ha(l,d=>c.push(d),d=>s.push(d))}),{values:s,errors:c}},ww=(t,s)=>t.stype===vc.Error?{stype:vc.Error,serror:s(t.serror)}:t,Mm=(t,s)=>t.stype===vc.Value?{stype:vc.Value,svalue:s(t.svalue)}:t,ak=(t,s)=>t.stype===vc.Value?s(t.svalue):t,Ld=(t,s)=>t.stype===vc.Error?s(t.serror):t,jb=t=>({stype:vc.Value,svalue:t}),Gb=t=>({stype:vc.Error,serror:t}),Ls={fromResult:t=>t.fold(Gb,jb),toResult:t=>Ha(t,Qt.error,Qt.value),svalue:jb,partition:Zb,serror:Gb,bind:ak,bindError:Ld,map:Mm,mapError:ww,fold:Ha},Hd=t=>Vs(t)&&$o(t).length>100?" removed due to size":JSON.stringify(t,null,2),Gu=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:te("... (only showing first ten failures)")}]):t;return Pe(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},Nm=(t,s)=>Ls.serror([{path:t,getErrorInfo:s}]),As=(t,s,c)=>Nm(t,()=>'Could not find valid *required* value for "'+s+'" in '+Hd(c)),xw=(t,s)=>Nm(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Ew=(t,s,c)=>Nm(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+Hd(s)),Xi=(t,s)=>Nm(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),as=(t,s)=>Nm(t,te(s)),zg=t=>{const s=(l,d)=>Ls.bindError(t(d),g=>as(l,g)),c=te("val");return{extract:s,toString:c}},qb=zg(Ls.svalue),qu=te(qb),Ji=(t,s)=>zg(c=>{const l=typeof c;return t(c)?Ls.svalue(c):Ls.serror(`Expected type: ${s} but got: ${l}`)}),x2=Ji(Vc,"number"),tn=Ji(rn,"string"),rp=Ji(ar,"boolean"),cp=Ji(St,"function"),E2=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>E2(t[s]));default:return!1}},Tw=zg(t=>E2(t)?Ls.svalue(t):Ls.serror("Expected value to be acceptable for sending via postMessage")),Qi=()=>({tag:"required",process:{}}),T2=t=>({tag:"defaultedThunk",process:t}),k2=t=>T2(te(t)),Vg=()=>({tag:"option",process:{}}),M1=t=>({tag:"mergeWithThunk",process:t}),Kb=t=>M1(te(t)),Ku=(t,s,c,l)=>({tag:"field",key:t,newKey:s,presence:c,prop:l}),ma=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),N1=(t,s,c)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},_2=(t,s)=>t.length>0?Ls.svalue(uo(s,ff.apply(void 0,t))):Ls.svalue(s),Bm=t=>Oa(Ls.serror,qt)(t),O2={consolidateObj:(t,s)=>{const c=Ls.partition(t);return c.errors.length>0?Bm(c.errors):_2(c.values,s)},consolidateArr:t=>{const s=Ls.partition(t);return s.errors.length>0?Bm(s.errors):Ls.svalue(s.values)}},D2=(t,s,c,l)=>at(s,c).fold(()=>As(t,c,s),l),B1=(t,s,c,l)=>{const d=at(t,s).getOrThunk(()=>c(t));return l(d)},lk=(t,s,c)=>c(at(t,s)),P1=(t,s,c,l)=>{const d=at(t,s).map(g=>g===!0?c(t):g);return l(d)},_w=(t,s,c,l,d)=>{const g=C=>d.extract(s.concat([l]),C),h=C=>C.fold(()=>Ls.svalue(A.none()),S=>{const T=d.extract(s.concat([l]),S);return Ls.map(T,A.some)});switch(t.tag){case"required":return D2(s,c,l,g);case"defaultedThunk":return B1(c,l,t.process,g);case"option":return lk(c,l,h);case"defaultedOptionThunk":return P1(c,l,t.process,h);case"mergeWithThunk":return B1(c,l,te({}),C=>{const S=uo(t.process(c),C);return g(S)})}},$1=(t,s,c)=>{const l={},d=[];for(const g of c)N1(g,(h,C,S,T)=>{const O=_w(S,t,s,h,T);Ls.fold(O,N=>{d.push(...N)},N=>{l[C]=N})},(h,C)=>{l[h]=C(s)});return d.length>0?Ls.serror(d):Ls.svalue(l)},Aw=t=>({extract:(l,d)=>t().extract(l,d),toString:()=>t().toString()}),_R=t=>$o(la(t,Po)),za=t=>{const s=Zt(t),c=ao(t,(d,g)=>N1(g,h=>uo(d,{[h]:!0}),te(d)),{});return{extract:(d,g)=>{const h=ar(g)?[]:_R(g),C=ho(h,S=>!ac(c,S));return C.length===0?s.extract(d,g):Xi(d,C)},toString:s.toString}},Zt=t=>({extract:(l,d)=>$1(l,d,t),toString:()=>`obj{
`+Pe(t,d=>N1(d,(g,h,C,S)=>g+" -> "+S.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),Yu=t=>({extract:(l,d)=>{const g=Pe(d,(h,C)=>t.extract(l.concat(["["+C+"]"]),h));return O2.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Yb=(t,s)=>{const c=s!==void 0?s:Sn;return{extract:(g,h)=>{const C=[];for(const S of t){const T=S.extract(g,h);if(T.stype===vc.Value)return{stype:vc.Value,svalue:c(T.svalue)};C.push(T)}return O2.consolidateArr(C)},toString:()=>"oneOf("+Pe(t,g=>g.toString()).join(", ")+")"}},ik=(t,s)=>{const c=(g,h)=>Yu(zg(t)).extract(g,h);return{extract:(g,h)=>{const C=$o(h),S=c(g,C);return Ls.bind(S,T=>{const O=Pe(T,N=>Ku(N,N,Qi(),s));return Zt(O).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},R2=(t,s)=>{const c=Dr(s);return{extract:(g,h)=>c().extract(g,h),toString:()=>c().toString()}},Ug=Oa(Yu,Zt),Xb=(t,s,c,l)=>at(c,l).fold(()=>Ew(t,c,l),g=>g.extract(t.concat(["branch: "+l]),s)),fi=(t,s)=>({extract:(d,g)=>at(g,t).fold(()=>xw(d,t),C=>Xb(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+$o(s)}),M2=()=>Yu(qb),Wg=t=>zg(s=>t(s).fold(Ls.serror,Ls.svalue)),Ow=(t,s)=>ik(c=>Ls.fromResult(t(c)),s),Dw=(t,s,c)=>{const l=s.extract([t],c);return Ls.mapError(l,d=>({input:c,errors:d}))},ws=(t,s,c)=>Ls.toResult(Dw(t,s,c)),gi=t=>t.fold(s=>{throw new Error(Of(s))},Sn),Va=(t,s,c)=>gi(ws(t,s,c)),Of=t=>`Errors: 
`+Gu(t.errors).join(`
`)+`

Input object: `+Hd(t.input),Nc=(t,s)=>fi(t,Io(s,Zt)),N2=(t,s)=>R2(t,s),Bc=Ku,Yc=ma,Jb=t=>Wg(s=>bo(t,s)?Qt.value(s):Qt.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),$e=t=>Bc(t,t,Qi(),qu()),Sl=(t,s)=>Bc(t,t,Qi(),s),Rw=t=>Sl(t,x2),Mr=t=>Sl(t,tn),wl=(t,s)=>Bc(t,t,Qi(),Jb(s)),eu=t=>Sl(t,cp),Qb=(t,s)=>Bc(t,t,Vg(),zg(c=>Ls.serror("The field: "+t+" is forbidden. "+s))),tu=(t,s)=>Bc(t,t,Qi(),Zt(s)),Mw=(t,s)=>Bc(t,t,Qi(),Ug(s)),xl=(t,s)=>Bc(t,t,Qi(),Yu(s)),Qn=t=>Bc(t,t,Vg(),qu()),Ua=(t,s)=>Bc(t,t,Vg(),s),I1=t=>Ua(t,x2),nr=t=>Ua(t,tn),F1=(t,s)=>Ua(t,Jb(s)),hi=t=>Ua(t,cp),ev=(t,s)=>Ua(t,Yu(s)),El=(t,s)=>Ua(t,Zt(s)),Nw=(t,s)=>Ua(t,za(s)),pe=(t,s)=>Bc(t,t,k2(s),qu()),pi=(t,s,c)=>Bc(t,t,k2(s),c),Bw=(t,s)=>pi(t,s,x2),Vo=(t,s)=>pi(t,s,tn),us=(t,s,c)=>pi(t,s,Jb(c)),yc=(t,s)=>pi(t,s,rp),Uo=(t,s)=>pi(t,s,cp),Pw=(t,s)=>pi(t,s,Tw),Df=(t,s,c)=>pi(t,s,Yu(c)),B2=(t,s,c)=>pi(t,s,Zt(c)),Zg=(t,s)=>{const c={};return vs(t,(l,d)=>{bo(s,d)||(c[d]=l)}),c},jg=(t,s)=>({[t]:s}),$w=t=>{const s={};return ft(t,c=>{s[c.key]=c.value}),s},Iw=(t,s)=>Zg(t,s),Gg=(t,s)=>jg(t,s),ap=t=>$w(t),P2=(t,s)=>t.length===0?Qt.value(s):Qt.value(uo(s,ff.apply(void 0,t))),uk=t=>Qt.error(qt(t)),Fw=(t,s)=>{const c=si(t);return c.errors.length>0?uk(c.errors):P2(c.values,s)},Pc=te,Pm=Pc("touchstart"),nu=Pc("touchmove"),Xu=Pc("touchend"),Tl=Pc("touchcancel"),wa=Pc("mousedown"),qg=Pc("mousemove"),Er=Pc("mouseout"),tv=Pc("mouseup"),Ul=Pc("mouseover"),Xc=Pc("focusin"),Lw=Pc("focusout"),ec=Pc("keydown"),Rf=Pc("keyup"),$m=Pc("input"),Mf=Pc("change"),Nf=Pc("click"),dk=Pc("transitioncancel"),L1=Pc("transitionend"),lp=Pc("transitionstart"),Hw=Pc("selectstart"),or=t=>te("alloy."+t),H1={tap:or("tap")},zd=or("focus"),z1=or("blur.post"),$2=or("paste.post"),Kg=or("receive"),Wl=or("execute"),Bf=or("focus.item"),Pf=H1.tap,zw=or("longpress"),nv=or("sandbox.close"),V1=or("typeahead.cancel"),Yg=or("system.init"),Vw=or("system.touchmove"),ip=or("system.touchend"),I2=or("system.scroll"),Ju=or("system.resize"),bi=or("system.attached"),Vd=or("system.detached"),Im=or("system.dismissRequested"),Uw=or("system.repositionRequested"),$f=or("focusmanager.shifted"),ov=or("slotcontainer.visibility"),Xg=or("system.external.element.scroll"),F2=or("change.tab"),Ww=or("dismiss.tab"),U1=or("highlight"),sv=or("dehighlight"),mo=t=>Em(t),Zw="unknown";var up;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(up||(up={}));const L2=Et({}),W1=(t,s)=>{const c=[],l=new Date().getTime();return{logEventCut:(d,g,h)=>{c.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{c.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{c.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{c.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{c.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();bo(["mousemove","mouseover","mouseout",Yg()],t)||console.log(t,{event:t,time:d-l,target:s.dom,sequence:Pe(c,g=>bo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+mo(g.target)+")":g.outcome)})}}},mk=(t,s,c)=>{switch(at(L2.get(),t).orThunk(()=>{const d=$o(L2.get());return An(d,g=>t.indexOf(g)>-1?A.some(L2.get()[g]):A.none())}).getOr(up.NORMAL)){case up.NORMAL:return c(rv());case up.LOGGING:{const d=W1(t,s),g=c(d);return d.write(),g}case up.STOP:return!0}},Nr=["alloy/data/Fields","alloy/debugging/Debugging"],fk=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Jt(s,c=>c.indexOf("alloy")>0&&!br(Nr,l=>c.indexOf(l)>-1)).getOr(Zw)}else return Zw},gk={logEventCut:ae,logEventStopped:ae,logNoParent:ae,logEventNoHandlers:ae,logEventResponse:ae,write:ae},H2=(t,s,c)=>mk(t,s,c),rv=te(gk),z2=te([$e("menu"),$e("selectedMenu")]),V2=te([$e("item"),$e("selectedItem")]);te(Zt(V2().concat(z2())));const AR=te(Zt(V2())),cv=tu("initSize",[$e("numColumns"),$e("numRows")]),hk=()=>Sl("markers",AR()),jw=()=>tu("markers",[$e("backgroundMenu")].concat(z2()).concat(V2())),ou=t=>tu("markers",Pe(t,$e)),U2=(t,s,c)=>(fk(),Bc(s,s,c,Wg(l=>Qt.value((...d)=>l.apply(void 0,d))))),Zn=t=>U2("onHandler",t,k2(ae)),fr=t=>U2("onKeyboardHandler",t,k2(A.none)),Br=t=>U2("onHandler",t,Qi()),If=t=>U2("onKeyboardHandler",t,Qi()),Co=(t,s)=>Yc(t,te(s)),Jg=t=>Yc(t,Sn),dp=te(cv),Z1=(t,s,c)=>{const l=c.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),h=l.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Qg(h.slice(0,1).concat(h.slice(3)))}),t},Qg=t=>Pe(t,s=>Eo(s,"/*")?s.substring(0,s.length-2):s),av=(t,s)=>{const c=t.toString(),l=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:Qg(g)}),t},Gw=(t,s)=>{const c=s.toString(),l=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,l-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Qg(g.slice(1))}),t},qw=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(()=>{t.apply(null,g),c=null},s)}}},W2=5,lv=400,iv=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},Kw=(t,s)=>{const c=Math.abs(t.clientX-s.x),l=Math.abs(t.clientY-s.y);return c>W2||l>W2},Yw=t=>{const s=dn(),c=Et(!1),l=qw(T=>{t.triggerEvent(zw(),T),c.set(!0)},lv),d=T=>(iv(T).each(O=>{l.cancel();const N={x:O.clientX,y:O.clientY,target:T.target};l.schedule(T),c.set(!1),s.set(N)}),A.none()),g=T=>(l.cancel(),iv(T).each(O=>{s.on(N=>{Kw(O,N)&&s.clear()})}),A.none()),h=T=>{l.cancel();const O=N=>lo(N.target,T.target);return s.get().filter(O).map(N=>c.get()?(T.prevent(),!1):t.triggerEvent(Pf(),T))},C=ap([{key:Pm(),value:d},{key:nu(),value:g},{key:Xu(),value:h}]);return{fireIfReady:(T,O)=>at(C,O).bind(N=>N(T))}};var Ff;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(Ff||(Ff={}));const mp="placeholder",su=Uc.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),uv=t=>In(t,"uiType"),fp=(t,s,c,l)=>t.exists(d=>d!==c.owner)?su.single(!0,te(c)):at(l,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+$o(l)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),j1=(t,s,c,l)=>uv(c)&&c.uiType===mp?fp(t,s,c,l):su.single(!1,te(c)),Xw=(t,s,c,l)=>j1(t,s,c,l).fold((g,h)=>{const C=uv(c)?h(s,c.config,c.validated):h(s),S=at(C,"components").getOr([]),T=_e(S,O=>Xw(t,s,O,l));return[{...C,components:T}]},(g,h)=>{if(uv(c)){const C=h(s,c.config,c.validated);return c.validated.preprocess.getOr(Sn)(C)}else return h(s)}),Jw=(t,s,c,l)=>_e(c,d=>Xw(t,s,d,l)),OR=(t,s)=>{let c=!1;const l=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:te(t),required:g,used:l,replace:d}},G1=(t,s,c,l)=>{const d=Io(l,(h,C)=>OR(C,h)),g=Jw(t,s,c,d);return vs(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},Z2=su.single,Fm=su.multiple,j2=te(mp),gp=Uc.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),vi=pe("factory",{sketch:Sn}),dv=pe("schema",[]),Lm=$e("name"),eh=Bc("pname","pname",T2(t=>"<alloy."+nt(t.name)+">"),qu()),pk=Yc("schema",()=>[Qn("preprocess")]),mv=pe("defaults",te({})),Hm=pe("overrides",te({})),zm=Zt([vi,dv,Lm,eh,mv,Hm]),bk=Zt([vi,dv,Lm,mv,Hm]),tc=Zt([vi,dv,Lm,eh,mv,Hm]),q1=Zt([vi,pk,Lm,$e("unit"),eh,mv,Hm]),Wa=t=>t.fold(A.some,A.none,A.some,A.some),K1=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},Qw=t=>t.fold(Sn,Sn,Sn,Sn),Ud=(t,s)=>c=>{const l=Va("Converting part type",s,c);return t(l)},Tr=Ud(gp.required,zm),Jc=Ud(gp.external,bk),gr=Ud(gp.optional,tc),Y1=Ud(gp.group,q1),G2=te("entirety");var q2=Object.freeze({__proto__:null,required:Tr,external:Jc,optional:gr,group:Y1,asNamedPart:Wa,name:K1,asCommon:Qw,original:G2});const X1=(t,s,c,l)=>uo(s.defaults(t,c,l),c,{uid:t.partUids[s.name]},s.overrides(t,c,l)),vk=(t,s,c)=>{const l={},d={};return ft(c,g=>{g.fold(h=>{l[h.pname]=Z2(!0,(C,S,T)=>h.factory.sketch(X1(C,h,S,T)))},h=>{const C=s.parts[h.name];d[h.name]=te(h.factory.sketch(X1(s,h,C[G2()]),C))},h=>{l[h.pname]=Z2(!1,(C,S,T)=>h.factory.sketch(X1(C,h,S,T)))},h=>{l[h.pname]=Fm(!0,(C,S,T)=>{const O=C[h.name];return Pe(O,N=>h.factory.sketch(uo(h.defaults(C,N,T),N,h.overrides(C,N))))})})}),{internals:te(l),externals:te(d)}},hp=(t,s)=>{const c={};return ft(s,l=>{Wa(l).each(d=>{const g=fv(t,d.pname);c[d.name]=h=>{const C=Va("Part: "+d.name+" in "+t,Zt(d.schema),h);return{...g,config:h,validated:C}}})}),c},fv=(t,s)=>({uiType:j2(),owner:t,name:s}),K2=(t,s,c)=>({uiType:j2(),owner:t,name:s,config:c,validated:{}}),gv=t=>_e(t,s=>s.fold(A.none,A.some,A.none,A.none).map(c=>tu(c.name,c.schema.concat([Jg(G2())]))).toArray()),Y2=t=>Pe(t,K1),Lf=(t,s,c)=>vk(t,s,c),Wd=(t,s,c)=>G1(A.some(t),s,s.components,c),So=(t,s,c)=>{const l=s.partUids[c];return t.getSystem().getByUid(l).toOptional()},Hf=(t,s,c)=>So(t,s,c).getOrDie("Could not find part: "+c),J1=(t,s,c)=>{const l={},d=s.partUids,g=t.getSystem();return ft(c,h=>{l[h]=te(g.getByUid(d[h]))}),l},zf=(t,s)=>{const c=t.getSystem();return Io(s.partUids,(l,d)=>te(c.getByUid(l)))},pp=t=>$o(t.partUids),X2=(t,s,c)=>{const l={},d=s.partUids,g=t.getSystem();return ft(c,h=>{l[h]=te(g.getByUid(d[h]).getOrDie())}),l},ex=(t,s)=>{const c=Y2(s);return ap(Pe(c,l=>({key:l,value:t+"-"+l})))},Vf=t=>Bc("partUids","partUids",M1(s=>ex(s.uid,t)),qu());var Q1=Object.freeze({__proto__:null,generate:hp,generateOne:K2,schemas:gv,names:Y2,substitutes:Lf,components:Wd,defaultUids:ex,defaultUidsSchema:Vf,getAllParts:zf,getAllPartNames:pp,getPart:So,getPartOrDie:Hf,getParts:J1,getPartsOrDie:X2});const bp=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Qc=(t,s,c,l=1)=>{const d=t*l,g=s*l,h=S=>at(c,S).getOr([]),C=(S,T,O)=>{const N=Rt(bp,O);return{offset:is(S,T),classesOn:_e(O,h),classesOff:_e(N,h)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},e0=()=>Qc(0,0,{}),$c=(t,s,c,l,d,g,h,C=!1)=>({x:t,y:s,bubble:c,direction:l,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),Qu=Uc.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),J2=(t,s,c,l,d,g,h,C,S)=>t.fold(s,c,l,d,g,h,C,S),tx=(t,s,c,l)=>t.fold(s,s,l,l,s,l,c,c),Q2=(t,s,c,l)=>t.fold(s,l,s,l,c,c,s,l),hv=Qu.southeast,eC=Qu.southwest,tC=Qu.northeast,nC=Qu.northwest,t0=Qu.south,oC=Qu.north,n0=Qu.east,ru=Qu.west,nx=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},nc=(t,s)=>Ar(["left","right","top","bottom"],c=>at(s,c).map(l=>nx(t,l))),yk=(t,s,c)=>{const l=(S,T)=>s[S].map(O=>{const N=S==="top"||S==="bottom",F=N?c.top:c.left,q=(S==="left"||S==="top"?Math.max:Math.min)(O,T)+F;return N?Cr(q,t.y,t.bottom):Cr(q,t.x,t.right)}).getOr(T),d=l("left",t.x),g=l("top",t.y),h=l("right",t.right),C=l("bottom",t.bottom);return Ss(d,g,h-d,C-g)},Uf="layout",ox=t=>t.x,pv=(t,s)=>t.x+t.width/2-s.width/2,bv=(t,s)=>t.x+t.width-s.width,o0=(t,s)=>t.y-s.height,vv=t=>t.y+t.height,sx=(t,s)=>t.y+t.height/2-s.height/2,s0=t=>t.x+t.width,r0=(t,s)=>t.x-s.width,Hs=(t,s,c)=>$c(ox(t),vv(t),c.southeast(),hv(),"southeast",nc(t,{left:1,top:3}),Uf),sr=(t,s,c)=>$c(bv(t,s),vv(t),c.southwest(),eC(),"southwest",nc(t,{right:0,top:3}),Uf),Cc=(t,s,c)=>$c(ox(t),o0(t,s),c.northeast(),tC(),"northeast",nc(t,{left:1,bottom:2}),Uf),kr=(t,s,c)=>$c(bv(t,s),o0(t,s),c.northwest(),nC(),"northwest",nc(t,{right:0,bottom:2}),Uf),_r=(t,s,c)=>$c(pv(t,s),o0(t,s),c.north(),oC(),"north",nc(t,{bottom:2}),Uf),js=(t,s,c)=>$c(pv(t,s),vv(t),c.south(),t0(),"south",nc(t,{top:3}),Uf),c0=(t,s,c)=>$c(s0(t),sx(t,s),c.east(),n0(),"east",nc(t,{left:0}),Uf),a0=(t,s,c)=>$c(r0(t,s),sx(t,s),c.west(),ru(),"west",nc(t,{right:1}),Uf),sC=()=>[Hs,sr,Cc,kr,js,_r,c0,a0],rx=()=>[sr,Hs,kr,Cc,js,_r,c0,a0],yv=()=>[Cc,kr,Hs,sr,_r,js],Vm=()=>[kr,Cc,sr,Hs,_r,js],Um=()=>[Hs,sr,Cc,kr,js,_r],rC=()=>[sr,Hs,kr,Cc,js,_r],Oe="data-alloy-placement",l0=(t,s)=>{Wt(t,Oe,s)},cx=t=>Ws(t,Oe),Ck=t=>Ln(t,Oe),ed="layout-inset",yi=t=>t.x,cC=(t,s)=>t.x+t.width/2-s.width/2,i0=(t,s)=>t.x+t.width-s.width,vp=t=>t.y,yp=(t,s)=>t.y+t.height-s.height,ax=(t,s)=>t.y+t.height/2-s.height/2,Cp=(t,s,c)=>$c(i0(t,s),yp(t,s),c.insetSouthwest(),nC(),"southwest",nc(t,{right:0,bottom:3}),ed),Cv=(t,s,c)=>$c(yi(t),yp(t,s),c.insetSoutheast(),tC(),"southeast",nc(t,{left:1,bottom:3}),ed),th=(t,s,c)=>$c(i0(t,s),vp(t),c.insetNorthwest(),eC(),"northwest",nc(t,{right:0,top:2}),ed),Zd=(t,s,c)=>$c(yi(t),vp(t),c.insetNortheast(),hv(),"northeast",nc(t,{left:1,top:2}),ed),Zl=(t,s,c)=>$c(cC(t,s),vp(t),c.insetNorth(),t0(),"north",nc(t,{top:2}),ed),Sp=(t,s,c)=>$c(cC(t,s),yp(t,s),c.insetSouth(),oC(),"south",nc(t,{bottom:3}),ed),u0=(t,s,c)=>$c(i0(t,s),ax(t,s),c.insetEast(),ru(),"east",nc(t,{right:0}),ed),aC=(t,s,c)=>$c(yi(t),ax(t,s),c.insetWest(),n0(),"west",nc(t,{left:1}),ed),Sv=t=>{switch(t){case"north":return Zl;case"northeast":return Zd;case"northwest":return th;case"south":return Sp;case"southeast":return Cv;case"southwest":return Cp;case"east":return u0;case"west":return aC}},xa=(t,s,c,l,d)=>cx(l).map(Sv).getOr(Zl)(t,s,c,l,d),d0=t=>{switch(t){case"north":return Sp;case"northeast":return Cv;case"northwest":return Cp;case"south":return Zl;case"southeast":return Zd;case"southwest":return th;case"east":return aC;case"west":return u0}},Sk=(t,s,c,l,d)=>cx(l).map(d0).getOr(Zl)(t,s,c,l,d),wv=(t,s)=>{xr(t,Math.floor(s))},lC=te((t,s)=>{wv(t,s),Qs(t,{"overflow-x":"hidden","overflow-y":"auto"})}),nh=te((t,s)=>{wv(t,s)}),xv=te((t,s)=>{Mg(t,Math.floor(s))});var Wm;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(Wm||(Wm={}));const Ev="data-alloy-vertical-dir",wk=t=>O1(t,s=>Zc(s)&&Js(s,"data-alloy-vertical-dir")===Wm.BottomToTop);var ea;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(ea||(ea={}));const cu={init:()=>kl({readState:te("No State required")})},kl=t=>t,xk={can:wt,abort:bn,run:ae},Wf=t=>{if(!ac(t,"can")&&!ac(t,"abort")&&!ac(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...xk,...t}},Ek=(t,s)=>(...c)=>xo(t,(l,d)=>l&&s(d).apply(void 0,c),!0),Tk=(t,s)=>(...c)=>xo(t,(l,d)=>l||s(d).apply(void 0,c),!1),kk=t=>St(t)?{can:wt,abort:bn,run:t}:t,_k=t=>{const s=Ek(t,d=>d.can),c=Tk(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{ft(t,g=>{g.run.apply(void 0,d)})}}},Tn=(t,s)=>{Tv(t,t.element,s,{})},Pt=(t,s,c)=>{Tv(t,t.element,s,c)},oh=t=>{Tn(t,Wl())},m0=(t,s,c)=>{Tv(t,s,c,{})},Tv=(t,s,c,l)=>{const d={target:s,...l};t.getSystem().triggerEvent(c,s,d)},Ak=(t,s,c,l)=>{const d={...l,target:s};t.getSystem().triggerEvent(c,s,d)},lx=(t,s,c,l)=>{t.getSystem().triggerEvent(c,s,l.event)},es=t=>ap(t),kv=(t,s)=>({key:t,value:Wf({abort:s})}),iC=(t,s)=>({key:t,value:Wf({can:s})}),ix=t=>({key:t,value:Wf({run:(s,c)=>{c.event.prevent()}})}),Me=(t,s)=>({key:t,value:Wf({run:s})}),_v=(t,s,c)=>({key:t,value:Wf({run:(l,d)=>{s.apply(void 0,[l,d].concat(c))}})}),ux=t=>s=>Me(t,s),Av=t=>s=>({key:t,value:Wf({run:(c,l)=>{mi(c,l)&&s(c,l)}})}),dx=(t,s)=>Me(t,(c,l)=>{c.getSystem().getByUid(s).each(d=>{lx(d,d.element,t,l)})}),Zf=(t,s,c)=>{const l=s.partUids[c];return dx(t,l)},sh=(t,s)=>Me(t,(c,l)=>{const d=l.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>Pg(d.target,C=>c.getSystem().getByDom(C).toOptional(),bn).getOr(c));s(c,g,l)}),jf=t=>Me(t,(s,c)=>{c.cut()}),mx=t=>Me(t,(s,c)=>{c.stop()}),wp=(t,s)=>Av(t)(s),Wo=Av(bi()),td=Av(Vd()),uC=Av(Yg()),Zm=ux(Wl()),au=t=>({classes:Lr(t.classes)?[]:t.classes,attributes:Lr(t.attributes)?{}:t.attributes,styles:Lr(t.styles)?{}:t.styles}),dC=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),Ok=(t,s,c)=>Zm(l=>{c(l,t,s)}),mC=(t,s,c)=>uC((l,d)=>{c(l,t,s)}),Dk=(t,s,c,l,d,g)=>{const h=za(t),C=El(s,[Nw("config",t)]);return Ov(h,C,s,c,l,d,g)},fx=(t,s,c,l,d,g)=>{const h=t,C=El(s,[Ua("config",t)]);return Ov(h,C,s,c,l,d,g)},Rk=(t,s,c)=>Z1((d,...g)=>{const h=[d].concat(g);return d.config({name:te(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},C=>{const S=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},c,s),Mk=t=>({key:t,value:void 0}),Ov=(t,s,c,l,d,g,h)=>{const C=N=>ac(N,c)?N[c]():A.none(),S=Io(d,(N,F)=>Rk(c,N,F)),O={...Io(g,(N,F)=>av(N,F)),...S,revoke:Rn(Mk,c),config:N=>{const F=Va(c+"-config",t,N);return{key:c,value:{config:F,me:O,configAsRaw:Dr(()=>Va(c+"-config",t,N)),initialConfig:N,state:h}}},schema:te(s),exhibit:(N,F)=>Ur(C(N),at(l,"exhibit"),(W,q)=>q(F,W.config,W.state)).getOrThunk(()=>au({})),name:te(c),handlers:N=>C(N).map(F=>at(l,"events").getOr(()=>({}))(F.config,F.state)).getOr({})};return O},We=t=>ap(t),Nk=za([$e("fields"),$e("name"),pe("active",{}),pe("apis",{}),pe("state",cu),pe("extra",{})]),Sc=t=>{const s=Va("Creating behaviour: "+t.name,Nk,t);return Dk(s.fields,s.name,s.active,s.apis,s.extra,s.state)},gx=za([$e("branchKey"),$e("branches"),$e("name"),pe("active",{}),pe("apis",{}),pe("state",cu),pe("extra",{})]),vt=t=>{const s=Va("Creating behaviour: "+t.name,gx,t);return fx(Nc(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},Dv=te(void 0),hx=(t,s)=>{const c=es(s);return Sc({fields:[$e("enabled")],name:t,active:{events:te(c)}})},sn=(t,s)=>{const c=hx(t,s);return{key:t,value:{config:{},me:c,configAsRaw:te({}),initialConfig:{},state:cu}}},Bk=t=>({init:()=>{const c=Et(t);return{get:()=>c.get(),set:C=>c.set(C),clear:()=>c.set(t),readState:()=>c.get()}}}),px=(t,s)=>{s.ignore||(ro(t.element),s.onFocus(t))};var Ik=Object.freeze({__proto__:null,focus:px,blur:(t,s)=>{s.ignore||pl(t.element)},isFocused:t=>bl(t.element)}),ta=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return au(c)},events:t=>es([Me(zd(),(s,c)=>{px(s,t),c.stop()})].concat(t.stopMousedown?[Me(wa(),(s,c)=>{c.event.prevent()})]:[]))}),f0=[Zn("onFocus"),pe("stopMousedown",!1),pe("ignore",!1)];const Yt=Sc({fields:f0,name:"focusing",active:ta,apis:Ik}),fC=[8],jm=[9],Ci=[13],Rv=[27],Za=[32],g0=[37],h0=[38],p0=[39],xp=[40],bx=(t,s,c)=>{const l=gs(t.slice(0,s)),d=gs(t.slice(s+1));return Jt(l.concat(d),c)},Hk=(t,s,c)=>{const l=gs(t.slice(0,s));return Jt(l,c)},lu=(t,s,c)=>{const l=t.slice(0,s),d=t.slice(s+1);return Jt(d.concat(l),c)},rh=(t,s,c)=>{const l=t.slice(s+1);return Jt(l,c)},zn=t=>s=>{const c=s.raw;return bo(t,c.which)},Si=t=>s=>Da(t,c=>c(s)),Gf=t=>t.raw.shiftKey===!0,zk=t=>t.raw.ctrlKey===!0,Ep=De(Gf),jn=(t,s)=>({matches:t,classification:s}),Vk=(t,s)=>Jt(t,l=>l.matches(s)).map(l=>l.classification),Uk=(t,s,c,l)=>{const d=zo(t.element,"."+s.highlightClass);ft(d,g=>{br(l,C=>lo(C.element,g))||(Ao(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),Tn(C,sv())}))})},gC=(t,s,c)=>Uk(t,s,c,[]),Wk=(t,s,c,l)=>{hC(t,s,c,l)&&(Ao(l.element,s.highlightClass),s.onDehighlight(t,l),Tn(l,sv()))},Mv=(t,s,c,l)=>{Uk(t,s,c,[l]),hC(t,s,c,l)||(hs(l.element,s.highlightClass),s.onHighlight(t,l),Tn(l,U1()))},Zk=(t,s,c)=>{Bv(t,s).each(l=>{Mv(t,s,c,l)})},DR=(t,s,c)=>{yx(t,s).each(l=>{Mv(t,s,c,l)})},RR=(t,s,c,l)=>{Nv(t,s,c,l).fold(d=>{throw d},d=>{Mv(t,s,c,d)})},vx=(t,s,c,l)=>{const d=bC(t,s);Jt(d,l).each(h=>{Mv(t,s,c,h)})},hC=(t,s,c,l)=>Jr(l.element,s.highlightClass),b0=(t,s,c)=>io(t.element,"."+s.highlightClass).bind(l=>t.getSystem().getByDom(l).toOptional()),Nv=(t,s,c,l)=>{const d=zo(t.element,"."+s.itemClass);return A.from(d[l]).fold(()=>Qt.error(new Error("No element found with index "+l)),t.getSystem().getByDom)},Bv=(t,s,c)=>io(t.element,"."+s.itemClass).bind(l=>t.getSystem().getByDom(l).toOptional()),yx=(t,s,c)=>{const l=zo(t.element,"."+s.itemClass);return(l.length>0?A.some(l[l.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Tp=(t,s,c,l)=>{const d=zo(t.element,"."+s.itemClass);return vo(d,h=>Jr(h,s.highlightClass)).bind(h=>{const C=ol(h,l,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},jk=(t,s,c)=>Tp(t,s,c,-1),pC=(t,s,c)=>Tp(t,s,c,1),bC=(t,s,c)=>{const l=zo(t.element,"."+s.itemClass);return oi(Pe(l,d=>t.getSystem().getByDom(d).toOptional()))};var Cx=Object.freeze({__proto__:null,dehighlightAll:gC,dehighlight:Wk,highlight:Mv,highlightFirst:Zk,highlightLast:DR,highlightAt:RR,highlightBy:vx,isHighlighted:hC,getHighlighted:b0,getFirst:Bv,getLast:yx,getPrevious:jk,getNext:pC,getCandidates:bC}),Sx=[$e("highlightClass"),$e("itemClass"),Zn("onHighlight"),Zn("onDehighlight")];const Gn=Sc({fields:Sx,name:"highlighting",apis:Cx}),wx=(t,s,c)=>{s.exists(d=>c.exists(g=>lo(g,d)))||Pt(t,$f(),{prevFocus:s,newFocus:c})},v0=()=>{const t=c=>Is(c.element);return{get:t,set:(c,l)=>{const d=t(c);c.getSystem().triggerFocus(l,c.element);const g=t(c);wx(c,d,g)}}},xx=()=>{const t=c=>Gn.getHighlighted(c).map(l=>l.element);return{get:t,set:(c,l)=>{const d=t(c);c.getSystem().getByDom(l).fold(ae,h=>{Gn.highlight(c,h)});const g=t(c);wx(c,d,g)}}},ch=(t,s,c,l,d)=>{const g=()=>t.concat([pe("focusManager",v0()),pi("focusInside","onFocus",Wg(T=>bo(["onFocus","onEnterOrSpace","onApi"],T)?Qt.value(T):Qt.error("Invalid value for focusInside"))),Co("handler",S),Co("state",s),Co("sendFocusIn",d)]),h=(T,O,N,F,W)=>{const q=N(T,O,F,W);return Vk(q,O.event).bind(ee=>ee(T,O,F,W))},S={schema:g,processKey:h,toEvents:(T,O)=>{const N=T.focusInside!==Ff.OnFocusMode?A.none():d(T).map(q=>Me(zd(),(ee,ce)=>{q(ee,T,O),ce.stop()})),F=(q,ee)=>{const ce=zn(Za.concat(Ci))(ee.event);T.focusInside===Ff.OnEnterOrSpaceMode&&ce&&mi(q,ee)&&d(T).each(Q=>{Q(q,T,O),ee.stop()})},W=[Me(ec(),(q,ee)=>{h(q,ee,c,T,O).fold(()=>{F(q,ee)},ce=>{ee.stop()})}),Me(Rf(),(q,ee)=>{h(q,ee,l,T,O).each(ce=>{ee.stop()})})];return es(N.toArray().concat(W))}};return S},Ex=t=>{const s=[Qn("onEscape"),Qn("onEnter"),pe("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),pe("firstTabstop",0),pe("useTabstopAt",wt),Qn("visibilitySelector")].concat([t]),c=(Q,ue)=>{const de=Q.visibilitySelector.bind(ye=>hc(ue,ye)).getOr(ue);return wn(de)>0},l=(Q,ue)=>{const de=zo(Q.element,ue.selector),ye=ho(de,Te=>c(ue,Te));return A.from(ye[ue.firstTabstop])},d=(Q,ue)=>ue.focusManager.get(Q).bind(de=>hc(de,ue.selector)),g=(Q,ue)=>c(Q,ue)&&Q.useTabstopAt(ue),h=(Q,ue,de)=>{l(Q,ue).each(ye=>{ue.focusManager.set(Q,ye)})},C=(Q,ue,de,ye,Te)=>Te(ue,de,rt=>g(ye,rt)).fold(()=>ye.cyclic?A.some(!0):A.none(),rt=>(ye.focusManager.set(Q,rt),A.some(!0))),S=(Q,ue,de,ye)=>{const Te=ho(zo(Q.element,de.selector),rt=>c(de,rt));return d(Q,de).bind(rt=>vo(Te,Rn(lo,rt)).bind(ke=>C(Q,Te,ke,de,ye)))},T=(Q,ue,de)=>{const ye=de.cyclic?bx:Hk;return S(Q,ue,de,ye)},O=(Q,ue,de)=>{const ye=de.cyclic?lu:rh;return S(Q,ue,de,ye)},N=Q=>Iu(Q).bind(Fu).exists(ue=>lo(ue,Q)),F=(Q,ue,de)=>d(Q,de).filter(ye=>!de.useTabstopAt(ye)).bind(ye=>(N(ye)?T:O)(Q,ue,de)),W=(Q,ue,de)=>de.onEnter.bind(ye=>ye(Q,ue)),q=(Q,ue,de)=>de.onEscape.bind(ye=>ye(Q,ue)),ee=te([jn(Si([Gf,zn(jm)]),T),jn(zn(jm),O),jn(Si([Ep,zn(Ci)]),W)]),ce=te([jn(zn(Rv),q),jn(zn(jm),F)]);return ch(s,cu.init,ee,ce,()=>A.some(h))};var Gk=Ex(Yc("cyclic",bn)),Pv=Ex(Yc("cyclic",wt));const ah=t=>Ac("input")(t)&&Js(t,"type")!=="radio"||Ac("textarea")(t),Tx=(t,s,c)=>(m0(t,c,Wl()),A.some(!0)),qf=(t,s,c)=>ah(c)&&zn(Za)(s.event)?A.none():Tx(t,s,c),kp=(t,s)=>A.some(!0),qk=[pe("execute",qf),pe("useSpace",!1),pe("useEnter",!0),pe("useControlEnter",!1),pe("useDown",!1)],kx=(t,s,c)=>c.execute(t,s,t.element),Kk=(t,s,c,l)=>{const d=c.useSpace&&!ah(t.element)?Za:[],g=c.useEnter?Ci:[],h=c.useDown?xp:[],C=d.concat(g).concat(h);return[jn(zn(C),kx)].concat(c.useControlEnter?[jn(Si([zk,zn(Ci)]),kx)]:[])},Yk=(t,s,c,l)=>c.useSpace&&!ah(t.element)?[jn(zn(Za),kp)]:[];var _x=ch(qk,cu.init,Kk,Yk,()=>A.none());const Kf=()=>{const t=dn();return kl({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Ax=Object.freeze({__proto__:null,flatgrid:Kf,init:t=>t.state(t)});const Ox=t=>(s,c,l,d)=>{const g=t(s.element);return y0(g,s,c,l,d)},vC=(t,s)=>{const c=Ng(t,s);return Ox(c)},yC=(t,s)=>{const c=Ng(s,t);return Ox(c)},$v=t=>(s,c,l,d)=>y0(t,s,c,l,d),y0=(t,s,c,l,d)=>l.focusManager.get(s).bind(h=>t(s.element,h,l,d)).map(h=>(l.focusManager.set(s,h),!0)),CC=$v,Iv=$v,C0=$v,Dx=(t,s)=>vo(t,s).map(c=>({index:c,candidates:t})),Fv=(t,s,c)=>{const l=h=>lo(h,s),d=zo(t,c),g=ho(d,Bd);return Dx(g,l)},S0=(t,s)=>vo(t,c=>lo(s,c)),lh=(t,s,c,l)=>{const d=Math.floor(s/c),g=s%c;return l(d,g).bind(h=>{const C=h.row*c+h.column;return C>=0&&C<t.length?A.some(t[C]):A.none()})},_p=(t,s,c,l,d)=>lh(t,s,l,(g,h)=>{const S=g===c-1?t.length-g*l:l,T=ol(h,d,0,S-1);return A.some({row:g,column:T})}),Rx=(t,s,c,l,d)=>lh(t,s,l,(g,h)=>{const C=ol(g,d,0,c-1),T=C===c-1?t.length-C*l:l,O=Cr(h,0,T-1);return A.some({row:C,column:O})}),Mx=(t,s,c,l)=>_p(t,s,c,l,1),Jk=(t,s,c,l)=>_p(t,s,c,l,-1),Qk=(t,s,c,l)=>Rx(t,s,c,l,-1),Nx=(t,s,c,l)=>Rx(t,s,c,l,1),e3=[$e("selector"),pe("execute",qf),fr("onEscape"),pe("captureTab",!1),dp()],Lv=(t,s,c)=>{io(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},Ap=(t,s)=>s.focusManager.get(t).bind(c=>hc(c,s.selector)),ih=(t,s,c,l)=>Ap(t,c).bind(d=>c.execute(t,s,d)),Yf=t=>(s,c,l,d)=>Fv(s,c,l.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),SC=(t,s,c)=>c.captureTab?A.some(!0):A.none(),Bx=(t,s,c)=>c.onEscape(t,s),wC=Yf(Jk),Px=Yf(Mx),t3=Yf(Qk),$x=Yf(Nx),n3=te([jn(zn(g0),vC(wC,Px)),jn(zn(p0),yC(wC,Px)),jn(zn(h0),CC(t3)),jn(zn(xp),Iv($x)),jn(Si([Gf,zn(jm)]),SC),jn(Si([Ep,zn(jm)]),SC),jn(zn(Za.concat(Ci)),ih)]),xC=te([jn(zn(Rv),Bx),jn(zn(Za),kp)]);var EC=ch(e3,Kf,n3,xC,()=>A.some(Lv));const Op=(t,s,c,l,d)=>{const g=C=>da(C)==="button"&&Js(C,"disabled")==="disabled",h=(C,S,T)=>d(C,S,l,0,T.length-1,T[S],O=>g(T[O])?h(C,O,T):A.from(T[O]));return Fv(t,c,s).bind(C=>{const S=C.index,T=C.candidates;return h(S,S,T)})},Dp=(t,s,c,l)=>Op(t,s,c,l,(d,g,h,C,S,T,O)=>{const N=Cr(g+h,C,S);return N===d?A.from(T):O(N)}),Hv=(t,s,c,l)=>Op(t,s,c,l,(d,g,h,C,S,T,O)=>{const N=ol(g,h,C,S);return N===d?A.none():O(N)}),Ix=[$e("selector"),pe("getInitial",A.none),pe("execute",qf),fr("onEscape"),pe("executeOnMove",!1),pe("allowVertical",!0),pe("allowHorizontal",!0),pe("cycles",!0)],o3=(t,s)=>s.focusManager.get(t).bind(c=>hc(c,s.selector)),Rp=(t,s,c)=>o3(t,c).bind(l=>c.execute(t,s,l)),Fx=(t,s,c)=>{s.getInitial(t).orThunk(()=>io(t.element,s.selector)).each(l=>{s.focusManager.set(t,l)})},TC=(t,s,c)=>(c.cycles?Hv:Dp)(t,c.selector,s,-1),zv=(t,s,c)=>(c.cycles?Hv:Dp)(t,c.selector,s,1),kC=t=>(s,c,l,d)=>t(s,c,l,d).bind(()=>l.executeOnMove?Rp(s,c,l):A.some(!0)),Lx=(t,s,c)=>c.onEscape(t,s),s3=(t,s,c,l)=>{const d=[...c.allowHorizontal?g0:[]].concat(c.allowVertical?h0:[]),g=[...c.allowHorizontal?p0:[]].concat(c.allowVertical?xp:[]);return[jn(zn(d),kC(vC(TC,zv))),jn(zn(g),kC(yC(TC,zv))),jn(zn(Ci),Rp),jn(zn(Za),Rp)]},Mp=te([jn(zn(Za),kp),jn(zn(Rv),Lx)]);var r3=ch(Ix,cu.init,s3,Mp,()=>A.some(Fx));const Vv=(t,s,c)=>A.from(t[s]).bind(l=>A.from(l[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),Hx=(t,s,c,l)=>{const g=t[s].length,h=ol(c,l,0,g-1);return Vv(t,s,h)},zx=(t,s,c,l)=>{const d=ol(c,l,0,t.length-1),g=t[d].length,h=Cr(s,0,g-1);return Vv(t,d,h)},Xf=(t,s,c,l)=>{const g=t[s].length,h=Cr(c+l,0,g-1);return Vv(t,s,h)},c3=(t,s,c,l)=>{const d=Cr(c+l,0,t.length-1),g=t[d].length,h=Cr(s,0,g-1);return Vv(t,d,h)},Vx=(t,s,c)=>Hx(t,s,c,1),Ux=(t,s,c)=>Hx(t,s,c,-1),Uv=(t,s,c)=>zx(t,c,s,-1),Wx=(t,s,c)=>zx(t,c,s,1),Zx=(t,s,c)=>Xf(t,s,c,-1),a3=(t,s,c)=>Xf(t,s,c,1),w0=(t,s,c)=>c3(t,c,s,-1),x0=(t,s,c)=>c3(t,c,s,1),E0=[tu("selectors",[$e("row"),$e("cell")]),pe("cycles",!0),pe("previousSelector",A.none),pe("execute",qf)],MR=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return io(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},jx=(t,s,c)=>Is(t.element).bind(l=>c.execute(t,s,l)),Np=(t,s)=>Pe(t,c=>zo(c,s.selectors.cell)),uh=(t,s)=>(c,l,d)=>{const g=d.cycles?t:s;return hc(l,d.selectors.row).bind(h=>{const C=zo(h,d.selectors.cell);return S0(C,l).bind(S=>{const T=zo(c,d.selectors.row);return S0(T,h).bind(O=>{const N=Np(T,d);return g(N,O,S).map(F=>F.cell)})})})},T0=uh(Ux,Zx),_C=uh(Vx,a3),l3=uh(Uv,w0),i3=uh(Wx,x0),u3=te([jn(zn(g0),vC(T0,_C)),jn(zn(p0),yC(T0,_C)),jn(zn(h0),CC(l3)),jn(zn(xp),Iv(i3)),jn(zn(Za.concat(Ci)),jx)]),Bp=te([jn(zn(Za),kp)]);var jd=ch(E0,cu.init,u3,Bp,()=>A.some(MR));const dh=[$e("selector"),pe("execute",qf),pe("moveOnTab",!1)],mh=(t,s,c)=>c.focusManager.get(t).bind(l=>c.execute(t,s,l)),d3=(t,s,c)=>{io(t.element,s.selector).each(l=>{s.focusManager.set(t,l)})},Gm=(t,s,c)=>Hv(t,c.selector,s,-1),nd=(t,s,c)=>Hv(t,c.selector,s,1),Pp=(t,s,c,l)=>c.moveOnTab?C0(Gm)(t,s,c,l):A.none(),AC=(t,s,c,l)=>c.moveOnTab?C0(nd)(t,s,c,l):A.none(),Gx=te([jn(zn(h0),C0(Gm)),jn(zn(xp),C0(nd)),jn(Si([Gf,zn(jm)]),Pp),jn(Si([Ep,zn(jm)]),AC),jn(zn(Ci),mh),jn(zn(Za),mh)]),OC=te([jn(zn(Za),kp)]);var od=ch(dh,cu.init,Gx,OC,()=>A.some(d3));const k0=[fr("onSpace"),fr("onEnter"),fr("onShiftEnter"),fr("onLeft"),fr("onRight"),fr("onTab"),fr("onShiftTab"),fr("onUp"),fr("onDown"),fr("onEscape"),pe("stopSpaceKeyup",!1),Qn("focusIn")],iu=(t,s,c)=>[jn(zn(Za),c.onSpace),jn(Si([Ep,zn(Ci)]),c.onEnter),jn(Si([Gf,zn(Ci)]),c.onShiftEnter),jn(Si([Gf,zn(jm)]),c.onShiftTab),jn(Si([Ep,zn(jm)]),c.onTab),jn(zn(h0),c.onUp),jn(zn(xp),c.onDown),jn(zn(g0),c.onLeft),jn(zn(p0),c.onRight),jn(zn(Za),c.onSpace)],qx=(t,s,c)=>[...c.stopSpaceKeyup?[jn(zn(Za),kp)]:[],jn(zn(Rv),c.onEscape)];var $p=ch(k0,cu.init,iu,qx,t=>t.focusIn);const Wv=Gk.schema(),NR=Pv.schema(),DC=r3.schema(),Zv=EC.schema(),m3=jd.schema(),Gd=_x.schema(),jv=od.schema(),RC=$p.schema();var fh=Object.freeze({__proto__:null,acyclic:Wv,cyclic:NR,flow:DC,flatgrid:Zv,matrix:m3,execution:Gd,menu:jv,special:RC});const Gv=t=>ac(t,"setGridSize"),kt=vt({branchKey:"mode",branches:fh,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},l=>{l(t,s,c)})},setGridSize:(t,s,c,l,d)=>{Gv(c)?c.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:Ax}),qv=nt("alloy-premade"),_0=t=>(Object.defineProperty(t.element.dom,qv,{value:t.uid,writable:!0}),Gg(qv,t)),MC=t=>In(t.dom,qv),NC=t=>at(t,qv),Ip=t=>Gw((s,...c)=>t(s.getApis(),s,...c),t),uu=t=>t.getSystem().isConnected(),A0=t=>{Tn(t,Vd());const s=t.components();ft(s,A0)},Fp=t=>{const s=t.components();ft(s,Fp),Tn(t,bi())},Kv=(t,s)=>{t.getSystem().addToWorld(s),Cs(t.element)&&Fp(s)},Yv=t=>{A0(t),t.getSystem().removeFromWorld(t)},BC=(t,s)=>{jc(t.element,s.element)},Kx=t=>{ft(t.components(),s=>yl(s.element)),Ia(t.element),t.syncComponents()},Yx=(t,s,c)=>{const l=t.components();Kx(t);const d=c(s),g=Rt(l,d);ft(g,h=>{A0(h),t.getSystem().removeFromWorld(h)}),ft(d,h=>{uu(h)?BC(t,h):(t.getSystem().addToWorld(h),BC(t,h),Cs(t.element)&&Fp(h))}),t.syncComponents()},wi=(t,s,c)=>{const l=t.components(),d=_e(s,C=>NC(C).toArray());ft(l,C=>{bo(d,C)||Yv(C)});const g=c(s),h=Rt(l,g);ft(h,C=>{uu(C)&&Yv(C)}),ft(g,C=>{uu(C)||Kv(t,C)}),t.syncComponents()},du=(t,s)=>{Xv(t,s,jc)},Xv=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),Cs(t.element)&&Fp(s),t.syncComponents()},Jf=t=>{A0(t),yl(t.element),t.getSystem().removeFromWorld(t)},Os=t=>{const s=Oc(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());Jf(t),s.each(c=>{c.syncComponents()})},fa=t=>{const s=t.components();ft(s,Jf),Ia(t.element),t.syncComponents()},Pr=(t,s)=>{Jv(t,s,jc)},Ic=(t,s)=>{Jv(t,s,Ag)},Jv=(t,s,c)=>{c(t,s.element);const l=mc(s.element);ft(l,d=>{s.getByDom(d).each(Fp)})},xi=t=>{const s=mc(t.element);ft(s,c=>{t.getByDom(c).each(A0)}),yl(t.element)},qm=(t,s,c)=>Ll(t,s).map(d=>{if(c.exists(h=>!lo(h,d))){const h=c.map(da).getOr("span"),C=Je.fromTag(h);return Hu(d,C),C}else return d}),gh=(t,s,c)=>{c.fold(()=>jc(t,s),l=>{lo(l,s)||(Hu(l,s),yl(l))})},Xx=(t,s,c)=>{const l=Pe(s,c),d=mc(t);return ft(d.slice(l.length),yl),l},PC=(t,s,c,l)=>{const d=Ll(t,s),g=l(c,d),h=qm(t,s,d);return gh(t,g.element,h),g},Qv=(t,s,c)=>Xx(t,s,(l,d)=>PC(t,d,l,c)),Jx=(t,s)=>Xx(t,s,(c,l)=>{const d=Ll(t,l);return gh(t,c,d),c}),Lp=(t,s)=>{const c=ys(s),l=vl(c).bind(g=>{const h=C=>lo(g,C);return h(s)?A.some(s):y2(s,h)}),d=t(s);return l.each(g=>{vl(c).filter(h=>lo(h,g)).fold(()=>{ro(g)},ae)}),d},Qx=(t,s)=>{Lp(()=>{Yx(t,s,()=>Pe(s,t.getSystem().build))},t.element)},f3=(t,s)=>{Lp(()=>{wi(t,s,()=>Qv(t.element,s,t.getSystem().buildOrPatch))},t.element)},g3=(t,s,c,l)=>{Yv(s);const d=PC(t.element,c,l,t.getSystem().buildOrPatch);Kv(t,d),t.syncComponents()},Hp=(t,s,c)=>{const l=t.getSystem().build(c);Xv(t,l,s)},h3=(t,s,c,l)=>{Os(s),Hp(t,(d,g)=>Yh(d,g,c),l)},eE=(t,s,c,l)=>(s.reuseDom?f3:Qx)(t,l),ey=(t,s,c,l)=>{Hp(t,jc,l)},$C=(t,s,c,l)=>{Hp(t,Kh,l)},ty=(t,s,c,l)=>{const d=ny(t);Jt(d,h=>lo(l.element,h.element)).each(Os)},ny=(t,s)=>t.components(),tE=(t,s,c,l,d)=>{const g=ny(t);return A.from(g[l]).map(h=>(d.fold(()=>Os(h),C=>{(s.reuseDom?g3:h3)(t,h,l,C)}),h))};var oy=Object.freeze({__proto__:null,append:ey,prepend:$C,remove:ty,replaceAt:tE,replaceBy:(t,s,c,l,d)=>{const g=ny(t);return vo(g,l).bind(h=>tE(t,s,c,h,d))},set:eE,contents:ny});const an=Sc({fields:[yc("reuseDom",!0)],name:"replacing",apis:oy}),p3=(t,s,c)=>lo(s,t.element)&&!lo(s,c),Ei=es([iC(zd(),(t,s)=>{const c=s.event,l=c.originator,d=c.target;return p3(t,l,d)?(console.warn(zd()+` did not get interpreted by the desired target. 
Originator: `+mo(l)+`
Target: `+mo(d)+`
Check the `+zd()+" event handlers"),!1):!0})]);var b3=Object.freeze({__proto__:null,events:Ei});const sy=te("alloy-id-"),Km=te("data-alloy-id"),mu=sy(),ry=Km(),v3=(t,s)=>{const c=nt(mu+t);return IC(s,c),c},IC=(t,s)=>{Object.defineProperty(t.dom,ry,{value:s,writable:!0})},O0=t=>{const s=Zc(t)?t.dom[ry]:null;return A.from(s)},Vp=t=>nt(t),FC=Sn,qd=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+mo(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:te("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:bn}},sd=qd(),y3=(t,s)=>{const c=Pe(s,d=>El(d.name(),[$e("config"),pe("state",cu)])),l=ws("component.behaviours",Zt(c),t.behaviours).fold(d=>{throw new Error(Of(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Sn);return{list:s,data:Io(l,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return te(g)})}},C3=t=>t.list,nE=t=>t.data,cy=(t,s)=>{const c={};return vs(t,(l,d)=>{vs(l,(g,h)=>{const C=at(c,h).getOr([]);c[h]=C.concat([s(d,g)])})}),c},Up=(t,s,c,l)=>{const d={...s};ft(c,O=>{d[O.name()]=O.exhibit(t,l)});const g=cy(d,(O,N)=>({name:O,modification:N})),h=O=>ao(O,(N,F)=>({...F.modification,...N}),{}),C=ao(g.classes,(O,N)=>N.modification.concat(O),[]),S=h(g.attributes),T=h(g.styles);return au({classes:C,attributes:S,styles:T})},$r=(t,s,c,l)=>{try{const d=Tu(c,(g,h)=>{const C=g[s],S=h[s],T=l.indexOf(C),O=l.indexOf(S);if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(l,null,2));if(O===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(l,null,2));return T<O?-1:O<T?1:0});return Qt.value(d)}catch(d){return Qt.error([d])}},ay=(t,s)=>({handler:t,purpose:s}),ly=(t,s)=>({cHandler:t,purpose:s}),oE=(t,s)=>ly(Rn.apply(void 0,[t.handler].concat(s)),t.purpose),hh=t=>t.cHandler,LC=(t,s)=>({name:t,handler:s}),S3=(t,s)=>{const c={};return ft(t,l=>{c[l.name()]=l.handlers(s)}),c},sE=(t,s,c)=>{const l={...c,...S3(s,t)};return cy(l,LC)},w3=(t,s,c,l)=>{const d=sE(t,c,l);return D0(d,s)},rE=t=>{const s=kk(t);return(c,l,...d)=>{const g=[c,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Wp=(t,s)=>Qt.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Pe(s,c=>c.name),null,2)]),ph=(t,s,c)=>{const l=s[c];return l?$r("Event: "+c,"name",t,l).map(d=>{const g=Pe(d,h=>h.handler);return _k(g)}):Wp(c,t)},D0=(t,s)=>{const c=Pl(t,(l,d)=>(l.length===1?Qt.value(l[0].handler):ph(l,s,d)).map(h=>{const C=rE(h),S=l.length>1?ho(s[d],T=>br(l,O=>O.name===T)).join(" > "):l[0].name;return Gg(d,ay(C,S))}));return Fw(c,{})},Ym="alloy.base.behaviour",cE=Zt([Bc("dom","dom",Qi(),Zt([$e("tag"),pe("styles",{}),pe("classes",[]),pe("attributes",{}),Qn("value"),Qn("innerHtml")])),$e("components"),$e("uid"),pe("events",{}),pe("apis",{}),Bc("eventOrder","eventOrder",Kb({[Wl()]:["disabling",Ym,"toggling","typeaheadevents"],[zd()]:[Ym,"focusing","keying"],[Yg()]:[Ym,"disabling","toggling","representing","tooltipping"],[$m()]:[Ym,"representing","streaming","invalidating"],[Vd()]:[Ym,"representing","item-events","toolbar-button-events","tooltipping"],[wa()]:["focusing",Ym,"item-type-events"],[Pm()]:["focusing",Ym,"item-type-events"],[Ul()]:["item-type-events","tooltipping"],[Kg()]:["receiving","reflecting","tooltipping"]}),qu()),Qn("domModification")]),iy=t=>ws("custom.definition",cE,t),Xm=t=>({...t.dom,uid:t.uid,domChildren:Pe(t.components,s=>s.element)}),uy=t=>t.domModification.fold(()=>au({}),au),dy=t=>t.events,R0=(t,s)=>{const c=$o(t),l=$o(s),d=Rt(l,c),g=lr(t,(h,C)=>!In(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},HC=(t,s)=>{const{class:c,style:l,...d}=Nd(s),{toSet:g,toRemove:h}=R0(t.attributes,d),C=()=>{ft(h,de=>Ln(s,de)),Hl(s,g)},S=re(s),{toSet:T,toRemove:O}=R0(t.styles,S),N=()=>{ft(O,de=>Ye(s,de)),Qs(s,T)},F=Wu(s),W=Rt(F,t.classes),q=Rt(t.classes,F),ee=()=>{xf(s,q),Rc(s,W)},ce=de=>{Fa(s,de)},Q=()=>{const de=t.domChildren;Jx(s,de)},ue=()=>{const de=s,ye=t.value.getOrUndefined();ye!==Sa(de)&&Fs(de,ye??"")};return C(),ee(),N(),t.innerHtml.fold(Q,ce),ue(),s},M0=t=>{const s=Je.fromTag(t.tag);Hl(s,t.attributes),xf(s,t.classes),Qs(s,t.styles),t.innerHtml.each(l=>Fa(s,l));const c=t.domChildren;return vf(s,c),t.value.each(l=>{Fs(s,l)}),s},zC=(t,s)=>{try{const c=HC(t,s);return A.some(c)}catch{return A.none()}},VC=t=>t.innerHtml.isSome()&&t.domChildren.length>0,x3=(t,s)=>{const c=d=>da(d)===t.tag&&!VC(t)&&!MC(d),l=s.filter(c).bind(d=>zC(t,d)).getOrThunk(()=>M0(t));return IC(l,t.uid),l},Kd=t=>{const s=at(t,"behaviours").getOr({});return _e($o(s),c=>{const l=s[c];return Po(l)?[l.me]:[]})},E3=(t,s)=>y3(t,s),UC=t=>{const s=Kd(t);return E3(t,s)},Ti=(t,s,c)=>{const l=Xm(t),d=uy(t),g={"alloy.base.modification":d},h=s.length>0?Up(c,g,s,l):d;return dC(l,h)},oc=(t,s,c)=>{const l={"alloy.base.behaviour":dy(t)};return w3(c,t.eventOrder,s,l).getOrDie()},aE=(t,s)=>{const c=()=>de,l=Et(sd),d=gi(iy(t)),g=UC(t),h=C3(g),C=nE(g),S=Ti(d,h,C),T=x3(S,s),O=oc(d,h,C),N=Et(d.components),F=ye=>{l.set(ye)},W=()=>{l.set(qd(c))},q=()=>{const ye=mc(T),Te=_e(ye,rt=>l.get().getByDom(rt).fold(()=>[],Ro));N.set(Te)},ee=ye=>{const Te=C;return(St(Te[ye.name()])?Te[ye.name()]:()=>{throw new Error("Could not find "+ye.name()+" in "+JSON.stringify(t,null,2))})()},ce=ye=>St(C[ye.name()]),Q=()=>d.apis,ue=ye=>C[ye]().map(Te=>Te.state.readState()).getOr("not enabled"),de={uid:t.uid,getSystem:l.get,config:ee,hasConfigured:ce,spec:t,readState:ue,getApis:Q,connect:F,disconnect:W,element:T,syncComponents:q,components:N.get,events:O};return de},N0=(t,s)=>{const c=at(t,"components").getOr([]);return s.fold(()=>Pe(c,na),l=>Pe(c,(d,g)=>fy(d,Ll(l,g))))},T3=(t,s)=>{const{events:c,...l}=FC(t),d=N0(l,s),g={...l,events:{...b3,...c},components:d};return Qt.value(aE(g,s))},Yo=t=>{const s=Je.fromText(t);return my({element:s})},my=t=>{const s=Va("external.component",za([$e("element"),Qn("uid")]),t),c=Et(qd()),l=C=>{c.set(C)},d=()=>{c.set(qd(()=>h))},g=s.uid.getOrThunk(()=>Vp("external"));IC(s.element,g);const h={uid:g,getSystem:c.get,config:A.none,hasConfigured:bn,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:te("No state"),syncComponents:ae,components:te([]),events:{}};return _0(h)},Zp=Vp,lE=t=>In(t,"uid"),fy=(t,s)=>NC(t).getOrThunk(()=>{const c=lE(t)?t:{uid:Zp(""),...t};return T3(c,s).getOrDie()}),na=t=>fy(t,A.none()),jl=_0;var v=Object.freeze({__proto__:null,block:(t,s,c,l)=>{Wt(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=We([kt.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),Yt.config({})]),h=l(d,g),C=d.getSystem().build(h);an.append(d,jl(C)),C.hasConfigured(kt)&&s.focus&&kt.focusIn(C),c.isBlocked()||s.onBlock(t),c.blockWith(()=>an.remove(d,C))},unblock:(t,s,c)=>{Ln(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()},isBlocked:(t,s,c)=>c.isBlocked()}),k=[Uo("getRoot",A.none),yc("focus",!0),Zn("onBlock"),Zn("onUnblock")],$=Object.freeze({__proto__:null,init:()=>{const t=vg(),s=c=>{t.set({destroy:c})};return kl({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const U=Sc({fields:k,name:"blocking",apis:v,state:$});var se=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const he=[$e("find")],Ce=Sc({fields:he,name:"composing",apis:se});var Mt=Object.freeze({__proto__:null,getCoupled:(t,s,c,l)=>c.getOrCreate(t,s,l),getExistingCoupled:(t,s,c,l)=>c.getExisting(t,s,l)}),Qe=[Sl("others",Ow(Qt.value,qu()))],Vt=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,h)=>{if($o(g.others).length===0)throw new Error("Cannot find any known coupled components");return at(t,h)},c=(g,h,C)=>s(h,C).getOrThunk(()=>{const T=at(h.others,C).getOrDie("No information found for coupled component: "+C)(g),O=g.getSystem().build(T);return t[C]=O,O}),l=(g,h,C)=>s(h,C).orThunk(()=>(at(h.others,C).getOrDie("No information found for coupled component: "+C),A.none())),d=te({});return kl({readState:d,getExisting:l,getOrCreate:c})}});const Tt=Sc({fields:Qe,name:"coupling",apis:Mt,state:Vt}),yt=["input","button","textarea","select"],co=(t,s,c)=>{(s.disabled()?po:oa)(t,s)},eo=(t,s)=>s.useNative===!0&&bo(yt,da(t.element)),to=t=>Og(t.element,"disabled"),rr=t=>{Wt(t.element,"disabled","disabled")},ki=t=>{Ln(t.element,"disabled")},bh=t=>Js(t.element,"aria-disabled")==="true",Jm=t=>{Wt(t.element,"aria-disabled","true")},Qf=t=>{Wt(t.element,"aria-disabled","false")},po=(t,s,c)=>{s.disableClass.each(d=>{hs(t.element,d)}),(eo(t,s)?rr:Jm)(t),s.onDisabled(t)},oa=(t,s,c)=>{s.disableClass.each(d=>{Ao(t.element,d)}),(eo(t,s)?ki:Qf)(t),s.onEnabled(t)},ga=(t,s)=>eo(t,s)?to(t):bh(t);var _i=Object.freeze({__proto__:null,enable:oa,disable:po,isDisabled:ga,onLoad:co,set:(t,s,c,l)=>{(l?po:oa)(t,s)}}),P0=Object.freeze({__proto__:null,exhibit:(t,s)=>au({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>es([kv(Wl(),(c,l)=>ga(c,t)),mC(t,s,co)])}),$0=[Uo("disabled",bn),pe("useNative",!0),Qn("disableClass"),Zn("onDisabled"),Zn("onEnabled")];const Ct=Sc({fields:$0,name:"disabling",active:P0,apis:_i}),ps=(t,s,c,l,d)=>{const g=h=>h+"px";return{position:t,left:s.map(g),top:c.map(g),right:l.map(g),bottom:d.map(g)}},k3=t=>({...t,position:A.some(t.position)}),iE=(t,s)=>{x(t,k3(s))},Ai=(t,s)=>{const c=t.element;hs(c,s.transitionClass),Ao(c,s.fadeOutClass),hs(c,s.fadeInClass),s.onShow(t)},uE=(t,s)=>{const c=t.element;hs(c,s.transitionClass),Ao(c,s.fadeInClass),hs(c,s.fadeOutClass),s.onHide(t)},_3=(t,s)=>t.y<s.bottom&&t.bottom>s.y,WC=(t,s)=>t.y>=s.y,A3=(t,s)=>t.bottom<=s.bottom,vh=(t,s,c)=>({location:"top",leftX:s,topY:c.bounds.y-t.y}),dE=(t,s,c)=>({location:"bottom",leftX:s,bottomY:t.bottom-c.bounds.bottom}),O3=t=>t.box.x-t.win.x,SI=(t,s,c)=>{const l=s.win,d=s.box,g=O3(s);return An(t,h=>{switch(h){case"bottom":return A3(d,c.bounds)?A.none():A.some(dE(l,g,c));case"top":return WC(d,c.bounds)?A.none():A.some(vh(l,g,c));default:return A.none()}}).getOr({location:"no-dock"})},wI=(t,s,c)=>Da(t,l=>{switch(l){case"bottom":return A3(s,c.bounds);case"top":return WC(s,c.bounds)}}),xI=(t,s)=>{const c=s.optScrollEnv.fold(te(t.bounds.y),l=>l.scrollElmTop+(t.bounds.y-l.currentScrollTop));return is(t.bounds.x,c)},EI=(t,s)=>{const c=s.optScrollEnv.fold(te(t.y),l=>t.y+l.currentScrollTop-l.scrollElmTop);return is(t.x,c)},jp=(t,s,c)=>c.getInitialPos().map(l=>{const d=xI(l,s);return{box:Ss(d.left,d.top,_s(t),wn(t)),location:l.location}}),mE=(t,s,c,l,d)=>{const g=EI(s,c),h=Ss(g.left,g.top,s.width,s.height);l.setInitialPos({style:re(t),position:M(t,"position")||"static",bounds:h,location:d.location})},TI=(t,s,c,l,d)=>{l.getInitialPos().fold(()=>mE(t,s,c,l,d),()=>ae)},fE=(t,s,c)=>c.getInitialPos().bind(l=>{var d;switch(c.clearInitialPos(),l.position){case"static":return A.some({morph:"static"});case"absolute":const g=Af(t).getOr(gc()),h=Qr(g),C=(d=g.dom.scrollTop)!==null&&d!==void 0?d:0;return A.some({morph:"absolute",positionCss:ps("absolute",at(l.style,"left").map(S=>s.x-h.x),at(l.style,"top").map(S=>s.y-h.y+C),at(l.style,"right").map(S=>h.right-s.right),at(l.style,"bottom").map(S=>h.bottom-s.bottom))});default:return A.none()}}),gE=(t,s,c)=>jp(t,s,c).filter(({box:l})=>wI(c.getModes(),l,s)).bind(({box:l})=>fE(t,l,c)),ZC=t=>{switch(t.location){case"top":return A.some({morph:"fixed",positionCss:ps("fixed",A.some(t.leftX),A.some(t.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:ps("fixed",A.some(t.leftX),A.none(),A.none(),A.some(t.bottomY))});default:return A.none()}},kI=(t,s,c)=>{const l=Qr(t),d=Mc(),g=SI(c.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(mE(t,l,s,c,g),ZC(g)):A.none()},_I=(t,s,c)=>gE(t,s,c).orThunk(()=>s.optScrollEnv.bind(l=>jp(t,s,c)).bind(({box:l,location:d})=>{const g=Mc(),h=O3({win:g,box:l}),C=d==="top"?vh(g,h,s):dE(g,h,s);return ZC(C)})),AI=(t,s,c)=>{const l=t.element;return Wc(X(l,"position"),"fixed")?_I(l,s,c):kI(l,s,c)},OI=(t,s,c)=>{const l=t.element;return jp(l,s,c).bind(({box:d})=>fE(l,d,c))},DI=(t,s,c,l)=>{const d=Qr(t),g=Mc(),h=O3({win:g,box:d}),C=l(g,h,s);return C.location==="bottom"||C.location==="top"?(TI(t,d,s,c,C),ZC(C)):A.none()},BR=(t,s,c)=>{c.setDocked(!1),ft(["left","right","top","bottom","position"],l=>Ye(t.element,l)),s.onUndocked(t)},D3=(t,s,c,l)=>{const d=l.position==="fixed";c.setDocked(d),iE(t.element,l),(d?s.onDocked:s.onUndocked)(t)},R3=(t,s,c,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(h=>{const C=_3(h,l.bounds);C!==c.isVisible()&&(c.setVisible(C),d&&!C?(xf(t.element,[g.fadeOutClass]),g.onHide(t)):(C?Ai:uE)(t,g))})})},jC=(t,s,c,l,d)=>{R3(t,s,c,l,!0),D3(t,s,c,d.positionCss)},RI=(t,s,c,l,d)=>{switch(d.morph){case"static":return BR(t,s,c);case"absolute":return D3(t,s,c,d.positionCss);case"fixed":return jC(t,s,c,l,d)}},MI=(t,s,c)=>{const l=s.lazyViewport(t);R3(t,s,c,l),AI(t,l,c).each(d=>{RI(t,s,c,l,d)})},NI=(t,s,c)=>{const l=t.element;c.setDocked(!1);const d=s.lazyViewport(t);OI(t,d,c).each(g=>{switch(g.morph){case"static":{BR(t,s,c);break}case"absolute":{D3(t,s,c,g.positionCss);break}}}),c.setVisible(!0),s.contextual.each(g=>{Rc(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(t)}),hE(t,s,c)},hE=(t,s,c)=>{t.getSystem().isConnected()&&MI(t,s,c)},I0=(t,s,c)=>{c.isDocked()&&NI(t,s,c)},pE=t=>(s,c,l)=>{const d=c.lazyViewport(s);DI(s.element,d,l,t).each(h=>{jC(s,c,l,d,h)})},BI=pE(vh),M3=pE(dE);var PI=Object.freeze({__proto__:null,refresh:hE,reset:I0,isDocked:(t,s,c)=>c.isDocked(),getModes:(t,s,c)=>c.getModes(),setModes:(t,s,c,l)=>c.setModes(l),forceDockToTop:BI,forceDockToBottom:M3}),bE=Object.freeze({__proto__:null,events:(t,s)=>es([wp(L1(),(c,l)=>{t.contextual.each(d=>{Jr(c.element,d.transitionClass)&&(Rc(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),l.stop()})}),Me(I2(),(c,l)=>{hE(c,t,s)}),Me(Xg(),(c,l)=>{hE(c,t,s)}),Me(Ju(),(c,l)=>{I0(c,t,s)})])}),N3=[El("contextual",[Mr("fadeInClass"),Mr("fadeOutClass"),Mr("transitionClass"),eu("lazyContext"),Zn("onShow"),Zn("onShown"),Zn("onHide"),Zn("onHidden")]),Uo("lazyViewport",()=>({bounds:Mc(),optScrollEnv:A.none()})),Df("modes",["top","bottom"],tn),Zn("onDocked"),Zn("onUndocked")],PR=Object.freeze({__proto__:null,init:t=>{const s=Et(!1),c=Et(!0),l=dn(),d=Et(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return kl({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const ds=Sc({fields:N3,name:"docking",active:bE,apis:PI,state:PR}),GC=Uc.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),vE=t=>s=>s.translate(-t.left,-t.top),qC=t=>s=>s.translate(t.left,t.top),yh=t=>(s,c)=>xo(t,(l,d)=>d(l),is(s,c)),yE=(t,s,c)=>t.fold(yh([qC(c),vE(s)]),yh([vE(s)]),yh([])),F0=(t,s,c)=>t.fold(yh([qC(c)]),yh([]),yh([qC(s)])),$R=(t,s,c)=>t.fold(yh([]),yh([vE(c)]),yh([qC(s),vE(c)])),II=(t,s,c,l,d,g)=>{const h=F0(t,d,g),C=F0(s,d,g);return Math.abs(h.left-C.left)<=c&&Math.abs(h.top-C.top)<=l},B3=(t,s,c,l,d,g)=>{const h=F0(t,d,g),C=F0(s,d,g),S=Math.abs(h.left-C.left),T=Math.abs(h.top-C.top);return is(S,T)},P3=(t,s,c)=>{const l=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-c.left+"px"),top:A.some(g-c.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...l}},CE=(t,s,c)=>t.fold((l,d)=>L0(l+s,d+c),(l,d)=>fu(l+s,d+c),(l,d)=>Ch(l+s,d+c)),hy=(t,s,c,l)=>{const d=(g,h)=>(C,S)=>{const T=g(s,c,l);return h(C.getOr(T.left),S.getOr(T.top))};return t.fold(d($R,L0),d(F0,fu),d(yE,Ch))},L0=GC.offset,fu=GC.absolute,Ch=GC.fixed,IR=(t,s)=>{const c=Js(t,s);return Lr(c)?NaN:parseInt(c,10)},FI=(t,s)=>{const c=t.element,l=IR(c,s.leftAttr),d=IR(c,s.topAttr);return isNaN(l)||isNaN(d)?A.none():A.some(is(l,d))},LI=(t,s,c)=>{const l=t.element;Wt(l,s.leftAttr,c.left+"px"),Wt(l,s.topAttr,c.top+"px")},FR=(t,s)=>{const c=t.element;Ln(c,s.leftAttr),Ln(c,s.topAttr)},HI=(t,s,c,l)=>FI(t,s).fold(()=>c,d=>Ch(d.left+l.left,d.top+l.top)),zI=(t,s,c,l,d,g)=>{const h=HI(t,s,c,l),C=s.mustSnap?VI(t,s,h,d,g):HR(t,s,h,d,g),S=yE(h,d,g);return LI(t,s,S),C.fold(()=>({coord:Ch(S.left,S.top),extra:A.none()}),T=>({coord:T.output,extra:T.extra}))},LR=(t,s)=>{FR(t,s)},$3=(t,s,c,l)=>An(t,d=>{const g=d.sensor;return II(s,g,d.range.left,d.range.top,c,l)?A.some({output:hy(d.output,s,c,l),extra:d.extra}):A.none()}),VI=(t,s,c,l,d)=>{const g=s.getSnapPoints(t);return $3(g,c,l,d).orThunk(()=>xo(g,(S,T)=>{const O=T.sensor,N=B3(c,O,T.range.left,T.range.top,l,d);return S.deltas.fold(()=>({deltas:A.some(N),snap:A.some(T)}),F=>{const W=(N.left+N.top)/2,q=(F.left+F.top)/2;return W<=q?{deltas:A.some(N),snap:A.some(T)}:S})},{deltas:A.none(),snap:A.none()}).snap.map(S=>({output:hy(S.output,c,l,d),extra:S.extra})))},HR=(t,s,c,l,d)=>{const g=s.getSnapPoints(t);return $3(g,c,l,d)},UI=(t,s,c)=>({coord:hy(t.output,t.output,s,c),extra:t.extra});var VR=Object.freeze({__proto__:null,snapTo:(t,s,c,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=wr(t.element),h=er(g),C=ht(d),S=UI(l,h,C),T=P3(S.coord,h,C);x(d,T)}}});const wc=(t,s)=>B2(t,{},Pe(s,c=>Qb(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([Yc("dump",Sn)])),KC=t=>t.dump,ra=(t,s)=>({...We(s),...t.dump}),Yd={field:wc,augment:ra,get:KC},WI=(t,s)=>(t.length>0?[tu("parts",t)]:[]).concat([$e("uid"),pe("dom",{}),pe("components",[]),Jg("originalSpec"),pe("debug.sketcher",{})]).concat(s),UR=(t,s,c,l,d)=>{const g=WI(l,d);return Va(t+" [SpecSchema]",za(g.concat(s)),c)},ZI=(t,s,c,l)=>{const d=I3(l),g=UR(t,s,d,[],[]);return c(g,d)},H0=(t,s,c,l,d)=>{const g=I3(d),h=gv(c),C=Vf(c),S=UR(t,s,g,h,[C]),T=Lf(t,S,c),O=Wd(t,S,T.internals());return l(S,O,g,T.externals())},WR=t=>In(t,"uid"),I3=t=>WR(t)?t:{...t,uid:Vp("uid")},ZR=t=>t.uid!==void 0,jR=za([$e("name"),$e("factory"),$e("configFields"),pe("apis",{}),pe("extraApis",{})]),GR=za([$e("name"),$e("factory"),$e("configFields"),$e("partFields"),pe("apis",{}),pe("extraApis",{})]),gu=t=>{const s=Va("Sketcher for "+t.name,jR,t),c=g=>ZI(s.name,s.configFields,s.factory,g),l=Io(s.apis,Ip),d=Io(s.extraApis,(g,h)=>av(g,h));return{name:s.name,configFields:s.configFields,sketch:c,...l,...d}},ja=t=>{const s=Va("Sketcher for "+t.name,GR,t),c=h=>H0(s.name,s.configFields,s.partFields,s.factory,h),l=hp(s.name,s.partFields),d=Io(s.apis,Ip),g=Io(s.extraApis,(h,C)=>av(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:l,...d,...g}},cd=gu({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:KC(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[pe("components",[]),wc("containerBehaviours",[]),pe("events",{}),pe("domModification",{}),pe("eventOrder",{})]}),F3="data-initial-z-index",SE=t=>{Oc(t.element).filter(Zc).each(s=>{Ws(s,F3).fold(()=>Ye(s,"z-index"),c=>on(s,"z-index",c)),Ln(s,F3)})},jI=t=>{Oc(t.element).filter(Zc).each(s=>{X(s,"z-index").each(c=>{Wt(s,F3,c)}),on(s,"z-index",M(t.element,"z-index"))})},L3=(t,s)=>{t.getSystem().addToGui(s),jI(s)},_l=t=>{SE(t),t.getSystem().removeFromGui(t)},qR=(t,s,c)=>t.getSystem().build(cd.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var KR=El("snaps",[$e("getSnapPoints"),Zn("onSensor"),$e("leftAttr"),$e("topAttr"),pe("lazyViewport",Mc),pe("mustSnap",!1)]);const wE=[pe("useFixed",bn),$e("blockerClass"),pe("getTarget",Sn),pe("onDrag",ae),pe("repositionTarget",!0),pe("onDrop",ae),Uo("getBounds",Mc),KR],GI=t=>Or(X(t,"left"),X(t,"top"),X(t,"position"),(s,c,l)=>(l==="fixed"?Ch:L0)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=Xr(t);return fu(s.left,s.top)}),YR=(t,s,c,l,d)=>{const g=d.bounds,h=F0(s,c,l),C=Cr(h.left,g.x,g.x+g.width-d.width),S=Cr(h.top,g.y,g.y+g.height-d.height),T=fu(C,S);return s.fold(()=>{const O=$R(T,c,l);return L0(O.left,O.top)},te(T),()=>{const O=yE(T,c,l);return Ch(O.left,O.top)})},XR=(t,s,c,l,d,g,h)=>{const C=s.fold(()=>{const S=CE(c,g.left,g.top),T=yE(S,l,d);return Ch(T.left,T.top)},S=>{const T=zI(t,S,c,g,l,d);return T.extra.each(O=>{S.onSensor(t,O)}),T.coord});return YR(t,C,l,d,h)},qI=(t,s,c,l)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=wr(t.element),h=er(g),C=ht(d),S=GI(d),T=XR(t,s.snaps,S,h,C,l,c),O=P3(T,h,C);x(d,O)}s.onDrag(t,d,l)},JR=(t,s)=>({bounds:t.getBounds(),height:Ko(s.element),width:Cf(s.element)}),H3=(t,s,c,l,d)=>{const g=c.update(l,d),h=c.getStartData().getOrThunk(()=>JR(s,t));g.each(C=>{qI(t,s,h,C)})},QR=(t,s,c,l)=>{s.each(_l),c.snaps.each(g=>{LR(t,g)});const d=c.getTarget(t.element);l.reset(),c.onDrop(t,d)},xE=t=>(s,c)=>{const l=d=>{c.setStartData(JR(s,d))};return es([Me(I2(),d=>{c.getStartData().each(()=>l(d))}),...t(s,c,l)])},KI=t=>es([Me(wa(),t.forceDrop),Me(tv(),t.drop),Me(qg(),(s,c)=>{t.move(c.event)}),Me(Er(),t.delayDrop)]);var e5=Object.freeze({__proto__:null,getData:t=>A.from(is(t.x,t.y)),getDelta:(t,s)=>is(s.left-t.left,s.top-t.top)});const z3=(t,s,c)=>[Me(wa(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>QR(l,A.some(T),t,s),C=qw(h,200),S={drop:h,delayDrop:C.schedule,forceDrop:h,move:N=>{C.cancel(),H3(l,t,s,e5,N)}},T=qR(l,t.blockerClass,KI(S));(()=>{c(l),L3(l,T)})()})],XI=[...wE,Co("dragger",{handlers:xE(z3)})],JI=t=>es([Me(Pm(),t.forceDrop),Me(Xu(),t.drop),Me(Tl(),t.drop),Me(nu(),(s,c)=>{t.move(c.event)})]),QI=t=>{const s=t[0];return A.some(is(s.clientX,s.clientY))};var V3=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?QI(c):A.none()},getDelta:(t,s)=>is(s.left-t.left,s.top-t.top)});const Sh=(t,s,c)=>{const l=dn(),d=g=>{QR(g,l.get(),t,s),l.clear()};return[Me(Pm(),(g,h)=>{h.stop();const C=()=>d(g),S={drop:C,delayDrop:ae,forceDrop:C,move:N=>{H3(g,t,s,V3,N)}},T=qR(g,t.blockerClass,JI(S));l.set(T),(()=>{c(g),L3(g,T)})()}),Me(nu(),(g,h)=>{h.stop(),H3(g,t,s,V3,h.event)}),Me(Xu(),(g,h)=>{h.stop(),d(g)}),Me(Tl(),d)]},t5=[...wE,Co("dragger",{handlers:xE(Sh)})],n5=(t,s,c)=>[...z3(t,s,c),...Sh(t,s,c)],o5=[...wE,Co("dragger",{handlers:xE(n5)})];var t7=Object.freeze({__proto__:null,mouse:XI,touch:t5,mouseOrTouch:o5}),o7=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const c=()=>{t=A.none(),s=A.none()},l=(S,T)=>{const O=t.map(N=>S.getDelta(N,T));return t=A.some(T),O},d=(S,T)=>S.getData(T).bind(O=>l(S,O)),g=S=>{s=A.some(S)},h=()=>s,C=te({});return kl({readState:C,reset:c,update:d,getStartData:h,setStartData:g})}});const z0=vt({branchKey:"mode",branches:t7,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:o7,apis:VR}),s7=["input","textarea"],U3=t=>{const s=da(t);return bo(s7,s)},EE=(t,s)=>{const c=s.getRoot(t).getOr(t.element);Ao(c,s.invalidClass),s.notify.each(l=>{U3(t.element)&&Wt(t.element,"aria-invalid",!1),l.getContainer(t).each(d=>{Fa(d,l.validHtml)}),l.onValid(t)})},TE=(t,s,c,l)=>{const d=s.getRoot(t).getOr(t.element);hs(d,s.invalidClass),s.notify.each(g=>{U3(t.element)&&Wt(t.element,"aria-invalid",!0),g.getContainer(t).each(h=>{Fa(h,l)}),g.onInvalid(t,l)})},s5=(t,s,c)=>s.validator.fold(()=>_o.pure(Qt.value(!0)),l=>l.validate(t)),eg=(t,s,c)=>(s.notify.each(l=>{l.onValidate(t)}),s5(t,s).map(l=>t.getSystem().isConnected()?l.fold(d=>(TE(t,s,c,d),Qt.error(d)),d=>(EE(t,s),Qt.value(d))):Qt.error("No longer in system")));var r5=Object.freeze({__proto__:null,markValid:EE,markInvalid:TE,query:s5,run:eg,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return Jr(c,s.invalidClass)}}),c7=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>es([Me(c.onEvent,l=>{eg(l,t,s).get(Sn)})].concat(c.validateOnLoad?[Wo(l=>{eg(l,t,s).get(ae)})]:[]))).getOr({})}),XC=[$e("invalidClass"),pe("getRoot",A.none),El("notify",[pe("aria","alert"),pe("getContainer",A.none),pe("validHtml",""),Zn("onValid"),Zn("onInvalid"),Zn("onValidate")]),El("validator",[$e("validate"),pe("onEvent","input"),pe("validateOnLoad",!0)])];const V0=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},W3=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var a7=Object.freeze({__proto__:null,onLoad:V0,onUnload:W3,setValue:(t,s,c,l)=>{s.store.manager.setValue(t,s,c,l)},getValue:(t,s,c)=>s.store.manager.getValue(t,s,c),getState:(t,s,c)=>c}),a5=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[Wo((l,d)=>{V0(l,t,s)}),td((l,d)=>{W3(l,t,s)})]:[mC(t,s,V0)];return es(c)}});const tg=()=>{const t=Et(null),s=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,l=()=>{t.set(null)};return kl({set:t.set,get:t.get,isNotSet:c,clear:l,readState:s})},Z3=()=>kl({readState:ae}),l5=()=>{const t=Et({}),s=Et({});return kl({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:h=>at(t.get(),h).orThunk(()=>at(s.get(),h)),update:h=>{const C=t.get(),S=s.get(),T={},O={};ft(h,N=>{T[N.value]=N,at(N,"meta").each(F=>{at(F,"text").each(W=>{O[W]=N})})}),t.set({...C,...T}),s.set({...S,...O})},clear:()=>{t.set({}),s.set({})}})};var i5=Object.freeze({__proto__:null,memory:tg,dataset:l5,manual:Z3,init:t=>t.store.manager.state(t)});const j3=(t,s,c,l)=>{const d=s.store;c.update([l]),d.setValue(t,l),s.onSetValue(t,l)},G3=(t,s,c)=>{const l=s.store,d=l.getDataKey(t);return c.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},u5=(t,s,c)=>{s.store.initialValue.each(d=>{j3(t,s,c,d)})},i7=(t,s,c)=>{c.clear()};var u7=[Qn("initialValue"),$e("getFallbackEntry"),$e("getDataKey"),$e("setValue"),Co("manager",{setValue:j3,getValue:G3,onLoad:u5,onUnload:i7,state:l5})];const d7=(t,s,c)=>s.store.getValue(t),kE=(t,s,c,l)=>{s.store.setValue(t,l),s.onSetValue(t,l)},q3=(t,s,c)=>{s.store.initialValue.each(l=>{s.store.setValue(t,l)})};var _E=[$e("getValue"),pe("setValue",ae),Qn("initialValue"),Co("manager",{setValue:kE,getValue:d7,onLoad:q3,onUnload:ae,state:cu.init})];const d5=(t,s,c,l)=>{c.set(l),s.onSetValue(t,l)},m7=(t,s,c)=>c.get(),m5=(t,s,c)=>{s.store.initialValue.each(l=>{c.isNotSet()&&c.set(l)})},f5=(t,s,c)=>{c.clear()};var g5=[Qn("initialValue"),Co("manager",{setValue:d5,getValue:m7,onLoad:m5,onUnload:f5,state:tg})],h5=[pi("store",{mode:"memory"},Nc("mode",{memory:g5,manual:_E,dataset:u7})),Zn("onSetValue"),pe("resetOnDom",!1)];const dt=Sc({fields:h5,name:"representing",active:a5,apis:a7,extra:{setValueFrom:(t,s)=>{const c=dt.getValue(s);dt.setValue(t,c)}},state:i5}),Xd=Sc({fields:XC,name:"invalidating",active:c7,apis:r5,extra:{validation:t=>s=>{const c=dt.getValue(s);return _o.pure(t(c))}}});var f7=Object.freeze({__proto__:null,exhibit:(t,s)=>au({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const K3=Uc.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),p5=(t,s,c,l,d,g)=>{const h=s.rect,C=h.x-c,S=h.y-l,T=h.width,O=h.height,N=d-(C+T),F=g-(S+O),W=A.some(C),q=A.some(S),ee=A.some(N),ce=A.some(F),Q=A.none();return J2(s.direction,()=>ps(t,W,q,Q,Q),()=>ps(t,Q,q,ee,Q),()=>ps(t,W,Q,Q,ce),()=>ps(t,Q,Q,ee,ce),()=>ps(t,W,q,Q,Q),()=>ps(t,W,Q,Q,ce),()=>ps(t,W,q,Q,Q),()=>ps(t,Q,q,ee,Q))},Y3=(t,s)=>t.fold(()=>{const c=s.rect;return ps("absolute",A.some(c.x),A.some(c.y),A.none(),A.none())},(c,l,d,g)=>p5("absolute",s,c,l,d,g),(c,l,d,g)=>p5("fixed",s,c,l,d,g)),X3=(t,s)=>{const c=Rn(Hg,s),l=t.fold(c,c,()=>{const h=er();return Hg(s).translate(-h.left,-h.top)}),d=Cf(s),g=Ko(s);return Ss(l.left,l.top,d,g)},g7=(t,s)=>s.fold(()=>t.fold(Mc,Mc,Ss),c=>t.fold(te(c),te(c),()=>{const l=J3(t,c.x,c.y);return Ss(l.left,l.top,c.width,c.height)})),J3=(t,s,c)=>{const l=is(s,c),d=()=>{const g=er();return l.translate(-g.left,-g.top)};return t.fold(te(l),te(l),d)},JC=(t,s,c,l)=>t.fold(s,c,l);K3.none;const h7=K3.relative,QC=K3.fixed,Q3=(t,s)=>({anchorBox:t,origin:s}),b5=(t,s)=>Q3(t,s),eS=Uc.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),p7=(t,s)=>{const{x:c,y:l,right:d,bottom:g}=s,{x:h,y:C,right:S,bottom:T,width:O,height:N}=t,F=h>=c&&h<=d,W=C>=l&&C<=g,q=F&&W,ee=S<=d&&S>=c,ce=T<=g&&T>=l,Q=ee&&ce,ue=Math.min(O,h>=c?d-h:S-c),de=Math.min(N,C>=l?g-C:T-l);return{originInBounds:q,sizeInBounds:Q,visibleW:ue,visibleH:de}},b7=(t,s)=>{const{x:c,y:l,right:d,bottom:g}=s,{x:h,y:C,width:S,height:T}=t,O=Math.max(c,d-S),N=Math.max(l,g-T),F=Cr(h,c,O),W=Cr(C,l,N),q=Math.min(F+S,d)-F,ee=Math.min(W+T,g)-W;return Ss(F,W,q,ee)},v5=(t,s,c)=>{const l=te(s.bottom-c.y),d=te(c.bottom-s.y),g=tx(t,d,d,l),h=te(s.right-c.x),C=te(c.right-s.x);return{maxWidth:Q2(t,C,C,h),maxHeight:g}},v7=(t,s,c,l)=>{const d=t.bubble,g=d.offset,h=yk(l,t.restriction,g),C=t.x+g.left,S=t.y+g.top,T=Ss(C,S,s,c),{originInBounds:O,sizeInBounds:N,visibleW:F,visibleH:W}=p7(T,h),q=O&&N,ee=q?T:b7(T,h),ce=ee.width>0&&ee.height>0,{maxWidth:Q,maxHeight:ue}=v5(t.direction,ee,l),de={rect:ee,maxHeight:ue,maxWidth:Q,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return q||t.alwaysFit?eS.fit(de):eS.nofit(de,F,W,ce)},y5=(t,s,c,l,d,g)=>{const h=l.width,C=l.height,S=(O,N,F,W,q)=>{const ee=O(c,l,d,t,g),ce=v7(ee,h,C,g);return ce.fold(te(ce),(Q,ue,de,ye)=>(q===ye?de>W||ue>F:!q&&ye)?ce:eS.nofit(N,F,W,q))};return xo(s,(O,N)=>{const F=Rn(S,N);return O.fold(te(O),F)},eS.nofit({rect:c,maxHeight:l.height,maxWidth:l.width,direction:hv(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(Sn,Sn)},C5=["top","bottom","right","left"],AE="data-alloy-transition-timer",S5=(t,s)=>Hb(t,s.classes),OE=(t,s,c)=>c.exists(l=>{const d=t.mode;return d==="all"?!0:l[d]!==s[d]}),e_=(t,s)=>{const c=l=>parseFloat(l).toFixed(3);return yr(s,(l,d)=>{const g=t[d].map(c),h=l.map(c);return!bg(g,h)}).isSome()},t_=t=>{const s=g=>{const C=M(t,g).split(/\s*,\s*/);return ho(C,sl)},c=g=>{if(rn(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return Eo(g,"ms")?h:h*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return xo(d,(g,h,C)=>{const S=c(l[C])+c(h);return Math.max(g,S)},0)},y7=(t,s)=>{const c=Ma(),l=Ma();let d;const g=T=>{var O;const N=(O=T.raw.pseudoElement)!==null&&O!==void 0?O:"";return lo(T.target,t)&&rl(N)&&bo(C5,T.raw.propertyName)},h=T=>{if(el(T)||g(T)){c.clear(),l.clear();const O=T==null?void 0:T.raw.type;(el(O)||O===L1())&&(clearTimeout(d),Ln(t,AE),Rc(t,s.classes))}},C=Ho(t,lp(),T=>{g(T)&&(C.unbind(),c.set(Ho(t,L1(),h)),l.set(Ho(t,dk(),h)))}),S=t_(t);requestAnimationFrame(()=>{d=setTimeout(h,S+17),Wt(t,AE,d)})},C7=(t,s)=>{xf(t,s.classes),Ws(t,AE).each(c=>{clearTimeout(parseInt(c,10)),Ln(t,AE)}),y7(t,s)},S7=(t,s,c,l,d,g)=>{const h=OE(l,d,g);if(h||S5(t,l)){on(t,"position",c.position);const C=X3(s,t),S=Y3(s,{...d,rect:C}),T=Ar(C5,O=>S[O]);e_(c,T)&&(x(t,T),h&&C7(t,l),cn(t))}else Rc(t,l.classes)},w7=t=>({width:Math.ceil(Jh(t)),height:Ko(t)}),w5=(t,s,c,l)=>{Ye(s,"max-height"),Ye(s,"max-width");const d=w7(s);return y5(s,l.preference,t,d,c,l.bounds)},x5=(t,s)=>{const c=s.classes;Rc(t,c.off),xf(t,c.on)},x7=(t,s,c)=>{const l=c.maxHeightFunction;l(t,s.maxHeight)},E7=(t,s,c)=>{const l=c.maxWidthFunction;l(t,s.maxWidth)},T7=(t,s,c)=>{const l=Y3(c.origin,s);c.transition.each(d=>{S7(t,c.origin,l,d,s,c.lastPlacement)}),iE(t,l)},k7=(t,s)=>{l0(t,s.placement)},E5=(t,s,c)=>t[s]===void 0?c:t[s],_7=(t,s,c,l,d,g,h,C)=>{const S=E5(h,"maxHeightFunction",lC()),T=E5(h,"maxWidthFunction",ae),O=t.anchorBox,N=t.origin,F={bounds:g7(N,g),origin:N,preference:l,maxHeightFunction:S,maxWidthFunction:T,lastPlacement:d,transition:C};return T5(O,s,c,F)},T5=(t,s,c,l)=>{const d=w5(t,s,c,l);return T7(s,d,l),k7(s,d),x5(s,d),x7(s,d,l),E7(s,d,l),{layout:d.layout,placement:d.placement}},DE=Sn,Gp=()=>El("layouts",[$e("onLtr"),$e("onRtl"),Qn("onBottomLtr"),Qn("onBottomRtl")]),RE=(t,s,c,l,d,g,h)=>{const C=h.map(wk).getOr(!1),S=s.layouts.map(W=>W.onLtr(t)),T=s.layouts.map(W=>W.onRtl(t)),O=C?s.layouts.bind(W=>W.onBottomLtr.map(q=>q(t))).or(S).getOr(d):S.getOr(c),N=C?s.layouts.bind(W=>W.onBottomRtl.map(q=>q(t))).or(T).getOr(g):T.getOr(l);return Ng(O,N)(t)},A7=(t,s,c)=>{const l=s.hotspot,d=X3(c,l.element),g=RE(t.element,s,Um(),rC(),yv(),Vm(),A.some(s.hotspot.element));return A.some(DE({anchorBox:d,bubble:s.bubble.getOr(e0()),overrides:s.overrides,layouts:g}))};var O7=[$e("hotspot"),Qn("bubble"),pe("overrides",{}),Gp(),Co("placement",A7)];const Z0=(t,s,c)=>{const l=J3(c,s.x,s.y),d=Ss(l.left,l.top,s.width,s.height),g=RE(t.element,s,sC(),rx(),sC(),rx(),A.none());return A.some(DE({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var D7=[$e("x"),$e("y"),pe("height",0),pe("width",0),pe("bubble",e0()),pe("overrides",{}),Gp(),Co("placement",Z0)];const k5=Uc.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),j0=t=>t.fold(Sn,(s,c,l)=>s.translate(-c,-l)),_5=t=>t.fold(Sn,Sn),A5=t=>xo(t,(s,c)=>s.translate(c.left,c.top),is(0,0)),qp=t=>{const s=Pe(t,j0);return A5(s)},O5=t=>{const s=Pe(t,_5);return A5(s)},R7=k5.screen,ad=k5.absolute,D5=(t,s,c)=>{const l=ul(c.root).dom,d=g=>{const h=wr(g),C=wr(t.element);return lo(h,C)};return A.from(l.frameElement).map(Je.fromDom).filter(d).map(Xr)},n_=(t,s,c)=>{const l=wr(t.element),d=er(l),g=D5(t,s,c).getOr(d);return ad(g,d.left,d.top)},ME=(t,s,c,l)=>{const d=R7(is(t,s));return A.some(bc(d,c,l))},R5=(t,s,c,l,d)=>t.map(g=>{const h=[s,g.point],C=JC(l,()=>O5(h),()=>O5(h),()=>qp(h)),S=Wb(C.left,C.top,g.width,g.height),T=c.showAbove?yv():Um(),O=c.showAbove?Vm():rC(),N=RE(d,c,T,O,T,O,A.none());return DE({anchorBox:S,bubble:c.bubble.getOr(e0()),overrides:c.overrides,layouts:N})}),NE=(t,s,c)=>{const l=n_(t,c,s);return s.node.filter(Cs).bind(d=>{const g=d.dom.getBoundingClientRect(),h=ME(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return R5(h,l,s,c,C)})};var M5=[$e("node"),$e("root"),Qn("bubble"),Gp(),pe("overrides",{}),pe("showAbove",!1),Co("placement",NE)];const BE=(t,s)=>({element:t,offset:s}),M7=(t,s)=>{const c=mc(t);if(c.length===0)return BE(t,s);if(s<c.length)return BE(c[s],0);{const l=c[c.length-1],d=ji(l)?S1(l).length:mc(l).length;return BE(l,d)}},tS=(t,s)=>ji(t)?BE(t,s):M7(t,s),nS=t=>t.foffset!==void 0,o_=(t,s)=>s.getSelection.getOrThunk(()=>()=>D1(t))().map(l=>{if(nS(l)){const d=tS(l.start,l.soffset),g=tS(l.finish,l.foffset);return Dm.range(d.element,d.offset,g.element,g.offset)}else return l}),N5=(t,s,c)=>{const l=ul(s.root).dom,d=n_(t,c,s),g=o_(l,s).bind(S=>{if(nS(S))return op(l,Dm.exactFromRange(S)).orThunk(()=>{const O=Je.fromText(Du);Hu(S.start,O);const N=Ig(l,Dm.exact(O,0,O,1));return yl(O),N}).bind(O=>ME(O.left,O.top,O.width,O.height));{const T=Io(S,N=>N.dom.getBoundingClientRect()),O={left:Math.min(T.firstCell.left,T.lastCell.left),right:Math.max(T.firstCell.right,T.lastCell.right),top:Math.min(T.firstCell.top,T.lastCell.top),bottom:Math.max(T.firstCell.bottom,T.lastCell.bottom)};return ME(O.left,O.top,O.right-O.left,O.bottom-O.top)}}),C=o_(l,s).bind(S=>nS(S)?Zc(S.start)?A.some(S.start):On(S.start):A.some(S.firstCell)).getOr(t.element);return R5(g,d,s,c,C)};var B5=[Qn("getSelection"),$e("root"),Qn("bubble"),Gp(),pe("overrides",{}),pe("showAbove",!1),Co("placement",N5)];const PE="link-layout",$E=t=>t.x+t.width,s_=(t,s)=>t.x-s.width,P5=(t,s)=>t.y-s.height+t.height,$5=t=>t.y,I5=(t,s,c)=>$c($E(t),$5(t),c.southeast(),hv(),"southeast",nc(t,{left:0,top:2}),PE),IE=(t,s,c)=>$c(s_(t,s),$5(t),c.southwest(),eC(),"southwest",nc(t,{right:1,top:2}),PE),F5=(t,s,c)=>$c($E(t),P5(t,s),c.northeast(),tC(),"northeast",nc(t,{left:0,bottom:3}),PE),py=(t,s,c)=>$c(s_(t,s),P5(t,s),c.northwest(),nC(),"northwest",nc(t,{right:1,bottom:3}),PE),oS=()=>[I5,IE,F5,py],r_=()=>[IE,I5,py,F5],L5=(t,s,c)=>{const l=X3(c,s.item.element),d=RE(t.element,s,oS(),r_(),oS(),r_(),A.none());return A.some(DE({anchorBox:l,bubble:e0(),overrides:s.overrides,layouts:d}))};var N7=[$e("item"),Gp(),pe("overrides",{}),Co("placement",L5)],B7=Nc("type",{selection:B5,node:M5,hotspot:O7,submenu:N7,makeshift:D7});const P7=[xl("classes",tn),us("mode","all",["all","layout","placement"])],$7=[pe("useFixed",bn),Qn("getBounds")],c_=[Sl("anchor",B7),El("transition",P7)],H5=()=>{const t=document.documentElement;return QC(0,0,t.clientWidth,t.clientHeight)},z5=t=>{const s=Xr(t.element),c=t.element.dom.getBoundingClientRect();return h7(s.left,s.top,c.width,c.height)},a_=(t,s,c,l,d,g)=>{const h=b5(s.anchorBox,t);return _7(h,l.element,s.bubble,s.layouts,d,c,s.overrides,g)},I7=(t,s,c,l,d)=>{const g=A.none();l_(t,s,c,l,d,g)},l_=(t,s,c,l,d,g)=>{const h=Va("placement.info",Zt(c_),d),C=h.anchor,S=l.element,T=c.get(l.uid);Lp(()=>{on(S,"position","fixed");const O=X(S,"visibility");on(S,"visibility","hidden");const N=s.useFixed()?H5():z5(t);C.placement(t,C,N).each(F=>{const W=g.orThunk(()=>s.getBounds.map(Bs)),q=a_(N,F,W,l,T,h.transition);c.set(l.uid,q)}),O.fold(()=>{Ye(S,"visibility")},F=>{on(S,"visibility",F)}),X(S,"left").isNone()&&X(S,"top").isNone()&&X(S,"right").isNone()&&X(S,"bottom").isNone()&&Wc(X(S,"position"),"fixed")&&Ye(S,"position")},S)};var F7=Object.freeze({__proto__:null,position:I7,positionWithinBounds:l_,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,l)=>{const d=l.element;ft(["position","left","right","top","bottom"],g=>Ye(d,g)),Ck(d),c.clear(l.uid)}}),H7=Object.freeze({__proto__:null,init:()=>{let t={};return kl({readState:()=>t,clear:d=>{Po(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>at(t,d)})}});const Ea=Sc({fields:$7,name:"positioning",active:f7,apis:F7,state:H7}),i_=(t,s)=>s.universal?t:ho(t,c=>bo(s.channels,c));var V5=Object.freeze({__proto__:null,events:t=>es([Me(Kg(),(s,c)=>{const l=t.channels,d=$o(l),g=c,h=i_(d,g);ft(h,C=>{const S=l[C],T=S.schema,O=Va("channel["+C+`] data
Receiver: `+mo(s.element),T,g.data);S.onReceive(s,O)})})])}),V7=[Sl("channels",Ow(Qt.value,za([Br("onReceive"),pe("schema",qu())])))];const Al=Sc({fields:V7,name:"receiving",active:V5});var U7=Object.freeze({__proto__:null,events:(t,s)=>{const c=(l,d)=>{t.updateState.each(g=>{const h=g(l,d);s.set(h)}),t.renderComponents.each(g=>{const h=g(d,s.get());(t.reuseDom?f3:Qx)(l,h)})};return es([Me(Kg(),(l,d)=>{const g=d;if(!g.universal){const h=t.channel;bo(g.channels,h)&&c(l,g.data)}}),Wo((l,d)=>{t.initialData.each(g=>{c(l,g)})})])}}),W7=Object.freeze({__proto__:null,getState:(t,s,c)=>c}),Z7=[$e("channel"),Qn("renderComponents"),Qn("updateState"),Qn("initialData"),yc("reuseDom",!0)],u_=Object.freeze({__proto__:null,init:()=>{const t=Et(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Oi=Sc({fields:Z7,name:"reflecting",active:U7,apis:W7,state:u_}),sS=(t,s,c,l)=>{c.get().each(h=>{fa(t)});const d=s.getAttachPoint(t);du(d,t);const g=t.getSystem().build(l);return du(t,g),c.set(g),g},U5=(t,s,c,l)=>{const d=sS(t,s,c,l);return s.onOpen(t,d),d},G7=(t,s,c,l)=>c.get().map(()=>sS(t,s,c,l)),q7=(t,s,c,l,d)=>{FE(t,s),U5(t,s,c,l),d(),G5(t,s)},W5=(t,s,c)=>{c.get().each(l=>{fa(t),Os(t),s.onClose(t,l),c.clear()})},Z5=(t,s,c)=>c.isOpen(),K7=(t,s,c,l)=>Z5(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,l)),j5=(t,s,c)=>c.get(),Y7=(t,s,c,l)=>{X(t.element,s).fold(()=>{Ln(t.element,c)},d=>{Wt(t.element,c,d)}),on(t.element,s,l)},X7=(t,s,c)=>{Ws(t.element,c).fold(()=>Ye(t.element,s),l=>on(t.element,s,l))},FE=(t,s,c)=>{const l=s.getAttachPoint(t);on(t.element,"position",Ea.getMode(l)),Y7(t,"visibility",s.cloakVisibilityAttr,"hidden")},G0=t=>br(["top","left","right","bottom"],s=>X(t,s).isSome()),G5=(t,s,c)=>{G0(t.element)||Ye(t.element,"position"),X7(t,"visibility",s.cloakVisibilityAttr)};var J7=Object.freeze({__proto__:null,cloak:FE,decloak:G5,open:U5,openWhileCloaked:q7,close:W5,isOpen:Z5,isPartOf:K7,getState:j5,setContent:G7}),K5=Object.freeze({__proto__:null,events:(t,s)=>es([Me(nv(),(c,l)=>{W5(c,t,s)})])}),Q7=[Zn("onOpen"),Zn("onClose"),$e("isPartOf"),$e("getAttachPoint"),pe("cloakVisibilityAttr","data-precloak-visibility")],Y5=Object.freeze({__proto__:null,init:()=>{const t=dn(),s=te("not-implemented");return kl({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const qn=Sc({fields:Q7,name:"sandboxing",active:K5,apis:J7,state:Y5}),by=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),ng=t=>t.dimension.property,wh=(t,s)=>t.dimension.getDimension(s),LE=(t,s)=>{const c=by(t,s);Rc(c,[s.shrinkingClass,s.growingClass])},HE=(t,s)=>{Ao(t.element,s.openClass),hs(t.element,s.closedClass),on(t.element,ng(s),"0px"),cn(t.element)},d_=(t,s)=>{Ao(t.element,s.closedClass),hs(t.element,s.openClass),Ye(t.element,ng(s))},vy=(t,s,c,l)=>{c.setCollapsed(),on(t.element,ng(s),wh(s,t.element)),LE(t,s),HE(t,s),s.onStartShrink(t),s.onShrunk(t)},eF=(t,s,c,l)=>{const d=l.getOrThunk(()=>wh(s,t.element));c.setCollapsed(),on(t.element,ng(s),d),cn(t.element);const g=by(t,s);Ao(g,s.growingClass),hs(g,s.shrinkingClass),HE(t,s),s.onStartShrink(t)},X5=(t,s,c)=>{const l=wh(s,t.element);(l==="0px"?vy:eF)(t,s,c,A.some(l))},zE=(t,s,c)=>{const l=by(t,s),d=Jr(l,s.shrinkingClass),g=wh(s,t.element);d_(t,s);const h=wh(s,t.element);(d?()=>{on(t.element,ng(s),g),cn(t.element)}:()=>{HE(t,s)})(),Ao(l,s.shrinkingClass),hs(l,s.growingClass),d_(t,s),on(t.element,ng(s),h),c.setExpanded(),s.onStartGrow(t)},m_=(t,s,c)=>{if(c.isExpanded()){Ye(t.element,ng(s));const l=wh(s,t.element);on(t.element,ng(s),l)}},tF=(t,s,c)=>{c.isExpanded()||zE(t,s,c)},f_=(t,s,c)=>{c.isExpanded()&&X5(t,s,c)},nF=(t,s,c)=>{c.isExpanded()&&vy(t,s,c)},oF=(t,s,c)=>c.isExpanded(),g_=(t,s,c)=>c.isCollapsed(),J5=(t,s,c)=>{const l=by(t,s);return Jr(l,s.growingClass)===!0},Q5=(t,s,c)=>{const l=by(t,s);return Jr(l,s.shrinkingClass)===!0};var sF=Object.freeze({__proto__:null,refresh:m_,grow:tF,shrink:f_,immediateShrink:nF,hasGrown:oF,hasShrunk:g_,isGrowing:J5,isShrinking:Q5,isTransitioning:(t,s,c)=>J5(t,s)||Q5(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?X5:zE)(t,s,c)},disableTransitions:LE,immediateGrow:(t,s,c)=>{c.isExpanded()||(d_(t,s),on(t.element,ng(s),wh(s,t.element)),LE(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),rF=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const l=s.expanded;return au(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Gg(s.dimension.property,"0px")})},events:(t,s)=>es([wp(L1(),(c,l)=>{l.event.raw.propertyName===t.dimension.property&&(LE(c,t),s.isExpanded()&&Ye(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),cF=[$e("closedClass"),$e("openClass"),$e("shrinkingClass"),$e("growingClass"),Qn("getAnimationRoot"),Zn("onShrunk"),Zn("onStartShrink"),Zn("onGrown"),Zn("onStartGrow"),pe("expanded",!1),Sl("dimension",Nc("property",{width:[Co("property","width"),Co("getDimension",t=>_s(t)+"px")],height:[Co("property","height"),Co("getDimension",t=>wn(t)+"px")]}))],aF=Object.freeze({__proto__:null,init:t=>{const s=Et(t.expanded),c=()=>"expanded: "+s.get();return kl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Rn(s.set,!1),setExpanded:Rn(s.set,!0),readState:c})}});const Ga=Sc({fields:cF,name:"sliding",active:rF,apis:sF,state:aF});var lF=Object.freeze({__proto__:null,events:(t,s)=>{const l=t.stream.streams.setup(t,s);return es([Me(t.event,l),td(()=>s.cancel())].concat(t.cancelEvent.map(d=>[Me(d,()=>s.cancel())]).getOr([])))}});const eM=t=>{const s=Et(null);return kl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var uF=Object.freeze({__proto__:null,throttle:eM,init:t=>t.stream.streams.state(t)});const dF=(t,s)=>{const c=t.stream,l=cl(t.onStream,c.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),c.stopEvent&&g.stop()}};var mF=[Sl("stream",Nc("mode",{throttle:[$e("delay"),pe("stopEvent",!0),Co("streams",{setup:dF,state:eM})]})),pe("event","input"),Qn("cancelEvent"),Br("onStream")];const h_=Sc({fields:mF,name:"streaming",active:lF,state:uF});var fF=Object.freeze({__proto__:null,exhibit:(t,s)=>au({attributes:ap([{key:s.tabAttr,value:"true"}])})}),p_=[pe("tabAttr","data-alloy-tabstop")];const Zo=Sc({fields:p_,name:"tabstopping",active:fF}),gF=(t,s,c)=>{const l=s.aria;l.update(t,l,c.get())},hF=(t,s,c)=>{s.toggleClass.each(l=>{c.get()?hs(t.element,l):Ao(t.element,l)})},rS=(t,s,c,l)=>{const d=c.get();c.set(l),hF(t,s,c),gF(t,s,c),d!==l&&s.onToggled(t,l)},tM=(t,s,c)=>{rS(t,s,c,!c.get())},pF=(t,s,c)=>{rS(t,s,c,!0)},bF=(t,s,c)=>{rS(t,s,c,!1)},vF=(t,s,c)=>c.get(),nM=(t,s,c)=>{rS(t,s,c,s.selected)};var yF=Object.freeze({__proto__:null,onLoad:nM,toggle:tM,isOn:vF,on:pF,off:bF,set:rS}),CF=Object.freeze({__proto__:null,exhibit:()=>au({}),events:(t,s)=>{const c=Ok(t,s,tM),l=mC(t,s,nM);return es(qt([t.toggleOnExecute?[c]:[],[l]]))}});const oM=(t,s,c)=>{Wt(t.element,"aria-pressed",c),s.syncWithExpanded&&sM(t,s,c)},SF=(t,s,c)=>{Wt(t.element,"aria-selected",c)},wF=(t,s,c)=>{Wt(t.element,"aria-checked",c)},sM=(t,s,c)=>{Wt(t.element,"aria-expanded",c)};var VE=[pe("selected",!1),Qn("toggleClass"),pe("toggleOnExecute",!0),Zn("onToggled"),pi("aria",{mode:"none"},Nc("mode",{pressed:[pe("syncWithExpanded",!1),Co("update",oM)],checked:[Co("update",wF)],expanded:[Co("update",sM)],selected:[Co("update",SF)],none:[Co("update",ae)]}))];const xn=Sc({fields:VE,name:"toggling",active:CF,apis:yF,state:Bk(!1)}),UE=nt("tooltip.exclusive"),cS=nt("tooltip.show"),aS=nt("tooltip.hide"),lS=nt("tooltip.immediateHide"),q0=nt("tooltip.immediateShow"),b_=(t,s,c)=>{t.getSystem().broadcastOn([UE],{})};var y_=Object.freeze({__proto__:null,hideAllExclusive:b_,immediateOpenClose:(t,s,c,l)=>Tn(t,l?q0:lS),isEnabled:(t,s,c)=>c.isEnabled(),setComponents:(t,s,c,l)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&an.set(d,l)})},setEnabled:(t,s,c,l)=>c.setEnabled(l)}),EF=Object.freeze({__proto__:null,events:(t,s)=>{const c=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(Os(C),t.onHide(h,C),s.clearTooltip())}),s.clearTimer()},l=h=>{if(!s.isShowing()&&s.isEnabled()){b_(h);const C=t.lazySink(h).getOrDie(),S=h.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:es(t.mode==="normal"?[Me(Ul(),T=>{Tn(h,cS)}),Me(Er(),T=>{Tn(h,aS)})]:[]),behaviours:We([an.config({})])});s.setTooltip(S),du(C,S),t.onShow(h,S),Ea.position(C,S,{anchor:t.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const S=t.lazySink(h).getOrDie();Ea.position(S,C,{anchor:t.anchor(h)})})},g=()=>{switch(t.mode){case"normal":return[Me(Xc(),h=>{Tn(h,q0)}),Me(z1(),h=>{Tn(h,lS)}),Me(Ul(),h=>{Tn(h,cS)}),Me(Er(),h=>{Tn(h,aS)})];case"follow-highlight":return[Me(U1(),(h,C)=>{Tn(h,cS)}),Me(sv(),h=>{Tn(h,aS)})];case"children-normal":return[Me(Xc(),(h,C)=>{Is(h.element).each(S=>{Ba(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Tn(h,q0)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),Me(z1(),h=>{Is(h.element).fold(()=>{Tn(h,lS)},ae)}),Me(Ul(),h=>{io(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{Tn(h,cS)},S=>{s.isShowing()&&(t.onShow(h,S),d(h))})})}),Me(Er(),h=>{io(h.element,"[data-mce-tooltip]:hover").fold(()=>{Tn(h,aS)},ae)})];default:return[Me(Xc(),(h,C)=>{Is(h.element).each(S=>{Ba(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Tn(h,q0)},T=>{s.isShowing()&&(t.onShow(h,T),d(h))})})}),Me(z1(),h=>{Is(h.element).fold(()=>{Tn(h,lS)},ae)})]}};return es(qt([[uC(h=>{t.onSetup(h)}),Me(cS,h=>{s.resetTimer(()=>{l(h)},t.delayForShow())}),Me(aS,h=>{s.resetTimer(()=>{c(h)},t.delayForHide())}),Me(q0,h=>{s.resetTimer(()=>{l(h)},0)}),Me(lS,h=>{s.resetTimer(()=>{c(h)},0)}),Me(Kg(),(h,C)=>{const S=C;S.universal||bo(S.channels,UE)&&c(h)}),td(h=>{c(h)})],g()]))}}),TF=[$e("lazySink"),$e("tooltipDom"),pe("exclusive",!0),pe("tooltipComponents",[]),Uo("delayForShow",te(300)),Uo("delayForHide",te(100)),Uo("onSetup",ae),us("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),pe("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:te([js,_r,Hs,Cc,sr,kr]),onRtl:te([js,_r,Hs,Cc,sr,kr])},bubble:Qc(0,-2,{})})),Zn("onHide"),Zn("onShow")],iS=Object.freeze({__proto__:null,init:()=>{const t=Et(!0),s=dn(),c=dn(),l=()=>{s.on(clearTimeout)},d=(h,C)=>{l(),s.set(setTimeout(h,C))},g=te("not-implemented");return kl({getTooltip:c.get,isShowing:c.isSet,setTooltip:c.set,clearTooltip:c.clear,clearTimer:l,resetTimer:d,readState:g,isEnabled:()=>t.get(),setEnabled:h=>t.set(h)})}});const ms=Sc({fields:TF,name:"tooltipping",active:EF,state:iS,apis:y_});var _F=Object.freeze({__proto__:null,events:()=>es([kv(Hw(),wt)]),exhibit:()=>au({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const K0=Sc({fields:[],name:"unselecting",active:_F}),C_=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return xo(s,(c,l)=>l.name==="class"?c:{...c,[l.name]:l.value},{})},AF=t=>Array.prototype.slice.call(t.dom.classList,0),og=t=>{const s=Je.fromHtml(t),c=mc(s),l=C_(s),d=AF(s),g=c.length===0?{}:{innerHtml:xm(s)};return{tag:da(s),classes:d,attributes:l,...g}},no=t=>{const s=ZR(t)&&ac(t,"uid")?t.uid:Vp("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}},xc=Q1,Qm=q2,sg=te("dismiss.popups"),Kp=te("reposition.popups"),S_=te("mouse.released"),OF=(t,s)=>{const c=Et(!1),l=Et(!1);return{stop:()=>{c.set(!0)},cut:()=>{l.set(!0)},isStopped:c.get,isCut:l.get,event:t,setSource:s.set,getSource:s.get}},DF=t=>{const s=Et(!1);return{stop:()=>{s.set(!0)},cut:ae,isStopped:s.get,isCut:bn,event:t,setSource:le("Cannot set source of a broadcasted event"),getSource:le("Cannot get source of a broadcasted event")}},RF=t=>t.raw.which===fC[0]&&!bo(["input","textarea"],da(t.target))&&!Om(t.target,'[contenteditable="true"]'),aM=(t,s)=>{const c={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=Yw(c),g=Pe(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),W=>Ho(t,W,q=>{d.fireIfReady(q,W).each(ce=>{ce&&q.kill()}),c.triggerEvent(W,q)&&q.kill()})),h=dn(),C=Ho(t,"paste",W=>{d.fireIfReady(W,"paste").each(ee=>{ee&&W.kill()}),c.triggerEvent("paste",W)&&W.kill(),h.set(setTimeout(()=>{c.triggerEvent($2(),W)},0))}),S=Ho(t,"keydown",W=>{c.triggerEvent("keydown",W)?W.kill():c.stopBackspace&&RF(W)&&W.prevent()}),T=Ho(t,"focusin",W=>{c.triggerEvent("focusin",W)&&W.kill()}),O=dn(),N=Ho(t,"focusout",W=>{c.triggerEvent("focusout",W)&&W.kill(),O.set(setTimeout(()=>{c.triggerEvent(z1(),W)},0))});return{unbind:()=>{ft(g,W=>{W.unbind()}),S.unbind(),T.unbind(),N.unbind(),C.unbind(),h.on(clearTimeout),O.on(clearTimeout)}}},w_=(t,s)=>{const c=at(t,"target").getOr(s);return Et(c)},uS=Uc.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),x_=(t,s,c,l,d,g)=>{const h=t(s,l),C=OF(c,d);return h.fold(()=>(g.logEventNoHandlers(s,l),uS.complete()),S=>{const T=S.descHandler;return hh(T)(C),C.isStopped()?(g.logEventStopped(s,S.element,T.purpose),uS.stopped()):C.isCut()?(g.logEventCut(s,S.element,T.purpose),uS.complete()):Oc(S.element).fold(()=>(g.logNoParent(s,S.element,T.purpose),uS.complete()),N=>(g.logEventResponse(s,S.element,T.purpose),uS.resume(N)))})},yy=(t,s,c,l,d,g)=>x_(t,s,c,l,d,g).fold(wt,h=>yy(t,s,c,h,d,g),bn),lM=(t,s,c,l,d)=>{const g=w_(c,l);return x_(t,s,c,l,g,d)},MF=(t,s,c)=>{const l=DF(s);return ft(t,d=>{const g=d.descHandler;hh(g)(l)}),l.isStopped()},NF=(t,s,c,l)=>E_(t,s,c,c.target,l),E_=(t,s,c,l,d)=>{const g=w_(c,l);return yy(t,s,c,l,g,d)},BF=(t,s)=>({element:t,descHandler:s}),PF=(t,s)=>({id:t,descHandler:s}),iM=()=>{const t={},s=(h,C,S)=>{vs(S,(T,O)=>{const N=t[O]!==void 0?t[O]:{};N[C]=oE(T,h),t[O]=N})},c=(h,C)=>O0(C).bind(S=>at(h,S)).map(S=>BF(C,S));return{registerId:s,unregisterId:h=>{vs(t,(C,S)=>{In(C,h)&&delete C[h]})},filterByType:h=>at(t,h).map(C=>Pl(C,(S,T)=>PF(T,S))).getOr([]),find:(h,C,S)=>at(t,C).bind(T=>Pg(S,O=>c(T,O),h))}},uM=()=>{const t=iM(),s={},c=T=>{const O=T.element;return O0(O).getOrThunk(()=>v3("uid-",T.element))},l=(T,O)=>{const N=s[O];if(N===T)g(T);else throw new Error('The tagId "'+O+'" is already used by: '+mo(N.element)+`
Cannot use it for: `+mo(T.element)+`
The conflicting element is`+(Cs(N.element)?" ":" not ")+"already in the DOM")},d=T=>{const O=c(T);ac(s,O)&&l(T,O);const N=[T];t.registerId(N,O,T.events),s[O]=T},g=T=>{O0(T.element).each(O=>{delete s[O],t.unregisterId(O)})};return{find:(T,O,N)=>t.find(T,O,N),filter:T=>t.filterByType(T),register:d,unregister:g,getById:T=>at(s,T)}},WE=t=>{const s=Q=>Oc(t.element).fold(wt,ue=>lo(Q,ue)),c=uM(),l=(Q,ue)=>c.find(s,Q,ue),d=aM(t.element,{triggerEvent:(Q,ue)=>H2(Q,ue.target,de=>NF(l,Q,ue,de))}),g={debugInfo:te("real"),triggerEvent:(Q,ue,de)=>{H2(Q,ue,ye=>E_(l,Q,de,ue,ye))},triggerFocus:(Q,ue)=>{O0(Q).fold(()=>{ro(Q)},de=>{H2(zd(),Q,ye=>(lM(l,zd(),{originator:ue,kill:ae,prevent:ae,target:Q},Q,ye),!1))})},triggerEscape:(Q,ue)=>{g.triggerEvent("keydown",Q.element,ue.event)},getByUid:Q=>ee(Q),getByDom:Q=>ce(Q),build:na,buildOrPatch:fy,addToGui:Q=>{S(Q)},removeFromGui:Q=>{T(Q)},addToWorld:Q=>{h(Q)},removeFromWorld:Q=>{C(Q)},broadcast:Q=>{F(Q)},broadcastOn:(Q,ue)=>{W(Q,ue)},broadcastEvent:(Q,ue)=>{q(Q,ue)},isConnected:wt},h=Q=>{Q.connect(g),ji(Q.element)||(c.register(Q),ft(Q.components(),h),g.triggerEvent(Yg(),Q.element,{target:Q.element}))},C=Q=>{ji(Q.element)||(ft(Q.components(),C),c.unregister(Q)),Q.disconnect()},S=Q=>{du(t,Q)},T=Q=>{Os(Q)},O=()=>{d.unbind(),yl(t.element)},N=Q=>{const ue=c.filter(Kg());ft(ue,de=>{const ye=de.descHandler;hh(ye)(Q)})},F=Q=>{N({universal:!0,data:Q})},W=(Q,ue)=>{N({universal:!1,channels:Q,data:ue})},q=(Q,ue)=>{const de=c.filter(Q);return MF(de,ue)},ee=Q=>c.getById(Q).fold(()=>Qt.error(new Error('Could not find component with uid: "'+Q+'" in system.')),Qt.value),ce=Q=>{const ue=O0(Q).getOr("not found");return ee(ue)};return h(t),{root:t,element:t.element,destroy:O,add:S,remove:T,getByUid:ee,getByDom:ce,addToWorld:h,removeFromWorld:C,broadcast:F,broadcastOn:W,broadcastEvent:q}},T_=()=>{const t=(s,c)=>{c.stop(),oh(s)};return[Me(Nf(),t),Me(Pf(),t),jf(Pm()),jf(wa())]},ZE=t=>{const s=c=>Zm((l,d)=>{c(l),d.stop()});return es(qt([t.map(s).toArray(),T_()]))},Fc=gu({name:"Button",factory:t=>{const s=ZE(t.action),c=t.dom.tag,l=g=>at(t.dom,"attributes").bind(h=>at(h,g)),d=()=>{if(c==="button"){const g=l("type").getOr("button"),h=l("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:t.role.getOr(l("role").getOr("button"))}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Yd.augment(t.buttonBehaviours,[Yt.config({}),kt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[pe("uid",void 0),$e("dom"),pe("components",[]),Yd.field("buttonBehaviours",[Yt,kt]),Qn("action"),Qn("role"),pe("eventOrder",{})]}),k_=te([pe("shell",!1),$e("makeItem"),pe("setupItem",ae),Yd.field("listBehaviours",[an])]),mM=gr({name:"items",overrides:()=>({behaviours:We([an.config({})])})}),fM=te([mM]),gM=te("CustomList"),$F=(t,s,c,l)=>{const d=(C,S)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},T=>{const O=an.contents(T),N=S.length,F=N-O.length,W=F>0?go(F,()=>t.makeItem()):[],q=O.slice(N);ft(q,ce=>an.remove(T,ce)),ft(W,ce=>an.append(T,ce));const ee=an.contents(T);ft(ee,(ce,Q)=>{t.setupItem(C,ce,S[Q],Q)})})},g=t.shell?{behaviours:[an.config({})],components:[]}:{behaviours:[],components:s},h=C=>t.shell?A.some(C):So(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:ra(t.listBehaviours,g.behaviours),apis:{setItems:d}}},jE=ja({name:gM(),configFields:k_(),partFields:fM(),factory:$F,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),dS="aria-controls",hM=t=>wf(t,c=>{if(!Zc(c))return!1;const l=Js(c,"id");return l!==void 0&&l.indexOf(dS)>-1}).bind(c=>{const l=Js(c,"id"),d=ys(c);return io(d,`[${dS}="${l}"]`)}),__=()=>{const t=nt(dS);return{id:t,link:l=>{Wt(l,dS,t)},unlink:l=>{Ln(l,dS)}}},Y0=(t,s)=>hM(s).exists(c=>X0(t,c)),X0=(t,s)=>O1(s,c=>lo(c,t.element),bn)||Y0(t,s),GE="alloy.item-hover",mS="alloy.item-focus",pM="alloy.item-toggled",A_=t=>{(Is(t.element).isNone()||Yt.isFocused(t))&&(Yt.isFocused(t)||Yt.focus(t),Pt(t,GE,{item:t}))},O_=t=>{Pt(t,mS,{item:t})},bM=(t,s)=>{Pt(t,pM,{item:t,state:s})},qE=te(GE),vM=te(mS),IF=te(pM),yM=t=>t.role.fold(()=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Sn),CM=(t,s)=>({aria:{mode:s?"selected":"checked"},...la(t,(c,l)=>l!=="exclusive"),onToggled:(c,l)=>{St(t.onToggled)&&t.onToggled(c,l),bM(c,l)}}),SM=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:yM(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Yd.augment(t.itemBehaviours,[t.toggling.fold(xn.revoke,s=>xn.config(CM(s,t.role.exists(c=>c==="option")))),Yt.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{O_(s)}}),kt.config({mode:"execution"}),dt.config({store:{mode:"memory",initialValue:t.data}}),sn("item-type-events",[...T_(),Me(Ul(),A_),Me(Bf(),Yt.focus)])]),components:t.components,eventOrder:t.eventOrder});var LF=[$e("data"),$e("components"),$e("dom"),pe("hasSubmenu",!1),Qn("toggling"),Qn("role"),Yd.field("itemBehaviours",[xn,Yt,kt,dt]),pe("ignoreFocus",!1),pe("domModification",{}),Co("builder",SM),pe("eventOrder",{})];const wM=t=>({dom:t.dom,components:t.components,events:es([mx(Bf())])});var HF=[$e("dom"),$e("components"),Co("builder",wM)];const D_=te("item-widget"),R_=te([Tr({name:"widget",overrides:t=>({behaviours:We([dt.config({store:{mode:"manual",getValue:s=>t.data,setValue:ae}})])})})]),xM=t=>{const s=Lf(D_(),t,R_()),c=Wd(D_(),t,s.internals()),l=g=>So(g,t,"widget").map(h=>(kt.focusIn(h),h)),d=(g,h)=>ah(h.event.target)?A.none():(t.autofocus&&h.setSource(g.element),A.none());return{dom:t.dom,components:c,domModification:t.domModification,events:es([Zm((g,h)=>{l(g).each(C=>{h.stop()})}),Me(Ul(),A_),Me(Bf(),(g,h)=>{t.autofocus?l(g):Yt.focus(g)})]),behaviours:Yd.augment(t.widgetBehaviours,[dt.config({store:{mode:"memory",initialValue:t.data}}),Yt.config({ignore:t.ignoreFocus,onFocus:g=>{O_(g)}}),kt.config({mode:"special",focusIn:t.autofocus?g=>{l(g)}:Dv(),onLeft:d,onRight:d,onEscape:(g,h)=>!Yt.isFocused(g)&&!t.autofocus?(Yt.focus(g),A.some(!0)):(t.autofocus&&h.setSource(g.element),A.none())})])}};var EM=[$e("uid"),$e("data"),$e("components"),$e("dom"),pe("autofocus",!1),pe("ignoreFocus",!1),Yd.field("widgetBehaviours",[dt,Yt,kt]),pe("domModification",{}),Vf(R_()),Co("builder",xM)];const zF=Nc("type",{widget:EM,item:LF,separator:HF}),VF=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),UF=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),WF=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),ZF=te([Y1({factory:{sketch:t=>{const s=Va("menu.spec item",zF,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>In(s,"uid")?s:{...s,uid:Vp("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),YE=te([nr("role"),$e("value"),$e("items"),$e("dom"),$e("components"),pe("eventOrder",{}),wc("menuBehaviours",[Gn,dt,Ce,kt]),pi("movement",{mode:"menu",moveOnTab:!0},Nc("mode",{grid:[dp(),Co("config",VF)],matrix:[Co("config",UF),$e("rowSelector"),pe("previousSelector",A.none)],menu:[pe("moveOnTab",!0),Co("config",WF)]})),hk(),pe("fakeFocus",!1),pe("focusManager",v0()),Zn("onHighlight"),Zn("onDehighlight"),pe("showMenuRole",!0)]),TM=te("alloy.menu-focus"),kM=(t,s)=>{const c=zo(t.element,'[role="menuitemradio"][aria-checked="true"]');ft(c,l=>{lo(l,s.element)||t.getSystem().getByDom(l).each(d=>{xn.off(d)})})},jF=(t,s,c,l)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ra(t.menuBehaviours,[Gn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),dt.config({store:{mode:"memory",initialValue:t.value}}),Ce.config({find:A.some}),kt.config(t.movement.config(t,t.movement))]),events:es([Me(vM(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{Gn.highlight(d,C),g.stop(),Pt(d,TM(),{menu:d,item:C})})}),Me(qE(),(d,g)=>{const h=g.event.item;Gn.highlight(d,h)}),Me(IF(),(d,g)=>{const{item:h,state:C}=g.event;C&&Js(h.element,"role")==="menuitemradio"&&kM(d,h)})]),components:s,eventOrder:t.eventOrder,...t.showMenuRole?{domModification:{attributes:{role:t.role.getOr("menu")}}}:{}}),rg=ja({name:"Menu",configFields:YE(),partFields:ZF(),factory:jF}),_M=t=>tl(t,(s,c)=>({k:s,v:c})),AM=(t,s,c,l)=>at(c,l).bind(d=>at(t,d).bind(g=>{const h=AM(t,s,c,g);return A.some([g].concat(h))})).getOr([]),OM=(t,s)=>{const c={};vs(t,(h,C)=>{ft(h,S=>{c[S]=C})});const l=s,d=_M(s),g=Io(d,(h,C)=>[C].concat(AM(c,l,d,C)));return Io(c,h=>at(g,h).getOr([h]))},DM=()=>{const t=Et({}),s=Et({}),c=Et({}),l=dn(),d=Et({}),g=()=>{t.set({}),s.set({}),c.set({}),l.clear()},h=()=>l.get().isNone(),C=(Te,rt)=>{s.set({...s.get(),[Te]:{type:"prepared",menu:rt}})},S=(Te,rt,Ue,ke)=>{l.set(Te),t.set(Ue),s.set(rt),d.set(ke);const mt=OM(ke,Ue);c.set(mt)},T=Te=>yr(t.get(),(rt,Ue)=>rt===Te),O=(Te,rt,Ue)=>ee(Te).bind(ke=>T(Te).bind(mt=>rt(mt).map(Ut=>({triggeredMenu:ke,triggeringItem:Ut,triggeringPath:Ue})))),N=(Te,rt)=>{const Ue=ho(Q(Te).toArray(),ke=>ee(ke).isSome());return at(c.get(),Te).bind(ke=>{const mt=gs(Ue.concat(ke)),Ut=_e(mt,(Dt,Nn)=>O(Dt,rt,mt.slice(0,Nn+1)).fold(()=>Wc(l.get(),Dt)?[]:[A.none()],nn=>[A.some(nn)]));return fm(Ut)})},F=Te=>at(t.get(),Te).map(rt=>{const Ue=at(c.get(),Te).getOr([]);return[rt].concat(Ue)}),W=Te=>at(c.get(),Te).bind(rt=>rt.length>1?A.some(rt.slice(1)):A.none()),q=Te=>at(c.get(),Te),ee=Te=>ce(Te).bind(M_),ce=Te=>at(s.get(),Te),Q=Te=>at(t.get(),Te);return{setMenuBuilt:C,setContents:S,expand:F,refresh:q,collapse:W,lookupMenu:ce,lookupItem:Q,otherMenus:Te=>{const rt=d.get();return Rt($o(rt),Te)},getPrimary:()=>l.get().bind(ee),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:N}},M_=t=>t.type==="prepared"?A.some(t.menu):A.none(),N_={init:DM,extractPreparedMenu:M_},RM=nt("tiered-menu-item-highlight"),MM=nt("tiered-menu-item-dehighlight"),GF=(t,s)=>{const c=dn(),l=(Fe,et,jt)=>Io(jt,(gn,Ft)=>{const mn=()=>rg.sketch({...gn,value:Ft,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Do,wo)=>{Pt(Do,RM,{menuComp:Do,itemComp:wo})},onDehighlight:(Do,wo)=>{Pt(Do,MM,{menuComp:Do,itemComp:wo})},focusManager:t.fakeFocus?xx():v0()});return Ft===et?{type:"prepared",menu:Fe.getSystem().build(mn())}:{type:"notbuilt",nbMenu:mn}}),d=N_.init(),g=Fe=>{const et=l(Fe,t.data.primary,t.data.menus),jt=S();return d.setContents(t.data.primary,et,t.data.expansions,jt),d.getPrimary()},h=Fe=>dt.getValue(Fe).value,C=(Fe,et,jt)=>An(et,gn=>{if(!gn.getSystem().isConnected())return A.none();const Ft=Gn.getCandidates(gn);return Jt(Ft,mn=>h(mn)===jt)}),S=Fe=>Io(t.data.menus,(et,jt)=>_e(et.items,gn=>gn.type==="separator"?[]:[gn.data.value])),T=Gn.highlight,O=(Fe,et)=>{T(Fe,et),Gn.getHighlighted(et).orThunk(()=>Gn.getFirst(et)).each(jt=>{t.fakeFocus?Gn.highlight(et,jt):m0(Fe,jt.element,Bf())})},N=(Fe,et)=>oi(Pe(et,jt=>Fe.lookupMenu(jt).bind(gn=>gn.type==="prepared"?A.some(gn.menu):A.none()))),F=(Fe,et,jt)=>{const gn=N(et,et.otherMenus(jt));ft(gn,Ft=>{Rc(Ft.element,[t.markers.backgroundMenu]),t.stayInDom||an.remove(Fe,Ft)})},W=Fe=>c.get().getOrThunk(()=>{const et={},jt=zo(Fe.element,`.${t.markers.item}`),gn=ho(jt,Ft=>Js(Ft,"aria-haspopup")==="true");return ft(gn,Ft=>{Fe.getSystem().getByDom(Ft).each(mn=>{const Do=h(mn);et[Do]=mn})}),c.set(et),et}),q=(Fe,et)=>{const jt=W(Fe);vs(jt,(gn,Ft)=>{const mn=bo(et,Ft);Wt(gn.element,"aria-expanded",mn)})},ee=(Fe,et,jt)=>A.from(jt[0]).bind(gn=>et.lookupMenu(gn).bind(Ft=>{if(Ft.type==="notbuilt")return A.none();{const mn=Ft.menu,Do=N(et,jt.slice(1));return ft(Do,wo=>{hs(wo.element,t.markers.backgroundMenu)}),Cs(mn.element)||an.append(Fe,jl(mn)),Rc(mn.element,[t.markers.backgroundMenu]),O(Fe,mn),F(Fe,et,jt),A.some(mn)}}));let ce;(function(Fe){Fe[Fe.HighlightSubmenu=0]="HighlightSubmenu",Fe[Fe.HighlightParent=1]="HighlightParent"})(ce||(ce={}));const Q=(Fe,et,jt)=>{if(jt.type==="notbuilt"){const gn=Fe.getSystem().build(jt.nbMenu());return d.setMenuBuilt(et,gn),gn}else return jt.menu},ue=(Fe,et,jt=ce.HighlightSubmenu)=>{if(et.hasConfigured(Ct)&&Ct.isDisabled(et))return A.some(et);{const gn=h(et);return d.expand(gn).bind(Ft=>(q(Fe,Ft),A.from(Ft[0]).bind(mn=>d.lookupMenu(mn).bind(Do=>{const wo=Q(Fe,mn,Do);return Cs(wo.element)||an.append(Fe,jl(wo)),t.onOpenSubmenu(Fe,et,wo,gs(Ft)),jt===ce.HighlightSubmenu?(Gn.highlightFirst(wo),ee(Fe,d,Ft)):(Gn.dehighlightAll(wo),A.some(et))}))))}},de=(Fe,et)=>{const jt=h(et);return d.collapse(jt).bind(gn=>(q(Fe,gn),ee(Fe,d,gn).map(Ft=>(t.onCollapseMenu(Fe,et,Ft),Ft))))},ye=(Fe,et)=>{const jt=h(et);return d.refresh(jt).bind(gn=>(q(Fe,gn),ee(Fe,d,gn)))},Te=(Fe,et)=>ah(et.element)?A.none():ue(Fe,et,ce.HighlightSubmenu),rt=(Fe,et)=>ah(et.element)?A.none():de(Fe,et),Ue=(Fe,et)=>de(Fe,et).orThunk(()=>t.onEscape(Fe,et).map(()=>Fe)),ke=Fe=>(et,jt)=>hc(jt.getSource(),`.${t.markers.item}`).bind(gn=>et.getSystem().getByDom(gn).toOptional().bind(Ft=>Fe(et,Ft).map(wt))),mt=es([Me(TM(),(Fe,et)=>{const jt=et.event.item;d.lookupItem(h(jt)).each(()=>{const gn=et.event.menu;Gn.highlight(Fe,gn);const Ft=h(et.event.item);d.refresh(Ft).each(mn=>F(Fe,d,mn))})}),Zm((Fe,et)=>{const jt=et.event.target;Fe.getSystem().getByDom(jt).each(gn=>{h(gn).indexOf("collapse-item")===0&&de(Fe,gn),ue(Fe,gn,ce.HighlightSubmenu).fold(()=>{t.onExecute(Fe,gn)},ae)})}),Wo((Fe,et)=>{g(Fe).each(jt=>{an.append(Fe,jl(jt)),t.onOpenMenu(Fe,jt),t.highlightOnOpen===ea.HighlightMenuAndItem?O(Fe,jt):t.highlightOnOpen===ea.HighlightJustMenu&&T(Fe,jt)})}),Me(RM,(Fe,et)=>{t.onHighlightItem(Fe,et.event.menuComp,et.event.itemComp)}),Me(MM,(Fe,et)=>{t.onDehighlightItem(Fe,et.event.menuComp,et.event.itemComp)}),...t.navigateOnHover?[Me(qE(),(Fe,et)=>{const jt=et.event.item;ye(Fe,jt),ue(Fe,jt,ce.HighlightParent),t.onHover(Fe,jt)})]:[]]),Ut=Fe=>Gn.getHighlighted(Fe).bind(Gn.getHighlighted),Dt=Fe=>{Ut(Fe).each(et=>{de(Fe,et)})},Nn=Fe=>{d.getPrimary().each(et=>{O(Fe,et)})},nn=Fe=>A.from(Fe.components()[0]).filter(et=>Js(et.element,"role")==="menu"),_t={collapseMenu:Dt,highlightPrimary:Nn,repositionMenus:Fe=>{d.getPrimary().bind(jt=>Ut(Fe).bind(gn=>{const Ft=h(gn),mn=_u(d.getMenus()),Do=oi(Pe(mn,N_.extractPreparedMenu));return d.getTriggeringPath(Ft,wo=>C(Fe,Do,wo))}).map(gn=>({primary:jt,triggeringPath:gn}))).fold(()=>{nn(Fe).each(jt=>{t.onRepositionMenu(Fe,jt,[])})},({primary:jt,triggeringPath:gn})=>{t.onRepositionMenu(Fe,jt,gn)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ra(t.tmenuBehaviours,[kt.config({mode:"special",onRight:ke(Te),onLeft:ke(rt),onEscape:ke(Ue),focusIn:(Fe,et)=>{d.getPrimary().each(jt=>{m0(Fe,jt.element,Bf())})}}),Gn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Ce.config({find:Fe=>Gn.getHighlighted(Fe)}),an.config({})]),eventOrder:t.eventOrder,apis:_t,events:mt}},qF=te("collapse-item"),NM=(t,s,c)=>({primary:t,menus:s,expansions:c}),BM=(t,s)=>({primary:t,menus:Gg(t,s),expansions:{}}),KF=t=>({value:nt(qF()),meta:{text:t}}),J0=gu({name:"TieredMenu",configFields:[If("onExecute"),If("onEscape"),Br("onOpenMenu"),Br("onOpenSubmenu"),Zn("onRepositionMenu"),Zn("onCollapseMenu"),pe("highlightOnOpen",ea.HighlightMenuAndItem),tu("data",[$e("primary"),$e("menus"),$e("expansions")]),pe("fakeFocus",!1),Zn("onHighlightItem"),Zn("onDehighlightItem"),Zn("onHover"),jw(),$e("dom"),pe("navigateOnHover",!0),pe("stayInDom",!1),wc("tmenuBehaviours",[kt,Gn,Ce,an]),pe("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:GF,extraApis:{tieredData:NM,singleData:BM,collapseItem:KF}}),PM=te("sink"),$M=te(gr({name:PM(),overrides:te({dom:{tag:"div"},behaviours:We([Ea.config({useFixed:wt})]),events:es([jf(ec()),jf(wa()),jf(Nf())])})})),YF=za([pe("isExtraPart",bn),El("fireEventInstead",[pe("event",Im())])]),B_=t=>{const s=Va("Dismissal",YF,t);return{[sg()]:{schema:za([$e("target")]),onReceive:(c,l)=>{qn.isOpen(c)&&(qn.isPartOf(c,l.target)||s.isExtraPart(c,l.target)||s.fireEventInstead.fold(()=>qn.close(c),g=>Tn(c,g.event)))}}}},XF=za([El("fireEventInstead",[pe("event",Uw())]),eu("doReposition")]),P_=t=>{const s=Va("Reposition",XF,t);return{[Kp()]:{onReceive:c=>{qn.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),l=>Tn(c,l.event))}}}},XE=(t,s)=>{const c=t.getHotspot(s).getOr(s),l="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:l,hotspot:c,overrides:d}),g=>({type:l,hotspot:c,overrides:d,layouts:g}))},IM=(t,s,c)=>{const l=t.fetch;return l(c).map(s)},JF=(t,s,c,l,d,g,h)=>{const C=IM(t,s,l),S=I_(l,t);return C.map(T=>T.bind(O=>{const N=O.menus[O.primary];return A.from(N).each(F=>{t.listRole.each(W=>{F.role=W})}),A.from(J0.sketch({...g.menu(),uid:Vp(""),data:O,highlightOnOpen:h,onOpenMenu:(F,W)=>{const q=S().getOrDie();Ea.position(q,W,{anchor:c}),qn.decloak(d)},onOpenSubmenu:(F,W,q)=>{const ee=S().getOrDie();Ea.position(ee,q,{anchor:{type:"submenu",item:W}}),qn.decloak(d)},onRepositionMenu:(F,W,q)=>{const ee=S().getOrDie();Ea.position(ee,W,{anchor:c}),ft(q,ce=>{Ea.position(ee,ce.triggeredMenu,{anchor:{type:"submenu",item:ce.triggeringItem}})})},onEscape:()=>(Yt.focus(l),qn.close(d),A.some(!0))}))}))},JE=(t,s,c,l,d,g,h)=>{const C=XE(t,c);return JF(t,s,C,c,l,d,h).map(T=>(T.fold(()=>{qn.isOpen(l)&&qn.close(l)},O=>{qn.cloak(l),qn.open(l,O),g(l)}),l))},FM=(t,s,c,l,d,g,h)=>(qn.close(l),_o.pure(l)),$_=(t,s,c,l,d,g)=>{const h=Tt.getCoupled(c,"sandbox");return(qn.isOpen(h)?FM:JE)(t,s,c,h,l,d,g)},QF=(t,s,c)=>{const l=Ce.getCurrent(s).getOr(s),d=_s(t.element);c?on(l.element,"min-width",d+"px"):Rg(l.element,d)},I_=(t,s)=>t.getSystem().getByUid(s.uid+"-"+PM()).map(c=>()=>Qt.value(c)).getOrThunk(()=>s.lazySink.fold(()=>()=>Qt.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),F_=t=>{qn.getState(t).each(s=>{J0.repositionMenus(s)})},QE=(t,s,c)=>{const l=__(),d=(C,S)=>{const T=XE(t,s);l.link(s.element),t.matchWidth&&QF(T.hotspot,S,t.useMinWidth),t.onOpen(T,C,S),c!==void 0&&c.onOpen!==void 0&&c.onOpen(C,S)},g=(C,S)=>{l.unlink(s.element),h().getOr(S).element.dom.dispatchEvent(new window.FocusEvent("focusout")),c!==void 0&&c.onClose!==void 0&&c.onClose(C,S)},h=I_(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:l.id}},behaviours:Yd.augment(t.sandboxBehaviours,[dt.config({store:{mode:"memory",initialValue:s}}),qn.config({onOpen:d,onClose:g,isPartOf:(C,S,T)=>X0(S,T)||X0(s,T),getAttachPoint:()=>h().getOrDie()}),Ce.config({find:C=>qn.getState(C).bind(S=>Ce.getCurrent(S))}),Al.config({channels:{...B_({isExtraPart:bn}),...P_({doReposition:F_})}})])}},LM=t=>{const s=Tt.getCoupled(t,"sandbox");F_(s)},L_=()=>[pe("sandboxClasses",[]),Yd.field("sandboxBehaviours",[Ce,Al,qn,dt])],eL=te([$e("dom"),$e("fetch"),Zn("onOpen"),fr("onExecute"),pe("getHotspot",A.some),pe("getAnchorOverrides",te({})),Gp(),wc("dropdownBehaviours",[xn,Tt,kt,Yt]),$e("toggleClass"),pe("eventOrder",{}),Qn("lazySink"),pe("matchWidth",!1),pe("useMinWidth",!1),Qn("role"),Qn("listRole")].concat(L_())),HM=te([Jc({schema:[jw(),pe("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),$M()]),H_=(t,s,c,l)=>{const d=O=>at(t.dom,"attributes").bind(N=>at(N,O)),g=O=>{qn.getState(O).each(N=>{J0.highlightPrimary(N)})},h=(O,N,F)=>$_(t,Sn,O,l,N,F),C=O=>{h(O,g,ea.HighlightMenuAndItem).get(ae)},S={expand:O=>{xn.isOn(O)||h(O,ae,ea.HighlightNone).get(ae)},open:O=>{xn.isOn(O)||h(O,ae,ea.HighlightMenuAndItem).get(ae)},refetch:O=>Tt.getExistingCoupled(O,"sandbox").fold(()=>h(O,ae,ea.HighlightMenuAndItem).map(ae),F=>JE(t,Sn,O,F,l,ae,ea.HighlightMenuAndItem).map(ae)),isOpen:xn.isOn,close:O=>{xn.isOn(O)&&h(O,ae,ea.HighlightMenuAndItem).get(ae)},repositionMenus:O=>{xn.isOn(O)&&LM(O)}},T=(O,N)=>(oh(O),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:ra(t.dropdownBehaviours,[xn.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),Tt.config({others:{sandbox:O=>QE(t,O,{onOpen:()=>xn.on(O),onClose:()=>xn.off(O)})}}),kt.config({mode:"special",onSpace:T,onEnter:T,onDown:(O,N)=>{if(hu.isOpen(O)){const F=Tt.getCoupled(O,"sandbox");g(F)}else hu.open(O);return A.some(!0)},onEscape:(O,N)=>hu.isOpen(O)?(hu.close(O),A.some(!0)):A.none()}),Yt.config({})]),events:ZE(A.some(C)),eventOrder:{...t.eventOrder,[Wl()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":t.listRole.getOr("true"),...t.role.fold(()=>({}),O=>({role:O})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},hu=ja({name:"Dropdown",configFields:eL(),partFields:HM(),factory:H_,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),zM="form",tL=[wc("formBehaviours",[dt])],VM=t=>"<alloy.field."+t+">",nL=t=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),K2(zM,VM(C),S)),record:te(g)}})(),c=t(s),l=s.record(),d=Pe(l,g=>Tr({name:g,pname:VM(g)}));return H0(zM,tL,d,UM,c)},oL=(t,s)=>t.fold(()=>Qt.error(s),Qt.value),UM=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ra(t.formBehaviours,[dt.config({store:{mode:"manual",getValue:c=>{const l=zf(c,t);return Io(l,(d,g)=>d().bind(h=>{const C=Ce.getCurrent(h);return oL(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+mo(h.element)))}).map(dt.getValue))},setValue:(c,l)=>{vs(l,(d,g)=>{So(c,t,g).each(h=>{Ce.getCurrent(h).each(C=>{dt.setValue(C,d)})})})}}})]),apis:{getField:(c,l)=>So(c,t,l).bind(Ce.getCurrent)}}),Q0={getField:Ip((t,s,c)=>t.getField(s,c)),sketch:nL},Cy=te([$e("dom"),pe("shell",!0),wc("toolbarBehaviours",[an])]),sL=te([gr({name:"groups",overrides:()=>({behaviours:We([an.config({})])})})]),Di=(t,s,c,l)=>{const d=(C,S)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},T=>{an.set(T,S)})},g=C=>t.shell?A.some(C):So(C,t,"groups"),h=t.shell?{behaviours:[an.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:h.components,behaviours:ra(t.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:ae},domModification:{attributes:{role:"group"}}}},Lc=ja({name:"Toolbar",configFields:Cy(),partFields:sL(),factory:Di,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),WM=te([ou(["toggledClass"]),$e("lazySink"),eu("fetch"),hi("getBounds"),El("fireDismissalEventInstead",[pe("event",Im())]),Gp(),Zn("onToggled")]),z_=te([Jc({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:We([xn.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Jc({factory:Lc,schema:Cy(),name:"toolbar",overrides:t=>({toolbarBehaviours:We([kt.config({mode:"cyclic",onEscape:s=>(So(s,t,"button").each(Yt.focus),A.none())})])})})]),Sy=dn(),eT=(t,s)=>{Sy.set(!0),V_(t,s),Sy.clear()},V_=(t,s)=>{const c=Tt.getCoupled(t,"toolbarSandbox");qn.isOpen(c)?qn.close(c):qn.open(c,s.toolbar())},tT=(t,s,c,l)=>{const d=c.getBounds.map(h=>h()),g=c.lazySink(t).getOrDie();Ea.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:l,overrides:{maxWidthFunction:xv()}}},d)},wy=(t,s,c,l,d)=>{Lc.setGroups(s,d),tT(t,s,c,l),xn.on(t)},rL=(t,s,c)=>{const l=__(),d=(h,C)=>{const S=Sy.get().getOr(!1);c.fetch().get(T=>{wy(t,C,c,s.layouts,T),l.link(t.element),S||kt.focusIn(C)})},g=()=>{xn.off(t),Sy.get().getOr(!1)||Yt.focus(t),l.unlink(t.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:We([kt.config({mode:"special",onEscape:h=>(qn.close(h),A.some(!0))}),qn.config({onOpen:d,onClose:g,isPartOf:(h,C,S)=>X0(C,S)||X0(t,S),getAttachPoint:()=>c.lazySink(t).getOrDie()}),Al.config({channels:{...B_({isExtraPart:bn,...c.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...P_({doReposition:()=>{qn.getState(Tt.getCoupled(t,"toolbarSandbox")).each(h=>{tT(t,h,c,s.layouts)})}})}})])}},cg=ja({name:"FloatingToolbarButton",factory:(t,s,c,l)=>({...Fc.sketch({...l.button(),action:d=>{V_(d,l)},buttonBehaviours:Yd.augment({dump:l.button().buttonBehaviours},[Tt.config({others:{toolbarSandbox:d=>rL(d,c,t)}})])}),apis:{setGroups:(d,g)=>{qn.getState(Tt.getCoupled(d,"toolbarSandbox")).each(h=>{wy(d,h,t,c.layouts,g)})},reposition:d=>{qn.getState(Tt.getCoupled(d,"toolbarSandbox")).each(g=>{tT(d,g,t,c.layouts)})},toggle:d=>{V_(d,l)},toggleWithoutFocusing:d=>{eT(d,l)},getToolbar:d=>qn.getState(Tt.getCoupled(d,"toolbarSandbox")),isOpen:d=>qn.isOpen(Tt.getCoupled(d,"toolbarSandbox"))}}),configFields:WM(),partFields:z_(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggleWithoutFocusing(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),ZM=te([pe("prefix","form-field"),wc("fieldBehaviours",[Ce,dt])]),fS=te([gr({schema:[$e("dom")],name:"label"}),gr({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[$e("text")],name:"aria-descriptor"}),Tr({factory:{sketch:t=>{const s=Iw(t,["factory"]);return t.factory.sketch(s)}},schema:[$e("factory")],name:"field"})]),cL=(t,s,c,l)=>{const d=ra(t.fieldBehaviours,[Ce.config({find:C=>So(C,t,"field")}),dt.config({store:{mode:"manual",getValue:C=>Ce.getCurrent(C).bind(dt.getValue),setValue:(C,S)=>{Ce.getCurrent(C).each(T=>{dt.setValue(T,S)})}}})]),g=es([Wo((C,S)=>{const T=J1(C,t,["label","field","aria-descriptor"]);T.field().each(O=>{const N=nt(t.prefix);T.label().each(F=>{Wt(F.element,"for",N),Wt(O.element,"id",N)}),T["aria-descriptor"]().each(F=>{const W=nt(t.prefix);Wt(F.element,"id",W),Wt(O.element,"aria-describedby",W)})})})]),h={getField:C=>So(C,t,"field"),getLabel:C=>So(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:h}},Mn=ja({name:"FormField",configFields:ZM(),partFields:fS(),factory:cL,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}}),ef=te([pe("field1Name","field1"),pe("field2Name","field2"),Br("onLockedChange"),ou(["lockClass"]),pe("locked",!1),Yd.field("coupledFieldBehaviours",[Ce,dt]),Uo("onInput",ae)]),Ri=(t,s,c)=>So(t,s,c).bind(Ce.getCurrent),xy=(t,s)=>Tr({factory:Mn,name:t,overrides:c=>({fieldBehaviours:We([sn("coupled-input-behaviour",[Me($m(),l=>{Ri(l,c,s).each(d=>{So(l,c,"lock").each(g=>{xn.isOn(g)&&c.onLockedChange(l,d,g),c.onInput(l)})})})])])})}),Mi=te([xy("field1","field2"),xy("field2","field1"),Tr({factory:Fc,schema:[$e("dom")],name:"lock",overrides:t=>({buttonBehaviours:We([xn.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),aL=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Yd.augment(t.coupledFieldBehaviours,[Ce.config({find:A.some}),dt.config({store:{mode:"manual",getValue:d=>{const g=X2(d,t,["field1","field2"]);return{[t.field1Name]:dt.getValue(g.field1()),[t.field2Name]:dt.getValue(g.field2())}},setValue:(d,g)=>{const h=X2(d,t,["field1","field2"]);ac(g,t.field1Name)&&dt.setValue(h.field1(),g[t.field1Name]),ac(g,t.field2Name)&&dt.setValue(h.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>So(d,t,"field1"),getField2:d=>So(d,t,"field2"),getLock:d=>So(d,t,"lock")}}),vn=ja({name:"FormCoupledInputs",configFields:ef(),partFields:Mi(),factory:aL,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),lL=(t,s)=>{const c=Pe(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=t.data.map(d=>Gg("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:ra(t.selectBehaviours,[Yt.config({}),dt.config({store:{mode:"manual",getValue:d=>Sa(d.element),setValue:(d,g)=>{const h=Hr(t.options);Jt(t.options,S=>S.value===g).isSome()?Fs(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(S=>Fs(d.element,S.value))},...l}})])}},eb=gu({name:"HtmlSelect",configFields:[$e("options"),wc("selectBehaviours",[Yt,dt]),pe("selectClasses",[]),pe("selectAttributes",{}),Qn("data")],factory:lL}),gS=(t,s,c,l,d)=>{const g=()=>t.lazySink(s),h=l.type==="horizontal"?{layouts:{onLtr:()=>Um(),onRtl:()=>rC()}}:{},C=T=>T.length===2,S=T=>C(T)?h:{};return J0.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(qn.close(s),t.onEscape.map(T=>T(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(T,O)=>{Ea.positionWithinBounds(g().getOrDie(),O,c,d())},onOpenSubmenu:(T,O,N,F)=>{const W=g().getOrDie();Ea.position(W,N,{anchor:{type:"submenu",item:O,...S(F)}})},onRepositionMenu:(T,O,N)=>{const F=g().getOrDie();Ea.positionWithinBounds(F,O,c,d()),ft(N,W=>{const q=S(W.triggeringPath);Ea.position(F,W.triggeredMenu,{anchor:{type:"submenu",item:W.triggeringItem,...q}})})}})},jM=(t,s)=>{const c=(F,W)=>t.getRelated(F).exists(ee=>X0(ee,W)),l=(F,W)=>{qn.setContent(F,W)},d=(F,W,q)=>{const ee=A.none;g(F,W,q,ee)},g=(F,W,q,ee)=>{const ce=t.lazySink(F).getOrDie();qn.openWhileCloaked(F,W,()=>Ea.positionWithinBounds(ce,F,q,ee())),dt.setValue(F,A.some({mode:"position",config:q,getBounds:ee}))},h=(F,W,q)=>{C(F,W,q,A.none)},C=(F,W,q,ee)=>{const ce=gS(t,F,W,q,ee);qn.open(F,ce),dt.setValue(F,A.some({mode:"menu",menu:ce}))},S=F=>{qn.isOpen(F)&&(dt.setValue(F,A.none()),qn.close(F))},T=F=>qn.getState(F),O=F=>{qn.isOpen(F)&&dt.getValue(F).each(W=>{switch(W.mode){case"menu":qn.getState(F).each(J0.repositionMenus);break;case"position":const q=t.lazySink(F).getOrDie();Ea.positionWithinBounds(q,F,W.config,W.getBounds());break}})},N={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:S,getContent:T,reposition:O,isOpen:qn.isOpen};return{uid:t.uid,dom:t.dom,behaviours:ra(t.inlineBehaviours,[qn.config({isPartOf:(F,W,q)=>X0(W,q)||c(F,q),getAttachPoint:F=>t.lazySink(F).getOrDie(),onOpen:F=>{t.onShow(F)},onClose:F=>{t.onHide(F)}}),dt.config({store:{mode:"memory",initialValue:A.none()}}),Al.config({channels:{...B_({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(F=>({fireEventInstead:{event:F.event}})).getOr({})}),...P_({...t.fireRepositionEventInstead.map(F=>({fireEventInstead:{event:F.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:N}},fs=gu({name:"InlineView",configFields:[$e("lazySink"),Zn("onShow"),Zn("onHide"),hi("onEscape"),wc("inlineBehaviours",[qn,dt,Al]),El("fireDismissalEventInstead",[pe("event",Im())]),El("fireRepositionEventInstead",[pe("event",Uw())]),pe("getRelated",A.none),pe("isExtraPart",bn),pe("eventOrder",A.none)],factory:jM,apis:{showAt:(t,s,c,l)=>{t.showAt(s,c,l)},showWithinBounds:(t,s,c,l,d)=>{t.showWithinBounds(s,c,l,d)},showMenuAt:(t,s,c,l)=>{t.showMenuAt(s,c,l)},showMenuWithinBounds:(t,s,c,l,d)=>{t.showMenuWithinBounds(s,c,l,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}}),nT=te([Vo("type","text"),Qn("data"),pe("inputAttributes",{}),pe("inputStyles",{}),pe("tag","input"),pe("inputClasses",[]),Zn("onSetValue"),Uo("fromInputValue",Sn),Uo("toInputValue",Sn),pe("styles",{}),pe("eventOrder",{}),wc("inputBehaviours",[dt,Yt]),pe("selectOnFocus",!0)]),GM=t=>We([Yt.config({onFocus:t.selectOnFocus?s=>{const c=s.element,l=Sa(c);t.type!=="range"&&c.dom.setSelectionRange(0,l.length)}:ae})]),W_=t=>({...GM(t),...ra(t.inputBehaviours,[dt.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>t.fromInputValue(Sa(s.element)),setValue:(s,c)=>{Sa(s.element)!==c&&Fs(s.element,t.toInputValue(c))}},onSetValue:t.onSetValue})])}),qM=t=>({tag:t.tag,attributes:{type:t.type,...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),KM=(t,s)=>({uid:t.uid,dom:qM(t),components:[],behaviours:W_(t),eventOrder:t.eventOrder}),ag=gu({name:"Input",configFields:nT(),factory:KM}),hS=hp(D_(),R_()),YM=(t,s)=>{const c=Ws(t,"id").fold(()=>{const l=nt("dialog-label");return Wt(s,"id",l),l},Sn);Wt(t,"aria-labelledby",c)},oT=te([$e("lazySink"),Qn("dragBlockClass"),Uo("getBounds",Mc),pe("useTabstopAt",wt),pe("firstTabstop",0),pe("eventOrder",{}),wc("modalBehaviours",[kt]),fr("onExecute"),If("onEscape")]),Z_={sketch:Sn},iL=te([gr({name:"draghandle",overrides:(t,s)=>({behaviours:We([z0.config({mode:"mouse",getTarget:c=>Vl(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Tr({schema:[$e("dom")],name:"title"}),Tr({factory:Z_,schema:[$e("dom")],name:"close"}),Tr({factory:Z_,schema:[$e("dom")],name:"body"}),gr({factory:Z_,schema:[$e("dom")],name:"footer"}),Jc({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[pe("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),pe("components",[])],name:"blocker"})]),uL=(t,s,c,l)=>{const d=dn(),g=q=>{d.set(q);const ee=t.lazySink(q).getOrDie(),ce=l.blocker(),Q=ee.getSystem().build({...ce,components:ce.components.concat([jl(q)]),behaviours:We([Yt.config({}),sn("dialog-blocker-events",[wp(Xc(),()=>{U.isBlocked(q)?ae():kt.focusIn(q)})])])});du(ee,Q),kt.focusIn(q)},h=q=>{d.clear(),Oc(q.element).each(ee=>{q.getSystem().getByDom(ee).each(ce=>{Os(ce)})})},C=q=>Hf(q,t,"body"),S=q=>So(q,t,"footer"),T=(q,ee)=>{U.block(q,ee)},O=q=>{U.unblock(q)},N=nt("modal-events"),F={...t.eventOrder,[bi()]:[N].concat(t.eventOrder["alloy.system.attached"]||[])},W=Lo();return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:S,setIdle:O,setBusy:T},eventOrder:F,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ra(t.modalBehaviours,[an.config({}),kt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt,firstTabstop:t.firstTabstop}),U.config({getRoot:d.get}),sn(N,[Wo(q=>{const ee=Hf(q,t,"title").element,ce=zb(ee);W.os.isMacOS()&&Po(ce)?Wt(q.element,"aria-label",ce):YM(q.element,ee)})])])}},sc=ja({name:"ModalDialog",configFields:oT(),partFields:iL(),factory:uL,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),dL=gr({schema:[$e("dom")],name:"label"}),Eh=t=>gr({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),l=>({events:es([_v(Pm(),(d,g,h)=>l(d,h),[s]),_v(wa(),(d,g,h)=>l(d,h),[s]),_v(qg(),(d,g,h)=>{h.mouseIsDown.get()&&l(d,h)},[s])])}))}),mL=Eh("top-left"),fL=Eh("top"),XM=Eh("top-right"),gL=Eh("right"),JM=Eh("bottom-right"),pS=Eh("bottom"),hL=Eh("bottom-left"),pL=Eh("left"),QM=Tr({name:"thumb",defaults:te({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:es([Zf(Pm(),t,"spectrum"),Zf(nu(),t,"spectrum"),Zf(Xu(),t,"spectrum"),Zf(wa(),t,"spectrum"),Zf(qg(),t,"spectrum"),Zf(tv(),t,"spectrum")])})}),bS=t=>Gf(t.event),j_=Tr({schema:[Yc("mouseIsDown",()=>Et(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,l=(d,g)=>c.getValueFromEvent(g).map(h=>c.setValueFrom(d,t,h));return{behaviours:We([kt.config({mode:"special",onLeft:(d,g)=>c.onLeft(d,t,bS(g)),onRight:(d,g)=>c.onRight(d,t,bS(g)),onUp:(d,g)=>c.onUp(d,t,bS(g)),onDown:(d,g)=>c.onDown(d,t,bS(g))}),Zo.config({}),Yt.config({})]),events:es([Me(Pm(),l),Me(nu(),l),Me(wa(),l),Me(qg(),(d,g)=>{t.mouseIsDown.get()&&l(d,g)})])}}});var eN=[dL,pL,gL,fL,pS,mL,XM,hL,JM,QM,j_];const vS=te("slider.change.value"),bL=t=>t.type.indexOf("touch")!==-1,G_=t=>{const s=t.event.raw;if(bL(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?A.some(c.touches[0]).map(l=>is(l.clientX,l.clientY)):A.none()}else{const c=s;return c.clientX!==void 0?A.some(c).map(l=>is(l.clientX,l.clientY)):A.none()}},vL="top",yL="right",tN="bottom",Jd="left",tb=t=>t.model.minX,Th=t=>t.model.minY,yS=t=>t.model.minX-1,CS=t=>t.model.minY-1,nb=t=>t.model.maxX,Yp=t=>t.model.maxY,SS=t=>t.model.maxX+1,wS=t=>t.model.maxY+1,nN=(t,s,c)=>s(t)-c(t),q_=t=>nN(t,nb,tb),K_=t=>nN(t,Yp,Th),oN=t=>q_(t)/2,sN=t=>K_(t)/2,Ey=(t,s)=>s?t.stepSize*t.speedMultiplier:t.stepSize,rN=t=>t.snapToGrid,Y_=t=>t.snapStart,X_=t=>t.rounded,xS=(t,s)=>t[s+"-edge"]!==void 0,cN=t=>xS(t,Jd),aN=t=>xS(t,yL),lN=t=>xS(t,vL),ob=t=>xS(t,tN),kh=t=>t.model.value.get(),_h=(t,s)=>({x:t,y:s}),ld=(t,s)=>{Pt(t,vS(),{value:s})},iN=(t,s)=>{ld(t,_h(yS(s),CS(s)))},uN=(t,s)=>{ld(t,CS(s))},J_=(t,s)=>{ld(t,_h(oN(s),CS(s)))},Q_=(t,s)=>{ld(t,_h(SS(s),CS(s)))},eA=(t,s)=>{ld(t,SS(s))},dN=(t,s)=>{ld(t,_h(SS(s),sN(s)))},CL=(t,s)=>{ld(t,_h(SS(s),wS(s)))},mN=(t,s)=>{ld(t,wS(s))},SL=(t,s)=>{ld(t,_h(oN(s),wS(s)))},wL=(t,s)=>{ld(t,_h(yS(s),wS(s)))},xL=(t,s)=>{ld(t,yS(s))},fN=(t,s)=>{ld(t,_h(yS(s),sN(s)))},sT=(t,s,c,l)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-l),rT=(t,s,c,l)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+l),gN=(t,s,c)=>Math.max(s,Math.min(c,t)),EL=(t,s,c,l,d)=>d.fold(()=>{const g=t-s,h=Math.round(g/l)*l;return gN(s+h,s-1,c+1)},g=>{const h=(t-g)%l,C=Math.round(h/l),S=Math.floor((t-g)/l),T=Math.floor((c-g)/l),O=Math.min(T,S+C),N=g+O*l;return Math.max(g,N)}),TL=(t,s,c)=>Math.min(c,Math.max(t,s))-s,hN=t=>{const{min:s,max:c,range:l,value:d,step:g,snap:h,snapStart:C,rounded:S,hasMinEdge:T,hasMaxEdge:O,minBound:N,maxBound:F,screenRange:W}=t,q=T?s-1:s,ee=O?c+1:c;if(d<N)return q;if(d>F)return ee;{const ce=TL(d,N,F),Q=gN(ce/W*l+s,q,ee);return h&&Q>=s&&Q<=c?EL(Q,s,c,g,C):S?Math.round(Q):Q}},pN=t=>{const{min:s,max:c,range:l,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:S,centerMinEdge:T,centerMaxEdge:O}=t;return d<s?g?0:T:d>c?h?C:O:(d-s)/l*S},tA="top",bN="right",vN="bottom",nA="left",kL="width",_L="height",tf=t=>t.element.dom.getBoundingClientRect(),Qd=(t,s)=>t[s],cT=t=>{const s=tf(t);return Qd(s,nA)},yN=t=>{const s=tf(t);return Qd(s,bN)},aT=t=>{const s=tf(t);return Qd(s,tA)},CN=t=>{const s=tf(t);return Qd(s,vN)},ES=t=>{const s=tf(t);return Qd(s,kL)},oA=t=>{const s=tf(t);return Qd(s,_L)},SN=(t,s,c)=>(t+s)/2-c,wN=(t,s)=>{const c=tf(t),l=tf(s),d=Qd(c,nA),g=Qd(c,bN),h=Qd(l,nA);return SN(d,g,h)},xN=(t,s)=>{const c=tf(t),l=tf(s),d=Qd(c,tA),g=Qd(c,vN),h=Qd(l,tA);return SN(d,g,h)},lT=(t,s)=>{Pt(t,vS(),{value:s})},sA=(t,s,c)=>{const l={min:tb(s),max:nb(s),range:q_(s),value:c,step:Ey(s),snap:rN(s),snapStart:Y_(s),rounded:X_(s),hasMinEdge:cN(s),hasMaxEdge:aN(s),minBound:cT(t),maxBound:yN(t),screenRange:ES(t)};return hN(l)},AL=(t,s,c)=>{const l=sA(t,s,c);return lT(t,l),l},rA=(t,s)=>{const c=tb(s);lT(t,c)},EN=(t,s)=>{const c=nb(s);lT(t,c)},TN=(t,s,c,l)=>{const g=(t>0?rT:sT)(kh(c),tb(c),nb(c),Ey(c,l));return lT(s,g),A.some(g)},kN=t=>(s,c,l)=>TN(t,s,c,l).map(wt),_N=t=>G_(t).map(c=>c.left),OL=(t,s,c,l,d)=>{const h=ES(t),C=l.bind(O=>A.some(wN(O,t))).getOr(0),S=d.bind(O=>A.some(wN(O,t))).getOr(h),T={min:tb(s),max:nb(s),range:q_(s),value:c,hasMinEdge:cN(s),hasMaxEdge:aN(s),minBound:cT(t),maxBound:yN(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return pN(T)},cA=(t,s,c,l,d,g)=>{const h=OL(s,g,c,l,d);return cT(s)-cT(t)+h},DL=(t,s,c,l)=>{const d=kh(c),g=cA(t,l.getSpectrum(t),d,l.getLeftEdge(t),l.getRightEdge(t),c),h=_s(s.element)/2;on(s.element,"left",g-h+"px")},RL=kN(-1),ML=kN(1),NL=A.none,BL=A.none,PL={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(eA),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(xL)};var $L=Object.freeze({__proto__:null,setValueFrom:AL,setToMin:rA,setToMax:EN,findValueOfOffset:sA,getValueFromEvent:_N,findPositionOfValue:cA,setPositionFromValue:DL,onLeft:RL,onRight:ML,onUp:NL,onDown:BL,edgeActions:PL});const iT=(t,s)=>{Pt(t,vS(),{value:s})},Ty=(t,s,c)=>{const l={min:Th(s),max:Yp(s),range:K_(s),value:c,step:Ey(s),snap:rN(s),snapStart:Y_(s),rounded:X_(s),hasMinEdge:lN(s),hasMaxEdge:ob(s),minBound:aT(t),maxBound:CN(t),screenRange:oA(t)};return hN(l)},aA=(t,s,c)=>{const l=Ty(t,s,c);return iT(t,l),l},lA=(t,s)=>{const c=Th(s);iT(t,c)},AN=(t,s)=>{const c=Yp(s);iT(t,c)},IL=(t,s,c,l)=>{const g=(t>0?rT:sT)(kh(c),Th(c),Yp(c),Ey(c,l));return iT(s,g),A.some(g)},ON=t=>(s,c,l)=>IL(t,s,c,l).map(wt),iA=t=>G_(t).map(c=>c.top),uA=(t,s,c,l,d)=>{const h=oA(t),C=l.bind(O=>A.some(xN(O,t))).getOr(0),S=d.bind(O=>A.some(xN(O,t))).getOr(h),T={min:Th(s),max:Yp(s),range:K_(s),value:c,hasMinEdge:lN(s),hasMaxEdge:ob(s),minBound:aT(t),maxBound:CN(t),maxOffset:h,centerMinEdge:C,centerMaxEdge:S};return pN(T)},ky=(t,s,c,l,d,g)=>{const h=uA(s,g,c,l,d);return aT(s)-aT(t)+h},DN=(t,s,c,l)=>{const d=kh(c),g=ky(t,l.getSpectrum(t),d,l.getTopEdge(t),l.getBottomEdge(t),c),h=wn(s.element)/2;on(s.element,"top",g-h+"px")},FL=A.none,LL=A.none,HL=ON(-1),zL=ON(1),VL={"top-left":A.none(),top:A.some(uN),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(mN),"bottom-left":A.none(),left:A.none()};var UL=Object.freeze({__proto__:null,setValueFrom:aA,setToMin:lA,setToMax:AN,findValueOfOffset:Ty,getValueFromEvent:iA,findPositionOfValue:ky,setPositionFromValue:DN,onLeft:FL,onRight:LL,onUp:HL,onDown:zL,edgeActions:VL});const uT=(t,s)=>{Pt(t,vS(),{value:s})},dT=(t,s)=>({x:t,y:s}),WL=(t,s,c)=>{const l=sA(t,s,c.left),d=Ty(t,s,c.top),g=dT(l,d);return uT(t,g),g},ZL=(t,s,c,l,d)=>{const g=t>0?rT:sT,h=s?kh(l).x:g(kh(l).x,tb(l),nb(l),Ey(l,d)),C=s?g(kh(l).y,Th(l),Yp(l),Ey(l,d)):kh(l).y;return uT(c,dT(h,C)),A.some(h)},mT=(t,s)=>(c,l,d)=>ZL(t,s,c,l,d).map(wt),jL=(t,s)=>{const c=tb(s),l=Th(s);uT(t,dT(c,l))},GL=(t,s)=>{const c=nb(s),l=Yp(s);uT(t,dT(c,l))},RN=t=>G_(t),qL=(t,s,c,l)=>{const d=kh(c),g=cA(t,l.getSpectrum(t),d.x,l.getLeftEdge(t),l.getRightEdge(t),c),h=ky(t,l.getSpectrum(t),d.y,l.getTopEdge(t),l.getBottomEdge(t),c),C=_s(s.element)/2,S=wn(s.element)/2;on(s.element,"left",g-C+"px"),on(s.element,"top",h-S+"px")},KL=mT(-1,!1),lg=mT(1,!1),YL=mT(-1,!0),XL=mT(1,!0),dA={"top-left":A.some(iN),top:A.some(J_),"top-right":A.some(Q_),right:A.some(dN),"bottom-right":A.some(CL),bottom:A.some(SL),"bottom-left":A.some(wL),left:A.some(fN)};var Ec=Object.freeze({__proto__:null,setValueFrom:WL,setToMin:jL,setToMax:GL,getValueFromEvent:RN,setPositionFromValue:qL,onLeft:KL,onRight:lg,onUp:YL,onDown:XL,edgeActions:dA});const JL=[pe("stepSize",1),pe("speedMultiplier",10),pe("onChange",ae),pe("onChoose",ae),pe("onInit",ae),pe("onDragStart",ae),pe("onDragEnd",ae),pe("snapToGrid",!1),pe("rounded",!0),Qn("snapStart"),Sl("model",Nc("mode",{x:[pe("minX",0),pe("maxX",100),Yc("value",t=>Et(t.mode.minX)),$e("getInitialValue"),Co("manager",$L)],y:[pe("minY",0),pe("maxY",100),Yc("value",t=>Et(t.mode.minY)),$e("getInitialValue"),Co("manager",UL)],xy:[pe("minX",0),pe("maxX",100),pe("minY",0),pe("maxY",100),Yc("value",t=>Et({x:t.mode.minX,y:t.mode.minY})),$e("getInitialValue"),Co("manager",Ec)]})),wc("sliderBehaviours",[kt,dt]),Yc("mouseIsDown",()=>Et(!1))],em=ja({name:"Slider",configFields:JL,partFields:eN,factory:(t,s,c,l)=>{const d=Te=>Hf(Te,t,"thumb"),g=Te=>Hf(Te,t,"spectrum"),h=Te=>So(Te,t,"left-edge"),C=Te=>So(Te,t,"right-edge"),S=Te=>So(Te,t,"top-edge"),T=Te=>So(Te,t,"bottom-edge"),O=t.model,N=O.manager,F=(Te,rt)=>{N.setPositionFromValue(Te,rt,t,{getLeftEdge:h,getRightEdge:C,getTopEdge:S,getBottomEdge:T,getSpectrum:g})},W=(Te,rt)=>{O.value.set(rt);const Ue=d(Te);F(Te,Ue)},q=(Te,rt)=>{W(Te,rt);const Ue=d(Te);return t.onChange(Te,Ue,rt),A.some(!0)},ee=Te=>{N.setToMin(Te,t)},ce=Te=>{N.setToMax(Te,t)},Q=Te=>{const rt=()=>{So(Te,t,"thumb").each(ke=>{const mt=O.value.get();t.onChoose(Te,ke,mt)})},Ue=t.mouseIsDown.get();t.mouseIsDown.set(!1),Ue&&rt()},ue=(Te,rt)=>{rt.stop(),t.mouseIsDown.set(!0),t.onDragStart(Te,d(Te))},de=(Te,rt)=>{rt.stop(),t.onDragEnd(Te,d(Te)),Q(Te)},ye=Te=>{So(Te,t,"spectrum").map(kt.focusIn)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ra(t.sliderBehaviours,[kt.config({mode:"special",focusIn:ye}),dt.config({store:{mode:"manual",getValue:Te=>O.value.get(),setValue:W}}),Al.config({channels:{[S_()]:{onReceive:Q}}})]),events:es([Me(vS(),(Te,rt)=>{q(Te,rt.event.value)}),Wo((Te,rt)=>{const Ue=O.getInitialValue();O.value.set(Ue);const ke=d(Te);F(Te,ke);const mt=g(Te);t.onInit(Te,ke,mt,O.value.get())}),Me(Pm(),ue),Me(Xu(),de),Me(wa(),(Te,rt)=>{ye(Te),ue(Te,rt)}),Me(tv(),de)]),apis:{resetToMin:ee,resetToMax:ce,setValue:W,refresh:F},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),MN="container",QL=[wc("slotBehaviours",[])],NN=t=>"<alloy.field."+t+">",eH=t=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),K2(MN,NN(C),S)),record:te(g)}})(),c=t(s),l=s.record(),d=Pe(l,g=>Tr({name:g,pname:NN(g)}));return H0(MN,QL,d,tH,c)},tH=(t,s)=>{const c=ee=>pp(t),l=(ee,ce)=>So(ee,t,ce),d=(ee,ce)=>(Q,ue)=>So(Q,t,ue).map(de=>ee(de,ue)).getOr(ce),g=ee=>(ce,Q)=>{ft(Q,ue=>ee(ce,ue))},h=(ee,ce)=>Js(ee.element,"aria-hidden")!=="true",C=(ee,ce)=>{if(!h(ee)){const Q=ee.element;Ye(Q,"display"),Ln(Q,"aria-hidden"),Pt(ee,ov(),{name:ce,visible:!0})}},S=(ee,ce)=>{if(h(ee)){const Q=ee.element;on(Q,"display","none"),Wt(Q,"aria-hidden","true"),Pt(ee,ov(),{name:ce,visible:!1})}},T=d(h,!1),O=d(S),N=g(O),F=ee=>N(ee,c()),W=d(C),q={getSlotNames:c,getSlot:l,isShowing:T,hideSlot:O,hideAllSlots:F,showSlot:W};return{uid:t.uid,dom:t.dom,components:s,behaviours:KC(t.slotBehaviours),apis:q}},Ta={...Io({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>Ip(t)),sketch:eH},nH=te([$e("toggleClass"),$e("fetch"),Br("onExecute"),pe("getHotspot",A.some),pe("getAnchorOverrides",te({})),Gp(),Br("onItemExecute"),Qn("lazySink"),$e("dom"),Zn("onOpen"),wc("splitDropdownBehaviours",[Tt,kt,Yt]),pe("matchWidth",!1),pe("useMinWidth",!1),pe("eventOrder",{}),Qn("role"),Qn("listRole")].concat(L_())),oH=Tr({factory:Fc,schema:[$e("dom")],name:"arrow",defaults:()=>({buttonBehaviours:We([Yt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(oh)},buttonBehaviours:We([xn.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),sH=Tr({factory:Fc,schema:[$e("dom")],name:"button",defaults:()=>({buttonBehaviours:We([Yt.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,s)})}})}),rH=te([oH,sH,gr({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[$e("text")],name:"aria-descriptor"}),Jc({schema:[jw()],name:"menu",defaults:t=>({onExecute:(s,c)=>{s.getSystem().getByUid(t.uid).each(l=>{t.onItemExecute(l,s,c)})}})}),$M()]),cH=(t,s,c,l)=>{const d=O=>{Ce.getCurrent(O).each(N=>{Gn.highlightFirst(N),kt.focusIn(N)})},g=O=>{$_(t,Sn,O,l,d,ea.HighlightMenuAndItem).get(ae)},h=O=>(g(O),A.some(!0)),C=O=>{const N=Hf(O,t,"button");return oh(N),A.some(!0)},S={...es([Wo((O,N)=>{So(O,t,"aria-descriptor").each(W=>{const q=nt("aria");Wt(W.element,"id",q),Wt(O.element,"aria-describedby",q)})})]),...ZE(A.some(g))},T={repositionMenus:O=>{xn.isOn(O)&&LM(O)}};return{uid:t.uid,dom:t.dom,components:s,apis:T,eventOrder:{...t.eventOrder,[Wl()]:["disabling","toggling","alloy.base.behaviour"]},events:S,behaviours:ra(t.splitDropdownBehaviours,[Tt.config({others:{sandbox:O=>{const N=Hf(O,t,"arrow");return QE(t,O,{onOpen:()=>{xn.on(N),xn.on(O)},onClose:()=>{xn.off(N),xn.off(O)}})}}}),kt.config({mode:"special",onSpace:C,onEnter:C,onDown:h}),Yt.config({}),xn.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},fT=ja({name:"SplitDropdown",configFields:nH(),partFields:rH(),factory:cH,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),aH=(t,s)=>xo(t,(d,g)=>s(g,d.len).fold(te(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,mA=(t,s,c)=>({within:t,extra:s,withinWidth:c}),BN=(t,s,c)=>{const l=aH(t,(C,S)=>{const T=c(C);return A.some({element:C,start:S,finish:S+T,width:T})}),d=ho(l,C=>C.finish<=s),g=ao(d,(C,S)=>C+S.width,0),h=l.slice(d.length);return{within:d,extra:h,withinWidth:g}},gT=t=>Pe(t,s=>s.element),lH=(t,s,c)=>{const l=gT(t.concat(s));return mA(l,[],c)},iH=(t,s,c,l)=>{const d=gT(t).concat([c]);return mA(d,gT(s),l)},uH=(t,s,c)=>mA(gT(t),[],c),dH=(t,s,c)=>{const l=BN(s,t,c);return l.extra.length===0?A.some(l):A.none()},mH=(t,s,c,l)=>{const d=dH(t,s,c).getOrThunk(()=>BN(s,t-c(l),c)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=c(l)?lH(g,h,C):h.length>=1?iH(g,h,l,C):uH(g,h,C)},fA=(t,s)=>{const c=Pe(s,l=>jl(l));Lc.setGroups(t,c)},fH=t=>An(t,s=>Is(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),gA=(t,s,c)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=Hf(t,s,"primary"),g=Tt.getCoupled(t,"overflowGroup");on(d.element,"visibility","hidden");const h=l.concat([g]),C=fH(h);c([]),fA(d,h);const S=_s(d.element),T=mH(S,s.builtGroups.get(),O=>Math.ceil(O.element.dom.getBoundingClientRect().width),g);T.extra.length===0?(an.remove(d,g),c([])):(fA(d,T.within),c(T.extra)),Ye(d.element,"visibility"),cn(d.element),C.each(Yt.focus)},PN=te([wc("splitToolbarBehaviours",[Tt]),Yc("builtGroups",()=>Et([]))]),gH=te([ou(["overflowToggledClass"]),hi("getOverflowBounds"),$e("lazySink"),Yc("overflowGroups",()=>Et([])),Zn("onOpened"),Zn("onClosed")].concat(PN())),hH=te([Tr({factory:Lc,schema:Cy(),name:"primary"}),Jc({schema:Cy(),name:"overflow"}),Jc({name:"overflow-button"}),Jc({name:"overflow-group"})]),$N=te([$e("items"),ou(["itemSelector"]),wc("tgroupBehaviours",[kt])]),pH=te([Y1({name:"items",unit:"item"})]),bH=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,behaviours:ra(t.tgroupBehaviours,[kt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),hT=ja({name:"ToolbarGroup",configFields:$N(),partFields:pH(),factory:bH}),IN=t=>Pe(t,s=>jl(s)),hA=(t,s,c)=>{gA(t,c,l=>{c.overflowGroups.set(l),s.getOpt(t).each(d=>{cg.setGroups(d,IN(l))})})},vH=(t,s,c,l)=>{const d=no(cg.sketch({fetch:()=>_o.nu(g=>{g(IN(t.overflowGroups.get()))}),layouts:{onLtr:()=>[sr,Hs],onRtl:()=>[Hs,sr],onBottomLtr:()=>[kr,Cc],onBottomRtl:()=>[Cc,kr]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,h)=>t[h?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:ra(t.splitToolbarBehaviours,[Tt.config({others:{overflowGroup:()=>hT.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{t.builtGroups.set(Pe(h,g.getSystem().build)),hA(g,d,t)},refresh:g=>hA(g,d,t),toggle:g=>{d.getOpt(g).each(h=>{cg.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(cg.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(cg.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{cg.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(cg.getToolbar)},domModification:{attributes:{role:"group"}}}},pA=ja({name:"SplitFloatingToolbar",configFields:gH(),partFields:hH(),factory:vH,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},toggleWithoutFocusing:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),yH=te([ou(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Zn("onOpened"),Zn("onClosed")].concat(PN())),FN=te([Tr({factory:Lc,schema:Cy(),name:"primary"}),Tr({factory:Lc,schema:Cy(),name:"overflow",overrides:t=>({toolbarBehaviours:We([Ga.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{So(s,t,"overflow-button").each(c=>{xn.off(c)}),t.onClosed(s)},onGrown:s=>{t.onOpened(s)},onStartGrow:s=>{So(s,t,"overflow-button").each(xn.on)}}),kt.config({mode:"acyclic",onEscape:s=>(So(s,t,"overflow-button").each(Yt.focus),A.some(!0))})])})}),Jc({name:"overflow-button",overrides:t=>({buttonBehaviours:We([xn.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Jc({name:"overflow-group"})]),CH=(t,s)=>So(t,s,"overflow").map(Ga.hasGrown).getOr(!1),bA=(t,s,c)=>{So(t,s,"overflow-button").each(l=>{So(t,s,"overflow").each(d=>{if(vA(t,s),Ga.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{c||kt.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{c||Yt.focus(l),g(h),s.onClosed=g}}Ga.toggleGrow(d)})})},vA=(t,s)=>{So(t,s,"overflow").each(c=>{gA(t,s,l=>{const d=Pe(l,g=>jl(g));Lc.setGroups(c,d)}),So(t,s,"overflow-button").each(l=>{Ga.hasGrown(c)&&xn.on(l)}),Ga.refresh(c)})},SH=(t,s,c,l)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const S=Pe(C,h.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:ra(t.splitToolbarBehaviours,[Tt.config({others:{overflowGroup:h=>hT.sketch({...l["overflow-group"](),items:[Fc.sketch({...l["overflow-button"](),action:C=>{Tn(h,d)}})]})}}),sn("toolbar-toggle-events",[Me(d,h=>{bA(h,t,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),vA(h,t)},refresh:h=>vA(h,t),toggle:h=>{bA(h,t,!1)},toggleWithoutFocusing:h=>{bA(h,t,!0)},isOpen:h=>CH(h,t)},domModification:{attributes:{role:"group"}}}},yA=ja({name:"SplitSlidingToolbar",configFields:yH(),partFields:FN(),factory:SH,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),wH=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:ZE(t.action),behaviours:ra(t.tabButtonBehaviours,[Yt.config({}),kt.config({mode:"execution",useSpace:!0,useEnter:!0}),dt.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),xH=gu({name:"TabButton",configFields:[pe("uid",void 0),$e("value"),Bc("dom","dom",M1(()=>({attributes:{role:"tab",id:nt("aria"),"aria-selected":"false"}})),qu()),Qn("action"),pe("domModification",{}),wc("tabButtonBehaviours",[Yt,kt,dt]),$e("view")],factory:wH}),EH=te([$e("tabs"),$e("dom"),pe("clickToDismiss",!1),wc("tabbarBehaviours",[Gn,kt]),ou(["tabClass","selectedClass"])]),TH=Y1({factory:xH,name:"tabs",unit:"tab",overrides:t=>{const s=(l,d)=>{Gn.dehighlight(l,d),Pt(l,Ww(),{tabbar:l,button:d})},c=(l,d)=>{Gn.highlight(l,d),Pt(l,F2(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(t.uid).getOrDie(),g=Gn.isHighlighted(d,l);(g&&t.clickToDismiss?s:g?ae:c)(d,l)},domModification:{classes:[t.markers.tabClass]}}}}),kH=te([TH]),_H=(t,s,c,l)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ra(t.tabbarBehaviours,[Gn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Wt(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Wt(g.element,"aria-selected","false")}}),kt.config({mode:"flow",getInitial:d=>Gn.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),LN=ja({name:"Tabbar",configFields:EH(),partFields:kH(),factory:_H}),AH=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:ra(t.tabviewBehaviours,[an.config({})]),domModification:{attributes:{role:"tabpanel"}}}),HN=gu({name:"Tabview",configFields:[wc("tabviewBehaviours",[an])],factory:AH}),OH=te([pe("selectFirst",!0),Zn("onChangeTab"),Zn("onDismissTab"),pe("tabs",[]),wc("tabSectionBehaviours",[])]),DH=Tr({factory:LN,schema:[$e("dom"),tu("markers",[$e("tabClass"),$e("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),RH=Tr({factory:HN,name:"tabview"}),MH=te([DH,RH]),NH=(t,s,c,l)=>{const d=h=>{const C=dt.getValue(h);So(h,t,"tabview").each(S=>{Jt(t.tabs,O=>O.value===C).each(O=>{const N=O.view();Ws(h.element,"id").each(F=>{Wt(S.element,"aria-labelledby",F)}),an.set(S,N),t.onChangeTab(S,h,N)})})},g=(h,C)=>{So(h,t,"tabbar").each(S=>{C(S).each(oh)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:KC(t.tabSectionBehaviours),events:es(qt([t.selectFirst?[Wo((h,C)=>{g(h,Gn.getFirst)})]:[],[Me(F2(),(h,C)=>{const S=C.event.button;d(S)}),Me(Ww(),(h,C)=>{const S=C.event.button;t.onDismissTab(h,S)})]])),apis:{getViewItems:h=>So(h,t,"tabview").map(C=>an.contents(C)).getOr([]),showTab:(h,C)=>{g(h,T=>{const O=Gn.getCandidates(T);return Jt(O,F=>dt.getValue(F)===C).filter(F=>!Gn.isHighlighted(T,F))})}}}},Xp=ja({name:"TabSection",configFields:OH(),partFields:MH(),factory:NH,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),pT=(t,s,c)=>{const l=dt.getValue(c);dt.setValue(s,l),VN(s)},zN=(t,s)=>{const c=t.element,l=Sa(c),d=c.dom;Js(c,"type")!=="number"&&s(d,l)},VN=t=>{zN(t,(s,c)=>s.setSelectionRange(c.length,c.length))},UN=(t,s)=>{zN(t,(c,l)=>c.setSelectionRange(s,l.length))},WN=(t,s,c)=>{if(t.selectsOver){const l=dt.getValue(s),d=t.getDisplayText(l),g=dt.getValue(c);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{pT(t,s,c),UN(s,d.length)}):A.none()}else return A.none()},CA=te("alloy.typeahead.itemexecute"),BH=(t,s,c,l)=>{const d=(N,F,W)=>{t.previewing.set(!1);const q=Tt.getCoupled(N,"sandbox");if(qn.isOpen(q))Ce.getCurrent(q).each(ee=>{Gn.getHighlighted(ee).fold(()=>{W(ee)},()=>{lx(q,ee.element,"keydown",F)})});else{const ee=ce=>{Ce.getCurrent(ce).each(W)};JE(t,h(N),N,q,l,ee,ea.HighlightMenuAndItem).get(ae)}},g=GM(t),h=N=>F=>F.map(W=>{const q=_u(W.menus),ee=_e(q,Q=>ho(Q.items,ue=>ue.type==="item"));return dt.getState(N).update(Pe(ee,Q=>Q.data)),W}),C=N=>Ce.getCurrent(N),S="typeaheadevents",T=[Yt.config({}),dt.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:N=>Sa(N.element),getFallbackEntry:N=>({value:N,meta:{}}),setValue:(N,F)=>{Fs(N.element,t.model.getDisplayText(F))},...t.initialData.map(N=>Gg("initialValue",N)).getOr({})}}),h_.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(N,F)=>{const W=Tt.getCoupled(N,"sandbox");if(Yt.isFocused(N)&&Sa(N.element).length>=t.minChars){const ee=C(W).bind(Q=>Gn.getHighlighted(Q).map(dt.getValue));t.previewing.set(!0);const ce=Q=>{C(W).each(ue=>{ee.fold(()=>{t.model.selectsOver&&Gn.highlightFirst(ue)},de=>{Gn.highlightBy(ue,ye=>dt.getValue(ye).value===de.value),Gn.getHighlighted(ue).orThunk(()=>(Gn.highlightFirst(ue),A.none()))})})};JE(t,h(N),N,W,l,ce,ea.HighlightJustMenu).get(ae)}},cancelEvent:V1()}),kt.config({mode:"special",onDown:(N,F)=>(d(N,F,Gn.highlightFirst),A.some(!0)),onEscape:N=>{const F=Tt.getCoupled(N,"sandbox");return qn.isOpen(F)?(qn.close(F),A.some(!0)):A.none()},onUp:(N,F)=>(d(N,F,Gn.highlightLast),A.some(!0)),onEnter:N=>{const F=Tt.getCoupled(N,"sandbox"),W=qn.isOpen(F);if(W&&!t.previewing.get())return C(F).bind(q=>Gn.getHighlighted(q)).map(q=>(Pt(N,CA(),{item:q}),!0));{const q=dt.getValue(N);return Tn(N,V1()),t.onExecute(F,N,q),W&&qn.close(F),A.some(!0)}}}),xn.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),Tt.config({others:{sandbox:N=>QE(t,N,{onOpen:()=>xn.on(N),onClose:()=>{t.lazyTypeaheadComp.get().each(F=>Ln(F.element,"aria-activedescendant")),xn.off(N)}})}}),sn(S,[Wo(N=>{t.lazyTypeaheadComp.set(A.some(N))}),td(N=>{t.lazyTypeaheadComp.set(A.none())}),Zm(N=>{const F=ae;$_(t,h(N),N,l,F,ea.HighlightMenuAndItem).get(ae)}),Me(CA(),(N,F)=>{const W=Tt.getCoupled(N,"sandbox");pT(t.model,N,F.event.item),Tn(N,V1()),t.onItemExecute(N,W,F.event.item,dt.getValue(N)),qn.close(W),VN(N)})].concat(t.dismissOnBlur?[Me(z1(),N=>{const F=Tt.getCoupled(N,"sandbox");Is(F.element).isNone()&&qn.close(F)})]:[]))],O={[Vd()]:[dt.name(),h_.name(),S],...t.eventOrder};return{uid:t.uid,dom:qM(uo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...ra(t.typeaheadBehaviours,T)},eventOrder:O}},ZN=te([Qn("lazySink"),$e("fetch"),pe("minChars",5),pe("responseTime",1e3),Zn("onOpen"),pe("getHotspot",A.some),pe("getAnchorOverrides",te({})),pe("layouts",A.none()),pe("eventOrder",{}),B2("model",{},[pe("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),pe("selectsOver",!0),pe("populateFromBrowse",!0)]),Zn("onSetValue"),fr("onExecute"),Zn("onItemExecute"),pe("inputClasses",[]),pe("inputAttributes",{}),pe("inputStyles",{}),pe("matchWidth",!0),pe("useMinWidth",!1),pe("dismissOnBlur",!0),ou(["openClass"]),Qn("initialData"),Qn("listRole"),wc("typeaheadBehaviours",[Yt,dt,h_,kt,xn,Tt]),Yc("lazyTypeaheadComp",()=>Et(A.none)),Yc("previewing",()=>Et(!0))].concat(nT()).concat(L_())),PH=te([Jc({schema:[jw()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,l)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{WN(t.model,d,l).fold(()=>{t.model.selectsOver?(Gn.dehighlight(c,l),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&pT(t.model,d,l),Ws(l.element,"id").each(g=>Wt(d.element,"aria-activedescendant",g))})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(l=>(Pt(l,CA(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(l=>{t.model.populateFromBrowse&&pT(t.model,l,c)})}})})]),$H=ja({name:"Typeahead",configFields:ZN(),partFields:PH(),factory:BH});var IH=tinymce.util.Tools.resolve("tinymce.ThemeManager"),bT=tinymce.util.Tools.resolve("tinymce.util.Delay"),TS=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),FH=tinymce.util.Tools.resolve("tinymce.EditorManager"),Ah=tinymce.util.Tools.resolve("tinymce.Env"),id;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(id||(id={}));var Jp;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Jp||(Jp={}));const Oo=t=>s=>s.options.get(t),kS=t=>s=>A.from(t(s)),jN=t=>{const s=Ah.deviceType.isPhone(),c=Ah.deviceType.isTablet()||s,l=t.options.register,d=h=>rn(h)||h===!1,g=h=>rn(h)||Vc(h);l("skin",{processor:h=>rn(h)||h===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),l("width",{processor:g,default:TS.DOM.getStyle(t.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:h=>rn(h)||ar(h),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:h=>ar(h)||rn(h)||Ns(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),go(9,h=>{l("toolbar"+(h+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:Jp.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:t.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:h=>h==="both"||ar(h),default:!Ah.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:t.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},GN=Oo("readonly"),SA=Oo("disabled"),_y=Oo("height"),Qp=Oo("width"),vT=kS(Oo("min_width")),yT=kS(Oo("min_height")),CT=kS(Oo("max_width")),wA=kS(Oo("max_height")),qN=kS(Oo("style_formats")),KN=Oo("style_formats_merge"),YN=Oo("style_formats_autohide"),XN=Oo("content_langs"),JN=Oo("removed_menuitems"),Ay=Oo("toolbar_mode"),QN=Oo("toolbar_groups"),xA=Oo("toolbar_location"),LH=Oo("fixed_toolbar_container"),eB=Oo("fixed_toolbar_container_target"),sb=Oo("toolbar_persist"),e1=Oo("toolbar_sticky_offset"),tB=Oo("menubar"),_S=Oo("toolbar"),EA=Oo("file_picker_callback"),AS=Oo("file_picker_validator_handler"),nB=Oo("font_size_input_default_unit"),Oy=Oo("file_picker_types"),Dy=Oo("typeahead_urls"),oB=Oo("anchor_top"),sB=Oo("anchor_bottom"),rB=Oo("draggable_modal"),cB=Oo("statusbar"),aB=Oo("elementpath"),TA=Oo("branding"),OS=Oo("resize"),lB=Oo("paste_as_text"),ST=Oo("sidebar_show"),iB=Oo("promotion"),uB=Oo("help_accessibility"),kA=Oo("default_font_stack"),_A=Oo("skin"),wT=t=>t.options.get("skin")===!1,tm=t=>t.options.get("menubar")!==!1,t1=t=>{const s=t.options.get("skin_url");if(wT(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return FH.baseURL+"/skins/ui/"+c}},HH=t=>A.from(t.options.get("skin_url")),dB=t=>t.options.get("line_height_formats").split(" "),DS=t=>{const s=_S(t),c=rn(s),l=Ns(s)&&s.length>0;return!Ry(t)&&(l||c||s===!0)},AA=t=>{const s=go(9,l=>t.options.get("toolbar"+(l+1))),c=ho(s,rn);return Sr(c.length>0,c)},Ry=t=>AA(t).fold(()=>{const s=_S(t);return en(s,rn)&&s.length>0},wt),OA=t=>xA(t)===Jp.bottom,mB=t=>{var s;if(!t.inline)return A.none();const c=(s=LH(t))!==null&&s!==void 0?s:"";if(c.length>0)return io(gc(),c);const l=eB(t);return Po(l)?A.some(Je.fromDom(l)):A.none()},My=t=>t.inline&&mB(t).isSome(),DA=t=>mB(t).getOrThunk(()=>ml(ys(Je.fromDom(t.getElement())))),RA=t=>t.inline&&!tm(t)&&!DS(t)&&!Ry(t),Ny=t=>(t.options.get("toolbar_sticky")||t.inline)&&!My(t)&&!RA(t),n1=t=>!My(t)&&t.options.get("ui_mode")==="split",fB=t=>{const s=t.options.get("menu");return Io(s,c=>({...c,items:c.items}))};var MA=Object.freeze({__proto__:null,get ToolbarMode(){return id},get ToolbarLocation(){return Jp},register:jN,getSkinUrl:t1,getSkinUrlOption:HH,isReadOnly:GN,isDisabled:SA,getSkin:_A,isSkinDisabled:wT,getHeightOption:_y,getWidthOption:Qp,getMinWidthOption:vT,getMinHeightOption:yT,getMaxWidthOption:CT,getMaxHeightOption:wA,getUserStyleFormats:qN,shouldMergeStyleFormats:KN,shouldAutoHideStyleFormats:YN,getLineHeightFormats:dB,getContentLanguages:XN,getRemovedMenuItems:JN,isMenubarEnabled:tm,isMultipleToolbars:Ry,isToolbarEnabled:DS,isToolbarPersist:sb,getMultipleToolbarsOption:AA,getUiContainer:DA,useFixedContainer:My,isSplitUiMode:n1,getToolbarMode:Ay,isDraggableModal:rB,isDistractionFree:RA,isStickyToolbar:Ny,getStickyToolbarOffset:e1,getToolbarLocation:xA,isToolbarLocationBottom:OA,getToolbarGroups:QN,getMenus:fB,getMenubar:tB,getToolbar:_S,getFilePickerCallback:EA,getFilePickerTypes:Oy,useTypeaheadUrls:Dy,getAnchorTop:oB,getAnchorBottom:sB,getFilePickerValidatorHandler:AS,getFontSizeInputDefaultUnit:nB,useStatusBar:cB,useElementPath:aB,promotionEnabled:iB,useBranding:TA,getResize:OS,getPasteAsText:lB,getSidebarShow:ST,useHelpAccessibility:uB,getDefaultFontStack:kA});const zH=["visible","hidden","clip"],gB=t=>ct(t).length>0&&!bo(zH,t),hB=t=>{if(Zi(t)){const s=M(t,"overflow-x"),c=M(t,"overflow-y");return gB(s)||gB(c)}else return!1},NA=t=>t.plugins.fullscreen&&t.plugins.fullscreen.isFullscreen(),VH=(t,s)=>{const c=Am(s,hB),l=c.length===0?Gi(s).map(gl).map(d=>Am(d,hB)).getOr([]):c;return Hr(l).map(d=>({element:d,others:l.slice(1),isFullscreen:()=>NA(t)}))},o1=(t,s)=>n1(t)?VH(t,s):A.none(),rb=t=>{const s=[...Pe(t.others,Qr),Mc()];return t.isFullscreen()?Mc():ck(Qr(t.element),s)};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:BA,setPrototypeOf:pB,isFrozen:UH,getPrototypeOf:WH,getOwnPropertyDescriptor:ZH}=Object;let{freeze:Ni,seal:ud,create:PA}=Object,{apply:$A,construct:IA}=typeof Reflect<"u"&&Reflect;Ni||(Ni=function(s){return s}),ud||(ud=function(s){return s}),$A||($A=function(s,c,l){return s.apply(c,l)}),IA||(IA=function(s,c){return new s(...c)});const xT=Pi(Array.prototype.forEach),jH=Pi(Array.prototype.lastIndexOf),bB=Pi(Array.prototype.pop),By=Pi(Array.prototype.push),Py=Pi(Array.prototype.splice),ET=Pi(String.prototype.toLowerCase),FA=Pi(String.prototype.toString),vB=Pi(String.prototype.match),s1=Pi(String.prototype.replace),dd=Pi(String.prototype.indexOf),LA=Pi(String.prototype.trim),nm=Pi(Object.prototype.hasOwnProperty),Bi=Pi(RegExp.prototype.test),RS=GH(TypeError);function Pi(t){return function(s){for(var c=arguments.length,l=new Array(c>1?c-1:0),d=1;d<c;d++)l[d-1]=arguments[d];return $A(t,s,l)}}function GH(t){return function(){for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];return IA(t,c)}}function jo(t,s){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ET;pB&&pB(t,null);let l=s.length;for(;l--;){let d=s[l];if(typeof d=="string"){const g=c(d);g!==d&&(UH(s)||(s[l]=g),d=g)}t[d]=!0}return t}function yB(t){for(let s=0;s<t.length;s++)nm(t,s)||(t[s]=null);return t}function cb(t){const s=PA(null);for(const[c,l]of BA(t))nm(t,c)&&(Array.isArray(l)?s[c]=yB(l):l&&typeof l=="object"&&l.constructor===Object?s[c]=cb(l):s[c]=l);return s}function MS(t,s){for(;t!==null;){const l=ZH(t,s);if(l){if(l.get)return Pi(l.get);if(typeof l.value=="function")return Pi(l.value)}t=WH(t)}function c(){return null}return c}const HA=Ni(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zA=Ni(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),TT=Ni(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),CB=Ni(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),kT=Ni(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qH=Ni(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),SB=Ni(["#text"]),wB=Ni(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),VA=Ni(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xB=Ni(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_T=Ni(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),UA=ud(/\{\{[\w\W]*|[\w\W]*\}\}/gm),KH=ud(/<%[\w\W]*|[\w\W]*%>/gm),YH=ud(/\$\{[\w\W]*/gm),EB=ud(/^data-[\-\w.\u00B7-\uFFFF]+$/),XH=ud(/^aria-[\-\w]+$/),TB=ud(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),JH=ud(/^(?:\w+script|data):/i),QH=ud(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),kB=ud(/^html$/i),e9=ud(/^[a-z][.\w]*(-[.\w]+)+$/i);var _B=Object.freeze({__proto__:null,ARIA_ATTR:XH,ATTR_WHITESPACE:QH,CUSTOM_ELEMENT:e9,DATA_ATTR:EB,DOCTYPE_NAME:kB,ERB_EXPR:KH,IS_ALLOWED_URI:TB,IS_SCRIPT_OR_DATA:JH,MUSTACHE_EXPR:UA,TMPLIT_EXPR:YH});const $y={element:1,text:3,progressingInstruction:7,comment:8,document:9},AB=function(){return typeof window>"u"?null:window},t9=function(s,c){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let l=null;const d="data-tt-policy-suffix";c&&c.hasAttribute(d)&&(l=c.getAttribute(d));const g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},OB=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function DB(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:AB();const s=Hn=>DB(Hn);if(s.version="3.2.4",s.removed=[],!t||!t.document||t.document.nodeType!==$y.document||!t.Element)return s.isSupported=!1,s;let{document:c}=t;const l=c,d=l.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:S,NodeFilter:T,NamedNodeMap:O=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:N,DOMParser:F,trustedTypes:W}=t,q=S.prototype,ee=MS(q,"cloneNode"),ce=MS(q,"remove"),Q=MS(q,"nextSibling"),ue=MS(q,"childNodes"),de=MS(q,"parentNode");if(typeof h=="function"){const Hn=c.createElement("template");Hn.content&&Hn.content.ownerDocument&&(c=Hn.content.ownerDocument)}let ye,Te="";const{implementation:rt,createNodeIterator:Ue,createDocumentFragment:ke,getElementsByTagName:mt}=c,{importNode:Ut}=l;let Dt=OB();s.isSupported=typeof BA=="function"&&typeof de=="function"&&rt&&rt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Nn,ERB_EXPR:nn,TMPLIT_EXPR:fn,DATA_ATTR:_t,ARIA_ATTR:Fe,IS_SCRIPT_OR_DATA:et,ATTR_WHITESPACE:jt,CUSTOM_ELEMENT:gn}=_B;let{IS_ALLOWED_URI:Ft}=_B,mn=null;const Do=jo({},[...HA,...zA,...TT,...kT,...SB]);let wo=null;const Jl=jo({},[...wB,...VA,...xB,..._T]);let xs=Object.seal(PA(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Cu=null,ha=null,Su=!0,wu=!0,lm=!1,yw=!0,hg=!1,CR=!0,Nb=!1,SR=!1,Vj=!1,tk=!1,hI=!1,pI=!1,Eq=!0,Tq=!1;const LK="user-content-";let Uj=!0,wR=!1,nk={},ok=null;const kq=jo({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _q=null;const Aq=jo({},["audio","video","img","source","image","track"]);let Wj=null;const Oq=jo({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),bI="http://www.w3.org/1998/Math/MathML",vI="http://www.w3.org/2000/svg",Bb="http://www.w3.org/1999/xhtml";let sk=Bb,Zj=!1,jj=null;const HK=jo({},[bI,vI,Bb],FA);let yI=jo({},["mi","mo","mn","ms","mtext"]),CI=jo({},["annotation-xml"]);const zK=jo({},["title","style","font","a","script"]);let xR=null;const VK=["application/xhtml+xml","text/html"],UK="text/html";let Ql=null,rk=null;const WK=c.createElement("form"),Dq=function(Ee){return Ee instanceof RegExp||Ee instanceof Function},Gj=function(){let Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(rk&&rk===Ee)){if((!Ee||typeof Ee!="object")&&(Ee={}),Ee=cb(Ee),xR=VK.indexOf(Ee.PARSER_MEDIA_TYPE)===-1?UK:Ee.PARSER_MEDIA_TYPE,Ql=xR==="application/xhtml+xml"?FA:ET,mn=nm(Ee,"ALLOWED_TAGS")?jo({},Ee.ALLOWED_TAGS,Ql):Do,wo=nm(Ee,"ALLOWED_ATTR")?jo({},Ee.ALLOWED_ATTR,Ql):Jl,jj=nm(Ee,"ALLOWED_NAMESPACES")?jo({},Ee.ALLOWED_NAMESPACES,FA):HK,Wj=nm(Ee,"ADD_URI_SAFE_ATTR")?jo(cb(Oq),Ee.ADD_URI_SAFE_ATTR,Ql):Oq,_q=nm(Ee,"ADD_DATA_URI_TAGS")?jo(cb(Aq),Ee.ADD_DATA_URI_TAGS,Ql):Aq,ok=nm(Ee,"FORBID_CONTENTS")?jo({},Ee.FORBID_CONTENTS,Ql):kq,Cu=nm(Ee,"FORBID_TAGS")?jo({},Ee.FORBID_TAGS,Ql):{},ha=nm(Ee,"FORBID_ATTR")?jo({},Ee.FORBID_ATTR,Ql):{},nk=nm(Ee,"USE_PROFILES")?Ee.USE_PROFILES:!1,Su=Ee.ALLOW_ARIA_ATTR!==!1,wu=Ee.ALLOW_DATA_ATTR!==!1,lm=Ee.ALLOW_UNKNOWN_PROTOCOLS||!1,yw=Ee.ALLOW_SELF_CLOSE_IN_ATTR!==!1,hg=Ee.SAFE_FOR_TEMPLATES||!1,CR=Ee.SAFE_FOR_XML!==!1,Nb=Ee.WHOLE_DOCUMENT||!1,tk=Ee.RETURN_DOM||!1,hI=Ee.RETURN_DOM_FRAGMENT||!1,pI=Ee.RETURN_TRUSTED_TYPE||!1,Vj=Ee.FORCE_BODY||!1,Eq=Ee.SANITIZE_DOM!==!1,Tq=Ee.SANITIZE_NAMED_PROPS||!1,Uj=Ee.KEEP_CONTENT!==!1,wR=Ee.IN_PLACE||!1,Ft=Ee.ALLOWED_URI_REGEXP||TB,sk=Ee.NAMESPACE||Bb,yI=Ee.MATHML_TEXT_INTEGRATION_POINTS||yI,CI=Ee.HTML_INTEGRATION_POINTS||CI,xs=Ee.CUSTOM_ELEMENT_HANDLING||{},Ee.CUSTOM_ELEMENT_HANDLING&&Dq(Ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(xs.tagNameCheck=Ee.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ee.CUSTOM_ELEMENT_HANDLING&&Dq(Ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(xs.attributeNameCheck=Ee.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ee.CUSTOM_ELEMENT_HANDLING&&typeof Ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(xs.allowCustomizedBuiltInElements=Ee.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),hg&&(wu=!1),hI&&(tk=!0),nk&&(mn=jo({},SB),wo=[],nk.html===!0&&(jo(mn,HA),jo(wo,wB)),nk.svg===!0&&(jo(mn,zA),jo(wo,VA),jo(wo,_T)),nk.svgFilters===!0&&(jo(mn,TT),jo(wo,VA),jo(wo,_T)),nk.mathMl===!0&&(jo(mn,kT),jo(wo,xB),jo(wo,_T))),Ee.ADD_TAGS&&(mn===Do&&(mn=cb(mn)),jo(mn,Ee.ADD_TAGS,Ql)),Ee.ADD_ATTR&&(wo===Jl&&(wo=cb(wo)),jo(wo,Ee.ADD_ATTR,Ql)),Ee.ADD_URI_SAFE_ATTR&&jo(Wj,Ee.ADD_URI_SAFE_ATTR,Ql),Ee.FORBID_CONTENTS&&(ok===kq&&(ok=cb(ok)),jo(ok,Ee.FORBID_CONTENTS,Ql)),Uj&&(mn["#text"]=!0),Nb&&jo(mn,["html","head","body"]),mn.table&&(jo(mn,["tbody"]),delete Cu.tbody),Ee.TRUSTED_TYPES_POLICY){if(typeof Ee.TRUSTED_TYPES_POLICY.createHTML!="function")throw RS('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ee.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw RS('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ye=Ee.TRUSTED_TYPES_POLICY,Te=ye.createHTML("")}else ye===void 0&&(ye=t9(W,d)),ye!==null&&typeof Te=="string"&&(Te=ye.createHTML(""));Ni&&Ni(Ee),rk=Ee}},Rq=jo({},[...zA,...TT,...CB]),Mq=jo({},[...kT,...qH]),ZK=function(Ee){let zt=de(Ee);(!zt||!zt.tagName)&&(zt={namespaceURI:sk,tagName:"template"});const Bn=ET(Ee.tagName),Hc=ET(zt.tagName);return jj[Ee.namespaceURI]?Ee.namespaceURI===vI?zt.namespaceURI===Bb?Bn==="svg":zt.namespaceURI===bI?Bn==="svg"&&(Hc==="annotation-xml"||yI[Hc]):!!Rq[Bn]:Ee.namespaceURI===bI?zt.namespaceURI===Bb?Bn==="math":zt.namespaceURI===vI?Bn==="math"&&CI[Hc]:!!Mq[Bn]:Ee.namespaceURI===Bb?zt.namespaceURI===vI&&!CI[Hc]||zt.namespaceURI===bI&&!yI[Hc]?!1:!Mq[Bn]&&(zK[Bn]||!Rq[Bn]):!!(xR==="application/xhtml+xml"&&jj[Ee.namespaceURI]):!1},m1=function(Ee){By(s.removed,{element:Ee});try{de(Ee).removeChild(Ee)}catch{ce(Ee)}},ER=function(Ee,zt){try{By(s.removed,{attribute:zt.getAttributeNode(Ee),from:zt})}catch{By(s.removed,{attribute:null,from:zt})}if(zt.removeAttribute(Ee),Ee==="is")if(tk||hI)try{m1(zt)}catch{}else try{zt.setAttribute(Ee,"")}catch{}},Nq=function(Ee){let zt=null,Bn=null;if(Vj)Ee="<remove></remove>"+Ee;else{const ei=vB(Ee,/^[\r\n\t ]+/);Bn=ei&&ei[0]}xR==="application/xhtml+xml"&&sk===Bb&&(Ee='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ee+"</body></html>");const Hc=ye?ye.createHTML(Ee):Ee;if(sk===Bb)try{zt=new F().parseFromString(Hc,xR)}catch{}if(!zt||!zt.documentElement){zt=rt.createDocument(sk,"template",null);try{zt.documentElement.innerHTML=Zj?Te:Hc}catch{}}const xu=zt.body||zt.documentElement;return Ee&&Bn&&xu.insertBefore(c.createTextNode(Bn),xu.childNodes[0]||null),sk===Bb?mt.call(zt,Nb?"html":"body")[0]:Nb?zt.documentElement:xu},Bq=function(Ee){return Ue.call(Ee.ownerDocument||Ee,Ee,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},qj=function(Ee){return Ee instanceof N&&(typeof Ee.nodeName!="string"||typeof Ee.textContent!="string"||typeof Ee.removeChild!="function"||!(Ee.attributes instanceof O)||typeof Ee.removeAttribute!="function"||typeof Ee.setAttribute!="function"||typeof Ee.namespaceURI!="string"||typeof Ee.insertBefore!="function"||typeof Ee.hasChildNodes!="function")},Pq=function(Ee){return typeof C=="function"&&Ee instanceof C};function Pb(Hn,Ee,zt){xT(Hn,Bn=>{Bn.call(s,Ee,zt,rk)})}const $q=function(Ee){let zt=null;if(Pb(Dt.beforeSanitizeElements,Ee,null),qj(Ee))return m1(Ee),!0;const Bn=Ql(Ee.nodeName);if(Pb(Dt.uponSanitizeElement,Ee,{tagName:Bn,allowedTags:mn}),Ee.hasChildNodes()&&!Pq(Ee.firstElementChild)&&Bi(/<[/\w]/g,Ee.innerHTML)&&Bi(/<[/\w]/g,Ee.textContent)||Ee.nodeType===$y.progressingInstruction||CR&&Ee.nodeType===$y.comment&&Bi(/<[/\w]/g,Ee.data))return m1(Ee),!0;if(!mn[Bn]||Cu[Bn]){if(!Cu[Bn]&&Fq(Bn)&&(xs.tagNameCheck instanceof RegExp&&Bi(xs.tagNameCheck,Bn)||xs.tagNameCheck instanceof Function&&xs.tagNameCheck(Bn)))return!1;if(Uj&&!ok[Bn]){const Hc=de(Ee)||Ee.parentNode,xu=ue(Ee)||Ee.childNodes;if(xu&&Hc){const ei=xu.length;for(let im=ei-1;im>=0;--im){const f1=ee(xu[im],!0);f1.__removalCount=(Ee.__removalCount||0)+1,Hc.insertBefore(f1,Q(Ee))}}}return m1(Ee),!0}return Ee instanceof S&&!ZK(Ee)||(Bn==="noscript"||Bn==="noembed"||Bn==="noframes")&&Bi(/<\/no(script|embed|frames)/i,Ee.innerHTML)?(m1(Ee),!0):(hg&&Ee.nodeType===$y.text&&(zt=Ee.textContent,xT([Nn,nn,fn],Hc=>{zt=s1(zt,Hc," ")}),Ee.textContent!==zt&&(By(s.removed,{element:Ee.cloneNode()}),Ee.textContent=zt)),Pb(Dt.afterSanitizeElements,Ee,null),!1)},Iq=function(Ee,zt,Bn){if(Eq&&(zt==="id"||zt==="name")&&(Bn in c||Bn in WK))return!1;if(!(wu&&!ha[zt]&&Bi(_t,zt))){if(!(Su&&Bi(Fe,zt))){if(!wo[zt]||ha[zt]){if(!(Fq(Ee)&&(xs.tagNameCheck instanceof RegExp&&Bi(xs.tagNameCheck,Ee)||xs.tagNameCheck instanceof Function&&xs.tagNameCheck(Ee))&&(xs.attributeNameCheck instanceof RegExp&&Bi(xs.attributeNameCheck,zt)||xs.attributeNameCheck instanceof Function&&xs.attributeNameCheck(zt))||zt==="is"&&xs.allowCustomizedBuiltInElements&&(xs.tagNameCheck instanceof RegExp&&Bi(xs.tagNameCheck,Bn)||xs.tagNameCheck instanceof Function&&xs.tagNameCheck(Bn))))return!1}else if(!Wj[zt]){if(!Bi(Ft,s1(Bn,jt,""))){if(!((zt==="src"||zt==="xlink:href"||zt==="href")&&Ee!=="script"&&dd(Bn,"data:")===0&&_q[Ee])){if(!(lm&&!Bi(et,s1(Bn,jt,"")))){if(Bn)return!1}}}}}}return!0},Fq=function(Ee){return Ee!=="annotation-xml"&&vB(Ee,gn)},Lq=function(Ee){Pb(Dt.beforeSanitizeAttributes,Ee,null);const{attributes:zt}=Ee;if(!zt||qj(Ee))return;const Bn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:wo,forceKeepAttr:void 0};let Hc=zt.length;for(;Hc--;){const xu=zt[Hc],{name:ei,namespaceURI:im,value:f1}=xu,TR=Ql(ei);let Fi=ei==="value"?f1:LA(f1);const GK=Fi;if(Bn.attrName=TR,Bn.attrValue=Fi,Bn.keepAttr=!0,Bn.forceKeepAttr=void 0,Pb(Dt.uponSanitizeAttribute,Ee,Bn),Fi=Bn.attrValue,Tq&&(TR==="id"||TR==="name")&&(ER(ei,Ee),Fi=LK+Fi),CR&&Bi(/((--!?|])>)|<\/(style|title)/i,Fi)){ER(ei,Ee);continue}if(Bn.forceKeepAttr)continue;if(!Bn.keepAttr){ER(ei,Ee);continue}if(!yw&&Bi(/\/>/i,Fi)){ER(ei,Ee);continue}hg&&xT([Nn,nn,fn],zq=>{Fi=s1(Fi,zq," ")});const Hq=Ql(Ee.nodeName);if(!Iq(Hq,TR,Fi)){ER(ei,Ee);continue}if(ye&&typeof W=="object"&&typeof W.getAttributeType=="function"&&!im)switch(W.getAttributeType(Hq,TR)){case"TrustedHTML":{Fi=ye.createHTML(Fi);break}case"TrustedScriptURL":{Fi=ye.createScriptURL(Fi);break}}if(Fi!==GK)try{im?Ee.setAttributeNS(im,ei,Fi):Ee.setAttribute(ei,Fi),qj(Ee)?m1(Ee):bB(s.removed)}catch{}}Pb(Dt.afterSanitizeAttributes,Ee,null)},jK=function Hn(Ee){let zt=null;const Bn=Bq(Ee);for(Pb(Dt.beforeSanitizeShadowDOM,Ee,null);zt=Bn.nextNode();)Pb(Dt.uponSanitizeShadowNode,zt,null),$q(zt),Lq(zt),zt.content instanceof g&&Hn(zt.content);Pb(Dt.afterSanitizeShadowDOM,Ee,null)};return s.sanitize=function(Hn){let Ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},zt=null,Bn=null,Hc=null,xu=null;if(Zj=!Hn,Zj&&(Hn="<!-->"),typeof Hn!="string"&&!Pq(Hn))if(typeof Hn.toString=="function"){if(Hn=Hn.toString(),typeof Hn!="string")throw RS("dirty is not a string, aborting")}else throw RS("toString is not a function");if(!s.isSupported)return Hn;if(SR||Gj(Ee),s.removed=[],typeof Hn=="string"&&(wR=!1),wR){if(Hn.nodeName){const f1=Ql(Hn.nodeName);if(!mn[f1]||Cu[f1])throw RS("root node is forbidden and cannot be sanitized in-place")}}else if(Hn instanceof C)zt=Nq("<!---->"),Bn=zt.ownerDocument.importNode(Hn,!0),Bn.nodeType===$y.element&&Bn.nodeName==="BODY"||Bn.nodeName==="HTML"?zt=Bn:zt.appendChild(Bn);else{if(!tk&&!hg&&!Nb&&Hn.indexOf("<")===-1)return ye&&pI?ye.createHTML(Hn):Hn;if(zt=Nq(Hn),!zt)return tk?null:pI?Te:""}zt&&Vj&&m1(zt.firstChild);const ei=Bq(wR?Hn:zt);for(;Hc=ei.nextNode();)$q(Hc),Lq(Hc),Hc.content instanceof g&&jK(Hc.content);if(wR)return Hn;if(tk){if(hI)for(xu=ke.call(zt.ownerDocument);zt.firstChild;)xu.appendChild(zt.firstChild);else xu=zt;return(wo.shadowroot||wo.shadowrootmode)&&(xu=Ut.call(l,xu,!0)),xu}let im=Nb?zt.outerHTML:zt.innerHTML;return Nb&&mn["!doctype"]&&zt.ownerDocument&&zt.ownerDocument.doctype&&zt.ownerDocument.doctype.name&&Bi(kB,zt.ownerDocument.doctype.name)&&(im="<!DOCTYPE "+zt.ownerDocument.doctype.name+`>
`+im),hg&&xT([Nn,nn,fn],f1=>{im=s1(im,f1," ")}),ye&&pI?ye.createHTML(im):im},s.setConfig=function(){let Hn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Gj(Hn),SR=!0},s.clearConfig=function(){rk=null,SR=!1},s.isValidAttribute=function(Hn,Ee,zt){rk||Gj({});const Bn=Ql(Hn),Hc=Ql(Ee);return Iq(Bn,Hc,zt)},s.addHook=function(Hn,Ee){typeof Ee=="function"&&By(Dt[Hn],Ee)},s.removeHook=function(Hn,Ee){if(Ee!==void 0){const zt=jH(Dt[Hn],Ee);return zt===-1?void 0:Py(Dt[Hn],zt,1)[0]}return bB(Dt[Hn])},s.removeHooks=function(Hn){Dt[Hn]=[]},s.removeAllHooks=function(){Dt=OB()},s}var n9=DB();const RB=t=>n9().sanitize(t);var md=tinymce.util.Tools.resolve("tinymce.util.I18n");const MB={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},WA="temporary-placeholder",AT=t=>()=>at(t,WA).getOr("!not found!"),NS=(t,s)=>{const c=t.toLowerCase();if(md.isRtl()){const l=zi(c,"-rtl");return In(s,l)?l:c}else return c},NB=(t,s)=>at(s,NS(t,s)),ZA=(t,s)=>{const c=s();return NB(t,c).getOrThunk(AT(c))},o9=(t,s,c)=>{const l=s();return NB(t,l).or(c).getOrThunk(AT(l))},s9=t=>md.isRtl()?In(MB,t):!1,BB=()=>sn("add-focusable",[Wo(t=>{Ca(t.element,"svg").each(s=>Wt(s,"focusable","false"))})]),PB=(t,s,c,l)=>{var d,g;const h=s9(s)?["tox-icon--flip"]:[],C=at(c,NS(s,c)).or(l).getOrThunk(AT(c));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(h),innerHtml:C},behaviours:We([...(g=t.behaviours)!==null&&g!==void 0?g:[],BB()])}},Gl=(t,s,c,l=A.none())=>PB(s,t,c(),l),Oh=(t,s,c)=>{const l=c(),d=Jt(t,g=>In(l,NS(g,l)));return PB(s,d.getOr(WA),l,A.none())},r9={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},jA=gu({name:"Notification",factory:t=>{const s=nt("notification-text"),c=no({dom:og(`<p id=${s}>${RB(t.backstageProvider.translate(t.text))}</p>`),behaviours:We([an.config({})])}),l=q=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${q}%`}}}),d=q=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${q}%`}}),g=no({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},d(0)],behaviours:We([an.config({})])}),S={updateProgress:(q,ee)=>{q.getSystem().isConnected()&&g.getOpt(q).each(ce=>{an.set(ce,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(ee)]},d(ee)])})},updateText:(q,ee)=>{if(q.getSystem().isConnected()){const ce=c.get(q);an.set(ce,[Yo(ee)])}}},T=qt([t.icon.toArray(),[t.level],A.from(r9[t.level]).toArray()]),O=no(Fc.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":t.backstageProvider.translate("Close")}},components:[Gl("close",{tag:"span",classes:["tox-icon"]},t.iconProvider)],buttonBehaviours:We([Zo.config({}),ms.config({...t.backstageProvider.tooltips.getConfig({tooltipText:t.backstageProvider.translate("Close")})})]),action:q=>{t.onAction(q)}})),N=Oh(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),F={dom:{tag:"div",classes:["tox-notification__body"]},components:[c.asSpec()],behaviours:We([an.config({})])},W=[N,F];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},behaviours:We([Zo.config({}),Yt.config({}),kt.config({mode:"special",onEscape:q=>(t.onAction(q),A.some(!0))})]),components:W.concat(t.progress?[g.asSpec()]:[]).concat([O.asSpec()]),apis:S}},configFields:[us("level","info",["success","error","warning","warn","info"]),$e("progress"),Qn("icon"),$e("onAction"),$e("text"),$e("iconProvider"),$e("backstageProvider")],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var GA=(t,s,c,l)=>{const d=s.backstage.shared,g=()=>Je.fromDom(t.queryCommandValue("ToggleView")===""?t.getContentAreaContainer():t.getContainer()),h=()=>{const N=Qr(g());return A.some(N)},C=N=>{h().each(F=>{ft(N,W=>{Ye(W.element,"width"),_s(W.element)>F.width&&on(W.element,"width",F.width+"px")})})};return{open:(N,F,W)=>{const q=()=>{const de=Ue=>{an.remove(Ue,ce),Q()},ye=(Ue,ke)=>{mc(Ue.element).length===0?Te(Ue,ke):rt(Ue,ke)},Te=(Ue,ke)=>{fs.hide(Ue),l.clear(),ke&&t.focus()},rt=(Ue,ke)=>{ke&&kt.focusIn(Ue)};l.on(Ue=>{F();const ke=W();de(Ue),ye(Ue,ke)})},ee=()=>!Ny(t)||!d.header.isPositionedAtTop(),ce=na(jA.sketch({text:N.text,level:bo(["success","error","warning","warn","info"],N.type)?N.type:void 0,progress:N.progressBar===!0,icon:N.icon,onAction:q,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(l.isSet()){const de=jl(ce);l.on(ye=>{an.append(ye,de),fs.reposition(ye),ce.hasConfigured(ds)&&ds.refresh(ye),C(ye.components())})}else{const de=na(fs.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:We([kt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),an.config({}),...ee()?[ds.config({contextual:{lazyContext:()=>A.some(Qr(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Ue=>o1(t,Ue.element).map(mt=>({bounds:rb(mt),optScrollEnv:A.some({currentScrollTop:mt.element.dom.scrollTop,scrollElmTop:Xr(mt.element).top})})).getOrThunk(()=>({bounds:Mc(),optScrollEnv:A.none()}))})]:[]])})),ye=jl(ce),Te={maxHeightFunction:nh()},rt={...d.anchors.banner(),overrides:Te};l.set(de),c.add(de),fs.showWithinBounds(de,ye,{anchor:rt},h)}Vc(N.timeout)&&N.timeout>0&&bT.setEditorTimeout(t,()=>{q()},N.timeout);const Q=()=>{l.on(de=>{fs.reposition(de),de.hasConfigured(ds)&&ds.refresh(de),C(de.components())})};return{close:q,reposition:Q,text:de=>{jA.updateText(ce,de)},settings:N,getEl:()=>ce.element.dom,progressBar:{value:de=>{jA.updateProgress(ce,de)}}}},close:N=>{N.close()},getArgs:N=>N.settings}};const c9={setup:(t,s)=>{const c=(d,g)=>{Pt(d,ec(),{raw:g})},l=()=>t.getMenu().bind(Gn.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(l().each(oh),d.preventDefault()):g===40?(l().fold(()=>{t.getMenu().each(Gn.highlightFirst)},h=>{c(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(h=>{c(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",()=>{t.isActive()&&!t.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&t.cancelIfNecessary()})}};var qA;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(qA||(qA={}));var fd=qA;const KA="tox-menu-nav__js",Iy="tox-collection__item",BS="tox-swatch",YA={normal:KA,color:BS},XA="tox-collection__item--enabled",pu="tox-collection__group-heading",$B="tox-collection__item-icon",a9="tox-collection__item-image",IB="tox-collection__item-image-selector",DT="tox-collection__item-label",l9="tox-collection__item-accessory",FB="tox-collection__item-caret",i9="tox-collection__item-checkmark",ab="tox-collection__item--active",LB="tox-collection__item-container",u9="tox-collection__item-container--column",HB="tox-collection__item-container--row",zB="tox-collection__item-container--align-right",d9="tox-collection__item-container--align-left",m9="tox-collection__item-container--valign-top",f9="tox-collection__item-container--valign-middle",VB="tox-collection__item-container--valign-bottom",RT=t=>at(YA,t).getOr(KA),UB=t=>t==="color"?"tox-swatches":"tox-menu",MT=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:UB(t),tieredMenu:"tox-tiered-menu"}),Dh=t=>{const s=MT(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:RT(t)}},WB=(t,s,c)=>{const l=MT(c);return{tag:"div",classes:qt([[l.menu,`tox-menu-${s}-column`],t?[l.hasIcons]:[]])}},JA=[rg.parts.items({})],NT=(t,s,c)=>{const l=MT(c);return{dom:{tag:"div",classes:qt([[l.tieredMenu]])},markers:Dh(c)}},BT=nt("refetch-trigger-event"),lb=nt("redirect-menu-item-interaction"),QA="tox-menu__searcher",PS=t=>io(t.element,`.${QA}`).bind(s=>t.getSystem().getByDom(s).toOptional()),eO=PS,g9=(t,s)=>{dt.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},ZB=t=>{const s=dt.getValue(t),c=t.element.dom.selectionStart,l=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:l}},PT=(t,s)=>{Ws(s.element,"id").each(c=>Wt(t.element,"aria-activedescendant",c))},h9=t=>{const s=(d,g)=>(g.cut(),A.none()),c=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return Pt(d,lb,h),A.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[Iy]},components:[ag.sketch({inputClasses:[QA,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:We([sn(l,[Me($m(),d=>{Tn(d,BT)}),Me(ec(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),kt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[l,kt.name()]}})]}},$T="tox-collection--results__js",tO=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:nt("aria-item-search-result-id"),"aria-selected":"false"}}}:t},$S=(t,s)=>c=>{const l=vr(c,s);return Pe(l,d=>({dom:t,components:d}))},nO=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[rg.parts.items({preprocess:t!=="auto"?$S({tag:"div",classes:["tox-swatches__row"]},t):Sn})]}]}),jB=t=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[rg.parts.items({preprocess:t!=="auto"?$S({tag:"div",classes:["tox-image-selector__row"]},t):Sn})]}]}),Ol=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[rg.parts.items({preprocess:$S({tag:"div",classes:["tox-collection__group"]},t)})]}),oO=(t,s)=>{const c=[];let l=[];return ft(t,(d,g)=>{s(d,g)?(l.length>0&&c.push(l),l=[],(In(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&c.push(l),Pe(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},sO=(t,s,c)=>rg.parts.items({preprocess:l=>{const d=Pe(l,c);return t!=="auto"&&t>1?$S({tag:"div",classes:["tox-collection__group"]},t)(d):oO(d,(g,h)=>s[h].type==="separator")}}),GB=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[sO(t,s,Sn)]}),qB=(t,s,c=!0)=>{const l=nt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",$T].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[sO(t,s,tO)]}},p9=(t,s,c)=>{const l=nt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[h9({i18n:md.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],$T],attributes:{id:l}},components:[sO(t,s,tO)]}]}},b9=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[rg.parts.items({preprocess:c=>oO(c,(l,d)=>t[d].type==="separator")})]}),IS=t=>br(t,s=>"icon"in s&&s.icon!==void 0),om=t=>(console.error(Of(t)),console.log(t),A.none()),ig=(t,s,c,l,d)=>{const g=b9(c);return{value:t,dom:g.dom,components:g.components,items:c}},FS=(t,s,c,l,d)=>{const g=()=>d.menuType!=="searchable"?GB(l,c):d.searchMode.searchMode==="search-with-field"?p9(l,c,d.searchMode):qB(l,c);if(d.menuType==="color"){const h=nO(l);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="imageselector"&&l!=="auto"){const h=jB(l);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"&&l==="auto"){const h=GB(l,c);return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:t,dom:h.dom,components:h.components,items:c}}else if(d.menuType==="listpreview"&&l!=="auto"){const h=Ol(l);return{value:t,dom:h.dom,components:h.components,items:c}}else return{value:t,dom:WB(s,l,d.menuType),components:JA,items:c}},zs=Mr("type"),Fy=Mr("name"),Ly=Mr("label"),Rh=Mr("text"),KB=Mr("title"),rO=Mr("icon"),v9=Mr("url"),Hy=Mr("value"),y9=eu("fetch"),C9=eu("getSubmenuItems"),ib=eu("onAction"),S9=eu("onItemAction"),ql=Uo("onSetup",()=>ae),IT=nr("name"),r1=nr("text"),w9=nr("role"),bu=nr("icon"),c1=nr("tooltip"),ub=nr("label"),zy=nr("shortcut"),LS=hi("select"),ug=yc("active",!1),YB=yc("borderless",!1),gd=yc("enabled",!0),HS=yc("primary",!1),cO=t=>pe("columns",t),aO=pe("meta",{}),lO=Uo("onAction",ae),db=t=>Vo("type",t),iO=t=>Bc("name","name",T2(()=>nt(`${t}-name`)),tn),x9=t=>Bc("value","value",T2(()=>nt(`${t}-value`)),qu()),XB=[zs,Rh,wl("level",["info","warn","error","success"]),rO,pe("url","")],JB=Zt(XB),E9=t=>[zs,t],QB=[zs,Rh,gd,iO("button"),bu,YB,F1("buttonType",["primary","secondary","toolbar"]),HS,Vo("context","mode:design")],T9=Zt(QB),mb=[zs,Fy],Dl=mb.concat([ub]),k9=mb.concat([Ly,gd,Vo("context","mode:design")]),eP=Zt(k9),_9=rp,A9=Dl.concat([cO("auto"),Vo("context","mode:design")]),O9=Zt(A9),D9=Ug([Hy,Rh,rO]),tP=Dl.concat([Vo("storageKey","default"),Vo("context","mode:design")]),R9=Zt(tP),nP=tn,Mh=Zt(Dl),uO=tn,sP=mb.concat([Vo("tag","textarea"),Mr("scriptId"),Mr("scriptUrl"),hi("onFocus"),Pw("settings",void 0)]),rP=mb.concat([Vo("tag","textarea"),eu("init")]),dO=Wg(t=>ws("customeditor.old",za(rP),t).orThunk(()=>ws("customeditor.new",za(sP),t))),cP=tn,nf=[gd,r1,w9,zy,x9("menuitem"),aO,Vo("context","mode:design")],aP=Zt([zs,Fy].concat(nf)),lP=rp,mO=[iO("button"),bu,us("align","end",["start","end"]),HS,gd,F1("buttonType",["primary","secondary"]),Vo("context","mode:design")],iP=[...mO,Rh],fO=[wl("type",["submit","cancel","custom"]),...iP],M9=[wl("type",["menu"]),r1,c1,bu,xl("items",aP),...mO],N9=[...mO,wl("type",["togglebutton"]),c1,bu,r1,yc("active",!1)],uP=Nc("type",{submit:fO,cancel:fO,custom:fO,menu:M9,togglebutton:N9}),dP=Dl.concat([Vo("context","mode:design")]),B9=Zt(dP),P9=M2(),$9=t=>[zs,Rw("columns"),t],FT=[zs,Mr("html"),us("presets","presentation",["presentation","document"]),Uo("onInit",ae),yc("stretched",!1)],I9=Zt(FT),F9=Dl.concat([yc("border",!1),yc("sandboxed",!0),yc("streamContent",!1),yc("transparent",!0)]),mP=Zt(F9),fP=tn,L9=Zt(mb.concat([nr("height")])),H9=Zt([Mr("url"),I1("zoom"),I1("cachedWidth"),I1("cachedHeight")]),gO=Dl.concat([nr("inputMode"),nr("placeholder"),yc("maximized",!1),gd,Vo("context","mode:design")]),z9=Zt(gO),gP=tn,V9=t=>[zs,Ly,t,us("align","start",["start","center","end"]),nr("for")],U9=[Rh,Hy],W9=[Rh,xl("items",N2("items",()=>hO))],hO=Yb([Zt(U9),Zt(W9)]),hP=Dl.concat([xl("items",hO),gd,Vo("context","mode:design")]),Z9=Zt(hP),j9=tn,G9=Dl.concat([Mw("items",[Rh,Hy]),Bw("size",1),gd,Vo("context","mode:design")]),q9=Zt(G9),pP=tn,K9=Dl.concat([yc("constrain",!0),gd,Vo("context","mode:design")]),bP=Zt(K9),vP=Zt([Mr("width"),Mr("height")]),Y9=mb.concat([Ly,Bw("min",0),Bw("max",0)]),X9=Zt(Y9),J9=x2,Q9=[zs,xl("header",tn),xl("cells",Yu(tn))],ez=Zt(Q9),tz=Dl.concat([nr("placeholder"),yc("maximized",!1),gd,Vo("context","mode:design")]),nz=Zt(tz),oz=tn,pO=[Vo("buttonType","default"),nr("text"),nr("tooltip"),nr("icon"),pi("search",!1,Yb([rp,Zt([nr("placeholder")])],t=>ar(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),eu("fetch"),Uo("onSetup",()=>ae),Vo("context","mode:design")],yP=Zt([zs,...pO]),CP=t=>ws("menubutton",yP,t),SP=[wl("type",["directory","leaf"]),KB,Mr("id"),Ua("menu",yP),nr("customStateIcon"),nr("customStateIconTooltip")],HT=Zt(SP),sz=SP.concat([xl("children",N2("children",()=>fi("type",{directory:wP,leaf:HT})))]),wP=Zt(sz),bO=fi("type",{directory:wP,leaf:HT}),rz=[zs,xl("items",bO),hi("onLeafAction"),hi("onToggleExpand"),Df("defaultExpandedIds",[],tn),nr("defaultSelectedId")],vO=Zt(rz),xP=Dl.concat([us("filetype","file",["image","media","file"]),gd,nr("picker_text"),Vo("context","mode:design")]),cz=Zt(xP),az=Zt([Hy,aO]),zT=t=>Bc("items","items",Qi(),Yu(Wg(s=>ws(`Checking item of ${t}`,VT,s).fold(c=>Qt.error(Of(c)),c=>Qt.value(c))))),VT=Aw(()=>fi("type",{alertbanner:JB,bar:Zt(E9(zT("bar"))),button:T9,checkbox:eP,colorinput:R9,colorpicker:Mh,dropzone:B9,grid:Zt($9(zT("grid"))),iframe:mP,input:z9,listbox:Z9,selectbox:q9,sizeinput:bP,slider:X9,textarea:nz,urlinput:cz,customeditor:dO,htmlpanel:I9,imagepreview:L9,collection:O9,label:Zt(V9(zT("label"))),table:ez,tree:vO,panel:yO})),lz=[zs,pe("classes",[]),xl("items",VT)],yO=Zt(lz),EP=[iO("tab"),KB,xl("items",VT)],iz=[zs,Mw("tabs",EP)],TP=Zt(iz),kP=iP,_P=uP,uz=Zt([Mr("title"),Sl("body",fi("type",{panel:yO,tabpanel:TP})),Vo("size","normal"),Df("buttons",[],_P),pe("initialData",{}),Uo("onAction",ae),Uo("onChange",ae),Uo("onSubmit",ae),Uo("onClose",ae),Uo("onCancel",ae),Uo("onTabChange",ae)]),dz=t=>ws("dialog",uz,t),mz=Zt([wl("type",["cancel","custom"]),...kP]),AP=Zt([Mr("title"),Mr("url"),I1("height"),I1("width"),ev("buttons",mz),Uo("onAction",ae),Uo("onCancel",ae),Uo("onClose",ae),Uo("onMessage",ae)]),fz=t=>ws("dialog",AP,t),UT=t=>Vs(t)?[t].concat(_e(_u(t),UT)):Ns(t)?_e(t,UT):[],gz=t=>rn(t.type)&&rn(t.name),hz={checkbox:_9,colorinput:nP,colorpicker:uO,dropzone:P9,input:gP,iframe:fP,imagepreview:H9,selectbox:pP,sizeinput:vP,slider:J9,listbox:j9,size:vP,textarea:oz,urlinput:az,customeditor:cP,collection:D9,togglemenuitem:lP},CO=t=>A.from(hz[t.type]),pz=t=>ho(UT(t),gz),bz=t=>{const s=pz(t),c=_e(s,l=>CO(l).fold(()=>[],d=>[Sl(l.name,d)]));return Zt(c)},OP=t=>{var s;const c=gi(dz(t)),l=bz(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:c,dataValidator:l,initialData:d}},Nh={open:(t,s)=>{const c=OP(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=gi(fz(s));return t(c)},redial:t=>OP(t)},DP=Zt([zs,r1]),RP=t=>ws("separatormenuitem",DP,t),vz=Zt([db("autocompleteitem"),ug,gd,aO,Hy,r1,bu]),MP=t=>ws("Autocompleter.Separator",DP,t),yz=t=>ws("Autocompleter.Item",vz,t),Vy=[gd,c1,bu,r1,ql,Vo("context","mode:design")],Cz=Zt([zs,ib,zy].concat(Vy)),SO=t=>ws("toolbarbutton",Cz,t),wO=[ug].concat(Vy),NP=Zt(wO.concat([zs,ib,zy])),BP=t=>ws("ToggleButton",NP,t),WT=[Uo("predicate",bn),us("scope","node",["node","editor"]),us("position","selection",["node","selection","line"])],PP=Vy.concat([db("contextformbutton"),Vo("align","end"),HS,ib,Yc("original",Sn)]),Sz=wO.concat([db("contextformbutton"),Vo("align","end"),HS,ib,Yc("original",Sn)]),wz=Vy.concat([db("contextformbutton")]),xz=wO.concat([db("contextformtogglebutton")]),$P=Nc("type",{contextformbutton:PP,contextformtogglebutton:Sz}),xO=[ub,xl("commands",$P),Ua("launch",Nc("type",{contextformbutton:wz,contextformtogglebutton:xz})),Uo("onInput",ae),Uo("onSetup",ae)],Ez=[...WT,...xO,wl("type",["contextform"]),Uo("initValue",te("")),nr("placeholder")],Tz=[...WT,...xO,wl("type",["contextsliderform"]),Uo("initValue",te(0)),Uo("min",te(0)),Uo("max",te(100))],IP=[...WT,...xO,wl("type",["contextsizeinputform"]),Uo("initValue",te({width:"",height:""}))],FP=Nc("type",{contextform:Ez,contextsliderform:Tz,contextsizeinputform:IP}),LP=t=>ws("ContextForm",FP,t),ZT=Vy.concat([db("contexttoolbarbutton")]),kz=Zt([db("contexttoolbar"),El("launch",ZT),Sl("items",Yb([tn,Ug([nr("name"),nr("label"),xl("items",tn)])]))].concat(WT)),_z=t=>({name:t.name.getOrUndefined(),label:t.label.getOrUndefined(),items:t.items}),Az=t=>({...t,launch:t.launch.getOrUndefined(),items:rn(t.items)?t.items:Pe(t.items,_z)}),Oz=t=>ws("ContextToolbar",kz,t),HP=[zs,Mr("src"),nr("alt"),Df("classes",[],tn)],Dz=Zt(HP),Rz=[zs,Rh,IT,Df("classes",["tox-collection__item-label"],tn)],Mz=Zt(Rz),EO=Aw(()=>fi("type",{cardimage:Dz,cardtext:Mz,cardcontainer:zP})),zP=Zt([zs,Vo("direction","horizontal"),Vo("align","left"),Vo("valign","middle"),xl("items",EO)]),Nz=Zt([zs,ub,xl("items",EO),ql,lO].concat(nf)),Bz=t=>ws("cardmenuitem",Nz,t),VP=Zt([zs,ug,bu,ub].concat(nf)),Pz=t=>ws("choicemenuitem",VP,t),TO=[zs,Mr("fancytype"),lO],ln=[pe("initData",{})].concat(TO),zS=[hi("select"),B2("initData",{},[yc("allowCustomColors",!0),Vo("storageKey","default"),ev("colors",qu())])].concat(TO),UP=[hi("select"),tu("initData",[Rw("columns"),Df("items",[],qu())])].concat(TO),WP=Nc("fancytype",{inserttable:ln,colorswatch:zS,imageselect:UP}),ZP=t=>ws("fancymenuitem",WP,t),jP=Zt([zs,ug,v9,ub,c1].concat(nf)),$z=Zt([zs,ug,rO,Ly,c1,Hy].concat(nf)),GP=t=>ws("imagemenuitem",jP,t),Iz=t=>ws("resetimageitem",$z,t),Fz=Zt([zs,ql,lO,bu].concat(nf)),Lz=t=>ws("menuitem",Fz,t),qP=Zt([zs,C9,ql,bu].concat(nf)),KP=t=>ws("nestedmenuitem",qP,t),DG=Zt([zs,bu,ug,ql,ib].concat(nf)),VS=t=>ws("togglemenuitem",DG,t),kO=Zt([bu,c1,Uo("onShow",ae),Uo("onHide",ae),ql]),YP=t=>ws("sidebar",kO,t),Hz=Zt([zs,Sl("items",Yb([Ug([Fy,xl("items",tn)]),tn]))].concat(Vy)),zz=t=>ws("GroupToolbarButton",Hz,t),XP=Zt([zs,c1,bu,r1,LS,y9,ql,us("presets","normal",["normal","color","listpreview"]),cO(1),ib,S9,Vo("context","mode:design")]),Vz=t=>ws("SplitButton",XP,t),JP=[r1,bu,nr("tooltip"),us("buttonType","secondary",["primary","secondary"]),yc("borderless",!1),eu("onAction"),Vo("context","mode:design")],_O=[...JP,Rh,wl("type",["button"])],Uz=[...JP,yc("active",!1),wl("type",["togglebutton"])],US={button:_O,togglebutton:Uz},Wz=[wl("type",["group"]),Df("buttons",[],Nc("type",US))],QP=Nc("type",{...US,group:Wz}),Zz=Zt([Df("buttons",[],QP),eu("onShow"),eu("onHide")]),jz=t=>ws("view",Zz,t),e6=(t,s,c)=>{const l=zo(t.element,"."+c);if(l.length>0){const d=vo(l,g=>{const h=g.dom.getBoundingClientRect().top,C=l[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(l.length);return A.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return A.none()},t6=(t,s)=>We([sn(t,s)]),fb={namedEvents:t6,unnamedEvents:t=>t6(nt("unnamed-events"),t)},$i={item:t=>Ct.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>Ct.config({disabled:t}),splitButton:t=>Ct.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>Ct.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},WS=(t,s)=>{const c=t.getApi(s);return l=>{l(c)}},sm=(t,s)=>Wo(c=>{St(t.onBeforeSetup)&&t.onBeforeSetup(c),WS(t,c)(d=>{const g=t.onSetup(d);St(g)&&s.set(g)})}),hd=(t,s)=>td(c=>WS(t,c)(s.get())),jT=(t,s,c)=>td(l=>(c.set(dt.getValue(l)),WS(t,l)(s.get()))),n6="silver.uistate",ZS="setDisabled",Kz="setEnabled",GT="init",Yz=["switchmode",GT],Uy=(t,s)=>{const c=t.mainUi.outerContainer,l=[t.mainUi.mothership,...t.uiMotherships];s===ZS&&ft(l,d=>{d.broadcastOn([sg()],{target:c.element})}),ft(l,d=>{d.broadcastOn([n6],s)})},o6=(t,s)=>{t.on("init SwitchMode",c=>{Uy(s,c.type)}),t.on("DisabledStateChange",c=>{if(!c.isDefaultPrevented()){const l=c.state?ZS:GT;Uy(s,l),c.state||t.nodeChanged()}}),t.on("NodeChange",c=>{const l=t.ui.isEnabled()?c.type:ZS;Uy(s,l)}),GN(t)&&t.mode.set("readonly")},cr=t=>Al.config({channels:{[n6]:{onReceive:(s,c)=>{if(c===ZS||c===Kz){Ct.set(s,c===ZS);return}const{contextType:l,shouldDisable:d}=t();l==="mode"&&!bo(Yz,c)||Ct.set(s,d)}}}}),Xz=(t,s)=>Zm((c,l)=>{WS(t,c)(t.onAction),!t.triggersSubmenu&&s===fd.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&Tn(c,nv()),l.stop())}),s6={[Wl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},Wy=oi,gb=(t,s,c,l)=>{const d=Et(ae);return{type:"item",dom:s.dom,components:Wy(s.optComponents),data:t.data,eventOrder:s6,hasSubmenu:t.triggersSubmenu,itemBehaviours:We([sn("item-events",[Xz(t,c),sm(t,d),hd(t,d)]),$i.item(()=>!t.enabled||l.checkUiComponentContext(t.context).shouldDisable),cr(()=>l.checkUiComponentContext(t.context)),an.config({})].concat(t.itemBehaviours))}},hb=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),Jz=(t,s)=>{var c,l;const d=Je.fromTag("div");hs(d,"tox-image-selector-loading-spinner");const g=C=>{hs(C,"tox-image-selector-loading-spinner-wrapper"),jc(C,d)},h=C=>{Ao(C,"tox-image-selector-loading-spinner-wrapper"),yl(d)};return{dom:{tag:t.tag,attributes:(c=t.attributes)!==null&&c!==void 0?c:{},classes:t.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...t.checkMark.toArray()],behaviours:We([...(l=t.behaviours)!==null&&l!==void 0?l:[],sn("render-image-events",[Wo(C=>{g(C.element),io(C.element,"img").each(S=>{dr(S).catch(T=>{console.error(T)}).finally(()=>{h(C.element)})})})])])}},Qz=(t,s)=>Jz(s,t),OO=t=>{const s=Ah.os.isMacOS()||Ah.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),h=Pe(g,C=>{const S=C.toLowerCase().trim();return In(d,S)?d[S]:C});return s?h.join(""):h.join("+")},DO=(t,s,c=[$B])=>Gl(t,{tag:"div",classes:c},s),r6=t=>({dom:{tag:"div",classes:[DT]},components:[Yo(md.translate(t))]}),c6=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),eV=(t,s)=>({dom:{tag:"div",classes:[DT]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Yo(md.translate(s))]}]}),tV=t=>({dom:{tag:"div",classes:[l9]},components:[Yo(OO(t))]}),qT=t=>DO("checkmark",t,[i9]),nV=t=>DO("chevron-right",t,[FB]),oV=t=>DO("chevron-down",t,[FB]),sV=(t,s)=>{const c=t.direction==="vertical"?u9:HB,l=t.align==="left"?d9:zB;return{dom:{tag:"div",classes:[LB,c,l,(()=>{switch(t.valign){case"top":return m9;case"middle":return f9;case"bottom":return VB}})()]},components:s}},rV=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),cV=(t,s,c)=>{const l="custom",d="remove",g=t.value,h=t.iconContent.map(T=>o9(T,s.icons,c)),C=t.ariaLabel.map(T=>({"aria-label":s.translate(T),"data-mce-name":T})).getOr({});return{dom:(()=>{const T=BS,O=h.getOr(""),N={tag:"div",attributes:C,classes:[T]};return g===l?{...N,tag:"button",classes:[...N.classes,"tox-swatches__picker-btn"],innerHtml:O}:g===d?{...N,classes:[...N.classes,"tox-swatch--remove"],innerHtml:O}:Po(g)?{...N,attributes:{...N.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:O}:N})(),optComponents:[]}},RO=(t,s)=>{const c=t.map(l=>({attributes:{id:nt("menu-item"),"aria-label":md.translate(l)}})).getOr({});return{tag:"div",classes:[KA,Iy].concat(s),...c}},MO=t=>({dom:{tag:"label"},components:[Yo(t)]}),aV=(t,s,c,l)=>{const d={tag:"div",classes:[$B]},g=F=>Gl(F,d,s.icons,l),h=()=>A.some({dom:d}),C=c?t.iconContent.map(g).orThunk(h):A.none(),S=t.checkMark,T=A.from(t.meta).fold(()=>r6,F=>In(F,"style")?Rn(eV,F.style):r6),O=t.htmlContent.fold(()=>t.textContent.map(T),F=>A.some(c6(F,[DT])));return{dom:RO(t.ariaLabel,[]),optComponents:[C,O,t.shortcutContent.map(tV),S,t.caret,t.labelContent.map(MO)]}},a6=t=>({dom:RO(t.ariaLabel,[IB]),optComponents:[A.some(Qz(t.iconContent.getOrDie(),{tag:"div",classes:[a9],checkMark:t.checkMark})),t.labelContent.map(MO)]}),Zy=(t,s,c,l=A.none())=>t.presets==="color"?cV(t,s,l):t.presets==="img"?a6(t):aV(t,s,c,l),NO=(t,s,c)=>at(t,"tooltipWorker").map(l=>[ms.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:nh}}),mode:"follow-highlight",onShow:(d,g)=>{l(h=>{ms.setComponents(d,[my({element:Je.fromDom(h)})])})}})]).getOrThunk(()=>c.map(l=>[ms.config({...s.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})]).getOr([])),l6=t=>TS.DOM.encode(t),KT=(t,s)=>{const c=md.translate(t),l=l6(c);if(s.length>0){const d=new RegExp(ir(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},lV=(t,s,c,l,d,g,h,C=!0)=>{const S=Zy({presets:l,textContent:A.none(),htmlContent:c?t.text.map(O=>KT(O,s)):A.none(),ariaLabel:t.text,labelContent:A.none(),iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},h.providers,C,t.icon),T=t.text.filter(O=>!c&&O!=="");return gb({context:"mode:design",data:hb(t),enabled:t.enabled,getApi:te({}),onAction:O=>d(t.value,t.meta),onSetup:te(ae),triggersSubmenu:!1,itemBehaviours:NO(t,h,T)},S,g,h.providers)},BO=(t,s)=>Pe(t,c=>{switch(c.type){case"cardcontainer":return sV(c,BO(c.items,s));case"cardimage":return rV(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(g=>bo(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return c6(KT(c.text,d),c.classes)}}),iV=(t,s,c,l)=>{const d=h=>({isEnabled:()=>!Ct.isDisabled(h),setEnabled:C=>{Ct.set(h,!C),ft(zo(h.element,"*"),S=>{h.getSystem().getByDom(S).each(T=>{T.hasConfigured(Ct)&&Ct.set(T,!C)})})}}),g={dom:RO(t.label,[]),optComponents:[A.some({dom:{tag:"div",classes:[LB,HB]},components:BO(t.items,l)})]};return gb({context:"mode:design",data:hb({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(l.itemBehaviours).getOr([])},g,s,c.providers)},PO=(t,s,c,l,d,g,h,C=!0)=>{const S=N=>({setActive:F=>{xn.set(N,F)},isActive:()=>xn.isOn(N),isEnabled:()=>!Ct.isDisabled(N),setEnabled:F=>Ct.set(N,!F)}),T=Zy({presets:c,textContent:s?t.text:A.none(),htmlContent:A.none(),labelContent:t.label,ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(qT(h.icons)):A.none(),caret:A.none(),value:t.value},h,C),O=t.text.filter(te(!s)).map(N=>ms.config(h.tooltips.getConfig({tooltipText:h.translate(N)})));return uo(gb({context:t.context,data:hb(t),enabled:t.enabled,getApi:S,onAction:N=>l(t.value),onSetup:N=>(N.setActive(d),ae),triggersSubmenu:!1,itemBehaviours:[...O.toArray()]},T,g,h),{toggling:{toggleClass:XA,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},i6=t=>({value:d6(t)}),$O=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,u6=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,IO=t=>$O.test(t)||u6.test(t),d6=t=>uc(t,"#").toUpperCase(),uV=t=>IO(t)?A.some({value:d6(t)}):A.none(),of=t=>({value:t.value.replace($O,(c,l,d,g)=>l+l+d+d+g+g)}),YT=t=>{const s=of(t),c=u6.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},jy=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},jS=t=>{const s=jy(t.red)+jy(t.green)+jy(t.blue);return i6(s)},pb=(t,s,c)=>({hue:t,saturation:s,value:c}),FO=t=>{let s=0,c=0,l=0;const d=t.red/255,g=t.green/255,h=t.blue/255,C=Math.min(d,Math.min(g,h)),S=Math.max(d,Math.max(g,h));if(C===S)return l=C,pb(0,0,l*100);const T=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-T/(S-C)),c=(S-C)/S,l=S,pb(Math.round(s),Math.round(c*100),Math.round(l*100))},XT=Math.min,LO=Math.max,Gy=Math.round,dV=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,mV=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,a1=(t,s,c,l)=>({red:t,green:s,blue:c,alpha:l}),HO=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},m6=t=>{let s,c,l;const d=(t.hue||0)%360;let g=t.saturation/100,h=t.value/100;if(g=LO(0,XT(g,1)),h=LO(0,XT(h,1)),g===0)return s=c=l=Gy(255*h),a1(s,c,l,1);const C=d/60,S=h*g,T=S*(1-Math.abs(C%2-1)),O=h-S;switch(Math.floor(C)){case 0:s=S,c=T,l=0;break;case 1:s=T,c=S,l=0;break;case 2:s=0,c=S,l=T;break;case 3:s=0,c=T,l=S;break;case 4:s=T,c=0,l=S;break;case 5:s=S,c=0,l=T;break;default:s=c=l=0}return s=Gy(255*(s+O)),c=Gy(255*(c+O)),l=Gy(255*(l+O)),a1(s,c,l,1)},bb=t=>{const s=YT(t),c=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return a1(c,l,d,1)},f6=(t,s,c,l)=>{const d=parseInt(t,10),g=parseInt(s,10),h=parseInt(c,10),C=parseFloat(l);return a1(d,g,h,C)},zO=t=>{const s=dV.exec(t);if(s!==null)return A.some(f6(s[1],s[2],s[3],"1"));const c=mV.exec(t);return c!==null?A.some(f6(c[1],c[2],c[3],c[4])):A.none()},VO=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,UO=a1(255,0,0,1),fV=t=>FO(bb(t)),g6=t=>jS(m6(t)),gV=t=>uV(t).orThunk(()=>zO(t).map(jS)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const l=c.getImageData(0,0,1,1).data,d=l[0],g=l[1],h=l[2],C=l[3];return jS(a1(d,g,h,C))}),hV=t=>{t.dispatch("SkinLoaded")},h6=(t,s)=>{t.dispatch("SkinLoadError",s)},sf=t=>{t.dispatch("ResizeEditor")},GS=(t,s)=>{t.dispatch("ResizeContent",s)},pV=(t,s)=>{t.dispatch("ScrollContent",s)},p6=(t,s)=>{t.dispatch("TextColorChange",s)},bV=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},vV=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),yV=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})},b6=(t,s)=>{t.dispatch("StylesTextUpdate",s)},v6=(t,s)=>{t.dispatch("AlignTextUpdate",s)},BG=(t,s)=>{t.dispatch("FontSizeTextUpdate",s)},PG=(t,s)=>{t.dispatch("FontSizeInputTextUpdate",s)},qa=(t,s)=>{t.dispatch("BlocksTextUpdate",s)},y6=(t,s)=>{t.dispatch("FontFamilyTextUpdate",s)},CV=t=>{t.dispatch("ToggleSidebar")},C6=t=>{t.dispatch("ToggleView")},S6=t=>{t.dispatch("ContextToolbarClose")},SV=t=>{t.dispatch("ContextFormSlideBack")},qS=(t,s)=>()=>{t(),s()},Ka=(t,s=wt)=>vb(t,"NodeChange",c=>{c.setEnabled(t.selection.isEditable()&&s())}),wV=(t,s)=>c=>{const l=Ma(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);l.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),l.clear()}},qy=(t,s)=>c=>{const l=Ka(t)(c),d=wV(t,s)(c);return()=>{l(),d()}},vb=(t,s,c)=>l=>{const d=()=>c(l),g=()=>{c(l),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},WO=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},Kl=(t,s)=>()=>t.execCommand(s);var yb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const w6={},x6=(t,s=10)=>{const c=yb.getItem(t),l=rn(c)?JSON.parse(c):[],g=(T=>s-T.length<0?T.slice(0,s):T)(l),h=T=>{ze(g,T).each(C),g.unshift(T),g.length>s&&g.pop(),yb.setItem(t,JSON.stringify(g))},C=T=>{g.splice(T,1)};return{add:h,state:()=>g.slice(0)}},E6=t=>at(w6,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,c=yb.getItem(s);if(el(c)){const d=yb.getItem("tinymce-custom-colors");yb.setItem(s,Po(d)?d:"[]")}const l=x6(s,10);return w6[t]=l,l}),xV=t=>Pe(E6(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),ZO=(t,s)=>{E6(t).add(s)},jO="forecolor",JT="hilitecolor",$G=5,IG=t=>T6(t.map((s,c)=>c%2===0?"#"+gV(s).value:s)),T6=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:t[c],icon:"checkmark",type:"choiceitem"});return s},rf=t=>s=>s.options.get(t),QT="#000000",EV=t=>{const s=t.options.register,c=g=>en(g,rn)?{value:IG(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=g=>en(g,rn)?{value:T6(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>Vc(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:c,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:l}),s("color_map_background",{processor:c}),s("color_map_foreground",{processor:c}),s("color_cols",{processor:d,default:GO(t)}),s("color_cols_foreground",{processor:d,default:k6(t,jO)}),s("color_cols_background",{processor:d,default:k6(t,JT)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:QT}),s("color_default_background",{processor:"string",default:QT})},e4=(t,s)=>s===jO&&t.options.isSet("color_map_foreground")?rf("color_map_foreground")(t):s===JT&&t.options.isSet("color_map_background")?rf("color_map_background")(t):t.options.isSet("color_map_raw")?rf("color_map_raw")(t):rf("color_map")(t),GO=(t,s="default")=>Math.max($G,Math.ceil(Math.sqrt(e4(t,s).length))),k6=(t,s)=>{const c=rf("color_cols")(t),l=GO(t,s);return c===GO(t)?l:c},_6=(t,s="default")=>Math.round(s===jO?rf("color_cols_foreground")(t):s===JT?rf("color_cols_background")(t):rf("color_cols")(t)),A6=rf("custom_colors"),TV=rf("color_default_foreground"),kV=rf("color_default_background"),_V="rgba(0, 0, 0, 0)",t4=t=>zO(t).exists(s=>s.alpha!==0),O6=t=>Pg(t,s=>{if(Zc(s)){const c=M(s,"background-color");return Sr(t4(c),c)}else return A.none()}).getOr(_V),qO=(t,s)=>{const c=Je.fromDom(t.selection.getStart()),l=s==="hilitecolor"?O6(c):M(c,"color");return zO(l).map(d=>"#"+jS(d).value)},D6=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},AV=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},OV=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{D6(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{AV(t,s)})},R6=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},n4=(t,s,c,l)=>{c==="custom"?I6(t)(g=>{g.each(h=>{ZO(s,h),t.execCommand("mceApplyTextcolor",s,h),l(h)})},qO(t,s).getOr(QT)):c==="remove"?(l(""),t.execCommand("mceRemoveTextcolor",s)):(l(c),t.execCommand("mceApplyTextcolor",s,c))},o4=(t,s,c)=>t.concat(xV(s).concat(R6(c))),M6=(t,s,c)=>l=>{l(o4(t,s,c))},KO=(t,s,c)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(l,c)},N6=(t,s)=>{t.setTooltip(s)},B6=(t,s)=>c=>{const l=qO(t,s);return Wc(l,c.toUpperCase())},YO=(t,s,c)=>{if(rl(c))return s==="forecolor"?"Text color":"Background color";const l=s==="forecolor"?"Text color {0}":"Background color {0}",d=o4(e4(t,s),s,!1),g=Jt(d,h=>h.value===c).getOr({text:""}).text;return t.translate([l,t.translate(g)])},P6=(t,s,c,l)=>{t.ui.registry.addSplitButton(s,{tooltip:YO(t,c,l.get()),presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:B6(t,c),columns:_6(t,c),fetch:M6(e4(t,c),c,A6(t)),onAction:d=>{n4(t,c,l.get(),ae)},onItemAction:(d,g)=>{n4(t,c,g,h=>{l.set(h),p6(t,{name:s,color:h})})},onSetup:d=>{KO(d,s,l.get());const g=h=>{h.name===s&&(KO(d,h.name,h.color),N6(d,YO(t,c,h.color)))};return t.on("TextColorChange",g),qS(Ka(t)(d),()=>{t.off("TextColorChange",g)})}})},$6=(t,s,c,l,d)=>{t.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(N6(g,YO(t,c,d.get())),KO(g,s,d.get()),Ka(t)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:B6(t,c),initData:{storageKey:c},onAction:g=>{n4(t,c,g.value,h=>{d.set(h),p6(t,{name:s,color:h})})}}]})},I6=t=>(s,c)=>{let l=!1;const d=C=>{const T=C.getData().colorpicker;l?(s(A.from(T)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",T]))},g=(C,S)=>{S.name==="hex-valid"&&(l=S.value)},h={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:ae,onCancel:()=>{s(A.none())}})},DV=t=>{OV(t);const s=TV(t),c=kV(t),l=Et(s),d=Et(c);P6(t,"forecolor","forecolor",l),P6(t,"backcolor","hilitecolor",d),$6(t,"forecolor","forecolor","Text color",l),$6(t,"backcolor","hilitecolor","Background color",d)},RV=(t,s,c,l,d)=>{const g=S=>({setActive:T=>{xn.set(S,T)},isActive:()=>xn.isOn(S),isEnabled:()=>!Ct.isDisabled(S),setEnabled:T=>Ct.set(S,!T)}),h=Zy({presets:"img",textContent:A.none(),htmlContent:A.none(),ariaLabel:t.tooltip,iconContent:A.some(t.url),labelContent:t.label,shortcutContent:A.none(),checkMark:A.some(qT(d.icons)),caret:A.none(),value:t.value},d,!0),C=t.tooltip.map(S=>ms.config(d.tooltips.getConfig({tooltipText:d.translate(S)})));return uo(gb({context:t.context,data:hb(t),enabled:t.enabled,getApi:g,onAction:S=>{s(t.value),S.setActive(!0)},onSetup:S=>(S.setActive(c),ae),triggersSubmenu:!1,itemBehaviours:[...C.toArray()]},h,l,d),{toggling:{toggleClass:XA,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},s4=(t,s,c,l,d,g,h,C)=>{const S=IS(s),O=FG(s,c,l,d!=="color"?"normal":"color",g,h,C);return FS(t,S,O,l,{menuType:d})},FG=(t,s,c,l,d,g,h)=>oi(Pe(t,C=>C.type==="choiceitem"?Pz(C).fold(om,S=>A.some(PO(S,c===1,l,s,g(S.value),d,h,IS(t)))):C.type==="imageitem"?GP(C).fold(om,S=>A.some(RV(S,s,g(S.value),d,h))):C.type==="resetimage"?Iz(C).fold(om,S=>A.some(PO({...S,text:S.tooltip,icon:A.some(S.icon),label:A.some(S.label)},c===1,l,s,g(S.value),d,h,IS(t)))):A.none())),KS=(t,s)=>{const c=Dh(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?io(d.element,"[aria-checked=true]"):A.none()}},F6=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${BS}`:`.${Iy}`}},L6=(t,s)=>{const c=r4(t,s),l=s.colorinput.getColorCols(t.initData.storageKey),d="color",h={...s4(nt("menu-value"),c,C=>{t.onAction({value:C})},l,d,fd.CLOSE_ON_EXECUTE,t.select.getOr(bn),s.shared.providers),markers:Dh(d),movement:KS(l,d),showMenuRole:!1};return{type:"widget",data:{value:nt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[hS.widget(rg.sketch(h))]}},r4=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>o4(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,c),l=>l.concat(R6(c)))},H6=(t,s)=>{const c="imageselector",l=t.initData.columns,g={...s4(nt("menu-value"),t.initData.items,h=>{t.onAction({value:h})},l,c,fd.CLOSE_ON_EXECUTE,t.select.getOr(bn),s.shared.providers),markers:Dh(c),movement:KS(l,c),showMenuRole:!1};return{type:"widget",data:{value:nt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[hS.widget(rg.sketch(g))]}},z6=nt("cell-over"),V6=nt("cell-execute"),MV=t=>(s,c)=>t.shared.providers.translate(["{0} columns, {1} rows",c,s]),NV=(t,s,c)=>{const l=h=>Pt(h,z6,{row:t,col:s}),d=h=>Pt(h,V6,{row:t,col:s}),g=(h,C)=>{C.stop(),d(h)};return na({dom:{tag:"div",attributes:{role:"button","aria-label":c}},behaviours:We([sn("insert-table-picker-cell",[Me(Ul(),Yt.focus),Me(Wl(),d),Me(Nf(),g),Me(Pf(),g)]),xn.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Yt.config({onFocus:l})])})},BV=(t,s,c)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<c;h++){const C=t(d+1,h+1);g.push(NV(d,h,C))}l.push(g)}return l},PV=(t,s,c,l,d)=>{for(let g=0;g<l;g++)for(let h=0;h<d;h++)xn.set(t[g][h],g<=s&&h<=c)},$V=t=>_e(t,s=>Pe(s,jl)),XO=(t,s)=>Yo(`${s}x${t}`),FV={inserttable:(t,s)=>{const d=MV(s),g=BV(d,10,10),h=XO(0,0),C=no({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:We([an.config({})])});return{type:"widget",data:{value:nt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[hS.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:$V(g).concat(C.asSpec()),behaviours:We([sn("insert-table-picker",[Wo(S=>{an.set(C.get(S),[h])}),sh(z6,(S,T,O)=>{const{row:N,col:F}=O.event;PV(g,N,F,10,10),an.set(C.get(S),[XO(N+1,F+1)])}),sh(V6,(S,T,O)=>{const{row:N,col:F}=O.event;Tn(S,nv()),t.onAction({numRows:N+1,numColumns:F+1})})]),kt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:L6,imageselect:H6},U6=(t,s)=>at(FV,t.fancytype).map(c=>c(t,s)),LV=(t,s,c,l=!0,d=!1)=>{const g=d?oV(c.icons):nV(c.icons),h=S=>({isEnabled:()=>!Ct.isDisabled(S),setEnabled:T=>Ct.set(S,!T),setIconFill:(T,O)=>{io(S.element,`svg path[class="${T}"], rect[class="${T}"]`).each(N=>{Wt(N,"fill",O)})},setTooltip:T=>{const O=c.translate(T);Wt(S.element,"aria-label",O)}}),C=Zy({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,labelContent:A.none(),caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},c,l);return gb({context:t.context,data:hb(t),getApi:h,enabled:t.enabled,onAction:ae,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,c)},HV=(t,s,c,l=!0)=>{const d=h=>({isEnabled:()=>!Ct.isDisabled(h),setEnabled:C=>Ct.set(h,!C)}),g=Zy({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),labelContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},c,l);return gb({context:t.context,data:hb(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},zV=t=>({type:"separator",dom:{tag:"div",classes:[Iy,pu]},components:t.text.map(Yo).toArray()}),Cb=(t,s,c,l=!0)=>{const d=h=>({setActive:C=>{xn.set(h,C)},isActive:()=>xn.isOn(h),isEnabled:()=>!Ct.isDisabled(h),setEnabled:C=>Ct.set(h,!C)}),g=Zy({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),labelContent:A.none(),ariaLabel:t.text,checkMark:A.some(qT(c.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,l);return uo(gb({context:t.context,data:hb(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:XA,toggleOnExecute:!1,selected:t.active},role:t.role.getOrUndefined()})},W6=lV,Ky=zV,c4=HV,Z6=LV,j6=Cb,G6=U6,LG=iV,VV=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},UV=t=>{const s=dt.getValue(t),c=PS(t).map(ZB);hu.refetch(s).get(()=>{const l=Tt.getCoupled(s,"sandbox");c.each(d=>PS(l).each(g=>g9(g,d)))})},WV=(t,s)=>{ZV(t).each(c=>{Ak(t,c.element,s.event.eventType,s.event.interactionEvent)})},ZV=t=>qn.getState(t).bind(Gn.getHighlighted).bind(Gn.getHighlighted),jV=t=>Jr(t.element,$T)?A.some(t.element):io(t.element,"."+$T),Sb=(t,s,c)=>{eO(t).each(l=>{PT(l,c),jV(s).each(g=>{Ws(g,"id").each(h=>Wt(l.element,"aria-controls",h))})}),Wt(c.element,"aria-selected","true")},YS=(t,s,c)=>{Wt(c.element,"aria-selected","false")},JO=t=>{eO(t).each(s=>Yt.focus(s))},GV=t=>Tt.getExistingCoupled(t,"sandbox").bind(PS).map(ZB).map(c=>c.fetchPattern).getOr("");var a4;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(a4||(a4={}));const QO=(t,s,c,l,d)=>{const g=c.shared.providers,h=C=>d?{...C,shortcut:A.none(),icon:C.text.isSome()?A.none():C.icon}:C;switch(t.type){case"menuitem":return Lz(t).fold(om,C=>A.some(c4(h(C),s,g,l)));case"nestedmenuitem":return KP(t).fold(om,C=>A.some(Z6(h(C),s,g,l,d)));case"togglemenuitem":return VS(t).fold(om,C=>A.some(j6(h(C),s,g,l)));case"separator":return RP(t).fold(om,C=>A.some(Ky(C)));case"fancymenuitem":return ZP(t).fold(om,C=>G6(C,c));default:return console.error("Unknown item in general menu",t),A.none()}},qV=(t,s,c,l,d,g,h)=>{const C=l===1,S=!C||IS(t);return oi(Pe(t,T=>{switch(T.type){case"separator":return MP(T).fold(om,O=>A.some(Ky(O)));case"cardmenuitem":return Bz(T).fold(om,O=>A.some(LG({...O,onAction:N=>{O.onAction(N),c(O.value,O.meta)}},d,g,{itemBehaviours:NO(O.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return yz(T).fold(om,O=>A.some(W6(O,s,C,"normal",c,d,g,S)))}}))},Yy=(t,s,c,l,d,g)=>{const h=IS(s),C=oi(Pe(s,O=>{const N=W=>d?!In(W,"text"):h,F=W=>QO(W,c,l,N(W),d);return O.type==="nestedmenuitem"&&O.getSubmenuItems().length<=0?F({...O,enabled:!1}):F(O)})),S=VV(g);return(d?ig:FS)(t,h,C,1,S)},l4=t=>J0.singleData(t.value,t),KV=(t,s,c,l)=>{const d=KS(s,l),g=Dh(l);return{data:l4({...t,movement:d,menuBehaviours:fb.unnamedEvents(s!=="auto"?[]:[Wo((h,C)=>{e6(h,4,g.item).each(({numColumns:S,numRows:T})=>{kt.setGridSize(h,T,S)})})])}),menu:{markers:Dh(l),fakeFocus:c===a4.ContentFocus}}},YV=t=>_.create(Je.fromDom(t.startContainer),t.startOffset,Je.fromDom(t.endContainer),t.endOffset),XV={register:(t,s)=>{const c=nt("autocompleter"),l=Et(!1),d=Et(!1),g=dn(),h=na(fs.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:c}},components:[],fireDismissalEventInstead:{},inlineBehaviours:We([sn("dismissAutocompleter",[Me(Im(),()=>N()),Me(U1(),(Q,ue)=>{Ws(ue.event.target,"id").each(de=>Wt(Je.fromDom(t.getBody()),"aria-activedescendant",de))})])]),lazySink:s.getSink})),C=()=>fs.isOpen(h),S=d.get,T=()=>{if(C()){fs.hide(h),t.dom.remove(c,!1);const Q=Je.fromDom(t.getBody());Ws(Q,"aria-owns").filter(ue=>ue===c).each(()=>{Ln(Q,"aria-owns"),Ln(Q,"aria-activedescendant")})}},O=()=>fs.getContent(h).bind(Q=>ts(Q.components(),0)),N=()=>t.execCommand("mceAutocompleterClose"),F=Q=>{const ue=An(Q,de=>A.from(de.columns)).getOr(1);return _e(Q,de=>{const ye=de.items;return qV(ye,de.matchText,(Te,rt)=>{const Ue={hide:()=>N(),reload:ke=>{T(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:ke})}};t.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(ke=>{l.set(!0),de.onAction(Ue,ke,Te,rt),l.set(!1)})},ue,fd.BUBBLE_TO_SANDBOX,s,de.highlightOn)})},W=(Q,ue)=>{const de=An(Q,ye=>A.from(ye.columns)).getOr(1);fs.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(YV),root:Je.fromDom(t.getBody())}},KV(FS("autocompleter-value",!0,ue,de,{menuType:"normal"}),de,a4.ContentFocus,"normal")),O().each(Gn.highlightFirst)},q=Q=>{const ue=F(Q);ue.length>0?(W(Q,ue),Wt(Je.fromDom(t.getBody()),"aria-owns",c),t.inline||ee()):T()},ee=()=>{t.dom.get(c)&&t.dom.remove(c,!1);const Q=t.getDoc().documentElement,ue=t.selection.getNode(),de=zu(h.element);Qs(de,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${ue.offsetTop}px`,left:`${ue.offsetLeft}px`}),t.dom.add(Q,de.dom),io(de,'[role="menu"]').each(ye=>{Ye(ye,"position"),Ye(ye,"max-height")})};t.on("AutocompleterStart",({lookupData:Q})=>{d.set(!0),l.set(!1),q(Q)}),t.on("AutocompleterUpdate",({lookupData:Q})=>q(Q)),t.on("AutocompleterUpdateActiveRange",({range:Q})=>g.set(Q)),t.on("AutocompleterEnd",()=>{T(),d.set(!1),l.set(!1),g.clear()});const ce={cancelIfNecessary:N,isMenuOpen:C,isActive:S,isProcessingAction:l.get,getMenu:O};c9.setup(ce,t)}},JV=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Pe(t.items,s.interpreter)});var QV=tinymce.util.Tools.resolve("tinymce.html.Entities");const Xy=(t,s,c,l)=>{const d=eD(t,s,c,l);return Mn.sketch(d)},q6=(t,s)=>Xy(t,s,[],[]),eD=(t,s,c,l)=>({dom:XS(c),components:t.toArray().concat([s]),fieldBehaviours:We(l)}),eU=()=>XS([]),XS=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),cf=(t,s)=>Mn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(t))]}),Rl=nt("form-component-change"),K6=nt("form-component-input"),JS=nt("form-close"),l1=nt("form-cancel"),dg=nt("form-action"),wb=nt("form-submit"),tD=nt("form-block"),QS=nt("form-unblock"),Y6=nt("form-tabchange"),i4=nt("form-resize"),tU=(t,s,c)=>{const l=t.label.map(W=>cf(W,s)),d=s.icons(),g=W=>{var q;return(q=d[W])!==null&&q!==void 0?q:W},h=W=>(q,ee)=>{hc(ee.event.target,"[data-collection-item-value]").each(ce=>{W(q,ee,ce,Js(ce,"data-collection-item-value"))})},C=(W,q)=>{const ce=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",Q=Pe(q,ye=>{const Te=md.translate(ye.text),rt=t.columns===1?`<div class="tox-collection__item-label">${Te}</div>`:"",Ue=`<div class="tox-collection__item-icon">${g(ye.icon)}</div>`,ke={_:" "," - ":" ","-":" "},mt=Te.replace(/\_| \- |\-/g,Ut=>ke[Ut]);return`<div data-mce-tooltip="${mt}" class="tox-collection__item${ce}" tabindex="-1" data-collection-item-value="${QV.encodeAllRaw(ye.value)}" aria-label="${mt}">${Ue}${rt}</div>`}),ue=t.columns!=="auto"&&t.columns>1?vr(Q,t.columns):[Q],de=Pe(ue,ye=>`<div class="tox-collection__group">${ye.join("")}</div>`);Fa(W.element,de.join(""))},S=h((W,q,ee,ce)=>{q.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||Pt(W,dg,{name:t.name,value:ce})}),T=[Me(Ul(),h((W,q,ee)=>{ro(ee,!0)})),Me(Nf(),S),Me(Pf(),S),Me(Xc(),h((W,q,ee)=>{io(W.element,"."+ab).each(ce=>{Ao(ce,ab)}),hs(ee,ab)})),Me(Lw(),h(W=>{io(W.element,"."+ab).each(q=>{Ao(q,ab),pl(q)})})),Zm(h((W,q,ee,ce)=>{Pt(W,dg,{name:t.name,value:ce})}))],O=(W,q)=>Pe(zo(W.element,".tox-collection__item"),q),N=Mn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Sn},behaviours:We([Ct.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable,onDisabled:W=>{O(W,q=>{hs(q,"tox-collection__item--state-disabled"),Wt(q,"aria-disabled",!0)})},onEnabled:W=>{O(W,q=>{Ao(q,"tox-collection__item--state-disabled"),Ln(q,"aria-disabled")})}}),cr(()=>s.checkUiComponentContext(t.context)),an.config({}),ms.config({...s.tooltips.getConfig({tooltipText:"",onShow:W=>{io(W.element,"."+ab+"[data-mce-tooltip]").each(q=>{Ws(q,"data-mce-tooltip").each(ee=>{ms.setComponents(W,s.tooltips.getComponents({tooltipText:ee}))})})}}),mode:"children-keyboard-focus",anchor:W=>({type:"node",node:io(W.element,"."+ab).orThunk(()=>C2(".tox-collection__item")),root:W.element,layouts:{onLtr:te([js,_r,Hs,Cc,sr,kr]),onRtl:te([js,_r,Hs,Cc,sr,kr])},bubble:Qc(0,-2,{})})}),dt.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(W,q)=>{C(W,q),t.columns==="auto"&&e6(W,5,"tox-collection__item").each(({numRows:ee,numColumns:ce})=>{kt.setGridSize(W,ee,ce)}),Tn(W,i4)}}),Zo.config({}),kt.config(F6(t.columns,"normal")),sn("collection-events",T)]),eventOrder:{[Wl()]:["disabling","alloy.base.behaviour","collection-events"],[Xc()]:["collection-events","tooltipping"]}});return Xy(l,N,["tox-form__group--collection"],[])},nU=(t,s)=>hu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:We([$i.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),cr(()=>s.providers.checkUiComponentContext(t.context)),K0.config({}),Zo.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>_o.nu(l=>t.fetch(l)).map(l=>A.from(l4(uo(s4(nt("menu-value"),l,d=>{t.onItemAction(c,d)},t.columns,t.presets,fd.CLOSE_ON_EXECUTE,bn,s.providers),{movement:KS(t.columns,t.presets)})))),parts:{menu:NT(!1,1,t.presets)}}),X6=nt("color-input-change"),J6=nt("color-swatch-change"),Q6=nt("color-picker-cancel"),zG=(t,s,c,l)=>{const d=Mn.parts.field({factory:ag,inputClasses:["tox-textfield"],data:l,onSetValue:T=>Xd.run(T).get(ae),inputBehaviours:We([Ct.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable}),cr(()=>s.providers.checkUiComponentContext(t.context)),Zo.config({}),Xd.config({invalidClass:"tox-textbox-field-invalid",getRoot:T=>On(T.element),notify:{onValid:T=>{const O=dt.getValue(T);Pt(T,X6,{color:O})}},validator:{validateOnLoad:!1,validate:T=>{const O=dt.getValue(T);if(O.length===0)return _o.pure(Qt.value(!0));{const N=Je.fromTag("span");on(N,"background-color",O);const F=X(N,"background-color").fold(()=>Qt.error("blah"),W=>Qt.value(O));return _o.pure(F)}}}})]),selectOnFocus:!1}),g=t.label.map(T=>cf(T,s.providers)),h=(T,O)=>{Pt(T,J6,{value:O})},C=(T,O)=>{S.getOpt(T).each(N=>{O==="custom"?c.colorPicker(F=>{F.fold(()=>Tn(N,Q6),W=>{h(N,W),ZO(t.storageKey,W)})},"#ffffff"):O==="remove"?h(N,""):h(N,O)})},S=no(nU({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[sr,Hs,js],onLtr:()=>[Hs,sr,js]},components:[],fetch:M6(c.getColors(t.storageKey),t.storageKey,c.hasCustomColors()),columns:c.getColorCols(t.storageKey),presets:"color",onItemAction:C,context:t.context},s));return Mn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:We([sn("form-field-events",[Me(X6,(T,O)=>{S.getOpt(T).each(N=>{on(N.element,"background-color",O.event.color)}),Pt(T,Rl,{name:t.name})}),Me(J6,(T,O)=>{Mn.getField(T).each(N=>{dt.setValue(N,O.event.value),Ce.getCurrent(T).each(Yt.focus)})}),Me(Q6,(T,O)=>{Mn.getField(T).each(N=>{Ce.getCurrent(T).each(Yt.focus)})})])])})},pd={self:()=>Ce.config({find:A.some}),memento:t=>Ce.config({find:t.getOpt}),childAt:t=>Ce.config({find:s=>Ll(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},sU=Zt([pe("preprocess",Sn),pe("postprocess",Sn)]),rU=(t,s)=>{const c=Va("RepresentingConfigs.memento processors",sU,s);return dt.config({store:{mode:"manual",getValue:l=>{const d=t.get(l),g=dt.getValue(d);return c.postprocess(g)},setValue:(l,d)=>{const g=c.preprocess(d),h=t.get(l);dt.setValue(h,g)}}})},xb=(t,s,c)=>dt.config({store:{mode:"manual",...t.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:c}}),e$=(t,s,c)=>xb(t,l=>s(l.element),(l,d)=>c(l.element,d)),cU=t=>e$(t,xm,Fa),ew=t=>dt.config({store:{mode:"memory",initialValue:t}}),nD=nt("rgb-hex-update"),t$=nt("slider-update"),n$=nt("palette-update"),UG=(t,s)=>{const c=em.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=em.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return em.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:te(0)},components:[c,l],sliderBehaviours:We([Yt.config({})]),onChange:(d,g,h)=>{Wt(d.element,"aria-valuenow",Math.floor(360-h*3.6)),Pt(d,t$,{value:h})}})},aU=nt("valid-input"),oD=nt("invalid-input"),sD=nt("validating-input"),rD="colorcustom.rgb.",lU={isEnabled:wt,setEnabled:ae,immediatelyShow:ae,immediatelyHide:ae},vu=(t,s,c,l,d,g)=>{const h=(ee,ce)=>{const Q=ce.get();ee!==Q.isEnabled()&&(Q.setEnabled(ee),ee?Q.immediatelyShow():Q.immediatelyHide())},C=(ee,ce,Q)=>Xd.config({invalidClass:s("invalid"),notify:{onValidate:ue=>{Pt(ue,sD,{type:ee})},onValid:ue=>{h(!1,Q),Pt(ue,aU,{type:ee,value:dt.getValue(ue)})},onInvalid:ue=>{h(!0,Q),Pt(ue,oD,{type:ee,value:dt.getValue(ue)})}},validator:{validate:ue=>{const de=dt.getValue(ue),ye=ce(de)?Qt.value(!0):Qt.error(t("aria.input.invalid"));return _o.pure(ye)},validateOnLoad:!1}}),S=(ee,ce,Q,ue,de)=>{const ye=Et(lU),Te=t(rD+"range"),rt=Mn.parts.label({dom:{tag:"label"},components:[Yo(Q)]}),Ue=Mn.parts.field({data:de,factory:ag,inputAttributes:{type:"text","aria-label":ue,...ce==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:We([C(ce,ee,ye),Zo.config({}),ms.config({...d({tooltipText:"",onSetup:fn=>{ye.set({isEnabled:()=>ms.isEnabled(fn),setEnabled:_t=>ms.setEnabled(fn,_t),immediatelyShow:()=>ms.immediateOpenClose(fn,!0),immediatelyHide:()=>ms.immediateOpenClose(fn,!1)}),ms.setEnabled(fn,!1)},onShow:(fn,_t)=>{ms.setComponents(fn,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Yo(t(ce==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:fn=>{Xd.isInvalid(fn)&&Xd.run(fn).get(ae)}}),ke=nt("aria-invalid"),mt=no(g("invalid",A.some(ke),"warning")),Ut=no({dom:{tag:"div",classes:[s("invalid-icon")]},components:[mt.asSpec()]}),Dt=[rt,Ue,Ut.asSpec()],Nn=ce!=="hex"?[Mn.parts["aria-descriptor"]({text:Te})]:[],nn=Dt.concat(Nn);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:nn}},T=(ee,ce)=>{const Q=jS(ce);return Q0.getField(ee,"hex").each(ue=>{Yt.isFocused(ue)||dt.setValue(ee,{hex:Q.value})}),Q},O=(ee,ce)=>{const Q=ce.red,ue=ce.green,de=ce.blue;dt.setValue(ee,{red:Q,green:ue,blue:de})},N=no({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),F=(ee,ce)=>{N.getOpt(ee).each(Q=>{on(Q.element,"background-color","#"+ce.value)})};return gu({factory:()=>{const ee={red:Et(A.some(255)),green:Et(A.some(255)),blue:Et(A.some(255)),hex:Et(A.some("ffffff"))},ce=(_t,Fe)=>{const et=bb(Fe);O(_t,et),ye(et)},Q=_t=>ee[_t].get(),ue=(_t,Fe)=>{ee[_t].set(Fe)},de=()=>Q("red").bind(_t=>Q("green").bind(Fe=>Q("blue").map(et=>a1(_t,Fe,et,1)))),ye=_t=>{const Fe=_t.red,et=_t.green,jt=_t.blue;ue("red",A.some(Fe)),ue("green",A.some(et)),ue("blue",A.some(jt))},Te=(_t,Fe)=>{const et=Fe.event;et.type!=="hex"?ue(et.type,A.none()):l(_t)},rt=(_t,Fe)=>{c(_t);const et=i6(Fe);ue("hex",A.some(et.value));const jt=bb(et);O(_t,jt),ye(jt),Pt(_t,nD,{hex:et}),F(_t,et)},Ue=(_t,Fe,et)=>{const jt=parseInt(et,10);ue(Fe,A.some(jt)),de().each(gn=>{const Ft=T(_t,gn);Pt(_t,nD,{hex:Ft}),F(_t,Ft)})},ke=_t=>_t.type==="hex",mt=(_t,Fe)=>{const et=Fe.event;ke(et)?rt(_t,et.value):Ue(_t,et.type,et.value)},Ut=_t=>({label:t(rD+_t+".label"),description:t(rD+_t+".description")}),Dt=Ut("red"),Nn=Ut("green"),nn=Ut("blue"),fn=Ut("hex");return uo(Q0.sketch(_t=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[_t.field("red",Mn.sketch(S(HO,"red",Dt.label,Dt.description,255))),_t.field("green",Mn.sketch(S(HO,"green",Nn.label,Nn.description,255))),_t.field("blue",Mn.sketch(S(HO,"blue",nn.label,nn.description,255))),_t.field("hex",Mn.sketch(S(IO,"hex",fn.label,fn.description,"ffffff"))),N.asSpec()],formBehaviours:We([Xd.config({invalidClass:s("form-invalid")}),sn("rgb-form-events",[Me(aU,mt),Me(oD,Te),Me(sD,Te)])])})),{apis:{updateHex:(_t,Fe)=>{dt.setValue(_t,{hex:Fe.value}),ce(_t,Fe),F(_t,Fe)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(ee,ce,Q)=>{ee.updateHex(ce,Q)}},extraApis:{}})},iU=(t,s)=>{const c=em.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=em.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(T,O)=>{const{width:N,height:F}=T,W=T.getContext("2d");if(W===null)return;W.fillStyle=O,W.fillRect(0,0,N,F);const q=W.createLinearGradient(0,0,N,0);q.addColorStop(0,"rgba(255,255,255,1)"),q.addColorStop(1,"rgba(255,255,255,0)"),W.fillStyle=q,W.fillRect(0,0,N,F);const ee=W.createLinearGradient(0,0,0,F);ee.addColorStop(0,"rgba(0,0,0,0)"),ee.addColorStop(1,"rgba(0,0,0,1)"),W.fillStyle=ee,W.fillRect(0,0,N,F)},g=(T,O)=>{const N=T.components()[0].element.dom,F=pb(O,100,100),W=m6(F);d(N,VO(W))},h=(T,O)=>{const N=FO(bb(O));em.setValue(T,{x:N.saturation,y:100-N.value}),Wt(T.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",N.saturation,N.value]))};return gu({factory:T=>{const O=te({x:0,y:0}),N=(q,ee,ce)=>{Vc(ce)||Wt(q.element,"aria-valuetext",t(["Saturation {0}%, Brightness {1}%",Math.floor(ce.x),Math.floor(100-ce.y)])),Pt(q,n$,{value:ce})},F=(q,ee,ce,Q)=>{d(ce.element.dom,VO(UO))},W=We([Ce.config({find:A.some}),Yt.config({})]);return em.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":t(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:O},rounded:!1,components:[c,l],onChange:N,onInit:F,sliderBehaviours:W})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(T,O,N)=>{g(O,N)},setThumb:(T,O,N)=>{h(O,N)}},extraApis:{}})},o$=(t,s,c,l)=>{const d=h=>{const C=vu(t,s,h.onValidHex,h.onInvalidHex,c,l),S=iU(t,s),T=ke=>(100-ke)/100*360,O=ke=>100-ke/360*100,N={paletteRgba:Et(UO),paletteHue:Et(0)},F=no(UG(t,s)),W=no(S.sketch({})),q=no(C.sketch({})),ee=(ke,mt,Ut)=>{W.getOpt(ke).each(Dt=>{S.setHue(Dt,Ut)})},ce=(ke,mt)=>{q.getOpt(ke).each(Ut=>{C.updateHex(Ut,mt)})},Q=(ke,mt,Ut)=>{F.getOpt(ke).each(Dt=>{em.setValue(Dt,O(Ut))})},ue=(ke,mt)=>{W.getOpt(ke).each(Ut=>{S.setThumb(Ut,mt)})},de=(ke,mt)=>{const Ut=bb(ke);N.paletteRgba.set(Ut),N.paletteHue.set(mt)},ye=(ke,mt,Ut,Dt)=>{de(mt,Ut),ft(Dt,Nn=>{Nn(ke,mt,Ut)})},Te=()=>{const ke=[ce];return(mt,Ut)=>{const Dt=Ut.event.value,Nn=N.paletteHue.get(),nn=pb(Nn,Dt.x,100-Dt.y),fn=g6(nn);ye(mt,fn,Nn,ke)}},rt=()=>{const ke=[ee,ce];return(mt,Ut)=>{const Dt=T(Ut.event.value),Nn=N.paletteRgba.get(),nn=FO(Nn),fn=pb(Dt,nn.saturation,nn.value),_t=g6(fn);ye(mt,_t,Dt,ke)}},Ue=()=>{const ke=[ee,Q,ue];return(mt,Ut)=>{const Dt=Ut.event.hex,Nn=fV(Dt);ye(mt,Dt,Nn.hue,ke)}};return{uid:h.uid,dom:h.dom,components:[W.asSpec(),F.asSpec(),q.asSpec()],behaviours:We([sn("colour-picker-events",[Me(nD,Ue()),Me(n$,Te()),Me(t$,rt())]),Ce.config({find:ke=>q.getOpt(ke)}),kt.config({mode:"acyclic"})])}};return gu({name:"ColourPicker",configFields:[$e("dom"),pe("onValidHex",ae),pe("onInvalidHex",ae)],factory:d})},s$={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},uU=t=>s=>rn(s)?t.translate(s$[s]):t.translate(s),tw=(t,s,c)=>{const l=T=>"tox-"+T,d=(T,O,N=T,F=T)=>Gl(N,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+T],attributes:{title:s.translate(F),"aria-live":"polite",...O.fold(()=>({}),W=>({id:W}))}},s.icons),g=o$(uU(s),l,s.tooltips.getConfig,d),h=T=>{Pt(T,dg,{name:"hex-valid",value:!0})},C=T=>{Pt(T,dg,{name:"hex-valid",value:!1})},S=no(g.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[S.asSpec()],behaviours:We([xb(c,T=>{const O=S.get(T);return Ce.getCurrent(O).bind(W=>dt.getValue(W).hex).map(W=>"#"+uc(W,"#")).getOr("")},(T,O)=>{const N=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,F=A.from(N.exec(O)).bind(ee=>ts(ee,1)),W=S.get(T);Ce.getCurrent(W).fold(()=>{console.log("Can not find form")},ee=>{dt.setValue(ee,{hex:F.getOr("")}),Q0.getField(ee,"hex").each(ce=>{Tn(ce,$m())})})}),pd.self()])}};var dU=tinymce.util.Tools.resolve("tinymce.Resource");const nw=t=>In(t,"init"),mU=t=>{const s=dn(),c=no({dom:{tag:t.tag}}),l=dn(),d=!nw(t)&&t.onFocus.isSome()?[Yt.config({onFocus:g=>{t.onFocus.each(h=>{h(g.element.dom)})}}),Zo.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:We([sn("custom-editor-events",[Wo(g=>{c.getOpt(g).each(h=>{(nw(t)?t.init(h.element.dom):dU.load(t.scriptId,t.scriptUrl).then(C=>C(h.element.dom,t.settings))).then(C=>{l.on(S=>{C.setValue(S)}),l.clear(),s.set(C)})})})]),xb(A.none(),()=>s.get().fold(()=>l.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>l.set(h),C=>C.setValue(h))}),pd.self()].concat(d)),components:[c.asSpec()]}};var rm=tinymce.util.Tools.resolve("tinymce.util.Tools");const cD=nt("browse.files.event"),fU=(t,s)=>{const c=rm.explode(s.getOption("images_file_types")),l=d=>br(c,g=>Eo(d.name.toLowerCase(),`.${g.toLowerCase()}`));return ho(zr(t),l)},bd=(t,s,c)=>{const l=(F,W)=>{W.stop()},d=F=>(W,q)=>{ft(F,ee=>{ee(W,q)})},g=(F,W)=>{var q;if(!Ct.isDisabled(F)){const ee=W.event.raw;Pt(F,cD,{files:(q=ee.dataTransfer)===null||q===void 0?void 0:q.files})}},h=(F,W)=>{const q=W.event.raw.target;Pt(F,cD,{files:q.files})},C=(F,W)=>{W&&(dt.setValue(F,fU(W,s)),Pt(F,Rl,{name:t.name}))},S=no({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:We([sn("input-file-events",[jf(Nf()),jf(Pf())])])}),T=t.label.map(F=>cf(F,s)),O=Mn.parts.field({factory:Fc,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Yo(s.translate("Browse for an image")),S.asSpec()],action:F=>{S.get(F).element.dom.click()},buttonBehaviours:We([pd.self(),ew(c.getOr([])),Zo.config({}),$i.button(()=>s.checkUiComponentContext(t.context).shouldDisable),cr(()=>s.checkUiComponentContext(t.context))])}),N={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:We([Ct.config({disabled:()=>s.checkUiComponentContext(t.context).shouldDisable}),cr(()=>s.checkUiComponentContext(t.context)),xn.config({toggleClass:"dragenter",toggleOnExecute:!1}),sn("dropzone-events",[Me("dragenter",d([l,xn.toggle])),Me("dragleave",d([l,xn.toggle])),Me("dragover",l),Me("drop",d([l,g])),Me(Mf(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Yo(s.translate("Drop an image here"))]},O]}]};return Xy(T,N,["tox-form__group--stretched"],[sn("handle-files",[Me(cD,(F,W)=>{Mn.getField(F).each(q=>{C(q,W.event.files)})})])])},gU=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Pe(t.items,s.interpreter)}),Jy=nt("alloy-fake-before-tabstop"),u4=nt("alloy-fake-after-tabstop"),aD=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:We([Yt.config({ignore:!0}),Zo.config({})])}),r$=(t,s)=>({dom:{tag:"div",classes:["tox-navobj",...t.getOr([])]},components:[aD([Jy]),s,aD([u4])],behaviours:We([pd.childAt(1)])}),lD=(t,s)=>{Pt(t,ec(),{raw:{which:9,shiftKey:s}})},hU=(t,s)=>{const c=s.element;Jr(c,Jy)?lD(t,!0):Jr(c,u4)&&lD(t,!1)},ow=t=>Om(t,["."+Jy,"."+u4].join(","),bn),d4=nt("update-dialog"),c$=nt("update-title"),a$=nt("update-body"),l$=nt("update-footer"),i$=nt("body-send-message"),sw=nt("dialog-focus-shifted"),m4=Lo().browser,Qy=m4.isSafari(),pU=m4.isFirefox(),iD=Qy||pU,bU=m4.isChromium(),vU=({scrollTop:t,scrollHeight:s,clientHeight:c})=>Math.ceil(t)+c>=s,uD=(t,s)=>t.scrollTo(0,s==="bottom"?99999999:s),u$=(t,s)=>{const c=t.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!bU&&!Qy||Po(c)&&(c.scrollTop!==0||Math.abs(c.scrollHeight-c.clientHeight)>1))?c:t.documentElement)},dD=(t,s,c)=>{const l=t.dom;A.from(l.contentDocument).fold(c,d=>{let g=0;const h=u$(d,s).map(S=>(g=S.scrollTop,S)).forall(vU),C=()=>{const S=l.contentWindow;Po(S)&&(h?uD(S,"bottom"):!h&&iD&&g!==0&&uD(S,g))};Qy&&l.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),Qy||C()})},yU=Sr(iD,Qy?500:200).map(t=>yg(dD,t)),CU=(t,s)=>{const c=Et(t.getOr(""));return{getValue:l=>c.get(),setValue:(l,d)=>{if(c.get()!==d){const g=l.element,h=()=>Wt(g,"srcdoc",d);s?yU.fold(te(dD),C=>C.throttle)(g,d,h):h()}c.set(d)}}},d$=(t,s,c)=>{const l="tox-dialog__iframe",d=t.transparent?[]:[`${l}--opaque`],g=t.border?["tox-navobj-bordered"]:[],h={...t.label.map(N=>({title:N})).getOr({}),...c.map(N=>({srcdoc:N})).getOr({}),...t.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=CU(c,t.streamContent),S=t.label.map(N=>cf(N,s)),T=N=>r$(A.from(g),{uid:N.uid,dom:{tag:"iframe",attributes:h,classes:[l,...d]},behaviours:We([Zo.config({}),Yt.config({}),xb(c,C.getValue,C.setValue),Al.config({channels:{[sw]:{onReceive:(F,W)=>{W.newFocus.each(q=>{On(F.element).each(ee=>{(lo(F.element,q)?hs:Ao)(ee,"tox-navobj-bordered-focus")})})}}}})])}),O=Mn.parts.field({factory:{sketch:T}});return Xy(S,O,["tox-form__group--stretched"],[])},SU=(t,s,c,l,d)=>{const g=c*d,h=l*d,C=Math.max(0,t/2-g/2),S=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},wU=(t,s,c)=>{const l=_s(t),d=wn(t);return Math.min(l/s,d/c,1)},xU=(t,s)=>{const c=Et(s.getOr({url:""})),l=no({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=no({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(S,T)=>{const O={url:T.url};T.zoom.each(F=>O.zoom=F),T.cachedWidth.each(F=>O.cachedWidth=F),T.cachedHeight.each(F=>O.cachedHeight=F),c.set(O);const N=()=>{const{cachedWidth:F,cachedHeight:W,zoom:q}=O;if(!Lr(F)&&!Lr(W)){if(Lr(q)){const ce=wU(S.element,F,W);O.zoom=ce}const ee=SU(_s(S.element),wn(S.element),F,W,O.zoom);d.getOpt(S).each(ce=>{Qs(ce.element,ee)})}};l.getOpt(S).each(F=>{const W=F.element;T.url!==Js(W,"src")&&(Wt(W,"src",T.url),Ao(S.element,"tox-imagepreview__loaded")),N(),dr(W).then(q=>{S.getSystem().isConnected()&&(hs(S.element,"tox-imagepreview__loaded"),O.cachedWidth=q.dom.naturalWidth,O.cachedHeight=q.dom.naturalHeight,N())})})},h={};t.height.each(S=>h.height=S);const C=s.map(S=>({url:S.url,zoom:A.from(S.zoom),cachedWidth:A.from(S.cachedWidth),cachedHeight:A.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:We([pd.self(),xb(C,()=>c.get(),g)])}},EU=(t,s,c)=>{const l="tox-label",d=t.align==="center"?[`${l}--center`]:[],g=t.align==="end"?[`${l}--end`]:[],h=no({dom:{tag:"label",classes:[l,...d,...g]},components:[Yo(s.providers.translate(t.label))]}),C=Pe(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:We([pd.self(),an.config({}),cU(A.none()),kt.config({mode:"acyclic"}),sn("label",[Wo(S=>{t.for.each(T=>{c(T).each(O=>{h.getOpt(S).each(N=>{var F;const W=(F=Js(O.element,"id"))!==null&&F!==void 0?F:nt("form-field");Wt(O.element,"id",W),Wt(N.element,"for",W)})})})})])])}},mD=nt("toolbar.button.execute"),TU=t=>Zm((s,c)=>{WS(t,s)(l=>{Pt(s,mD,{buttonApi:l}),t.onAction(l)})}),i1=nt("common-button-display-events"),m$={[Wl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[bi()]:["toolbar-button-events",i1],[Vd()]:["toolbar-button-events","dropdown-events","tooltipping"],[wa()]:["focusing","alloy.base.behaviour",i1]},fD=t=>on(t.element,"width",M(t.element,"width")),f$=(t,s,c)=>Gl(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),f4=(t,s)=>f$(t,s,[]),af=(t,s)=>f$(t,s,[an.config({})]),g4=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Yo(c.translate(t))],behaviours:We([an.config({})])}),vd=nt("update-menu-text"),Eb=nt("update-menu-icon"),gD=nt("update-tooltip-text"),hD=(t,s,c,l)=>{const d=Et(ae),g=Et(t.tooltip),h=t.text.map(ce=>no(g4(ce,s,c.providers))),C=t.icon.map(ce=>no(af(ce,c.providers.icons))),S=(ce,Q)=>{const ue=dt.getValue(ce);return Yt.focus(ue),Pt(ue,"keydown",{raw:Q.event.raw}),hu.close(ue),A.some(!0)},T=t.role.fold(()=>({}),ce=>({role:ce})),O=A.from(t.listRole).map(ce=>({listRole:ce})).getOr({}),N=t.ariaLabel.fold(()=>({}),ce=>({"aria-label":c.providers.translate(ce)})),F=Gl("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons),W=nt("common-button-display-events"),q="dropdown-events";return no(hu.sketch({...t.uid?{uid:t.uid}:{},...T,...O,dom:{tag:"button",classes:[s,`${s}--select`].concat(Pe(t.classes,ce=>`${s}--${ce}`)),attributes:{...N,...Po(l)?{"data-mce-name":l}:{}}},components:Wy([C.map(ce=>ce.asSpec()),h.map(ce=>ce.asSpec()),A.some(F)]),matchWidth:!0,useMinWidth:!0,onOpen:(ce,Q,ue)=>{t.searchable&&JO(ue)},dropdownBehaviours:We([...t.dropdownBehaviours,$i.button(()=>t.disabled||c.providers.checkUiComponentContext(t.context).shouldDisable),cr(()=>c.providers.checkUiComponentContext(t.context)),K0.config({}),an.config({}),...t.tooltip.map(ce=>ms.config(c.providers.tooltips.getConfig({tooltipText:c.providers.translate(ce),onShow:Q=>{if(Ur(g.get(),t.tooltip,(ue,de)=>de!==ue).getOr(!1)){const ue=c.providers.translate(g.get().getOr(""));ms.setComponents(Q,c.providers.tooltips.getComponents({tooltipText:ue}))}}}))).toArray(),sn(q,[sm(t,d),hd(t,d)]),sn(W,[Wo((ce,Q)=>{t.listRole!=="listbox"&&fD(ce)})]),sn("update-dropdown-width-variable",[Me(Ju(),(ce,Q)=>hu.close(ce))]),sn("menubutton-update-display-text",[Me(vd,(ce,Q)=>{h.bind(ue=>ue.getOpt(ce)).each(ue=>{an.set(ue,[Yo(c.providers.translate(Q.event.text))])})}),Me(Eb,(ce,Q)=>{C.bind(ue=>ue.getOpt(ce)).each(ue=>{an.set(ue,[af(Q.event.icon,c.providers.icons)])})}),Me(gD,(ce,Q)=>{const ue=c.providers.translate(Q.event.text);Wt(ce.element,"aria-label",ue),g.set(A.some(Q.event.text))})])]),eventOrder:uo(m$,{[wa()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[bi()]:["toolbar-button-events",ms.name(),q,W]}),sandboxBehaviours:We([kt.config({mode:"special",onLeft:S,onRight:S}),sn("dropdown-sandbox-events",[Me(BT,(ce,Q)=>{UV(ce),Q.stop()}),Me(lb,(ce,Q)=>{WV(ce,Q),Q.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...NT(!1,t.columns,t.presets),fakeFocus:t.searchable,...t.listRole==="listbox"?{}:{onHighlightItem:Sb,onCollapseMenu:(ce,Q,ue)=>{Gn.getHighlighted(ue).each(de=>{Sb(ce,ue,de)})},onDehighlightItem:YS}}},getAnchorOverrides:()=>({maxHeightFunction:(ce,Q)=>{lC()(ce,Q-10)}}),fetch:ce=>_o.nu(Rn(t.fetch,ce))})).asSpec()},kU=t=>rn(t),g$=t=>t.type==="separator",h$=t=>In(t,"getSubmenuItems"),_U={type:"separator"},AU=(t,s)=>{const c=xo(t,(l,d)=>kU(d)?d===""?l:d==="|"?l.length>0&&!g$(l[l.length-1])?l.concat([_U]):l:In(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return c.length>0&&g$(c[c.length-1])&&c.pop(),c},pD=(t,s)=>{const c=t.getSubmenuItems(),l=p$(c,s),d=uo(l.menus,{[t.value]:l.items}),g=uo(l.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},OU=t=>{const s=at(t,"value").getOrThunk(()=>nt("generated-menu-item"));return uo({value:s},t)},p$=(t,s)=>{const c=AU(rn(t)?t.split(" "):t,s);return ao(c,(l,d)=>{if(h$(d)){const g=OU(d),h=pD(g,s);return{menus:uo(l.menus,h.menus),items:[h.item,...l.items],expansions:uo(l.expansions,h.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},b$=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),DU=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),Tb=(t,s,c,l)=>{const d=nt("primary-menu"),g=p$(t,c.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=b$(l),C=Yy(d,g.items,s,c,l.isHorizontalMenu,h),S=DU(l),T=Io(g.menus,(N,F)=>Yy(F,N,s,c,!1,S)),O=uo(T,Gg(d,C));return A.from(J0.tieredData(d,O,g.expansions))},h4=t=>!In(t,"items"),bD="data-value",v$=(t,s,c,l,d)=>Pe(c,g=>h4(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===l,onAction:()=>{dt.setValue(t,g.value),Pt(t,Rl,{name:s}),Yt.focus(t)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>v$(t,s,g.items,l,d)}),vD=(t,s)=>An(t,c=>h4(c)?Sr(c.value===s,c):vD(c.items,s)),RU=(t,s,c)=>{const l=br(t.items,T=>!h4(T)),d=s.shared.providers,g=c.bind(T=>vD(t.items,T)).orThunk(()=>Hr(t.items).filter(h4)),h=t.label.map(T=>cf(T,d)),C=Mn.parts.field({dom:{},factory:{sketch:T=>hD({context:t.context,uid:T.uid,text:g.map(O=>O.text),icon:A.none(),tooltip:A.none(),role:Sr(!l,"combobox"),...l?{}:{listRole:"listbox"},ariaLabel:t.label,fetch:(O,N)=>{const F=v$(O,t.name,t.items,dt.getValue(O),l);N(Tb(F,fd.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:te(ae),getApi:te({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Zo.config({}),xb(g.map(O=>O.value),O=>Js(O.element,bD),(O,N)=>{vD(t.items,N).each(F=>{Wt(O.element,bD,F.value),Pt(O,vd,{text:F.text})})})]},"tox-listbox",s.shared)}}),S={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return Mn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:qt([h.toArray(),[S]]),fieldBehaviours:We([Ct.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:T=>{Mn.getField(T).each(Ct.disable)},onEnabled:T=>{Mn.getField(T).each(Ct.enable)}})])})},y$=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Pe(t.items,s.shared.interpreter)}),MU=(t,s,c)=>{const l=Pe(t.items,S=>({text:s.translate(S.text),value:S.value})),d=t.label.map(S=>cf(S,s)),g=Mn.parts.field({dom:{},...c.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:l,factory:eb,selectBehaviours:We([Ct.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),Zo.config({}),sn("selectbox-change",[Me(Mf(),(S,T)=>{Pt(S,Rl,{name:t.name})})])])}),h=t.size>1?A.none():A.some(Gl("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:qt([[g],h.toArray()])};return Mn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:qt([d.toArray(),[C]]),fieldBehaviours:We([Ct.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{Mn.getField(S).each(Ct.disable)},onEnabled:S=>{Mn.getField(S).each(Ct.enable)}}),cr(()=>s.checkUiComponentContext(t.context))])})},C$=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=d=>d in s?s[d]:1;let l=t.value.toFixed(c(t.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+t.unit},p4=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const l=parseFloat(c[1]),d=c[2];return Qt.value({value:l,unit:d})}else return Qt.error(t)},b4=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>In(c,d);return t.unit===s?A.some(t.value):l(t.unit)&&l(s)?c[t.unit]===c[s]?A.some(t.value):A.some(t.value/c[t.unit]*c[s]):A.none()},e2=t=>A.none(),NU=(t,s)=>c=>b4(c,s).map(l=>({value:l*t,unit:s})),S$=(t,s)=>{const c=p4(t).toOptional(),l=p4(s).toOptional();return Ur(c,l,(d,g)=>b4(d,g.unit).map(h=>g.value/h).map(h=>NU(h,g.unit)).getOr(e2)).getOr(e2)},BU=(t,s)=>{let c=e2;const l=nt("ratio-event"),d=ee=>Gl(ee,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ee]},s.icons),g=()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,h=cr(()=>s.checkUiComponentContext(t.context)),C=t.label.getOr("Constrain proportions"),S=s.translate(C),T=vn.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":S,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:We([Ct.config({disabled:g}),h,Zo.config({}),ms.config(s.tooltips.getConfig({tooltipText:S}))])}),O=ee=>({dom:{tag:"div",classes:["tox-form__group"]},components:ee}),N=ee=>Mn.parts.field({factory:ag,inputClasses:["tox-textfield"],inputBehaviours:We([Ct.config({disabled:g}),h,Zo.config({}),sn("size-input-events",[Me(Xc(),(ce,Q)=>{Pt(ce,l,{isField1:ee})}),Me(Mf(),(ce,Q)=>{Pt(ce,Rl,{name:t.name})})])]),selectOnFocus:!1}),F=ee=>({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(ee))]}),W=vn.parts.field1(O([Mn.parts.label(F("Width")),N(!0)])),q=vn.parts.field2(O([Mn.parts.label(F("Height")),N(!1)]));return vn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[W,q,O([F(Ru),T])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(ee,ce,Q)=>{p4(dt.getValue(ee)).each(ue=>{c(ue).each(de=>{dt.setValue(ce,C$(de))})})},coupledFieldBehaviours:We([Ct.config({disabled:g,onDisabled:ee=>{vn.getField1(ee).bind(Mn.getField).each(Ct.disable),vn.getField2(ee).bind(Mn.getField).each(Ct.disable),vn.getLock(ee).each(Ct.disable)},onEnabled:ee=>{vn.getField1(ee).bind(Mn.getField).each(Ct.enable),vn.getField2(ee).bind(Mn.getField).each(Ct.enable),vn.getLock(ee).each(Ct.enable)}}),cr(()=>s.checkUiComponentContext("mode:design")),sn("size-input-events2",[Me(l,(ee,ce)=>{const Q=ce.event.isField1,ue=Q?vn.getField1(ee):vn.getField2(ee),de=Q?vn.getField2(ee):vn.getField1(ee),ye=ue.map(dt.getValue).getOr(""),Te=de.map(dt.getValue).getOr("");c=S$(ye,Te)})])])})},PU=(t,s,c)=>{const l=em.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(t.label))]}),d=em.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=em.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return em.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:te(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[l,d,g],sliderBehaviours:We([pd.self(),Yt.config({})]),onChoose:(h,C,S)=>{Pt(h,Rl,{name:t.name,value:S})},onChange:(h,C,S)=>{Pt(h,Rl,{name:t.name,value:S})}})},$U=(t,s)=>{const c=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),l=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Pe(C,c)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Pe(C,d)}),h=C=>({dom:{tag:"tbody"},components:Pe(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(t.header),h(t.cells)],behaviours:We([Zo.config({}),Yt.config({})])}},w$=(t,s)=>{const c=t.label.map(W=>cf(W,s)),l=[Ct.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable}),cr(()=>s.checkUiComponentContext(t.context)),kt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:W=>(Tn(W,wb),A.some(!0))}),sn("textfield-change",[Me($m(),(W,q)=>{Pt(W,Rl,{name:t.name})}),Me($2(),(W,q)=>{Pt(W,Rl,{name:t.name})})]),Zo.config({})],d=t.validation.map(W=>Xd.config({getRoot:q=>On(q.element),invalidClass:"tox-invalid",validator:{validate:q=>{const ee=dt.getValue(q),ce=W.validator(ee);return _o.pure(ce===!0?Qt.value(ee):Qt.error(ce))},validateOnLoad:W.validateOnLoad}})).toArray(),g=t.placeholder.fold(te({}),W=>({placeholder:s.translate(W)})),h=t.inputMode.fold(te({}),W=>({inputmode:W})),C={...g,...h,"data-mce-name":t.name},S=Mn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(W=>({data:W})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:We(qt([l,d])),selectOnFocus:!1,factory:ag}),T=t.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[S]}:S,N=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),F=[Ct.config({disabled:()=>t.disabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:W=>{Mn.getField(W).each(Ct.disable)},onEnabled:W=>{Mn.getField(W).each(Ct.enable)}}),cr(()=>s.checkUiComponentContext(t.context))];return Xy(c,T,N,F)},IU=(t,s,c)=>w$({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:c,context:t.context},s),FU=(t,s,c)=>w$({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:c,context:t.context},s),x$=t=>({isEnabled:()=>!Ct.isDisabled(t),setEnabled:s=>Ct.set(t,!s),setActive:s=>{const c=t.element;s?(hs(c,"tox-tbtn--enabled"),Wt(c,"aria-pressed",!0)):(Ao(c,"tox-tbtn--enabled"),Ln(c,"aria-pressed"))},isActive:()=>Jr(t.element,"tox-tbtn--enabled"),setTooltip:s=>{Pt(t,gD,{text:s})},setText:s=>{Pt(t,vd,{text:s})},setIcon:s=>Pt(t,Eb,{icon:s})}),t2=(t,s,c,l,d=!0,g)=>{const h=t.buttonType==="bordered"?["bordered"]:[];return hD({text:t.text,icon:t.icon,tooltip:t.tooltip,ariaLabel:t.tooltip,searchable:t.search.isSome(),role:l,fetch:(C,S)=>{const T={pattern:t.search.isSome()?GV(C):""};t.fetch(O=>{S(Tb(O,fd.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},T,x$(C))},onSetup:t.onSetup,getApi:C=>x$(C),columns:1,presets:"normal",classes:h,dropdownBehaviours:[...d?[Zo.config({})]:[]],context:t.context},s,c.shared,g)},v4=(t,s,c)=>{const l=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),c.shared.getSink().each(S=>{s().getOpt(S).each(T=>{ro(T.element),Pt(T,dg,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(Pe(t,h=>{const C=h.text.fold(()=>({}),S=>({text:S}));return{type:h.type,active:!1,...C,context:h.context,onAction:l(h),onSetup:d(h)}}))}},y4=t=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":t}},components:[Yo(t)]}),yD=(t,s,c)=>{t.customStateIcon.each(l=>s.push(E$(l,c.shared.providers.icons,t.customStateIconTooltip.fold(()=>[],d=>[ms.config(c.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},Bh=nt("leaf-label-event-id"),C4=({leaf:t,onLeafAction:s,visible:c,treeId:l,selectedId:d,backstage:g})=>{const h=t.menu.map(S=>t2(S,"tox-mbtn",g,A.none(),c)),C=[y4(t.title)];return yD(t,C,g),h.each(S=>C.push(S)),Fc.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(c?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:S=>{s(t.id),S.getSystem().broadcastOn([`update-active-item-${l}`],{value:t.id})},eventOrder:{[ec()]:[Bh,"keying"]},buttonBehaviours:We([...c?[Zo.config({})]:[],xn.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Al.config({channels:{[`update-active-item-${l}`]:{onReceive:(S,T)=>{(T.value===t.id?xn.on:xn.off)(S)}}}}),sn(Bh,[Wo((S,T)=>{d.each(O=>{(O===t.id?xn.on:xn.off)(S)})}),Me(ec(),(S,T)=>{const O=T.event.raw.code==="ArrowLeft",N=T.event.raw.code==="ArrowRight";O?(Vl(S.element,".tox-tree--directory").each(F=>{S.getSystem().getByDom(F).each(W=>{Ca(F,".tox-tree--directory__label").each(q=>{W.getSystem().getByDom(q).each(Yt.focus)})})}),T.stop()):N&&T.stop()})])])})},E$=(t,s,c,l,d)=>Gl(t,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(l||[]),behaviours:c,attributes:d},s),LU=(t,s)=>E$(t,s,[]),T$=nt("directory-label-event-id"),HU=({directory:t,visible:s,noChildren:c,backstage:l})=>{const d=t.menu.map(C=>t2(C,"tox-mbtn",l,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[LU("chevron-right",l.shared.providers.icons)]},y4(t.title)];yD(t,g,l),d.each(C=>{g.push(C)});const h=C=>{Vl(C.element,".tox-tree--directory").each(S=>{C.getSystem().getByDom(S).each(T=>{const O=!xn.isOn(T);xn.toggle(T),Pt(C,"expand-tree-node",{expanded:O,node:t.id})})})};return Fc.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[ec()]:[T$,"keying"]},buttonBehaviours:We([...s?[Zo.config({})]:[],sn(T$,[Me(ec(),(C,S)=>{const T=S.event.raw.code==="ArrowRight",O=S.event.raw.code==="ArrowLeft";T&&c&&S.stop(),(T||O)&&Vl(C.element,".tox-tree--directory").each(N=>{C.getSystem().getByDom(N).each(F=>{!xn.isOn(F)&&T||xn.isOn(F)&&O?(h(C),S.stop()):O&&!xn.isOn(F)&&(Vl(F.element,".tox-tree--directory").each(W=>{Ca(W,".tox-tree--directory__label").each(q=>{F.getSystem().getByDom(q).each(Yt.focus)})}),S.stop())})})})])])})},zU=({children:t,onLeafAction:s,visible:c,treeId:l,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map(C=>C.type==="leaf"?C4({leaf:C,selectedId:g,onLeafAction:s,visible:c,treeId:l,backstage:h}):CD({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:c,treeId:l,backstage:h})),behaviours:We([Ga.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:c}),an.config({})])}),VU=nt("directory-event-id"),CD=({directory:t,onLeafAction:s,labelTabstopping:c,treeId:l,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=t,S=Et(g),T=N=>C.map(F=>F.type==="leaf"?C4({leaf:F,selectedId:h,onLeafAction:s,visible:N,treeId:l,backstage:d}):CD({directory:F,expandedIds:S.get(),selectedId:h,onLeafAction:s,labelTabstopping:N,treeId:l,backstage:d})),O=g.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[HU({directory:t,visible:c,noChildren:t.children.length===0,backstage:d}),zU({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:O,treeId:l,backstage:d})],behaviours:We([sn(VU,[Wo((N,F)=>{xn.set(N,O)}),Me("expand-tree-node",(N,F)=>{const{expanded:W,node:q}=F.event;S.set(W?[...S.get(),q]:S.get().filter(ee=>ee!==q))})]),xn.config({...t.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(N,F)=>{const W=N.components()[1],q=T(F);F?Ga.grow(W):Ga.shrink(W),an.set(W,q)}})])}},k$=nt("tree-event-id"),UU=(t,s)=>{const c=t.onLeafAction.getOr(ae),l=t.onToggleExpand.getOr(ae),d=t.defaultExpandedIds,g=Et(d),h=Et(t.defaultSelectedId),C=nt("tree-id"),S=(T,O)=>t.items.map(N=>N.type==="leaf"?C4({leaf:N,selectedId:T,onLeafAction:c,visible:!0,treeId:C,backstage:s}):CD({directory:N,selectedId:T,onLeafAction:c,expandedIds:O,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:S(h.get(),g.get()),behaviours:We([kt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),sn(k$,[Me("expand-tree-node",(T,O)=>{const{expanded:N,node:F}=O.event;g.set(N?[...g.get(),F]:g.get().filter(W=>W!==F)),l(g.get(),{expanded:N,node:F})})]),Al.config({channels:{[`update-active-item-${C}`]:{onReceive:(T,O)=>{h.set(A.some(O.value)),an.set(T,S(A.some(O.value),g.get()))}}}}),an.config({})])}},S4=(t,s,c=[],l,d,g,h)=>{const C=s.fold(()=>({}),O=>({action:O})),S={buttonBehaviours:We([$i.item(()=>!t.enabled||h.checkUiComponentContext(t.context).shouldDisable),cr(()=>h.checkUiComponentContext(t.context)),Zo.config({}),...g.map(O=>ms.config(h.tooltips.getConfig({tooltipText:h.translate(O)}))).toArray(),sn("button press",[ix("click")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},T=uo(S,{dom:l});return uo(T,{components:d})},SD=(t,s,c,l=[],d)=>{const g=t.tooltip.map(T=>({"aria-label":c.translate(T)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=t.icon.map(T=>f4(T,c.icons)),S=Wy([C]);return S4(t,s,l,h,S,t.tooltip,c)},wD=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},_$=(t,s,c,l=[],d=[])=>{const g=c.translate(t.text),h=t.icon.map(W=>f4(W,c.icons)),C=[h.getOrThunk(()=>Yo(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),N={tag:"button",classes:[...wD(S),...h.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":t.text}},F=t.icon.map(te(g));return S4(t,s,l,N,C,F,c)},A$=(t,s,c,l=[],d=[])=>{const g=_$(t,A.some(s),c,l,d);return Fc.sketch(g)},O$=(t,s)=>c=>{s==="custom"?Pt(c,dg,{name:t,value:{}}):s==="submit"?Tn(c,wb):s==="cancel"?Tn(c,l1):console.error("Unknown button type: ",s)},WU=(t,s)=>s==="menu",ZU=(t,s)=>s==="custom"||s==="cancel"||s==="submit",D$=(t,s)=>s==="togglebutton",R$=(t,s,c)=>{var l,d;const g=t.icon.map(de=>af(de,s.icons)).map(no),h=de=>{Pt(de,dg,{name:t.name,value:{setIcon:ye=>{g.map(Te=>Te.getOpt(de).each(rt=>{an.set(rt,[af(ye,s.icons)])}))}}})},C=t.buttonType.getOr(t.primary?"primary":"secondary"),S={...t,name:(l=t.name)!==null&&l!==void 0?l:"",tooltip:t.tooltip,enabled:(d=t.enabled)!==null&&d!==void 0?d:!1},T=S.tooltip.or(t.text).map(de=>({"aria-label":s.translate(de)})).getOr({}),O=wD(C??"secondary"),N=t.icon.isSome()&&t.text.isSome(),F={tag:"button",classes:[...O.concat(t.icon.isSome()?["tox-button--icon"]:[]),...t.active?["tox-button--enabled"]:[],...N?["tox-button--icon-and-text"]:[]],attributes:{...T,...Po(c)?{"data-mce-name":c}:{}}},W=[],q=s.translate(t.text.getOr("")),ee=Yo(q),Q=[...Wy([g.map(de=>de.asSpec())]),...t.text.isSome()?[ee]:[]],ue=S4(S,A.some(h),W,F,Q,t.tooltip,s);return Fc.sketch(ue)},rw=(t,s,c)=>{if(WU(t,s)){const l=()=>h,d=t,g={...t,buttonType:"default",type:"menubutton",search:A.none(),onSetup:C=>(C.setEnabled(t.enabled),ae),fetch:v4(d.items,l,c)},h=no(t2(g,"tox-tbtn",c,A.none(),!0,t.text.or(t.tooltip).getOrUndefined()));return h.asSpec()}else if(ZU(t,s)){const l=O$(t.name,s),d={...t,context:s==="cancel"?"any":t.context,borderless:!1};return A$(d,l,c.shared.providers,[])}else{if(D$(t,s))return R$(t,c.shared.providers,t.text.or(t.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},jU=(t,s)=>{const c=O$(t.name,"custom");return q6(A.none(),Mn.parts.field({factory:Fc,..._$(t,A.some(c),s,[ew(""),pd.self()])}))},M$={type:"separator"},GU=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:ae}),xD=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:ae}),qU=t=>Pe(t,GU),N$=(t,s)=>ho(s,c=>c.type===t),B$=(t,s)=>qU(N$(t,s)),P$=t=>B$("header",t.targets),KU=t=>B$("anchor",t.targets),YU=t=>A.from(t.anchorTop).map(s=>xD("<top>",s)).toArray(),XU=t=>A.from(t.anchorBottom).map(s=>xD("<bottom>",s)).toArray(),JU=t=>Pe(t,s=>xD(s,s)),QU=t=>xo(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(M$,c),[]),ED=(t,s)=>{const c=t.toLowerCase();return ho(s,l=>{var d;const g=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,h=(d=l.value)!==null&&d!==void 0?d:"";return No(g.toLowerCase(),c)||No(h.toLowerCase(),c)})},eW=(t,s,c)=>{var l,d;const g=dt.getValue(s),h=(d=(l=g==null?void 0:g.meta)===null||l===void 0?void 0:l.text)!==null&&d!==void 0?d:g.value;return c.getLinkInformation().fold(()=>[],S=>{const T=ED(h,JU(c.getHistory(t)));return t==="file"?QU([T,ED(h,P$(S)),ED(h,qt([YU(S),KU(S),XU(S)]))]):T})},TD=nt("aria-invalid"),tW=(t,s,c,l)=>{const d=s.shared.providers,g=ue=>{const de=dt.getValue(ue);c.addToHistory(de.value,t.filetype)},h={...l.map(ue=>({initialData:ue})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":TD,type:"url"},minChars:0,responseTime:0,fetch:ue=>{const de=eW(t.filetype,ue,c),ye=Tb(de,fd.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return _o.pure(ye)},getHotspot:ue=>q.getOpt(ue),onSetValue:(ue,de)=>{ue.hasConfigured(Xd)&&Xd.run(ue).get(ae)},typeaheadBehaviours:We([...c.getValidationHandler().map(ue=>Xd.config({getRoot:de=>On(de.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(de,ye)=>{O.getOpt(de).each(Te=>{Wt(Te.element,"title",d.translate(ye))})}},validator:{validate:de=>{const ye=dt.getValue(de);return Au.nu(Te=>{ue({type:t.filetype,url:ye.value},rt=>{if(rt.status==="invalid"){const Ue=Qt.error(rt.message);Te(Ue)}else{const Ue=Qt.value(rt.message);Te(Ue)}})})},validateOnLoad:!1}})).toArray(),Ct.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable}),Zo.config({}),sn("urlinput-events",[Me($m(),ue=>{const de=Sa(ue.element),ye=de.trim();ye!==de&&Fs(ue.element,ye),t.filetype==="file"&&Pt(ue,Rl,{name:t.name})}),Me(Mf(),ue=>{Pt(ue,Rl,{name:t.name}),g(ue)}),Me($2(),ue=>{Pt(ue,Rl,{name:t.name}),g(ue)})])]),eventOrder:{[$m()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:ue=>ue.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:NT(!1,1,"normal")},onExecute:(ue,de,ye)=>{Pt(de,wb,{})},onItemExecute:(ue,de,ye,Te)=>{g(ue),Pt(ue,Rl,{name:t.name})}},C=Mn.parts.field({...h,factory:$H}),S=t.label.map(ue=>cf(ue,d)),O=no(((ue,de,ye=ue,Te=ue)=>Gl(ye,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+ue],attributes:{title:d.translate(Te),"aria-live":"polite",...de.fold(()=>({}),rt=>({id:rt}))}},d.icons))("invalid",A.some(TD),"warning")),N=no({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[O.asSpec()]}),F=c.getUrlPicker(t.filetype),W=nt("browser.url.event"),q=no({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,N.asSpec()],behaviours:We([Ct.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable})])}),ee=no(A$({context:t.context,name:t.name,icon:A.some("browse"),text:t.picker_text.or(t.label).getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},ue=>Tn(ue,W),d,[],["tox-browse-url"])),ce=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:qt([[q.asSpec()],F.map(()=>ee.asSpec()).toArray()])}),Q=ue=>{Ce.getCurrent(ue).each(de=>{const ye=dt.getValue(de),Te={fieldname:t.name,...ye};F.each(rt=>{rt(Te).get(Ue=>{dt.setValue(de,Ue),Pt(ue,Rl,{name:t.name})})})})};return Mn.sketch({dom:eU(),components:S.toArray().concat([ce()]),fieldBehaviours:We([Ct.config({disabled:()=>!t.enabled||d.checkUiComponentContext(t.context).shouldDisable,onDisabled:ue=>{Mn.getField(ue).each(Ct.disable),ee.getOpt(ue).each(Ct.disable)},onEnabled:ue=>{Mn.getField(ue).each(Ct.enable),ee.getOpt(ue).each(Ct.enable)}}),cr(()=>d.checkUiComponentContext(t.context)),sn("url-input-events",[Me(W,Q)])])})},nW=(t,s)=>{const c=ZA(t.icon,s.icons);return cd.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:t.url?void 0:c},components:t.url?[Fc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:c,attributes:{title:s.translate(t.iconTooltip)}},action:l=>Pt(l,dg,{name:"alert-banner",value:t.url}),buttonBehaviours:We([BB()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]})},oW=(t,s,c)=>{const l=S=>(S.element.dom.click(),A.some(!0)),d=Mn.parts.field({factory:{sketch:Sn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:We([pd.self(),Ct.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable,onDisabled:S=>{On(S.element).each(T=>hs(T,"tox-checkbox--disabled"))},onEnabled:S=>{On(S.element).each(T=>Ao(T,"tox-checkbox--disabled"))}}),Zo.config({}),Yt.config({}),e$(c,Bg,x1),kt.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),sn("checkbox-events",[Me(Mf(),(S,T)=>{Pt(S,Rl,{name:t.name})})])])}),g=Mn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Yo(s.translate(t.label))],behaviours:We([K0.config({})])}),h=S=>Gl(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=no({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Mn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:We([Ct.config({disabled:()=>!t.enabled||s.checkUiComponentContext(t.context).shouldDisable}),cr(()=>s.checkUiComponentContext(t.context))])})},sW=(t,s)=>{const c=["tox-form__group",...t.stretched?["tox-form__group--stretched"]:[]],l=sn("htmlpanel",[Wo(d=>{t.onInit(d.element.dom)})]);return t.presets==="presentation"?cd.sketch({dom:{tag:"div",classes:c,innerHtml:t.html},containerBehaviours:We([ms.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{io(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Is(d.element)).each(g=>{Ws(g,"data-mce-tooltip").each(h=>{ms.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:io(d.element,"[data-mce-tooltip]:hover").orThunk(()=>Is(d.element).filter(g=>Ws(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:te([js,_r,Hs,Cc,sr,kr]),onRtl:te([js,_r,Hs,Cc,sr,kr])},bubble:Qc(0,-2,{})})}),l])}):cd.sketch({dom:{tag:"div",classes:c,innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:We([Zo.config({}),Yt.config({}),l])})},rc=t=>(s,c,l,d,g)=>at(c,"name").fold(()=>t(c,d,A.none(),g),h=>s.field(h,t(c,d,at(l,h),g))),rW=t=>(s,c,l,d,g)=>{const h=uo(c,{source:"dynamic"});return rc(t)(s,h,l,d,g)},cW={bar:rc((t,s)=>JV(t,s.shared)),collection:rc((t,s,c)=>tU(t,s.shared.providers,c)),alertbanner:rc((t,s)=>nW(t,s.shared.providers)),input:rc((t,s,c)=>IU(t,s.shared.providers,c)),textarea:rc((t,s,c)=>FU(t,s.shared.providers,c)),label:rc((t,s,c,l)=>EU(t,s.shared,l)),iframe:rW((t,s,c)=>d$(t,s.shared.providers,c)),button:rc((t,s)=>jU(t,s.shared.providers)),checkbox:rc((t,s,c)=>oW(t,s.shared.providers,c)),colorinput:rc((t,s,c)=>zG(t,s.shared,s.colorinput,c)),colorpicker:rc((t,s,c)=>tw(t,s.shared.providers,c)),dropzone:rc((t,s,c)=>bd(t,s.shared.providers,c)),grid:rc((t,s)=>gU(t,s.shared)),listbox:rc((t,s,c)=>RU(t,s,c)),selectbox:rc((t,s,c)=>MU(t,s.shared.providers,c)),sizeinput:rc((t,s)=>BU(t,s.shared.providers)),slider:rc((t,s,c)=>PU(t,s.shared.providers,c)),urlinput:rc((t,s,c)=>tW(t,s,s.urlinput,c)),customeditor:rc(mU),htmlpanel:rc((t,s)=>sW(t,s.shared.providers)),imagepreview:rc((t,s,c)=>xU(t,c)),table:rc((t,s)=>$U(t,s.shared.providers)),tree:rc((t,s)=>UU(t,s)),panel:rc((t,s)=>y$(t,s))},$$={field:(t,s)=>s,record:te([])},I$=(t,s,c,l,d)=>{const g=uo(l,{shared:{interpreter:h=>kD(t,h,c,g,d)}});return kD(t,s,c,g,d)},kD=(t,s,c,l,d)=>at(cW,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(t,s,c,l,d)),_D=(t,s,c,l)=>kD($$,t,s,c,l),cw={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},F$=(t,s,c)=>{const d={maxHeightFunction:nh()},g=()=>({type:"node",root:ml(ys(t())),node:A.from(t()),bubble:Qc(12,12,cw),layouts:{onRtl:()=>[Zd],onLtr:()=>[th]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:Qc(-12,12,cw),layouts:{onRtl:()=>[Hs,sr,js],onLtr:()=>[sr,Hs,js]},overrides:d});return()=>c()?g():h()},L$=(t,s,c,l)=>{const g={maxHeightFunction:nh()},h=()=>({type:"node",root:ml(ys(s())),node:A.from(s()),bubble:Qc(12,12,cw),layouts:{onRtl:()=>[Zl],onLtr:()=>[Zl]},overrides:g}),C=()=>t?{type:"node",root:ml(ys(s())),node:A.from(s()),bubble:Qc(0,-Ko(s()),cw),layouts:{onRtl:()=>[_r],onLtr:()=>[_r]},overrides:g}:{type:"hotspot",hotspot:c(),bubble:Qc(0,0,cw),layouts:{onRtl:()=>[_r],onLtr:()=>[_r]},overrides:g};return()=>l()?h():C()},aW=(t,s,c)=>{const l=()=>({type:"node",root:ml(ys(t())),node:A.from(t()),layouts:{onRtl:()=>[Zl],onLtr:()=>[Zl]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[js],onLtr:()=>[js]}});return()=>c()?l():d()},lW=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng(),l=t.model.table.getSelectedCells();if(l.length>1){const d=l[0],g=l[l.length-1],h={firstCell:Je.fromDom(d),lastCell:Je.fromDom(g)};return A.some(h)}return A.some(Dm.range(Je.fromDom(c.startContainer),c.startOffset,Je.fromDom(c.endContainer),c.endOffset))}}),iW=t=>s=>({type:"node",root:t(),node:s}),n2=(t,s,c,l)=>{const d=My(t),g=()=>Je.fromDom(t.getBody()),h=()=>Je.fromDom(t.getContentAreaContainer()),C=()=>d||!l();return{inlineDialog:F$(h,s,C),inlineBottomDialog:L$(t.inline,h,c,C),banner:aW(h,s,C),cursor:lW(t,g),node:iW(g)}},uW=t=>(s,c)=>{I6(t)(s,c)},dW=t=>()=>A6(t),mW=t=>s=>e4(t,s),fW=t=>s=>_6(t,s),gW=t=>({colorPicker:uW(t),hasCustomColors:dW(t),getColors:mW(t),getColorCols:fW(t)}),hW=t=>()=>rB(t),pW=t=>({isDraggableModal:hW(t)}),bW=t=>{const s=Et(OA(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},w4=t=>ac(t,"items"),H$=t=>ac(t,"format"),z$=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],V$=t=>In(t,"items"),U$=t=>In(t,"block"),vW=t=>In(t,"inline"),yW=t=>In(t,"selector"),W$=t=>xo(t,(s,c)=>{if(V$(c)){const l=W$(c.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:c.title,items:l.formats}])}}else if(vW(c)||U$(c)||yW(c)){const d=`custom-${rn(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),CW=(t,s)=>{const c=W$(s),l=d=>{ft(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?l(c.customFormats):t.on("init",()=>{l(c.customFormats)}),c.formats},Z$=t=>qN(t).map(s=>{const c=CW(t,s);return KN(t)?z$.concat(c):c}).getOr(z$),SW=t=>{const s=$o(t);return s.length===1&&bo(s,"title")},AD=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),j$=(t,s,c,l)=>{const d=S=>AD(S,c,l),g=S=>{const T=C(S.items);return{...S,type:"submenu",getStyleItems:te(T)}},h=S=>{const T=rn(S.name)?S.name:nt(S.title),O=`custom-${T}`,N={...S,type:"formatter",format:O,isSelected:c(O),getStylePreview:l(O)};return t.formatter.register(T,N),N},C=S=>Pe(S,T=>w4(T)?g(T):H$(T)?d(T):SW(T)?{...T,type:"separator"}:h(T));return C(s)},wW=t=>{const s=C=>()=>t.formatter.match(C),c=C=>()=>{const S=t.formatter.get(C);return S!==void 0?A.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):A.none()},l=Et([]),d=Et([]),g=Et(!1);return t.on("PreInit",C=>{const S=Z$(t),T=j$(t,S,s,c);l.set(T)}),t.on("addStyleModifications",C=>{const S=j$(t,C.items,s,c);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:l.get(),S=d.get();return C.concat(S)}}},xW=t=>{let l=0;const d=()=>l>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Yo(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:te(300),exclusive:!0,lazySink:t,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(S,T)=>{l++,C.onShow&&C.onShow(S,T)},onHide:(S,T)=>{l--,C.onHide&&C.onHide(S,T)},onSetup:C.onSetup}),getComponents:g}},EW=t=>Po(t)&&t.nodeType===1,x4=rm.trim,G$=t=>s=>!!(EW(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),E4=G$("true"),T4=G$("false"),OD=(t,s,c,l,d)=>({type:t,title:s,url:c,level:l,attach:d}),TW=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return E4(s)}return!1},kW=(t,s)=>Pe(zo(Je.fromDom(s),t),c=>c.dom),q$=t=>t.innerText||t.textContent,_W=t=>t.id?t.id:nt("h"),AW=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,k4=t=>AW(t)&&RD(t),DD=t=>t&&/^(H[1-6])$/.test(t.nodeName),RD=t=>TW(t)&&!T4(t),K$=t=>DD(t)&&RD(t),Y$=t=>DD(t)?parseInt(t.nodeName.substr(1),10):0,OW=t=>{var s;const c=_W(t),l=()=>{t.id=c};return OD("header",(s=q$(t))!==null&&s!==void 0?s:"","#"+c,Y$(t),l)},X$=t=>{const s=t.id||t.name,c=q$(t);return OD("anchor",c||"#"+s,"#"+s,0,ae)},DW=t=>Pe(ho(t,K$),OW),RW=t=>Pe(ho(t,k4),X$),MW=t=>kW("h1,h2,h3,h4,h5,h6,a:not([href])",t),NW=t=>x4(t.title).length>0,aw={find:t=>{const s=MW(t);return ho(DW(s).concat(RW(s)),NW)}},_4="tinymce-url-history",J$=5,Q$=t=>rn(t)&&/^https?/.test(t),e8=t=>Ns(t)&&t.length<=J$&&Da(t,Q$),t8=t=>Vs(t)&&yr(t,s=>!e8(s)).isNone(),MD=()=>{const t=yb.getItem(_4);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return console.log("Local storage "+_4+" was not valid JSON",c),{};throw c}return t8(s)?s:(console.log("Local storage "+_4+" was not valid format",s),{})},BW=t=>{if(!t8(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));yb.setItem(_4,JSON.stringify(t))},PW=t=>{const s=MD();return at(s,t).getOr([])},$W=(t,s)=>{if(!Q$(t))return;const c=MD(),l=at(c,s).getOr([]),d=ho(l,g=>g!==t);c[s]=[t].concat(d).slice(0,J$),BW(c)},n8=t=>!!t,IW=t=>Io(rm.makeMap(t,/[, ]/),n8),kb=t=>A.from(EA(t)),o8=t=>{const s=A.from(Oy(t)).filter(n8).map(IW);return kb(t).fold(bn,c=>s.fold(wt,l=>$o(l).length>0?l:!1))},FW=(t,s)=>{const c=o8(t);return ar(c)?c?kb(t):A.none():c[s]?kb(t):A.none()},LW=(t,s)=>FW(t,s).map(c=>l=>_o.nu(d=>{const g=(C,S)=>{if(!rn(C))throw new Error("Expected value to be string");if(S!==void 0&&!Vs(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},h={filetype:s,fieldname:l.fieldname,...A.from(l.meta).getOr({})};c.call(t,g,l.value,h)})),ND=t=>A.from(t).filter(rn).getOrUndefined(),BD=t=>Dy(t)?A.some({targets:aw.find(t.getBody()),anchorTop:ND(oB(t)),anchorBottom:ND(sB(t))}):A.none(),s8=t=>A.from(AS(t)),r8=t=>({getHistory:PW,addToHistory:$W,getLinkInformation:()=>BD(t),getValidationHandler:()=>s8(t),getUrlPicker:s=>LW(t,s)}),HW=(t,s,c,l)=>{const d=Et(!1),g=bW(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:md.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:xW(t.dialog),checkUiComponentContext:Q=>{if(SA(s))return{contextType:"disabled",shouldDisable:!0};const[ue,de=""]=Q.split(":"),ye=s.ui.registry.getAll().contexts,Te=at(ye,ue).fold(()=>at(ye,"mode").map(rt=>rt("design")).getOr(!1),rt=>de.charAt(0)==="!"?!rt(de.slice(1)):rt(de));return{contextType:ue,shouldDisable:!Te}}},C=r8(s),S=wW(s),T=gW(s),O=pW(s),N=()=>d.get(),F=Q=>d.set(Q),W={shared:{providers:h,anchors:n2(s,c,l,g.isPositionedAtTop),header:g},urlinput:C,styles:S,colorinput:T,dialog:O,isContextMenuOpen:N,setContextMenuState:F},q=Q=>A.none(),ee={...W,shared:{...W.shared,interpreter:Q=>_D(Q,{},ee,q),getSink:t.popup}},ce={...W,shared:{...W.shared,interpreter:Q=>_D(Q,{},ce,q),getSink:t.dialog}};return{popup:ee,dialog:ce}},o2=(t,s,c)=>{const l=(ke,mt)=>{ft([s,...c],Ut=>{Ut.broadcastEvent(ke,mt)})},d=(ke,mt)=>{ft([s,...c],Ut=>{Ut.broadcastOn([ke],mt)})},g=ke=>d(sg(),{target:ke.target}),h=$a(),C=Ho(h,"touchstart",g),S=Ho(h,"touchmove",ke=>l(Vw(),ke)),T=Ho(h,"touchend",ke=>l(ip(),ke)),O=Ho(h,"mousedown",g),N=Ho(h,"mouseup",ke=>{ke.raw.button===0&&d(S_(),{target:ke.target})}),F=ke=>d(sg(),{target:Je.fromDom(ke.target)}),W=ke=>{ke.button===0&&d(S_(),{target:Je.fromDom(ke.target)})},q=()=>{ft(t.editorManager.get(),ke=>{t!==ke&&ke.dispatch("DismissPopups",{relatedTarget:t})})},ee=ke=>l(I2(),wm(ke)),ce=ke=>{d(Kp(),{}),l(Ju(),wm(ke))},Q=ys(Je.fromDom(t.getElement())),ue=ss(Q,"scroll",ke=>{requestAnimationFrame(()=>{const mt=t.getContainer();if(mt!=null){const Dt=o1(t,s.element).map(Nn=>[Nn.element,...Nn.others]).getOr([]);br(Dt,Nn=>lo(Nn,ke.target))&&(t.dispatch("ElementScroll",{target:ke.target.dom}),l(Xg(),ke))}})}),de=()=>d(Kp(),{}),ye=ke=>{ke.state&&d(sg(),{target:Je.fromDom(t.getContainer())})},Te=ke=>{d(sg(),{target:Je.fromDom(ke.relatedTarget.getContainer())})},rt=ke=>t.dispatch("focusin",ke),Ue=ke=>t.dispatch("focusout",ke);t.on("PostRender",()=>{t.on("click",F),t.on("tap",F),t.on("mouseup",W),t.on("mousedown",q),t.on("ScrollWindow",ee),t.on("ResizeWindow",ce),t.on("ResizeEditor",de),t.on("AfterProgressState",ye),t.on("DismissPopups",Te),ft([s,...c],ke=>{ke.element.dom.addEventListener("focusin",rt),ke.element.dom.addEventListener("focusout",Ue)})}),t.on("remove",()=>{t.off("click",F),t.off("tap",F),t.off("mouseup",W),t.off("mousedown",q),t.off("ScrollWindow",ee),t.off("ResizeWindow",ce),t.off("ResizeEditor",de),t.off("AfterProgressState",ye),t.off("DismissPopups",Te),ft([s,...c],ke=>{ke.element.dom.removeEventListener("focusin",rt),ke.element.dom.removeEventListener("focusout",Ue)}),O.unbind(),C.unbind(),S.unbind(),T.unbind(),N.unbind(),ue.unbind()}),t.on("detach",()=>{ft([s,...c],xi),ft([s,...c],ke=>ke.destroy())})},A4=ae,O4=bn,D4=te([]);var PD=Object.freeze({__proto__:null,setup:A4,isDocked:O4,getBehaviours:D4});const R4=te(nt("toolbar-height-change")),yd={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},$D="tox-tinymce--toolbar-sticky-on",ID="tox-tinymce--toolbar-sticky-off",FD=(t,s)=>{const c=wr(s),d=ul(s).dom.innerHeight,g=er(c),h=Je.fromDom(t.elm),C=Fd(h),S=wn(h),T=C.y,O=T+S,N=Xr(s),F=wn(s),W=N.top,q=W+F,ee=Math.abs(W-g.top)<2,ce=Math.abs(q-(g.top+d))<2;if(ee&&T<q)mr(g.left,T-F,c);else if(ce&&O>W){const Q=T-d+S+F;mr(g.left,Q,c)}},M4=(t,s)=>bo(ds.getModes(t),s),N4=t=>{const s=l=>Ko(l)+(parseInt(M(l,"margin-top"),10)||0)+(parseInt(M(l,"margin-bottom"),10)||0),c=t.element;On(c).each(l=>{const d="padding-"+ds.getModes(t)[0];if(ds.isDocked(t)){const g=_s(l);on(c,"width",g+"px"),on(l,d,s(c)+"px")}else Ye(c,"width"),Ye(l,d)})},c8=(t,s)=>{s?(Ao(t,yd.fadeOutClass),xf(t,[yd.transitionClass,yd.fadeInClass])):(Ao(t,yd.fadeInClass),xf(t,[yd.fadeOutClass,yd.transitionClass]))},a8=(t,s)=>{const c=Je.fromDom(t.getContainer());s?(hs(c,$D),Ao(c,ID)):(hs(c,ID),Ao(c,$D))},B4=(t,s)=>{const c=wr(s);vl(c).filter(l=>!lo(s,l)).filter(l=>lo(l,Je.fromDom(c.dom.body))||gf(t,l)).each(()=>ro(s))},l8=(t,s)=>Is(t).orThunk(()=>s().toOptional().bind(c=>Is(c.element))),zW=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(ds.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(N4)}),t.on("SkinLoaded",()=>{c().each(l=>{ds.isDocked(l)?ds.reset(l):ds.refresh(l)})}),t.on("FullscreenStateChanged",()=>{c().each(ds.reset)})),t.on("AfterScrollIntoView",l=>{c().each(d=>{ds.refresh(d);const g=d.element;Bd(g)&&FD(l,g)})}),t.on("PostRender",()=>{a8(t,!1)})},VW=t=>t().map(ds.isDocked).getOr(!1),UW=()=>[Al.config({channels:{[R4()]:{onReceive:N4}}})],i8=(t,s)=>{const c=dn(),l=s.getSink,d=C=>{l().each(S=>C(S.element))},g=C=>{t.inline||N4(C),a8(t,ds.isDocked(C)),C.getSystem().broadcastOn([Kp()],{}),l().each(S=>S.getSystem().broadcastOn([Kp()],{}))},h=t.inline?[]:UW();return[Yt.config({}),ds.config({contextual:{lazyContext:C=>{const S=Ko(C.element),T=t.inline?t.getContentAreaContainer():t.getContainer();return A.from(T).map(O=>{const N=Qr(Je.fromDom(O));return o1(t,C.element).fold(()=>{const W=N.height-S,q=N.y+(M4(C,"top")?0:S);return Ss(N.x,q,N.width,W)},W=>{const q=sp(N,rb(W)),ee=M4(C,"top")?q.y:q.y+S;return Ss(q.x,ee,q.width,q.height-S)})})},onShow:()=>{d(C=>c8(C,!0))},onShown:C=>{d(S=>Rc(S,[yd.transitionClass,yd.fadeInClass])),c.get().each(S=>{B4(C.element,S),c.clear()})},onHide:C=>{l8(C.element,l).fold(c.clear,c.set),d(S=>c8(S,!1))},onHidden:()=>{d(C=>Rc(C,[yd.transitionClass]))},...yd},lazyViewport:C=>o1(t,C.element).fold(()=>{const T=Mc(),O=e1(t),N=T.y+(M4(C,"top")&&!NA(t)?O:0),F=T.height-(M4(C,"bottom")?O:0);return{bounds:Ss(T.x,N,T.width,F),optScrollEnv:A.none()}},T=>({bounds:rb(T),optScrollEnv:A.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:Xr(T.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var WW=Object.freeze({__proto__:null,setup:zW,isDocked:VW,getBehaviours:i8});const u8=t=>{const s=t.editor,c=t.sticky?i8:D4;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:We(c(s,t.sharedBackstage))}};var P4=gu({factory:(t,s)=>{const c=(d,g)=>{const h=Pe(g,C=>{const S={type:"menubutton",text:C.text,fetch:O=>{O(C.getItems())},context:"any"},T=CP(S).mapError(O=>Of(O)).getOrDie();return t2(T,"tox-mbtn",s.backstage,A.some("menuitem"))});an.set(d,h)},l={focus:kt.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:We([an.config({}),sn("menubar-events",[Wo(d=>{t.onSetup(d)}),Me(Ul(),(d,g)=>{io(d.element,".tox-mbtn--active").each(h=>{hc(g.event.target,".tox-mbtn").each(C=>{lo(h,C)||d.getSystem().getByDom(h).each(S=>{d.getSystem().getByDom(C).each(T=>{hu.expand(T),hu.close(S),Yt.focus(T)})})})})}),Me($f(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{hu.isOpen(h)&&(hu.expand(C),hu.close(h))})})})]),kt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),Zo.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[$e("dom"),$e("uid"),$e("onEscape"),$e("backstage"),pe("onSetup",ae)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,c)=>{t.setMenus(s,c)}}});const d8="💝Get all features",jW="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",m8=t=>{const s=t.promotionLink?[{dom:{tag:"a",attributes:{href:jW,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:d8}}]:[];return{uid:t.uid,dom:t.dom,components:s}},f8=t=>{const{sidebars:s}=t.ui.registry.getAll();ft($o(s),c=>{const l=s[c],d=()=>Wc(A.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return t.on("ToggleSidebar",h),()=>{t.off("ToggleSidebar",h)}},context:"any"})})},GW=t=>({element:()=>t.element.dom}),jG=(t,s)=>{const c=Pe($o(s),l=>{const d=s[l],g=gi(YP(d));return{name:l,getApi:GW,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Pe(c,l=>{const d=Et(ae);return t.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:fb.unnamedEvents([sm(l,d),hd(l,d),Me(ov(),(g,h)=>{const C=h.event;Jt(c,T=>T.name===C.name).each(T=>{(C.visible?T.onShow:T.onHide)(T.getApi(g))})})])})})},qW=t=>Ta.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:jG(s,t),slotBehaviours:fb.unnamedEvents([Wo(c=>Ta.hideAllSlots(c))])})),KW=(t,s,c)=>{Ce.getCurrent(t).each(d=>{an.set(d,[qW(s)]);const g=c==null?void 0:c.toLowerCase();rn(g)&&In(s,g)&&Ce.getCurrent(d).each(h=>{Ta.showSlot(h,g),Ga.immediateGrow(d),Ye(d.element,"width"),$4(t.element,"region")})})},$4=(t,s)=>{Wt(t,"role",s)},YW=(t,s)=>{Ce.getCurrent(t).each(l=>{Ce.getCurrent(l).each(g=>{Ga.hasGrown(l)?Ta.isShowing(g,s)?(Ga.shrink(l),$4(t.element,"presentation")):(Ta.hideAllSlots(g),Ta.showSlot(g,s),$4(t.element,"region")):(Ta.hideAllSlots(g),Ta.showSlot(g,s),Ga.grow(l),$4(t.element,"region"))})})},XW=t=>Ce.getCurrent(t).bind(c=>Ga.isGrowing(c)||Ga.hasGrown(c)?Ce.getCurrent(c).bind(g=>Jt(Ta.getSlotNames(g),h=>Ta.isShowing(g,h))):A.none()),LD=nt("FixSizeEvent"),HD=nt("AutoSizeEvent"),JW=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:We([Zo.config({}),Yt.config({}),Ga.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Ce.getCurrent(s).each(Ta.hideAllSlots),Tn(s,HD)},onGrown:s=>{Tn(s,HD)},onStartGrow:s=>{Pt(s,LD,{width:X(s.element,"width").getOr("")})},onStartShrink:s=>{Pt(s,LD,{width:_s(s.element)+"px"})}}),an.config({}),Ce.config({find:s=>{const c=an.contents(s);return Hr(c)}})])}],behaviours:We([pd.childAt(0),sn("sidebar-sliding-events",[Me(LD,(s,c)=>{on(s.element,"width",c.event.width)}),Me(HD,(s,c)=>{Ye(s.element,"width")})])])}),QW=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:og('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),g8=t=>Ce.getCurrent(t).each(s=>ro(s.element,!0)),eZ=(t,s)=>{const c="tabindex",l=`data-mce-${c}`;A.from(t.iframeElement).map(Je.fromDom).each(d=>{s?(Ws(d,c).each(g=>Wt(d,l,g)),Wt(d,c,-1)):(Ln(d,c),Ws(d,l).each(g=>{Wt(d,c,g),Ln(d,l)}))})},tZ=(t,s,c,l)=>{const d=s.element;if(eZ(t,c),c)U.block(s,QW(l)),Ye(d,"display"),Ln(d,"aria-hidden"),t.hasFocus()&&g8(s);else{const g=Ce.getCurrent(s).exists(h=>bl(h.element));U.unblock(s),on(d,"display","none"),Wt(d,"aria-hidden","true"),g&&t.focus()}},nZ=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:We([an.config({}),U.config({focus:!1}),Ce.config({find:s=>Hr(s.components())})]),components:[]}),h8=t=>t.type==="focusin",oZ=t=>h8(t)?(t.composed?Hr(t.composedPath()):A.from(t.target)).map(Je.fromDom).filter(Zc).exists(c=>Jr(c,"mce-pastebin")):!1,sZ=(t,s,c)=>{const l=Et(!1),d=dn(),g=C=>{l.get()&&!oZ(C)&&(C.preventDefault(),g8(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==l.get()&&(l.set(C),tZ(t,s(),C,c.providers),bV(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),Vc(C.time)){const S=bT.setEditorTimeout(t,()=>h(C.state),C.time);d.set(S)}else h(C.state),d.clear()})},p8=t=>{const s=t.label.isNone()?t.title.fold(()=>({}),c=>({attributes:{"aria-label":c}})):t.label.fold(()=>({}),c=>({attributes:{"aria-label":c}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(t.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...t.label.map(c=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Yo(c)]})).toArray(),hT.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:We([Zo.config({}),Yt.config({ignore:!0})])}},I4=t=>hT.sketch(p8(t)),b8=(t,s)=>{const c=Wo(l=>{const d=Pe(t.initGroups,I4);Lc.setGroups(l,d)});return We([$i.toolbarButton(()=>t.providers.checkUiComponentContext("any").shouldDisable),cr(()=>t.providers.checkUiComponentContext("any")),kt.config({mode:s,onEscape:t.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),sn("toolbar-events",[c])])},v8=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":p8({title:A.none(),label:A.none(),items:[]}),"overflow-button":SD({context:"any",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items")},A.none(),t.providers,[],"overflow-button")},splitToolbarBehaviours:b8(t,s)}},rZ=t=>{const s=v8(t),c=4,l=pA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return pA.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Fd(d),h=ya(d),C=Fd(h),S=Math.max(h.dom.scrollHeight,C.height);return Ss(g.x+c,C.y,g.width-c*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},cZ=t=>{const s=yA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=yA.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=v8(t);return yA.sketch({...l,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([R4()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([R4()],{type:"closed"}),t.onToggled(d,!1)}})},F4=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Lc.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===id.scrolling?["tox-toolbar--scrolling"]:[])},components:[Lc.parts.groups({})],toolbarBehaviours:b8(t,s)})},zD=(t,s)=>{var c,l;const d=t.type==="togglebutton",g=t.icon.map(de=>af(de,s.icons)).map(no),C=de=>{const ye=ke=>{g.map(mt=>mt.getOpt(de).each(Ut=>{an.set(Ut,[af(ke,s.icons)])}))},Te=ke=>{const mt=de.element;ke?(hs(mt,"tox-button--enabled"),Wt(mt,"aria-pressed",!0)):(Ao(mt,"tox-button--enabled"),Ln(mt,"aria-pressed"))},rt=()=>Jr(de.element,"tox-button--enabled"),Ue=()=>ro(de.element);if(d)return t.onAction({setIcon:ye,setActive:Te,isActive:rt,focus:Ue});if(t.type==="button")return t.onAction({setIcon:ye})},S={...t,name:d?t.text.getOr(t.icon.getOr("")):(c=t.text)!==null&&c!==void 0?c:t.icon.getOr(""),primary:t.buttonType==="primary",buttonType:A.from(t.buttonType),tooltip:t.tooltip,icon:t.icon,enabled:!0,borderless:t.borderless},T=wD((l=t.buttonType)!==null&&l!==void 0?l:"secondary"),O=d?t.text.map(s.translate):A.some(s.translate(t.text)),N=O.map(Yo),F=S.tooltip.or(O).map(de=>({"aria-label":s.translate(de)})).getOr({}),W=g.map(de=>de.asSpec()),q=Wy([W,N]),ee=t.icon.isSome()&&N.isSome(),ce={tag:"button",classes:T.concat(...t.icon.isSome()&&!ee?["tox-button--icon"]:[]).concat(...ee?["tox-button--icon-and-text"]:[]).concat(...t.borderless?["tox-button--naked"]:[]).concat(...t.type==="togglebutton"&&t.active?["tox-button--enabled"]:[]),attributes:F},Q=[],ue=S4(S,A.some(C),Q,ce,q,t.tooltip,s);return Fc.sketch(ue)},y8=(t,s)=>zD(t,s),aZ=(t,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:Pe(t.buttons,c=>y8(c,s))}),L4=Lo().deviceType,C8=L4.isPhone(),S8=L4.isTablet(),lZ=t=>{let s=!1;const c=Pe(t.buttons,l=>l.type==="group"?(s=!0,aZ(l,t.providers)):y8(l,t.providers));return{uid:t.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...C8||S8?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:We([Yt.config({}),kt.config({mode:"flow",selector:"button, .tox-button",focusInside:Ff.OnEnterOrSpaceMode})]),components:s?c:[cd.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),cd.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:c})]}},iZ=t=>({uid:t.uid,behaviours:We([Yt.config({}),Zo.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),uZ=(t,s,c,l)=>{const d={getPane:g=>xc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,behaviours:We([Yt.config({}),kt.config({mode:"cyclic",focusInside:Ff.OnEnterOrSpaceMode})]),apis:d}};var s2=ja({name:"silver.View",configFields:[$e("viewConfig")],partFields:[gr({factory:{sketch:lZ},schema:[$e("buttons"),$e("providers")],name:"header"}),gr({factory:{sketch:iZ},schema:[],name:"pane"})],factory:uZ,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const dZ=(t,s,c)=>Pl(s,(l,d)=>{const g=gi(jz(l));return t.slot(d,s2.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[s2.parts.header({buttons:g.buttons,providers:c})]:[],s2.parts.pane({})]}))}),VD=(t,s)=>Ta.sketch(c=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:dZ(c,t,s),slotBehaviours:fb.unnamedEvents([Wo(l=>Ta.hideAllSlots(l))])})),w8=t=>Jt(Ta.getSlotNames(t),s=>Ta.isShowing(t,s)),x8=t=>{const s=t.element;on(s,"display","none"),Wt(s,"aria-hidden","true")},mZ=t=>{const s=t.element;Ye(s,"display"),Ln(s,"aria-hidden")},fZ=t=>({getContainer:te(t)}),H4=(t,s,c)=>{Ta.getSlot(t,s).each(l=>{s2.getPane(l).each(d=>{c(l)(fZ(d.element.dom))})})},gZ=(t,s)=>H4(t,s,s2.getOnShow),E8=(t,s)=>H4(t,s,s2.getOnHide);var z4=gu({factory:(t,s)=>{const g={setViews:(h,C)=>{an.set(h,[VD(C,s.backstage.shared.providers)])},whichView:h=>Ce.getCurrent(h).bind(w8),toggleView:(h,C,S,T)=>Ce.getCurrent(h).exists(O=>{const N=w8(O),F=N.exists(q=>T===q),W=Ta.getSlot(O,T).isSome();return W&&(Ta.hideAllSlots(O),F?(x8(h),C()):(S(),mZ(h),Ta.showSlot(O,T),gZ(O,T)),N.each(q=>E8(O,q))),W})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:We([an.config({}),Ce.config({find:h=>{const C=an.contents(h);return Hr(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[$e("backstage")],apis:{setViews:(t,s,c)=>t.setViews(s,c),toggleView:(t,s,c,l,d)=>t.toggleView(s,c,l,d),whichView:(t,s)=>t.whichView(s)}});const hZ=(t,s,c)=>{let l=!1;const d=h=>{Yi(h,".tox-statusbar").each(C=>{M(C,"display")==="none"&&Js(C,"aria-hidden")==="true"?(Ye(C,"display"),Ln(C,"aria-hidden")):(on(C,"display","none"),Wt(C,"aria-hidden","true"))})},g={getSocket:h=>xc.getPart(h,t,"socket"),setSidebar:(h,C,S)=>{xc.getPart(h,t,"sidebar").each(T=>KW(T,C,S))},toggleSidebar:(h,C)=>{xc.getPart(h,t,"sidebar").each(S=>YW(S,C))},whichSidebar:h=>xc.getPart(h,t,"sidebar").bind(XW).getOrNull(),getHeader:h=>xc.getPart(h,t,"header"),getToolbar:h=>xc.getPart(h,t,"toolbar"),setToolbar:(h,C)=>{xc.getPart(h,t,"toolbar").each(S=>{const T=Pe(C,I4);S.getApis().setGroups(S,T)})},setToolbars:(h,C)=>{xc.getPart(h,t,"multiple-toolbar").each(S=>{const T=Pe(C,O=>Pe(O,I4));jE.setItems(S,T)})},refreshToolbar:h=>{xc.getPart(h,t,"toolbar").each(S=>S.getApis().refresh(S))},toggleToolbarDrawer:h=>{xc.getPart(h,t,"toolbar").each(C=>{Ra(C.getApis().toggle,S=>S(C))})},toggleToolbarDrawerWithoutFocusing:h=>{xc.getPart(h,t,"toolbar").each(C=>{Ra(C.getApis().toggleWithoutFocusing,S=>S(C))})},isToolbarDrawerToggled:h=>xc.getPart(h,t,"toolbar").bind(C=>A.from(C.getApis().isOpen).map(S=>S(C))).getOr(!1),getThrobber:h=>xc.getPart(h,t,"throbber"),focusToolbar:h=>{xc.getPart(h,t,"toolbar").orThunk(()=>xc.getPart(h,t,"multiple-toolbar")).each(S=>{kt.focusIn(S)})},setMenubar:(h,C)=>{xc.getPart(h,t,"menubar").each(S=>{P4.setMenus(S,C)})},focusMenubar:h=>{xc.getPart(h,t,"menubar").each(C=>{P4.focus(C)})},setViews:(h,C)=>{xc.getPart(h,t,"viewWrapper").each(S=>{z4.setViews(S,C)})},toggleView:(h,C)=>xc.getPart(h,t,"viewWrapper").exists(S=>z4.toggleView(S,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>xc.getPart(h,t,"viewWrapper").bind(z4.whichView).getOrNull(),hideMainView:h=>{l=g.isToolbarDrawerToggled(h),l&&g.toggleToolbarDrawer(h),xc.getPart(h,t,"editorContainer").each(C=>{const S=C.element;d(S),on(S,"display","none"),Wt(S,"aria-hidden","true")})},showMainView:h=>{l&&g.toggleToolbarDrawer(h),xc.getPart(h,t,"editorContainer").each(C=>{const S=C.element;d(S),Ye(S,"display"),Ln(S,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:g,behaviours:t.behaviours}},pZ=Qm.optional({factory:P4,name:"menubar",schema:[$e("backstage")]}),bZ=t=>t.type===id.sliding?cZ:t.type===id.floating?rZ:F4,vZ=Qm.optional({factory:{sketch:t=>jE.sketch({uid:t.uid,dom:t.dom,listBehaviours:We([kt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>F4({type:t.type,uid:nt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,c,l,d)=>{Lc.setGroups(c,l)},shell:!0})},name:"multiple-toolbar",schema:[$e("dom"),$e("onEscape")]}),k8=Qm.optional({factory:{sketch:t=>{const s=bZ(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),onToggled:(l,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[$e("dom"),$e("onEscape"),$e("getSink")]}),yZ=Qm.optional({factory:{sketch:u8},name:"header",schema:[$e("dom")]}),CZ=Qm.optional({factory:{sketch:m8},name:"promotion",schema:[$e("dom"),$e("promotionLink")]}),SZ=Qm.optional({name:"socket",schema:[$e("dom")]}),wZ=Qm.optional({factory:{sketch:JW},name:"sidebar",schema:[$e("dom")]}),xZ=Qm.optional({factory:{sketch:nZ},name:"throbber",schema:[$e("dom")]}),EZ=Qm.optional({factory:z4,name:"viewWrapper",schema:[$e("backstage")]}),TZ=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),kZ=Qm.optional({factory:{sketch:TZ},name:"editorContainer",schema:[]});var Go=ja({name:"OuterContainer",factory:hZ,configFields:[$e("dom"),$e("behaviours")],partFields:[yZ,pZ,k8,vZ,SZ,wZ,CZ,xZ,EZ,kZ],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,l)=>{t.setSidebar(s,c,l)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(t,s)=>{t.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,c)=>{t.setViews(s,c)},toggleView:(t,s,c)=>t.toggleView(s,c),whichView:(t,s)=>t.whichView(s)}});const _Z="file edit view insert format tools table help",UD={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},AZ=(t,s,c)=>{const l=JN(c).split(/[ ,]/);return{text:t.title,getItems:()=>_e(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:br(l,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},WD=t=>t.split(" "),_8=(t,s)=>{const c={...UD,...s.menus},l=$o(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?WD(_Z):WD(s.menubar===!1?"":s.menubar),g=ho(d,C=>{const S=In(UD,C);return l?S||at(s.menus,C).exists(T=>In(T,"items")):S}),h=Pe(g,C=>{const S=c[C];return AZ({title:S.title,items:WD(S.items)},s,t)});return ho(h,C=>{const S=T=>rn(T)||T.type!=="separator";return C.getItems().length>0&&br(C.getItems(),S)})},_b=t=>{const s=()=>{t._skinLoaded=!0,hV(t)};return()=>{t.initialized?s():t.on("init",s)}},A8=(t,s)=>()=>h6(t,{message:s}),OZ=t=>{const s=_A(t);return s?A.from(s):A.none()},O8=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),V4=(t,s,c,l)=>(t.on("remove",()=>l.unloadRawCss(s)),l.loadRawCss(s,c)),DZ=(t,s)=>"ui/"+t+"/"+s,D8=t=>A.from(tinymce.Resource.get(t)).filter(rn),ZD=(t,s,c="")=>{const l=OZ(t).map(g=>DZ(g,`${s}.css`)),d=l.bind(D8);return Ur(l,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=t.editorManager.suffix;return{_kind:"load-stylesheet",url:c+`/${s}${g}.css`}})},RZ=(t,s)=>{const c=t.ui.styleSheetLoader,l=ZD(t,"skin",s);switch(l._kind){case"load-raw":const{key:d,css:g}=l;return V4(t,d,g,c),Promise.resolve();case"load-stylesheet":const{url:h}=l;return O8(t,h,c);default:return Promise.resolve()}},MZ=(t,s)=>{if(fl(Je.fromDom(t.getElement()))){const l=TS.DOM.styleSheetLoader,d=ZD(t,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return V4(t,g,h,l),Promise.resolve();case"load-stylesheet":const{url:C}=d;return O8(t,C,l);default:return Promise.resolve()}}else return Promise.resolve()},NZ=(t,s,c)=>{const d=ZD(t,s?"content.inline":"content",c);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?V4(t,g,h,t.ui.styleSheetLoader):t.on("PostRender",()=>{V4(t,g,h,t.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return c&&t.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},BZ=async(t,s)=>{const c=t1(s);if(await NZ(s,t,c),!wT(s)&&rn(c))return Promise.all([RZ(s,c),MZ(s,c)]).then()},R8=(t,s)=>BZ(t,s).then(_b(s),A8(s,"Skin could not be loaded")),PZ=Rn(R8,!1),$Z=Rn(R8,!0),M8=t=>({isEnabled:()=>!Ct.isDisabled(t),setEnabled:s=>Ct.set(t,!s),setText:s=>Pt(t,vd,{text:s}),setIcon:s=>Pt(t,Eb,{icon:s})}),IZ=t=>({setActive:s=>{xn.set(t,s)},isActive:()=>xn.isOn(t),isEnabled:()=>!Ct.isDisabled(t),setEnabled:s=>Ct.set(t,!s),setText:s=>Pt(t,vd,{text:s}),setIcon:s=>Pt(t,Eb,{icon:s})}),jD=(t,s)=>t.map(c=>({"aria-label":s.translate(c)})).getOr({}),GD=nt("focus-button"),qD=(t,s,c,l,d,g,h)=>{const C=s.map(T=>no(g4(T,"tox-tbtn",d))),S=t.map(T=>no(af(T,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...jD(c,d),...Po(h)?{"data-mce-name":h}:{}}},components:Wy([S.map(T=>T.asSpec()),C.map(T=>T.asSpec())]),eventOrder:{[wa()]:["focusing","alloy.base.behaviour",i1],[bi()]:[i1,"toolbar-group-button-events"],[Vd()]:[i1,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:We([$i.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),cr(()=>d.checkUiComponentContext(g)),sn(i1,[Wo((T,O)=>fD(T)),Me(vd,(T,O)=>{C.bind(N=>N.getOpt(T)).each(N=>{an.set(N,[Yo(d.translate(O.event.text))])})}),Me(Eb,(T,O)=>{S.bind(N=>N.getOpt(T)).each(N=>{an.set(N,[af(O.event.icon,d.icons)])})}),Me(wa(),(T,O)=>{O.event.prevent(),Tn(T,GD)})])].concat(l.getOr([])))}},lw=(t,s,c,l,d)=>{const g=s.shared,h=Et(ae),C={toolbarButtonBehaviours:[],getApi:M8,onSetup:t.onSetup},S=[sn("toolbar-group-button-events",[sm(C,h),hd(C,h)]),...t.tooltip.map(T=>ms.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(T)}))).toArray()];return cg.sketch({lazySink:g.getSink,fetch:()=>_o.nu(T=>{T(Pe(c(t.items),I4))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:qD(t.icon,t.text,t.tooltip,A.some(S),g.providers,t.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},N8=(t,s,c,l)=>{var d;const g=Et(ae),h=qD(t.icon,t.text,t.tooltip,A.none(),c,t.context,l);return Fc.sketch({dom:h.dom,components:h.components,eventOrder:m$,buttonBehaviours:{...We([sn("toolbar-button-events",[TU({onAction:t.onAction,getApi:s.getApi}),sm(s,g),hd(s,g)]),...t.tooltip.map(C=>ms.config(c.tooltips.getConfig({tooltipText:c.translate(C)+t.shortcut.map(S=>` (${OO(S)})`).getOr("")}))).toArray(),$i.toolbarButton(()=>!t.enabled||c.checkUiComponentContext(t.context).shouldDisable),cr(()=>c.checkUiComponentContext(t.context))].concat(s.toolbarButtonBehaviours)),[i1]:(d=h.buttonBehaviours)===null||d===void 0?void 0:d[i1]}})},FZ=(t,s,c)=>iw(t,s,[],c),iw=(t,s,c,l)=>N8(t,{toolbarButtonBehaviours:c.length>0?[sn("toolbarButtonWith",c)]:[],getApi:M8,onSetup:t.onSetup},s,l),LZ=(t,s,c)=>B8(t,s,[],c),B8=(t,s,c,l)=>N8(t,{toolbarButtonBehaviours:[an.config({}),xn.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[sn("toolbarToggleButtonWith",c)]:[]),getApi:IZ,onSetup:t.onSetup},s,l),HZ=(t,s,c)=>l=>_o.nu(d=>s.fetch(d)).map(d=>A.from(l4(uo(s4(nt("menu-value"),d,g=>{s.onItemAction(t(l),g)},s.columns,s.presets,fd.CLOSE_ON_EXECUTE,s.select.getOr(bn),c),{movement:KS(s.columns,s.presets),menuBehaviours:fb.unnamedEvents(s.columns!=="auto"?[]:[Wo((g,h)=>{e6(g,4,RT(s.presets)).each(({numRows:C,numColumns:S})=>{kt.setGridSize(g,C,S)})})])})))),zZ=(t,s,c)=>{const l=Et(t.tooltip.getOr("")),d=C=>({isEnabled:()=>!Ct.isDisabled(C),setEnabled:S=>Ct.set(C,!S),setIconFill:(S,T)=>{io(C.element,`svg path[class="${S}"], rect[class="${S}"]`).each(O=>{Wt(O,"fill",T)})},setActive:S=>{Wt(C.element,"aria-pressed",S),io(C.element,"span").each(T=>{C.getSystem().getByDom(T).each(O=>xn.set(O,S))})},isActive:()=>io(C.element,"span").exists(S=>C.getSystem().getByDom(S).exists(xn.isOn)),setText:S=>io(C.element,"span").each(T=>C.getSystem().getByDom(T).each(O=>Pt(O,vd,{text:S}))),setIcon:S=>io(C.element,"span").each(T=>C.getSystem().getByDom(T).each(O=>Pt(O,Eb,{icon:S}))),setTooltip:S=>{const T=s.providers.translate(S);Wt(C.element,"aria-label",T),l.set(S)}}),g=Et(ae),h={getApi:d,onSetup:t.onSetup};return fT.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...jD(t.tooltip,s.providers),...Po(c)?{"data-mce-name":c}:{}}},onExecute:C=>{const S=d(C);S.isEnabled()&&t.onAction(S)},onItemExecute:(C,S,T)=>{},splitDropdownBehaviours:We([sn("split-dropdown-events",[Wo((C,S)=>fD(C)),Me(GD,Yt.focus),sm(h,g),hd(h,g)]),$i.splitButton(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(t.context).shouldDisable),cr(()=>s.providers.checkUiComponentContext(t.context)),K0.config({}),...t.tooltip.map(C=>ms.config({...s.providers.tooltips.getConfig({tooltipText:s.providers.translate(C),onShow:S=>{if(l.get()!==C){const T=s.providers.translate(l.get());ms.setComponents(S,s.providers.tooltips.getComponents({tooltipText:T}))}}})})).toArray()]),eventOrder:{[bi()]:["alloy.base.behaviour","split-dropdown-events","tooltipping"],[Vd()]:["split-dropdown-events","tooltipping"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:HZ(d,t,s.providers),parts:{menu:NT(!1,t.columns,t.presets)},components:[fT.parts.button(qD(t.icon,t.text,A.none(),A.some([xn.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),$i.toolbarButton(bn),cr(te({contextType:"any",shouldDisable:!1}))]),s.providers,t.context)),fT.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:ZA("chevron-down",s.providers.icons)},buttonBehaviours:We([$i.splitButton(bn),cr(te({contextType:"any",shouldDisable:!1}))])}),fT.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},VZ=".tox-toolbar-slider__input,.tox-toolbar-textfield",P8=t=>{fs.getContent(t).each(s=>{io(s.element,VZ).fold(()=>kt.focusIn(s),ro)})},UZ=t=>Is(t.element).each(s=>{Vl(s,'[tabindex="-1"]').each(c=>{ro(c)})}),$8=nt("forward-slide"),U4=nt("backward-slide"),KD=nt("change-slide-event"),YD="tox-pop--resizing",WZ=t=>{const s=Et([]);return{sketch:fs.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:l=>{s.set([]),fs.getContent(l).each(d=>{Ye(d.element,"visibility")}),Ao(l.element,YD),Ye(l.element,"width")},onHide:()=>{s.set([]),t.onHide()},inlineBehaviours:We([sn("context-toolbar-events",[wp(L1(),(l,d)=>{d.event.raw.propertyName==="width"&&(Ao(l.element,YD),Ye(l.element,"width"))}),Me(KD,(l,d)=>{const g=l.element;Ye(g,"width");const h=_s(g),C=Is(l.element).isSome();Ye(g,"left"),Ye(g,"right"),Ye(g,"max-width"),fs.setContent(l,d.event.contents),hs(g,YD);const S=_s(g);on(g,"transition","none"),fs.reposition(l),Ye(g,"transition"),on(g,"width",h+"px"),d.event.focus.fold(()=>{C&&P8(l)},T=>{vl(ys(l.element)).fold(()=>ro(T),O=>{lo(O,T)||ro(T)})}),setTimeout(()=>{on(l.element,"width",S+"px")},0)}),Me($8,(l,d)=>{fs.getContent(l).each(g=>{s.set(s.get().concat([{bar:g,focus:vl(ys(l.element))}]))}),Pt(l,KD,{contents:d.event.forwardContents,focus:A.none()})}),Me(U4,(l,d)=>{t.onBack(),Bl(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),Pt(l,KD,{contents:jl(g.bar),focus:g.focus})})})]),kt.config({mode:"special",onEscape:l=>Bl(s.get()).fold(()=>t.onEscape(),d=>(Tn(l,U4),A.some(!0)))})]),lazySink:()=>Qt.value(t.sink)}),inSubtoolbar:()=>s.get().length>0}},ZZ=(t,s)=>{const c=gi(SO({type:"button",icon:"chevron-left",tooltip:"Back",onAction:ae}));return iw(c,s.shared.providers,[Me(mD,l=>{Tn(l,U4)})])},r2=(t,s,c)=>rl(c)?t.translate(s):t.translate([s,t.translate(c)]),jZ=(t,s)=>{const c=(h,C,S,T)=>{const O=t.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:O});if(h.type==="submenu"){const N=_e(h.getStyleItems(),F=>l(F,C,T));return C===0&&N.length<=0?A.none():A.some({type:"nestedmenuitem",text:O,enabled:N.length>0,getSubmenuItems:()=>_e(h.getStyleItems(),F=>l(F,C,T))})}else return A.some({type:"togglemenuitem",text:O,icon:h.icon,active:h.isSelected(T),enabled:!S,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),N=>({meta:{style:N}}))})},l=(h,C,S)=>{const T=h.type==="formatter"&&s.isInvalid(h);return C===0?T?[]:c(h,C,!1,S).toArray():c(h,C,T,S).toArray()},d=h=>{const C=s.getCurrentValue(),S=s.shouldHide?0:1;return _e(h,T=>l(T,S,C))};return{validateItems:d,getFetch:(h,C)=>(S,T)=>{const O=C(),N=d(O),F=Tb(N,fd.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});T(F)}}},c2=(t,s)=>{const c=s.dataset,l=c.type==="basic"?()=>Pe(c.data,d=>AD(d,s.isSelectedFor,s.getPreviewFor)):c.getData;return{items:jZ(t,s),getStyleItems:l}},uw=(t,s,c,l,d,g)=>{const{items:h,getStyleItems:C}=c2(s,c),S=Et(c.tooltip),T=N=>({getComponent:te(N),setTooltip:F=>{const W=s.shared.providers.translate(F);Wt(N.element,"aria-label",W),S.set(F)}}),O=N=>{const F=W=>N.setTooltip(r2(t,l(W.value),W.value));return t.on(d,F),qS(vb(t,"NodeChange",W=>{const q=W.getComponent();c.updateText(q),Ct.set(W.getComponent(),!t.selection.isEditable()||C().length===0)})(N),()=>t.off(d,F))};return hD({context:"mode:design",text:c.icon.isSome()?A.none():c.text,icon:c.icon,ariaLabel:A.some(c.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,C),onSetup:O,getApi:T,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[ms.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(c.tooltip),onShow:N=>{if(c.tooltip!==S.get()){const F=s.shared.providers.translate(S.get());ms.setComponents(N,s.shared.providers.tooltips.getComponents({tooltipText:F}))}}})})]},"tox-tbtn",s.shared,g)},W4=t=>Pe(t,s=>{let c=s,l=s;const d=s.split("=");return d.length>1&&(c=d[0],l=d[1]),{title:c,format:l}}),GZ=t=>({type:"basic",data:t});var a2;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(a2||(a2={}));const qZ=(t,s)=>s===a2.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),XD=(t,s,c)=>{const l=t.options.get(s);return{type:"basic",data:W4(qZ(l,c))}},KZ="Align",I8=te("Alignment {0}"),JD="left",QD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],F8=t=>{const s=()=>Jt(QD,C=>t.formatter.match(C.format)),c=C=>()=>t.formatter.match(C),l=C=>A.none,d=C=>{const T=s().fold(te(JD),O=>O.title.toLowerCase());Pt(C,Eb,{icon:`align-${T}`}),v6(t,{value:T})},g=GZ(QD),h=C=>()=>Jt(QD,S=>S.format===C.format).each(S=>t.execCommand(S.command));return{tooltip:r2(t,I8(),JD),text:A.none(),icon:A.some("align-left"),isSelectedFor:c,getCurrentValue:A.none,getPreviewFor:l,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},YZ=(t,s)=>uw(t,s,F8(t),I8,"AlignTextUpdate","align"),XZ=(t,s)=>{const c=c2(s,F8(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(KZ),onSetup:Ka(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},L8=(t,s)=>{const c=s(),l=Pe(c,d=>d.format);return A.from(t.formatter.closest(l)).bind(d=>Jt(c,g=>g.format===d))},eR="Blocks",tR=te("Block {0}"),nR="Paragraph",H8=t=>{const s=g=>()=>t.formatter.match(g),c=g=>()=>{const h=t.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(g))}):A.none()},l=g=>{const C=L8(t,()=>d.data).fold(te(nR),S=>S.title);Pt(g,vd,{text:C}),qa(t,{value:C})},d=XD(t,"block_formats",a2.SemiColon);return{tooltip:r2(t,tR(),nR),text:A.some(nR),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:c,onAction:WO(t),updateText:l,dataset:d,shouldHide:!1,isInvalid:g=>!t.formatter.canApply(g.format)}},JZ=(t,s)=>uw(t,s,H8(t),tR,"BlocksTextUpdate","blocks"),QZ=(t,s)=>{const c=c2(s,H8(t));t.ui.registry.addNestedMenuItem("blocks",{text:eR,onSetup:Ka(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},ej="Fonts",z8=te("Font {0}"),oR="System Font",tj=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],V8=t=>{const s=t.split(/\s*,\s*/);return Pe(s,c=>c.replace(/^['"]+|['"]+$/g,""))},U8=(t,s)=>s.length>0&&Da(s,c=>t.indexOf(c.toLowerCase())>-1),nj=(t,s)=>{if(t.indexOf("-apple-system")===0||s.length>0){const c=V8(t.toLowerCase());return U8(c,tj)||U8(c,s)}else return!1},W8=t=>{const s=()=>{const S=q=>q?V8(q)[0]:"",T=t.queryCommandValue("FontName"),O=C.data,N=T?T.toLowerCase():"",F=kA(t);return{matchOpt:Jt(O,q=>{const ee=q.format;return ee.toLowerCase()===N||S(ee).toLowerCase()===S(N).toLowerCase()}).orThunk(()=>Sr(nj(N,F),{title:oR,format:N})),font:T}},c=S=>T=>T.exists(O=>O.format===S),l=()=>{const{matchOpt:S}=s();return S},d=S=>()=>A.some({tag:"div",styles:S.indexOf("dings")===-1?{"font-family":S}:{}}),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,S.format)})},h=S=>{const{matchOpt:T,font:O}=s(),N=T.fold(te(O),F=>F.title);Pt(S,vd,{text:N}),y6(t,{value:N})},C=XD(t,"font_family_formats",a2.SemiColon);return{tooltip:r2(t,z8(),oR),text:A.some(oR),icon:A.none(),isSelectedFor:c,getCurrentValue:l,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:bn}},oj=(t,s)=>uw(t,s,W8(t),z8,"FontFamilyTextUpdate","fontfamily"),sj=(t,s)=>{const c=c2(s,W8(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(ej),onSetup:Ka(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})};var dw=tinymce.util.Tools.resolve("tinymce.util.VK");const rj=(t,s,c,l)=>{let d=A.none();const g=de=>de.map(ye=>dt.getValue(ye)).getOr(""),h=vb(t,"NodeChange SwitchMode DisabledStateChange",de=>{const ye=de.getComponent();d=A.some(ye),c.updateInputValue(ye),Ct.set(ye,!t.selection.isEditable()||SA(t))}),C=de=>({getComponent:te(de)}),S=Et(ae),T=nt("custom-number-input-events"),O=(de,ye,Te)=>{const rt=g(d),Ue=c.getNewValue(rt,de),ke=rt.length-`${Ue}`.length,mt=d.map(Dt=>Dt.element.dom.selectionStart-ke),Ut=d.map(Dt=>Dt.element.dom.selectionEnd-ke);c.onAction(Ue,Te),d.each(Dt=>{dt.setValue(Dt,Ue),ye&&(mt.each(Nn=>Dt.element.dom.selectionStart=Nn),Ut.each(Nn=>Dt.element.dom.selectionEnd=Nn))})},N=(de,ye)=>O((Te,rt)=>Te-rt,de,ye),F=(de,ye)=>O((Te,rt)=>Te+rt,de,ye),W=de=>On(de.element).fold(A.none,ye=>(ro(ye),A.some(!0))),q=de=>bl(de.element)?(Fu(de.element).each(ye=>ro(ye)),A.some(!0)):A.none(),ee=(de,ye,Te,rt)=>{const Ue=Et(ae),ke=s.shared.providers.translate(Te),mt=nt("altExecuting"),Ut=vb(t,"NodeChange SwitchMode DisabledStateChange",Nn=>{Ct.set(Nn.getComponent(),!t.selection.isEditable()||SA(t))}),Dt=Nn=>{Ct.isDisabled(Nn)||de(!0)};return Fc.sketch({dom:{tag:"button",attributes:{"aria-label":ke,"data-mce-name":ye},classes:rt.concat(ye)},components:[f4(ye,s.shared.providers.icons)],buttonBehaviours:We([Ct.config({}),ms.config(s.shared.providers.tooltips.getConfig({tooltipText:ke})),sn(mt,[sm({onSetup:Ut,getApi:C},Ue),hd({getApi:C},Ue),Me(ec(),(Nn,nn)=>{(nn.event.raw.keyCode===dw.SPACEBAR||nn.event.raw.keyCode===dw.ENTER)&&(Ct.isDisabled(Nn)||de(!1))}),Me(Nf(),Dt),Me(Xu(),Dt)])]),eventOrder:{[ec()]:[mt,"keying"],[Nf()]:[mt,"alloy.base.behaviour"],[Xu()]:[mt,"alloy.base.behaviour"],[bi()]:["alloy.base.behaviour",mt,"tooltipping"],[Vd()]:[mt,"tooltipping"]}})},ce=no(ee(de=>N(!1,de),"minus","Decrease font size",[])),Q=no(ee(de=>F(!1,de),"plus","Increase font size",[])),ue=no({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[ag.sketch({inputBehaviours:We([Ct.config({}),sn(T,[sm({onSetup:h,getApi:C},S),hd({getApi:C},S)]),sn("input-update-display-text",[Me(vd,(de,ye)=>{dt.setValue(de,ye.event.text)}),Me(Lw(),de=>{c.onAction(dt.getValue(de))}),Me(Mf(),de=>{c.onAction(dt.getValue(de))})]),kt.config({mode:"special",onEnter:de=>(O(Sn,!0,!0),A.some(!0)),onEscape:W,onUp:de=>(F(!0,!1),A.some(!0)),onDown:de=>(N(!0,!1),A.some(!0)),onLeft:(de,ye)=>(ye.cut(),A.none()),onRight:(de,ye)=>(ye.cut(),A.none())})])})],behaviours:We([Yt.config({}),kt.config({mode:"special",onEnter:q,onSpace:q,onEscape:W}),sn("input-wrapper-events",[Me(Ul(),de=>{ft([ce,Q],ye=>{const Te=Je.fromDom(ye.get(de).element.dom);bl(Te)&&pl(Te)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Po(l)?{"data-mce-name":l}:{}}},components:[ce.asSpec(),ue.asSpec(),Q.asSpec()],behaviours:We([Yt.config({}),kt.config({mode:"flow",focusInside:Ff.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:de=>bl(de.element)?A.none():(ro(de.element),A.some(!0))})])}},cj="Font sizes",Z8=te("Font size {0}"),j8="12pt",aj={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},lj={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},ij=(t,s)=>{const c=Math.pow(10,s);return Math.round(t*c)/c},uj=(t,s)=>/[0-9.]+px$/.test(t)?ij(parseInt(t,10)*72/96,s||0)+"pt":at(lj,t).getOr(t),G8=t=>at(aj,t).getOr(""),sR=t=>{const s=()=>{let S=A.none();const T=C.data,O=t.queryCommandValue("FontSize");if(O)for(let N=3;S.isNone()&&N>=0;N--){const F=uj(O,N),W=G8(F);S=Jt(T,q=>q.format===O||q.format===F||q.format===W)}return{matchOpt:S,size:O}},c=S=>T=>T.exists(O=>O.format===S),l=()=>{const{matchOpt:S}=s();return S},d=te(A.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},h=S=>{const{matchOpt:T,size:O}=s(),N=T.fold(te(O),F=>F.title);Pt(S,vd,{text:N}),BG(t,{value:N})},C=XD(t,"font_size_formats",a2.Space);return{tooltip:r2(t,Z8(),j8),text:A.some(j8),icon:A.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:bn}},dj=(t,s)=>uw(t,s,sR(t),Z8,"FontSizeTextUpdate","fontsize"),rR=t=>{var s;const c={step:1};return(s={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[t])!==null&&s!==void 0?s:c},mw=16,cR=t=>t>=0,Z4=t=>{const s=()=>t.queryCommandValue("FontSize");return{updateInputValue:l=>Pt(l,vd,{text:s()}),onAction:(l,d)=>t.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{cs(l,["unsupportedLength","empty"]);const g=s(),h=cs(l,["unsupportedLength","empty"]).or(cs(g,["unsupportedLength","empty"])),C=h.map(F=>F.value).getOr(mw),S=nB(t),T=h.map(F=>F.unit).filter(F=>F!=="").getOr(S),O=d(C,rR(T).step),N=`${cR(O)?O:C}${T}`;return N!==g&&PG(t,{value:N}),N}}},Ab=(t,s)=>rj(t,s,Z4(t),"fontsizeinput"),j4=(t,s)=>{const c=c2(s,sR(t));t.ui.registry.addNestedMenuItem("fontsize",{text:cj,onSetup:Ka(t),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},mj="Formats",aR=t=>rl(t)?"Formats":"Format {0}",lR=(t,s)=>{const c="Formats",l=h=>()=>t.formatter.match(h),d=h=>()=>{const C=t.formatter.get(h);return C!==void 0?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(h))}):A.none()},g=h=>{const C=N=>w4(N)?_e(N.items,C):H$(N)?[{title:N.title,format:N.format}]:[],S=_e(Z$(t),C),O=L8(t,te(S)).fold(te({title:c,tooltipLabel:""}),N=>({title:N.title,tooltipLabel:N.title}));Pt(h,vd,{text:O.title}),b6(t,{value:O.tooltipLabel})};return{tooltip:r2(t,aR(""),""),text:A.some(c),icon:A.none(),isSelectedFor:l,getCurrentValue:A.none,getPreviewFor:d,onAction:WO(t),updateText:g,shouldHide:YN(t),isInvalid:h=>!t.formatter.canApply(h.format),dataset:s}},q8=(t,s)=>{const c={type:"advanced",...s.styles};return uw(t,s,lR(t,c),aR,"StylesTextUpdate","styles")},fj=(t,s)=>{const c={type:"advanced",...s.styles},l=c2(s,lR(t,c));t.ui.registry.addNestedMenuItem("styles",{text:mj,onSetup:Ka(t,()=>l.getStyleItems().length>0),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},gj=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],fw=(t,s)=>(c,l,d,g)=>{const h=t(c).mapError(C=>Of(C)).getOrDie();return s(h,l,d,g)},K8={button:fw(SO,(t,s,c,l)=>FZ(t,s.shared.providers,l)),togglebutton:fw(BP,(t,s,c,l)=>LZ(t,s.shared.providers,l)),menubutton:fw(CP,(t,s,c,l)=>t2(t,"tox-tbtn",s,A.none(),!1,l)),splitbutton:fw(Vz,(t,s,c,l)=>zZ(t,s.shared,l)),grouptoolbarbutton:fw(zz,(t,s,c,l)=>{const d=c.ui.registry.getAll().buttons,g=C=>q4(c,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,A.none()),h={[Ev]:s.shared.header.isPositionedAtTop()?Wm.TopToBottom:Wm.BottomToTop};switch(Ay(c)){case id.floating:return lw(t,s,g,h,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Y8=(t,s,c,l)=>at(K8,t.type).fold(()=>(console.error("skipping button defined by",t),A.none()),d=>A.some(d(t,s,c,l))),G4={styles:q8,fontsize:dj,fontsizeinput:Ab,fontfamily:oj,blocks:JZ,align:YZ,navigateback:ZZ},hj=t=>{const s=Pe(gj,c=>{const l=ho(c.items,d=>In(t,d)||In(G4,d));return{name:c.name,items:l}});return ho(s,c=>c.items.length>0)},pj=t=>{const s=t.split("|");return Pe(s,c=>({items:c.trim().split(" ")}))},bj=t=>en(t,s=>(In(s,"name")||In(s,"label"))&&In(s,"items")),vj=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?hj(c):rn(s)?pj(s):bj(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},l2=(t,s,c,l,d,g)=>at(s,c.toLowerCase()).orThunk(()=>g.bind(h=>An(h,C=>at(s,C+c.toLowerCase())))).fold(()=>at(G4,c.toLowerCase()).map(h=>h(t,d)),h=>h.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${c}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):Y8(h,d,t,c.toLowerCase())),q4=(t,s,c,l)=>{const d=vj(s),g=Pe(d,h=>{const C=_e(h.items,S=>S.trim().length===0?[]:l2(t,s.buttons,S,s.allowToolbarGroups,c,l).toArray());return{title:A.from(t.translate(h.name)),label:Sr(h.label!==void 0,t.translate(h.label)),items:C}});return ho(g,h=>h.items.length>0)},X8=(t,s,c,l)=>{const d=s.mainUi.outerContainer,g=c.toolbar,h=c.buttons;if(en(g,rn)){const C=g.map(S=>{const T={toolbar:S,buttons:h,allowToolbarGroups:c.allowToolbarGroups};return q4(t,T,l,A.none())});Go.setToolbars(d,C)}else Go.setToolbar(d,q4(t,c,l,A.none()))},J8=Lo(),yj=J8.os.isiOS()&&J8.os.version.major<=12,Q8=(t,s)=>{const{uiMotherships:c}=s,l=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,h=Et(is(d.innerWidth,d.innerHeight)),C=Et(is(g.offsetWidth,g.offsetHeight)),S=()=>{const F=h.get();(F.left!==d.innerWidth||F.top!==d.innerHeight)&&(h.set(is(d.innerWidth,d.innerHeight)),GS(t))},T=()=>{const F=t.getDoc().documentElement,W=C.get();(W.left!==F.offsetWidth||W.top!==F.offsetHeight)&&(C.set(is(F.offsetWidth,F.offsetHeight)),GS(t))},O=F=>{pV(t,F)};l.bind(d,"resize",S),l.bind(d,"scroll",O);const N=ss(Je.fromDom(t.getBody()),"load",T);t.on("hide",()=>{ft(c,F=>{on(F.element,"display","none")})}),t.on("show",()=>{ft(c,F=>{Ye(F.element,"display")})}),t.on("NodeChange",T),t.on("remove",()=>{N.unbind(),l.unbind(d,"resize",S),l.unbind(d,"scroll",O),d=null})},Cj=(t,s,c)=>{n1(t)&&Ic(c.mainUi.mothership.element,c.popupUi.mothership),Pr(s,c.dialogUi.mothership)};var Sj=Object.freeze({__proto__:null,render:(t,s,c,l,d)=>{const{mainUi:g,uiMotherships:h}=s,C=Et(0),S=g.outerContainer;PZ(t);const T=Je.fromDom(d.targetNode),O=ml(ys(T));Ic(T,g.mothership),Cj(t,O,s),t.on("PostRender",()=>{Go.setSidebar(S,c.sidebar,ST(t))}),t.on("SkinLoaded",()=>{X8(t,s,c,l),C.set(t.getWin().innerWidth),Go.setMenubar(S,_8(t,c)),Go.setViews(S,c.views),Q8(t,s)});const N=Go.getSocket(S).getOrDie("Could not find expected socket element");if(yj){Qs(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ee=va(()=>{t.dispatch("ScrollContent")},20),ce=Ho(N.element,"scroll",ee.throttle);t.on("remove",ce.unbind)}o6(t,s),t.addCommand("ToggleSidebar",(ee,ce)=>{Go.toggleSidebar(S,ce),CV(t)}),t.addQueryValueHandler("ToggleSidebar",()=>{var ee;return(ee=Go.whichSidebar(S))!==null&&ee!==void 0?ee:""}),t.addCommand("ToggleView",(ee,ce)=>{if(Go.toggleView(S,ce)){const Q=S.element;g.mothership.broadcastOn([sg()],{target:Q}),ft(h,ue=>{ue.broadcastOn([sg()],{target:Q})}),zc(Go.whichView(S))&&(t.focus(),t.nodeChanged(),Go.refreshToolbar(S)),C6(t)}}),t.addQueryValueHandler("ToggleView",()=>{var ee;return(ee=Go.whichView(S))!==null&&ee!==void 0?ee:""});const F=Ay(t),W=()=>{Go.refreshToolbar(s.mainUi.outerContainer)};(F===id.sliding||F===id.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ee=t.getWin().innerWidth;ee!==C.get()&&(W(),C.set(ee))});const q={setEnabled:ee=>{Uy(s,ee?"setEnabled":"setDisabled")},isEnabled:()=>!Ct.isDisabled(S)};return{iframeContainer:N.element.dom,editorContainer:S.element.dom,api:q}}});const iR=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),gw=t=>Vc(t)?t+"px":t,K4=(t,s,c)=>{const l=s.filter(g=>t<g),d=c.filter(g=>t>g);return l.or(d).getOr(t)},eI=(t,s)=>{if(typeof s=="number")return A.from(s);const c=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(c){const l=c[2],d=Number.parseFloat(c[1]);if(Number.isNaN(d)||d<0)return A.none();if(l==="em")return A.from(d*Number.parseFloat(window.getComputedStyle(t.dom).fontSize));if(l==="pt")return A.from(d*(72/96));if(l==="px")return A.from(d)}return A.none()},wj=t=>{const s=eI(Je.fromDom(t.targetElm),_y(t)),c=yT(t),l=wA(t);return s.map(d=>K4(d,c,l))},xj=t=>wj(t).getOr(_y(t)),uR=t=>{const s=Qp(t),c=vT(t),l=CT(t);return iR(s).map(d=>K4(d,c,l))},Ej=t=>uR(t).getOr(Qp(t)),{ToolbarLocation:Ph,ToolbarMode:dR}=MA,Tj=40,Y4=(t,s,c,l,d)=>{const{mainUi:g,uiMotherships:h}=c,C=TS.DOM,S=My(t),T=Ny(t),O=CT(t).or(uR(t)),N=l.shared.header,F=N.isPositionedAtTop,W=150,q=Ay(t),ee=q===dR.sliding||q===dR.floating,ce=Et(!1),Q=()=>ce.get()&&!t.removed,ue=_t=>ee?_t.fold(te(0),Fe=>Fe.components().length>1?wn(Fe.components()[1].element):0):0,de=_t=>{switch(xA(t)){case Ph.auto:const Fe=Go.getToolbar(g.outerContainer),et=ue(Fe),jt=wn(_t.element)-et,gn=Qr(s);if(gn.y>jt)return"top";{const mn=ya(s),Do=Math.max(mn.dom.scrollHeight,wn(mn));return gn.bottom<Do-jt||Mc().bottom<gn.bottom-jt?"bottom":"top"}case Ph.bottom:return"bottom";case Ph.top:default:return"top"}},ye=_t=>{d.on(Fe=>{ds.setModes(Fe,[_t]),N.setDockingMode(_t);const et=F()?Wm.TopToBottom:Wm.BottomToTop;Wt(Fe.element,Ev,et)})},Te=()=>{d.on(_t=>{const Fe=O.getOrThunk(()=>Rm().width-$d(s).left-10);on(_t.element,"max-width",Fe+"px")})},rt=(_t,Fe)=>{d.on(et=>{const jt=Go.getToolbar(g.outerContainer),gn=ue(jt),Ft=Qr(s),mn=Ue(t,g.outerContainer.element),Do=()=>mn.fold(()=>Ft.x,ha=>{const Su=Qr(ha);return lo(ha,gc())?Ft.x:Ft.x-Su.x}),wo=()=>mn.fold(()=>F()?Math.max(Ft.y-wn(et.element)+gn,0):Ft.bottom,ha=>{var Su;const wu=Qr(ha),lm=(Su=ha.dom.scrollTop)!==null&&Su!==void 0?Su:0,hg=lo(ha,gc())?Math.max(Ft.y-wn(et.element)+gn,0):Ft.y-wu.y+lm-wn(et.element)+gn;return F()?hg:Ft.bottom}),Jl=Do(),xs=Sr(_t,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(ha=>ha>W).map(ha=>{const Su=Fe.getOr(er()),wu=window.innerWidth-(Jl-Su.left),lm=Math.max(Math.min(ha,wu),W);return wu<ha&&on(g.outerContainer.element,"width",lm+"px"),{width:lm+"px"}}).getOr({width:"max-content"}),Cu={position:"absolute",left:Math.round(Jl)+"px",top:wo()+"px"};Qs(g.outerContainer.element,{...Cu,...xs})})},Ue=(_t,Fe)=>n1(_t)?Af(Fe):A.none(),ke=()=>{ft(h,_t=>{_t.broadcastOn([Kp()],{})})},mt=()=>!S&&(Xr(g.outerContainer.element).left+Cf(g.outerContainer.element)>=window.innerWidth-Tj||X(g.outerContainer.element,"width").isSome())?(on(g.outerContainer.element,"position","absolute"),on(g.outerContainer.element,"left","0px"),Ye(g.outerContainer.element,"width"),!0):!1,Ut=_t=>{if(!Q())return;S||Te();const Fe=er(),et=S?!1:mt();if(ee&&Go.refreshToolbar(g.outerContainer),!S){const jt=er(),gn=Sr(Fe.left!==jt.left,Fe);rt(et,gn),gn.each(Ft=>{mr(Ft.left,jt.top)})}T&&d.on(_t),ke()},Dt=()=>S||!T||!Q()?!1:d.get().exists(_t=>{const Fe=N.getDockingMode(),et=de(_t);return et!==Fe?(ye(et),!0):!1});return{isVisible:Q,isPositionedAtTop:F,show:()=>{ce.set(!0),on(g.outerContainer.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),ft(h,_t=>{Ye(_t.element,"display")}),Dt(),n1(t)?Ut(_t=>ds.isDocked(_t)?ds.reset(_t):ds.refresh(_t)):Ut(ds.refresh)},hide:()=>{ce.set(!1),on(g.outerContainer.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus"),ft(h,_t=>{on(_t.element,"display","none")})},update:Ut,updateMode:()=>{Dt()&&Ut(ds.reset)},repositionPopups:ke}},Ob=(t,s)=>{const c=Qr(t);return{pos:s?c.y:c.bottom,bounds:c}},X4=(t,s,c,l)=>{const d=Et(Ob(s,c.isPositionedAtTop())),g=T=>{const{pos:O,bounds:N}=Ob(s,c.isPositionedAtTop()),{pos:F,bounds:W}=d.get(),q=N.height!==W.height||N.width!==W.width;d.set({pos:O,bounds:N}),q&&GS(t,T),c.isVisible()&&(F!==O?c.update(ds.reset):q&&(c.updateMode(),c.repositionPopups()))};l||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(ds.reset)),t.on("NodeChange keydown",T=>{requestAnimationFrame(()=>g(T))});let h=0;const C=cl(()=>c.update(ds.refresh),33);t.on("ScrollWindow",()=>{const T=er().left;T!==h&&(h=T,C.throttle()),c.updateMode()}),n1(t)&&t.on("ElementScroll",T=>{c.update(ds.refresh)});const S=Ma();S.set(ss(Je.fromDom(t.getBody()),"load",T=>g(T.raw))),t.on("remove",()=>{S.clear()})};var J4=Object.freeze({__proto__:null,render:(t,s,c,l,d)=>{const{mainUi:g}=s,h=dn(),C=Je.fromDom(d.targetNode),S=Y4(t,C,s,l,h),T=sb(t);$Z(t);const O=()=>{if(h.isSet()){S.show();return}h.set(Go.getHeader(g.outerContainer).getOrDie());const F=DA(t);n1(t)?(Ic(C,g.mothership),Ic(C,s.popupUi.mothership)):Pr(F,g.mothership),Pr(F,s.dialogUi.mothership);const W=()=>{X8(t,s,c,l),Go.setMenubar(g.outerContainer,_8(t,c)),S.show(),X4(t,C,S,T),t.nodeChanged()};T?t.once("SkinLoaded",W):W()};t.on("show",O),t.on("hide",S.hide),T||(t.on("focus",O),t.on("blur",S.hide)),t.on("init",()=>{(t.hasFocus()||T)&&O()}),o6(t,s);const N={show:O,hide:S.hide,setEnabled:F=>{Uy(s,F?"setEnabled":"setDisabled")},isEnabled:()=>!Ct.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:N}}});const Yl=()=>{const t=dn(),s=dn(),c=dn();return{dialogUi:t,popupUi:s,mainUi:c,getUiMotherships:()=>{const g=t.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],S=>lo(C.element,S.element)?[C]:[C,S]))},lazyGetInOuterOrDie:(g,h)=>()=>c.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},Q4="contexttoolbar-show",mR="contexttoolbar-hide",Db=(t,s,c)=>({setInputEnabled:l=>{!l&&c&&ro(c),Ct.set(t,!l)},isInputEnabled:()=>!Ct.isDisabled(t),hide:()=>{Tn(t,nv())},back:()=>{Tn(t,U4)},getValue:()=>s.get().getOrThunk(()=>dt.getValue(t)),setValue:l=>{t.getSystem().isConnected()?dt.setValue(t,l):s.set(l)}}),tI=(t,s,c)=>Me(mD,(l,d)=>{const g=t.get(l),h=Db(g,c,l.element);s.onAction(h,d.event.buttonApi)}),_j=(t,s,c,l)=>{const{primary:d,...g}=s.original,h=gi(SO({...g,type:"button",onAction:ae}));return iw(h,c,[tI(t,s,l)])},u1=(t,s,c,l)=>{const{primary:d,...g}=s.original,h=gi(BP({...g,type:"togglebutton",onAction:ae}));return B8(h,c,[tI(t,s,l)])},qG=t=>t.type==="contextformtogglebutton",Aj=(t,s,c,l)=>qG(s)?u1(t,s,c,l):_j(t,s,c,l),fR=(t,s,c,l)=>{const d=Pe(s,C=>no(Aj(t,C,c,l)));return{asSpecs:()=>Pe(d,C=>C.asSpec()),findPrimary:C=>An(s,(S,T)=>S.primary?A.from(d[T]).bind(O=>O.getOpt(C)).filter(De(Ct.isDisabled)):A.none())}},i2=(t,s,c,l)=>{const{width:d,height:g}=t.initValue();let h=e2;const C=nt("ratio-event"),S=Ue=>Db(Ue,l),T=Ue=>Gl(Ue,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Ue]},s.icons),O=()=>!1,N=t.label.getOr("Constrain proportions"),F=s.translate(N),W=vn.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":F,"data-mce-name":N}},components:[T("lock"),T("unlock")],buttonBehaviours:We([Ct.config({disabled:O}),Zo.config({}),ms.config(s.tooltips.getConfig({tooltipText:F}))])}),q=Ue=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Ue}),ee=Ue=>Vl(Ue.element,"div.tox-focusable-wrapper").fold(A.none,mt=>(ro(mt),A.some(!0))),ce=Ue=>Mn.parts.field({factory:ag,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Ue?d:g,inputBehaviours:We([Ct.config({disabled:O}),Zo.config({}),sn("size-input-toolbar-events",[Me(Xc(),(ke,mt)=>{Pt(ke,C,{isField1:Ue})})]),kt.config({mode:"special",onEnter:c,onEscape:ee})]),selectOnFocus:!1}),Q=Ue=>({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(Ue))]}),ue=Ue=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Ue],behaviours:We([Zo.config({}),Yt.config({}),kt.config({mode:"special",onEnter:ke=>io(ke.element,"input").fold(A.none,Ut=>(ro(Ut),A.some(!0)))})])}),de=ue(vn.parts.field1(q([Mn.parts.label(Q("Width:")),ce(!0)]))),ye=ue(vn.parts.field2(q([Mn.parts.label(Q("Height:")),ce(!1)]))),Te=Et(ae),rt=[sm({onBeforeSetup:Ue=>io(Ue.element,"input").each(ro),onSetup:t.onSetup,getApi:S},Te),jT({getApi:S},Te,l)];return vn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[de,q([W]),ye],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Ue,ke,mt)=>{p4(dt.getValue(Ue)).each(Ut=>{h(Ut).each(Dt=>{dt.setValue(ke,C$(Dt))})})},onInput:Ue=>Tn(Ue,K6),coupledFieldBehaviours:We([Yt.config({}),kt.config({mode:"flow",focusInside:Ff.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Ct.config({disabled:O,onDisabled:Ue=>{vn.getField1(Ue).bind(Mn.getField).each(Ct.disable),vn.getField2(Ue).bind(Mn.getField).each(Ct.disable),vn.getLock(Ue).each(Ct.disable)},onEnabled:Ue=>{vn.getField1(Ue).bind(Mn.getField).each(Ct.enable),vn.getField2(Ue).bind(Mn.getField).each(Ct.enable),vn.getLock(Ue).each(Ct.enable)}}),cr(()=>s.checkUiComponentContext("mode:design")),sn("size-input-toolbar-events2",[Me(C,(Ue,ke)=>{const mt=ke.event.isField1,Ut=mt?vn.getField1(Ue):vn.getField2(Ue),Dt=mt?vn.getField2(Ue):vn.getField1(Ue),Nn=Ut.map(dt.getValue).getOr(""),nn=Dt.map(dt.getValue).getOr("");h=S$(Nn,nn)}),Me(K6,Ue=>t.onInput(S(Ue))),...rt])])})},hw=(t,s,c)=>Mn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...t.toArray(),s],fieldBehaviours:We([Ct.config({disabled:()=>c.checkUiComponentContext("mode:design").shouldDisable,onDisabled:l=>{UZ(l),Mn.getField(l).each(Ct.disable)},onEnabled:l=>{Mn.getField(l).each(Ct.enable)}})])}),nI=(t,s,c,l)=>{const d=Et(ae),g=S=>Db(S,l),h=t.label.map(S=>Mn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(S))]})),C=Mn.parts.field({factory:ag,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(t.min()),max:String(t.max())},data:t.initValue().toString(),fromInputValue:S=>Na(S).getOr(t.min()),toInputValue:S=>String(S),inputBehaviours:We([Ct.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),cr(()=>s.checkUiComponentContext("mode:design")),kt.config({mode:"special",onEnter:c,onLeft:(S,T)=>(T.cut(),A.none()),onRight:(S,T)=>(T.cut(),A.none())}),sn("slider-events",[sm({onSetup:t.onSetup,getApi:g,onBeforeSetup:kt.focusIn},d),jT({getApi:g},d,l),Me($m(),S=>{t.onInput(g(S))})])])});return hw(h,C,s)},Oj=(t,s,c,l)=>{const d=Et(ae),g=O=>Db(O,l),h=t.label.map(O=>Mn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Yo(s.translate(O))]})),S={...t.placeholder.map(O=>({placeholder:s.translate(O)})).getOr({})},T=Mn.parts.field({factory:ag,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:S,data:t.initValue(),selectOnFocus:!0,inputBehaviours:We([Ct.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),cr(()=>s.checkUiComponentContext("mode:design")),kt.config({mode:"special",onEnter:c,onLeft:(O,N)=>(N.cut(),A.none()),onRight:(O,N)=>(N.cut(),A.none())}),sn("input-events",[sm({onSetup:t.onSetup,getApi:O=>Vl(O.element,".tox-toolbar").bind(F=>io(F,"button:enabled")).fold(()=>Db(O,l),F=>Db(O,l,F)),onBeforeSetup:kt.focusIn},d),jT({getApi:g},d,l),Me($m(),O=>{t.onInput(g(O))})])])});return hw(h,T,s)},gR=(t,s,c)=>{const l=dn(),g=no(t(c,T=>C.findPrimary(T).orThunk(()=>S.findPrimary(T)).map(O=>(oh(O),!0)),l)),h=ni(s.commands,T=>T.align==="start"),C=fR(g,h.pass,c,l),S=fR(g,h.fail,c,l);return ho([{title:A.none(),label:A.none(),items:C.asSpecs()},{title:A.none(),label:A.none(),items:[g.asSpec()]},{title:A.none(),label:A.none(),items:S.asSpecs()}],T=>T.items.length>0)},oI=(t,s)=>{switch(t.type){case"contextform":return gR(Rn(Oj,t),t,s);case"contextsliderform":return gR(Rn(nI,t),t,s);case"contextsizeinputform":return gR(Rn(i2,t),t,s)}},u2={renderContextForm:(t,s,c)=>F4({type:t,uid:nt("context-toolbar"),initGroups:oI(s,c),onEscape:A.none,cyclicKeying:!0,providers:c}),buildInitGroups:oI},Dj=(t,s,c)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,Rj=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=Gr(Je.fromDom(t.startContainer),t.startOffset).element;return(ji(c)?Oc(c):A.some(c)).filter(Zc).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},hR=t=>{const s=t.selection.getRng(),c=Rj(s);if(t.inline){const l=er();return Ss(l.left+c.left,l.top+c.top,c.width,c.height)}else{const l=Fd(Je.fromDom(t.getBody()));return Ss(l.x+c.left,l.y+c.top,c.width,c.height)}},YG=(t,s)=>s.filter(c=>Cs(c)&&Zi(c)).map(Fd).getOrThunk(()=>hR(t)),Mj=(t,s,c)=>{const l=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:l,width:d-l}},Nj=(t,s,c,l,d,g)=>{const h=Je.fromDom(t.getContainer()),C=io(h,".tox-editor-header").getOr(h),S=Qr(C),T=S.y>=s.bottom,O=l&&!T;if(t.inline&&O)return{y:Math.max(S.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!O)return{y:c.y,bottom:Math.min(S.y-g,c.bottom)};const N=d==="line"?Qr(h):s;return O?{y:Math.max(S.bottom+g,c.y),bottom:Math.min(N.bottom-g,c.bottom)}:{y:Math.max(N.y+g,c.y),bottom:Math.min(S.y-g,c.bottom)}},d2=(t,s,c,l=0)=>{const d=Rm(window),g=Qr(Je.fromDom(t.getContentAreaContainer())),h=tm(t)||DS(t)||Ry(t),{x:C,width:S}=Mj(g,d,l);if(t.inline&&!h)return Ss(C,d.y,S,d.height);{const T=s.header.isPositionedAtTop(),{y:O,bottom:N}=Nj(t,g,d,T,c,l);return Ss(C,O,S,N-O)}},ek=12,sI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},pR={maxHeightFunction:nh(),maxWidthFunction:xv()},Bj=(t,s)=>{const c=t.selection.getRng(),l=Gr(Je.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&lo(l.element,s)},XG=(t,s,c)=>{const l=X(t,"position");on(t,"position",s);const d=c(t);return l.each(g=>on(t,"position",g)),d},e=t=>t==="node",n=(t,s,c,l,d)=>{const g=hR(t),h=l.lastElement().exists(C=>lo(c,C));if(Bj(t,c))return h?xa:Zl;if(h)return XG(s,l.getMode(),()=>Dj(g,Qr(s),-20)&&!l.isReposition()?Sk:xa);{const C=l.getMode()==="fixed"?d.y+er().top:d.y,S=wn(s)+ek;return C+S<=g.y?Zl:Sp}},o=(t,s,c,l)=>{const d=S=>(T,O,N,F,W)=>{const q=n(t,F,S,c,W),ee={...T,y:W.y,height:W.height};return{...q(ee,O,N,F,W),alwaysFit:!0}},g=S=>e(l)?[d(S)]:[];return s?{onLtr:S=>[js,Hs,sr,Cc,kr,_r].concat(g(S)),onRtl:S=>[js,sr,Hs,kr,Cc,_r].concat(g(S))}:{onLtr:S=>[_r,js,Cc,Hs,kr,sr].concat(g(S)),onRtl:S=>[_r,js,kr,sr,Cc,Hs].concat(g(S))}},r=(t,s,c,l)=>s==="line"?{bubble:Qc(ek,0,sI),layouts:{onLtr:()=>[c0],onRtl:()=>[a0]},overrides:pR}:{bubble:Qc(0,ek,sI,1/ek),layouts:o(t,c,l,s),overrides:pR},a=(t,s)=>{const c=ho(s,g=>g.predicate(t.dom)),{pass:l,fail:d}=ni(c,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},u=t=>{if(t.length<=1)return t;{const s=g=>br(t,h=>h.position===g),c=g=>ho(t,h=>h.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=c("node"),h=Pe(c("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return c(l?"selection":"node");else return c("line")}},f=t=>{if(t.length<=1)return t;{const s=l=>Jt(t,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>ho(t,d=>d.position===l))}},b=(t,s,c)=>{const l=a(t,s);if(l.contextForms.length>0)return A.some({elem:t,toolbars:[l.contextForms[0]]});{const d=a(t,c);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=u(l.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},y=(t,s,c)=>t(s)?A.none():Vb(s,l=>{if(Zc(l)){const{contextToolbars:d,contextForms:g}=a(l,c.inNodeScope),h=g.length>0?g:f(d);return h.length>0?A.some({elem:l,toolbars:h}):A.none()}else return A.none()},t),E=(t,s)=>{const c=Je.fromDom(s.getBody()),l=h=>lo(h,c),d=h=>!l(h)&&!gf(c,h),g=Je.fromDom(s.selection.getNode());return d(g)?A.none():b(g,t.inNodeScope,t.inEditorScope).orThunk(()=>y(l,g,t))},R=(t,s)=>{const c={},l=[],d=[],g={},h={},C=(O,N)=>{const F=gi(LP(N));c[O]=F,F.launch.map(W=>{g["form:"+O]={...N.launch,type:W.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(F)}}}),F.scope==="editor"?d.push(F):l.push(F),h[O]=F},S=(O,N)=>{Oz(N).each(F=>{F.launch.isSome()&&(g["toolbar:"+O]={...N.launch,type:"button",onAction:()=>{s(F)}}),N.scope==="editor"?d.push(F):l.push(F),h[O]=F})},T=$o(t);return ft(T,O=>{const N=t[O];N.type==="contextform"||N.type==="contextsliderform"||N.type==="contextsizeinputform"?C(O,N):N.type==="contexttoolbar"&&S(O,N)}),{forms:c,inNodeScope:l,inEditorScope:d,lookupTable:h,formNavigators:g}},B="tox-pop--transition",P=t=>t===dw.ENTER||t===dw.SPACEBAR,z=(t,s,c,l)=>{const d=l.backstage,g=d.shared,h=Lo().deviceType.isTouch,C=dn(),S=dn(),T=dn(),O=WZ({sink:c,onEscape:()=>(t.focus(),S6(t),A.some(!0)),onHide:()=>{S6(t)},onBack:()=>{SV(t)}}),N=na(O.sketch),F=()=>{const nn=T.get().getOr("node"),fn=e(nn)?1:0;return d2(t,g,nn,fn)},W=()=>!t.removed&&!(h()&&d.isContextMenuOpen()),q=nn=>Wc(Ur(nn,C.get(),lo),!0),ee=()=>{if(W()){const nn=F(),fn=Wc(T.get(),"node")?YG(t,C.get()):hR(t);return nn.height<=0||!Dj(fn,nn,.01)}else return!0},ce=()=>{C.clear(),S.clear(),T.clear(),fs.hide(N)},Q=()=>{if(fs.isOpen(N)){const nn=N.element;Ye(nn,"display"),ee()?on(nn,"display","none"):(S.set(0),fs.reposition(N))}},ue=nn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[nn],behaviours:We([kt.config({mode:"acyclic"}),sn("pop-dialog-wrap-events",[Wo(fn=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>kt.focusIn(fn))}),td(fn=>{t.shortcuts.remove("ctrl+F9")})])])}),de=nn=>{const fn=Ue([nn]);Pt(N,$8,{forwardContents:ue(fn)})},ye=Dr(()=>R(s,de)),Te=(nn,fn)=>q4(t,{buttons:nn,toolbar:fn.items,allowToolbarGroups:!1},l.backstage,A.some(["form:","toolbar:"])),rt=(nn,fn)=>u2.buildInitGroups(nn,fn),Ue=nn=>{const{buttons:fn}=t.ui.registry.getAll(),_t=ye(),Fe={...fn,..._t.formNavigators},et=Ay(t)===id.scrolling?id.scrolling:id.default,jt=qt(Pe(nn,gn=>gn.type==="contexttoolbar"?Te(Fe,Az(gn)):rt(gn,g.providers)));return F4({type:et,uid:nt("context-toolbar"),initGroups:jt,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},ke=(nn,fn)=>{const _t=nn==="node"?g.anchors.node(fn):g.anchors.cursor(),Fe=r(t,nn,h(),{lastElement:C.get,isReposition:()=>Wc(S.get(),0),getMode:()=>Ea.getMode(c)});return uo(_t,Fe)},mt=(nn,fn)=>{if(Nn.cancel(),!W())return;const _t=Ue(nn),Fe=nn[0].position,et=ke(Fe,fn);T.set(Fe),S.set(1);const jt=N.element;Ye(jt,"display"),q(fn)||(Ao(jt,B),Ea.reset(c,N)),fs.showWithinBounds(N,ue(_t),{anchor:et,transition:{classes:[B],mode:"placement"}},()=>A.some(F())),fn.fold(C.clear,C.set),ee()&&on(jt,"display","none")},Ut=()=>{on(N.element,"transition","none"),Q(),Ye(N.element,"transition")};let Dt=!1;const Nn=cl(()=>{if(!(!t.hasFocus()||t.removed||Dt))if(Jr(N.element,B))Nn.throttle();else{const nn=ye();E(nn,t).fold(ce,fn=>{mt(fn.toolbars,A.some(fn.elem))})}},17);t.on("init",()=>{t.on("remove",ce),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Q),t.on("click focus SetContent",Nn.throttle),t.on("keyup",nn=>{(!P(nn.keyCode)||!O.inSubtoolbar())&&Nn.throttle()}),t.on(mR,ce),t.on(Q4,nn=>{const fn=ye();at(fn.lookupTable,nn.toolbarKey).each(_t=>{mt([_t],Sr(nn.target!==t,nn.target)),P8(N)})}),t.on("focusout",nn=>{bT.setEditorTimeout(t,()=>{Is(c.element).isNone()&&Is(N.element).isNone()&&!t.hasFocus()&&ce()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&ce()}),t.on("DisabledStateChange",nn=>{nn.state&&ce()}),t.on("ExecCommand",({command:nn})=>{nn.toLowerCase()==="toggleview"&&ce()}),t.on("AfterProgressState",nn=>{nn.state?ce():t.hasFocus()&&Nn.throttle()}),t.on("dragstart",()=>{Dt=!0}),t.on("dragend drop",()=>{Dt=!1}),t.on("NodeChange",nn=>{O.inSubtoolbar()?Ut():Is(N.element).fold(Nn.throttle,ae)})})},j=t=>{ft([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:Kl(t,c.cmd),onSetup:qy(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ka(t),onAction:Kl(t,"JustifyNone")})},Z=(t,s)=>{const c=()=>{const l=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=dn();return Pe(l,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const S=O=>{O&&(g.on(N=>N.setActive(!1)),g.set(C)),C.setActive(O)};S(Wc(d,s.hash(h)));const T=s.watcher(t,h,S);return()=>{g.clear(),T()}},onAction:()=>s.setCurrent(t,h)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(c()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},Y=t=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:dB,hash:s=>pc(s,["fixed","relative","empty"]).getOr(s),display:Sn,watcher:(s,c,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:c}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,c)=>s.execCommand("LineHeight",!1,c),onToolbarSetup:Ka(t),onMenuSetup:Ka(t)}),oe=t=>A.from(XN(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:te(c),hash:l=>Lr(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>{var h;return l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(h=d.customCode)!==null&&h!==void 0?h:null}).unbind},getCurrent:l=>{const d=Je.fromDom(l.selection.getNode());return Pg(d,g=>A.some(g).filter(Zc).bind(h=>Ws(h,"lang").map(S=>{const T=Ws(h,"data-mce-lang").getOrUndefined();return{code:S,customCode:T,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=Ma();return l.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",l.setActive,!0)),qS(d.clear,Ka(t)(l))},onMenuSetup:Ka(t)})),me=t=>{Z(t,Y(t)),oe(t).each(s=>Z(t,s))},ge=(t,s)=>{XZ(t,s),sj(t,s),fj(t,s),QZ(t,s),j4(t,s)},ve=t=>{t.ui.registry.addContext("editable",()=>t.selection.isEditable()),t.ui.registry.addContext("mode",s=>t.mode.get()===s),t.ui.registry.addContext("any",wt),t.ui.registry.addContext("formatting",s=>t.formatter.canApply(s)),t.ui.registry.addContext("insert",s=>t.schema.isValidChild(t.selection.getNode().tagName,s))},Ie=t=>vb(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent")&&t.selection.isEditable())}),Ze=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:Ie(t),onAction:Kl(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ka(t),onAction:Kl(t,"indent")})},pt=t=>{Ze(t)},Ae=(t,s)=>c=>{c.setActive(s.get());const l=d=>{s.set(d.state),c.setActive(d.state)};return t.on("PastePlainTextToggle",l),qS(()=>t.off("PastePlainTextToggle",l),Ka(t)(c))},we=t=>{const s=Et(lB(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:Ae(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:Ae(t,s)})},Le=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},gt=t=>{rm.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:qy(t,s.name),onAction:Le(t,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const c="h"+s,l=`Access+${s}`;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:qy(t,c),onAction:Le(t,c),shortcut:l})}},$t=t=>{rm.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Kl(t,s.action),shortcut:s.shortcut,context:s.context})}),rm.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ka(t),onAction:Kl(t,s.action)})})},kn=t=>{rm.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Kl(t,s.action),onSetup:qy(t,s.name)})})},Dn=t=>{gt(t),$t(t),kn(t)},oo=t=>{rm.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Kl(t,s.action),context:s.context})}),rm.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ka(t),onAction:Kl(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ka(t),onAction:Le(t,"code")})},ko=t=>{Dn(t),oo(t)},Ds=(t,s)=>vb(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),cc=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:Ds(t,"hasUndo"),onAction:Kl(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:Ds(t,"hasRedo"),onAction:Kl(t,"redo")})},Tc=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:Ds(t,"hasUndo"),onAction:Kl(t,"undo"),shortcut:"Meta+Z"}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:Ds(t,"hasRedo"),onAction:Kl(t,"redo"),shortcut:"Meta+Y"})},st=t=>{cc(t),Tc(t)},Bt=t=>vb(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),Xn=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:Bt(t),onAction:Kl(t,"mceToggleVisualAid"),context:"any"})},so=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Kl(t,"mceToggleVisualAid"),context:"any"})},Be=t=>{so(t),Xn(t)},Ge=(t,s)=>{j(t),ko(t),ge(t,s),st(t),DV(t),Be(t),pt(t),me(t),we(t),ve(t)},Nt=t=>rn(t)?t.split(/[ ,]/):t,_n=t=>s=>s.options.get(t),Pn=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:rn(c)||en(c,rn)?{value:Nt(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},fo=_n("contextmenu_never_use_native"),Cd=_n("contextmenu_avoid_overlap"),mg=t=>Ya(t).length===0,Ya=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:ho(c,l=>In(s,l))},Xl=(t,s)=>({type:"makeshift",x:t,y:s}),yu=(t,s,c)=>Xl(t.x+s,t.y+c),ka=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Ml=t=>{if(ka(t)){const s=t.touches[0];return Xl(s.pageX,s.pageY)}else return Xl(t.pageX,t.pageY)},Sd=t=>{if(ka(t)){const s=t.touches[0];return Xl(s.clientX,s.clientY)}else return Xl(t.clientX,t.clientY)},d1=(t,s)=>{const c=TS.DOM.getPos(t);return yu(s,c.x,c.y)},Ht=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Ml(s):d1(t.getContentAreaContainer(),Sd(s)):Vn(t),Vn=t=>({type:"selection",root:Je.fromDom(t.selection.getNode())}),Gs=t=>({type:"node",node:A.some(Je.fromDom(t.selection.getNode())),root:Je.fromDom(t.getBody())}),Ir=(t,s,c)=>{switch(c){case"node":return Gs(t);case"point":return Ht(t,s);case"selection":return Vn(t)}},kc=(t,s,c,l,d,g)=>{const h=c(),C=Ir(t,s,g);Tb(h,fd.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:A.none()}).map(S=>{s.preventDefault(),fs.showMenuAt(d,{anchor:C},{menu:{markers:Dh("normal")},data:S})})},Fr={onLtr:()=>[js,Hs,sr,Cc,kr,_r,Zl,Sp,Zd,Cv,th,Cp],onRtl:()=>[js,sr,Hs,kr,Cc,_r,Zl,Sp,th,Cp,Zd,Cv]},Rs=12,Ms={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},Nl=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=c.getRng();return Ig(t.getWin(),Dm.domRange(d)).exists(h=>h.left<=l.clientX&&h.right>=l.clientX&&h.top<=l.clientY&&h.bottom>=l.clientY)}},cm=t=>{const s=t.selection.getRng(),c=()=>{bT.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",c);const l=h=>{h.preventDefault(),h.stopImmediatePropagation()};t.on("mousedown",l,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",c),t.off("longpresscancel",d),t.off("mousedown",l)}},fg=(t,s,c)=>{const l=Ir(t,s,c);return{bubble:Qc(0,c==="point"?Rs:0,Ms),layouts:Fr,overrides:{maxWidthFunction:xv(),maxHeightFunction:nh()},...l}},lf=(t,s,c,l,d,g,h)=>{const C=fg(t,s,g);Tb(c,fd.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:A.none()}).map(S=>{s.preventDefault();const T=h?ea.HighlightMenuAndItem:ea.HighlightNone;fs.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Dh("normal"),highlightOnOpen:T},data:S,type:"horizontal"},()=>A.some(d2(t,l.shared,g==="node"?"node":"selection"))),t.dispatch(mR)})},m2=(t,s,c,l,d,g)=>{const h=Lo(),C=h.os.isiOS(),S=h.os.isMacOS(),T=h.os.isAndroid(),O=h.deviceType.isTouch(),N=()=>!(T||C||S&&O),F=()=>{const W=c();lf(t,s,W,l,d,g,N())};if((S||C)&&g!=="node"){const W=()=>{cm(t),F()};Nl(t,s)?W():(t.once("selectionchange",W),t.once("touchend",()=>t.off("selectionchange",W)))}else F()},Rb=t=>rn(t)?t==="|":t.type==="separator",$h={type:"separator"},wd=t=>{const s=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(rn(t))return t;switch(t.type){case"separator":return $h;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const l=t.getSubmenuItems();return rn(l)?l:Pe(l,wd)}};default:const c=t;return{type:"menuitem",...s(c),onAction:Ot(c.onAction)}}},Ih=(t,s)=>{if(s.length===0)return t;const l=Bl(t).filter(d=>!Rb(d)).fold(()=>[],d=>[$h]);return t.concat(l).concat(s).concat([$h])},pw=(t,s,c)=>{const l=xo(s,(d,g)=>at(t,g.toLowerCase()).map(h=>{const C=h.update(c);if(rn(C)&&sl(ct(C)))return Ih(d,C.split(" "));if(Ns(C)&&C.length>0){const S=Pe(C,wd);return Ih(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&Rb(l[l.length-1])&&l.pop(),l},f2=(t,s)=>s.ctrlKey&&!fo(t),rI=t=>t.type==="longpress"||In(t,"touches"),g2=(t,s)=>!rI(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),h2=(t,s)=>g2(t,s)?t.selection.getStart(!0):s.target,cI=(t,s)=>{const c=Cd(t),l=g2(t,s)?"selection":"point";if(sl(c)){const d=h2(t,s);return Om(Je.fromDom(d),c)?"node":l}else return l},p2=(t,s,c)=>{const d=Lo().deviceType.isTouch,g=na(fs.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:We([sn("dismissContextMenu",[Me(Im(),(S,T)=>{qn.close(S),t.focus()})])])})),h=()=>fs.hide(g),C=S=>{if(fo(t)&&S.preventDefault(),f2(t,S)||mg(t))return;const T=cI(t,S),O=()=>{const F=h2(t,S),W=t.ui.registry.getAll(),q=Ya(t);return pw(W.contextMenus,q,F)};(d()?m2:kc)(t,S,O,c,g,T)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,h),t.on("longpress contextmenu",C)})},gg=40,Mb=gg/2,be=(t,s,c,l,d,g)=>t.fold(()=>z0.snap({sensor:fu(c-Mb,l-Mb),range:is(d,g),output:fu(A.some(c),A.some(l)),extra:{td:s}}),h=>{const C=c-Mb,S=l-Mb,T=gg,O=gg,N=h.element.dom.getBoundingClientRect();return z0.snap({sensor:fu(C,S),range:is(T,O),output:fu(A.some(c-N.width/2),A.some(l-N.height/2)),extra:{td:s}})}),Se=(t,s,c)=>{const l=(d,g)=>d.exists(h=>lo(h,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;l(s.get(),h)||(s.set(h),c(h))},mustSnap:!0}},ot=t=>no(Fc.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:We([z0.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),K0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),qe=(t,s)=>{const c=Et([]),l=Et([]),d=Et(!1),g=dn(),h=dn(),C=Ue=>{const ke=Fd(Ue);return be(W.getOpt(s),Ue,ke.x,ke.y,ke.width,ke.height)},S=()=>Pe(c.get(),Ue=>C(Ue)),T=Ue=>{const ke=Fd(Ue);return be(q.getOpt(s),Ue,ke.right,ke.bottom,ke.width,ke.height)},O=()=>Pe(l.get(),Ue=>T(Ue)),N=Se(S,g,Ue=>{h.get().each(ke=>{t.dispatch("TableSelectorChange",{start:Ue,finish:ke})})}),F=Se(O,h,Ue=>{g.get().each(ke=>{t.dispatch("TableSelectorChange",{start:ke,finish:Ue})})}),W=ot(N),q=ot(F),ee=na(W.asSpec()),ce=na(q.asSpec()),Q=(Ue,ke,mt,Ut)=>{const Dt=ke.dom.getBoundingClientRect();Ye(Ue.element,"display");const Nn=ul(Je.fromDom(t.getBody())).dom.innerHeight,nn=mt(Dt),fn=Ut(Dt,Nn);(nn||fn)&&on(Ue.element,"display","none")},ue=(Ue,ke,mt,Ut)=>{const Dt=mt(ke);z0.snapTo(Ue,Dt),Q(Ue,ke,fn=>fn[Ut]<0,(fn,_t)=>fn[Ut]>_t)},de=Ue=>ue(ee,Ue,C,"top"),ye=()=>g.get().each(de),Te=Ue=>ue(ce,Ue,T,"bottom"),rt=()=>h.get().each(Te);if(Lo().deviceType.isTouch()){const Ue=ke=>Pe(ke,Je.fromDom);t.on("TableSelectionChange",ke=>{d.get()||(du(s,ee),du(s,ce),d.set(!0));const mt=Je.fromDom(ke.start),Ut=Je.fromDom(ke.finish);g.set(mt),h.set(Ut),A.from(ke.otherCells).each(Dt=>{c.set(Ue(Dt.upOrLeftCells)),l.set(Ue(Dt.downOrRightCells)),de(mt),Te(Ut)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ye(),rt()}),t.on("TableSelectionClear",()=>{d.get()&&(Os(ee),Os(ce),d.set(!1)),g.clear(),h.clear()})}};var Gt=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const Kn=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",qs=(t,s,c)=>{var l;const d=(l=s.delimiter)!==null&&l!==void 0?l:"›",g=(T,O,N)=>Fc.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":N}},components:[Yo(T)],action:F=>{t.focus(),t.selection.select(O),t.nodeChanged()},buttonBehaviours:We([ms.config({...c.tooltips.getConfig({tooltipText:c.translate(["Select the {0} element",O.nodeName.toLowerCase()]),onShow:(F,W)=>{ju(F.element,W.element)},onHide:F=>{Sw(F.element)}})}),$i.button(c.isDisabled),cr(()=>c.checkUiComponentContext("any"))])}),h=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Yo(` ${d} `)]}),C=T=>xo(T,(O,N,F)=>{const W=g(N.name,N.element,F);return F===0?O.concat([W]):O.concat([h(),W])},[]),S=T=>{const O=[];let N=T.length;for(;N-- >0;){const F=T[N];if(F.nodeType===1&&!Kn(F)){const W=vV(t,F);if(W.isDefaultPrevented()||O.push({name:W.name,element:F}),W.isPropagationStopped())break}}return O};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:We([kt.config({mode:"flow",selector:"div[role=button]"}),Ct.config({disabled:c.isDisabled}),cr(()=>c.checkUiComponentContext("any")),Zo.config({}),an.config({}),sn("elementPathEvents",[Wo((T,O)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>kt.focusIn(T)),t.on("NodeChange",N=>{const F=S(N.parents),W=F.length>0?C(F):[];an.set(T,W)})})])]),components:[]}};var _a;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(_a||(_a={}));const am=(t,s,c,l,d)=>{const g={height:K4(l+s.top,yT(t),wA(t))};return c===_a.Both&&(g.width=K4(d+s.left,vT(t),CT(t))),g},b2=(t,s,c)=>{const l=Je.fromDom(t.getContainer()),d=am(t,s,c,wn(l),_s(l));vs(d,(g,h)=>{Vc(g)&&on(l,h,gw(g))}),sf(t)},aI=t=>{const s=OS(t);return s===!1?_a.None:s==="both"?_a.Both:_a.Vertical},bw=(t,s,c,l)=>{const g=is(c*20,l*20);return b2(t,g,s),A.some(!0)},bR=(t,s)=>{const c=aI(t);if(c===_a.None)return A.none();const l=c===_a.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.",d=c===_a.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return A.some(Gl("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",d],attributes:{"aria-label":s.translate(l),"data-mce-name":"resize-handle"},behaviours:[z0.config({mode:"mouse",repositionTarget:!1,onDrag:(g,h,C)=>b2(t,C,c),blockerClass:"tox-blocker"}),kt.config({mode:"special",onLeft:()=>bw(t,c,-1,0),onRight:()=>bw(t,c,1,0),onUp:()=>bw(t,c,0,-1),onDown:()=>bw(t,c,0,1)}),Zo.config({}),Yt.config({}),ms.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")}))]},s.icons))},lI=(t,s)=>{const c=(l,d,g)=>an.set(l,[Yo(s.translate(["{0} "+g,d[g]]))]);return Fc.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:We([$i.button(s.isDisabled),cr(()=>s.checkUiComponentContext("any")),Zo.config({}),an.config({}),dt.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),sn("wordcount-events",[Zm(l=>{const d=dt.getValue(l),g=d.mode==="words"?"characters":"words";dt.setValue(l,{mode:g,count:d.count}),c(l,d.count,g)}),Wo(l=>{t.on("wordCountUpdate",d=>{const{mode:g}=dt.getValue(l);dt.setValue(l,{mode:g,count:d.wordCount}),c(l,d.wordCount,g)})})])]),eventOrder:{[Wl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},Fh=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":t.translate(["Build with {0}","TinyMCE"])},innerHtml:t.translate(["Build with {0}",Gt.trim()])},behaviours:We([Yt.config({})])}]}),l=()=>{const C=OO("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Yo(md.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return t.hasPlugin("wordcount")&&C.push(lI(t,s)),TA(t)&&C.push(c()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],S=uB(t),T=aB(t),O=TA(t)||t.hasPlugin("wordcount"),N=()=>{const F="tox-statusbar__text-container--flex-start",W="tox-statusbar__text-container--flex-end",q="tox-statusbar__text-container--space-around";if(S){const ee="tox-statusbar__text-container-3-cols";return!O&&!T?[ee,q]:O&&!T?[ee,W]:[ee,F]}return[O&&!T?W:F]};return T&&C.push(qs(t,{},s)),S&&C.push(l()),O&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...N()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),S=bR(t,s);return C.concat(S.toArray())})()}},vR=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),iI=(t,s)=>{const c=t.inline,l=c?J4:Sj,d=Ny(t)?WW:PD,g=Yl(),h=dn(),C=dn(),S=dn(),F=Lo().deviceType.isTouch()?["tox-platform-touch"]:[],W=OA(t),q=Ay(t),ee=no({dom:{tag:"div",classes:["tox-anchorbar"]}}),ce=no({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Q=()=>g.mainUi.get().map(Ft=>Ft.outerContainer).bind(Go.getHeader),ue=()=>Qt.fromOption(g.dialogUi.get().map(Ft=>Ft.sink),"UI has not been rendered"),de=()=>Qt.fromOption(g.popupUi.get().map(Ft=>Ft.sink),"(popup) UI has not been rendered"),ye=g.lazyGetInOuterOrDie("anchor bar",ee.getOpt),Te=g.lazyGetInOuterOrDie("bottom anchor bar",ce.getOpt),rt=g.lazyGetInOuterOrDie("toolbar",Go.getToolbar),Ue=g.lazyGetInOuterOrDie("throbber",Go.getThrobber),ke=HW({popup:de,dialog:ue},t,ye,Te),mt=()=>{const Ft={attributes:{[Ev]:W?Wm.BottomToTop:Wm.TopToBottom}},mn=Go.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:ke.popup,onEscape:()=>{t.focus()}}),Do=Go.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:ke.popup.shared.getSink,providers:ke.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:hg=>{yV(t,hg)},type:q,lazyToolbar:rt,lazyHeader:()=>Q().getOrDie("Could not find header element"),...Ft}),wo=Go.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:ke.popup.shared.providers,onEscape:()=>{t.focus()},type:q}),Jl=Ry(t),xs=DS(t),Cu=tm(t),ha=iB(t),Su=Ut(ha),wu=Jl||xs||Cu,lm=()=>Jl?[wo]:xs?[Do]:[],yw=[Su,mn];return Go.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(wu?[]:["tox-editor-header--empty"]),...Ft},components:qt([Cu?yw:[],lm(),My(t)?[]:[ee.asSpec()]]),sticky:Ny(t),editor:t,sharedBackstage:ke.popup.shared})},Ut=Ft=>Go.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:Ft}),Dt=()=>{const Ft=Go.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),mn=Go.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Ft,mn]}},Nn=()=>{const Ft=DA(t),mn=lo(gc(),Ft)&&M(Ft,"display")==="grid",Do={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(F),attributes:{...md.isRtl()?{dir:"rtl"}:{}}},behaviours:We([Ea.config({useFixed:()=>d.isDocked(Q)})])},wo={dom:{styles:{width:document.body.clientWidth+"px"}},events:es([Me(Ju(),Cu=>{on(Cu.element,"width",document.body.clientWidth+"px")})])},Jl=na(uo(Do,mn?wo:{})),xs=WE(Jl);return C.set(xs),{sink:Jl,mothership:xs}},nn=()=>{const Ft={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(F),attributes:{...md.isRtl()?{dir:"rtl"}:{}}},behaviours:We([Ea.config({useFixed:()=>d.isDocked(Q),getBounds:()=>s.getPopupSinkBounds()})])},mn=na(Ft),Do=WE(mn);return S.set(Do),{sink:mn,mothership:Do}},fn=()=>{const Ft=mt(),mn=Dt(),Do=Go.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:ke.popup}),wo=Go.parts.viewWrapper({backstage:ke.popup}),Jl=cB(t)&&!c?A.some(Fh(t,ke.popup.shared.providers)):A.none(),xs=qt([W?[]:[Ft],c?[]:[mn],W?[Ft]:[]]),Cu=Go.parts.editorContainer({components:qt([xs,c?[]:[ce.asSpec()]])}),ha=RA(t),Su={role:"application",...md.isRtl()?{dir:"rtl"}:{},...ha?{"aria-hidden":"true"}:{}},wu=na(Go.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(c?["tox-tinymce-inline"]:[]).concat(W?["tox-tinymce--toolbar-bottom"]:[]).concat(F),styles:{visibility:"hidden",...ha?{opacity:"0",border:"0"}:{}},attributes:Su},components:[Cu,...c?[]:[wo,...Jl.toArray()],Do],behaviours:We([cr(()=>ke.popup.shared.providers.checkUiComponentContext("any")),Ct.config({disableClass:"tox-tinymce--disabled"}),kt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),lm=WE(wu);return h.set(lm),{mothership:lm,outerContainer:wu}},_t=Ft=>{const mn=gw(xj(t)),Do=gw(Ej(t));return t.inline||(Ve("div","width",Do)&&on(Ft.element,"width",Do),Ve("div","height",mn)?on(Ft.element,"height",mn):on(Ft.element,"height","400px")),mn},Fe=Ft=>{t.addShortcut("alt+F9","focus menubar",()=>{Go.focusMenubar(Ft)}),t.addShortcut("alt+F10","focus toolbar",()=>{Go.focusToolbar(Ft)}),t.addCommand("ToggleToolbarDrawer",(mn,Do)=>{Do!=null&&Do.skipFocus?Go.toggleToolbarDrawerWithoutFocusing(Ft):Go.toggleToolbarDrawer(Ft)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>Go.isToolbarDrawerToggled(Ft))},et=Ft=>{const{mainUi:mn,popupUi:Do,uiMotherships:wo}=Ft;Io(QN(t),(Nb,SR)=>{t.ui.registry.addGroupToolbarButton(SR,Nb)});const{buttons:Jl,menuItems:xs,contextToolbars:Cu,sidebars:ha,views:Su}=t.ui.registry.getAll(),wu=AA(t),lm={menuItems:xs,menus:fB(t),menubar:tB(t),toolbar:wu.getOrThunk(()=>_S(t)),allowToolbarGroups:q===id.floating,buttons:Jl,sidebar:ha,views:Su};Fe(mn.outerContainer),o2(t,mn.mothership,wo),d.setup(t,ke.popup.shared,Q),Ge(t,ke.popup),p2(t,ke.popup.shared.getSink,ke.popup),f8(t),sZ(t,Ue,ke.popup.shared),z(t,Cu,Do.sink,{backstage:ke.popup}),qe(t,Do.sink);const yw=t.getElement(),hg=_t(mn.outerContainer),CR={targetNode:yw,height:hg};return l.render(t,Ft,lm,ke.popup,CR)},jt=Ft=>(S.set(Ft.mothership),Ft),gn=()=>{const Ft=fn(),mn=Nn(),Do=n1(t)?nn():jt(mn);g.dialogUi.set(mn),g.popupUi.set(Do),g.mainUi.set(Ft);const wo={popupUi:Do,dialogUi:mn,mainUi:Ft,uiMotherships:g.getUiMotherships()};return et(wo)};return{popups:{backstage:ke.popup,getMothership:()=>vR("popups",S)},dialogs:{backstage:ke.dialog,getMothership:()=>vR("dialogs",C)},renderUI:gn}},yR=t=>{const s=[],c={};return vs(t,(l,d)=>{l.fold(()=>{s.push(d)},g=>{c[d]=g})}),s.length>0?Qt.error(s):Qt.value(c)},uI=(t,s,c,l)=>{const d=no(Q0.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Pe(t.items,h=>I$(g,h,s,c,l))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:We([kt.config({mode:"acyclic",useTabstopAt:De(ow)}),pd.memento(d),rU(d,{postprocess:g=>yR(g).fold(h=>(console.error(h),{}),Sn)}),sn("dialog-body-panel",[Me(Xc(),(g,h)=>{g.getSystem().broadcastOn([sw],{newFocus:A.some(h.event.target)})})])])}},Pj=(t,s,c)=>Pe(t,(l,d)=>{an.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return an.set(c,[]),g.height}),Fn=t=>Hr(Tu(t,(s,c)=>s>c?-1:s<c?1:0)),xe=(t,s,c)=>{const l=ya(t).dom,d=Vl(t,".tox-dialog-wrap").getOr(t),g=M(d,"position")==="fixed";let h;g?h=Math.max(l.clientHeight,window.innerHeight):h=Math.max(l.offsetHeight,l.scrollHeight);const C=wn(s),T=s.dom.offsetLeft>=c.dom.offsetLeft+_s(c)?Math.max(wn(c),C):C,O=parseInt(M(t,"margin-top"),10)||0,N=parseInt(M(t,"margin-bottom"),10)||0,W=wn(t)+O+N-T;return h-W},It=(t,s)=>{Hr(t).each(c=>Xp.showTab(s,c.value))},En=(t,s)=>{on(t,"height",s+"px"),on(t,"flex-basis",s+"px")},hr=(t,s,c)=>{Vl(t,'[role="dialog"]').each(l=>{io(l,'[role="tablist"]').each(d=>{c.get().map(g=>(on(s,"height","0"),on(s,"flex-basis","0"),Math.min(g,xe(l,s,d)))).each(g=>{En(s,g)})})})},Xa=t=>io(t,'[role="tabpanel"]'),Ja=t=>{const s=dn();return{extraEvents:[Wo(d=>{const g=d.element;Xa(g).each(h=>{on(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const S=Pj(t,h,C);Fn(S).fold(s.clear,s.set)}),hr(g,h,s),Ye(h,"visibility"),It(t,d),requestAnimationFrame(()=>{hr(g,h,s)})})}),Me(Ju(),d=>{const g=d.element;Xa(g).each(h=>{hr(g,h,s)})}),Me(i4,(d,g)=>{const h=d.element;Xa(h).each(C=>{const S=vl(ys(C));on(C,"visibility","hidden");const T=X(C,"height").map(F=>parseInt(F,10));Ye(C,"height"),Ye(C,"flex-basis");const O=C.dom.getBoundingClientRect().height;T.forall(F=>O>F)?(s.set(O),hr(h,C,s)):T.each(F=>{En(C,F)}),Ye(C,"visibility"),S.each(ro)})})],selectFirst:!1}},Ii="send-data-to-section",uf="send-data-to-view",vw=(t,s,c,l)=>{const d=Et({}),g=O=>{const N=dt.getValue(O),F=yR(N).getOr({}),W=d.get(),q=uo(W,F);d.set(q)},h=O=>{const N=d.get();dt.setValue(O,N)},C=Et(null),S=Pe(t.tabs,O=>({value:O.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Yo(c.shared.providers.translate(O.title))],view:()=>[Q0.sketch(N=>({dom:{tag:"div",classes:["tox-form"]},components:Pe(O.items,F=>I$(N,F,s,c,l)),formBehaviours:We([kt.config({mode:"acyclic",useTabstopAt:De(ow)}),sn("TabView.form.events",[Wo(h),td(g)]),Al.config({channels:ap([{key:Ii,value:{onReceive:g}},{key:uf,value:{onReceive:h}}])})])}))]})),T=Ja(S);return Xp.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(O,N,F)=>{const W=dt.getValue(N);Pt(O,Y6,{name:W,oldName:C.get()}),C.set(W)},tabs:S,components:[Xp.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[LN.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:We([Zo.config({})])}),Xp.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:We([sn("tabpanel",T.extraEvents),kt.config({mode:"acyclic"}),Ce.config({find:O=>Hr(Xp.getViewItems(O))}),xb(A.none(),O=>(O.getSystem().broadcastOn([Ii],{}),d.get()),(O,N)=>{d.set(N),O.getSystem().broadcastOn([uf],{})})])})},Qa=(t,s,c,l,d,g)=>{const h=T=>{const O=T.body;switch(O.type){case"tabpanel":return[vw(O,T.initialData,l,g)];default:return[uI(O,T.initialData,l,g)]}},C=(T,O)=>A.some({isTabPanel:()=>O.body.type==="tabpanel"}),S={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(T=>({id:T})).getOr({}),...d?S:{}}},components:[],behaviours:We([pd.childAt(0),Oi.config({channel:`${a$}-${s}`,updateState:C,renderComponents:h,initialData:t})])}},$j=(t,s,c,l,d,g)=>Qa(t,s,A.some(c),l,d,g),dI=(t,s,c,l)=>{const d=Qa(t,s,A.none(),c,!1,l);return sc.parts.body(d)},mI=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[r$(A.none(),{dom:{tag:"iframe",attributes:{src:t.url}},behaviours:We([Zo.config({}),Yt.config({})])})]}],behaviours:We([kt.config({mode:"acyclic",useTabstopAt:De(ow)})])};return sc.parts.body(s)},vK=Ah.deviceType.isTouch(),JG=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),QG=(t,s)=>sc.parts.close(Fc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:We([Zo.config({})])})),eq=()=>sc.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),tq=(t,s)=>sc.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:og(`<p>${RB(s.translate(t))}</p>`)}]}]}),nq=t=>sc.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),oq=(t,s)=>[cd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),cd.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],Ij=t=>{const s="tox-dialog",c=s+"-wrap",l=c+"__backdrop",d=s+"__disable-scroll";return sc.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!ow(g),firstTabstop:t.firstTabstop,dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:og(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:vK?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:c,modalBehaviours:We([Yt.config({}),sn("dialog-events",t.dialogEvents.concat([wp(Xc(),(g,h)=>{U.isBlocked(g)?ae():kt.focusIn(g)}),Me($f(),(g,h)=>{g.getSystem().broadcastOn([sw],{newFocus:h.event.newFocus})})])),sn("scroll-lock",[Wo(()=>{hs(gc(),d)}),td(()=>{Ao(gc(),d)})]),...t.extraBehaviours]),eventOrder:{[Wl()]:["dialog-events"],[bi()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[Vd()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},sq=t=>Fc.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:We([Zo.config({}),ms.config(t.tooltips.getConfig({tooltipText:t.translate("Close")}))]),components:[Gl("close",{tag:"span",classes:["tox-icon"]},t.icons)],action:s=>{Tn(s,l1)}}),rq=(t,s,c,l)=>{const d=g=>[Yo(l.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:We([Oi.config({channel:`${c$}-${s}`,initialData:t,renderComponents:d})])}},cq=()=>({dom:og('<div class="tox-dialog__draghandle"></div>')}),yK=(t,s,c,l)=>cd.sketch({dom:og('<div class="tox-dialog__header"></div>'),components:[rq(t,s,A.some(c),l),cq(),sq(l)],containerBehaviours:We([z0.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>hc(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([Kp()],{target:g})}})])}),CK=(t,s,c)=>{const l=sc.parts.title(rq(t,s,A.none(),c)),d=sc.parts.draghandle(cq()),g=sc.parts.close(sq(c)),h=[l].concat(t.draggable?[d]:[]).concat([g]);return cd.sketch({dom:og('<div class="tox-dialog__header"></div>'),components:h})},aq=(t,s,c)=>CK({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),lq=(t,s,c,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:og('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),iq=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:l=>{const d=io(t().element,".tox-dialog__header").map(g=>wn(g));sc.setBusy(t(),(g,h)=>lq(l.message,h,s,d))},onUnblock:()=>{sc.setIdle(t())}}),uq="tox-dialog--fullscreen",Fj="tox-dialog--width-lg",Lj="tox-dialog--width-md",fI=t=>{switch(t){case"large":return A.some(Fj);case"medium":return A.some(Lj);default:return A.none()}},dq=(t,s)=>{const c=Je.fromDom(s.element.dom);Jr(c,uq)||(Rc(c,[Fj,Lj]),fI(t).each(l=>hs(c,l)))},mq=(t,s)=>{const c=Je.fromDom(t.element.dom),l=Wu(c),d=Jt(l,g=>g===Fj||g===Lj).or(fI(s));A1(c,[uq,...d.toArray()])},fq=(t,s,c)=>na(Ij({...t,firstTabstop:1,lazySink:c.shared.getSink,extraBehaviours:[ew({}),...t.extraBehaviours],onEscape:l=>{Tn(l,l1)},dialogEvents:s,eventOrder:{[Kg()]:[Oi.name(),Al.name()],[bi()]:["scroll-lock",Oi.name(),"messages","dialog-events","alloy.base.behaviour"],[Vd()]:["alloy.base.behaviour","dialog-events","messages",Oi.name(),"scroll-lock"]}})),Hj=(t,s={})=>{const c=l=>{const d=Pe(l.items,g=>{const h=at(s,g.name).getOr(Et(!1));return{...g,storage:h}});return{...l,items:d}};return Pe(t,l=>l.type==="menu"?c(l):l)},gq=t=>xo(t,(s,c)=>c.type==="menu"?xo(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),hq=(t,s)=>[sh(Xc(),hU),t(JS,(c,l,d,g)=>{bl(g.element)&&vl(ys(g.element)).each(pl),s.onClose(),l.onClose()}),t(l1,(c,l,d,g)=>{l.onCancel(c),Tn(g,JS)}),Me(QS,(c,l)=>s.onUnblock()),Me(tD,(c,l)=>s.onBlock(l.event))],SK=(t,s)=>{const c=(d,g)=>Me(d,(h,C)=>{l(h,(S,T)=>{g(t(),S,C.event,h)})}),l=(d,g)=>{Oi.getState(d).get().each(h=>{g(h,d)})};return[...hq(c,s),c(dg,(d,g,h)=>{g.onAction(d,{name:h.name})})]},pq=(t,s,c)=>{const l=(g,h)=>Me(g,(C,S)=>{d(C,(T,O)=>{h(t(),T,S.event,C)})}),d=(g,h)=>{Oi.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...hq(l,s),l(wb,(g,h)=>h.onSubmit(g)),l(Rl,(g,h,C)=>{h.onChange(g,{name:C.name})}),l(dg,(g,h,C,S)=>{const T=()=>S.getSystem().isConnected()?kt.focusIn(S):void 0,O=W=>Og(W,"disabled")||Ws(W,"aria-disabled").exists(q=>q==="true"),N=ys(S.element),F=vl(N);h.onAction(g,{name:C.name,value:C.value}),vl(N).fold(T,W=>{O(W)||F.exists(q=>gf(W,q)&&O(q))?T():c().toOptional().filter(q=>!gf(q.element,W)).each(T)})}),l(Y6,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),td(g=>{const h=t();dt.setValue(g,h.getData())})]},wK=(t,s)=>rw(t,t.type,s),xK=(t,s,c)=>Jt(s,l=>l.name===c).bind(l=>l.memento.getOpt(t)),EK=(t,s)=>{const c=s.map(C=>C.footerButtons).getOr([]),l=ni(c,C=>C.align==="start"),d=(C,S)=>cd.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Pe(S,T=>T.memento.asSpec())}),g=d("start",l.pass),h=d("end",l.fail);return[g,h]},bq=(t,s,c)=>{const l=(d,g)=>{const h=Pe(g.buttons,S=>{const T=no(wK(S,c));return{name:S.name,align:S.align,memento:T}}),C=S=>xK(d,h,S);return A.some({lookupByName:C,footerButtons:h})};return{dom:og('<div class="tox-dialog__footer"></div>'),components:[],behaviours:We([Oi.config({channel:`${l$}-${s}`,initialData:t,updateState:l,renderComponents:EK})])}},TK=(t,s,c)=>bq(t,s,c),vq=(t,s,c)=>sc.parts.footer(bq(t,s,c)),gI=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const l=Ce.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Q0.getField(l,s).orThunk(()=>t.getFooter().bind(h=>Oi.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},kK=(t,s)=>{const c=t.getRoot();return Oi.getState(c).get().map(l=>gi(ws("data",l.dataValidator,s))).getOr(s)},yq=(t,s,c)=>{const l=q=>{const ee=t.getRoot();ee.getSystem().isConnected()&&q(ee)},W={getData:()=>{const q=t.getRoot(),ee=q.getSystem().isConnected()?t.getFormWrapper():q,ce=dt.getValue(ee),Q=Io(c,ue=>ue.get());return{...ce,...Q}},setData:q=>{l(ee=>{const ce=W.getData(),Q=uo(ce,q),ue=kK(t,Q),de=t.getFormWrapper();dt.setValue(de,ue),vs(c,(ye,Te)=>{In(Q,Te)&&ye.set(Q[Te])})})},setEnabled:(q,ee)=>{gI(t,q).each(ee?Ct.enable:Ct.disable)},focus:q=>{gI(t,q).each(Yt.focus)},block:q=>{if(!rn(q))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(ee=>{Pt(ee,tD,{message:q})})},unblock:()=>{l(q=>{Tn(q,QS)})},showTab:q=>{l(ee=>{const ce=t.getBody();Oi.getState(ce).get().exists(ue=>ue.isTabPanel())&&Ce.getCurrent(ce).each(ue=>{Xp.showTab(ue,q)})})},redial:q=>{l(ee=>{const ce=t.getId(),Q=s(q),ue=Hj(Q.internalDialog.buttons,c);ee.getSystem().broadcastOn([`${d4}-${ce}`],Q),ee.getSystem().broadcastOn([`${c$}-${ce}`],Q.internalDialog),ee.getSystem().broadcastOn([`${a$}-${ce}`],Q.internalDialog),ee.getSystem().broadcastOn([`${l$}-${ce}`],{...Q.internalDialog,buttons:ue}),W.setData(Q.initialData)})},close:()=>{l(q=>{Tn(q,JS)})},toggleFullscreen:t.toggleFullscreen};return W},_K=(t,s,c)=>{const l=nt("dialog"),d=t.internalDialog,g=aq(d.title,l,c),h=Et(d.size),C=de=>gI(Q,de),S=fI(h.get()).toArray(),T=(de,ye)=>(h.set(ye.internalDialog.size),dq(ye.internalDialog.size,de),A.some(ye)),O=dI({body:d.body,initialData:d.initialData},l,c,C),N=Hj(d.buttons),F=gq(N),W=Sr(N.length!==0,vq({buttons:N},l,c)),q=pq(()=>ue,iq(()=>ce,c.shared.providers,s),c.shared.getSink),ee={id:l,header:g,body:O,footer:W,extraClasses:S,extraBehaviours:[Oi.config({channel:`${d4}-${l}`,updateState:T,initialData:t})],extraStyles:{}},ce=fq(ee,q,c),Q=(()=>{const de=()=>{const Te=sc.getBody(ce);return Ce.getCurrent(Te).getOr(Te)},ye=()=>{mq(ce,h.get())};return{getId:te(l),getRoot:te(ce),getBody:()=>sc.getBody(ce),getFooter:()=>sc.getFooter(ce),getFormWrapper:de,toggleFullscreen:ye}})(),ue=yq(Q,s.redial,F);return{dialog:ce,instanceApi:ue}},Cq=(t,s,c,l=!1,d)=>{const g=nt("dialog"),h=nt("dialog-label"),C=nt("dialog-content"),S=t.internalDialog,T=mt=>gI(Ue,mt),O=Et(S.size),N=fI(O.get()).toArray(),F=(mt,Ut)=>(O.set(Ut.internalDialog.size),dq(Ut.internalDialog.size,mt),d(),A.some(Ut)),W=no(yK({title:S.title,draggable:!0},g,h,c.shared.providers)),q=no($j({body:S.body,initialData:S.initialData},g,C,c,l,T)),ee=Hj(S.buttons),ce=gq(ee),Q=Sr(ee.length!==0,no(TK({buttons:ee},g,c))),ue=pq(()=>ke,{onBlock:mt=>{U.block(Te,(Ut,Dt)=>{const Nn=W.getOpt(Te).map(nn=>wn(nn.element));return lq(mt.message,Dt,c.shared.providers,Nn)})},onUnblock:()=>{U.unblock(Te)},onClose:()=>s.closeWindow()},c.shared.getSink),de="tox-dialog-inline",ye=Lo().os,Te=na({dom:{tag:"div",classes:["tox-dialog",de,...N],attributes:{role:"dialog",...ye.isMacOS()?{"aria-label":S.title}:{"aria-labelledby":h}}},eventOrder:{[Kg()]:[Oi.name(),Al.name()],[Wl()]:["execute-on-form"],[bi()]:["reflecting","execute-on-form"]},behaviours:We([kt.config({mode:"cyclic",onEscape:mt=>(Tn(mt,JS),A.some(!0)),useTabstopAt:mt=>!ow(mt)&&(da(mt)!=="button"||Js(mt,"disabled")!=="disabled"),firstTabstop:1}),Oi.config({channel:`${d4}-${g}`,updateState:F,initialData:t}),Yt.config({}),sn("execute-on-form",ue.concat([wp(Xc(),(mt,Ut)=>{kt.focusIn(mt)}),Me($f(),(mt,Ut)=>{mt.getSystem().broadcastOn([sw],{newFocus:Ut.event.newFocus})})])),U.config({getRoot:()=>A.some(Te)}),an.config({}),ew({})]),components:[W.asSpec(),q.asSpec(),...Q.map(mt=>mt.asSpec()).toArray()]}),rt=()=>{mq(Te,O.get())},Ue={getId:te(g),getRoot:te(Te),getFooter:()=>Q.map(mt=>mt.get(Te)),getBody:()=>q.get(Te),getFormWrapper:()=>{const mt=q.get(Te);return Ce.getCurrent(mt).getOr(mt)},toggleFullscreen:rt},ke=yq(Ue,s.redial,ce);return{dialog:Te,instanceApi:ke}};var zj=tinymce.util.Tools.resolve("tinymce.util.URI");const AK=t=>{const s=h=>{t.getSystem().isConnected()&&h(t)};return{block:h=>{if(!rn(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{Pt(C,tD,{message:h})})},unblock:()=>{s(h=>{Tn(h,QS)})},close:()=>{s(h=>{Tn(h,JS)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([i$],h)})}}},OK=["insertContent","setContent","execCommand","close","block","unblock"],Sq=t=>Vs(t)&&OK.indexOf(t.mceAction)!==-1,DK=t=>!Sq(t)&&Vs(t)&&In(t,"mceAction"),RK=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const l=ar(c.ui)?c.ui:!1;t.execCommand(c.cmd,l,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},MK=(t,s,c,l)=>{const d=nt("dialog"),g=aq(t.title,d,l),h=mI(t),C=t.buttons.bind(de=>de.length===0?A.none():A.some(vq({buttons:de},d,l))),S=SK(()=>ue,iq(()=>Q,l.shared.providers,s)),T={...t.height.fold(()=>({}),de=>({height:de+"px","max-height":de+"px"})),...t.width.fold(()=>({}),de=>({width:de+"px","max-width":de+"px"}))},O=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],N=new zj(t.url,{base_uri:new zj(window.location.href)}),F=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,W=Ma(),q=(de,ye)=>A.some(ye),ee=[Oi.config({channel:`${d4}-${d}`,updateState:q,initialData:t}),sn("messages",[Wo(()=>{const de=Ho(Je.fromDom(window),"message",ye=>{if(N.isSameOrigin(new zj(ye.raw.origin))){const Te=ye.raw.data;Sq(Te)?RK(c,ue,Te):DK(Te)&&t.onMessage(ue,Te)}});W.set(de)}),td(W.clear)]),Al.config({channels:{[i$]:{onReceive:(de,ye)=>{io(de.element,"iframe").each(Te=>{const rt=Te.dom.contentWindow;Po(rt)&&rt.postMessage(ye,F)})}}}})],Q=fq({id:d,header:g,body:h,footer:C,extraClasses:O,extraBehaviours:ee,extraStyles:T},S,l),ue=AK(Q);return{dialog:Q,instanceApi:ue}},NK=t=>{const s=t.shared;return{open:(l,d)=>{const g=()=>{sc.hide(T),d()},h=no(rw({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),C=eq(),S=QG(g,s.providers),T=na(Ij({lazySink:()=>s.getSink(),header:JG(C,S),body:tq(l,s.providers),footer:A.some(nq(oq([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Me(l1,g)],eventOrder:{}}));sc.show(T);const O=h.get(T);Yt.focus(O)}}},BK=t=>{const s=t.shared;return{open:(l,d)=>{const g=F=>{sc.hide(O),d(F)},h=no(rw({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),C=rw({context:"any",name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),S=eq(),T=QG(()=>g(!1),s.providers),O=na(Ij({lazySink:()=>s.getSink(),header:JG(S,T),body:tq(l,s.providers),footer:A.some(nq(oq([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Me(l1,()=>g(!1)),Me(wb,()=>g(!0))],eventOrder:{}}));sc.show(O);const N=h.get(O);Yt.focus(N)}}},wq=(t,s)=>gi(ws("data",s,t)),xq=t=>Om(t,".tox-alert-dialog")||Om(t,".tox-confirm-dialog"),PK=(t,s,c,l)=>s&&c?[]:[ds.config({contextual:{lazyContext:()=>A.some(Qr(Je.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:l},modes:["top"],lazyViewport:d=>o1(t,d.element).map(h=>({bounds:rb(h),optScrollEnv:A.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:Xr(h.element).top})})).getOrThunk(()=>({bounds:Mc(),optScrollEnv:A.none()}))})],$K=t=>{const s=t.editor,c=Ny(s),l=NK(t.backstages.dialog),d=BK(t.backstages.dialog),g=(q,ee,ce)=>{if(!Lr(ee)){if(ee.inline==="toolbar")return T(q,t.backstages.popup.shared.anchors.inlineDialog(),ce,ee);if(ee.inline==="bottom")return O(q,t.backstages.popup.shared.anchors.inlineBottomDialog(),ce,ee);if(ee.inline==="cursor")return T(q,t.backstages.popup.shared.anchors.cursor(),ce,ee)}return S(q,ce)},h=(q,ee)=>C(q,ee),C=(q,ee)=>{const ce=Q=>{const ue=MK(Q,{closeWindow:()=>{sc.hide(ue.dialog),ee(ue.instanceApi)}},s,t.backstages.dialog);return sc.show(ue.dialog),ue.instanceApi};return Nh.openUrl(ce,q)},S=(q,ee)=>{const ce=(Q,ue,de)=>{const ye=ue,rt=_K({dataValidator:de,initialData:ye,internalDialog:Q},{redial:Nh.redial,closeWindow:()=>{sc.hide(rt.dialog),ee(rt.instanceApi)}},t.backstages.dialog);return sc.show(rt.dialog),rt.instanceApi.setData(ye),rt.instanceApi};return Nh.open(ce,q)},T=(q,ee,ce,Q)=>{const ue=(de,ye,Te)=>{const rt=wq(ye,Te),Ue=dn(),ke=t.backstages.popup.shared.header.isPositionedAtTop(),mt={dataValidator:Te,initialData:rt,internalDialog:de},Ut=()=>Ue.on(Fe=>{fs.reposition(Fe),(!c||!ke)&&ds.refresh(Fe)}),Dt=Cq(mt,{redial:Nh.redial,closeWindow:()=>{Ue.on(fs.hide),s.off("ResizeEditor",Ut),s.off("ScrollWindow",Nn),Ue.clear(),ce(Dt.instanceApi)}},t.backstages.popup,Q.ariaAttrs,Ut),Nn=()=>Dt.dialog.getSystem().broadcastOn([Kp()],{target:Dt.dialog.element}),nn=()=>Dt.dialog.getSystem().broadcastOn([sg()],{target:Dt.dialog.element}),fn=na(fs.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Q.persistent?{event:"doNotDismissYet"}:{},...ke?{}:{fireRepositionEventInstead:{}},inlineBehaviours:We([sn("window-manager-inline-events",[Me(Im(),(Fe,et)=>{Tn(Dt.dialog,l1)})]),...PK(s,c,ke,nn)]),isExtraPart:(Fe,et)=>xq(et)}));Ue.set(fn);const _t=()=>{const Fe=s.inline?gc():Je.fromDom(s.getContainer()),et=Qr(Fe);return A.some(et)};return fs.showWithinBounds(fn,jl(Dt.dialog),{anchor:ee},_t),(!c||!ke)&&(ds.refresh(fn),s.on("ResizeEditor",Ut)),s.on("ScrollWindow",Nn),Dt.instanceApi.setData(rt),kt.focusIn(Dt.dialog),Dt.instanceApi};return Nh.open(ue,q)},O=(q,ee,ce,Q)=>{const ue=(de,ye,Te)=>{const rt=wq(ye,Te),Ue=dn(),ke=t.backstages.popup.shared.header.isPositionedAtTop(),mt={dataValidator:Te,initialData:rt,internalDialog:de},Ut=()=>Ue.on(fn=>{fs.reposition(fn),ds.refresh(fn)}),Dt=Cq(mt,{redial:Nh.redial,closeWindow:()=>{Ue.on(fs.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Ut),Ue.clear(),ce(Dt.instanceApi)}},t.backstages.popup,Q.ariaAttrs,Ut),Nn=na(fs.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Q.persistent?{event:"doNotDismissYet"}:{},...ke?{}:{fireRepositionEventInstead:{}},inlineBehaviours:We([sn("window-manager-inline-events",[Me(Im(),(fn,_t)=>{Tn(Dt.dialog,l1)})]),ds.config({contextual:{lazyContext:()=>A.some(Qr(Je.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:fn=>o1(s,fn.element).map(Fe=>({bounds:rb(Fe),optScrollEnv:A.some({currentScrollTop:Fe.element.dom.scrollTop,scrollElmTop:Xr(Fe.element).top})})).getOrThunk(()=>({bounds:Mc(),optScrollEnv:A.none()}))})]),isExtraPart:(fn,_t)=>xq(_t)}));Ue.set(Nn);const nn=()=>t.backstages.popup.shared.getSink().toOptional().bind(fn=>{const _t=o1(s,fn.element),Fe=15,et=_t.map(Ft=>rb(Ft)).getOr(Mc()),jt=Qr(Je.fromDom(s.getContentAreaContainer())),gn=sp(jt,et);return A.some(Ss(gn.x,gn.y,gn.width,gn.height-Fe))});return fs.showWithinBounds(Nn,jl(Dt.dialog),{anchor:ee},nn),ds.refresh(Nn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Ut),Dt.instanceApi.setData(rt),kt.focusIn(Dt.dialog),Dt.instanceApi};return Nh.open(ue,q)};return{open:g,openUrl:h,alert:(q,ee)=>{l.open(q,ee)},close:q=>{q.close()},confirm:(q,ee)=>{d.open(q,ee)}}},IK=t=>{jN(t),EV(t),Pn(t)};var FK=()=>{IH.add("silver",t=>{IK(t);let s=()=>Mc();const{dialogs:c,popups:l,renderUI:d}=iI(t,{getPopupSinkBounds:()=>s()}),g=()=>{const O=d();return o1(t,l.getMothership().element).each(F=>{s=()=>rb(F)}),O};XV.register(t,l.backstage.shared);const h=$K({editor:t,backstages:{popup:l.backstage,dialog:c.backstage}}),C=dn(),S=()=>GA(t,{backstage:l.backstage},l.getMothership(),C),T=()=>io(Je.fromDom(t.getContainer()),".tox-promotion").map(O=>O.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:te(h),getNotificationManagerImpl:S,getPromotionElement:T}})};FK()}()),qq}var Yq;function JK(){return Yq||(Yq=1,XK()),Gq}JK();var Xq={},Jq={},Qq;function QK(){return Qq||(Qq=1,function(){var um=tinymce.util.Tools.resolve("tinymce.ModelManager");const Eu=(i,m,p)=>{var v;return p(i,m.prototype)?!0:((v=i.constructor)===null||v===void 0?void 0:v.name)===m.name},dm=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&Eu(i,String,(p,v)=>v.isPrototypeOf(p))?"string":m},ca=i=>m=>dm(m)===i,aa=i=>m=>typeof m===i,Aa=i=>m=>i===m,pr=ca("string"),rn=ca("object"),Vs=ca("array"),ti=Aa(null),Ns=aa("boolean"),zc=Aa(void 0),ar=i=>i==null,Lr=i=>!ar(i),el=aa("function"),Po=aa("number"),St=()=>{},Vc=(i,m)=>(...p)=>i(m.apply(null,p)),en=(i,m)=>p=>i(m(p)),ae=i=>()=>i,Ot=i=>i,Oa=(i,m)=>i===m;function $n(i,...m){return(...p)=>{const v=m.concat(p);return i.apply(null,v)}}const te=i=>m=>!i(m),Sn=i=>()=>{throw new Error(i)},bs=i=>i(),Rn=ae(!1),De=ae(!0);class le{constructor(m,p){this.tag=m,this.value=p}static some(m){return new le(!0,m)}static none(){return le.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?le.some(m(this.value)):le.none()}bind(m){return this.tag?m(this.value):le.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:le.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Lr(m)?le.some(m):le.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}le.singletonNone=new le(!1);const Bs=Array.prototype.slice,bn=Array.prototype.indexOf,wt=Array.prototype.push,A=(i,m)=>bn.call(i,m),Xo=(i,m)=>A(i,m)>-1,lt=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const k=i[p];if(m(k,p))return!0}return!1},Jo=(i,m)=>{const p=[];for(let v=0;v<i;v++)p.push(m(v));return p},Xt=(i,m)=>{const p=i.length,v=new Array(p);for(let k=0;k<p;k++){const D=i[k];v[k]=m(D,k)}return v},ze=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const k=i[p];m(k,p)}},bo=(i,m)=>{for(let p=i.length-1;p>=0;p--){const v=i[p];m(v,p)}},br=(i,m)=>{const p=[],v=[];for(let k=0,D=i.length;k<D;k++){const $=i[k];(m($,k)?p:v).push($)}return{pass:p,fail:v}},go=(i,m)=>{const p=[];for(let v=0,k=i.length;v<k;v++){const D=i[v];m(D,v)&&p.push(D)}return p},vr=(i,m,p)=>(bo(i,(v,k)=>{p=m(p,v,k)}),p),Pe=(i,m,p)=>(ze(i,(v,k)=>{p=m(p,v,k)}),p),ft=(i,m,p)=>{for(let v=0,k=i.length;v<k;v++){const D=i[v];if(m(D,v))return le.some(D);if(p(D,v))break}return le.none()},L=(i,m)=>ft(i,m,Rn),ni=(i,m)=>{for(let p=0,v=i.length;p<v;p++){const k=i[p];if(m(k,p))return le.some(p)}return le.none()},ho=i=>{const m=[];for(let p=0,v=i.length;p<v;++p){if(!Vs(i[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+i);wt.apply(m,i[p])}return m},ao=(i,m)=>ho(Xt(i,m)),xo=(i,m)=>{for(let p=0,v=i.length;p<v;++p){const k=i[p];if(m(k,p)!==!0)return!1}return!0},Li=i=>{const m=Bs.call(i,0);return m.reverse(),m},Jt=(i,m)=>{const p={};for(let v=0,k=i.length;v<k;v++){const D=i[v];p[String(D)]=m(D,v)}return p},vo=(i,m)=>{const p=Bs.call(i,0);return p.sort(m),p},qt=(i,m)=>m>=0&&m<i.length?le.some(i[m]):le.none(),_e=i=>qt(i,0),Da=i=>qt(i,i.length-1),gs=(i,m)=>{for(let p=0;p<i.length;p++){const v=m(i[p],p);if(v.isSome())return v}return le.none()},Rt=Object.keys,Ar=Object.hasOwnProperty,Ro=(i,m)=>{const p=Rt(i);for(let v=0,k=p.length;v<k;v++){const D=p[v],$=i[D];m($,D)}},Tu=(i,m)=>ts(i,(p,v)=>({k:v,v:m(p,v)})),ts=(i,m)=>{const p={};return Ro(i,(v,k)=>{const D=m(v,k);p[D.k]=D.v}),p},Hr=i=>(m,p)=>{i[p]=m},Bl=(i,m,p,v)=>{Ro(i,(k,D)=>{(m(k,D)?p:v)(k,D)})},zr=(i,m)=>{const p={};return Bl(i,m,Hr(p),St),p},An=(i,m)=>{const p=[];return Ro(i,(v,k)=>{p.push(m(v,k))}),p},$o=i=>An(i,Ot),ku=(i,m)=>vs(i,m)?le.from(i[m]):le.none(),vs=(i,m)=>Ar.call(i,m),Io=(i,m)=>vs(i,m)&&i[m]!==void 0&&i[m]!==null,tl=i=>{for(const m in i)if(Ar.call(i,m))return!1;return!0},Us={generate:i=>{if(!Vs(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],p={};return ze(i,(v,k)=>{const D=Rt(v);if(D.length!==1)throw new Error("one and only one name per case");const $=D[0],U=v[$];if(p[$]!==void 0)throw new Error("duplicate key detected:"+$);if($==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Vs(U))throw new Error("case arguments must be an array");m.push($),p[$]=(...K)=>{const se=K.length;if(se!==U.length)throw new Error("Wrong number of arguments to case "+$+". Expected "+U.length+" ("+U+"), got "+se);return{fold:(...Ce)=>{if(Ce.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+Ce.length);return Ce[k].apply(null,K)},match:Ce=>{const ut=Rt(Ce);if(m.length!==ut.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+ut.join(","));if(!xo(m,Mt=>Xo(ut,Mt)))throw new Error("Not all branches were specified when using match. Specified: "+ut.join(", ")+`
Required: `+m.join(", "));return Ce[$].apply(null,K)},log:Ce=>{console.log(Ce,{constructors:m,constructor:$,params:K})}}}}),p}},lr=i=>{let m=i;return{get:()=>m,set:k=>{m=k}}},la=i=>i.slice(0).sort(),Pl=(i,m)=>{throw new Error("All required keys ("+la(i).join(", ")+") were not specified. Specified keys were: "+la(m).join(", ")+".")},yr=i=>{throw new Error("Unsupported keys for object: "+la(i).join(", "))},_u=(i,m)=>{if(!Vs(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");ze(m,p=>{if(!pr(p))throw new Error("The value "+p+" in the "+i+" fields was not a string.")})},at=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+la(i).join(", ")+") were not.")},In=i=>{const m=la(i);L(m,(v,k)=>k<m.length-1&&v===m[k+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},ac=(i,m)=>xd(i,m,{validate:el,label:"function"}),xd=(i,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return _u("required",m),In(m),v=>{const k=Rt(v);xo(m,U=>Xo(k,U))||Pl(m,k),i(m,k);const $=go(m,U=>!p.validate(v[U],U));return $.length>0&&at($,p.label),v}},Uc=(i,m)=>{const p=go(m,v=>!Xo(i,v));p.length>0&&yr(p)},Et=i=>ac(Uc,i),nl=i=>{const m=D=>D(i),p=ae(i),v=()=>k,k={tag:!0,inner:i,fold:(D,$)=>$(i),isValue:De,isError:Rn,map:D=>yo.value(D(i)),mapError:v,bind:m,exists:m,forall:m,getOr:p,or:v,getOrThunk:p,orThunk:v,getOrDie:p,each:D=>{D(i)},toOptional:()=>le.some(i)};return k},Mo=i=>{const m=()=>p,p={tag:!1,inner:i,fold:(v,k)=>v(i),isValue:Rn,isError:De,map:m,mapError:v=>yo.error(v(i)),bind:m,exists:Rn,forall:De,getOr:Ot,or:Ot,getOrThunk:bs,orThunk:bs,getOrDie:Sn(String(i)),each:St,toOptional:le.none};return p},yo={value:nl,error:Mo,fromOption:(i,m)=>i.fold(()=>Mo(m),nl)},Kt=typeof window<"u"?window:Function("return this;")(),$l=i=>{const m=i.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},mf=(i,m,p=Oa)=>i.exists(v=>p(v,m)),_o=i=>{const m=[],p=v=>{m.push(v)};for(let v=0;v<i.length;v++)i[v].each(p);return m},Vr=(i,m)=>i!=null?m(i):le.none(),ns=(i,m)=>i?le.some(m):le.none(),mm=(i,m)=>{let p=m??Kt;for(let v=0;v<i.length&&p!==void 0&&p!==null;++v)p=p[i[v]];return p},Qt=(i,m)=>{const p=i.split(".");return mm(p,m)},pa=i=>{const m=lr(le.none()),p=()=>m.get().each(i);return{clear:()=>{p(),m.set(le.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:U=>{p(),m.set(le.some(U))}}},Fo=()=>{const i=pa(St);return{...i,on:p=>i.get().each(p)}},Ed=(i,m)=>i.substring(m),Td=(i,m,p)=>m===""||i.length>=m.length&&i.substr(p,p+m.length)===m,Lh=(i,m)=>lc(i,m)?Ed(i,m.length):i,qo=(i,m,p=0,v)=>{const k=i.indexOf(m,p);return k!==-1?zc(v)?!0:k+m.length<=v:!1},lc=(i,m)=>Td(i,m,0),Au=(i,m)=>Td(i,m,i.length-m.length),ol=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),Cr=i=>i.length>0,_d=i=>{const m=parseFloat(i);return isNaN(m)?le.none():le.some(m)},ba=(i,m)=>{let p=null;const v=()=>{ti(p)||(clearTimeout(p),p=null)};return{cancel:v,throttle:(...D)=>{v(),p=setTimeout(()=>{p=null,i.apply(null,D)},m)}}},nt=i=>{let m=!1,p;return(...v)=>(m||(m=!0,p=i.apply(null,v)),p)},pg=" ",Ys=["tfoot","thead","tbody","colgroup"],Ou=i=>Xo(Ys,i),uo=(i,m)=>({rows:i,columns:m}),ff=(i,m)=>({row:i,column:m}),Wc=(i,m,p)=>({element:i,rowspan:m,colspan:p}),bg=(i,m,p,v)=>({element:i,rowspan:m,colspan:p,isNew:v}),oi=(i,m,p,v,k,D)=>({element:i,rowspan:m,colspan:p,row:v,column:k,isLocked:D}),fm=(i,m,p)=>({element:i,cells:m,section:p}),Ur=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),Or=(i,m,p)=>({element:i,isNew:m,isLocked:p}),Ra=(i,m,p,v)=>({element:i,cells:m,section:p,isNew:v}),Sr=(i,m,p,v)=>({startRow:i,startCol:m,finishRow:p,finishCol:v}),ir=(i,m,p)=>({element:i,colspan:m,column:p}),Ps=(i,m)=>({element:i,columns:m}),Hi=(i,m,p)=>{const v=i.cells,k=v.slice(0,m),D=v.slice(m),$=k.concat(p).concat(D);return vg(i,$)},si=(i,m,p)=>Hi(i,m,[p]),ia=(i,m,p)=>{const v=i.cells;v[m]=p},vg=(i,m)=>Ra(i.element,m,i.section,i.isNew),Ma=(i,m)=>{const p=i.cells,v=Xt(p,m);return Ra(i.element,v,i.section,i.isNew)},dn=(i,m)=>i.cells[m],Xs=(i,m)=>dn(i,m).element,ic=i=>i.cells.length,os=i=>{const m=br(i,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},uc=(i,m,p)=>{const v=Xt(i.cells,p);return Ra(m(i.element),v,i.section,!0)},zi=(i,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=i,!v.hasChildNodes()||v.childNodes.length>1){const k="HTML does not have a single root node";throw console.error(k,i),new Error(k)}return Eo(v.childNodes[0])},No=(i,m)=>{const v=(m||document).createElement(i);return Eo(v)},Wr=(i,m)=>{const v=(m||document).createTextNode(i);return Eo(v)},Eo=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},ct={fromHtml:zi,fromTag:No,fromText:Wr,fromDom:Eo,fromPoint:(i,m,p)=>le.from(i.dom.elementFromPoint(m,p)).map(Eo)},sl=(i,m)=>{const p=i.document.createRange();return p.selectNode(m.dom),p},rl=(i,m)=>{const p=i.document.createRange();return Na(p,m),p},Na=(i,m)=>i.selectNodeContents(m.dom),yg=(i,m)=>{m.fold(p=>{i.setStartBefore(p.dom)},(p,v)=>{i.setStart(p.dom,v)},p=>{i.setStartAfter(p.dom)})},va=(i,m)=>{m.fold(p=>{i.setEndBefore(p.dom)},(p,v)=>{i.setEnd(p.dom,v)},p=>{i.setEndAfter(p.dom)})},cl=(i,m,p)=>{const v=i.document.createRange();return yg(v,m),va(v,p),v},Dr=(i,m,p,v,k)=>{const D=i.document.createRange();return D.setStart(m.dom,p),D.setEnd(v.dom,k),D},Du=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),Ru=i=>{const m=i.getClientRects(),p=m.length>0?m[0]:i.getBoundingClientRect();return p.width>0||p.height>0?le.some(p).map(Du):le.none()},Vi=Us.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Zr=(i,m,p)=>m(ct.fromDom(p.startContainer),p.startOffset,ct.fromDom(p.endContainer),p.endOffset),gm=(i,m)=>m.match({domRange:p=>({ltr:ae(p),rtl:le.none}),relative:(p,v)=>({ltr:nt(()=>cl(i,p,v)),rtl:nt(()=>le.some(cl(i,v,p)))}),exact:(p,v,k,D)=>({ltr:nt(()=>Dr(i,p,v,k,D)),rtl:nt(()=>le.some(Dr(i,k,D,p,v)))})}),ri=(i,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(k=>k.collapsed===!1).map(k=>Vi.rtl(ct.fromDom(k.endContainer),k.endOffset,ct.fromDom(k.startContainer),k.startOffset)).getOrThunk(()=>Zr(i,Vi.ltr,p)):Zr(i,Vi.ltr,p)},Cg=(i,m)=>{const p=gm(i,m);return ri(i,p)},Je=(i,m)=>Cg(i,m).match({ltr:(v,k,D,$)=>{const U=i.document.createRange();return U.setStart(v.dom,k),U.setEnd(D.dom,$),U},rtl:(v,k,D,$)=>{const U=i.document.createRange();return U.setStart(D.dom,$),U.setEnd(v.dom,k),U}});Vi.ltr,Vi.rtl;const Mu=8,Ad=9,V=11,J=1,fe=3,Re=(i,m)=>{const p=i.dom;if(p.nodeType!==J)return!1;{const v=p;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Ke=i=>i.nodeType!==J&&i.nodeType!==Ad&&i.nodeType!==V||i.childElementCount===0,bt=(i,m)=>{const p=m===void 0?document:m.dom;return Ke(p)?[]:Xt(p.querySelectorAll(i),ct.fromDom)},yn=(i,m)=>{const p=m===void 0?document:m.dom;return Ke(p)?le.none():le.from(p.querySelector(i)).map(ct.fromDom)},Cn=(i,m)=>i.dom===m.dom,Yn=(i,m)=>{const p=i.dom,v=m.dom;return p===v?!1:p.contains(v)},ls=Re,Qo=(i,m,p,v)=>{const k=i.isiOS()&&/ipad/i.test(p)===!0,D=i.isiOS()&&!k,$=i.isiOS()||i.isAndroid(),U=$||v("(pointer:coarse)"),K=k||!D&&$&&v("(min-device-width:768px)"),se=D||$&&!K,he=m.isSafari()&&i.isiOS()&&/safari/i.test(p)===!1,Ce=!se&&!K&&!he;return{isiPad:ae(k),isiPhone:ae(D),isTablet:ae(K),isPhone:ae(se),isTouch:ae(U),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:ae(he),isDesktop:ae(Ce)}},al=(i,m)=>{for(let p=0;p<i.length;p++){const v=i[p];if(v.test(m))return v}},Il=(i,m)=>{const p=al(i,m);if(!p)return{major:0,minor:0};const v=k=>Number(m.replace(p,"$"+k));return Ba(v(1),v(2))},hm=(i,m)=>{const p=String(m).toLowerCase();return i.length===0?Hh():Il(i,p)},Hh=()=>Ba(0,0),Ba=(i,m)=>({major:i,minor:m}),Od={nu:Ba,detect:hm,unknown:Hh},Pa=(i,m)=>gs(m.brands,p=>{const v=p.brand.toLowerCase();return L(i,k=>{var D;return v===((D=k.brand)===null||D===void 0?void 0:D.toLowerCase())}).map(k=>({current:k.name,version:Od.nu(parseInt(p.version,10),0)}))}),Nu=(i,m)=>{const p=String(m).toLowerCase();return L(i,v=>v.search(p))},lo=(i,m)=>Nu(i,m).map(p=>{const v=Od.detect(p.versionRegexes,m);return{current:p.name,version:v}}),gf=(i,m)=>Nu(i,m).map(p=>{const v=Od.detect(p.versionRegexes,m);return{current:p.name,version:v}}),Bu=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ci=i=>m=>qo(m,i),zh=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>qo(i,"edge/")&&qo(i,"chrome")&&qo(i,"safari")&&qo(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Bu],search:i=>qo(i,"chrome")&&!qo(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>qo(i,"msie")||qo(i,"trident")},{name:"Opera",versionRegexes:[Bu,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ci("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ci("firefox")},{name:"Safari",versionRegexes:[Bu,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(qo(i,"safari")||qo(i,"mobile/"))&&qo(i,"applewebkit")}],Vh=[{name:"Windows",search:ci("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>qo(i,"iphone")||qo(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ci("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ci("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ci("linux"),versionRegexes:[]},{name:"Solaris",search:ci("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ci("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ci("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Sg={browsers:ae(zh),oses:ae(Vh)},pm="Edge",bm="Chromium",Dd="IE",hf="Opera",wg="Firefox",Uh="Safari",ai=()=>ll({current:void 0,version:Od.unknown()}),ll=i=>{const m=i.current,p=i.version,v=k=>()=>m===k;return{current:m,version:p,isEdge:v(pm),isChromium:v(bm),isIE:v(Dd),isOpera:v(hf),isFirefox:v(wg),isSafari:v(Uh)}},jr={unknown:ai,nu:ll},vm="Windows",Wh="iOS",ua="Android",Zh="Linux",Ui="macOS",jh="Solaris",xg="FreeBSD",il="ChromeOS",Fl=()=>li({current:void 0,version:Od.unknown()}),li=i=>{const m=i.current,p=i.version,v=k=>()=>m===k;return{current:m,version:p,isWindows:v(vm),isiOS:v(Wh),isAndroid:v(ua),isMacOS:v(Ui),isLinux:v(Zh),isSolaris:v(jh),isFreeBSD:v(xg),isChromeOS:v(il)}},Eg={unknown:Fl,nu:li},g1={detect:(i,m,p)=>{const v=Sg.browsers(),k=Sg.oses(),D=m.bind(K=>Pa(v,K)).orThunk(()=>lo(v,i)).fold(jr.unknown,jr.nu),$=gf(k,i).fold(Eg.unknown,Eg.nu),U=Qo($,D,i,p);return{browser:D,os:$,deviceType:U}}},Gh=i=>window.matchMedia(i).matches;let h1=nt(()=>g1.detect(window.navigator.userAgent,le.from(window.navigator.userAgentData),Gh));const pf=()=>h1(),p1=(i,m)=>Qt(i,m),b1=(i,m)=>{const p=p1(i,m);if(p==null)throw new Error(i+" not available on this browser");return p},Tg=Object.getPrototypeOf,$b=i=>b1("HTMLElement",i),kg=i=>{const m=Qt("ownerDocument.defaultView",i);return rn(i)&&($b(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(Tg(i).constructor.name))},Es=i=>i.dom.nodeName.toLowerCase(),Xe=i=>i.dom.nodeType,_g=i=>m=>Xe(m)===i,Ib=i=>Xe(i)===Mu||Es(i)==="#comment",v1=i=>Lo(i)&&kg(i.dom),Lo=_g(J),Wi=_g(fe),ne=_g(Ad),y1=_g(V),dc=i=>m=>Lo(m)&&Es(m)===i,Rd=i=>ct.fromDom(i.dom.ownerDocument),da=i=>ne(i)?i:Rd(i),Md=i=>ct.fromDom(da(i).dom.documentElement),ym=i=>ct.fromDom(da(i).dom.defaultView),Zi=i=>le.from(i.dom.parentNode).map(ct.fromDom),Zc=i=>le.from(i.dom.parentElement).map(ct.fromDom),ji=(i,m)=>{const p=el(m)?m:Rn;let v=i.dom;const k=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const D=v.parentNode,$=ct.fromDom(D);if(k.push($),p($)===!0)break;v=D}return k},Cm=i=>le.from(i.dom.previousSibling).map(ct.fromDom),Pu=i=>le.from(i.dom.nextSibling).map(ct.fromDom),Ac=i=>Xt(i.dom.childNodes,ct.fromDom),wr=(i,m)=>{const p=i.dom.childNodes;return le.from(p[m]).map(ct.fromDom)},$u=i=>wr(i,0),ya=(i,m,p,v)=>{const D=Rd(i).dom.createRange();return D.setStart(i.dom,m),D.setEnd(p.dom,v),D},ul=(i,m,p,v)=>{const k=ya(i,m,p,v),D=Cn(i,p)&&m===v;return k.collapsed&&!D},Oc=i=>y1(i)&&Lr(i.dom.host),Iu=i=>ct.fromDom(i.dom.getRootNode()),On=i=>Oc(i)?i:ct.fromDom(da(i).dom.body),dl=i=>{const m=Iu(i);return Oc(m)?le.some(m):le.none()},bf=i=>ct.fromDom(i.dom.host),Un=i=>{if(Lr(i.target)){const m=ct.fromDom(i.target);if(Lo(m)&&mc(m)&&i.composed&&i.composedPath){const p=i.composedPath();if(p)return _e(p)}}return le.from(i.target)},mc=i=>Lr(i.dom.shadowRoot),Ll=(i,m,p,v,k,D,$)=>({target:i,x:m,y:p,stop:v,prevent:k,kill:D,raw:$}),Fu=i=>{const m=ct.fromDom(Un(i).getOr(i.target)),p=()=>i.stopPropagation(),v=()=>i.preventDefault(),k=Vc(v,p);return Ll(m,i.clientX,i.clientY,p,v,k,i)},ii=(i,m)=>p=>{i(p)&&m(Fu(p))},Gr=(i,m,p,v,k)=>{const D=ii(p,v);return i.dom.addEventListener(m,D,k),{unbind:$n(C1,i,m,D,k)}},qr=(i,m,p,v)=>Gr(i,m,p,v,!1),C1=(i,m,p,v)=>{i.dom.removeEventListener(m,p,v)},Lu=De,ys=(i,m,p)=>qr(i,m,Lu,p),ml=Fu,fl=(i,m)=>{Zi(i).each(v=>{v.dom.insertBefore(m.dom,i.dom)})},Gi=(i,m)=>{Pu(i).fold(()=>{Zi(i).each(k=>{To(k,m)})},v=>{fl(v,m)})},gl=(i,m)=>{$u(i).fold(()=>{To(i,m)},v=>{i.dom.insertBefore(m.dom,v.dom)})},To=(i,m)=>{i.dom.appendChild(m.dom)},Sm=(i,m,p)=>{wr(i,p).fold(()=>{To(i,m)},v=>{fl(v,m)})},qh=(i,m)=>{fl(i,m),To(m,i)},Kr=(i,m)=>{ze(m,(p,v)=>{const k=v===0?i:m[v-1];Gi(k,p)})},fc=(i,m)=>{ze(m,p=>{To(i,p)})},hl=(i,m,p)=>{if(pr(p)||Ns(p)||Po(p))i.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",i),new Error("Attribute value was not simple")},$s=(i,m,p)=>{hl(i.dom,m,p)},qi=(i,m)=>{const p=i.dom;Ro(m,(v,k)=>{hl(p,k,v)})},ur=(i,m)=>{Ro(m,(p,v)=>{p.fold(()=>{ss(i,v)},k=>{hl(i.dom,v,k)})})},Dc=(i,m)=>{const p=i.dom.getAttribute(m);return p===null?void 0:p},Ho=(i,m)=>le.from(Dc(i,m)),ss=(i,m)=>{i.dom.removeAttribute(m)},wm=i=>Pe(i.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),$a=i=>{i.dom.textContent="",ze(Ac(i),m=>{ro(m)})},ro=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},pl=i=>{const m=Ac(i);m.length>0&&Kr(i,m),ro(i)},bl=(i,m)=>ct.fromDom(i.dom.cloneNode(m)),vl=i=>bl(i,!1),Is=i=>bl(i,!0),Hu=(i,m)=>{const p=ct.fromTag(m),v=wm(i);return qi(p,v),p},Ag=(i,m)=>{const p=Hu(i,m),v=Ac(Is(i));return fc(p,v),p},Kh=(i,m)=>{const p=Hu(i,m);Gi(i,p);const v=Ac(i);return fc(p,v),ro(i),p},jc=(i,m)=>{const v=document.createElement("div");return v.innerHTML=i,Ac(ct.fromDom(v))},Yh=i=>Xt(i,ct.fromDom),vf=i=>i.dom.innerHTML,Xh=i=>{const m=ct.fromTag("div"),p=ct.fromDom(i.dom.cloneNode(!0));return To(m,p),vf(m)},Wt=i=>i.style!==void 0&&el(i.style.getPropertyValue),Hl=i=>{const m=Wi(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return dl(ct.fromDom(m)).fold(()=>p.body.contains(m),en(Hl,bf))},Js=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return ct.fromDom(m)},Ws=(i,m,p)=>{if(!pr(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",i),new Error("CSS value must be a string: "+p);Wt(i)&&i.style.setProperty(m,p)},Og=(i,m)=>{Wt(i)&&i.style.removeProperty(m)},Ln=(i,m,p)=>{const v=i.dom;Ws(v,m,p)},Nd=(i,m)=>{const p=i.dom;Ro(m,(v,k)=>{Ws(p,k,v)})},Ia=(i,m)=>{const p=i.dom,k=window.getComputedStyle(p).getPropertyValue(m);return k===""&&!Hl(i)?yl(p,m):k},yl=(i,m)=>Wt(i)?i.style.getPropertyValue(m):"",Rr=(i,m)=>{const p=i.dom,v=yl(p,m);return le.from(v).filter(k=>k.length>0)},Yr=(i,m)=>{const p=i.dom;Og(p,m),mf(Ho(i,"style").map(ol),"")&&ss(i,"style")},zu=(i,m)=>{const p=i.dom,v=m.dom;Wt(p)&&Wt(v)&&(v.style.cssText=p.style.cssText)},Ts=(i,m)=>{const p=(U,K)=>{if(!Po(K)&&!K.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+K);const se=U.dom;Wt(se)&&(se.style[i]=K+"px")},v=U=>{const K=m(U);if(K<=0||K===null){const se=Ia(U,i);return parseFloat(se)||0}return K},k=v,D=(U,K)=>Pe(K,(se,he)=>{const Ce=Ia(U,he),ut=Ce===void 0?0:parseInt(Ce,10);return isNaN(ut)?se:se+ut},0);return{set:p,get:v,getOuter:k,aggregate:D,max:(U,K,se)=>{const he=D(U,se);return K>he?K-he:0}}},xm=(i,m)=>_d(i).getOr(m),Fa=(i,m,p)=>xm(Ia(i,m),p),ui=(i,m,p,v)=>{const k=Fa(i,`padding-${p}`,0),D=Fa(i,`padding-${v}`,0),$=Fa(i,`border-${p}-width`,0),U=Fa(i,`border-${v}-width`,0);return m-k-D-$-U},Em=(i,m)=>{const p=i.dom,v=p.getBoundingClientRect().width||p.offsetWidth;return ui(i,v,"left","right")},dr=i=>Fa(i,"height",i.dom.offsetHeight),Gc=i=>Fa(i,"width",i.dom.offsetWidth),Cs=i=>Em(i),gc=Ts("height",i=>{const m=i.dom;return Hl(i)?m.getBoundingClientRect().height:m.offsetHeight}),zl=i=>gc.get(i),Zs=i=>gc.getOuter(i),Dg=dr,on=Ts("width",i=>i.dom.offsetWidth),Qs=i=>on.get(i),x=i=>on.getOuter(i),M=Cs,H=Gc,X=(i,m)=>({left:i,top:m,translate:(v,k)=>X(i+v,m+k)}),re=X,Ve=i=>{const m=i.getBoundingClientRect();return re(m.left,m.top)},Ye=(i,m)=>i!==void 0?i:m!==void 0?m:0,cn=i=>{const m=i.dom.ownerDocument,p=m.body,v=m.defaultView,k=m.documentElement;if(p===i.dom)return re(p.offsetLeft,p.offsetTop);const D=Ye(v==null?void 0:v.pageYOffset,k.scrollTop),$=Ye(v==null?void 0:v.pageXOffset,k.scrollLeft),U=Ye(k.clientTop,p.clientTop),K=Ye(k.clientLeft,p.clientLeft);return un(i).translate($-K,D-U)},un=i=>{const m=i.dom,v=m.ownerDocument.body;return v===m?re(v.offsetLeft,v.offsetTop):Hl(i)?Ve(m):re(0,0)},Lt=i=>{const m=i!==void 0?i.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return re(p,v)},wn=(i,m,p)=>{const k=(p!==void 0?p.dom:document).defaultView;k&&k.scrollBy(i,m)},xr=((i,m)=>{const p=D=>{if(!i(D))throw new Error("Can only get "+m+" value of a "+m+" node");return v(D).getOr("")},v=D=>i(D)?le.from(D.dom.nodeValue):le.none();return{get:p,getOption:v,set:(D,$)=>{if(!i(D))throw new Error("Can only set raw "+m+" value of a "+m+" node");D.dom.nodeValue=$}}})(Wi,"text"),ks=i=>xr.get(i),Bd=i=>xr.getOption(i),Pd=(i,m)=>xr.set(i,m),yf=(i,m)=>p=>Rg(p)==="rtl"?m:i,Rg=i=>Ia(i,"direction")==="rtl"?"rtl":"ltr",_s=(i,m)=>{const p=Dc(i,m);return p===void 0||p===""?[]:p.split(" ")},Cf=(i,m,p)=>{const k=_s(i,m).concat([p]);return $s(i,m,k.join(" ")),!0},Jh=(i,m,p)=>{const v=go(_s(i,m),k=>k!==p);return v.length>0?$s(i,m,v.join(" ")):ss(i,m),!1};var Mg=(i,m,p,v,k)=>i(p,v)?le.some(p):el(k)&&k(p)?le.none():m(p,v,k);const Vu=(i,m,p)=>{let v=i.dom;const k=el(p)?p:Rn;for(;v.parentNode;){v=v.parentNode;const D=ct.fromDom(v);if(m(D))return le.some(D);if(k(D))break}return le.none()},is=(i,m,p)=>Mg((k,D)=>D(k),Vu,i,m,p),Fb=(i,m)=>{const p=k=>m(ct.fromDom(k));return L(i.dom.childNodes,p).map(ct.fromDom)},Tm=(i,m)=>{const p=v=>{for(let k=0;k<v.childNodes.length;k++){const D=ct.fromDom(v.childNodes[k]);if(m(D))return le.some(D);const $=p(v.childNodes[k]);if($.isSome())return $}return le.none()};return p(i.dom)},Xr=(i,m,p)=>Vu(i,v=>Re(v,m),p),$d=(i,m)=>Fb(i,p=>Re(p,m)),er=(i,m)=>yn(m,i),mr=(i,m,p)=>Mg((k,D)=>Re(k,D),Xr,i,m,p),Sf=i=>i.dom.classList!==void 0,v2=i=>_s(i,"class"),S1=(i,m)=>Cf(i,"class",m),Ng=(i,m)=>Jh(i,"class",m),Ki=(i,m)=>{Sf(i)?i.dom.classList.add(m):S1(i,m)},Qh=i=>{(Sf(i)?i.dom.classList:v2(i)).length===0&&ss(i,"class")},Lb=(i,m)=>{Sf(i)?i.dom.classList.remove(m):Ng(i,m),Qh(i)},km=(i,m)=>Sf(i)&&i.dom.classList.contains(m),ep=(i,m)=>{ze(m,p=>{Lb(i,p)})},_m=i=>mr(i,"[contenteditable]"),wf=(i,m=!1)=>Hl(i)?i.dom.isContentEditable:_m(i).fold(ae(m),p=>w1(p)==="true"),w1=i=>i.dom.contentEditable,tp=i=>m=>{Ki(m,i)},y2=i=>m=>{ep(m,i)},C2=(i,m,p)=>go(ji(i,p),m),Vl=(i,m)=>go(Ac(i),m),Yi=(i,m)=>{let p=[];return ze(Ac(i),v=>{m(v)&&(p=p.concat([v])),p=p.concat(Yi(v,m))}),p},Ca=(i,m,p)=>C2(i,v=>Re(v,m),p),io=(i,m)=>Vl(i,p=>Re(p,m)),hc=(i,m)=>bt(m,i),x1=(i,m,p,v)=>({parent:i,children:m,element:p,index:v}),Bg=i=>Zi(i).bind(m=>{const p=Ac(m);return Uu(p,i).map(v=>x1(m,p,i,v))}),Uu=(i,m)=>ni(i,$n(Cn,m)),Id=(i,m,p)=>Vu(i,m,p).isSome(),Cl=i=>Es(i)==="img"?1:Bd(i).fold(()=>Ac(i).length,m=>m.length),E1=i=>Bd(i).filter(m=>m.trim().length!==0||m.indexOf(pg)>-1).isSome(),T1=i=>v1(i)&&Dc(i,"contenteditable")==="false",hs=["img","br"],k1=i=>E1(i)||Xo(hs,Es(i))||T1(i),Ao=i=>Tm(i,k1),_1=i=>Jr(i,k1),Jr=(i,m)=>{const p=v=>{const k=Ac(v);for(let D=k.length-1;D>=0;D--){const $=k[D];if(m($))return le.some($);const U=p($);if(U.isSome())return U}return le.none()};return p(i)},Rc={create:(i,m,p,v)=>({start:i,soffset:m,finish:p,foffset:v})},A1=Us.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Hb=(i,m,p,v)=>i.fold(m,p,v),S2=i=>i.fold(Ot,Ot,Ot),Wu=A1.before,zb=A1.on,Sa=A1.after,Fs={before:Wu,on:zb,after:Sa,cata:Hb,getStart:S2},Am=Us.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),zo=i=>Am.exact(i.start,i.soffset,i.finish,i.foffset),O1=i=>i.match({domRange:m=>ct.fromDom(m.startContainer),relative:(m,p)=>Fs.getStart(m),exact:(m,p,v,k)=>m}),Om=Am.domRange,np=Am.relative,Vb=Am.exact,Pg=i=>{const m=O1(i);return ym(m)},w=Rc.create,_={domRange:Om,relative:np,exact:Vb,exactFromRange:zo,getWin:Pg,range:w},I=(i,m,p)=>{var v;return le.from((v=i.caretPositionFromPoint)===null||v===void 0?void 0:v.call(i,m,p)).bind(k=>{if(k.offsetNode===null)return le.none();const D=i.createRange();return D.setStart(k.offsetNode,k.offset),D.collapse(),le.some(D)})},G=(i,m,p)=>{var v;return le.from((v=i.caretRangeFromPoint)===null||v===void 0?void 0:v.call(i,m,p))},ie=(i,m,p)=>i.caretPositionFromPoint?I(i,m,p):i.caretRangeFromPoint?G(i,m,p):le.none(),Ne=(i,m,p)=>{const v=i.document;return ie(v,m,p).map(k=>Rc.create(ct.fromDom(k.startContainer),k.startOffset,ct.fromDom(k.endContainer),k.endOffset))},tt=(i,m)=>{const p=Es(i);return p==="input"?Fs.after(i):Xo(["br","img"],p)?m===0?Fs.before(i):Fs.after(i):Fs.on(i,m)},At=(i,m)=>{const p=i.fold(Fs.before,tt,Fs.after),v=m.fold(Fs.before,tt,Fs.after);return _.relative(p,v)},hn=(i,m,p,v)=>{const k=tt(i,m),D=tt(p,v);return _.relative(k,D)},pn=i=>le.from(i.getSelection()),Bo=(i,m)=>{pn(i).each(p=>{p.removeAllRanges(),p.addRange(m)})},rs=(i,m,p,v,k)=>{const D=Dr(i,m,p,v,k);Bo(i,D)},tr=(i,m,p,v,k,D)=>{m.collapse(p.dom,v),m.extend(k.dom,D)},La=(i,m)=>Cg(i,m).match({ltr:(p,v,k,D)=>{rs(i,p,v,k,D)},rtl:(p,v,k,D)=>{pn(i).each($=>{if($.setBaseAndExtent)$.setBaseAndExtent(p.dom,v,k.dom,D);else if($.extend)try{tr(i,$,p,v,k,D)}catch{rs(i,k,D,p,v)}else rs(i,k,D,p,v)})}}),Zu=(i,m,p,v,k)=>{const D=hn(m,p,v,k);La(i,D)},qc=(i,m,p)=>{const v=At(m,p);La(i,v)},di=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),p=i.getRangeAt(i.rangeCount-1);return le.some(Rc.create(ct.fromDom(m.startContainer),m.startOffset,ct.fromDom(p.endContainer),p.endOffset))}else return le.none()},Dm=i=>{if(i.anchorNode===null||i.focusNode===null)return di(i);{const m=ct.fromDom(i.anchorNode),p=ct.fromDom(i.focusNode);return ul(m,i.anchorOffset,p,i.focusOffset)?le.some(Rc.create(m,i.anchorOffset,p,i.focusOffset)):di(i)}},$g=(i,m,p=!0)=>{const k=(p?rl:sl)(i,m);Bo(i,k)},Ef=i=>pn(i).filter(m=>m.rangeCount>0).bind(Dm),Tf=i=>Ef(i).map(m=>_.exact(m.start,m.soffset,m.finish,m.foffset)),D1=(i,m)=>{const p=Je(i,m);return Ru(p)},Ig=(i,m,p)=>Ne(i,m,p),op=i=>{pn(i).each(m=>m.removeAllRanges())},kf={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},w2=(()=>{const i="[0-9]+",p="[eE]"+("[+-]?"+i),v="\\.",k=U=>`(?:${U})?`,$=`[+-]?(?:${["Infinity",i+v+k(i)+k(p),v+i+k(p),i+k(p)].join("|")})`;return new RegExp(`^(${$})(.*)$`)})(),Jn=(i,m)=>lt(m,p=>lt(kf[p],v=>i===v)),cs=(i,m)=>le.from(w2.exec(i)).bind(v=>{const k=Number(v[1]),D=v[2];return Jn(D,m)?le.some({value:k,unit:D}):le.none()}),pc=i=>Xt(i,ae(0)),Kc=(i,m,p,v,k)=>k(i.slice(0,m)).concat(v).concat(k(i.slice(p))),R1=i=>(m,p,v,k)=>{if(i(v)){const D=Math.max(k,m[p]-Math.abs(v)),$=Math.abs(D-m[p]);return v>=0?$:-$}else return v},Rm=R1(i=>i<0),Fg=R1(De),Lg=()=>{const i=(U,K,se,he,Ce)=>{const ut=Rm(U,K,he,Ce);return Kc(U,K,se+1,[ut,0],pc)},m=(U,K,se,he)=>{const Ce=(100+se)/100,ut=Math.max(he,(U[K]+se)/Ce);return Xt(U,(it,Mt)=>(Mt===K?ut:it/Ce)-it)},p=(U,K,se,he,Ce,ut)=>ut?m(U,K,he,Ce):i(U,K,se,he,Ce);return{resizeTable:(U,K)=>U(K),clampTableDelta:Rm,calcLeftEdgeDeltas:p,calcMiddleDeltas:(U,K,se,he,Ce,ut,it)=>p(U,se,he,Ce,ut,it),calcRightEdgeDeltas:(U,K,se,he,Ce,ut)=>{if(ut)return m(U,se,he,Ce);{const it=Rm(U,se,he,Ce);return pc(U.slice(0,se)).concat([it])}},calcRedestributedWidths:(U,K,se,he)=>{if(he){const ut=(K+se)/K,it=Xt(U,Mt=>Mt/ut);return{delta:ut*100-100,newSizes:it}}else return{delta:se,newSizes:U}}}},Cw=()=>{const i=($,U,K,se,he)=>{const Ce=se>=0?K:U,ut=Fg($,Ce,se,he);return Kc($,U,K+1,[ut,-ut],pc)};return{resizeTable:($,U,K)=>{K&&$(U)},clampTableDelta:($,U,K,se,he)=>{if(he){if(K>=0)return K;{const Ce=Pe($,(ut,it)=>ut+it-se,0);return Math.max(-Ce,K)}}else return Rm($,U,K,se)},calcLeftEdgeDeltas:i,calcMiddleDeltas:($,U,K,se,he,Ce)=>i($,K,se,he,Ce),calcRightEdgeDeltas:($,U,K,se,he,Ce)=>{if(Ce)return pc($);{const ut=se/$.length;return Xt($,ae(ut))}},calcRedestributedWidths:($,U,K,se)=>({delta:0,newSizes:$})}},_f=(i,m,p=0)=>Ho(i,m).map(v=>parseInt(v,10)).getOr(p),Ub=(i,m)=>_f(i,m,1),Hg=i=>dc("col")(i)?_f(i,"span",1)>1:Ub(i,"colspan")>1,bc=i=>Ub(i,"rowspan")>1,Wb=(i,m)=>parseInt(Ia(i,m),10),Ss=ae(10),Qr=ae(10),Fd=(i,m)=>sp(i,m,De),sp=(i,m,p)=>ao(Ac(i),v=>Re(v,m)?p(v)?[v]:[]:sp(v,m,p)),ck=(i,m,p=Rn)=>{if(p(m))return le.none();if(Xo(i,Es(m)))return le.some(m);const v=k=>Re(k,"table")||p(k);return Xr(m,i.join(","),v)},Mc=(i,m)=>ck(["td","th"],i,m),mi=i=>Fd(i,"th,td"),Af=i=>Re(i,"colgroup")?io(i,"col"):ao(Sw(i),m=>io(m,"col")),ht=(i,m)=>mr(i,"table",m),ju=i=>Fd(i,"tr"),Sw=i=>ht(i).fold(ae([]),m=>io(m,"colgroup")),vc=dc("th"),Ha=i=>xo(i,m=>vc(m.element)),Zb=(i,m)=>i&&m?"sectionCells":i?"section":"cells",ww=i=>{const m=i.section==="thead",p=mf(Mm(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:Zb(m,p)}:{type:"body"}},Mm=i=>{const m=go(i,p=>vc(p.element));return m.length===0?le.some("td"):m.length===i.length?le.some("th"):le.none()},ak=i=>{const m=Xt(i,k=>ww(k).type),p=Xo(m,"header"),v=Xo(m,"footer");if(!p&&!v)return le.some("body");{const k=Xo(m,"body");return p&&!k&&!v?le.some("header"):!p&&!k&&v?le.some("footer"):le.none()}},Ld=i=>gs(i.all,m=>{const p=ww(m);return p.type==="header"?le.from(p.subType):le.none()}),jb=(i,m)=>Xt(i,p=>{if(Es(p)==="colgroup"){const v=Xt(Af(p),k=>{const D=_f(k,"span",1);return Wc(k,1,D)});return fm(p,v,"colgroup")}else{const v=Xt(mi(p),k=>{const D=_f(k,"rowspan",1),$=_f(k,"colspan",1);return Wc(k,D,$)});return fm(p,v,m(p))}}),Gb=i=>Zi(i).map(m=>{const p=Es(m);return Ou(p)?p:"tbody"}).getOr("tbody"),je=i=>{const m=ju(i),v=[...Sw(i),...m];return jb(v,Gb)},kR=(i,m)=>jb(i,()=>m),Ls="data-snooker-locked-cols",Hd=i=>Ho(i,Ls).bind(m=>le.from(m.match(/\d+/g))).map(m=>Jt(m,De)),Gu=i=>{const m=Pe(os(i).rows,(v,k)=>(ze(k.cells,(D,$)=>{D.isLocked&&(v[$]=!0)}),v),{}),p=An(m,(v,k)=>parseInt(k,10));return vo(p)},Nm=(i,m)=>i+","+m,As=(i,m,p)=>le.from(i.access[Nm(m,p)]),xw=(i,m,p)=>{const v=Ew(i,k=>p(m,k.element));return v.length>0?le.some(v[0]):le.none()},Ew=(i,m)=>{const p=ao(i.all,v=>v.cells);return go(p,m)},Xi=i=>{const m={};let p=0;return ze(i.cells,v=>{const k=v.colspan;Jo(k,D=>{const $=p+D;m[$]=ir(v.element,k,$)}),p+=k}),m},as=i=>{const m={},p=[],k=_e(i).map(it=>it.element).bind(ht).bind(Hd).getOr({});let D=0,$=0,U=0;const{pass:K,fail:se}=br(i,it=>it.section==="colgroup");ze(se,it=>{const Mt=[];ze(it.cells,Qe=>{let He=0;for(;m[Nm(U,He)]!==void 0;)He++;const Vt=Io(k,He.toString()),Tt=oi(Qe.element,Qe.rowspan,Qe.colspan,U,He,Vt);for(let yt=0;yt<Qe.colspan;yt++)for(let co=0;co<Qe.rowspan;co++){const eo=U+co,to=He+yt,rr=Nm(eo,to);m[rr]=Tt,$=Math.max($,to+1)}Mt.push(Tt)}),D++,p.push(fm(it.element,Mt,it.section)),U++});const{columns:he,colgroups:Ce}=Da(K).map(it=>{const Mt=Xi(it);return{colgroups:[Ps(it.element,$o(Mt))],columns:Mt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:uo(D,$),access:m,all:p,columns:he,colgroups:Ce}},tn={fromTable:i=>{const m=je(i);return as(m)},generate:as,getAt:As,findItem:xw,filterItems:Ew,justCells:i=>ao(i.all,m=>m.cells),justColumns:i=>$o(i.columns),hasColumns:i=>Rt(i.columns).length>0,getColumnAt:(i,m)=>le.from(i.columns[m])},rp=(i,m,p)=>Or(p(i.element,m),!0,i.isLocked),cp=(i,m)=>i.section!==m?Ra(i.element,i.cells,m,i.isNew):i,E2=()=>({transformRow:cp,transformCell:(i,m,p)=>{const v=p(i.element,m),k=Es(v)!=="td"?Kh(v,"td"):v;return Or(k,i.isNew,i.isLocked)}}),Tw=()=>({transformRow:cp,transformCell:rp}),Qi=()=>({transformRow:(i,m)=>cp(i,m==="thead"?"tbody":m),transformCell:rp}),Vg={getTableSectionType:(i,m)=>{const p=tn.fromTable(i);switch(Ld(p).getOr(m)){case"section":return E2();case"sectionCells":return Tw();case"cells":return Qi()}},section:E2,sectionCells:Tw,cells:Qi,fallback:()=>({transformRow:Ot,transformCell:rp})},M1=(i,m=De)=>{const p=i.grid,v=Jo(p.columns,Ot),k=Jo(p.rows,Ot);return Xt(v,D=>Kb(()=>ao(k,se=>tn.getAt(i,se,D).filter(he=>he.column===D).toArray()),se=>se.colspan===1&&m(se.element),()=>tn.getAt(i,0,D)))},Kb=(i,m,p)=>{const v=i();return L(v,m).orThunk(()=>le.from(v[0]).orThunk(p)).map($=>$.element)},Ku=i=>{const m=i.grid,p=Jo(m.rows,Ot),v=Jo(m.columns,Ot);return Xt(p,k=>Kb(()=>ao(v,K=>tn.getAt(i,k,K).filter(se=>se.row===k).fold(ae([]),se=>[se])),K=>K.rowspan===1,()=>tn.getAt(i,k,0)))},ma=(i,m)=>{if(m<0||m>=i.length-1)return le.none();const p=i[m].fold(()=>{const k=Li(i.slice(0,m));return gs(k,(D,$)=>D.map(U=>({value:U,delta:$+1})))},k=>le.some({value:k,delta:0})),v=i[m+1].fold(()=>{const k=i.slice(m+1);return gs(k,(D,$)=>D.map(U=>({value:U,delta:$+1})))},k=>le.some({value:k,delta:1}));return p.bind(k=>v.map(D=>{const $=D.delta+k.delta;return Math.abs(D.value-k.value)/$}))},N1=(i,m)=>({row:i,y:m}),_2=(i,m)=>({col:i,x:m}),Bm=i=>cn(i).left+x(i),A2=i=>cn(i).left,kw=(i,m)=>_2(i,A2(m)),O2=(i,m)=>_2(i,Bm(m)),D2=i=>cn(i).top,B1=(i,m)=>N1(i,D2(m)),lk=(i,m)=>N1(i,D2(m)+Zs(m)),P1=(i,m,p)=>{if(p.length===0)return[];const v=Xt(p.slice(1),(D,$)=>D.map(U=>i($,U))),k=p[p.length-1].map(D=>m(p.length-1,D));return v.concat([k])},_w=i=>-i,$1={delta:Ot,positions:i=>P1(B1,lk,i),edge:D2},za=yf({delta:Ot,edge:A2,positions:i=>P1(kw,O2,i)},{delta:_w,edge:Bm,positions:i=>P1(O2,kw,i)}),Zt={delta:(i,m)=>za(m).delta(i,m),positions:(i,m)=>za(m).positions(i,m),edge:i=>za(i).edge(i)},Yu=/(\d+(\.\d+)?)%/,Yb=/(\d+(\.\d+)?)px|em/,ik=dc("col"),R2=dc("tr"),Ug=(i,m,p)=>{const v=Zc(i).getOrThunk(()=>Js(Rd(i)));return m(i)/p(v)*100},Xb=(i,m)=>{Ln(i,"width",m+"px")},fi=(i,m)=>{Ln(i,"width",m+"%")},M2=(i,m)=>{Ln(i,"height",m+"px")},Wg=i=>{Yr(i,"height")},Ow=i=>Dg(i)+"px",Dw=(i,m,p,v)=>{const k=ht(i).map(D=>{const $=p(D);return Math.floor(m/100*$)}).getOr(m);return v(i,k),k},ws=(i,m,p,v)=>{const k=parseFloat(i);return Au(i,"%")&&Es(m)!=="table"?Dw(m,k,p,v):k},gi=i=>{const m=Ow(i);return m?ws(m,i,zl,M2):zl(i)},Va=(i,m,p)=>{const v=p(i),k=Ub(i,m);return v/k},Of=(i,m)=>Rr(i,m).orThunk(()=>Ho(i,m).map(p=>p+"px")),Nc=i=>Of(i,"width"),N2=i=>Of(i,"height"),Bc=i=>Ug(i,Qs,M),Yc=i=>ik(i)?Qs(i):H(i),Jb=i=>R2(i)?zl(i):Va(i,"rowspan",gi),$e=i=>Nc(i).bind(p=>cs(p,["fixed","relative","empty"])),Sl=(i,m,p)=>{Ln(i,"width",m+p)},Rw=i=>Qs(i)+"px",Mr=i=>zl(i)+"px",wl=i=>Ug(i,Qs,M)+"%",eu=i=>Nc(i).exists(m=>Yu.test(m)),Qb=i=>Nc(i).exists(m=>Yb.test(m)),tu=i=>Nc(i).isNone(),Mw=ae(Yu),xl=dc("col"),Qn=i=>Nc(i).getOrThunk(()=>Yc(i)+"px"),Ua=i=>N2(i).getOrThunk(()=>Jb(i)+"px"),I1=i=>Xt(tn.justColumns(i),m=>le.from(m.element)),nr=i=>{const m=pf().browser,p=m.isChromium()||m.isFirefox();return xl(i)?p:!0},F1=(i,m,p,v,k,D)=>i.filter(v).fold(()=>D(ma(p,m)),$=>k($)),hi=(i,m,p,v)=>{const k=M1(i),D=tn.hasColumns(i)?I1(i):k,$=[le.some(Zt.edge(m))].concat(Xt(Zt.positions(k,m),K=>K.map(se=>se.x))),U=te(Hg);return Xt(D,(K,se)=>F1(K,se,$,U,he=>{if(nr(he))return p(he);{const Ce=Vr(k[se],Ot);return F1(Ce,se,$,U,ut=>v(le.some(Qs(ut))),v)}},v))},ev=i=>i.map(m=>m+"px").getOr(""),El=(i,m)=>hi(i,m,Qn,ev),Nw=(i,m,p)=>hi(i,m,Bc,v=>v.fold(()=>p.minCellWidth(),k=>k/p.pixelWidth()*100)),pe=(i,m,p)=>hi(i,m,Yc,v=>v.getOrThunk(p.minCellWidth)),pi=(i,m,p,v)=>{const k=Ku(i),D=Xt(i.all,U=>le.some(U.element)),$=[le.some($1.edge(m))].concat(Xt($1.positions(k,m),U=>U.map(K=>K.y)));return Xt(D,(U,K)=>F1(U,K,$,De,p,v))},Bw=(i,m)=>pi(i,m,Jb,p=>p.getOrThunk(Qr)),Vo=(i,m)=>pi(i,m,Ua,ev),us=(i,m)=>()=>Hl(i)?m(i):parseFloat(Rr(i,"width").getOr("0")),yc=i=>{const m=us(i,Qs),p=ae(0);return{width:m,pixelWidth:m,getWidths:(k,D)=>pe(k,i,D),getCellDelta:p,singleColumnWidth:ae([0]),minCellWidth:p,setElementWidth:St,adjustTableWidth:St,isRelative:!0,label:"none"}},Uo=i=>{const m=us(i,K=>parseFloat(wl(K))),p=us(i,Qs);return{width:m,pixelWidth:p,getWidths:(K,se)=>Nw(K,i,se),getCellDelta:K=>K/p()*100,singleColumnWidth:(K,se)=>[100-K],minCellWidth:()=>Ss()/p()*100,setElementWidth:fi,adjustTableWidth:K=>{const se=m(),he=K/100*se,Ce=se+he;fi(i,Ce)},isRelative:!0,label:"percent"}},Pw=i=>{const m=us(i,Qs);return{width:m,pixelWidth:m,getWidths:($,U)=>pe($,i,U),getCellDelta:Ot,singleColumnWidth:($,U)=>[Math.max(Ss(),$+U)-$],minCellWidth:Ss,setElementWidth:Xb,adjustTableWidth:$=>{const U=m()+$;Xb(i,U)},isRelative:!1,label:"pixel"}},Df=(i,m)=>Mw().exec(m)!==null?Uo(i):Pw(i),Zg={getTableSize:i=>Nc(i).fold(()=>yc(i),p=>Df(i,p)),pixelSize:Pw,percentageSize:Uo,noneSize:yc},jg=(i,m,p,v)=>{p===v?ss(i,m):$s(i,m,p)},$w=(i,m,p)=>{Da(io(i,m)).fold(()=>gl(i,p),v=>Gi(v,p))},Iw=(i,m)=>{const p=$d(i,m).getOrThunk(()=>{const v=ct.fromTag(m,Rd(i).dom);return m==="thead"?$w(i,"caption,colgroup",v):m==="colgroup"?$w(i,"caption",v):To(i,v),v});return $a(p),p},Gg=(i,m)=>{const p=[],v=[],k=it=>Xt(it,Mt=>{Mt.isNew&&p.push(Mt.element);const Qe=Mt.element;return $a(Qe),ze(Mt.cells,He=>{He.isNew&&v.push(He.element),jg(He.element,"colspan",He.colspan,1),jg(He.element,"rowspan",He.rowspan,1),To(Qe,He.element)}),Qe}),D=it=>ao(it,Mt=>Xt(Mt.cells,Qe=>(jg(Qe.element,"span",Qe.colspan,1),Qe.element))),$=(it,Mt)=>{const Qe=Iw(i,Mt),Vt=(Mt==="colgroup"?D:k)(it);fc(Qe,Vt)},U=it=>{$d(i,it).each(ro)},K=(it,Mt)=>{it.length>0?$(it,Mt):U(Mt)},se=[],he=[],Ce=[],ut=[];return ze(m,it=>{switch(it.section){case"thead":se.push(it);break;case"tbody":he.push(it);break;case"tfoot":Ce.push(it);break;case"colgroup":ut.push(it);break}}),K(ut,"colgroup"),K(se,"thead"),K(he,"tbody"),K(Ce,"tfoot"),{newRows:p,newCells:v}},ap=i=>Xt(i,m=>{const p=vl(m.element);return ze(m.cells,v=>{const k=Is(v.element);jg(k,"colspan",v.colspan,1),jg(k,"rowspan",v.rowspan,1),To(p,k)}),p}),P2=(i,m)=>Xt(i,p=>dn(p,m)),uk=(i,m)=>i[m],Fw=(i,m)=>{if(i.length===0)return 0;const p=i[0];return ni(i,k=>!m(p.element,k.element)).getOr(i.length)},Pc=(i,m,p,v)=>{const k=uk(i,m),D=k.section==="colgroup",$=Fw(k.cells.slice(p),v),U=D?1:Fw(P2(i.slice(m),p),v);return{colspan:$,rowspan:U}},Pm=(i,m)=>{const p=Xt(i,k=>Xt(k.cells,Rn)),v=(k,D,$,U)=>{for(let K=k;K<k+$;K++)for(let se=D;se<D+U;se++)p[K][se]=!0};return Xt(i,(k,D)=>{const $=ao(k.cells,(U,K)=>{if(p[D][K]===!1){const se=Pc(i,D,K,m);return v(D,K,se.rowspan,se.colspan),[bg(U.element,se.rowspan,se.colspan,U.isNew)]}else return[]});return Ur(k.element,$,k.section,k.isNew)})},nu=(i,m,p)=>{const v=[];ze(i.colgroups,k=>{const D=[];for(let $=0;$<i.grid.columns;$++){const U=tn.getColumnAt(i,$).map(K=>Or(K.element,p,!1)).getOrThunk(()=>Or(m.colGap(),!0,!1));D.push(U)}v.push(Ra(k.element,D,"colgroup",p))});for(let k=0;k<i.grid.rows;k++){const D=[];for(let K=0;K<i.grid.columns;K++){const se=tn.getAt(i,k,K).map(he=>Or(he.element,p,he.isLocked)).getOrThunk(()=>Or(m.gap(),!0,!1));D.push(se)}const $=i.all[k],U=Ra($.element,D,$.section,p);v.push(U)}return v},Xu=(i,m)=>nu(i,m,!1),Tl=i=>Pm(i,Cn),wa=(i,m)=>gs(i.all,p=>L(p.cells,v=>Cn(m,v.element))),qg=(i,m,p)=>{const v=Xt(m.selection,D=>Mc(D).bind($=>wa(i,$)).filter(p)),k=_o(v);return ns(k.length>0,k)},Er=(i,m,p,v,k,D,$,U,K)=>{const se=tn.fromTable(D),he=le.from(K==null?void 0:K.section).getOrThunk(Vg.fallback);return m(se,$).map(ut=>{const it=Xu(se,U),Mt=i(it,ut,Cn,k(U),he),Qe=Gu(Mt.grid),He=Tl(Mt.grid);return{info:ut,grid:He,cursor:Mt.cursor,lockedColumns:Qe}}).bind(ut=>{const it=Gg(D,ut.grid),Mt=le.from(K==null?void 0:K.sizing).getOrThunk(()=>Zg.getTableSize(D)),Qe=le.from(K==null?void 0:K.resize).getOrThunk(Cw);return p(D,ut.grid,ut.info,{sizing:Mt,resize:Qe,section:he}),v(D),ss(D,Ls),ut.lockedColumns.length>0&&$s(D,Ls,ut.lockedColumns.join(",")),le.some({cursor:ut.cursor,newRows:it.newRows,newCells:it.newCells})})},tv=(i,m)=>Mc(m.element).bind(p=>wa(i,p).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Ul=(i,m)=>qg(i,m,De).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Xc=(i,m)=>m.mergable,Lw=(i,m)=>m.unmergable,ec=(i,m)=>qg(i,m,De),Rf=(i,m)=>qg(i,m,p=>!p.isLocked),$m=(i,m)=>wa(i,m).exists(p=>!p.isLocked),Mf=(i,m)=>xo(m,p=>$m(i,p)),Nf=(i,m)=>Xc(i,m).filter(p=>Mf(i,p.cells)),dk=(i,m)=>Lw(i,m).filter(p=>Mf(i,p)),lp={...Us.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},Hw=(i,m)=>i.length===0?lp.none():i.length===1?lp.only(0):m===0?lp.left(0,1):m===i.length-1?lp.right(m-1,m):m>0&&m<i.length-1?lp.middle(m-1,m,m+1):lp.none(),or=(i,m,p,v,k)=>{const D=i.slice(0),$=Hw(i,m),U=ae(Xt(D,ae(0))),K=ut=>v.singleColumnWidth(D[ut],p),se=(ut,it)=>k.calcLeftEdgeDeltas(D,ut,it,p,v.minCellWidth(),v.isRelative),he=(ut,it,Mt)=>k.calcMiddleDeltas(D,ut,it,Mt,p,v.minCellWidth(),v.isRelative),Ce=(ut,it)=>k.calcRightEdgeDeltas(D,ut,it,p,v.minCellWidth(),v.isRelative);return $.fold(U,K,se,he,Ce)},H1=(i,m,p)=>{let v=0;for(let k=i;k<m;k++)v+=p[k]!==void 0?p[k]:0;return v},zd=(i,m)=>{const p=tn.justCells(i);return Xt(p,v=>{const k=H1(v.column,v.column+v.colspan,m);return{element:v.element,width:k,colspan:v.colspan}})},z1=(i,m)=>{const p=tn.justColumns(i);return Xt(p,(v,k)=>({element:v.element,width:m[k],colspan:v.colspan}))},$2=(i,m)=>Xt(i.all,(p,v)=>({element:p.element,height:m[v]})),Kg=i=>vr(i,(m,p)=>m+p,0),Wl=(i,m)=>tn.hasColumns(i)?z1(i,m):zd(i,m),Bf=(i,m,p)=>{const v=Wl(i,m);ze(v,k=>{p.setElementWidth(k.element,k.width)})},Pf=(i,m,p,v,k)=>{const D=tn.fromTable(i),$=k.getCellDelta(m),U=k.getWidths(D,k),K=p===D.grid.columns-1,se=v.clampTableDelta(U,p,$,k.minCellWidth(),K),he=or(U,p,se,k,v),Ce=Xt(he,(ut,it)=>ut+U[it]);Bf(D,Ce,k),v.resizeTable(k.adjustTableWidth,se,K)},zw=(i,m,p)=>{const v=tn.fromTable(i),k=Bw(v,i),D=Xt(k,(K,se)=>p===se?Math.max(m+K,Qr()):K),$=$2(v,D);ze($,K=>{M2(K.element,K.height)}),ze(tn.justCells(v),K=>{Wg(K.element)});const U=Kg(D);M2(i,U)},nv=(i,m,p,v,k)=>{const D=tn.generate(m),$=v.getWidths(D,v),U=v.pixelWidth(),{newSizes:K,delta:se}=k.calcRedestributedWidths($,U,p.pixelDelta,v.isRelative);Bf(D,K,v),v.adjustTableWidth(se)},V1=(i,m,p,v)=>{const k=tn.generate(m),D=v.getWidths(k,v);Bf(k,D,v)},Yg=(i,m)=>{Hg(i)||$e(i).each(v=>{const k=v.value/2;Sl(i,k,v.unit),Sl(m,k,v.unit)})},Vw=(i,m,p)=>{const v=_f(i,m,1);p===1||v<=1?ss(i,m):$s(i,m,Math.min(p,v))},ip=(i,m)=>p=>{const v=p.column+p.colspan-1,k=p.column;return v>=i&&k<m},I2=(i,m,p)=>{if(tn.hasColumns(i)){const v=go(tn.justColumns(i),ip(m,p)),k=Xt(v,$=>{const U=Is($.element);return Vw(U,"span",p-m),U}),D=ct.fromTag("colgroup");return fc(D,k),[D]}else return[]},Ju=(i,m,p)=>Xt(i.all,v=>{const k=go(v.cells,ip(m,p)),D=Xt(k,U=>{const K=Is(U.element);return Vw(K,"colspan",p-m),K}),$=ct.fromTag("tr");return fc($,D),$}),bi=(i,m)=>{const p=tn.fromTable(i);return Rf(p,m).map(k=>{const D=k[k.length-1],$=k[0].column,U=D.column+D.colspan,K=I2(p,$,U),se=Ju(p,$,U);return[...K,...se]})},Vd=(i,m,p)=>{const v=tn.fromTable(i);return ec(v,m).bind(D=>{const $=nu(v,p,!1),K=os($).rows.slice(D[0].row,D[D.length-1].row+D[D.length-1].rowspan),se=ao(K,Ce=>{const ut=go(Ce.cells,it=>!it.isLocked);return ut.length>0?[{...Ce,cells:ut}]:[]}),he=Tl(se);return ns(he.length>0,he)}).map(D=>ap(D))},Im=(i,m,p,v,k,D)=>({minRow:i,minCol:m,maxRow:p,maxCol:v,allCells:k,selectedCells:D}),Uw=(i,m)=>{const p=i.grid.columns;let k=i.grid.rows,D=p,$=0,U=0;const K=[],se=[];return Ro(i.access,he=>{if(K.push(he),m(he)){se.push(he);const Ce=he.row,ut=Ce+he.rowspan-1,it=he.column,Mt=it+he.colspan-1;Ce<k?k=Ce:ut>$&&($=ut),it<D?D=it:Mt>U&&(U=Mt)}}),Im(k,D,$,U,K,se)},$f=(i,m,p)=>{const v=i[p].element,k=ct.fromTag("td");To(k,ct.fromTag("br")),(m?To:gl)(v,k)},ov=(i,m,p,v)=>{const k=go(i,U=>U.section!=="colgroup"),D=m.grid.columns,$=m.grid.rows;for(let U=0;U<$;U++){let K=!1;for(let se=0;se<D;se++)U<p.minRow||U>p.maxRow||se<p.minCol||se>p.maxCol||(tn.getAt(m,U,se).filter(v).isNone()?$f(k,K,U):K=!0)}},Xg=(i,m,p,v)=>{Ro(p.columns,$=>{($.column<m.minCol||$.column>m.maxCol)&&ro($.element)});const k=go(Fd(i,"tr"),$=>$.dom.childElementCount===0);ze(k,ro),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&ze(Fd(i,"th,td"),$=>{ss($,"rowspan"),ss($,"colspan")}),ss(i,Ls),ss(i,"data-snooker-col-series"),Zg.getTableSize(i).adjustTableWidth(v)},F2=(i,m,p,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const k=pe(m,i,p),D=Pe(k,(se,he)=>se+he,0),K=Pe(k.slice(v.minCol,v.maxCol+1),(se,he)=>se+he,0)/D*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(K)},Ww=(i,m)=>{const p=ut=>Re(ut.element,m),v=Is(i),k=je(v),D=Zg.getTableSize(i),$=tn.generate(k),U=Uw($,p),K="th:not("+m+"),td:not("+m+")",se=sp(v,"th,td",ut=>Re(ut,K));ze(se,ro),ov(k,$,U,p);const he=tn.fromTable(i),Ce=F2(i,he,D,U);return Xg(v,U,$,Ce),v},U1=dc("col"),sv=dc("colgroup"),mo=i=>Es(i)==="tr"||sv(i),Zw=i=>{const m=_f(i,"colspan",1),p=_f(i,"rowspan",1);return{element:i,colspan:m,rowspan:p}},up=(i,m=Zw)=>{const p=U=>U1(U.element)?i.col(U):i.cell(U),v=U=>sv(U.element)?i.colgroup(U):i.row(U),k=U=>{if(mo(U))return v({element:U});{const K=U,se=p(m(K));return D=le.some({item:K,replacement:se}),se}};let D=le.none();return{getOrInit:(U,K)=>D.fold(()=>k(U),se=>K(U,se.item)?se.replacement:k(U))}},L2=i=>m=>{const p=[],v=($,U)=>L(p,K=>U(K.item,$)),k=$=>{const U=i==="td"?{scope:null}:{},K=m.replace($,i,U);return p.push({item:$,sub:K}),K};return{replaceOrInit:($,U)=>{if(mo($)||U1($))return $;{const K=$;return v(K,U).fold(()=>k(K),se=>U($,se.item)?se.sub:k(K))}}}},W1=i=>Ho(i,"scope").map(m=>m.substr(0,3)),Nr={modification:up,transform:L2,merging:i=>({unmerge:v=>{const k=W1(v);return k.each(D=>$s(v,"scope",D)),()=>{const D=i.cell({element:v,colspan:1,rowspan:1});return Yr(D,"width"),Yr(v,"width"),k.each($=>$s(D,"scope",$)),D}},merge:v=>{const k=()=>{const D=_o(Xt(v,W1));if(D.length===0)return le.none();{const $=D[0],U=["row","col"];return lt(D,se=>se!==$&&Xo(U,se))?le.none():le.from($)}};return Yr(v[0],"width"),k().fold(()=>ss(v[0],"scope"),D=>$s(v[0],"scope",D+"group")),ae(v[0])}})},fk=(i,m)=>{const p=i.slice(0,m[m.length-1].row+1),v=Tl(p);return ao(v,k=>{const D=k.cells.slice(0,m[m.length-1].column+1);return Xt(D,$=>$.element)})},gk=(i,m)=>{const p=i.slice(m[0].row+m[0].rowspan-1,i.length),v=Tl(p);return ao(v,k=>{const D=k.cells.slice(m[0].column+m[0].colspan-1,k.cells.length);return Xt(D,$=>$.element)})},H2=(i,m,p)=>{const v=tn.fromTable(i);return ec(v,m).map(D=>{const $=nu(v,p,!1),{rows:U}=os($),K=fk(U,D),se=gk(U,D);return{upOrLeftCells:K,downOrRightCells:se}})},AR={only:(i,m)=>{const p=ne(i)?Md(i):i;return{parent:ae(p),view:ae(i),dragContainer:ae(p),origin:ae(re(0,0)),isResizable:m}},detached:(i,m,p)=>{const v=()=>cn(m);return{parent:ae(m),view:ae(i),dragContainer:ae(m),origin:v,isResizable:p}},body:(i,m)=>({parent:ae(i),view:ae(i),dragContainer:ae(i),origin:()=>cn(i),isResizable:m})},cv=Us.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),hk=(i,m,p)=>{const v=p.substring(0,p.length-i.length),k=parseFloat(v);return v===k.toString()?m(k):cv.invalid(p)},ou={...cv,from:i=>Au(i,"%")?hk("%",cv.percent,i):Au(i,"px")?hk("px",cv.pixels,i):cv.invalid(i)},U2=(i,m)=>Xt(i,p=>ou.from(p).fold(()=>p,k=>k/m*100+"%",k=>k+"%")),Zn=(i,m,p)=>{const v=p/m;return Xt(i,k=>ou.from(k).fold(()=>k,$=>$*v+"px",$=>$/100*p+"px"))},fr=(i,m)=>{const p=i.fold(()=>ae(""),v=>{const k=v/m;return ae(k+"px")},()=>{const v=100/m;return ae(v+"%")});return Jo(m,p)},Br=(i,m,p)=>i.fold(()=>m,v=>Zn(m,p,v),v=>U2(m,p)),If=(i,m,p)=>{const v=ou.from(p),k=xo(i,D=>D==="0px")?fr(v,i.length):Br(v,i,m);return Z1(k)},Co=(i,m)=>i.length===0?m:vr(i,(p,v)=>ou.from(v).fold(ae(0),Ot,Ot)+p,0),Jg=(i,m)=>{const p=Math.floor(i);return{value:p+m,remainder:i-p}},dp=(i,m)=>ou.from(i).fold(ae(i),p=>p+m+"px",p=>p+m+"%"),Z1=i=>{if(i.length===0)return i;const m=vr(i,(v,k)=>{const D=ou.from(k).fold(()=>({value:k,remainder:0}),$=>Jg($,"px"),$=>({value:$+"%",remainder:0}));return{output:[D.value].concat(v.output),remainder:v.remainder+D.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([dp(p[p.length-1],Math.round(m.remainder))])},Qg=ou.from,av=(i,m,p)=>{ze(m,v=>{const k=i.slice(v.column,v.colspan+v.column),D=Co(k,Ss());Ln(v.element,"width",D+p)})},Gw=(i,m,p)=>{ze(m,(v,k)=>{const D=Co([i[k]],Ss());Ln(v.element,"width",D+p)})},qw=(i,m,p)=>{ze(p,v=>{Yr(v.element,"height")}),ze(m,(v,k)=>{Ln(v.element,"height",i[k])})},W2=i=>Qg(i).fold(ae("px"),ae("px"),ae("%")),lv=(i,m,p)=>{const v=tn.fromTable(i),k=v.all,D=tn.justCells(v),$=tn.justColumns(v);m.each(U=>{const K=W2(U),se=Qs(i),he=El(v,i),Ce=If(he,se,U);tn.hasColumns(v)?Gw(Ce,$,K):av(Ce,D,K),Ln(i,"width",U)}),p.each(U=>{const K=zl(i),se=Vo(v,i),he=If(se,K,U);qw(he,k,D),Ln(i,"height",U)})},iv=eu,Kw=Qb,Yw=tu;var Ff=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],mp=()=>{const i=se=>ct.fromDom(se.dom.cloneNode(!1)),m=se=>da(se).dom,p=se=>Lo(se)?Es(se)==="body"?!0:Xo(Ff,Es(se)):!1,v=se=>Lo(se)?Xo(["br","img","hr","input"],Es(se)):!1,k=se=>Lo(se)&&Dc(se,"contenteditable")==="false",D=(se,he)=>se.dom.compareDocumentPosition(he.dom),$=(se,he)=>{const Ce=wm(se);qi(he,Ce)},U=se=>{const he=Es(se);return Xo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],he)},K=se=>Lo(se)?Ho(se,"lang"):le.none();return{up:ae({selector:Xr,closest:mr,predicate:Vu,all:ji}),down:ae({selector:hc,predicate:Yi}),styles:ae({get:Ia,getRaw:Rr,set:Ln,remove:Yr}),attrs:ae({get:Dc,set:$s,remove:ss,copyTo:$}),insert:ae({before:fl,after:Gi,afterAll:Kr,append:To,appendAll:fc,prepend:gl,wrap:qh}),remove:ae({unwrap:pl,remove:ro}),create:ae({nu:ct.fromTag,clone:i,text:ct.fromText}),query:ae({comparePosition:D,prevSibling:Cm,nextSibling:Pu}),property:ae({children:Ac,name:Es,parent:Zi,document:m,isText:Wi,isComment:Ib,isElement:Lo,isSpecial:U,getLanguage:K,getText:ks,setText:Pd,isBoundary:p,isEmptyTag:v,isNonEditable:k}),eq:Cn,is:ls}};const su=(i,m)=>({item:i,mode:m}),uv=(i,m,p,v=fp)=>i.property().parent(m).map(k=>su(k,v)),fp=(i,m,p,v=j1)=>p.sibling(i,m).map(k=>su(k,v)),j1=(i,m,p,v=j1)=>{const k=i.property().children(m);return p.first(k).map($=>su($,v))},Xw=[{current:uv,next:fp,fallback:le.none()},{current:fp,next:j1,fallback:le.some(uv)},{current:j1,next:j1,fallback:le.some(fp)}],Jw=(i,m,p,v,k=Xw)=>L(k,$=>$.current===p).bind($=>$.current(i,m,v,$.next).orThunk(()=>$.fallback.bind(U=>Jw(i,m,U,v)))),Z2={left:()=>({sibling:(p,v)=>p.query().prevSibling(v),first:p=>p.length>0?le.some(p[p.length-1]):le.none()}),right:()=>({sibling:(p,v)=>p.query().nextSibling(v),first:p=>p.length>0?le.some(p[0]):le.none()})},Fm=(i,m,p,v,k,D)=>Jw(i,m,v,k).bind(U=>D(U.item)?le.none():p(U.item)?le.some(U.item):Fm(i,U.item,p,U.mode,k,D)),j2=(i,m,p,v)=>Fm(i,m,p,fp,Z2.left(),v),gp=(i,m,p,v)=>Fm(i,m,p,fp,Z2.right(),v),vi=(i,m)=>({element:i,offset:m}),dv=(i,m,p)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?p(m).bind(v=>dv(i,v,p).orThunk(()=>le.some(v))):le.none(),Lm=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,eh=(i,m)=>{const p=dv(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(p))return vi(p,Lm(i,p));const v=i.property().children(p);return v.length>0?eh(i,v[v.length-1]):vi(p,Lm(i,p))},pk=eh,mv=mp(),Hm=i=>pk(mv,i),zm=i=>m=>i.property().children(m).length===0,bk=(i,m,p)=>q1(i,m,zm(i),p),tc=(i,m,p)=>Wa(i,m,zm(i),p),q1=j2,Wa=gp,K1=mp(),Qw=(i,m)=>bk(K1,i,m),Ud=(i,m)=>tc(K1,i,m),Tr=(i,m,p)=>q1(K1,i,m,p),Jc=(i,m,p)=>Wa(K1,i,m,p),gr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Y1=(i,m)=>{const p=i.property().name(m);return Xo(["ol","ul"],p)},G2=(i,m)=>{const p=i.property().name(m);return Xo(gr,p)},q2=(i,m)=>Xo(["br","img","hr","input"],i.property().name(m)),X1=(i,m,p,v)=>{const k=p[0],D=p.slice(1);return v(i,m,k,D)},vk=(i,m,p)=>p.length>0?X1(i,m,p,hp):le.none(),hp=(i,m,p,v)=>{const k=m(i,p);return vr(v,(D,$)=>{const U=m(i,$);return fv(i,D,U)},k)},fv=(i,m,p)=>m.bind(v=>p.filter($n(i.eq,v))),K2=(i,m)=>$n(i.eq,m),gv=(i,m,p,v=Rn)=>{const k=[m].concat(i.up().all(m)),D=[p].concat(i.up().all(p)),$=he=>ni(he,v).fold(()=>he,ut=>he.slice(0,ut+1)),U=$(k),K=$(D),se=L(U,he=>lt(K,K2(i,he)));return{firstpath:U,secondpath:K,shared:se}},Y2=vk,Lf=gv,Wd=mp(),So=(i,m)=>Y2(Wd,(p,v)=>i(v),m),Hf=(i,m,p)=>Lf(Wd,i,m,p),J1=mp(),zf=i=>G2(J1,i),pp=i=>Y1(J1,i),X2=i=>q2(J1,i),ex=i=>{const m=dc("br"),p=K=>xo(K,se=>m(se)||Wi(se)&&ks(se).trim().length===0),v=K=>Es(K)==="li"||Vu(K,pp).isSome(),k=K=>Pu(K).map(se=>zf(se)?!0:X2(se)?Es(se)!=="img":!1).getOr(!1),D=K=>_1(K).bind(se=>{const he=k(se);return Zi(se).map(Ce=>he===!0||v(Ce)||m(se)||zf(Ce)&&!Cn(K,Ce)?[]:[ct.fromTag("br")])}).getOr([]),U=(()=>{const K=ao(i,se=>{const he=Ac(se);return p(he)?[]:he.concat(D(se))});return K.length===0?[ct.fromTag("br")]:K})();$a(i[0]),fc(i[0],U)},Vf=i=>{ss(i,"width"),ss(i,"height")},Q1=i=>{const m=wl(i);lv(i,le.some(m),le.none()),Vf(i)},bp=i=>{const m=Rw(i);lv(i,le.some(m),le.none()),Vf(i)},Qc=i=>{const m=Mr(i);lv(i,le.none(),le.some(m)),Vf(i)},e0=i=>{Yr(i,"width");const m=Af(i),p=m.length>0?m:mi(i);ze(p,v=>{Yr(v,"width"),Vf(v)}),Vf(i)},$c={scope:["row","col"]},Qu=i=>()=>{const m=ct.fromTag("td",i.dom);return To(m,ct.fromTag("br",i.dom)),m},J2=i=>()=>ct.fromTag("col",i.dom),tx=i=>()=>ct.fromTag("colgroup",i.dom),Q2=i=>()=>ct.fromTag("tr",i.dom),hv=(i,m,p)=>{const v=Ag(i,m);return Ro(p,(k,D)=>{k===null?ss(v,D):$s(v,D,k)}),v},eC=i=>i,tC=(i,m,p)=>Ao(i).map(k=>{const D=p.join(","),$=Ca(k,D,U=>Cn(U,i));return vr($,(U,K)=>{const se=vl(K);return To(U,se),se},m)}).getOr(m),nC=(i,m)=>{Ro($c,(p,v)=>Ho(i,v).filter(k=>Xo(p,k)).each(k=>$s(m,v,k)))},t0=(i,m,p)=>{const v=($,U)=>{zu($.element,U),Yr(U,"height"),$.colspan!==1&&Yr(U,"width")},k=$=>{const U=ct.fromTag(Es($.element),m.dom),K=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),se=K.length>0?tC($.element,U,K):U;return To(se,ct.fromTag("br")),v($,U),nC($.element,U),i($.element,U),U};return{col:$=>{const U=ct.fromTag(Es($.element),m.dom);return v($,U),i($.element,U),U},colgroup:tx(m),row:Q2(m),cell:k,replace:hv,colGap:J2(m),gap:Qu(m)}},oC=i=>({col:J2(i),colgroup:tx(i),row:Q2(i),cell:Qu(i),replace:eC,colGap:J2(i),gap:Qu(i)}),n0=i=>tn.fromTable(i).grid,ru=(i,m,p,v)=>{const k=os(i).rows;if(k.length===0)return i;for(let D=m.startRow;D<=m.finishRow;D++)for(let $=m.startCol;$<=m.finishCol;$++){const U=k[D],K=dn(U,$).isLocked;ia(U,$,Or(v(),!1,K))}return i},nx=(i,m,p,v)=>{const k=os(i).rows;let D=!0;for(let $=0;$<k.length;$++)for(let U=0;U<ic(k[0]);U++){const K=k[$],se=dn(K,U),he=se.element,Ce=p(he,m);Ce&&!D?ia(K,U,Or(v(),!0,se.isLocked)):Ce&&(D=!1)}return i},nc=(i,m)=>Pe(i,(p,v)=>lt(p,k=>m(k.element,v.element))?p:p.concat([v]),[]),yk=(i,m,p,v)=>(m>0&&m<i[0].cells.length&&ze(i,k=>{const D=k.cells[m-1];let $=0;const U=v();for(;k.cells.length>m+$&&p(D.element,k.cells[m+$].element);)ia(k,m+$,Or(U,!0,k.cells[m+$].isLocked)),$++}),i),Uf=(i,m,p,v)=>{const k=os(i).rows;if(m>0&&m<k.length){const D=k[m-1].cells,$=nc(D,p);ze($,U=>{let K=le.none();for(let se=m;se<k.length;se++)for(let he=0;he<ic(k[0]);he++){const Ce=k[se],ut=dn(Ce,he);p(ut.element,U.element)&&(K.isNone()&&(K=le.some(v())),K.each(Mt=>{ia(Ce,he,Or(Mt,!0,ut.isLocked))}))}})}return i},ox=(i,m,p)=>{if(i.row>=m.length||i.column>ic(m[0]))return yo.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const v=m.slice(i.row),k=v[0].cells.slice(i.column),D=ic(p[0]),$=p.length;return yo.value({rowDelta:v.length-$,colDelta:k.length-D})},pv=(i,m)=>{const p=ic(i[0]),v=ic(m[0]);return{rowDelta:0,colDelta:p-v}},bv=(i,m)=>{const p=i.length,v=m.length;return{rowDelta:p-v,colDelta:0}},o0=(i,m,p,v)=>{const k=m.section==="colgroup"?p.col:p.cell;return Jo(i,D=>Or(k(),!0,v(D)))},vv=(i,m,p,v)=>{const k=i[i.length-1];return i.concat(Jo(m,()=>{const D=k.section==="colgroup"?p.colgroup:p.row,$=uc(k,D,Ot),U=o0($.cells.length,$,p,K=>vs(v,K.toString()));return vg($,U)}))},sx=(i,m,p,v)=>Xt(i,k=>{const D=o0(m,k,p,Rn);return Hi(k,v,D)}),s0=(i,m,p)=>Xt(i,v=>Pe(p,(k,D)=>{const $=o0(1,v,m,De)[0];return si(k,D,$)},v)),r0=(i,m,p)=>{const v=m.colDelta<0?sx:Ot,k=m.rowDelta<0?vv:Ot,D=Gu(i),$=ic(i[0]),U=lt(D,he=>he===$-1),K=v(i,Math.abs(m.colDelta),p,U?$-1:$),se=Gu(K);return k(K,Math.abs(m.rowDelta),p,Jt(se,De))},Hs=(i,m,p,v)=>{const k=dn(i[m],p),D=$n(v,k.element),$=i[m];return i.length>1&&ic($)>1&&(p>0&&D(Xs($,p-1))||p<$.cells.length-1&&D(Xs($,p+1))||m>0&&D(Xs(i[m-1],p))||m<i.length-1&&D(Xs(i[m+1],p)))},sr=(i,m,p,v,k,D)=>{const $=i.row,U=i.column,K=p.length,se=ic(p[0]),he=$+K,Ce=U+se+D.length,ut=Jt(D,De);for(let it=$;it<he;it++){let Mt=0;for(let Qe=U;Qe<Ce;Qe++){if(ut[Qe]){Mt++;continue}Hs(m,it,Qe,k)&&nx(m,Xs(m[it],Qe),k,v.cell);const He=Qe-U-Mt,Vt=dn(p[it-$],He),Tt=Vt.element,yt=v.replace(Tt);ia(m[it],Qe,Or(yt,!0,Vt.isLocked))}}return m},Cc=(i,m,p)=>{const v=ic(m[0]),k=os(m).cols.length+i.row,D=Jo(v-i.column,U=>U+i.column),$=L(D,U=>xo(p,K=>K!==U)).getOr(v-1);return{row:k,column:$}},kr=(i,m,p)=>go(p,v=>v>=i.column&&v<=ic(m[0])+i.column),_r=(i,m,p,v,k)=>{const D=Gu(m),$=Cc(i,m,D),U=os(p).rows,K=kr($,U,D);return ox($,m,U).map(he=>{const Ce={...he,colDelta:he.colDelta-K.length},ut=r0(m,Ce,v),it=Gu(ut),Mt=kr($,U,it);return sr($,ut,U,v,k,Mt)})},js=(i,m,p,v,k)=>{yk(m,i,k,v.cell);const D=bv(p,m),$=r0(p,D,v),U=bv(m,$),K=r0(m,U,v);return Xt(K,(se,he)=>Hi(se,i,$[he].cells))},c0=(i,m,p,v,k)=>{Uf(m,i,k,v.cell);const D=Gu(m),$=pv(m,p),U={...$,colDelta:$.colDelta-D.length},K=r0(m,U,v),{cols:se,rows:he}=os(K),Ce=Gu(K),ut=pv(p,m),it={...ut,colDelta:ut.colDelta+Ce.length},Mt=s0(p,v,Ce),Qe=r0(Mt,it,v);return[...se,...he.slice(0,i),...Qe,...he.slice(i,he.length)]},a0=(i,m,p,v)=>uc(i,k=>v(k,p),m),sC=(i,m,p,v,k)=>{const{rows:D,cols:$}=os(i),U=D.slice(0,m),K=D.slice(m),se=a0(D[p],(he,Ce)=>m>0&&m<D.length&&v(Xs(D[m-1],Ce),Xs(D[m],Ce))?dn(D[m],Ce):Or(k(he.element,v),!0,he.isLocked),v,k);return[...$,...U,se,...K]},rx=(i,m,p,v,k,D,$)=>{if(p==="colgroup"||!v){const U=dn(i,k);return Or($(U.element,D),!0,!1)}else return dn(i,m)},yv=(i,m,p,v,k)=>Xt(i,D=>{const $=m>0&&m<ic(D)&&v(Xs(D,m-1),Xs(D,m)),U=rx(D,m,D.section,$,p,v,k);return si(D,m,U)}),Vm=(i,m)=>ao(i,p=>{const v=p.cells,k=vr(m,(D,$)=>$>=0&&$<D.length?D.slice(0,$).concat(D.slice($+1)):D,v);return k.length>0?[Ra(p.element,k,p.section,p.isNew)]:[]}),Um=(i,m,p)=>{const{rows:v,cols:k}=os(i);return[...k,...v.slice(0,m),...v.slice(p+1)]},rC=(i,m,p,v)=>Xs(i[m],p)!==void 0&&m>0&&v(Xs(i[m-1],p),Xs(i[m],p)),Oe=(i,m,p)=>m>0&&p(Xs(i,m-1),Xs(i,m)),l0=(i,m,p,v)=>rC(i,m,p,v)||Oe(i[m],p,v),cx=(i,m)=>xo(m,Ot)&&Ha(i.cells)?De:(v,k,D)=>!(Es(v.element)==="th"&&m[D]),Ck=(i,m)=>xo(m,Ot)&&Ha(i)?De:(v,k,D)=>!(Es(v.element)==="th"&&m[k]),ed=(i,m,p,v)=>{const k=$=>$==="row"?bc(m):Hg(m),D=$=>k($)?`${$}group`:$;return i?vc(m)?D(p):null:v&&vc(m)?D(p==="row"?"col":"row"):null},yi=(i,m)=>(p,v,k)=>le.some(ed(i,p.element,"col",m[k])),cC=(i,m)=>(p,v)=>le.some(ed(i,p.element,"row",m[v])),i0=(i,m,p)=>Or(p(i.element,m),!0,i.isLocked),vp=(i,m,p,v,k,D,$)=>{const U=K=>lt(m,se=>p(K.element,se.element));return Xt(i,(K,se)=>Ma(K,(he,Ce)=>{if(U(he)){const ut=$(he,se,Ce)?k(he,p,v):he;return D(ut,se,Ce).each(it=>{ur(ut.element,{scope:le.from(it)})}),ut}else return he}))},yp=(i,m,p)=>ao(i,(v,k)=>l0(i,k,m,p)?[]:[dn(v,m)]),ax=(i,m,p)=>{const v=i[m];return ao(v.cells,(k,D)=>l0(i,m,D,p)?[]:[k])},Cp=(i,m,p,v,k)=>{const D=os(i).rows,$=ao(m,he=>yp(D,he,v)),U=Xt(D,he=>Ha(he.cells)),K=Ck($,U),se=cC(p,U);return vp(i,$,v,k,i0,se,K)},Cv=(i,m,p,v,k,D,$)=>{const{cols:U,rows:K}=os(i),se=K[m[0]],he=ao(m,He=>ax(K,He,k)),Ce=Xt(se.cells,(He,Vt)=>Ha(yp(K,Vt,k))),ut=[...K];ze(m,He=>{ut[He]=$.transformRow(K[He],p)});const it=[...U,...ut],Mt=cx(se,Ce),Qe=yi(v,Ce);return vp(it,he,k,D,$.transformCell,Qe,Mt)},th=(i,m,p,v)=>{const k=os(i).rows,D=Xt(m,$=>dn(k[$.row],$.column));return vp(i,D,p,v,i0,le.none,De)},Zd=i=>Pe(i,(p,v)=>lt(p,D=>D.column===v.column)?p:p.concat([v]),[]).sort((p,v)=>p.column-v.column),Zl=i=>wf(i,!0),Sp=i=>{mi(i).length===0&&ro(i)},u0=(i,m)=>({grid:i,cursor:m}),aC=i=>gs(i,m=>gs(m.cells,p=>{const v=p.element;return ns(Zl(v),v)})),Sv=(i,m,p)=>{var v,k;const D=os(i).rows;return le.from((k=(v=D[m])===null||v===void 0?void 0:v.cells[p])===null||k===void 0?void 0:k.element).filter(Zl).orThunk(()=>aC(D))},xa=(i,m,p)=>{const v=Sv(i,m,p);return u0(i,v)},d0=i=>Pe(i,(p,v)=>lt(p,D=>D.row===v.row)?p:p.concat([v]),[]).sort((p,v)=>p.row-v.row),Sk=(i,m,p,v)=>{const k=m[0].row,D=d0(m),$=vr(D,(U,K)=>({grid:sC(U.grid,k,K.row+U.delta,p,v.getOrInit),delta:U.delta+1}),{grid:i,delta:0}).grid;return xa($,k,m[0].column)},wv=(i,m,p,v)=>{const k=d0(m),D=k[k.length-1],$=D.row+D.rowspan,U=vr(k,(K,se)=>sC(K,$,se.row,p,v.getOrInit),i);return xa(U,$,m[0].column)},lC=(i,m,p,v)=>{const k=m.details,D=Zd(k),$=D[0].column,U=vr(D,(K,se)=>({grid:yv(K.grid,$,se.column+K.delta,p,v.getOrInit),delta:K.delta+1}),{grid:i,delta:0}).grid;return xa(U,k[0].row,$)},nh=(i,m,p,v)=>{const k=m.details,D=k[k.length-1],$=D.column+D.colspan,U=Zd(k),K=vr(U,(se,he)=>yv(se,$,he.column,p,v.getOrInit),i);return xa(K,k[0].row,$)},xv=(i,m,p,v)=>{const k=Zd(m),D=Xt(k,U=>U.column),$=Cp(i,D,!0,p,v.replaceOrInit);return xa($,m[0].row,m[0].column)},Wm=(i,m,p,v)=>{const k=th(i,m,p,v.replaceOrInit);return xa(k,m[0].row,m[0].column)},Ev=(i,m,p,v)=>{const k=Zd(m),D=Xt(k,U=>U.column),$=Cp(i,D,!1,p,v.replaceOrInit);return xa($,m[0].row,m[0].column)},wk=(i,m,p,v)=>{const k=th(i,m,p,v.replaceOrInit);return xa(k,m[0].row,m[0].column)},ea=(i,m)=>(p,v,k,D,$)=>{const U=d0(v),K=Xt(U,he=>he.row),se=Cv(p,K,i,m,k,D.replaceOrInit,$);return xa(se,v[0].row,v[0].column)},cu=ea("thead",!0),kl=ea("tbody",!1),xk=ea("tfoot",!1),Wf=(i,m,p,v)=>{const k=Zd(m.details),D=Vm(i,Xt(k,U=>U.column)),$=D.length>0?D[0].cells.length-1:0;return xa(D,k[0].row,Math.min(k[0].column,$))},Ek=(i,m,p,v)=>{const k=d0(m),D=Um(i,k[0].row,k[k.length-1].row),$=Math.max(os(D).rows.length-1,0);return xa(D,Math.min(m[0].row,$),m[0].column)},Tk=(i,m,p,v)=>{const k=m.cells;ex(k);const D=ru(i,m.bounds,p,v.merge(k));return u0(D,le.from(k[0]))},kk=(i,m,p,v)=>{const D=vr(m,($,U)=>nx($,U,p,v.unmerge(U)),i);return u0(D,le.from(m[0]))},_k=(i,m,p,v)=>{const D=((K,se)=>{const he=tn.fromTable(K);return nu(he,se,!0)})(m.clipboard,m.generators),$=ff(m.row,m.column);return _r($,i,D,m.generators,p).fold(()=>u0(i,le.some(m.element)),K=>xa(K,m.row,m.column))},Tn=(i,m,p)=>{const v=kR(i,p.section),k=tn.generate(v);return nu(k,m,!0)},Pt=(i,m,p,v)=>{const k=os(i).rows,D=m.cells[0].column,$=k[m.cells[0].row],U=Tn(m.clipboard,m.generators,$),K=js(D,i,U,m.generators,p);return xa(K,m.cells[0].row,m.cells[0].column)},oh=(i,m,p,v)=>{const k=os(i).rows,D=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,$=k[m.cells[0].row],U=Tn(m.clipboard,m.generators,$),K=js(D,i,U,m.generators,p);return xa(K,m.cells[0].row,D)},m0=(i,m,p,v)=>{const k=os(i).rows,D=m.cells[0].row,$=k[D],U=Tn(m.clipboard,m.generators,$),K=c0(D,i,U,m.generators,p);return xa(K,m.cells[0].row,m.cells[0].column)},Tv=(i,m,p,v)=>{const k=os(i).rows,D=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,$=k[m.cells[0].row],U=Tn(m.clipboard,m.generators,$),K=c0(D,i,U,m.generators,p);return xa(K,D,m.cells[0].column)},Ak=(i,m)=>{const p=tn.fromTable(i);return ec(p,m).bind(k=>{const D=k[k.length-1],$=k[0].column,U=D.column+D.colspan,K=ho(Xt(p.all,se=>go(se.cells,he=>he.column>=$&&he.column<U)));return Mm(K)}).getOr("")},lx=(i,m)=>{const p=tn.fromTable(i);return ec(p,m).bind(Mm).getOr("")},es=(i,m)=>{const p=tn.fromTable(i);return ec(p,m).bind(k=>{const D=k[k.length-1],$=k[0].row,U=D.row+D.rowspan,K=p.all.slice($,U);return ak(K)}).getOr("")},kv=(i,m,p,v)=>V1(i,m,p,v.sizing),iC=(i,m,p,v)=>nv(i,m,p,v.sizing,v.resize),ix=(i,m)=>lt(m,p=>p.column===0&&p.isLocked),Me=(i,m)=>lt(m,p=>p.column+p.colspan>=i.grid.columns&&p.isLocked),_v=(i,m)=>{const p=M1(i),v=Zd(m);return Pe(v,(k,D)=>{const U=p[D.column].map(x).getOr(0);return k+U},0)},ux=i=>(m,p)=>ec(m,p).filter(v=>!(i?ix:Me)(m,v)).map(v=>({details:v,pixelDelta:_v(m,v)})),Av=(i,m)=>Rf(i,m).map(p=>({details:p,pixelDelta:-_v(i,p)})),dx=i=>(m,p)=>Ul(m,p).filter(v=>!(i?ix:Me)(m,v.cells)),Zf=Nr.transform("th"),sh=Nr.transform("td"),jf=(i,m,p,v)=>Er(Sk,ec,St,St,Nr.modification,i,m,p,v),mx=(i,m,p,v)=>Er(wv,ec,St,St,Nr.modification,i,m,p,v),wp=(i,m,p,v)=>Er(lC,ux(!0),iC,St,Nr.modification,i,m,p,v),Wo=(i,m,p,v)=>Er(nh,ux(!1),iC,St,Nr.modification,i,m,p,v),td=(i,m,p,v)=>Er(Wf,Av,iC,Sp,Nr.modification,i,m,p,v),uC=(i,m,p,v)=>Er(Ek,ec,St,Sp,Nr.modification,i,m,p,v),Zm=(i,m,p,v)=>Er(xv,Rf,St,St,Zf,i,m,p,v),au=(i,m,p,v)=>Er(Ev,Rf,St,St,sh,i,m,p,v),dC=(i,m,p,v)=>Er(cu,ec,St,St,Zf,i,m,p,v),Ok=(i,m,p,v)=>Er(kl,ec,St,St,sh,i,m,p,v),mC=(i,m,p,v)=>Er(xk,ec,St,St,sh,i,m,p,v),Dk=(i,m,p,v)=>Er(Wm,Rf,St,St,Zf,i,m,p,v),fx=(i,m,p,v)=>Er(wk,Rf,St,St,sh,i,m,p,v),Rk=(i,m,p,v)=>Er(Tk,Nf,kv,St,Nr.merging,i,m,p,v),Mk=(i,m,p,v)=>Er(kk,dk,kv,St,Nr.merging,i,m,p,v),Ov=(i,m,p,v)=>Er(_k,tv,kv,St,Nr.modification,i,m,p,v),We=(i,m,p,v)=>Er(Pt,dx(!0),St,St,Nr.modification,i,m,p,v),Nk=(i,m,p,v)=>Er(oh,dx(!1),St,St,Nr.modification,i,m,p,v),Sc=(i,m,p,v)=>Er(m0,Ul,St,St,Nr.modification,i,m,p,v),gx=(i,m,p,v)=>Er(Tv,Ul,St,St,Nr.modification,i,m,p,v),vt=Ak,Dv=lx,hx=es,sn=(i,m)=>{const p=m.column,v=m.column+m.colspan-1,k=m.row,D=m.row+m.rowspan-1;return p<=i.finishCol&&v>=i.startCol&&k<=i.finishRow&&D>=i.startRow},Bk=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,px=(i,m)=>{let p=!0;const v=$n(Bk,m);for(let k=m.startRow;k<=m.finishRow;k++)for(let D=m.startCol;D<=m.finishCol;D++)p=p&&tn.getAt(i,k,D).exists(v);return p?le.some(m):le.none()},Pk=(i,m)=>Sr(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),$k=(i,m,p)=>{const v=tn.findItem(i,m,Cn),k=tn.findItem(i,p,Cn);return v.bind(D=>k.map($=>Pk(D,$)))},Ik=(i,m,p)=>$k(i,m,p).bind(v=>px(i,v)),Fk=(i,m,p,v)=>tn.findItem(i,m,Cn).bind(k=>{const D=p>0?k.row+k.rowspan-1:k.row,$=v>0?k.column+k.colspan-1:k.column;return tn.getAt(i,D+p,$+v).map(K=>K.element)}),Lk=(i,m,p)=>$k(i,m,p).map(v=>{const k=tn.filterItems(i,$n(sn,v));return Xt(k,D=>D.element)}),ta=(i,m)=>{const p=(v,k)=>Yn(k,v);return tn.findItem(i,m,p).map(v=>v.element)},f0=(i,m,p)=>ht(i).bind(v=>{const k=Ci(v);return Fk(k,i,m,p)}),Yt=(i,m,p)=>{const v=Ci(i);return Lk(v,m,p)},fC=(i,m,p,v,k)=>{const D=Ci(i),$=Cn(i,p)?le.some(m):ta(D,m),U=Cn(i,k)?le.some(v):ta(D,v);return $.bind(K=>U.bind(se=>Lk(D,K,se)))},jm=(i,m,p)=>{const v=Ci(i);return Ik(v,m,p)},Ci=tn.fromTable,Rv={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Za=()=>ct.fromTag("th"),g0=()=>ct.fromTag("td"),h0=()=>ct.fromTag("col"),p0=(i,m,p,v)=>{const k=ct.fromTag("tr");for(let D=0;D<i;D++){const $=v<m||D<p?Za():g0();D<p&&$s($,"scope","row"),v<m&&$s($,"scope","col"),To($,ct.fromTag("br")),To(k,$)}return k},xp=i=>{const m=ct.fromTag("colgroup");return Jo(i,()=>To(m,h0())),m},bx=(i,m,p,v)=>Jo(i,k=>p0(m,p,v,k)),Hk=(i,m,p,v,k,D=Rv)=>{const $=ct.fromTag("table"),U=k!=="cells";Nd($,D.styles),qi($,D.attributes),D.colGroups&&To($,xp(m));const K=Math.min(i,p);if(U&&p>0){const it=ct.fromTag("thead");To($,it);const Qe=bx(p,m,k==="sectionCells"?K:0,v);fc(it,Qe)}const se=ct.fromTag("tbody");To($,se);const he=U?i-K:i,ut=bx(he,m,U?0:p,v);return fc(se,ut),$},lu=i=>{let m=[];return{bind:D=>{if(D===void 0)throw new Error("Event bind error: undefined handler");m.push(D)},unbind:D=>{m=go(m,$=>$!==D)},trigger:(...D)=>{const $={};ze(i,(U,K)=>{$[U]=D[K]}),ze(m,U=>{U($)})}}},rh=i=>{const m=Tu(i,v=>({bind:v.bind,unbind:v.unbind})),p=Tu(i,v=>v.trigger);return{registry:m,trigger:p}},zn=Et(["compare","extract","mutate","sink"]),Si=Et(["element","start","stop","destroy"]),Gf=Et(["forceDrop","drop","move","delayDrop"]),zk=()=>{let i=le.none();const m=()=>{i=le.none()},p=(D,$)=>{const U=i.map(K=>D.compare(K,$));return i=le.some($),U},v=(D,$)=>{$.extract(D).each(K=>{p($,K).each(he=>{k.trigger.move(he)})})},k=rh({move:lu(["info"])});return{onEvent:v,reset:m,events:k.registry}},Ep=()=>{const i=rh({move:lu(["info"])});return{onEvent:St,reset:St,events:i.registry}},jn=()=>{const i=Ep(),m=zk();let p=i;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=i},isOn:()=>p===m,onEvent:(U,K)=>{p.onEvent(U,K)},events:m.events}},Vk=(i,m,p)=>{let v=!1;const k=rh({start:lu([]),stop:lu([])}),D=jn(),$=()=>{Mt.stop(),D.isOn()&&(D.off(),k.trigger.stop())},U=ba($,200),K=He=>{Mt.start(He),D.on(),k.trigger.start()},se=He=>{U.cancel(),D.onEvent(He,m)};D.events.move.bind(He=>{m.mutate(i,He.info)});const he=()=>{v=!0},Ce=()=>{v=!1},ut=()=>v,it=He=>(...Vt)=>{v&&He.apply(null,Vt)},Mt=m.sink(Gf({forceDrop:$,drop:it($),move:it(se),delayDrop:it(U.throttle)}),p),Qe=()=>{Mt.destroy()};return{element:Mt.element,go:K,on:he,off:Ce,isActive:ut,destroy:Qe,events:k.registry}},gC=$l("ephox-dragster").resolve,Wk=i=>{const m={layerClass:gC("blocker"),...i},p=ct.fromTag("div");return $s(p,"role","presentation"),Nd(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Ki(p,gC("blocker")),Ki(p,m.layerClass),{element:ae(p),destroy:()=>{ro(p)}}};var vx=zn({compare:(i,m)=>re(m.left-i.left,m.top-i.top),extract:i=>le.some(re(i.x,i.y)),sink:(i,m)=>{const p=Wk(m),v=ys(p.element(),"mousedown",i.forceDrop),k=ys(p.element(),"mouseup",i.drop),D=ys(p.element(),"mousemove",i.move),$=ys(p.element(),"mouseout",i.delayDrop),U=()=>{p.destroy(),k.unbind(),D.unbind(),$.unbind(),v.unbind()},K=he=>{To(he,p.element())},se=()=>{ro(p.element())};return Si({element:p.element,start:K,stop:se,destroy:U})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const hC=(i,m={})=>{var p;const v=(p=m.mode)!==null&&p!==void 0?p:vx;return Vk(i,v,m)},Nv=$l("ephox-snooker").resolve,Bv=()=>{const i=rh({drag:lu(["xDelta","yDelta"])});return{mutate:(p,v)=>{i.trigger.drag(p,v)},events:i.registry}},yx=()=>{const i=rh({drag:lu(["xDelta","yDelta","target"])});let m=le.none();const p=Bv();return p.events.drag.bind(D=>{m.each($=>{i.trigger.drag(D.xDelta,D.yDelta,$)})}),{assign:D=>{m=le.some(D)},get:()=>m,mutate:p.mutate,events:i.registry}},Tp=(i,m,p,v,k)=>{const D=ct.fromTag("div");return Nd(D,{position:"absolute",left:m-v/2+"px",top:p+"px",height:k+"px",width:v+"px"}),qi(D,{"data-mce-bogus":"all","data-column":i,role:"presentation"}),D},jk=(i,m,p,v,k)=>{const D=ct.fromTag("div");return Nd(D,{position:"absolute",left:m+"px",top:p-k/2+"px",height:k+"px",width:v+"px"}),qi(D,{"data-mce-bogus":"all","data-row":i,role:"presentation"}),D},pC=Nv("resizer-bar"),bC=Nv("resizer-rows"),Cx=Nv("resizer-cols"),Sx=7,Gn=(i,m)=>ao(i.all,(p,v)=>m(p.element)?[v]:[]),wx=(i,m)=>{const p=[];return Jo(i.grid.columns,v=>{tn.getColumnAt(i,v).map(D=>D.element).forall(m)&&p.push(v)}),go(p,v=>{const k=tn.filterItems(i,D=>D.column===v);return xo(k,D=>m(D.element))})},v0=i=>{const m=hc(i.parent(),"."+pC);ze(m,ro)},xx=(i,m,p)=>{const v=i.origin();ze(m,k=>{k.each(D=>{const $=p(v,D);Ki($,pC),To(i.parent(),$)})})},ch=(i,m,p,v)=>{xx(i,m,(k,D)=>{const $=Tp(D.col,D.x-k.left,p.top-k.top,Sx,v);return Ki($,Cx),$})},Ex=(i,m,p,v)=>{xx(i,m,(k,D)=>{const $=jk(D.row,p.left-k.left,D.y-k.top,v,Sx);return Ki($,bC),$})},Gk=(i,m,p,v,k)=>{const D=cn(p),$=m.isResizable,U=v.length>0?$1.positions(v,p):[],K=U.length>0?Gn(i,$):[],se=go(U,(it,Mt)=>lt(K,Qe=>Mt===Qe));Ex(m,se,D,x(p));const he=k.length>0?Zt.positions(k,p):[],Ce=he.length>0?wx(i,$):[],ut=go(he,(it,Mt)=>lt(Ce,Qe=>Mt===Qe));ch(m,ut,D,Zs(p))},Pv=(i,m)=>{if(v0(i),i.isResizable(m)){const p=tn.fromTable(m),v=Ku(p),k=M1(p);Gk(p,i,m,v,k)}},ah=(i,m)=>{const p=hc(i.parent(),"."+pC);ze(p,m)},Tx=i=>{ah(i,m=>{Ln(m,"display","none")})},qf=i=>{ah(i,m=>{Ln(m,"display","block")})},kp=i=>km(i,bC),qk=i=>km(i,Cx),kx=Nv("resizer-bar-dragging"),Kk=i=>{const m=yx(),p=hC(m,{});let v=le.none();const k=(Qe,He)=>le.from(Dc(Qe,He));m.events.drag.bind(Qe=>{k(Qe.target,"data-row").each(He=>{const Vt=Wb(Qe.target,"top");Ln(Qe.target,"top",Vt+Qe.yDelta+"px")}),k(Qe.target,"data-column").each(He=>{const Vt=Wb(Qe.target,"left");Ln(Qe.target,"left",Vt+Qe.xDelta+"px")})});const D=(Qe,He)=>{const Vt=Wb(Qe,He),Tt=_f(Qe,"data-initial-"+He,0);return Vt-Tt};p.events.stop.bind(()=>{m.get().each(Qe=>{v.each(He=>{k(Qe,"data-row").each(Vt=>{const Tt=D(Qe,"top");ss(Qe,"data-initial-top"),Mt.trigger.adjustHeight(He,Tt,parseInt(Vt,10))}),k(Qe,"data-column").each(Vt=>{const Tt=D(Qe,"left");ss(Qe,"data-initial-left"),Mt.trigger.adjustWidth(He,Tt,parseInt(Vt,10))}),Pv(i,He)})})});const $=(Qe,He)=>{Mt.trigger.startAdjust(),m.assign(Qe),$s(Qe,"data-initial-"+He,Wb(Qe,He)),Ki(Qe,kx),Ln(Qe,"opacity","0.2"),p.go(i.dragContainer())},U=ys(i.parent(),"mousedown",Qe=>{kp(Qe.target)&&$(Qe.target,"top"),qk(Qe.target)&&$(Qe.target,"left")}),K=Qe=>Cn(Qe,i.view()),se=Qe=>mr(Qe,"table",K).filter(wf),he=Qe=>km(Qe,"ephox-snooker-resizer-bar")||km(Qe,"ephox-dragster-blocker"),Ce=ys(i.view(),"mouseover",Qe=>{se(Qe.target).fold(()=>{Hl(Qe.target)&&!he(Qe.target)&&v0(i)},He=>{p.isActive()&&(v=le.some(He),Pv(i,He))})}),ut=()=>{U.unbind(),Ce.unbind(),p.destroy(),v0(i)},it=Qe=>{Pv(i,Qe)},Mt=rh({adjustHeight:lu(["table","delta","row"]),adjustWidth:lu(["table","delta","column"]),startAdjust:lu([])});return{destroy:ut,refresh:it,on:p.on,off:p.off,hideBars:$n(Tx,i),showBars:$n(qf,i),events:Mt.registry}},_x={create:(i,m,p)=>{const v=$1,k=Zt,D=Kk(i),$=rh({beforeResize:lu(["table","type"]),afterResize:lu(["table","type"]),startDrag:lu([])});return D.events.adjustHeight.bind(U=>{const K=U.table;$.trigger.beforeResize(K,"row");const se=v.delta(U.delta,K);zw(K,se,U.row),$.trigger.afterResize(K,"row")}),D.events.startAdjust.bind(U=>{$.trigger.startDrag()}),D.events.adjustWidth.bind(U=>{const K=U.table;$.trigger.beforeResize(K,"col");const se=k.delta(U.delta,K),he=p(K);Pf(K,se,U.column,m,he),$.trigger.afterResize(K,"col")}),{on:D.on,off:D.off,refreshBars:D.refresh,hideBars:D.hideBars,showBars:D.showBars,destroy:D.destroy,events:$.registry}}},Kf=i=>m=>m.options.get(i),Xk="100%",Ax=i=>{var m;const p=i.dom,v=(m=p.getParent(i.selection.getStart(),p.isBlock))!==null&&m!==void 0?m:i.getBody();return M(ct.fromDom(v))+"px"},Ox=(i,m)=>_p(i)||!Mx(i)?m:lh(i)?{...m,width:Ax(i)}:{...m,width:Xk},vC=(i,m)=>_p(i)||Mx(i)?m:lh(i)?{...m,width:Ax(i)}:{...m,width:Xk},yC=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const v=Xo(["section","cells","sectionCells","auto"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const v=Xo(["preservetable","resizetable"],p);return v?{value:p,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},$v=i=>le.from(i.options.get("table_clone_elements")),y0=i=>{const m=i.options.get("object_resizing");return Xo(m.split(","),"table")},CC=Kf("table_header_type"),Iv=Kf("table_column_resizing"),C0=i=>Iv(i)==="preservetable",Dx=i=>Iv(i)==="resizetable",Fv=Kf("table_sizing_mode"),S0=i=>Fv(i)==="relative",lh=i=>Fv(i)==="fixed",_p=i=>Fv(i)==="responsive",Rx=Kf("table_resize_bars"),Mx=Kf("table_style_by_css"),Jk=Kf("table_merge_content_on_paste"),Qk=i=>{const m=i.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:vC(i,p)},Nx=i=>{const m=i.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Ox(i,p)},e3=Kf("table_use_colgroups"),Lv=i=>ct.fromDom(i.getBody()),Ap=i=>m=>Cn(m,Lv(i)),ih=i=>{ss(i,"data-mce-style");const m=p=>ss(p,"data-mce-style");ze(mi(i),m),ze(Af(i),m),ze(ju(i),m)},Yf=i=>ct.fromDom(i.selection.getStart()),SC=i=>i.getBoundingClientRect().width,Bx=i=>i.getBoundingClientRect().height,wC=i=>(m,p)=>{const v=m.dom.getStyle(p,i)||m.dom.getAttrib(p,i);return le.from(v).filter(Cr)},Px=wC("width"),t3=wC("height"),$x=i=>/^(\d+(\.\d+)?)%$/.test(i),n3=i=>/^(\d+(\.\d+)?)px$/.test(i),xC=i=>is(i,dc("table")).exists(wf),EC=i=>Xr(i,"table"),Op=(i,m,p)=>{const v=k=>D=>p!==void 0&&p(D)||Cn(D,k);return Cn(i,m)?le.some({boxes:le.some([i]),start:i,finish:m}):EC(i).bind(k=>EC(m).bind(D=>{if(Cn(k,D))return le.some({boxes:Yt(k,i,m),start:i,finish:m});if(Yn(k,D)){const $=Ca(m,"td,th",v(k)),U=$.length>0?$[$.length-1]:m;return le.some({boxes:fC(k,i,k,m,D),start:i,finish:U})}else if(Yn(D,k)){const $=Ca(i,"td,th",v(D)),U=$.length>0?$[$.length-1]:i;return le.some({boxes:fC(D,i,k,m,D),start:i,finish:U})}else return Hf(i,m).shared.bind($=>mr($,"table",p).bind(U=>{const K=Ca(m,"td,th",v(U)),se=K.length>0?K[K.length-1]:m,he=Ca(i,"td,th",v(U)),Ce=he.length>0?he[he.length-1]:i;return le.some({boxes:fC(U,i,k,m,D),start:Ce,finish:se})}))}))},Dp=(i,m)=>{const p=hc(i,m);return p.length>0?le.some(p):le.none()},Hv=(i,m)=>L(i,p=>Re(p,m)),Ix=(i,m,p)=>er(i,m).bind(v=>er(i,p).bind(k=>So(EC,[v,k]).map(D=>({first:v,last:k,table:D})))),o3=(i,m)=>Xr(i,"table").bind(p=>er(p,m).bind(v=>Op(v,i).bind(k=>k.boxes.map(D=>({boxes:D,start:k.start,finish:k.finish}))))),Rp=(i,m,p,v,k)=>Hv(i,k).bind(D=>f0(D,m,p).bind($=>o3($,v))),Fx=(i,m)=>Dp(i,m),TC=(i,m,p)=>Ix(i,m,p).bind(v=>{const k=K=>Cn(i,K),D="thead,tfoot,tbody,table",$=Xr(v.first,D,k),U=Xr(v.last,D,k);return $.bind(K=>U.bind(se=>Cn(K,se)?jm(v.table,v.first,v.last):le.none()))}),zv=Ot,kC=i=>{const m=(v,k)=>Ho(v,k).exists(D=>parseInt(D,10)>1),p=v=>m(v,"rowspan")||m(v,"colspan");return i.length>0&&xo(i,p)?le.some(i):le.none()},Lx=(i,m,p)=>m.length<=1?le.none():TC(i,p.firstSelectedSelector,p.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Mp={create:(i,m)=>({selection:i,kill:m})},r3=(i,m,p,v)=>{switch(i.tag){case"none":return m();case"single":return v(i.element);case"multiple":return p(i.elements)}},Vv=()=>({tag:"none"}),Hx=i=>({tag:"multiple",elements:i}),zx=i=>({tag:"single",element:i}),Xf=(i,m,p)=>({get:()=>Fx(i(),p).fold(()=>m().fold(Vv,zx),Hx)}),Vx={create:(i,m,p,v)=>({start:Fs.on(i,m),finish:Fs.on(p,v)})},Ux=(i,m)=>{const p=Je(i,m);return Rc.create(ct.fromDom(p.startContainer),p.startOffset,ct.fromDom(p.endContainer),p.endOffset)},Uv=Vx.create,Wx=(i,m,p,v,k,D,$)=>Cn(p,k)&&v===D?le.none():mr(p,"td,th",m).bind(U=>mr(k,"td,th",m).bind(K=>Zx(i,m,U,K,$))),Zx=(i,m,p,v,k)=>Cn(p,v)?le.none():Op(p,v,m).bind(D=>{const $=D.boxes.getOr([]);return $.length>1?(k(i,$,D.start,D.finish),le.some(Mp.create(le.some(Uv(p,0,p,Cl(p))),!0))):le.none()}),a3=(i,m,p,v,k)=>{const D=$=>(k.clearBeforeUpdate(p),k.selectRange(p,$.boxes,$.start,$.finish),$.boxes);return Rp(v,i,m,k.firstSelectedSelector,k.lastSelectedSelector).map(D)},w0=Us.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),x0=(i,m,p)=>{const v=i.getRect(m),k=i.getRect(p);return k.right>v.left&&k.left<v.right},E0=i=>mr(i,"tr"),Np={...w0,verify:(i,m,p,v,k,D,$)=>mr(v,"td,th",$).bind(U=>mr(m,"td,th",$).map(K=>Cn(U,K)?Cn(v,U)&&Cl(U)===k?D(K):w0.none("in same cell"):So(E0,[U,K]).fold(()=>x0(i,K,U)?w0.success():D(K),se=>D(K)))).getOr(w0.none("default")),cata:(i,m,p,v,k)=>i.fold(m,p,v,k)},uh=dc("br"),T0=(i,m,p)=>m(i,p).bind(v=>Wi(v)&&ks(v).trim().length===0?T0(v,m,p):le.some(v)),_C=(i,m,p)=>p.traverse(m).orThunk(()=>T0(m,p.gather,i)).map(p.relative),l3=(i,m)=>wr(i,m).filter(uh).orThunk(()=>wr(i,m-1).filter(uh)),i3=(i,m,p,v)=>l3(m,p).bind(k=>v.traverse(k).fold(()=>T0(k,v.gather,i).map(v.relative),D=>Bg(D).map($=>Fs.on($.parent,$.index)))),u3=(i,m,p,v)=>(uh(m)?_C(i,m,v):i3(i,m,p,v)).map(D=>({start:D,finish:D})),Bp=i=>Np.cata(i,m=>le.none(),()=>le.none(),m=>le.some(vi(m,0)),m=>le.some(vi(m,Cl(m)))),jd=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),dh=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),mh=(i,m,p)=>({left:i.left+m,top:i.top+p,right:i.right+m,bottom:i.bottom+p}),d3=i=>i.top,Gm=i=>i.bottom,nd=(i,m,p)=>p>=0&&p<Cl(m)?i.getRangedRect(m,p,m,p+1):p>0?i.getRangedRect(m,p-1,m,p):le.none(),Pp=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),AC=(i,m)=>le.some(i.getRect(m)),Gx=(i,m,p)=>Lo(m)?AC(i,m).map(Pp):Wi(m)?nd(i,m,p).map(Pp):le.none(),OC=(i,m)=>Lo(m)?AC(i,m).map(Pp):Wi(m)?i.getRangedRect(m,0,m,Cl(m)).map(Pp):le.none(),od=5,k0=100,iu=Us.generate([{none:[]},{retry:["caret"]}]),qx=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,$p=(i,m,p)=>is(m,zf).fold(Rn,v=>OC(i,v).exists(k=>qx(p,k))),Wv=(i,m,p,v,k)=>{const D=jd(k,od);return Math.abs(p.bottom-v.bottom)<1||p.top>k.bottom?iu.retry(D):p.top===k.bottom?iu.retry(jd(k,1)):$p(i,m,k)?iu.retry(mh(D,od,0)):iu.none()},DC={point:d3,adjuster:(i,m,p,v,k)=>{const D=dh(k,od);return Math.abs(p.top-v.top)<1||p.bottom<k.top?iu.retry(D):p.bottom===k.top?iu.retry(dh(k,1)):$p(i,m,k)?iu.retry(mh(D,od,0)):iu.none()},move:dh,gather:Qw},Zv={point:Gm,adjuster:Wv,move:jd,gather:Ud},m3=(i,m,p)=>i.elementFromPoint(m,p).filter(v=>Es(v)==="table").isSome(),Gd=(i,m,p,v,k)=>jv(i,m,p,m.move(v,od),k),jv=(i,m,p,v,k)=>k===0?le.some(v):m3(i,v.left,m.point(v))?Gd(i,m,p,v,k-1):i.situsFromPoint(v.left,m.point(v)).bind(D=>D.start.fold(le.none,$=>OC(i,$).bind(U=>m.adjuster(i,$,U,p,v).fold(le.none,K=>jv(i,m,p,K,k-1))).orThunk(()=>le.some(v)),le.none)),RC=(i,m,p)=>i.point(m)>p.getInnerHeight()?le.some(i.point(m)-p.getInnerHeight()):i.point(m)<0?le.some(-i.point(m)):le.none(),fh=(i,m,p)=>{const v=i.move(p,od),k=jv(m,i,p,v,k0).getOr(v);return RC(i,k,m).fold(()=>m.situsFromPoint(k.left,i.point(k)),D=>(m.scrollBy(0,D),m.situsFromPoint(k.left,i.point(k)-D)))},Gv={tryUp:$n(fh,DC),tryDown:$n(fh,Zv),getJumpSize:ae(od)},kt=20,qv=(i,m,p)=>i.getSelection().bind(v=>u3(m,v.finish,v.foffset,p).fold(()=>le.some(vi(v.finish,v.foffset)),k=>{const D=i.fromSitus(k),$=Np.verify(i,v.finish,v.foffset,D.finish,D.foffset,p.failure,m);return Bp($)})),_0=(i,m,p,v,k,D)=>D===0?le.none():Ip(i,m,p,v,k).bind($=>{const U=i.fromSitus($),K=Np.verify(i,p,v,U.finish,U.foffset,k.failure,m);return Np.cata(K,()=>le.none(),()=>le.some($),se=>Cn(p,se)&&v===0?MC(i,p,v,dh,k):_0(i,m,se,0,k,D-1),se=>Cn(p,se)&&v===Cl(se)?MC(i,p,v,jd,k):_0(i,m,se,Cl(se),k,D-1))}),MC=(i,m,p,v,k)=>Gx(i,m,p).bind(D=>NC(i,k,v(D,Gv.getJumpSize()))),NC=(i,m,p)=>{const v=pf().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(i,p):le.none()},Ip=(i,m,p,v,k)=>Gx(i,p,v).bind(D=>NC(i,k,D)),uu=(i,m,p)=>qv(i,m,p).bind(v=>_0(i,m,v.element,v.offset,p,kt).map(i.fromSitus)),A0=(i,m)=>Id(i,p=>Zi(p).exists(v=>Cn(v,m))),Fp=(i,m,p,v,k)=>mr(v,"td,th",m).bind(D=>mr(D,"table",m).bind($=>A0(k,$)?uu(i,m,p).bind(U=>mr(U.finish,"td,th",m).map(K=>({start:D,finish:K,range:U}))):le.none())),Kv=(i,m,p,v,k,D)=>D(v,m).orThunk(()=>Fp(i,m,p,v,k).map($=>{const U=$.range;return Mp.create(le.some(Uv(U.start,U.soffset,U.finish,U.foffset)),!0)})),Yv=(i,m)=>mr(i,"tr",m).bind(p=>mr(p,"table",m).bind(v=>{const k=hc(v,"tr");return Cn(p,k[0])?Tr(v,D=>_1(D).isSome(),m).map(D=>{const $=Cl(D);return Mp.create(le.some(Uv(D,$,D,$)),!0)}):le.none()})),BC=(i,m)=>mr(i,"tr",m).bind(p=>mr(p,"table",m).bind(v=>{const k=hc(v,"tr");return Cn(p,k[k.length-1])?Jc(v,D=>Ao(D).isSome(),m).map(D=>Mp.create(le.some(Uv(D,0,D,0)),!0)):le.none()})),Kx=(i,m,p,v,k,D,$)=>Fp(i,p,v,k,D).bind(U=>Zx(m,p,U.start,U.finish,$)),Yx=(i,m)=>mr(i,"td,th",m),wi=i=>Zc(i).exists(wf),du=(i,m,p,v)=>{const k=Fo(),D=k.clear,$=he=>{k.on(Ce=>{v.clearBeforeUpdate(m),Yx(he.target,p).each(ut=>{Op(Ce,ut,p).each(it=>{const Mt=it.boxes.getOr([]);if(Mt.length===1){const Qe=Mt[0],He=w1(Qe)==="false",Vt=mf(_m(he.target),Qe,Cn);He&&Vt&&v.selectRange(m,Mt,Qe,Qe)}else Mt.length>1&&(v.selectRange(m,Mt,it.start,it.finish),i.selectContents(ut))})})})};return{clearstate:D,mousedown:he=>{v.clear(m),Yx(he.target,p).filter(wi).each(k.set)},mouseover:he=>{$(he)},mouseup:he=>{$(he),D()}}},Xv={traverse:Pu,gather:Ud,relative:Fs.before,retry:Gv.tryDown,failure:Np.failedDown},Jf={traverse:Cm,gather:Qw,relative:Fs.before,retry:Gv.tryUp,failure:Np.failedUp},Os=i=>m=>m===i,fa=Os(38),Pr=Os(40),Ic=i=>i>=37&&i<=40,Jv={isBackward:Os(37),isForward:Os(39)},xi={isBackward:Os(39),isForward:Os(37)},qm=i=>({elementFromPoint:(He,Vt)=>ct.fromPoint(ct.fromDom(i.document),He,Vt),getRect:He=>He.dom.getBoundingClientRect(),getRangedRect:(He,Vt,Tt,yt)=>{const co=_.exact(He,Vt,Tt,yt);return D1(i,co)},getSelection:()=>Tf(i).map(He=>Ux(i,He)),fromSitus:He=>{const Vt=_.relative(He.start,He.finish);return Ux(i,Vt)},situsFromPoint:(He,Vt)=>Ig(i,He,Vt).map(Tt=>Vx.create(Tt.start,Tt.soffset,Tt.finish,Tt.foffset)),clearSelection:()=>{op(i)},collapseSelection:(He=!1)=>{Tf(i).each(Vt=>Vt.fold(Tt=>Tt.collapse(He),(Tt,yt)=>{const co=He?Tt:yt;qc(i,co,co)},(Tt,yt,co,eo)=>{const to=He?Tt:co,rr=He?yt:eo;Zu(i,to,rr,to,rr)}))},setSelection:He=>{Zu(i,He.start,He.soffset,He.finish,He.foffset)},setRelativeSelection:(He,Vt)=>{qc(i,He,Vt)},selectNode:He=>{$g(i,He,!1)},selectContents:He=>{$g(i,He)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>Lt(ct.fromDom(i.document)).top,scrollBy:(He,Vt)=>{wn(He,Vt,ct.fromDom(i.document))}}),gh=(i,m)=>({rows:i,cols:m}),Xx=(i,m,p,v)=>{const k=qm(i),D=du(k,m,p,v);return{clearstate:D.clearstate,mousedown:D.mousedown,mouseover:D.mouseover,mouseup:D.mouseup}},PC=i=>is(i,v1).exists(wf),Qv=(i,m)=>PC(i)||PC(m),Jx=(i,m,p,v)=>{const k=qm(i),D=()=>(v.clear(m),le.none());return{keydown:(K,se,he,Ce,ut,it)=>{const Mt=K.raw,Qe=Mt.which,He=Mt.shiftKey===!0;return Dp(m,v.selectedSelector).fold(()=>(Ic(Qe)&&!He&&v.clearBeforeUpdate(m),Ic(Qe)&&He&&!Qv(se,Ce)?le.none:Pr(Qe)&&He?$n(Kx,k,m,p,Xv,Ce,se,v.selectRange):fa(Qe)&&He?$n(Kx,k,m,p,Jf,Ce,se,v.selectRange):Pr(Qe)?$n(Kv,k,p,Xv,Ce,se,BC):fa(Qe)?$n(Kv,k,p,Jf,Ce,se,Yv):le.none),Tt=>{const yt=co=>()=>gs(co,to=>a3(to.rows,to.cols,m,Tt,v)).fold(()=>Ix(m,v.firstSelectedSelector,v.lastSelectedSelector).map(to=>{const rr=Pr(Qe)||it.isForward(Qe)?Fs.after:Fs.before;return k.setRelativeSelection(Fs.on(to.first,0),rr(to.table)),v.clear(m),Mp.create(le.none(),!0)}),to=>le.some(Mp.create(le.none(),!0)));return Ic(Qe)&&He&&!Qv(se,Ce)?le.none:Pr(Qe)&&He?yt([gh(1,0)]):fa(Qe)&&He?yt([gh(-1,0)]):it.isBackward(Qe)&&He?yt([gh(0,-1),gh(-1,0)]):it.isForward(Qe)&&He?yt([gh(0,1),gh(1,0)]):Ic(Qe)&&!He?D:le.none})()},keyup:(K,se,he,Ce,ut)=>Dp(m,v.selectedSelector).fold(()=>{const it=K.raw,Mt=it.which;return it.shiftKey===!0&&Ic(Mt)&&Qv(se,Ce)?Wx(m,p,se,he,Ce,ut,v.selectRange):le.none()},le.none)}},Lp=(i,m,p,v)=>{const k=qm(i);return(D,$)=>{v.clearBeforeUpdate(m),Op(D,$,p).each(U=>{const K=U.boxes.getOr([]);v.selectRange(m,K,U.start,U.finish),k.selectContents($),k.collapseSelection()})}},g3={byClass:i=>{const m=tp(i.selected),p=y2([i.selected,i.lastSelected,i.firstSelected]),v=D=>{const $=hc(D,i.selectedSelector);ze($,p)};return{clearBeforeUpdate:v,clear:v,selectRange:(D,$,U,K)=>{v(D),ze($,m),Ki(U,i.firstSelected),Ki(K,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,p)=>{const v=K=>{ss(K,i.selected),ss(K,i.firstSelected),ss(K,i.lastSelected)},k=K=>{$s(K,i.selected,"1")},D=K=>{$(K),p()},$=K=>{const se=hc(K,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);ze(se,v)};return{clearBeforeUpdate:$,clear:D,selectRange:(K,se,he,Ce)=>{D(K),ze(se,k),$s(he,i.firstSelected,"1"),$s(Ce,i.lastSelected,"1"),m(se,he,Ce)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},Hp="data-mce-selected",h3="td["+Hp+"],th["+Hp+"]",eE="["+Hp+"]",ey="data-mce-first-selected",$C="td["+ey+"],th["+ey+"]",ty="data-mce-last-selected",ny="td["+ty+"],th["+ty+"]",tE=eE,zp={selected:Hp,selectedSelector:h3,firstSelected:ey,firstSelectedSelector:$C,lastSelected:ty,lastSelectedSelector:ny},oy=(i,m,p)=>({element:p,mergable:Lx(m,i,zp),unmergable:kC(i),selection:zv(i)}),an=(i,m,p)=>({element:i,clipboard:m,generators:p}),p3=(i,m,p,v)=>({selection:zv(i),clipboard:p,generators:v}),Ei=i=>ht(i).bind(m=>Fx(m,zp.firstSelectedSelector)).fold(ae(i),m=>m[0]),b3=i=>(m,p)=>{const v=Es(m),k=v==="col"||v==="colgroup"?Ei(m):m;return mr(k,i,p)},sy=b3("th,td,caption"),Km=b3("th,td"),mu=i=>Yh(i.model.table.getSelectedCells()),ry=i=>go(mu(i),m=>Re(m,zp.selectedSelector)),v3=i=>ht(i[0]).map(m=>{const p=Ww(m,tE);return ih(p),[p]}),IC=(i,m)=>Xt(m,p=>i.selection.serializer.serialize(p.dom,{})).join(""),O0=(i,m)=>{const p=i.getDoc(),v=Iu(ct.fromDom(i.getBody())),k=ct.fromTag("div",p);$s(k,"data-mce-bogus","all"),Nd(k,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const D=On(v);fc(k,m),To(D,k);const $=k.dom.innerText;return ro(k),$},Vp=(i,m)=>{i.on("BeforeGetContent",p=>{const v=k=>{p.preventDefault(),v3(k).each(D=>{const $=p.format==="text"?O0(i,D):IC(i,D);p.content=$})};if(p.selection===!0){const k=ry(i);k.length>=1&&v(k)}}),i.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const v=mu(i);_e(v).each(k=>{ht(k).each(D=>{const $=go(jc(p.content),K=>Es(K)!=="meta"),U=dc("table");if(Jk(i)&&$.length===1&&U($[0])){p.preventDefault();const K=ct.fromDom(i.getDoc()),se=oC(K),he=an(k,$[0],se);m.pasteCells(D,he).each(()=>{i.focus()})}})})}})},FC=(i,m)=>i.dispatch("NewRow",{node:m}),qd=(i,m)=>i.dispatch("NewCell",{node:m}),sd=(i,m,p)=>{i.dispatch("TableModified",{...p,table:m})},y3=(i,m,p,v,k)=>{i.dispatch("TableSelectionChange",{cells:m,start:p,finish:v,otherCells:k})},C3=i=>{i.dispatch("TableSelectionClear")},nE=(i,m,p,v,k)=>{i.dispatch("ObjectResizeStart",{target:m,width:p,height:v,origin:k})},cy=(i,m,p,v,k)=>{i.dispatch("ObjectResized",{target:m,width:p,height:v,origin:k})},Up={structure:!1,style:!0},$r={structure:!0,style:!1},ay={structure:!0,style:!0},ly=(i,m)=>S0(i)?Zg.percentageSize(m):lh(i)?Zg.pixelSize(m):Zg.getTableSize(m),oE=(i,m,p)=>{const v=sa=>Es(Lv(sa))==="table",k=sa=>!v(i)||n0(sa).rows>1,D=sa=>!v(i)||n0(sa).columns>1,$=$v(i),U=Dx(i)?St:Yg,K=sa=>{switch(CC(i)){case"section":return Vg.section();case"sectionCells":return Vg.sectionCells();case"cells":return Vg.cells();default:return Vg.getTableSectionType(sa,"section")}},se=(sa,P0)=>P0.cursor.fold(()=>{const $0=mi(sa);return _e($0).filter(Hl).map(Ct=>{p.clearSelectedCells(sa.dom);const ps=i.dom.createRng();return ps.selectNode(Ct.dom),i.selection.setRng(ps),$s(Ct,"data-mce-selected","1"),ps})},$0=>{const Ct=Hm($0),ps=i.dom.createRng();return ps.setStart(Ct.element.dom,Ct.offset),ps.setEnd(Ct.element.dom,Ct.offset),i.selection.setRng(ps),p.clearSelectedCells(sa.dom),le.some(ps)}),he=(sa,P0,$0,Ct)=>(ps,k3,iE=!1)=>{ih(ps);const Ai=ct.fromDom(i.getDoc()),uE=t0($0,Ai,$),_3={sizing:ly(i,ps),resize:Dx(i)?Lg():Cw(),section:K(ps)};return P0(ps)?sa(ps,k3,uE,_3).bind(WC=>{m.refresh(ps.dom),ze(WC.newRows,vh=>{FC(i,vh.dom)}),ze(WC.newCells,vh=>{qd(i,vh.dom)});const A3=se(ps,WC);return Hl(ps)&&(ih(ps),iE||sd(i,ps.dom,Ct)),A3.map(vh=>({rng:vh,effect:Ct}))}):le.none()},Ce=he(uC,k,St,$r),ut=he(td,D,St,$r),it=he(jf,De,St,$r),Mt=he(mx,De,St,$r),Qe=he(wp,De,U,$r),He=he(Wo,De,U,$r),Vt=he(Rk,De,St,$r),Tt=he(Mk,De,St,$r),yt=he(We,De,St,$r),co=he(Nk,De,St,$r),eo=he(Sc,De,St,$r),to=he(gx,De,St,$r),rr=he(Ov,De,St,ay),ki=he(Dk,De,St,$r),bh=he(fx,De,St,$r),Jm=he(Zm,De,St,$r),Qf=he(au,De,St,$r),po=he(dC,De,St,$r),oa=he(Ok,De,St,$r),ga=he(mC,De,St,$r);return{deleteRow:Ce,deleteColumn:ut,insertRowsBefore:it,insertRowsAfter:Mt,insertColumnsBefore:Qe,insertColumnsAfter:He,mergeCells:Vt,unmergeCells:Tt,pasteColsBefore:yt,pasteColsAfter:co,pasteRowsBefore:eo,pasteRowsAfter:to,pasteCells:rr,makeCellsHeader:ki,unmakeCellsHeader:bh,makeColumnsHeader:Jm,unmakeColumnsHeader:Qf,makeRowsHeader:po,makeRowsBody:oa,makeRowsFooter:ga,getTableRowType:hx,getTableCellType:Dv,getTableColType:vt}},hh=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},LC=(i,m)=>{er(m,"td,th").each($n(hh,i))},S3=(i,m)=>{ze(hc(m,"tr"),p=>{FC(i,p.dom),ze(hc(p,"th,td"),v=>{qd(i,v.dom)})})},sE=i=>pr(i)&&i.indexOf("%")!==-1,w3=(i,m,p,v,k)=>{const D=Nx(i),$={styles:D,attributes:Qk(i),colGroups:e3(i)};return i.undoManager.ignore(()=>{const U=Hk(p,m,k,v,CC(i),$);$s(U,"data-mce-id","__mce");const K=Xh(U);i.insertContent(K),i.addVisual()}),er(Lv(i),'table[data-mce-id="__mce"]').map(U=>(lh(i)?bp(U):_p(i)?e0(U):(S0(i)||sE(D.width))&&Q1(U),ih(U),ss(U,"data-mce-id"),S3(i,U),LC(i,U),U.dom)).getOrNull()},rE=(i,m,p,v={})=>{const k=D=>Po(D)&&D>0;if(k(m)&&k(p)){const D=v.headerRows||0,$=v.headerColumns||0;return w3(i,p,m,$,D)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Wp=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const ph="x-tinymce/dom-table-",D0=ph+"rows",Ym=ph+"columns",cE=i=>{const m=Wp.FakeClipboardItem(i);Wp.write([m])},iy=i=>{var m;const p=(m=Wp.read())!==null&&m!==void 0?m:[];return gs(p,v=>le.from(v.getType(i)))},Xm=i=>{iy(i).isSome()&&Wp.clear()},uy=i=>{i.fold(R0,m=>cE({[D0]:m}))},dy=()=>iy(D0),R0=()=>Xm(D0),HC=i=>{i.fold(zC,m=>cE({[Ym]:m}))},M0=()=>iy(Ym),zC=()=>Xm(Ym),VC=i=>sy(Yf(i),Ap(i)).filter(xC),x3=i=>Km(Yf(i),Ap(i)).filter(xC),Kd=(i,m)=>{const p=Ap(i),v=()=>VC(i).each(He=>{ht(He,p).filter(te(p)).each(Vt=>{const Tt=ct.fromText("");if(Gi(Vt,Tt),ro(Vt),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const yt=i.dom.createRng();yt.setStart(Tt.dom,0),yt.setEnd(Tt.dom,0),i.selection.setRng(yt),i.nodeChanged()}})}),k=He=>VC(i).each(Vt=>{_p(i)||lh(i)||S0(i)||ht(Vt,p).each(yt=>{He==="relative"&&!iv(yt)?Q1(yt):He==="fixed"&&!Kw(yt)?bp(yt):He==="responsive"&&!Yw(yt)&&e0(yt),ih(yt),sd(i,yt.dom,$r)})}),D=He=>ht(He,p),$=He=>x3(i).bind(Vt=>D(Vt).map(Tt=>He(Tt,Vt))),U=(He,Vt)=>{$(Tt=>{i.formatter.toggle("tableclass",{value:Vt},Tt.dom),sd(i,Tt.dom,Up)})},K=(He,Vt)=>{$(Tt=>{const yt=mu(i),eo=xo(yt,to=>i.formatter.match("tablecellclass",{value:Vt},to.dom))?i.formatter.remove:i.formatter.apply;ze(yt,to=>eo("tablecellclass",{value:Vt},to.dom)),sd(i,Tt.dom,Up)})},se=()=>{VC(i).each(He=>{ht(He,p).each(Vt=>{$d(Vt,"caption").fold(()=>{const Tt=ct.fromTag("caption");To(Tt,ct.fromText("Caption")),Sm(Vt,Tt,0),i.selection.setCursorLocation(Tt.dom,0)},Tt=>{dc("caption")(He)&&yn("td",Vt).each(yt=>i.selection.setCursorLocation(yt.dom,0)),ro(Tt)}),sd(i,Vt.dom,$r)})})},he=He=>{i.focus()},Ce=(He,Vt=!1)=>$((Tt,yt)=>{const co=oy(mu(i),Tt,yt);He(Tt,co,Vt).each(he)}),ut=()=>$((He,Vt)=>{const Tt=oy(mu(i),He,Vt),yt=t0(St,ct.fromDom(i.getDoc()),le.none());return Vd(He,Tt,yt)}),it=()=>$((He,Vt)=>{const Tt=oy(mu(i),He,Vt);return bi(He,Tt)}),Mt=(He,Vt)=>Vt().each(Tt=>{const yt=Xt(Tt,co=>Is(co));$((co,eo)=>{const to=oC(ct.fromDom(i.getDoc())),rr=p3(mu(i),eo,yt,to);He(co,rr).each(he)})}),Qe=He=>(Vt,Tt)=>ku(Tt,"type").each(yt=>{Ce(He(yt),Tt.no_events)});Ro({mceTableSplitCells:()=>Ce(m.unmergeCells),mceTableMergeCells:()=>Ce(m.mergeCells),mceTableInsertRowBefore:()=>Ce(m.insertRowsBefore),mceTableInsertRowAfter:()=>Ce(m.insertRowsAfter),mceTableInsertColBefore:()=>Ce(m.insertColumnsBefore),mceTableInsertColAfter:()=>Ce(m.insertColumnsAfter),mceTableDeleteCol:()=>Ce(m.deleteColumn),mceTableDeleteRow:()=>Ce(m.deleteRow),mceTableCutCol:()=>it().each(He=>{HC(He),Ce(m.deleteColumn)}),mceTableCutRow:()=>ut().each(He=>{uy(He),Ce(m.deleteRow)}),mceTableCopyCol:()=>it().each(He=>HC(He)),mceTableCopyRow:()=>ut().each(He=>uy(He)),mceTablePasteColBefore:()=>Mt(m.pasteColsBefore,M0),mceTablePasteColAfter:()=>Mt(m.pasteColsAfter,M0),mceTablePasteRowBefore:()=>Mt(m.pasteRowsBefore,dy),mceTablePasteRowAfter:()=>Mt(m.pasteRowsAfter,dy),mceTableDelete:v,mceTableCellToggleClass:K,mceTableToggleClass:U,mceTableToggleCaption:se,mceTableSizingMode:(He,Vt)=>k(Vt),mceTableCellType:Qe(He=>He==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Qe(He=>He==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Qe(He=>{switch(He){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(He,Vt)=>i.addCommand(Vt,He)),i.addCommand("mceInsertTable",(He,Vt)=>{rE(i,Vt.rows,Vt.columns,Vt.options)}),i.addCommand("mceTableApplyCellStyle",(He,Vt)=>{const Tt=eo=>"tablecell"+eo.toLowerCase().replace("-","");if(!rn(Vt))return;const yt=go(mu(i),xC);if(yt.length===0)return;const co=zr(Vt,(eo,to)=>i.formatter.has(Tt(to))&&pr(eo));tl(co)||(Ro(co,(eo,to)=>{const rr=Tt(to);ze(yt,ki=>{eo===""?i.formatter.remove(rr,{value:null},ki.dom,!0):i.formatter.apply(rr,{value:eo},ki.dom)})}),D(yt[0]).each(eo=>sd(i,eo.dom,Up)))})},E3=(i,m)=>{const p=Ap(i),v=k=>Km(Yf(i)).bind(D=>ht(D,p).map($=>{const U=oy(mu(i),$,D);return k($,U)})).getOr("");Ro({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(k,D)=>i.addQueryValueHandler(D,k))},UC=i=>!km(ct.fromDom(i.target),"ephox-snooker-resizer-bar"),Ti=(i,m)=>{const p=Xf(()=>ct.fromDom(i.getBody()),()=>Km(Yf(i),Ap(i)),zp.selectedSelector),v=(K,se,he)=>{ht(se).each(ut=>{const it=Xt(K,Tt=>Tt.dom),Mt=$v(i),Qe=t0(St,ct.fromDom(i.getDoc()),Mt),He=mu(i),Vt=H2(ut,{selection:He},Qe).map(Tt=>Tu(Tt,yt=>Xt(yt,co=>co.dom))).getOrUndefined();y3(i,it,se.dom,he.dom,Vt)})},k=()=>C3(i),D=g3.byAttr(zp,v,k);return i.on("init",K=>{const se=i.getWin(),he=Lv(i),Ce=Ap(i),ut=()=>{const po=i.selection,oa=ct.fromDom(po.getStart()),ga=ct.fromDom(po.getEnd());So(ht,[oa,ga]).fold(()=>D.clear(he),St)},it=Xx(se,he,Ce,D),Mt=Jx(se,he,Ce,D),Qe=Lp(se,he,Ce,D),He=po=>po.raw.shiftKey===!0;i.on("TableSelectorChange",po=>Qe(po.start,po.finish));const Vt=(po,oa)=>{He(po)&&(oa.kill&&po.kill(),oa.selection.each(ga=>{const rd=_.relative(ga.start,ga.finish),_i=Je(se,rd);i.selection.setRng(_i)}))},Tt=po=>{const oa=ml(po);if(oa.raw.shiftKey&&Ic(oa.raw.which)){const ga=i.selection.getRng(),rd=ct.fromDom(ga.startContainer),_i=ct.fromDom(ga.endContainer);Mt.keyup(oa,rd,ga.startOffset,_i,ga.endOffset).each(B0=>{Vt(oa,B0)})}},yt=po=>{const oa=ml(po);m.hide();const ga=i.selection.getRng(),rd=ct.fromDom(ga.startContainer),_i=ct.fromDom(ga.endContainer),B0=yf(Jv,xi)(ct.fromDom(i.selection.getStart()));Mt.keydown(oa,rd,ga.startOffset,_i,ga.endOffset,B0).each(sa=>{Vt(oa,sa)}),m.show()},co=po=>po.button===0,eo=po=>po.buttons===void 0?!0:(po.buttons&1)!==0,to=po=>{it.clearstate()},rr=po=>{co(po)&&UC(po)&&it.mousedown(ml(po))},ki=po=>{eo(po)&&UC(po)&&it.mouseover(ml(po))},bh=po=>{co(po)&&UC(po)&&it.mouseup(ml(po))},Qf=(()=>{const po=lr(ct.fromDom(he)),oa=lr(0);return{touchEnd:rd=>{const _i=ct.fromDom(rd.target);if(dc("td")(_i)||dc("th")(_i)){const B0=po.get(),sa=oa.get();Cn(B0,_i)&&rd.timeStamp-sa<300&&(rd.preventDefault(),Qe(_i,_i))}po.set(_i),oa.set(rd.timeStamp)}}})();i.on("dragstart",to),i.on("mousedown",rr),i.on("mouseover",ki),i.on("mouseup",bh),i.on("touchend",Qf.touchEnd),i.on("keyup",Tt),i.on("keydown",yt),i.on("NodeChange",ut)}),i.on("PreInit",()=>{i.serializer.addTempAttr(zp.firstSelected),i.serializer.addTempAttr(zp.lastSelected)}),{getSelectedCells:()=>r3(p.get(),ae([]),K=>Xt(K,se=>se.dom),K=>[K.dom]),clearSelectedCells:K=>D.clear(ct.fromDom(K))}},oc=(i,m)=>{const p=ct.fromDom(i.getBody());return AR.body(p,m)},aE=i=>Lr(i)&&i.nodeName==="TABLE",N0="bar-",T3=i=>Dc(i,"data-mce-resize")!=="false",Yo=i=>{const m=tn.fromTable(i);tn.hasColumns(m)||ze(mi(i),p=>{const v=Ia(p,"width");Ln(p,"width",v),ss(p,"width")})},my=i=>lc(i,"corner-"),Zp=i=>Lh(i,"corner-"),lE=i=>{const m=Fo(),p=Fo(),v=Fo();let k,D,$,U;const K=yt=>ly(i,yt),se=()=>C0(i)?Cw():Lg(),he=yt=>n0(yt).columns,Ce=yt=>n0(yt).rows,ut=(yt,co,eo,to)=>{const rr=Zp(co),ki=Au(rr,"e"),bh=lc(rr,"n");if(D===""&&Q1(yt),U===""&&Qc(yt),eo!==k&&D!==""){Ln(yt,"width",D);const Jm=se(),Qf=K(yt),po=C0(i)||ki?he(yt)-1:0;Pf(yt,eo-k,po,Jm,Qf)}else if($x(D)){const Jm=parseFloat(D.replace("%","")),Qf=eo*Jm/k;Ln(yt,"width",Qf+"%")}if(n3(D)&&Yo(yt),to!==$&&U!==""){Ln(yt,"height",U);const Jm=bh?0:Ce(yt)-1;zw(yt,to-$,Jm)}},it=()=>{p.on(yt=>{yt.destroy()})};i.on("init",()=>{const yt=oc(i,T3);if(v.set(yt),y0(i)&&Rx(i)){const co=se(),eo=_x.create(yt,co,K);i.mode.isReadOnly()||eo.on(),eo.events.startDrag.bind(to=>{m.set(i.selection.getRng())}),eo.events.beforeResize.bind(to=>{const rr=to.table.dom;nE(i,rr,SC(rr),Bx(rr),N0+to.type)}),eo.events.afterResize.bind(to=>{const rr=to.table,ki=rr.dom;ih(rr),m.on(bh=>{i.selection.setRng(bh),i.focus()}),cy(i,ki,SC(ki),Bx(ki),N0+to.type),i.undoManager.add()}),p.set(eo)}}),i.on("ObjectResizeStart",yt=>{const co=yt.target;if(aE(co)&&!i.mode.isReadOnly()){const eo=ct.fromDom(co);ze(i.dom.select(".mce-clonedresizable"),to=>{i.dom.addClass(to,"mce-"+Iv(i)+"-columns")}),!Kw(eo)&&lh(i)?bp(eo):!iv(eo)&&S0(i)&&Q1(eo),Yw(eo)&&lc(yt.origin,N0)&&Q1(eo),k=yt.width,D=_p(i)?"":Px(i,co).getOr(""),$=yt.height,U=t3(i,co).getOr("")}}),i.on("ObjectResized",yt=>{const co=yt.target;if(aE(co)){const eo=ct.fromDom(co),to=yt.origin;my(to)&&ut(eo,to,yt.width,yt.height),ih(eo),sd(i,eo.dom,Up)}});const Mt=()=>{p.on(yt=>{yt.on(),yt.showBars()})},Qe=()=>{p.on(yt=>{yt.off(),yt.hideBars()})};return i.on("DisabledStateChange",yt=>{yt.state?Qe():Mt()}),i.on("SwitchMode",()=>{i.mode.isReadOnly()?Qe():Mt()}),i.on("dragstart dragend",yt=>{yt.type==="dragstart"?Qe():Mt()}),i.on("remove",()=>{it()}),{refresh:yt=>{p.on(co=>co.refreshBars(ct.fromDom(yt)))},hide:()=>{p.on(yt=>yt.hideBars())},show:()=>{p.on(yt=>yt.showBars())}}},fy=i=>{yC(i);const m=lE(i),p=Ti(i,m),v=oE(i,m,p);return Kd(i,v),E3(i,v),Vp(i,v),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},na=i=>({table:fy(i)});var jl=()=>{um.add("dom",na)};jl()}()),Jq}var eK;function eY(){return eK||(eK=1,QK()),Xq}eY();var tK={},nK={},oK;function tY(){return oK||(oK=1,function(){var um=tinymce.util.Tools.resolve("tinymce.PluginManager");const Eu=(w,_,I)=>{var G;return I(w,_.prototype)?!0:((G=w.constructor)===null||G===void 0?void 0:G.name)===_.name},dm=w=>{const _=typeof w;return w===null?"null":_==="object"&&Array.isArray(w)?"array":_==="object"&&Eu(w,String,(I,G)=>G.isPrototypeOf(I))?"string":_},ca=w=>_=>dm(_)===w,aa=w=>_=>typeof _===w,Aa=w=>_=>w===_,pr=ca("string"),rn=ca("array"),Vs=aa("boolean"),ti=Aa(void 0),Ns=w=>w==null,zc=w=>!Ns(w),ar=aa("function"),Lr=aa("number"),el=()=>{},Po=(w,_)=>I=>w(_(I)),St=w=>()=>w,Vc=w=>w,en=(w,_)=>w===_;function ae(w,..._){return(...I)=>{const G=_.concat(I);return w.apply(null,G)}}const Ot=w=>{w()},Oa=St(!1),$n=St(!0);class te{constructor(_,I){this.tag=_,this.value=I}static some(_){return new te(!0,_)}static none(){return te.singletonNone}fold(_,I){return this.tag?I(this.value):_()}isSome(){return this.tag}isNone(){return!this.tag}map(_){return this.tag?te.some(_(this.value)):te.none()}bind(_){return this.tag?_(this.value):te.none()}exists(_){return this.tag&&_(this.value)}forall(_){return!this.tag||_(this.value)}filter(_){return!this.tag||_(this.value)?this:te.none()}getOr(_){return this.tag?this.value:_}or(_){return this.tag?this:_}getOrThunk(_){return this.tag?this.value:_()}orThunk(_){return this.tag?this:_()}getOrDie(_){if(this.tag)return this.value;throw new Error(_??"Called getOrDie on None")}static from(_){return zc(_)?te.some(_):te.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(_){this.tag&&_(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}te.singletonNone=new te(!1);const Sn=Array.prototype.indexOf,bs=Array.prototype.push,Rn=(w,_)=>Sn.call(w,_),De=(w,_)=>Rn(w,_)>-1,le=(w,_)=>{for(let I=0,G=w.length;I<G;I++){const ie=w[I];if(_(ie,I))return!0}return!1},Bs=(w,_)=>{const I=[];for(let G=0;G<w;G++)I.push(_(G));return I},bn=(w,_)=>{const I=w.length,G=new Array(I);for(let ie=0;ie<I;ie++){const Ne=w[ie];G[ie]=_(Ne,ie)}return G},wt=(w,_)=>{for(let I=0,G=w.length;I<G;I++){const ie=w[I];_(ie,I)}},A=(w,_)=>{for(let I=w.length-1;I>=0;I--){const G=w[I];_(G,I)}},Xo=(w,_)=>{const I=[],G=[];for(let ie=0,Ne=w.length;ie<Ne;ie++){const tt=w[ie];(_(tt,ie)?I:G).push(tt)}return{pass:I,fail:G}},lt=(w,_)=>{const I=[];for(let G=0,ie=w.length;G<ie;G++){const Ne=w[G];_(Ne,G)&&I.push(Ne)}return I},Jo=(w,_,I)=>(A(w,(G,ie)=>{I=_(I,G,ie)}),I),Xt=(w,_,I)=>(wt(w,(G,ie)=>{I=_(I,G,ie)}),I),ze=(w,_,I)=>{for(let G=0,ie=w.length;G<ie;G++){const Ne=w[G];if(_(Ne,G))return te.some(Ne);if(I(Ne,G))break}return te.none()},bo=(w,_)=>ze(w,_,Oa),br=w=>{const _=[];for(let I=0,G=w.length;I<G;++I){if(!rn(w[I]))throw new Error("Arr.flatten item "+I+" was not an array, input: "+w);bs.apply(_,w[I])}return _},go=(w,_)=>br(bn(w,_)),vr=(w,_)=>{for(let I=0,G=w.length;I<G;++I){const ie=w[I];if(_(ie,I)!==!0)return!1}return!0},Pe=(w,_)=>{const I={};for(let G=0,ie=w.length;G<ie;G++){const Ne=w[G];I[String(Ne)]=_(Ne,G)}return I},ft=(w,_)=>_>=0&&_<w.length?te.some(w[_]):te.none(),L=w=>ft(w,0),ni=w=>ft(w,w.length-1),ho=(w,_)=>{for(let I=0;I<w.length;I++){const G=_(w[I],I);if(G.isSome())return G}return te.none()},ao=Object.keys,xo=Object.hasOwnProperty,Li=(w,_)=>{const I=ao(w);for(let G=0,ie=I.length;G<ie;G++){const Ne=I[G],tt=w[Ne];_(tt,Ne)}},Jt=w=>(_,I)=>{w[I]=_},vo=(w,_,I,G)=>{Li(w,(ie,Ne)=>{(_(ie,Ne)?I:G)(ie,Ne)})},qt=(w,_)=>{const I={};return vo(w,_,Jt(I),el),I},_e=(w,_)=>{const I=[];return Li(w,(G,ie)=>{I.push(_(G,ie))}),I},Da=w=>_e(w,Vc),gs=w=>ao(w).length,Rt=(w,_)=>Ar(w,_)?te.from(w[_]):te.none(),Ar=(w,_)=>xo.call(w,_),Ro=(w,_)=>Ar(w,_)&&w[_]!==void 0&&w[_]!==null,Tu=w=>{for(const _ in w)if(xo.call(w,_))return!1;return!0},ts=w=>{let _=w;return{get:()=>_,set:ie=>{_=ie}}},Hr=(w,_,I=en)=>w.exists(G=>I(G,_)),Bl=w=>{const _=[],I=G=>{_.push(G)};for(let G=0;G<w.length;G++)w[G].each(I);return _},zr=(w,_,I)=>w.isSome()&&_.isSome()?te.some(I(w.getOrDie(),_.getOrDie())):te.none(),An=w=>w.bind(Vc),$o=(w,_)=>w?te.some(_):te.none(),ku=w=>{const _=ts(te.none()),I=()=>_.get().each(w);return{clear:()=>{I(),_.set(te.none())},isSet:()=>_.get().isSome(),get:()=>_.get(),set:At=>{I(),_.set(te.some(At))}}},vs=()=>ku(w=>w.unbind()),Io=(w,_)=>w.substring(_),tl=(w,_,I)=>_===""||w.length>=_.length&&w.substr(I,I+_.length)===_,Ks=(w,_)=>Us(w,_)?Io(w,_.length):w,Us=(w,_)=>tl(w,_,0),la=(w=>_=>_.replace(w,""))(/^\s+|\s+$/g),Pl=w=>w.length>0,yr=w=>!Pl(w),_u=(w,_=10)=>{const I=parseInt(w,_);return isNaN(I)?te.none():te.some(I)},at=w=>{const _=parseFloat(w);return isNaN(_)?te.none():te.some(_)},In=w=>{let _=!1,I;return(...G)=>(_||(_=!0,I=w.apply(null,G)),I)},ac=(w,_)=>{const G=(_||document).createElement("div");if(G.innerHTML=w,!G.hasChildNodes()||G.childNodes.length>1){const ie="HTML does not have a single root node";throw console.error(ie,w),new Error(ie)}return Et(G.childNodes[0])},xd=(w,_)=>{const G=(_||document).createElement(w);return Et(G)},Uc=(w,_)=>{const G=(_||document).createTextNode(w);return Et(G)},Et=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},Mo={fromHtml:ac,fromTag:xd,fromText:Uc,fromDom:Et,fromPoint:(w,_,I)=>te.from(w.dom.elementFromPoint(_,I)).map(Et)},df=8,yo=9,Kt=11,$l=1,mf=3,_o=(w,_)=>{const I=w.dom;if(I.nodeType!==$l)return!1;{const G=I;if(G.matches!==void 0)return G.matches(_);if(G.msMatchesSelector!==void 0)return G.msMatchesSelector(_);if(G.webkitMatchesSelector!==void 0)return G.webkitMatchesSelector(_);if(G.mozMatchesSelector!==void 0)return G.mozMatchesSelector(_);throw new Error("Browser lacks native selectors")}},Vr=w=>w.nodeType!==$l&&w.nodeType!==yo&&w.nodeType!==Kt||w.childElementCount===0,ns=(w,_)=>{const I=_===void 0?document:_.dom;return Vr(I)?[]:bn(I.querySelectorAll(w),Mo.fromDom)},mm=(w,_)=>{const I=_===void 0?document:_.dom;return Vr(I)?te.none():te.from(I.querySelector(w)).map(Mo.fromDom)},Qt=(w,_)=>w.dom===_.dom,pa=_o,Fo=w=>w.dom.nodeName.toLowerCase(),Ed=w=>w.dom.nodeType,Td=w=>_=>Ed(_)===w,Lh=w=>Ed(w)===df||Fo(w)==="#comment",qo=Td($l),lc=Td(mf),Au=Td(yo),kd=Td(Kt),ol=w=>_=>qo(_)&&Fo(_)===w,Cr=w=>Mo.fromDom(w.dom.ownerDocument),_d=w=>Au(w)?w:Cr(w),ba=w=>te.from(w.dom.parentNode).map(Mo.fromDom),nt=(w,_)=>{const I=ar(_)?_:Oa;let G=w.dom;const ie=[];for(;G.parentNode!==null&&G.parentNode!==void 0;){const Ne=G.parentNode,tt=Mo.fromDom(Ne);if(ie.push(tt),I(tt)===!0)break;G=Ne}return ie},pg=w=>te.from(w.dom.previousSibling).map(Mo.fromDom),Ys=w=>te.from(w.dom.nextSibling).map(Mo.fromDom),Ou=w=>bn(w.dom.childNodes,Mo.fromDom),uo=(w,_)=>{const I=w.dom.childNodes;return te.from(I[_]).map(Mo.fromDom)},ff=w=>uo(w,0),Wc=w=>kd(w)&&zc(w.dom.host),bg=w=>Mo.fromDom(w.dom.getRootNode()),oi=w=>{const _=bg(w);return Wc(_)?te.some(_):te.none()},fm=w=>Mo.fromDom(w.dom.host),Ur=(w,_)=>{ba(w).each(G=>{G.dom.insertBefore(_.dom,w.dom)})},Or=(w,_)=>{Ys(w).fold(()=>{ba(w).each(ie=>{Sr(ie,_)})},G=>{Ur(G,_)})},Ra=(w,_)=>{ff(w).fold(()=>{Sr(w,_)},G=>{w.dom.insertBefore(_.dom,G.dom)})},Sr=(w,_)=>{w.dom.appendChild(_.dom)},ir=(w,_)=>{Ur(w,_),Sr(_,w)},Ps=(w,_)=>{wt(_,(I,G)=>{const ie=G===0?w:_[G-1];Or(ie,I)})},Hi=(w,_)=>{wt(_,I=>{Sr(w,I)})},si=(w,_,I)=>{if(pr(I)||Vs(I)||Lr(I))w.setAttribute(_,I+"");else throw console.error("Invalid call to Attribute.set. Key ",_,":: Value ",I,":: Element ",w),new Error("Attribute value was not simple")},ia=(w,_,I)=>{si(w.dom,_,I)},vg=(w,_)=>{const I=w.dom;Li(_,(G,ie)=>{si(I,ie,G)})},Ma=(w,_)=>{const I=w.dom.getAttribute(_);return I===null?void 0:I},dn=(w,_)=>te.from(Ma(w,_)),Xs=(w,_)=>{w.dom.removeAttribute(_)},ic=w=>Xt(w.dom.attributes,(_,I)=>(_[I.name]=I.value,_),{}),os=w=>{const _=w.dom;_.parentNode!==null&&_.parentNode.removeChild(_)},uc=w=>{const _=Ou(w);_.length>0&&Ps(w,_),os(w)},zi=w=>bn(w,Mo.fromDom),No=w=>w.style!==void 0&&ar(w.style.getPropertyValue),Wr=w=>{const _=lc(w)?w.dom.parentNode:w.dom;if(_==null||_.ownerDocument===null)return!1;const I=_.ownerDocument;return oi(Mo.fromDom(_)).fold(()=>I.body.contains(_),Po(Wr,fm))},Eo=(w,_,I)=>{if(!pr(I))throw console.error("Invalid call to CSS.set. Property ",_,":: Value ",I,":: Element ",w),new Error("CSS value must be a string: "+I);No(w)&&w.style.setProperty(_,I)},_c=(w,_)=>{No(w)&&w.style.removeProperty(_)},ct=(w,_,I)=>{const G=w.dom;Eo(G,_,I)},sl=(w,_)=>{const I=w.dom,ie=window.getComputedStyle(I).getPropertyValue(_);return ie===""&&!Wr(w)?rl(I,_):ie},rl=(w,_)=>No(w)?w.style.getPropertyValue(_):"",Na=(w,_)=>{const I=w.dom,G=rl(I,_);return te.from(G).filter(ie=>ie.length>0)},yg=(w,_)=>{const I=w.dom;_c(I,_),Hr(dn(w,"style").map(la),"")&&Xs(w,"style")},va=(w,_)=>at(w).getOr(_),cl=(w,_,I)=>va(sl(w,_),I),Dr=(w,_,I,G)=>{const ie=cl(w,`padding-${I}`,0),Ne=cl(w,`padding-${G}`,0),tt=cl(w,`border-${I}-width`,0),At=cl(w,`border-${G}-width`,0);return _-ie-Ne-tt-At},Du=(w,_)=>{const I=w.dom,G=I.getBoundingClientRect().width||I.offsetWidth;return Dr(w,G,"left","right")},Vi=w=>Du(w),gm=((w,_)=>{const I=Ne=>{if(!w(Ne))throw new Error("Can only get "+_+" value of a "+_+" node");return G(Ne).getOr("")},G=Ne=>w(Ne)?te.from(Ne.dom.nodeValue):te.none();return{get:I,getOption:G,set:(Ne,tt)=>{if(!w(Ne))throw new Error("Can only set raw "+_+" value of a "+_+" node");Ne.dom.nodeValue=tt}}})(lc,"text"),ri=w=>gm.get(w),Cg=(w,_)=>gm.set(w,_);var Je=(w,_,I,G,ie)=>w(I,G)?te.some(I):ar(ie)&&ie(I)?te.none():_(I,G,ie);const Mu=(w,_,I)=>{let G=w.dom;const ie=ar(I)?I:Oa;for(;G.parentNode;){G=G.parentNode;const Ne=Mo.fromDom(G);if(_(Ne))return te.some(Ne);if(ie(Ne))break}return te.none()},Ad=(w,_,I)=>Je((ie,Ne)=>Ne(ie),Mu,w,_,I),V=(w,_)=>{const I=ie=>_(Mo.fromDom(ie));return bo(w.dom.childNodes,I).map(Mo.fromDom)},J=(w,_,I)=>Mu(w,G=>_o(G,_),I),fe=(w,_)=>V(w,I=>_o(I,_)),Re=(w,_)=>mm(_,w),Ke=(w,_,I)=>Je((ie,Ne)=>_o(ie,Ne),J,w,_,I),bt=w=>Ke(w,"[contenteditable]"),yn=(w,_=!1)=>Wr(w)?w.dom.isContentEditable:bt(w).fold(St(_),I=>Cn(I)==="true"),Cn=w=>w.dom.contentEditable,Yn=(w,_)=>lt(Ou(w),_),ls=(w,_)=>{let I=[];return wt(Ou(w),G=>{_(G)&&(I=I.concat([G])),I=I.concat(ls(G,_))}),I},Qo=(w,_)=>Yn(w,I=>_o(I,_)),al=(w,_)=>ns(_,w),Il=(w,_)=>fe(w,_).isSome(),hm=w=>w.nodeName.toLowerCase(),Hh=w=>Mo.fromDom(w.getBody()),Ba=w=>_=>Qt(_,Hh(w)),Od=w=>w?w.replace(/px$/,""):"",Pa=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,Nu=w=>Mo.fromDom(w.selection.getStart()),lo=w=>Mo.fromDom(w.selection.getEnd()),gf=w=>Ad(w,ol("table")).forall(yn),Bu=["tfoot","thead","tbody","colgroup"],ci=w=>De(Bu,w),zh=(w,_)=>({rows:w,columns:_}),Vh=(w,_,I)=>({element:w,rowspan:_,colspan:I}),Sg=(w,_,I,G,ie,Ne)=>({element:w,rowspan:_,colspan:I,row:G,column:ie,isLocked:Ne}),pm=(w,_,I)=>({element:w,cells:_,section:I}),bm=(w,_,I,G)=>({startRow:w,startCol:_,finishRow:I,finishCol:G}),Dd=(w,_,I)=>({element:w,colspan:_,column:I}),hf=(w,_)=>({element:w,columns:_}),wg=(w,_,I=0)=>dn(w,_).map(G=>parseInt(G,10)).getOr(I),Uh=(w,_)=>ai(w,_,$n),ai=(w,_,I)=>go(Ou(w),G=>_o(G,_)?I(G)?[G]:[]:ai(G,_,I)),ll=(w,_,I=Oa)=>{if(I(_))return te.none();if(De(w,Fo(_)))return te.some(_);const G=ie=>_o(ie,"table")||I(ie);return J(_,w.join(","),G)},jr=(w,_)=>ll(["td","th"],w,_),vm=w=>Uh(w,"th,td"),Wh=w=>_o(w,"colgroup")?Qo(w,"col"):go(Ui(w),_=>Qo(_,"col")),ua=(w,_)=>Ke(w,"table",_),Zh=w=>Uh(w,"tr"),Ui=w=>ua(w).fold(St([]),_=>Qo(_,"colgroup")),jh=ol("th"),xg=(w,_)=>w&&_?"sectionCells":w?"section":"cells",il=w=>{const _=w.section==="thead",I=Hr(Fl(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:_||I?{type:"header",subType:xg(_,I)}:{type:"body"}},Fl=w=>{const _=lt(w,I=>jh(I.element));return _.length===0?te.some("td"):_.length===w.length?te.some("th"):te.none()},li=w=>{const _=bn(w,ie=>il(ie).type),I=De(_,"header"),G=De(_,"footer");if(!I&&!G)return te.some("body");{const ie=De(_,"body");return I&&!ie&&!G?te.some("header"):!I&&!ie&&G?te.some("footer"):te.none()}},Eg=(w,_)=>bn(w,I=>{if(Fo(I)==="colgroup"){const G=bn(Wh(I),ie=>{const Ne=wg(ie,"span",1);return Vh(ie,1,Ne)});return pm(I,G,"colgroup")}else{const G=bn(vm(I),ie=>{const Ne=wg(ie,"rowspan",1),tt=wg(ie,"colspan",1);return Vh(ie,Ne,tt)});return pm(I,G,_(I))}}),Wn=w=>ba(w).map(_=>{const I=Fo(_);return ci(I)?I:"tbody"}).getOr("tbody"),g1=w=>{const _=Zh(w),G=[...Ui(w),..._];return Eg(G,Wn)},Gh="data-snooker-locked-cols",h1=w=>dn(w,Gh).bind(_=>te.from(_.match(/\d+/g))).map(_=>Pe(_,$n)),pf=(w,_)=>w+","+_,p1=(w,_,I)=>te.from(w.access[pf(_,I)]),b1=(w,_,I)=>{const G=Tg(w,ie=>I(_,ie.element));return G.length>0?te.some(G[0]):te.none()},Tg=(w,_)=>{const I=go(w.all,G=>G.cells);return lt(I,_)},$b=w=>{const _={};let I=0;return wt(w.cells,G=>{const ie=G.colspan;Bs(ie,Ne=>{const tt=I+Ne;_[tt]=Dd(G.element,ie,tt)}),I+=ie}),_},kg=w=>{const _={},I=[],ie=L(w).map(La=>La.element).bind(ua).bind(h1).getOr({});let Ne=0,tt=0,At=0;const{pass:hn,fail:pn}=Xo(w,La=>La.section==="colgroup");wt(pn,La=>{const Zu=[];wt(La.cells,qc=>{let di=0;for(;_[pf(At,di)]!==void 0;)di++;const Dm=Ro(ie,di.toString()),$g=Sg(qc.element,qc.rowspan,qc.colspan,At,di,Dm);for(let Ef=0;Ef<qc.colspan;Ef++)for(let Tf=0;Tf<qc.rowspan;Tf++){const D1=At+Tf,Ig=di+Ef,op=pf(D1,Ig);_[op]=$g,tt=Math.max(tt,Ig+1)}Zu.push($g)}),Ne++,I.push(pm(La.element,Zu,La.section)),At++});const{columns:Bo,colgroups:rs}=ni(hn).map(La=>{const Zu=$b(La);return{colgroups:[hf(La.element,Da(Zu))],columns:Zu}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:zh(Ne,tt),access:_,all:I,columns:Bo,colgroups:rs}},Lo={fromTable:w=>{const _=g1(w);return kg(_)},generate:kg,getAt:p1,findItem:b1,filterItems:Tg,justCells:w=>go(w.all,_=>_.cells),justColumns:w=>Da(w.columns),hasColumns:w=>ao(w.columns).length>0,getColumnAt:(w,_)=>te.from(w.columns[_])},Wi=(w,_)=>ho(w.all,I=>bo(I.cells,G=>Qt(_,G.element))),ne=(w,_,I)=>{const G=bn(_.selection,Ne=>jr(Ne).bind(tt=>Wi(w,tt)).filter(I)),ie=Bl(G);return $o(ie.length>0,ie)},y1=(w,_)=>_.mergable,dc=(w,_)=>_.unmergable,Rd=(w,_)=>ne(w,_,$n),da=(w,_)=>Wi(w,_).exists(I=>!I.isLocked),Md=(w,_)=>vr(_,I=>da(w,I)),ym=(w,_)=>y1(w,_).filter(I=>Md(w,I.cells)),Zi=(w,_)=>dc(w,_).filter(I=>Md(w,I));var Zc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ji=()=>{const w=pn=>Mo.fromDom(pn.dom.cloneNode(!1)),_=pn=>_d(pn).dom,I=pn=>qo(pn)?Fo(pn)==="body"?!0:De(Zc,Fo(pn)):!1,G=pn=>qo(pn)?De(["br","img","hr","input"],Fo(pn)):!1,ie=pn=>qo(pn)&&Ma(pn,"contenteditable")==="false",Ne=(pn,Bo)=>pn.dom.compareDocumentPosition(Bo.dom),tt=(pn,Bo)=>{const rs=ic(pn);vg(Bo,rs)},At=pn=>{const Bo=Fo(pn);return De(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Bo)},hn=pn=>qo(pn)?dn(pn,"lang"):te.none();return{up:St({selector:J,closest:Ke,predicate:Mu,all:nt}),down:St({selector:al,predicate:ls}),styles:St({get:sl,getRaw:Na,set:ct,remove:yg}),attrs:St({get:Ma,set:ia,remove:Xs,copyTo:tt}),insert:St({before:Ur,after:Or,afterAll:Ps,append:Sr,appendAll:Hi,prepend:Ra,wrap:ir}),remove:St({unwrap:uc,remove:os}),create:St({nu:Mo.fromTag,clone:w,text:Mo.fromText}),query:St({comparePosition:Ne,prevSibling:pg,nextSibling:Ys}),property:St({children:Ou,name:Fo,parent:ba,document:_,isText:lc,isComment:Lh,isElement:qo,isSpecial:At,getLanguage:hn,getText:ri,setText:Cg,isBoundary:I,isEmptyTag:G,isNonEditable:ie}),eq:Qt,is:pa}};const Cm=(w,_,I,G)=>{const ie=I[0],Ne=I.slice(1);return G(w,_,ie,Ne)},Pu=(w,_,I)=>I.length>0?Cm(w,_,I,Ac):te.none(),Ac=(w,_,I,G)=>{const ie=_(w,I);return Jo(G,(Ne,tt)=>{const At=_(w,tt);return wr(w,Ne,At)},ie)},wr=(w,_,I)=>_.bind(G=>I.filter(ae(w.eq,G))),$u=Pu,ya=ji(),ul=(w,_)=>$u(ya,(I,G)=>w(G),_),Iu=(w,_)=>{const I=Lo.fromTable(w);return Rd(I,_).bind(ie=>{const Ne=ie[ie.length-1],tt=ie[0].row,At=Ne.row+Ne.rowspan,hn=I.all.slice(tt,At);return li(hn)}).getOr("")},On=(w,_)=>_.column>=w.startCol&&_.column+_.colspan-1<=w.finishCol&&_.row>=w.startRow&&_.row+_.rowspan-1<=w.finishRow,dl=(w,_)=>{let I=!0;const G=ae(On,_);for(let ie=_.startRow;ie<=_.finishRow;ie++)for(let Ne=_.startCol;Ne<=_.finishCol;Ne++)I=I&&Lo.getAt(w,ie,Ne).exists(G);return I?te.some(_):te.none()},bf=(w,_)=>bm(Math.min(w.row,_.row),Math.min(w.column,_.column),Math.max(w.row+w.rowspan-1,_.row+_.rowspan-1),Math.max(w.column+w.colspan-1,_.column+_.colspan-1)),Un=(w,_,I)=>{const G=Lo.findItem(w,_,Qt),ie=Lo.findItem(w,I,Qt);return G.bind(Ne=>ie.map(tt=>bf(Ne,tt)))},mc=(w,_,I)=>Un(w,_,I).bind(G=>dl(w,G)),Ll=(w,_,I)=>{const G=Fu(w);return mc(G,_,I)},Fu=Lo.fromTable;var ii=tinymce.util.Tools.resolve("tinymce.util.Tools");const Gr=(w,_,I)=>{const G=w.select("td,th",_);let ie;for(let Ne=0;Ne<G.length;Ne++){const tt=w.getStyle(G[Ne],I);if(ti(ie)&&(ie=tt),ie!==tt)return""}return ie},qr=(w,_,I)=>{ii.each("left center right".split(" "),G=>{G!==I&&w.formatter.remove("align"+G,{},_)}),I&&w.formatter.apply("align"+I,{},_)},C1=(w,_,I)=>{ii.each("top middle bottom".split(" "),G=>{G!==I&&w.formatter.remove("valign"+G,{},_)}),I&&w.formatter.apply("valign"+I,{},_)},Lu=(w,_,I)=>{w.dispatch("TableModified",{...I,table:_})};var ys=tinymce.util.Tools.resolve("tinymce.Env");const ml="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",fl=Bs(5,w=>{const _=`${w+1}px`;return{title:_,value:_}}),Gi=bn(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),gl="100%",To=w=>{var _;const I=w.dom,G=(_=I.getParent(w.selection.getStart(),I.isBlock))!==null&&_!==void 0?_:w.getBody();return Vi(Mo.fromDom(G))+"px"},Sm=(w,_)=>Kh(w)||!$a(w)?_:Ag(w)?{..._,width:To(w)}:{..._,width:gl},qh=(w,_)=>Kh(w)||$a(w)?_:Ag(w)?{..._,width:To(w)}:{..._,width:gl},Kr=w=>_=>_.options.get(w),fc=w=>{const _=w.options.register;_("table_border_widths",{processor:"object[]",default:fl}),_("table_border_styles",{processor:"object[]",default:Gi}),_("table_cell_advtab",{processor:"boolean",default:!0}),_("table_row_advtab",{processor:"boolean",default:!0}),_("table_advtab",{processor:"boolean",default:!0}),_("table_appearance_options",{processor:"boolean",default:!0}),_("table_grid",{processor:"boolean",default:!ys.deviceType.isTouch()}),_("table_cell_class_list",{processor:"object[]",default:[]}),_("table_row_class_list",{processor:"object[]",default:[]}),_("table_class_list",{processor:"object[]",default:[]}),_("table_toolbar",{processor:"string",default:ml}),_("table_background_color_map",{processor:"object[]",default:[]}),_("table_border_color_map",{processor:"object[]",default:[]})},hl=Kr("table_sizing_mode"),$s=Kr("table_border_widths"),qi=Kr("table_border_styles"),ur=Kr("table_cell_advtab"),Dc=Kr("table_row_advtab"),Ho=Kr("table_advtab"),ss=Kr("table_appearance_options"),wm=Kr("table_grid"),$a=Kr("table_style_by_css"),ro=Kr("table_cell_class_list"),pl=Kr("table_row_class_list"),bl=Kr("table_class_list"),vl=Kr("table_toolbar"),Is=Kr("table_background_color_map"),Hu=Kr("table_border_color_map"),Ag=w=>hl(w)==="fixed",Kh=w=>hl(w)==="responsive",jc=w=>{const _=w.options,I=_.get("table_default_styles");return _.isSet("table_default_styles")?I:Sm(w,I)},Yh=w=>{const _=w.options,I=_.get("table_default_attributes");return _.isSet("table_default_attributes")?I:qh(w,I)},vf=w=>J(w,"table"),Xh=(w,_)=>{const I=al(w,_);return I.length>0?te.some(I):te.none()},Wt=(w,_,I)=>Re(w,_).bind(G=>Re(w,I).bind(ie=>ul(vf,[G,ie]).map(Ne=>({first:G,last:ie,table:Ne})))),Hl=(w,_)=>Xh(w,_),Js=(w,_,I)=>Wt(w,_,I).bind(G=>{const ie=hn=>Qt(w,hn),Ne="thead,tfoot,tbody,table",tt=J(G.first,Ne,ie),At=J(G.last,Ne,ie);return tt.bind(hn=>At.bind(pn=>Qt(hn,pn)?Ll(G.table,G.first,G.last):te.none()))}),Ws=Vc,Og=w=>{const _=(G,ie)=>dn(G,ie).exists(Ne=>parseInt(Ne,10)>1),I=G=>_(G,"rowspan")||_(G,"colspan");return w.length>0&&vr(w,I)?te.some(w):te.none()},Ln=(w,_,I)=>_.length<=1?te.none():Js(w,I.firstSelectedSelector,I.lastSelectedSelector).map(G=>({bounds:G,cells:_})),Nd="data-mce-selected",Ia="data-mce-first-selected",yl="td["+Ia+"],th["+Ia+"]",Rr="data-mce-last-selected",Yr="td["+Rr+"],th["+Rr+"]",zu={selected:Nd,firstSelectedSelector:yl,lastSelectedSelector:Yr},Ts=w=>ua(w).bind(_=>Hl(_,zu.firstSelectedSelector)).fold(St(w),_=>_[0]),xm=w=>(_,I)=>{const G=Fo(_),ie=G==="col"||G==="colgroup"?Ts(_):_;return Ke(ie,w,I)},Fa=xm("th,td,caption"),ui=xm("th,td"),Em=w=>zi(w.model.table.getSelectedCells()),dr=(w,_)=>{const I=ui(w),G=I.bind(ie=>ua(ie)).map(ie=>Zh(ie));return zr(I,G,(ie,Ne)=>lt(Ne,tt=>le(zi(tt.dom.cells),At=>Ma(At,_)==="1"||Qt(At,ie)))).getOr([])},Gc=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Cs=w=>({value:Dg(w)}),gc=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,zl=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Zs=w=>gc.test(w)||zl.test(w),Dg=w=>Ks(w,"#").toUpperCase(),on=w=>Zs(w)?te.some({value:Dg(w)}):te.none(),Qs=w=>{const _=w.toString(16);return(_.length===1?"0"+_:_).toUpperCase()},x=w=>{const _=Qs(w.red)+Qs(w.green)+Qs(w.blue);return Cs(_)},M=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,H=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,X=(w,_,I,G)=>({red:w,green:_,blue:I,alpha:G}),re=(w,_,I,G)=>{const ie=parseInt(w,10),Ne=parseInt(_,10),tt=parseInt(I,10),At=parseFloat(G);return X(ie,Ne,tt,At)},Ve=w=>{const _=M.exec(w);if(_!==null)return te.some(re(_[1],_[2],_[3],"1"));const I=H.exec(w);return I!==null?te.some(re(I[1],I[2],I[3],I[4])):te.none()},Ye=w=>on(w).orThunk(()=>Ve(w).map(x)).getOrThunk(()=>{const _=document.createElement("canvas");_.height=1,_.width=1;const I=_.getContext("2d");I.clearRect(0,0,_.width,_.height),I.fillStyle="#FFFFFF",I.fillStyle=w,I.fillRect(0,0,1,1);const G=I.getImageData(0,0,1,1).data,ie=G[0],Ne=G[1],tt=G[2],At=G[3];return x(X(ie,Ne,tt,At))}),cn=w=>Ve(w).map(x).map(_=>"#"+_.value).getOr(w),un=(w,_,I)=>G=>{const ie=vs(),Ne=yr(I),tt=()=>{const At=Em(w),hn=pn=>w.formatter.match(_,{value:I},pn.dom,Ne);Ne?(G.setActive(!le(At,hn)),ie.set(w.formatter.formatChanged(_,pn=>G.setActive(!pn),!0))):(G.setActive(vr(At,hn)),ie.set(w.formatter.formatChanged(_,G.setActive,!1,{value:I})))};return w.initialized?tt():w.on("init",tt),ie.clear},Lt=w=>Ro(w,"menu"),wn=w=>bn(w,_=>{const I=_.text||_.title||"";return Lt(_)?{text:I,items:wn(_.menu)}:{text:I,value:_.value}}),Ko=w=>w.length?te.some(wn([{text:"Select...",value:"mce-no-match"},...w])):te.none(),xr=(w,_,I,G)=>bn(_,ie=>{const Ne=ie.text||ie.title;return Lt(ie)?{type:"nestedmenuitem",text:Ne,getSubmenuItems:()=>xr(w,ie.menu,I,G)}:{text:Ne,type:"togglemenuitem",onAction:()=>G(ie.value),onSetup:un(w,I,ie.value)}}),ks=(w,_)=>I=>{w.execCommand("mceTableApplyCellStyle",!1,{[_]:I})},Bd=w=>go(w,_=>Lt(_)?[{..._,menu:Bd(_.menu)}]:Pl(_.value)?[_]:[]),Pd=(w,_,I,G)=>ie=>ie(xr(w,_,I,G)),yf=(w,_,I)=>{const G=bn(_,ie=>({text:ie.title,value:"#"+Ye(ie.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:G.length>0?G:void 0,allowCustomColors:!1},onAction:ie=>{const Ne=ie.value==="remove"?"":ie.value;w.execCommand("mceTableApplyCellStyle",!1,{[I]:Ne})}}]},Rg=w=>()=>{const I=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:I})},_s=w=>()=>{const I=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:I})},Cf=w=>Ko(ro(w)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),Jh=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:Gc}],Mg=w=>Jh.concat(Cf(w).toArray()),Vu=(w,_)=>{const G=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(wn(qi(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:_==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(G):G}},Fb={normal:(w,_)=>{const I=w.dom;return{setAttrib:(tt,At)=>{I.setAttrib(_,tt,At)},setStyle:(tt,At)=>{I.setStyle(_,tt,At)},setFormat:(tt,At)=>{At===""?w.formatter.remove(tt,{value:null},_,!0):w.formatter.apply(tt,{value:At},_)}}}},Tm=w=>Us(w,"rgb")?cn(w):w,Xr=w=>{const _=Mo.fromDom(w);return{borderwidth:Na(_,"border-width").getOr(""),borderstyle:Na(_,"border-style").getOr(""),bordercolor:Na(_,"border-color").map(Tm).getOr(""),backgroundcolor:Na(_,"background-color").map(Tm).getOr("")}},$d=w=>{const _=w[0],I=w.slice(1);return wt(I,G=>{wt(ao(_),ie=>{Li(G,(Ne,tt)=>{const At=_[ie];At!==""&&ie===tt&&At!==Ne&&(_[ie]=ie==="class"?"mce-no-match":"")})})}),_},er=(w,_,I,G)=>bo(w,ie=>!ti(I.formatter.matchNode(G,_+ie))).getOr(""),mr=ae(er,["left","center","right"],"align"),Sf=ae(er,["top","middle","bottom"],"valign"),v2=(w,_)=>{const I=jc(w),G=Yh(w),ie=()=>({borderstyle:Rt(I,"border-style").getOr(""),bordercolor:Tm(Rt(I,"border-color").getOr("")),backgroundcolor:Tm(Rt(I,"background-color").getOr(""))}),Ne={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},tt=()=>{const Bo=I["border-width"];return $a(w)&&Bo?{border:Bo}:Rt(G,"border").fold(()=>({}),rs=>({border:rs}))},At=_?ie():{},hn=()=>{const Bo=Rt(I,"border-spacing").or(Rt(G,"cellspacing")).fold(()=>({}),tr=>({cellspacing:tr})),rs=Rt(I,"border-padding").or(Rt(G,"cellpadding")).fold(()=>({}),tr=>({cellpadding:tr}));return{...Bo,...rs}};return{...Ne,...I,...G,...At,...tt(),...hn()}},S1=w=>ua(Mo.fromDom(w)).map(_=>{const I={selection:zi(w.cells)};return Iu(_,I)}).getOr(""),Ng=(w,_,I)=>{const G=(At,hn)=>{const pn=Na(Mo.fromDom(hn),"border-width");return $a(w)&&pn.isSome()?pn.getOr(""):At.getAttrib(hn,"border")||Gr(w.dom,hn,"border-width")||Gr(w.dom,hn,"border")||""},ie=w.dom,Ne=$a(w)?ie.getStyle(_,"border-spacing")||ie.getAttrib(_,"cellspacing"):ie.getAttrib(_,"cellspacing")||ie.getStyle(_,"border-spacing"),tt=$a(w)?Gr(ie,_,"padding")||ie.getAttrib(_,"cellpadding"):ie.getAttrib(_,"cellpadding")||Gr(ie,_,"padding");return{width:ie.getStyle(_,"width")||ie.getAttrib(_,"width"),height:ie.getStyle(_,"height")||ie.getAttrib(_,"height"),cellspacing:Ne??"",cellpadding:tt??"",border:G(ie,_),caption:!!ie.select("caption",_)[0],class:ie.getAttrib(_,"class",""),align:mr(w,_),...I?Xr(_):{}}},Ki=(w,_,I)=>{const G=w.dom;return{height:G.getStyle(_,"height")||G.getAttrib(_,"height"),class:G.getAttrib(_,"class",""),type:S1(_),align:mr(w,_),...I?Xr(_):{}}},Qh=(w,_,I,G)=>{const ie=w.dom,Ne=G.getOr(_);return{width:((At,hn)=>ie.getStyle(At,hn)||ie.getAttrib(At,hn))(Ne,"width"),scope:ie.getAttrib(_,"scope"),celltype:hm(_),class:ie.getAttrib(_,"class",""),halign:mr(w,_),valign:Sf(w,_),...I?Xr(_):{}}},Lb=(w,_)=>{const I=Lo.fromTable(w),G=Lo.justCells(I),ie=lt(G,Ne=>le(_,tt=>Qt(Ne.element,tt)));return bn(ie,Ne=>({element:Ne.element.dom,column:Lo.getColumnAt(I,Ne.column).map(tt=>tt.element.dom)}))},km=(w,_,I,G)=>{G("scope")&&w.setAttrib("scope",I.scope),G("class")&&I.class!=="mce-no-match"&&w.setAttrib("class",I.class),G("width")&&_.setStyle("width",Pa(I.width))},ep=(w,_,I)=>{I("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",_.backgroundcolor),I("bordercolor")&&w.setFormat("tablecellbordercolor",_.bordercolor),I("borderstyle")&&w.setFormat("tablecellborderstyle",_.borderstyle),I("borderwidth")&&w.setFormat("tablecellborderwidth",Pa(_.borderwidth))},_m=(w,_,I,G)=>{const ie=_.length===1;wt(_,Ne=>{const tt=Ne.element,At=ie?$n:G,hn=Fb.normal(w,tt),pn=Ne.column.map(Bo=>Fb.normal(w,Bo)).getOr(hn);km(hn,pn,I,At),ur(w)&&ep(hn,I,At),G("halign")&&qr(w,tt,I.halign),G("valign")&&C1(w,tt,I.valign)})},wf=(w,_)=>{w.execCommand("mceTableCellType",!1,{type:_.celltype,no_events:!0})},w1=(w,_,I,G)=>{const ie=qt(G,(Ne,tt)=>I[tt]!==Ne);gs(ie)>0&&_.length>=1&&ua(_[0]).each(Ne=>{const tt=Lb(Ne,_),At=gs(qt(ie,(pn,Bo)=>Bo!=="scope"&&Bo!=="celltype"))>0,hn=Ar(ie,"celltype");(At||Ar(ie,"scope"))&&_m(w,tt,G,ae(Ar,ie)),hn&&wf(w,G),Lu(w,Ne.dom,{structure:hn,style:At})})},tp=(w,_,I,G)=>{const ie=G.getData();G.close(),w.undoManager.transact(()=>{w1(w,_,I,ie),w.focus()})},y2=(w,_)=>{const I=ua(_[0]).map(G=>bn(Lb(G,_),ie=>Qh(w,ie.element,ur(w),ie.column)));return $d(I.getOrDie())},C2=w=>{const _=Em(w);if(_.length===0)return;const I=y2(w,_),G={type:"tabpanel",tabs:[{title:"General",name:"general",items:Mg(w)},Vu(w,"cell")]},ie={type:"panel",items:[{type:"grid",columns:2,items:Mg(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:ur(w)?G:ie,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:I,onSubmit:ae(tp,w,_,I)})},Vl=w=>Ko(pl(w)).map(_=>({name:"class",type:"listbox",label:"Class",items:_})),Yi=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Ca=w=>Yi.concat(Vl(w).toArray()),io=(w,_,I)=>{I("class")&&_.class!=="mce-no-match"&&w.setAttrib("class",_.class),I("height")&&w.setStyle("height",Pa(_.height))},hc=(w,_,I)=>{I("backgroundcolor")&&w.setStyle("background-color",_.backgroundcolor),I("bordercolor")&&w.setStyle("border-color",_.bordercolor),I("borderstyle")&&w.setStyle("border-style",_.borderstyle)},x1=(w,_,I,G)=>{const Ne=_.length===1?$n:G;wt(_,tt=>{const At=Qo(Mo.fromDom(tt),"td,th"),hn=Fb.normal(w,tt);io(hn,I,Ne),Dc(w)&&hc(hn,I,Ne),G("height")&&wt(At,pn=>{w.dom.setStyle(pn.dom,"height",null)}),G("align")&&qr(w,tt,I.align)})},Bg=(w,_)=>{w.execCommand("mceTableRowType",!1,{type:_.type,no_events:!0})},Uu=(w,_,I,G)=>{const ie=qt(G,(Ne,tt)=>I[tt]!==Ne);if(gs(ie)>0){const Ne=Ar(ie,"type"),tt=Ne?gs(ie)>1:!0;tt&&x1(w,_,G,ae(Ar,ie)),Ne&&Bg(w,G),ua(Mo.fromDom(_[0])).each(At=>Lu(w,At.dom,{structure:Ne,style:tt}))}},Id=(w,_,I,G)=>{const ie=G.getData();G.close(),w.undoManager.transact(()=>{Uu(w,_,I,ie),w.focus()})},Cl=w=>{const _=dr(Nu(w),zu.selected);if(_.length===0)return;const I=bn(_,tt=>Ki(w,tt.dom,Dc(w))),G=$d(I),ie={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ca(w)},Vu(w,"row")]},Ne={type:"panel",items:[{type:"grid",columns:2,items:Ca(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:Dc(w)?ie:Ne,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:G,onSubmit:ae(Id,w,bn(_,tt=>tt.dom),G)})},E1=(w,_,I)=>{const G=I?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ie=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Ne=ss(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],tt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],At=_.length>0?[{name:"class",type:"listbox",label:"Class",items:_}]:[];return G.concat(ie).concat(Ne).concat(tt).concat(At)},T1=(w,_,I,G)=>{if(_.tagName==="TD"||_.tagName==="TH")pr(I)&&zc(G)?w.setStyle(_,I,G):w.setStyles(_,I);else if(_.children)for(let ie=0;ie<_.children.length;ie++)T1(w,_.children[ie],I,G)},hs=(w,_,I,G)=>{const ie=w.dom,Ne={},tt={},At=$a(w),hn=Ho(w),pn=parseFloat(I.border)===0;if(!ti(I.class)&&I.class!=="mce-no-match"&&(Ne.class=I.class),tt.height=Pa(I.height),At?tt.width=Pa(I.width):ie.getAttrib(_,"width")&&(Ne.width=Od(I.width)),At?(pn?(Ne.border=0,tt["border-width"]=""):(tt["border-width"]=Pa(I.border),Ne.border=1),tt["border-spacing"]=Pa(I.cellspacing)):(Ne.border=pn?0:I.border,Ne.cellpadding=I.cellpadding,Ne.cellspacing=I.cellspacing),At&&_.children){const Bo={};if(pn?Bo["border-width"]="":G.border&&(Bo["border-width"]=Pa(I.border)),G.cellpadding&&(Bo.padding=Pa(I.cellpadding)),hn&&G.bordercolor&&(Bo["border-color"]=I.bordercolor),!Tu(Bo))for(let rs=0;rs<_.children.length;rs++)T1(ie,_.children[rs],Bo)}if(hn){const Bo=I;tt["background-color"]=Bo.backgroundcolor,tt["border-color"]=Bo.bordercolor,tt["border-style"]=Bo.borderstyle}ie.setStyles(_,{...jc(w),...tt}),ie.setAttribs(_,{...Yh(w),...Ne})},k1=(w,_,I,G)=>{const ie=w.dom,Ne=G.getData(),tt=qt(Ne,(At,hn)=>I[hn]!==At);G.close(),w.undoManager.transact(()=>{if(!_){const At=_u(Ne.cols).getOr(1),hn=_u(Ne.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:hn,columns:At}),_=ui(Nu(w),Ba(w)).bind(pn=>ua(pn,Ba(w))).map(pn=>pn.dom).getOrDie()}if(gs(tt)>0){const At={border:Ar(tt,"border"),bordercolor:Ar(tt,"bordercolor"),cellpadding:Ar(tt,"cellpadding")};hs(w,_,Ne,At);const hn=ie.select("caption",_)[0];(hn&&!Ne.caption||!hn&&Ne.caption)&&w.execCommand("mceTableToggleCaption"),qr(w,_,Ne.align)}if(w.focus(),w.addVisual(),gs(tt)>0){const At=Ar(tt,"caption"),hn=At?gs(tt)>1:!0;Lu(w,_,{structure:At,style:hn})}})},Ao=(w,_)=>{const I=w.dom;let G,ie=v2(w,Ho(w));_?(ie.cols="1",ie.rows="1",Ho(w)&&(ie.borderstyle="",ie.bordercolor="",ie.backgroundcolor="")):(G=I.getParent(w.selection.getStart(),"table",w.getBody()),G?ie=Ng(w,G,Ho(w)):Ho(w)&&(ie.borderstyle="",ie.bordercolor="",ie.backgroundcolor=""));const Ne=Ko(bl(w));Ne.isSome()&&ie.class&&(ie.class=ie.class.replace(/\s*mce\-item\-table\s*/g,""));const tt={type:"grid",columns:2,items:E1(w,Ne.getOr([]),_)},At=()=>({type:"panel",items:[tt]}),hn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[tt]},Vu(w,"table")]}),pn=Ho(w)?hn():At();w.windowManager.open({title:"Table Properties",size:"normal",body:pn,onSubmit:ae(k1,w,G,ie),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ie})},_1=w=>{const _=I=>{gf(Nu(w))&&I()};Li({mceTableProps:ae(Ao,w,!1),mceTableRowProps:ae(Cl,w),mceTableCellProps:ae(C2,w),mceInsertTableDialog:ae(Ao,w,!0)},(I,G)=>w.addCommand(G,()=>_(I)))},Jr=w=>({element:w,mergable:te.none(),unmergable:te.none(),selection:[w]}),xf=(w,_,I)=>({element:I,mergable:Ln(_,w,zu),unmergable:Og(w),selection:Ws(w)}),Rc=w=>{const _=ts(te.none()),I=ts([]);let G=te.none();const ie=ol("caption"),Ne=Jn=>G.forall(cs=>!cs[Jn]),tt=()=>Fa(Nu(w),Ba(w)),At=()=>Fa(lo(w),Ba(w)),hn=()=>tt().bind(Jn=>An(zr(ua(Jn),At().bind(ua),(cs,pc)=>Qt(cs,pc)?ie(Jn)?te.some(Jr(Jn)):te.some(xf(Em(w),cs,Jn)):te.none()))),pn=Jn=>ua(Jn.element).map(pc=>{const Kc=Lo.fromTable(pc),R1=Rd(Kc,Jn).getOr([]),Rm=Xt(R1,(Fg,Lg)=>(Lg.isLocked&&(Fg.onAny=!0,Lg.column===0?Fg.onFirst=!0:Lg.column+Lg.colspan>=Kc.grid.columns&&(Fg.onLast=!0)),Fg),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ym(Kc,Jn).isSome(),unmergeable:Zi(Kc,Jn).isSome(),locked:Rm}}),Bo=()=>{_.set(In(hn)()),G=_.get().bind(pn),wt(I.get(),Ot)},rs=Jn=>(Jn(),I.set(I.get().concat([Jn])),()=>{I.set(lt(I.get(),cs=>cs!==Jn))}),tr=(Jn,cs)=>rs(()=>_.get().fold(()=>{Jn.setEnabled(!1)},pc=>{Jn.setEnabled(!cs(pc)&&w.selection.isEditable())})),La=(Jn,cs,pc)=>rs(()=>_.get().fold(()=>{Jn.setEnabled(!1),Jn.setActive(!1)},Kc=>{Jn.setEnabled(!cs(Kc)&&w.selection.isEditable()),Jn.setActive(pc(Kc))})),Zu=Jn=>G.exists(cs=>cs.locked[Jn]),qc=Jn=>tr(Jn,cs=>!1),di=Jn=>tr(Jn,cs=>ie(cs.element)),Dm=Jn=>cs=>tr(cs,pc=>ie(pc.element)||Zu(Jn)),$g=Jn=>cs=>tr(cs,pc=>ie(pc.element)||Jn().isNone()),Ef=(Jn,cs)=>pc=>tr(pc,Kc=>ie(Kc.element)||Jn().isNone()||Zu(cs)),Tf=Jn=>tr(Jn,cs=>Ne("mergeable")),D1=Jn=>tr(Jn,cs=>Ne("unmergeable")),Ig=Jn=>La(Jn,Oa,cs=>ua(cs.element,Ba(w)).exists(Kc=>Il(Kc,"caption"))),op=(Jn,cs)=>pc=>La(pc,Kc=>ie(Kc.element),()=>w.queryCommandValue(Jn)===cs),kf=op("mceTableRowType","header"),w2=op("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",Bo),{onSetupTable:qc,onSetupCellOrRow:di,onSetupColumn:Dm,onSetupPasteable:$g,onSetupPasteableColumn:Ef,onSetupMergeable:Tf,onSetupUnmergeable:D1,resetTargets:Bo,onSetupTableWithCaption:Ig,onSetupTableRowHeaders:kf,onSetupTableColumnHeaders:w2,targets:_.get}};var A1=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Hb="x-tinymce/dom-table-",S2=Hb+"rows",Wu=Hb+"columns",zb=w=>{var _;const I=(_=A1.read())!==null&&_!==void 0?_:[];return ho(I,G=>te.from(G.getType(w)))},Sa=()=>zb(S2),Fs=()=>zb(Wu),Am=w=>_=>{const I=()=>{_.setEnabled(w.selection.isEditable())};return w.on("NodeChange",I),I(),()=>{w.off("NodeChange",I)}},zo=(w,_)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Am(w),fetch:At=>At("inserttable | cell row column | advtablesort | tableprops deletetable")});const I=At=>()=>w.execCommand(At),G=(At,hn)=>{w.queryCommandSupported(hn.command)&&w.ui.registry.addButton(At,{...hn,onAction:ar(hn.onAction)?hn.onAction:I(hn.command)})},ie=(At,hn)=>{w.queryCommandSupported(hn.command)&&w.ui.registry.addToggleButton(At,{...hn,onAction:ar(hn.onAction)?hn.onAction:I(hn.command)})};G("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:_.onSetupTable}),G("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:_.onSetupTable}),G("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:_.onSetupCellOrRow}),G("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:_.onSetupMergeable}),G("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:_.onSetupUnmergeable}),G("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:_.onSetupCellOrRow}),G("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:_.onSetupCellOrRow}),G("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:_.onSetupCellOrRow}),G("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:_.onSetupCellOrRow}),G("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:_.onSetupColumn("onFirst")}),G("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:_.onSetupColumn("onLast")}),G("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:_.onSetupColumn("onAny")}),G("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:_.onSetupCellOrRow}),G("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:_.onSetupCellOrRow}),G("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:_.onSetupPasteable(Sa)}),G("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:_.onSetupPasteable(Sa)}),G("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:_.onSetupColumn("onAny")}),G("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:_.onSetupColumn("onAny")}),G("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:_.onSetupPasteableColumn(Fs,"onFirst")}),G("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:_.onSetupPasteableColumn(Fs,"onLast")}),G("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Am(w)});const Ne=Bd(bl(w));Ne.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Pd(w,Ne,"tableclass",At=>w.execCommand("mceTableToggleClass",!1,At)),onSetup:_.onSetupTable});const tt=Bd(ro(w));tt.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Pd(w,tt,"tablecellclass",At=>w.execCommand("mceTableCellToggleClass",!1,At)),onSetup:_.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Pd(w,Gc,"tablecellverticalalign",ks(w,"vertical-align")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Pd(w,$s(w),"tablecellborderwidth",ks(w,"border-width")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Pd(w,qi(w),"tablecellborderstyle",ks(w,"border-style")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:At=>At(yf(w,Is(w),"background-color")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:At=>At(yf(w,Hu(w),"border-color")),onSetup:_.onSetupCellOrRow})),ie("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),ie("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Rg(w),onSetup:_.onSetupTableRowHeaders}),ie("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:_s(w),onSetup:_.onSetupTableColumnHeaders})},O1=w=>{const _=G=>w.dom.is(G,"table")&&w.getBody().contains(G)&&w.dom.isEditable(G.parentNode),I=vl(w);I.length>0&&w.ui.registry.addContextToolbar("table",{predicate:_,items:I,scope:"node",position:"node"})},Om=w=>_=>{const I=()=>{_.setEnabled(w.selection.isEditable())};return w.on("NodeChange",I),I(),()=>{w.off("NodeChange",I)}},np=(w,_)=>{const I=rs=>()=>w.execCommand(rs),G=(rs,tr)=>w.queryCommandSupported(tr.command)?(w.ui.registry.addMenuItem(rs,{...tr,onAction:ar(tr.onAction)?tr.onAction:I(tr.command)}),!0):!1,ie=(rs,tr)=>{w.queryCommandSupported(tr.command)&&w.ui.registry.addToggleMenuItem(rs,{...tr,onAction:ar(tr.onAction)?tr.onAction:I(tr.command)})},Ne=rs=>{w.execCommand("mceInsertTable",!1,{rows:rs.numRows,columns:rs.numColumns})},tt=[G("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:_.onSetupCellOrRow}),G("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:_.onSetupCellOrRow}),G("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:_.onSetupCellOrRow}),G("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:_.onSetupCellOrRow}),G("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:_.onSetupCellOrRow}),G("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:_.onSetupCellOrRow}),G("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:_.onSetupPasteable(Sa)}),G("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:_.onSetupPasteable(Sa)})],At=[G("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:_.onSetupColumn("onFirst")}),G("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:_.onSetupColumn("onLast")}),G("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:_.onSetupColumn("onAny")}),G("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:_.onSetupColumn("onAny")}),G("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:_.onSetupColumn("onAny")}),G("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:_.onSetupPasteableColumn(Fs,"onFirst")}),G("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:_.onSetupPasteableColumn(Fs,"onLast")})],hn=[G("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:_.onSetupCellOrRow}),G("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:_.onSetupMergeable}),G("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:_.onSetupUnmergeable})];wm(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ne}],onSetup:Om(w)}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:I("mceInsertTableDialog"),onSetup:Om(w)}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:I("mceInsertTableDialog"),onSetup:Om(w)}),G("tableprops",{text:"Table properties",onSetup:_.onSetupTable,command:"mceTableProps"}),G("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:_.onSetupTable,command:"mceTableDelete"}),De(tt,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:St("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),De(At,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:St("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),De(hn,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:St("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(_.resetTargets(),_.targets().fold(St(""),rs=>Fo(rs.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const pn=Bd(bl(w));pn.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>xr(w,pn,"tableclass",rs=>w.execCommand("mceTableToggleClass",!1,rs)),onSetup:_.onSetupTable});const Bo=Bd(ro(w));Bo.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>xr(w,Bo,"tablecellclass",rs=>w.execCommand("mceTableCellToggleClass",!1,rs)),onSetup:_.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>xr(w,Gc,"tablecellverticalalign",ks(w,"vertical-align")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>xr(w,$s(w),"tablecellborderwidth",ks(w,"border-width")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>xr(w,qi(w),"tablecellborderstyle",ks(w,"border-style")),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>yf(w,Is(w),"background-color"),onSetup:_.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>yf(w,Hu(w),"border-color"),onSetup:_.onSetupCellOrRow})),ie("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:_.onSetupTableWithCaption}),ie("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Rg(w),onSetup:_.onSetupTableRowHeaders}),ie("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:_s(w),onSetup:_.onSetupTableRowHeaders})},Vb=w=>{const _=Rc(w);fc(w),_1(w),np(w,_),zo(w,_),O1(w)};var Pg=()=>{um.add("table",Vb)};Pg()}()),nK}var sK;function nY(){return sK||(sK=1,tY()),tK}nY();var rK={},cK={},aK;function oY(){return aK||(aK=1,function(){var um=tinymce.util.Tools.resolve("tinymce.PluginManager");const Eu=(rn,Vs)=>{rn.focus(),rn.undoManager.transact(()=>{rn.setContent(Vs)}),rn.selection.setCursorLocation(),rn.nodeChanged()},dm=rn=>rn.getContent({source_view:!0}),ca=rn=>{const Vs=dm(rn);rn.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Vs},onSubmit:ti=>{Eu(rn,ti.getData().code),ti.close()}})},aa=rn=>{rn.addCommand("mceCodeEditor",()=>{ca(rn)})},Aa=rn=>{const Vs=()=>rn.execCommand("mceCodeEditor");rn.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Vs}),rn.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Vs})};var pr=()=>{um.add("code",rn=>(aa(rn),Aa(rn),{}))};pr()}()),cK}var lK;function sY(){return lK||(lK=1,oY()),rK}sY();var iK={},uK={},dK;function rY(){return dK||(dK=1,function(){var um=tinymce.util.Tools.resolve("tinymce.PluginManager");const Eu=(x,M,H)=>{var X;return H(x,M.prototype)?!0:((X=x.constructor)===null||X===void 0?void 0:X.name)===M.name},dm=x=>{const M=typeof x;return x===null?"null":M==="object"&&Array.isArray(x)?"array":M==="object"&&Eu(x,String,(H,X)=>X.isPrototypeOf(H))?"string":M},ca=x=>M=>dm(M)===x,aa=x=>M=>typeof M===x,Aa=ca("string"),pr=ca("object"),rn=ca("array"),Vs=aa("boolean"),ti=x=>x==null,Ns=x=>!ti(x),zc=aa("function"),ar=aa("number"),Lr=()=>{},el=(x,M)=>H=>x(M(H)),Po=x=>()=>x,St=(x,M)=>x===M;function Vc(x,...M){return(...H)=>{const X=M.concat(H);return x.apply(null,X)}}const en=x=>M=>!x(M),ae=Po(!1);class Ot{constructor(M,H){this.tag=M,this.value=H}static some(M){return new Ot(!0,M)}static none(){return Ot.singletonNone}fold(M,H){return this.tag?H(this.value):M()}isSome(){return this.tag}isNone(){return!this.tag}map(M){return this.tag?Ot.some(M(this.value)):Ot.none()}bind(M){return this.tag?M(this.value):Ot.none()}exists(M){return this.tag&&M(this.value)}forall(M){return!this.tag||M(this.value)}filter(M){return!this.tag||M(this.value)?this:Ot.none()}getOr(M){return this.tag?this.value:M}or(M){return this.tag?this:M}getOrThunk(M){return this.tag?this.value:M()}orThunk(M){return this.tag?this:M()}getOrDie(M){if(this.tag)return this.value;throw new Error(M??"Called getOrDie on None")}static from(M){return Ns(M)?Ot.some(M):Ot.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(M){this.tag&&M(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ot.singletonNone=new Ot(!1);const Oa=Array.prototype.slice,$n=Array.prototype.indexOf,te=Array.prototype.push,Sn=(x,M)=>$n.call(x,M),bs=(x,M)=>Sn(x,M)>-1,Rn=(x,M)=>{for(let H=0,X=x.length;H<X;H++){const re=x[H];if(M(re,H))return!0}return!1},De=(x,M)=>{const H=x.length,X=new Array(H);for(let re=0;re<H;re++){const Ve=x[re];X[re]=M(Ve,re)}return X},le=(x,M)=>{for(let H=0,X=x.length;H<X;H++){const re=x[H];M(re,H)}},Bs=(x,M)=>{const H=[];for(let X=0,re=x.length;X<re;X++){const Ve=x[X];M(Ve,X)&&H.push(Ve)}return H},bn=(x,M)=>{if(x.length===0)return[];{let H=M(x[0]);const X=[];let re=[];for(let Ve=0,Ye=x.length;Ve<Ye;Ve++){const cn=x[Ve],un=M(cn);un!==H&&(X.push(re),re=[]),H=un,re.push(cn)}return re.length!==0&&X.push(re),X}},wt=(x,M,H)=>(le(x,(X,re)=>{H=M(H,X,re)}),H),A=(x,M,H)=>{for(let X=0,re=x.length;X<re;X++){const Ve=x[X];if(M(Ve,X))return Ot.some(Ve);if(H(Ve,X))break}return Ot.none()},Xo=(x,M)=>A(x,M,ae),lt=x=>{const M=[];for(let H=0,X=x.length;H<X;++H){if(!rn(x[H]))throw new Error("Arr.flatten item "+H+" was not an array, input: "+x);te.apply(M,x[H])}return M},Jo=(x,M)=>lt(De(x,M)),Xt=x=>{const M=Oa.call(x,0);return M.reverse(),M},ze=(x,M)=>M>=0&&M<x.length?Ot.some(x[M]):Ot.none(),bo=x=>ze(x,0),br=x=>ze(x,x.length-1),go=(x,M)=>{const H=[],X=zc(M)?re=>Rn(H,Ve=>M(Ve,re)):re=>bs(H,re);for(let re=0,Ve=x.length;re<Ve;re++){const Ye=x[re];X(Ye)||H.push(Ye)}return H},vr=Object.keys,Pe=(x,M)=>{const H=vr(x);for(let X=0,re=H.length;X<re;X++){const Ve=H[X],Ye=x[Ve];M(Ye,Ve)}},ft=x=>(M,H)=>{x[H]=M},L=(x,M,H,X)=>{Pe(x,(re,Ve)=>{(M(re,Ve)?H:X)(re,Ve)})},ni=(x,M)=>{const H={};return L(x,M,ft(H),Lr),H},ho=x=>{let M=x;return{get:()=>M,set:re=>{M=re}}},ao=typeof window<"u"?window:Function("return this;")(),xo=(x,M,H=St)=>x.exists(X=>H(X,M)),Li=(x,M,H=St)=>Jt(x,M,H).getOr(x.isNone()&&M.isNone()),Jt=(x,M,H)=>x.isSome()&&M.isSome()?Ot.some(H(x.getOrDie(),M.getOrDie())):Ot.none(),vo=(x,M)=>{let H=M??ao;for(let X=0;X<x.length&&H!==void 0&&H!==null;++X)H=H[x[X]];return H},qt=(x,M)=>{const H=x.split(".");return vo(H,M)},Da=(x=>M=>M.replace(x,""))(/^\s+|\s+$/g),gs=x=>x.length>0,Rt=x=>!gs(x),Ar="\uFEFF",Ro=x=>x===Ar,Tu=(x,M)=>{const X=(M||document).createElement("div");if(X.innerHTML=x,!X.hasChildNodes()||X.childNodes.length>1){const re="HTML does not have a single root node";throw console.error(re,x),new Error(re)}return Bl(X.childNodes[0])},ts=(x,M)=>{const X=(M||document).createElement(x);return Bl(X)},Hr=(x,M)=>{const X=(M||document).createTextNode(x);return Bl(X)},Bl=x=>{if(x==null)throw new Error("Node cannot be null or undefined");return{dom:x}},An={fromHtml:Tu,fromTag:ts,fromText:Hr,fromDom:Bl,fromPoint:(x,M,H)=>Ot.from(x.dom.elementFromPoint(M,H)).map(Bl)},$o=8,ku=11,vs=1,Io=3,tl=(x,M)=>{const H=x.dom;if(H.nodeType!==vs)return!1;{const X=H;if(X.matches!==void 0)return X.matches(M);if(X.msMatchesSelector!==void 0)return X.msMatchesSelector(M);if(X.webkitMatchesSelector!==void 0)return X.webkitMatchesSelector(M);if(X.mozMatchesSelector!==void 0)return X.mozMatchesSelector(M);throw new Error("Browser lacks native selectors")}},Ks=(x,M)=>x.dom===M.dom,Us=(x,M)=>{const H=x.dom,X=M.dom;return H===X?!1:H.contains(X)},lr=tl,la=(x,M)=>qt(x,M),Pl=(x,M)=>{const H=la(x,M);if(H==null)throw new Error(x+" not available on this browser");return H},yr=Object.getPrototypeOf,_u=x=>Pl("HTMLElement",x),at=x=>{const M=qt("ownerDocument.defaultView",x);return pr(x)&&(_u(M).prototype.isPrototypeOf(x)||/^HTML\w*Element$/.test(yr(x).constructor.name))},In=x=>x.dom.nodeName.toLowerCase(),ac=x=>x.dom.nodeType,xd=x=>M=>ac(M)===x,Uc=x=>ac(x)===$o||In(x)==="#comment",Et=x=>nl(x)&&at(x.dom),nl=xd(vs),Mo=xd(Io),df=xd(ku),yo=x=>M=>nl(M)&&In(M)===x,Kt=x=>Ot.from(x.dom.parentNode).map(An.fromDom),$l=x=>Ot.from(x.dom.parentElement).map(An.fromDom),mf=x=>Ot.from(x.dom.nextSibling).map(An.fromDom),_o=x=>De(x.dom.childNodes,An.fromDom),Vr=(x,M)=>{const H=x.dom.childNodes;return Ot.from(H[M]).map(An.fromDom)},ns=x=>Vr(x,0),mm=x=>Vr(x,x.dom.childNodes.length-1),Qt=x=>df(x)&&Ns(x.dom.host),pa=x=>An.fromDom(x.dom.getRootNode()),Fo=x=>{const M=pa(x);return Qt(M)?Ot.some(M):Ot.none()},Ed=x=>An.fromDom(x.dom.host),Td=(x,M)=>{Kt(x).each(X=>{X.dom.insertBefore(M.dom,x.dom)})},Lh=(x,M)=>{mf(x).fold(()=>{Kt(x).each(re=>{lc(re,M)})},X=>{Td(X,M)})},qo=(x,M)=>{ns(x).fold(()=>{lc(x,M)},X=>{x.dom.insertBefore(M.dom,X.dom)})},lc=(x,M)=>{x.dom.appendChild(M.dom)},Au=(x,M)=>{le(M,H=>{Td(x,H)})},kd=(x,M)=>{le(M,H=>{lc(x,H)})},ol=(x,M,H)=>{if(Aa(H)||Vs(H)||ar(H))x.setAttribute(M,H+"");else throw console.error("Invalid call to Attribute.set. Key ",M,":: Value ",H,":: Element ",x),new Error("Attribute value was not simple")},Cr=(x,M)=>{const H=x.dom;Pe(M,(X,re)=>{ol(H,re,X)})},_d=x=>wt(x.dom.attributes,(M,H)=>(M[H.name]=H.value,M),{}),ba=x=>{x.dom.textContent="",le(_o(x),M=>{nt(M)})},nt=x=>{const M=x.dom;M.parentNode!==null&&M.parentNode.removeChild(M)},pg=(x,M)=>An.fromDom(x.dom.cloneNode(M)),Ys=x=>pg(x,!0),Ou=(x,M)=>{const H=An.fromTag(M),X=_d(x);return Cr(H,X),H},uo=(x,M)=>{const H=Ou(x,M);Lh(x,H);const X=_o(x);return kd(H,X),nt(x),H},ff=x=>De(x,An.fromDom),Wc=x=>x.style!==void 0&&zc(x.style.getPropertyValue),bg=x=>{const M=Mo(x)?x.dom.parentNode:x.dom;if(M==null||M.ownerDocument===null)return!1;const H=M.ownerDocument;return Fo(An.fromDom(M)).fold(()=>H.body.contains(M),el(bg,Ed))},oi=(x,M,H)=>{if(!Aa(H))throw console.error("Invalid call to CSS.set. Property ",M,":: Value ",H,":: Element ",x),new Error("CSS value must be a string: "+H);Wc(x)&&x.style.setProperty(M,H)},fm=(x,M,H)=>{const X=x.dom;oi(X,M,H)},Ur=(x,M)=>{const X=document.createDocumentFragment();return le(x,re=>{X.appendChild(re.dom)}),An.fromDom(X)};var Or=(x,M,H,X,re)=>x(H,X)?Ot.some(H):zc(re)&&re(H)?Ot.none():M(H,X,re);const Ra=(x,M,H)=>{let X=x.dom;const re=zc(H)?H:ae;for(;X.parentNode;){X=X.parentNode;const Ve=An.fromDom(X);if(M(Ve))return Ot.some(Ve);if(re(Ve))break}return Ot.none()},Sr=(x,M,H)=>Or((re,Ve)=>Ve(re),Ra,x,M,H),ir=(x,M,H)=>Ra(x,X=>tl(X,M),H),Ps=(x,M,H)=>Or((re,Ve)=>tl(re,Ve),ir,x,M,H),Hi=x=>Ps(x,"[contenteditable]"),si=(x,M=!1)=>bg(x)?x.dom.isContentEditable:Hi(x).fold(Po(M),H=>ia(H)==="true"),ia=x=>x.dom.contentEditable,vg=(x,M,H)=>Ra(x,M,H).isSome(),Ma=(x,M)=>vg(x,Vc(Ks,M));var dn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Xs=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ic=tinymce.util.Tools.resolve("tinymce.util.VK"),os=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),uc=tinymce.util.Tools.resolve("tinymce.util.Tools");const zi=x=>M=>Ns(M)&&M.nodeName.toLowerCase()===x,No=x=>M=>Ns(M)&&x.test(M.nodeName),Wr=x=>Ns(x)&&x.nodeType===3,Eo=x=>Ns(x)&&x.nodeType===1,_c=No(/^(OL|UL|DL)$/),ct=No(/^(OL|UL)$/),sl=zi("ol"),rl=No(/^(LI|DT|DD)$/),Na=No(/^(DT|DD)$/),yg=No(/^(TH|TD)$/),va=zi("br"),cl=x=>{var M;return((M=x.parentNode)===null||M===void 0?void 0:M.firstChild)===x},Dr=(x,M)=>Ns(M)&&M.nodeName in x.schema.getTextBlockElements(),Du=(x,M)=>Ns(x)&&x.nodeName in M,Ru=(x,M)=>Ns(M)&&M.nodeName in x.schema.getVoidElements(),Vi=(x,M)=>va(M)?x.isBlock(M.nextSibling)&&!va(M.previousSibling):!1,Zr=(x,M,H)=>{const X=x.isEmpty(M);return H&&x.select("span[data-mce-type=bookmark]",M).length>0?!1:X},gm=(x,M)=>x.isChildOf(M,x.getRoot()),ri=x=>M=>M.options.get(x),Cg=x=>{const M=x.options.register;M("lists_indent_on_tab",{processor:"boolean",default:!0})},Je=ri("lists_indent_on_tab"),Mu=ri("forced_root_block"),Ad=ri("forced_root_block_attrs"),V=(x,M,H={})=>{const X=x.dom,re=x.schema.getBlockElements(),Ve=X.createFragment(),Ye=Mu(x),cn=Ad(x);let un,Lt,wn=!1;for(Lt=X.create(Ye,{...cn,...H.style?{style:H.style}:{}}),Du(M.firstChild,re)||Ve.appendChild(Lt);un=M.firstChild;){const Ko=un.nodeName;!wn&&(Ko!=="SPAN"||un.getAttribute("data-mce-type")!=="bookmark")&&(wn=!0),Du(un,re)?(Ve.appendChild(un),Lt=null):(Lt||(Lt=X.create(Ye,cn),Ve.appendChild(Lt)),Lt.appendChild(un))}return!wn&&Lt&&Lt.appendChild(X.create("br",{"data-mce-bogus":"1"})),Ve},J=os.DOM,fe=(x,M,H)=>{const X=Lt=>{const wn=Lt.parentNode;wn&&uc.each(re,Ko=>{wn.insertBefore(Ko,H.parentNode)}),J.remove(Lt)},re=J.select('span[data-mce-type="bookmark"]',M),Ve=V(x,H),Ye=J.createRng();Ye.setStartAfter(H),Ye.setEndAfter(M);const cn=Ye.extractContents();for(let Lt=cn.firstChild;Lt;Lt=Lt.firstChild)if(Lt.nodeName==="LI"&&x.dom.isEmpty(Lt)){J.remove(Lt);break}x.dom.isEmpty(cn)||J.insertAfter(cn,M),J.insertAfter(Ve,M);const un=H.parentElement;un&&Zr(x.dom,un)&&X(un),J.remove(H),Zr(x.dom,M)&&J.remove(M)},Re=yo("dd"),Ke=yo("dt"),bt=(x,M)=>{Re(M)?uo(M,"dt"):Ke(M)&&$l(M).each(H=>fe(x,H.dom,M.dom))},yn=x=>{Ke(x)&&uo(x,"dd")},Cn=(x,M,H)=>{M==="Indent"?le(H,yn):le(H,X=>bt(x,X))},Yn=(x,M)=>{if(Wr(x))return{container:x,offset:M};const H=dn.getNode(x,M);return Wr(H)?{container:H,offset:M>=x.childNodes.length?H.data.length:0}:H.previousSibling&&Wr(H.previousSibling)?{container:H.previousSibling,offset:H.previousSibling.data.length}:H.nextSibling&&Wr(H.nextSibling)?{container:H.nextSibling,offset:0}:{container:x,offset:M}},ls=x=>{const M=x.cloneRange(),H=Yn(x.startContainer,x.startOffset);M.setStart(H.container,H.offset);const X=Yn(x.endContainer,x.endOffset);return M.setEnd(X.container,X.offset),M},Qo=["OL","UL","DL"],al=Qo.join(","),Il=(x,M)=>{const H=M||x.selection.getStart(!0);return x.dom.getParent(H,al,Bu(x,H))},hm=(x,M)=>Ns(x)&&M.length===1&&M[0]===x,Hh=x=>Bs(x.querySelectorAll(al),_c),Ba=x=>{const M=Il(x),H=x.selection.getSelectedBlocks();return hm(M,H)?Hh(M):Bs(H,X=>_c(X)&&M!==X)},Od=(x,M)=>{const H=uc.map(M,X=>{const re=x.dom.getParent(X,"li,dd,dt",Bu(x,X));return re||X});return go(H)},Pa=x=>{const M=x.selection.getSelectedBlocks();return Bs(Od(x,M),rl)},Nu=x=>Bs(Pa(x),Na),lo=(x,M)=>{const H=x.dom.getParents(M,"TD,TH");return H.length>0?H[0]:x.getBody()},gf=(x,M)=>!_c(M)&&!rl(M)&&Rn(Qo,H=>x.isValidChild(M.nodeName,H)),Bu=(x,M)=>{const H=x.dom.getParents(M,x.dom.isBlock),X=Ve=>Ve.nodeName.toLowerCase()!==Mu(x);return Xo(H,Ve=>X(Ve)&&gf(x.schema,Ve)).getOr(x.getBody())},ci=x=>Kt(x).exists(M=>rl(M.dom)&&ns(M).exists(H=>!_c(H.dom))&&mm(M).exists(H=>!_c(H.dom))),zh=(x,M)=>{const H=x.dom.getParents(M,"ol,ul",Bu(x,M));return br(H)},Vh=x=>{const M=zh(x,x.selection.getStart()),H=Bs(x.selection.getSelectedBlocks(),ct);return M.toArray().concat(H)},Sg=x=>{const M=x.selection.getStart();return x.dom.getParents(M,"ol,ul",Bu(x,M))},pm=x=>{const M=Vh(x),H=Sg(x);return Xo(H,X=>ci(An.fromDom(X))).fold(()=>bm(x,M),X=>[X])},bm=(x,M)=>{const H=De(M,X=>zh(x,X).getOr(X));return go(H)},Dd=x=>/\btox\-/.test(x.className),hf=(x,M)=>A(x,_c,yg).exists(H=>H.nodeName===M&&!Dd(H)),wg=(x,M)=>M!==null&&!x.dom.isEditable(M),Uh=x=>{const M=Il(x);return wg(x,M)||!x.selection.isEditable()},ai=(x,M)=>{const H=x.dom.getParent(M,"ol,ul,dl");return wg(x,H)||!x.selection.isEditable()},ll=(x,M)=>{const H=x.selection.getNode();return M({parents:x.dom.getParents(H),element:H}),x.on("NodeChange",M),()=>x.off("NodeChange",M)},jr=(x,M,H)=>x.dispatch("ListMutation",{action:M,element:H}),vm=x=>lr(x,"OL,UL"),Wh=x=>lr(x,"LI"),ua=x=>ns(x).exists(vm),Zh=x=>mm(x).exists(vm),Ui=x=>"listAttributes"in x,jh=x=>"isComment"in x,xg=x=>"isFragment"in x,il=x=>x.depth>0,Fl=x=>x.isSelected,li=x=>{const M=_o(x),H=Zh(x)?M.slice(0,-1):M;return De(H,Ys)},Eg=(x,M,H)=>Kt(x).filter(nl).map(X=>({depth:M,dirty:!1,isSelected:H,content:li(x),itemAttributes:_d(x),listAttributes:_d(X),listType:In(X),isInPreviousLi:!1})),Wn=(x,M)=>{lc(x.item,M.list)},g1=x=>{for(let M=1;M<x.length;M++)Wn(x[M-1],x[M])},Gh=(x,M)=>{Jt(br(x),bo(M),Wn)},h1=(x,M)=>{const H={list:An.fromTag(M,x),item:An.fromTag("li",x)};return lc(H.list,H.item),H},pf=(x,M,H)=>{const X=[];for(let re=0;re<H;re++)X.push(h1(x,Ui(M)?M.listType:M.parentListType));return X},p1=(x,M)=>{for(let H=0;H<x.length-1;H++)fm(x[H].item,"list-style-type","none");br(x).each(H=>{Ui(M)&&(Cr(H.list,M.listAttributes),Cr(H.item,M.itemAttributes)),kd(H.item,M.content)})},b1=(x,M)=>{In(x.list)!==M.listType&&(x.list=uo(x.list,M.listType)),Cr(x.list,M.listAttributes)},Tg=(x,M,H)=>{const X=An.fromTag("li",x);return Cr(X,M),kd(X,H),X},$b=(x,M)=>{lc(x.list,M),x.item=M},kg=(x,M,H)=>{const X=M.slice(0,H.depth);return br(X).each(re=>{if(Ui(H)){const Ve=Tg(x,H.itemAttributes,H.content);$b(re,Ve),b1(re,H)}else if(xg(H))kd(re.item,H.content);else{const Ve=An.fromHtml(`<!--${H.content}-->`);lc(re.list,Ve)}}),X},Es=(x,M,H)=>{const X=pf(x,H,H.depth-M.length);return g1(X),p1(X,H),Gh(M,X),M.concat(X)},Xe=(x,M)=>{let H=Ot.none();const X=wt(M,(re,Ve,Ye)=>jh(Ve)?Ye===0?(H=Ot.some(Ve),re):kg(x,re,Ve):Ve.depth>re.length?Es(x,re,Ve):kg(x,re,Ve),[]);return H.each(re=>{const Ve=An.fromHtml(`<!--${re.content}-->`);bo(X).each(Ye=>{qo(Ye.list,Ve)})}),bo(X).map(re=>re.list)},_g=(x,M)=>{switch(x){case"Indent":M.depth++;break;case"Outdent":M.depth--;break;case"Flatten":M.depth=0}M.dirty=!0},Ib=(x,M)=>{Ui(x)&&Ui(M)&&(x.listType=M.listType,x.listAttributes={...M.listAttributes})},v1=x=>{x.listAttributes=ni(x.listAttributes,(M,H)=>H!=="start")},Lo=(x,M)=>{const H=x[M].depth,X=Ve=>Ve.depth===H&&!Ve.dirty,re=Ve=>Ve.depth<H;return A(Xt(x.slice(0,M)),X,re).orThunk(()=>A(x.slice(M+1),X,re))},Wi=x=>(le(x,(M,H)=>{Lo(x,H).fold(()=>{M.dirty&&Ui(M)&&v1(M)},X=>Ib(M,X))}),x),ne=(x,M,H,X)=>{var re;if(Uc(X))return[{depth:x+1,content:(re=X.dom.nodeValue)!==null&&re!==void 0?re:"",dirty:!1,isSelected:!1,isComment:!0}];M.each(cn=>{Ks(cn.start,X)&&H.set(!0)});const Ve=Eg(X,x,H.get());M.each(cn=>{Ks(cn.end,X)&&H.set(!1)});const Ye=mm(X).filter(vm).map(cn=>dc(x,M,H,cn)).getOr([]);return Ve.toArray().concat(Ye)},y1=(x,M,H,X)=>ns(X).filter(vm).fold(()=>ne(x,M,H,X),re=>{const Ve=wt(_o(X),(Ye,cn,un)=>{if(un===0)return Ye;if(Wh(cn))return Ye.concat(ne(x,M,H,cn));{const Lt={isFragment:!0,depth:x,content:[cn],isSelected:!1,dirty:!1,parentListType:In(re)};return Ye.concat(Lt)}},[]);return dc(x,M,H,re).concat(Ve)}),dc=(x,M,H,X)=>Jo(_o(X),re=>{const Ve=vm(re)?dc:y1,Ye=x+1;return Ve(Ye,M,H,re)}),Rd=(x,M)=>{const H=ho(!1),X=0;return De(x,re=>({sourceList:re,entries:dc(X,M,H,re)}))},da=(x,M)=>{const H=Wi(M);return De(H,X=>{const re=jh(X)?Ur([An.fromHtml(`<!--${X.content}-->`)]):Ur(X.content),Ve=Ui(X)?X.itemAttributes:{};return An.fromDom(V(x,re.dom,Ve))})},Md=(x,M)=>{const H=Wi(M);return Xe(x.contentDocument,H).toArray()},ym=(x,M)=>Jo(bn(M,il),H=>bo(H).exists(il)?Md(x,H):da(x,H)),Zi=(x,M)=>{le(Bs(x,Fl),H=>_g(M,H))},Zc=x=>{const M=De(Pa(x),An.fromDom);return Jt(Xo(M,en(ua)),Xo(Xt(M),en(ua)),(H,X)=>({start:H,end:X}))},ji=(x,M,H)=>{const X=Rd(M,Zc(x));le(X,re=>{Zi(re.entries,H);const Ve=ym(x,re.entries);le(Ve,Ye=>{jr(x,H==="Indent"?"IndentList":"OutdentList",Ye.dom)}),Au(re.sourceList,Ve),nt(re.sourceList)})},Cm=(x,M)=>{const H=ff(pm(x)),X=ff(Nu(x));let re=!1;if(H.length||X.length){const Ve=x.selection.getBookmark();ji(x,H,M),Cn(x,M,X),x.selection.moveToBookmark(Ve),x.selection.setRng(ls(x.selection.getRng())),x.nodeChanged(),re=!0}return re},Pu=(x,M)=>!Uh(x)&&Cm(x,M),Ac=x=>Pu(x,"Indent"),wr=x=>Pu(x,"Outdent"),$u=x=>Pu(x,"Flatten");var ya=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const ul=os.DOM,Oc=x=>{const M={},H=X=>{let re=x[X?"startContainer":"endContainer"],Ve=x[X?"startOffset":"endOffset"];if(Eo(re)){const Ye=ul.create("span",{"data-mce-type":"bookmark"});re.hasChildNodes()?(Ve=Math.min(Ve,re.childNodes.length-1),X?re.insertBefore(Ye,re.childNodes[Ve]):ul.insertAfter(Ye,re.childNodes[Ve])):re.appendChild(Ye),re=Ye,Ve=0}M[X?"startContainer":"endContainer"]=re,M[X?"startOffset":"endOffset"]=Ve};return H(!0),x.collapsed||H(),M},Iu=x=>{const M=X=>{const re=cn=>{var un;let Lt=(un=cn.parentNode)===null||un===void 0?void 0:un.firstChild,wn=0;for(;Lt;){if(Lt===cn)return wn;(!Eo(Lt)||Lt.getAttribute("data-mce-type")!=="bookmark")&&wn++,Lt=Lt.nextSibling}return-1};let Ve=x[X?"startContainer":"endContainer"],Ye=x[X?"startOffset":"endOffset"];if(Ve){if(Eo(Ve)&&Ve.parentNode){const cn=Ve;Ye=re(Ve),Ve=Ve.parentNode,ul.remove(cn),!Ve.hasChildNodes()&&ul.isBlock(Ve)&&Ve.appendChild(ul.create("br"))}x[X?"startContainer":"endContainer"]=Ve,x[X?"startOffset":"endOffset"]=Ye}};M(!0),M();const H=ul.createRng();return H.setStart(x.startContainer,x.startOffset),x.endContainer&&H.setEnd(x.endContainer,x.endOffset),ls(H)},On=x=>{switch(x){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},dl=(x,M,H)=>{const X=H["list-style-type"]?H["list-style-type"]:null;x.setStyle(M,"list-style-type",X)},bf=(x,M)=>{uc.each(M,(H,X)=>{x.setAttribute(X,H)})},Un=(x,M,H)=>{bf(M,H["list-attributes"]),uc.each(x.select("li",M),X=>{bf(X,H["list-item-attributes"])})},mc=(x,M,H)=>{dl(x,M,H),Un(x,M,H)},Ll=(x,M,H)=>{uc.each(H,X=>x.setStyle(M,X,""))},Fu=(x,M)=>Ns(M)&&!Du(M,x.schema.getBlockElements()),ii=(x,M,H,X)=>{let re=M[H?"startContainer":"endContainer"];const Ve=M[H?"startOffset":"endOffset"];Eo(re)&&(re=re.childNodes[Math.min(Ve,re.childNodes.length-1)]||re),!H&&va(re.nextSibling)&&(re=re.nextSibling);const Ye=un=>{for(;!x.dom.isBlock(un)&&un.parentNode&&X!==un;)un=un.parentNode;return un},cn=(un,Lt)=>{var wn;const Ko=new Xs(un,Ye(un)),xr=Lt?"next":"prev";let ks;for(;ks=Ko[xr]();)if(!(Ru(x,ks)||Ro(ks.textContent)||((wn=ks.textContent)===null||wn===void 0?void 0:wn.length)===0))return Ot.some(ks);return Ot.none()};if(H&&Wr(re))if(Ro(re.textContent))re=cn(re,!1).getOr(re);else for(re.parentNode!==null&&Fu(x,re.parentNode)&&(re=re.parentNode);re.previousSibling!==null&&(Fu(x,re.previousSibling)||Wr(re.previousSibling));)re=re.previousSibling;if(!H&&Wr(re))if(Ro(re.textContent))re=cn(re,!0).getOr(re);else for(re.parentNode!==null&&Fu(x,re.parentNode)&&(re=re.parentNode);re.nextSibling!==null&&(Fu(x,re.nextSibling)||Wr(re.nextSibling));)re=re.nextSibling;for(;re.parentNode!==X;){const un=re.parentNode;if(Dr(x,re)||/^(TD|TH)$/.test(un.nodeName))return re;re=un}return re},Gr=(x,M,H)=>{const X=[],re=x.dom,Ve=ii(x,M,!0,H),Ye=ii(x,M,!1,H);let cn;const un=[];for(let Lt=Ve;Lt&&(un.push(Lt),Lt!==Ye);Lt=Lt.nextSibling);return uc.each(un,Lt=>{var wn;if(Dr(x,Lt)){X.push(Lt),cn=null;return}if(re.isBlock(Lt)||va(Lt)){va(Lt)&&re.remove(Lt),cn=null;return}const Ko=Lt.nextSibling;if(ya.isBookmarkNode(Lt)&&(_c(Ko)||Dr(x,Ko)||!Ko&&Lt.parentNode===H)){cn=null;return}cn||(cn=re.create("p"),(wn=Lt.parentNode)===null||wn===void 0||wn.insertBefore(cn,Lt),X.push(cn)),cn.appendChild(Lt)}),X},qr=(x,M,H)=>{const X=x.getStyle(M,"list-style-type");let re=H?H["list-style-type"]:"";return re=re===null?"":re,X===re},C1=(x,M)=>{const H=x.selection.getStart(!0),X=ii(x,M,!0,x.getBody());return Ma(An.fromDom(X),An.fromDom(M.commonAncestorContainer))?M.commonAncestorContainer:H},Lu=(x,M,H)=>{const X=x.selection.getRng();let re="LI";const Ve=Bu(x,C1(x,X)),Ye=x.dom;if(Ye.getContentEditable(x.selection.getNode())==="false")return;M=M.toUpperCase(),M==="DL"&&(re="DT");const cn=Oc(X),un=Bs(Gr(x,X,Ve),x.dom.isEditable);uc.each(un,Lt=>{let wn;const Ko=Lt.previousSibling,xr=Lt.parentNode;rl(xr)||(Ko&&_c(Ko)&&Ko.nodeName===M&&qr(Ye,Ko,H)?(wn=Ko,Lt=Ye.rename(Lt,re),Ko.appendChild(Lt)):(wn=Ye.create(M),xr.insertBefore(wn,Lt),wn.appendChild(Lt),Lt=Ye.rename(Lt,re)),Ll(Ye,Lt,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),mc(Ye,wn,H),gl(x.dom,wn))}),x.selection.setRng(Iu(cn))},ys=(x,M)=>_c(x)&&x.nodeName===(M==null?void 0:M.nodeName),ml=(x,M,H)=>{const X=x.getStyle(M,"list-style-type",!0),re=x.getStyle(H,"list-style-type",!0);return X===re},fl=(x,M)=>x.className===M.className,Gi=(x,M,H)=>ys(M,H)&&ml(x,M,H)&&fl(M,H),gl=(x,M)=>{let H,X=M.nextSibling;if(Gi(x,M,X)){const re=X;for(;H=re.firstChild;)M.appendChild(H);x.remove(re)}if(X=M.previousSibling,Gi(x,M,X)){const re=X;for(;H=re.lastChild;)M.insertBefore(H,M.firstChild);x.remove(re)}},To=(x,M,H,X)=>{if(M.nodeName!==H){const re=x.dom.rename(M,H);mc(x.dom,re,X),jr(x,On(H),re)}else mc(x.dom,M,X),jr(x,On(H),M)},Sm=(x,M,H,X)=>{if(M.classList.forEach((re,Ve,Ye)=>{re.startsWith("tox-")&&(Ye.remove(re),Ye.length===0&&M.removeAttribute("class"))}),M.nodeName!==H){const re=x.dom.rename(M,H);mc(x.dom,re,X),jr(x,On(H),re)}else mc(x.dom,M,X),jr(x,On(H),M)},qh=(x,M,H,X,re)=>{const Ve=_c(M);if(Ve&&M.nodeName===X&&!Kr(re)&&!Dd(M))$u(x);else{Lu(x,X,re);const Ye=Oc(x.selection.getRng()),cn=Ve?[M,...H]:H,un=Ve&&Dd(M)?Sm:To;uc.each(cn,Lt=>{un(x,Lt,X,re)}),x.selection.setRng(Iu(Ye))}},Kr=x=>"list-style-type"in x,fc=(x,M,H,X)=>{if(M!==x.getBody())if(M)if(M.nodeName===H&&!Kr(X)&&!Dd(M))$u(x);else{const re=Oc(x.selection.getRng());Dd(M)&&M.classList.forEach((Ye,cn,un)=>{Ye.startsWith("tox-")&&(un.remove(Ye),un.length===0&&M.removeAttribute("class"))}),mc(x.dom,M,X);const Ve=x.dom.rename(M,H);gl(x.dom,Ve),x.selection.setRng(Iu(re)),Lu(x,H,X),jr(x,On(H),Ve)}else Lu(x,H,X),jr(x,On(H),M)},hl=(x,M,H)=>{const X=Il(x);if(ai(x,X))return;const re=Ba(x),Ve=pr(H)?H:{};re.length>0?qh(x,X,re,M,Ve):fc(x,X,M,Ve)},$s=os.DOM,qi=(x,M)=>{const H=M.parentElement;if(H&&H.nodeName==="LI"&&H.firstChild===M){const X=H.previousSibling;X&&X.nodeName==="LI"?(X.appendChild(M),Zr(x,H)&&$s.remove(H)):$s.setStyle(H,"listStyleType","none")}if(_c(H)){const X=H.previousSibling;X&&X.nodeName==="LI"&&X.appendChild(M)}},ur=(x,M)=>{const H=uc.grep(x.select("ol,ul",M));uc.each(H,X=>{qi(x,X)})},Dc=(x,M,H,X)=>{let re=M.startContainer;const Ve=M.startOffset;if(Wr(re)&&(H?Ve<re.data.length:Ve>0))return re;const Ye=x.schema.getNonEmptyElements();Eo(re)&&(re=dn.getNode(re,Ve));const cn=new Xs(re,X);H&&Vi(x.dom,re)&&cn.next();const un=H?cn.next.bind(cn):cn.prev2.bind(cn);for(;re=un();)if(re.nodeName==="LI"&&!re.hasChildNodes()||Ye[re.nodeName]||Wr(re)&&re.data.length>0)return re;return null},Ho=(x,M)=>{const H=M.childNodes;return H.length===1&&!_c(H[0])&&x.isBlock(H[0])},ss=x=>Ot.from(x).map(An.fromDom).filter(Et).exists(M=>si(M)&&!bs(["details"],In(M))),wm=(x,M)=>{Ho(x,M)&&ss(M.firstChild)&&x.remove(M.firstChild,!0)},$a=(x,M,H)=>{let X;const re=Ho(x,H)?H.firstChild:H;if(wm(x,M),!Zr(x,M,!0))for(;X=M.firstChild;)re.appendChild(X)},ro=(x,M,H)=>{let X;const re=M.parentNode;if(!gm(x,M)||!gm(x,H))return;_c(H.lastChild)&&(X=H.lastChild),re===H.lastChild&&va(re.previousSibling)&&x.remove(re.previousSibling);const Ve=H.lastChild;Ve&&va(Ve)&&M.hasChildNodes()&&x.remove(Ve),Zr(x,H,!0)&&ba(An.fromDom(H)),$a(x,M,H),X&&H.appendChild(X);const cn=Us(An.fromDom(H),An.fromDom(M))?x.getParents(M,_c,H):[];x.remove(M),le(cn,un=>{Zr(x,un)&&un!==x.getRoot()&&x.remove(un)})},pl=(x,M,H)=>{ba(An.fromDom(H)),ro(x.dom,M,H),x.selection.setCursorLocation(H,0)},bl=(x,M,H,X)=>{const re=x.dom;if(re.isEmpty(X))pl(x,H,X);else{const Ve=Oc(M);ro(re,H,X),x.selection.setRng(Iu(Ve))}},vl=(x,M,H,X)=>{const re=Oc(M);ro(x.dom,H,X);const Ve=Iu(re);x.selection.setRng(Ve)},Is=(x,M)=>{const H=x.dom,X=x.selection,re=X.getStart(),Ve=lo(x,re),Ye=H.getParent(X.getStart(),"LI",Ve);if(Ye){const cn=Ye.parentElement;if(cn===x.getBody()&&Zr(H,cn))return!0;const un=ls(X.getRng()),Lt=H.getParent(Dc(x,un,M,Ve),"LI",Ve),wn=Lt&&(M?H.isChildOf(Ye,Lt):H.isChildOf(Lt,Ye));if(Lt&&Lt!==Ye&&!wn)return x.undoManager.transact(()=>{M?bl(x,un,Lt,Ye):cl(Ye)?wr(x):vl(x,un,Ye,Lt)}),!0;if(wn&&!M&&Lt!==Ye){const Ko=un.commonAncestorContainer.parentElement;return!Ko||H.isChildOf(Lt,Ko)?!1:(x.undoManager.transact(()=>{const xr=Oc(un);$a(H,Ko,Lt),Ko.remove();const ks=Iu(xr);x.selection.setRng(ks)}),!0)}else if(!Lt&&!M&&un.startOffset===0&&un.endOffset===0)return x.undoManager.transact(()=>{$u(x)}),!0}return!1},Hu=(x,M,H)=>{const X=x.getParent(M.parentNode,x.isBlock,H);x.remove(M),X&&x.isEmpty(X)&&x.remove(X)},Ag=(x,M)=>{const H=x.dom,X=x.selection.getStart(),re=lo(x,X),Ve=H.getParent(X,H.isBlock,re);if(Ve&&H.isEmpty(Ve,void 0,{checkRootAsContent:!0})){const Ye=ls(x.selection.getRng()),cn=Dc(x,Ye,M,re),un=H.getParent(cn,"LI",re);if(cn&&un){const Lt=ks=>bs(["td","th","caption"],In(ks)),wn=ks=>ks.dom===re,Ko=Sr(An.fromDom(un),Lt,wn),xr=Sr(An.fromDom(Ye.startContainer),Lt,wn);return Li(Ko,xr,Ks)?(x.undoManager.transact(()=>{const ks=un.parentNode;Hu(H,Ve,re),gl(H,ks),x.selection.select(cn,!0),x.selection.collapse(M)}),!0):!1}}return!1},Kh=(x,M)=>Is(x,M)||Ag(x,M),jc=x=>{const M=x.selection.getStart(),H=lo(x,M);return x.dom.getParent(M,"LI,DT,DD",H)||Pa(x).length>0},Yh=x=>jc(x)?(x.undoManager.transact(()=>{let M=!0;const H=()=>M=!1;x.on("input",H),x.execCommand("Delete"),x.off("input",H),M&&x.dispatch("input"),ur(x.dom,x.getBody())}),!0):!1,vf=(x,M)=>{const H=x.selection;return!ai(x,H.getNode())&&(H.isCollapsed()?Kh(x,M):Yh(x))},Xh=x=>{x.on("ExecCommand",M=>{const H=M.command.toLowerCase();(H==="delete"||H==="forwarddelete")&&jc(x)&&ur(x.dom,x.getBody())}),x.on("keydown",M=>{M.keyCode===ic.BACKSPACE?vf(x,!1)&&M.preventDefault():M.keyCode===ic.DELETE&&vf(x,!0)&&M.preventDefault()})},Wt=x=>({backspaceDelete:M=>{vf(x,M)}}),Hl=(x,M)=>{const H=Il(x);H===null||ai(x,H)||x.undoManager.transact(()=>{pr(M.styles)&&x.dom.setStyles(H,M.styles),pr(M.attrs)&&Pe(M.attrs,(X,re)=>x.dom.setAttrib(H,re,X))})},Js=x=>{const M=Xt(Da(x).split("")),H=De(M,(X,re)=>{const Ve=X.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,re)*Ve});return wt(H,(X,re)=>X+re,0)},Ws=x=>{if(x--,x<0)return"";{const M=x%26,H=Math.floor(x/26),X=Ws(H),re=String.fromCharCode(65+M);return X+re}},Og=x=>/^[A-Z]+$/.test(x),Ln=x=>/^[a-z]+$/.test(x),Nd=x=>/^[0-9]+$/.test(x),Ia=x=>Nd(x)?2:Og(x)?0:Ln(x)?1:Rt(x)?3:4,yl=x=>{switch(Ia(x)){case 2:return Ot.some({listStyleType:Ot.none(),start:x});case 0:return Ot.some({listStyleType:Ot.some("upper-alpha"),start:Js(x).toString()});case 1:return Ot.some({listStyleType:Ot.some("lower-alpha"),start:Js(x).toString()});case 3:return Ot.some({listStyleType:Ot.none(),start:""});case 4:return Ot.none()}},Rr=x=>{const M=parseInt(x.start,10);return xo(x.listStyleType,"upper-alpha")?Ws(M):xo(x.listStyleType,"lower-alpha")?Ws(M).toLowerCase():x.start},Yr=x=>{const M=Il(x);!sl(M)||ai(x,M)||x.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Rr({start:x.dom.getAttrib(M,"start","1"),listStyleType:Ot.from(x.dom.getStyle(M,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:H=>{const X=H.getData();yl(X.start).each(re=>{x.execCommand("mceListUpdate",!1,{attrs:{start:re.start==="1"?"":re.start},styles:{"list-style-type":re.listStyleType.getOr("")}})}),H.close()}})},zu=(x,M)=>()=>{const H=Il(x);return Ns(H)&&H.nodeName===M},Ts=x=>{x.addCommand("mceListProps",()=>{Yr(x)})},xm=x=>{x.on("BeforeExecCommand",M=>{const H=M.command.toLowerCase();H==="indent"?Ac(x):H==="outdent"&&wr(x)}),x.addCommand("InsertUnorderedList",(M,H)=>{hl(x,"UL",H)}),x.addCommand("InsertOrderedList",(M,H)=>{hl(x,"OL",H)}),x.addCommand("InsertDefinitionList",(M,H)=>{hl(x,"DL",H)}),x.addCommand("RemoveList",()=>{$u(x)}),Ts(x),x.addCommand("mceListUpdate",(M,H)=>{pr(H)&&Hl(x,H)}),x.addQueryStateHandler("InsertUnorderedList",zu(x,"UL")),x.addQueryStateHandler("InsertOrderedList",zu(x,"OL")),x.addQueryStateHandler("InsertDefinitionList",zu(x,"DL"))};var Fa=tinymce.util.Tools.resolve("tinymce.html.Node");const ui=x=>x.type===3,Em=x=>x.length===0,dr=x=>{const M=(re,Ve)=>{const Ye=Fa.create("li");le(re,cn=>Ye.append(cn)),Ve?x.insert(Ye,Ve,!0):x.append(Ye)},H=(re,Ve)=>ui(Ve)?[...re,Ve]:!Em(re)&&!ui(Ve)?(M(re,Ve),[]):re,X=wt(x.children(),H,[]);Em(X)||M(X)},Gc=x=>{x.on("PreInit",()=>{const{parser:M}=x;M.addNodeFilter("ul,ol",H=>le(H,dr))})},Cs=x=>{x.on("keydown",M=>{M.keyCode!==ic.TAB||ic.metaKeyPressed(M)||x.undoManager.transact(()=>{(M.shiftKey?wr(x):Ac(x))&&M.preventDefault()})})},gc=x=>{Je(x)&&Cs(x),Xh(x)},zl=(x,M)=>H=>{const X=re=>{H.setActive(hf(re.parents,M)),H.setEnabled(!ai(x,re.element)&&x.selection.isEditable())};return H.setEnabled(x.selection.isEditable()),ll(x,X)},Zs=x=>{const M=H=>()=>x.execCommand(H);x.hasPlugin("advlist")||(x.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:M("InsertOrderedList"),onSetup:zl(x,"OL")}),x.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:M("InsertUnorderedList"),onSetup:zl(x,"UL")}))},Dg=(x,M)=>H=>ll(x,re=>H.setEnabled(hf(re.parents,M)&&!ai(x,re.element))),on=x=>{const M={text:"List properties...",icon:"ordered-list",onAction:()=>x.execCommand("mceListProps"),onSetup:Dg(x,"OL")};x.ui.registry.addMenuItem("listprops",M),x.ui.registry.addContextMenu("lists",{update:H=>{const X=Il(x,H);return sl(X)?["listprops"]:[]}})};var Qs=()=>{um.add("lists",x=>(Cg(x),Gc(x),x.hasPlugin("rtc",!0)?Ts(x):(gc(x),xm(x)),Zs(x),on(x),Wt(x)))};Qs()}()),uK}var mK;function cY(){return mK||(mK=1,rY()),iK}cY();var fK={},gK={},hK;function aY(){return hK||(hK=1,function(){var um=tinymce.util.Tools.resolve("tinymce.PluginManager");const Eu=(V,J,fe)=>{var Re;return fe(V,J.prototype)?!0:((Re=V.constructor)===null||Re===void 0?void 0:Re.name)===J.name},dm=V=>{const J=typeof V;return V===null?"null":J==="object"&&Array.isArray(V)?"array":J==="object"&&Eu(V,String,(fe,Re)=>Re.isPrototypeOf(fe))?"string":J},ca=V=>J=>dm(J)===V,aa=V=>J=>typeof J===V,Aa=V=>J=>V===J,pr=ca("string"),rn=ca("object"),Vs=ca("array"),ti=Aa(null),Ns=aa("boolean"),zc=V=>V==null,ar=V=>!zc(V),Lr=aa("function"),el=(V,J)=>{if(Vs(V)){for(let fe=0,Re=V.length;fe<Re;++fe)if(!J(V[fe]))return!1;return!0}return!1},Po=()=>{},St=V=>()=>V,Vc=(V,J)=>V===J;class en{constructor(J,fe){this.tag=J,this.value=fe}static some(J){return new en(!0,J)}static none(){return en.singletonNone}fold(J,fe){return this.tag?fe(this.value):J()}isSome(){return this.tag}isNone(){return!this.tag}map(J){return this.tag?en.some(J(this.value)):en.none()}bind(J){return this.tag?J(this.value):en.none()}exists(J){return this.tag&&J(this.value)}forall(J){return!this.tag||J(this.value)}filter(J){return!this.tag||J(this.value)?this:en.none()}getOr(J){return this.tag?this.value:J}or(J){return this.tag?this:J}getOrThunk(J){return this.tag?this.value:J()}orThunk(J){return this.tag?this:J()}getOrDie(J){if(this.tag)return this.value;throw new Error(J??"Called getOrDie on None")}static from(J){return ar(J)?en.some(J):en.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(J){this.tag&&J(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}en.singletonNone=new en(!1);const ae=Array.prototype.indexOf,Ot=Array.prototype.push,Oa=(V,J)=>ae.call(V,J),$n=(V,J)=>Oa(V,J)>-1,te=(V,J)=>{const fe=V.length,Re=new Array(fe);for(let Ke=0;Ke<fe;Ke++){const bt=V[Ke];Re[Ke]=J(bt,Ke)}return Re},Sn=(V,J)=>{for(let fe=0,Re=V.length;fe<Re;fe++){const Ke=V[fe];J(Ke,fe)}},bs=(V,J,fe)=>(Sn(V,(Re,Ke)=>{fe=J(fe,Re,Ke)}),fe),Rn=V=>{const J=[];for(let fe=0,Re=V.length;fe<Re;++fe){if(!Vs(V[fe]))throw new Error("Arr.flatten item "+fe+" was not an array, input: "+V);Ot.apply(J,V[fe])}return J},De=(V,J)=>Rn(te(V,J)),le=(V,J)=>{for(let fe=0;fe<V.length;fe++){const Re=J(V[fe],fe);if(Re.isSome())return Re}return en.none()},Bs=Object.keys,bn=Object.hasOwnProperty,wt=(V,J)=>{const fe=Bs(V);for(let Re=0,Ke=fe.length;Re<Ke;Re++){const bt=fe[Re],yn=V[bt];J(yn,bt)}},A=V=>(J,fe)=>{V[fe]=J},Xo=(V,J,fe,Re)=>{wt(V,(Ke,bt)=>{(J(Ke,bt)?fe:Re)(Ke,bt)})},lt=(V,J)=>{const fe={};return Xo(V,J,A(fe),Po),fe},Jo=(V,J)=>bn.call(V,J),Xt=(V,J)=>Jo(V,J)&&V[J]!==void 0&&V[J]!==null,ze=V=>{let J=V;return{get:()=>J,set:Ke=>{J=Ke}}},bo=(V,J,fe=Vc)=>V.exists(Re=>fe(Re,J)),br=V=>{const J=[],fe=Re=>{J.push(Re)};for(let Re=0;Re<V.length;Re++)V[Re].each(fe);return J},go=(V,J)=>V?en.some(J):en.none(),vr=V=>{const J=ze(en.none()),fe=()=>J.get().each(V);return{clear:()=>{fe(),J.set(en.none())},isSet:()=>J.get().isSome(),get:()=>J.get(),set:Cn=>{fe(),J.set(en.some(Cn))}}},Pe=()=>{const V=vr(Po);return{...V,on:fe=>V.get().each(fe)}},ft=(V,J)=>V.substring(J),L=(V,J,fe)=>J===""||V.length>=J.length&&V.substr(fe,fe+J.length)===J,ni=(V,J)=>ho(V,J)?ft(V,J.length):V,ho=(V,J)=>L(V,J,0),ao=V=>J=>J.options.get(V),xo=V=>{const J=V.options.register;J("link_assume_external_targets",{processor:fe=>{const Re=pr(fe)||Ns(fe);return Re?fe===!0?{value:1,valid:Re}:fe==="http"||fe==="https"?{value:fe,valid:Re}:{value:0,valid:Re}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),J("link_context_toolbar",{processor:"boolean",default:!1}),J("link_list",{processor:fe=>pr(fe)||Lr(fe)||el(fe,rn)}),J("link_default_target",{processor:"string"}),J("link_default_protocol",{processor:"string",default:"https"}),J("link_target_list",{processor:fe=>Ns(fe)||el(fe,rn),default:!0}),J("link_rel_list",{processor:"object[]",default:[]}),J("link_class_list",{processor:"object[]",default:[]}),J("link_title",{processor:"boolean",default:!0}),J("allow_unsafe_link_target",{processor:"boolean",default:!1}),J("link_quicklink",{processor:"boolean",default:!1}),J("link_attributes_postprocess",{processor:"function"})},Li=ao("link_assume_external_targets"),Jt=ao("link_context_toolbar"),vo=ao("link_list"),qt=ao("link_default_target"),_e=ao("link_default_protocol"),Da=ao("link_target_list"),gs=ao("link_rel_list"),Rt=ao("link_class_list"),Ar=ao("link_title"),Ro=ao("allow_unsafe_link_target"),Tu=ao("link_quicklink"),ts=ao("link_attributes_postprocess");var Hr=tinymce.util.Tools.resolve("tinymce.util.URI"),Bl=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),zr=tinymce.util.Tools.resolve("tinymce.util.Tools");const An=V=>ar(V)&&V.nodeName.toLowerCase()==="a",$o=V=>An(V)&&!!Io(V),ku=(V,J)=>{if(V.collapsed)return[];{const fe=V.cloneContents(),Re=fe.firstChild,Ke=new Bl(Re,fe),bt=[];let yn=Re;do J(yn)&&bt.push(yn);while(yn=Ke.next());return bt}},vs=V=>/^\w+:/i.test(V),Io=V=>{var J,fe;return(fe=(J=V.getAttribute("data-mce-href"))!==null&&J!==void 0?J:V.getAttribute("href"))!==null&&fe!==void 0?fe:""},tl=(V,J)=>{const fe=["noopener"],Re=V?V.split(/\s+/):[],Ke=Yn=>zr.trim(Yn.sort().join(" ")),bt=Yn=>(Yn=yn(Yn),Yn.length>0?Yn.concat(fe):fe),yn=Yn=>Yn.filter(ls=>zr.inArray(fe,ls)===-1),Cn=J?bt(Re):yn(Re);return Cn.length>0?Ke(Cn):""},Ks=V=>V.replace(/\uFEFF/g,""),Us=(V,J)=>(J=J||Pl(V.selection.getRng())[0]||V.selection.getNode(),ac(J)?en.from(V.dom.select("a[href]",J)[0]):en.from(V.dom.getParent(J,"a[href]"))),lr=(V,J)=>Us(V,J).isSome(),la=(V,J)=>{const fe=J.fold(()=>V.getContent({format:"text"}),Re=>Re.innerText||Re.textContent||"");return Ks(fe)},Pl=V=>ku(V,$o),yr=V=>zr.grep(V,$o),_u=V=>yr(V).length>0,at=V=>Pl(V).length>0,In=V=>{const J=V.schema.getTextInlineElements(),fe=bt=>bt.nodeType===1&&!An(bt)&&!Jo(J,bt.nodeName.toLowerCase());if(Us(V).exists(bt=>bt.hasAttribute("data-mce-block")))return!1;const Ke=V.selection.getRng();return Ke.collapsed?!0:ku(Ke,fe).length===0},ac=V=>ar(V)&&V.nodeName==="FIGURE"&&/\bimage\b/i.test(V.className),xd=V=>bs(["title","rel","class","target"],(fe,Re)=>(V[Re].each(Ke=>{fe[Re]=Ke.length>0?Ke:null}),fe),{href:V.href}),Uc=(V,J)=>(J==="http"||J==="https")&&!vs(V)?J+"://"+V:V,Et=(V,J)=>{const fe={...J};if(gs(V).length===0&&!Ro(V)){const Re=tl(fe.rel,fe.target==="_blank");fe.rel=Re||null}return en.from(fe.target).isNone()&&Da(V)===!1&&(fe.target=qt(V)),fe.href=Uc(fe.href,Li(V)),fe},nl=(V,J,fe,Re)=>{fe.each(bt=>{Jo(J,"innerText")?J.innerText=bt:J.textContent=bt}),V.dom.setAttribs(J,Re);const Ke=V.dom.createRng();Ke.setStartAfter(J),Ke.setEndAfter(J),V.selection.setRng(Ke)},Mo=(V,J,fe,Re)=>{const Ke=V.dom;ac(J)?mm(Ke,J,Re):fe.fold(()=>{V.execCommand("mceInsertLink",!1,Re);const bt=V.selection.getEnd(),yn=Ke.createRng();yn.setStartAfter(bt),yn.setEndAfter(bt),V.selection.setRng(yn)},bt=>{V.insertContent(Ke.createHTML("a",Re,Ke.encode(bt)))})},df=(V,J,fe)=>{const Re=V.selection.getNode(),Ke=Us(V,Re),bt=Et(V,xd(fe)),yn=ts(V);ar(yn)&&yn(bt),V.undoManager.transact(()=>{fe.href===J.href&&J.attach(),Ke.fold(()=>{Mo(V,Re,fe.text,bt)},Cn=>{V.focus(),nl(V,Cn,fe.text,bt)})})},yo=V=>{const J=V.dom,fe=V.selection,Re=fe.getBookmark(),Ke=fe.getRng().cloneRange(),bt=J.getParent(Ke.startContainer,"a[href]",V.getBody()),yn=J.getParent(Ke.endContainer,"a[href]",V.getBody());bt&&Ke.setStartBefore(bt),yn&&Ke.setEndAfter(yn),fe.setRng(Ke),V.execCommand("unlink"),fe.moveToBookmark(Re)},Kt=V=>{V.undoManager.transact(()=>{const J=V.selection.getNode();ac(J)?ns(V,J):yo(V),V.focus()})},$l=V=>{const{class:J,href:fe,rel:Re,target:Ke,text:bt,title:yn}=V;return lt({class:J.getOrNull(),href:fe,rel:Re.getOrNull(),target:Ke.getOrNull(),text:bt.getOrNull(),title:yn.getOrNull()},(Cn,Yn)=>ti(Cn)===!1)},mf=(V,J)=>{const fe=V.options.get,Re={allow_html_data_urls:fe("allow_html_data_urls"),allow_script_urls:fe("allow_script_urls"),allow_svg_data_urls:fe("allow_svg_data_urls")},Ke=J.href;return{...J,href:Hr.isDomSafe(Ke,"a",Re)?Ke:""}},_o=(V,J,fe)=>{const Re=mf(V,fe);V.hasPlugin("rtc",!0)?V.execCommand("createlink",!1,$l(Re)):df(V,J,Re)},Vr=V=>{V.hasPlugin("rtc",!0)?V.execCommand("unlink"):Kt(V)},ns=(V,J)=>{var fe;const Re=V.dom.select("img",J)[0];if(Re){const Ke=V.dom.getParents(Re,"a[href]",J)[0];Ke&&((fe=Ke.parentNode)===null||fe===void 0||fe.insertBefore(Re,Ke),V.dom.remove(Ke))}},mm=(V,J,fe)=>{var Re;const Ke=V.select("img",J)[0];if(Ke){const bt=V.create("a",fe);(Re=Ke.parentNode)===null||Re===void 0||Re.insertBefore(bt,Ke),bt.appendChild(Ke)}},Qt=V=>pr(V.value)?V.value:"",pa=V=>pr(V.text)?V.text:pr(V.title)?V.title:"",Fo=(V,J)=>{const fe=[];return zr.each(V,Re=>{const Ke=pa(Re);if(Re.menu!==void 0){const bt=Fo(Re.menu,J);fe.push({text:Ke,items:bt})}else{const bt=J(Re);fe.push({text:Ke,value:bt})}}),fe},Ed=(V=Qt)=>J=>en.from(J).map(fe=>Fo(fe,V)),qo={sanitize:V=>Ed(Qt)(V),sanitizeWith:Ed,createUi:(V,J)=>fe=>({name:V,type:"listbox",label:J,items:fe}),getValue:Qt},lc=V=>Xt(V,"items"),Au=(V,J)=>le(J,fe=>lc(fe)?Au(V,fe.items):go(fe.value===V,fe)),kd=(V,J,fe,Re)=>{const Ke=Re[J],bt=V.length>0;return Ke!==void 0?Au(Ke,fe).map(yn=>({url:{value:yn.value,meta:{text:bt?V:yn.text,attach:Po}},text:bt?V:yn.text})):en.none()},ol=(V,J)=>J==="link"?V.link:J==="anchor"?V.anchor:en.none(),_d={init:(V,J)=>{const fe={text:V.text,title:V.title},Re=Yn=>{var ls;return go(fe.title.length<=0,en.from((ls=Yn.meta)===null||ls===void 0?void 0:ls.title).getOr(""))},Ke=Yn=>{var ls;return go(fe.text.length<=0,en.from((ls=Yn.meta)===null||ls===void 0?void 0:ls.text).getOr(Yn.value))},bt=Yn=>{const ls=Ke(Yn.url),Qo=Re(Yn.url);return ls.isSome()||Qo.isSome()?en.some({...ls.map(al=>({text:al})).getOr({}),...Qo.map(al=>({title:al})).getOr({})}):en.none()},yn=(Yn,ls)=>{const Qo=ol(J,ls).getOr([]);return kd(fe.text,ls,Qo,Yn)};return{onChange:(Yn,ls)=>{const Qo=ls.name;return Qo==="url"?bt(Yn()):$n(["anchor","link"],Qo)?yn(Yn(),Qo):((Qo==="text"||Qo==="title")&&(fe[Qo]=Yn()[Qo]),en.none())}}},getDelta:kd};var ba=tinymce.util.Tools.resolve("tinymce.util.Delay");const nt=(V,J,fe)=>{const Re=V.selection.getRng();ba.setEditorTimeout(V,()=>{V.windowManager.confirm(J,Ke=>{V.selection.setRng(Re),fe(Ke)})})},pg=V=>{const J=V.href;return J.indexOf("@")>0&&J.indexOf("/")===-1&&J.indexOf("mailto:")===-1?en.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:Re=>({...Re,href:"mailto:"+J})}):en.none()},Ys=(V,J)=>fe=>{const Re=fe.href;return V===1&&!vs(Re)||V===0&&/^\s*www(\.|\d\.)/i.test(Re)?en.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${J}:// prefix?`,preprocess:bt=>({...bt,href:J+"://"+Re})}):en.none()},uo={preprocess:(V,J)=>le([pg,Ys(Li(V),_e(V))],fe=>fe(J)).fold(()=>Promise.resolve(J),fe=>new Promise(Re=>{nt(V,fe.message,Ke=>{Re(Ke?fe.preprocess(J):J)})}))},Wc={getAnchors:V=>{const J=V.dom.select("a:not([href])"),fe=De(J,Re=>{const Ke=Re.name||Re.id;return Ke?[{text:Ke,value:"#"+Ke}]:[]});return fe.length>0?en.some([{text:"None",value:""}].concat(fe)):en.none()}},oi={getClasses:V=>{const J=Rt(V);return J.length>0?qo.sanitize(J):en.none()}},fm=V=>{try{return en.some(JSON.parse(V))}catch{return en.none()}},Or={getLinks:V=>{const J=Re=>V.convertURL(Re.value||Re.url||"","href"),fe=vo(V);return new Promise(Re=>{pr(fe)?fetch(fe).then(Ke=>Ke.ok?Ke.text().then(fm):Promise.reject()).then(Re,()=>Re(en.none())):Lr(fe)?fe(Ke=>Re(en.some(Ke))):Re(en.from(fe))}).then(Re=>Re.bind(qo.sanitizeWith(J)).map(Ke=>Ke.length>0?[{text:"None",value:""}].concat(Ke):Ke))}},Sr={getRels:(V,J)=>{const fe=gs(V);if(fe.length>0){const Re=bo(J,"_blank"),Ke=Ro(V)===!1,bt=Cn=>tl(qo.getValue(Cn),Re);return(Ke?qo.sanitizeWith(bt):qo.sanitize)(fe)}return en.none()}},ir=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Hi={getTargets:V=>{const J=Da(V);return Vs(J)?qo.sanitize(J).orThunk(()=>en.some(ir)):J===!1?en.none():en.some(ir)}},si=(V,J,fe)=>{const Re=V.getAttrib(J,fe);return Re!==null&&Re.length>0?en.some(Re):en.none()},ia=(V,J)=>{const fe=V.dom,Ke=In(V)?en.some(la(V.selection,J)):en.none(),bt=J.bind(Qo=>en.from(fe.getAttrib(Qo,"href"))),yn=J.bind(Qo=>en.from(fe.getAttrib(Qo,"target"))),Cn=J.bind(Qo=>si(fe,Qo,"rel")),Yn=J.bind(Qo=>si(fe,Qo,"class")),ls=J.bind(Qo=>si(fe,Qo,"title"));return{url:bt,text:Ke,title:ls,target:yn,rel:Cn,linkClass:Yn}},Ma={collect:(V,J)=>Or.getLinks(V).then(fe=>{const Re=ia(V,J);return{anchor:Re,catalogs:{targets:Hi.getTargets(V),rels:Sr.getRels(V,Re.target),classes:oi.getClasses(V),anchor:Wc.getAnchors(V),link:fe},optNode:J,flags:{titleEnabled:Ar(V)}}})},dn=(V,J)=>fe=>{const Re=fe.getData();if(!Re.url.value){Vr(V),fe.close();return}const Ke=Cn=>en.from(Re[Cn]).filter(Yn=>!bo(J.anchor[Cn],Yn)),bt={href:Re.url.value,text:Ke("text"),target:Ke("target"),rel:Ke("rel"),class:Ke("linkClass"),title:Ke("title")},yn={href:Re.url.value,attach:Re.url.meta!==void 0&&Re.url.meta.attach?Re.url.meta.attach:Po};uo.preprocess(V,bt).then(Cn=>{_o(V,yn,Cn)}),fe.close()},Xs=V=>{const J=Us(V);return Ma.collect(V,J)},ic=(V,J)=>{const fe=V.anchor,Re=fe.url.getOr("");return{url:{value:Re,meta:{original:{value:Re}}},text:fe.text.getOr(""),title:fe.title.getOr(""),anchor:Re,link:Re,rel:fe.rel.getOr(""),target:fe.target.or(J).getOr(""),linkClass:fe.linkClass.getOr("")}},os=(V,J,fe)=>{const Re=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],Ke=V.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),bt=V.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],yn=en.from(qt(fe)),Cn=ic(V,yn),Yn=V.catalogs,ls=_d.init(Cn,Yn);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:Rn([Re,Ke,bt,br([Yn.anchor.map(qo.createUi("anchor","Anchors")),Yn.rels.map(qo.createUi("rel","Rel")),Yn.targets.map(qo.createUi("target","Open link in...")),Yn.link.map(qo.createUi("link","Link list")),Yn.classes.map(qo.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Cn,onChange:(al,{name:Il})=>{ls.onChange(al.getData,{name:Il}).each(hm=>{al.setData(hm)})},onSubmit:J}},uc=V=>{Xs(V).then(fe=>{const Re=dn(V,fe);return os(fe,Re,V)}).then(fe=>{V.windowManager.open(fe)})},zi=V=>{V.addCommand("mceLink",(J,fe)=>{(fe==null?void 0:fe.dialog)===!0||!Tu(V)?uc(V):V.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},No=V=>{V.addShortcut("Meta+K","",()=>{V.execCommand("mceLink")})};var Wr=tinymce.util.Tools.resolve("tinymce.util.VK");const Eo=(V,J)=>{document.body.appendChild(V),V.dispatchEvent(J),document.body.removeChild(V)},_c=V=>{const J=document.createElement("a");J.target="_blank",J.href=V,J.rel="noreferrer noopener";const fe=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(fe),Eo(J,fe)},ct=V=>V.altKey===!0&&V.shiftKey===!1&&V.ctrlKey===!1&&V.metaKey===!1,sl=(V,J)=>{if(J){const fe=Io(J);if(/^#/.test(fe)){const Re=V.dom.select(`${fe},[name="${ni(fe,"#")}"]`);Re.length&&V.selection.scrollIntoView(Re[0],!0)}else _c(J.href)}},rl=V=>{const J=V.selection.getRng(),fe=J.startContainer;return $o(fe)&&J.startContainer===J.endContainer&&V.dom.select("img",fe).length===1},Na=(V,J)=>{const fe=yr(V.dom.getParents(J));return go(fe.length===1,fe[0])},yg=V=>{const J=Pl(V.selection.getRng());return go(J.length>0,J[0]).or(Na(V,V.selection.getNode()))},va=V=>V.selection.isCollapsed()||rl(V)?Na(V,V.selection.getStart()):yg(V),cl=V=>{const J=Pe(),fe=()=>J.get().or(va(V)),Re=()=>fe().each(Ke=>sl(V,Ke));return V.on("contextmenu",Ke=>{Na(V,Ke.target).each(J.set)}),V.on("SelectionChange",()=>{J.isSet()||va(V).each(J.set)}),V.on("click",Ke=>{J.clear();const bt=yr(V.dom.getParents(Ke.target));bt.length===1&&Wr.metaKeyPressed(Ke)&&(Ke.preventDefault(),sl(V,bt[0]))}),V.on("keydown",Ke=>{J.clear(),!Ke.isDefaultPrevented()&&Ke.keyCode===13&&ct(Ke)&&fe().each(bt=>{Ke.preventDefault(),sl(V,bt)})}),{gotoSelectedLink:Re}},Dr=V=>()=>{V.execCommand("mceLink",!1,{dialog:!0})},Du=(V,J)=>(V.on("NodeChange",J),()=>V.off("NodeChange",J)),Ru=V=>J=>{const fe=()=>{J.setActive(!V.mode.isReadOnly()&&lr(V,V.selection.getNode())),J.setEnabled(V.selection.isEditable())};return fe(),Du(V,fe)},Vi=V=>J=>{const fe=()=>{J.setEnabled(V.selection.isEditable())};return fe(),Du(V,fe)},Zr=V=>J=>{const fe=bt=>_u(bt)||at(V.selection.getRng()),Re=V.dom.getParents(V.selection.getStart()),Ke=bt=>{J.setEnabled(fe(bt)&&V.selection.isEditable())};return Ke(Re),Du(V,bt=>Ke(bt.parents))},gm=(V,J)=>{V.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:Dr(V),onSetup:Ru(V)}),V.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:J.gotoSelectedLink,onSetup:Zr(V)}),V.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>Vr(V),onSetup:Zr(V)})},ri=(V,J)=>{V.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:J.gotoSelectedLink,onSetup:Zr(V)}),V.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Dr(V),onSetup:Vi(V)}),V.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>Vr(V),onSetup:Zr(V)})},Cg=V=>{const J="link unlink openlink",fe="link";V.ui.registry.addContextMenu("link",{update:Re=>V.dom.isEditable(Re)?_u(V.dom.getParents(Re,"a"))?J:fe:""})},Je=(V,J)=>{const fe=bt=>{bt.selection.collapse(!1)},Re=bt=>{const yn=V.selection.getNode();return bt.setEnabled(lr(V,yn)&&V.selection.isEditable()),Po},Ke=bt=>{const yn=Us(V),Cn=In(V);if(yn.isNone()&&Cn){const Yn=la(V.selection,yn);return go(Yn.length===0,bt)}else return en.none()};V.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ru(V)},label:"Link",predicate:bt=>Jt(V)&&lr(V,bt),initValue:()=>Us(V).fold(St(""),Io),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:bt=>{const yn=V.selection.getNode();return bt.setActive(lr(V,yn)),Ru(V)(bt)},onAction:bt=>{const yn=bt.getValue(),Cn=Ke(yn);_o(V,{href:yn,attach:Po},{href:yn,text:Cn,title:en.none(),rel:en.none(),target:en.from(qt(V)),class:en.none()}),fe(V),bt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:Re,onAction:bt=>{Vr(V),bt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:Re,onAction:bt=>{J.gotoSelectedLink(),bt.hide()}}]})},Mu=V=>{const J=cl(V);gm(V,J),ri(V,J),Cg(V),Je(V,J)};var Ad=()=>{um.add("link",V=>{xo(V),zi(V),Mu(V),No(V)})};Ad()}()),gK}var pK;function lY(){return pK||(pK=1,aY()),fK}lY();
