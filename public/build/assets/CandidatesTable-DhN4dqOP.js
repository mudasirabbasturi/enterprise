import{C as g,r as d,j as a,T as u,S as j}from"./app-BNvUUmEl.js";import{A as x,g as C,d as _}from"./AgGridConfig-DKTRhQwD.js";import{R as N}from"./EyeOutlined-DiEETj_p.js";import{R as E}from"./EditOutlined-D08rt_V1.js";import{P as R}from"./index-CMRs0_Xi.js";import{R as T}from"./DeleteOutlined-DGkp8rPa.js";import"./ExclamationCircleFilled-BCKDqmzc.js";import"./useLocale-DhOjA_vR.js";const y=({candidates:c,showDrawer:s})=>{const f=g(),[p,b]=d.useState([]),[m,L]=d.useState([{headerName:"Name",headerTooltip:"Candiate Name",field:"name",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,pinned:"left",cellRenderer:e=>{var t,r;return(t=e.data)!=null&&t.name?(r=e.data)==null?void 0:r.name:"⭕❌❌🚫"}},{headerName:"CV/Resume",field:"media",width:200,filter:!1,sortable:!1,editable:!1,cellRenderer:e=>{var l,n;const r=(((n=(l=e.data.media)==null?void 0:l.filter(o=>o.category==="cv"))==null?void 0:n.sort((o,i)=>new Date(i.created_at)-new Date(o.created_at)))||[])[0];return r?a.jsx("a",{href:`/storage/${r.file_path}`,target:"_blank",rel:"noopener noreferrer",className:"d-inline-block",children:"Download CV"}):a.jsx(a.Fragment,{children:"No CV"})}},{headerName:"Job Letter",field:"media",filter:!1,sortable:!1,editable:!1,cellRenderer:e=>{var l,n;const r=(((n=(l=e.data.media)==null?void 0:l.filter(o=>o.category==="job_letter"))==null?void 0:n.sort((o,i)=>new Date(i.created_at)-new Date(o.created_at)))||[])[0];return r?a.jsxs("div",{className:"d-flex",children:[a.jsx("a",{href:`/storage/${r.file_path}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-info me-1 text-white",children:"View Letter"}),a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>s("GenerateJobLetter",e.data),children:"Re Generate"})]}):a.jsxs(a.Fragment,{children:["❌❌"," ",a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>s("GenerateJobLetter",e.data),children:"Generate"})]})}},{headerName:"Email",headerTooltip:"Candiate Email",field:"email",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:e=>{var t,r;return(t=e.data)!=null&&t.email?(r=e.data)==null?void 0:r.email:"⭕❌❌🚫"}},{headerName:"Phone",headerTooltip:"Candiate Phone",field:"phone",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:e=>{var t,r;return(t=e.data)!=null&&t.phone?(r=e.data)==null?void 0:r.phone:"⭕❌❌🚫"}},{headerName:"Position Applied",headerTooltip:"Candiate To Position Applied",field:"position_applied",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:e=>{var t,r;return(t=e.data)!=null&&t.position_applied?(r=e.data)==null?void 0:r.position_applied:"⭕❌❌🚫"}},{headerName:"Cover Letter",headerTooltip:"Candiate Cover Letter",field:"cover_letters",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:e=>{var t,r;return(t=e.data)!=null&&t.cover_letters?(r=e.data)==null?void 0:r.cover_letters:"⭕❌❌🚫"}},{headerName:"Application Status",field:"status",headerTooltip:"Candidate Application Status",pinned:"right",editable:!1,width:"150",cellRenderer:e=>{const t=e.data.status,l={pending:"status-pending",under_review:"status-under-review",on_hold:"status-on-hold",active:"status-active",accepted:"status-accepted",declined:"status-declined",draft:"status-draft",future_consideration:"status-future-consideration"}[t]||"status-default";return a.jsx("button",{className:`btn btn-sm status-badge ${l}`,children:t.replace(/_/g," ")})}},{headerName:"Job Letter Status",field:"job_letter",headerTooltip:"Job Offer Letter Status",pinned:"right",editable:!1,width:"150",cellRenderer:e=>{const t=e.data.job_letter,l={draft:"job-letter-draft",sent:"job-letter-sent",accepted:"job-letter-accepted",declined:"job-letter-declined",pending:"job-letter-pending"}[t]||"job-letter-default";return a.jsx("button",{className:`btn btn-sm job-letter-badge ${l}`,children:t.replace(/_/g," ")})}},{headerName:"Issue Date",headerTooltip:"Job Letter Status",field:"job_letter_issue_date",pinned:"right",floatingFilter:!1,filter:"agDateColumnFilter",width:"100",cellRenderer:e=>{var t,r;return(t=e.data)!=null&&t.job_letter_issue_date?(r=e.data)==null?void 0:r.job_letter_issue_date:"Not Issued."}},{headerName:"Action",filter:!1,editable:!1,sortable:!1,pinned:"right",width:150,cellRenderer:e=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"btn-group btn-group-sm",children:[a.jsx(u,{title:"View And Change Status",color:"orange",placement:"leftTop",children:a.jsxs("button",{className:"btn btn-sm me-1 text-white",style:{background:"#fc5b11b4"},onClick:()=>s("EditView",e.data),children:[a.jsx(N,{})," /",a.jsx(E,{})]})}),a.jsx(u,{title:"Delete Jop Applicant",color:"red",placement:"leftTop",children:a.jsx(R,{title:`Are you sure you want to delete "${e.data.name}"?`,onConfirm:()=>h(e.data.id),okText:"Yes",cancelText:"No",children:a.jsx(T,{className:"btn btn-danger btn-sm"})})})]})})}]);d.useEffect(()=>{b(c)},[c]);const h=e=>new Promise(t=>{const r=f("user.destroy",e);j.delete(r,{preserveScroll:!0,onSuccess:()=>{t()},onError:()=>{message.error("Failed to delete user")}})});return a.jsx(a.Fragment,{children:a.jsx(x,{rowData:p,columnDefs:m,defaultColDef:{..._,flex:void 0},theme:C,pagination:!0,paginationAutoPageSize:!0})})};export{y as default};
