const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ViewPermission-Bp6Fmuj0.js","assets/app-BNvUUmEl.js"])))=>i.map(i=>d[i]);
import{C as E,r as t,J as P,j as e,t as N,a as b}from"./app-BNvUUmEl.js";import{A as T,g as w,d as A}from"./AgGridConfig-DKTRhQwD.js";import{s as C}from"./index-D3jEMiZi.js";import{B as D}from"./Breadcrumb-BMFXy4AL.js";import{D as S}from"./index-D8ScAOOO.js";import"./context-D9W1Owti.js";import"./pickAttrs-B-O1NeT5.js";import"./CloseCircleFilled-12r7ww41.js";import"./CloseOutlined-DZW4jfaN.js";import"./ExclamationCircleFilled-BCKDqmzc.js";import"./DownOutlined-BiWLPvuA.js";import"./useLocale-DhOjA_vR.js";import"./Skeleton-xgPywAPc.js";const R=t.lazy(()=>b(()=>import("./ViewPermission-Bp6Fmuj0.js"),__vite__mapDeps([0,1]))),Q=({permissions:n})=>{E();const[p,u]=t.useState([]),[f,v]=t.useState([{headerName:"Module",headerTooltip:"Module Name",field:"model",pinned:"left"},{headerName:"Permission",headerTooltip:"Permission Name",field:"name",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0},{headerName:"Per Assign To Role",headerTooltip:"Assign To Role",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,valueGetter:s=>{const r=s.data.roles;return Array.isArray(r)?r.map(l=>l.name).join(", "):""}},{headerName:"Notes",headerTooltip:"Permission Notes",field:"notes",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:s=>s.data.notes?s.data.notes:"None"}]);t.useEffect(()=>{u(n)},[n]);const[y,_]=t.useState(!1),[d,h]=t.useState(!1),[c,L]=t.useState("view"),[g,x]=t.useState(null),i=()=>{h(!1),x(null)},{flash:a,errors:o}=P().props,[m,j]=C.useNotification();return t.useEffect(()=>{a.message&&m.success({message:"Success",description:a.message,placement:"topRight"})},[a]),t.useEffect(()=>{o&&Object.keys(o).length>0&&Object.entries(o).forEach(([s,r])=>{const l=Array.isArray(r)?r.join(", "):r;m.error({message:"Validation Error",description:l,placement:"topRight"})})},[o]),e.jsxs(e.Fragment,{children:[j,e.jsxs("div",{className:"container-fluid p-0",children:[e.jsx("div",{className:"d-flex justify-content-between align-items-center ps-2 pe-2 mt-2",children:e.jsx(D,{className:"breadCrumb",items:[{title:e.jsx(N,{href:"/",children:"Home"})},{title:"Permission"}]})}),e.jsx("div",{className:"ag-grid-wrapper",children:e.jsx(T,{rowData:p,columnDefs:f,defaultColDef:A,theme:w,pagination:!0,paginationAutoPageSize:!0})})]}),e.jsx(S,{title:c==="add"?"Add Permission":c==="edit"?"Edit Permission":"View Permission",closable:{"aria-label":"Close Button"},placement:"left",width:"90%",onClose:i,open:d,extra:e.jsx("button",{className:"btn btn-primary btn-sm",onClick:i,children:"Close"}),children:e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading form..."}),children:d&&e.jsx(R,{onClose:i,data:g})})})]})};export{Q as default};
