const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddDepartment-DgQN3nes.js","assets/app-BNvUUmEl.js","assets/Editor-CDggPmT6.js","assets/skin-DY8BMAJN.js","assets/skin-C_AE50If.css","assets/index-CaKXPVzR.js","assets/pickAttrs-B-O1NeT5.js","assets/useVariants-BWWb-x4p.js","assets/useLocale-DhOjA_vR.js","assets/CheckOutlined-UVMpW3zu.js","assets/CloseCircleFilled-12r7ww41.js","assets/CloseOutlined-DZW4jfaN.js","assets/DownOutlined-BiWLPvuA.js","assets/SearchOutlined-CqZ0Ampv.js","assets/index-CRvW1yVg.js","assets/BaseInput-DZa833Tk.js","assets/TextArea-BZPq0bZ8.js","assets/EyeOutlined-DiEETj_p.js","assets/EditDepartment-NO9sE0Z6.js","assets/ViewDepartment-_a0_xU4H.js","assets/Collapse-DNOFyZYK.js","assets/PhoneOutlined-CHa3bdgD.js","assets/MailOutlined-lkoHv3Q8.js"])))=>i.map(i=>d[i]);
import{C as v,r,j as e,T as u,S as y,J as S,t as L,a as f}from"./app-BNvUUmEl.js";import{A as k,g as F,d as B}from"./AgGridConfig-DKTRhQwD.js";import I from"./MyRichTextEditor-DIZfoaaM.js";import{R as V}from"./EyeOutlined-DiEETj_p.js";import{R as O}from"./EditOutlined-D08rt_V1.js";import{P as M}from"./index-CMRs0_Xi.js";import{R as z}from"./DeleteOutlined-DGkp8rPa.js";import{s as $}from"./index-D3jEMiZi.js";import{B as H}from"./Breadcrumb-BMFXy4AL.js";import{R as G}from"./SyncOutlined-liXqSQFG.js";import{D as J}from"./index-D8ScAOOO.js";import"./Editor-CDggPmT6.js";import"./skin-DY8BMAJN.js";import"./ExclamationCircleFilled-BCKDqmzc.js";import"./useLocale-DhOjA_vR.js";import"./context-D9W1Owti.js";import"./pickAttrs-B-O1NeT5.js";import"./CloseCircleFilled-12r7ww41.js";import"./CloseOutlined-DZW4jfaN.js";import"./DownOutlined-BiWLPvuA.js";import"./Skeleton-xgPywAPc.js";const W=r.lazy(()=>f(()=>import("./AddDepartment-DgQN3nes.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),Y=r.lazy(()=>f(()=>import("./EditDepartment-NO9sE0Z6.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),q=r.lazy(()=>f(()=>import("./ViewDepartment-_a0_xU4H.js"),__vite__mapDeps([19,1,20,6,21,22]))),be=({departments:h,branches:x})=>{const N=v(),[T,R]=r.useState([]),[C,K]=r.useState([{headerName:"Name",headerTooltip:"Department Name",field:"name",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,pinned:"left"},{headerName:"Branch",headerTooltip:"Branch Name",field:"branch.name",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0},{headerName:"Email",headerTooltip:"Branch Email",field:"email",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:t=>t.data.email?t.data.email:"Not Added"},{headerName:"Phone",headerTooltip:"Branch Phone",field:"phone",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:t=>t.data.phone?t.data.phone:"Not Added"},{headerName:"Fax",headerTooltip:"Branch Fax",field:"fax",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,cellRenderer:t=>t.data.fax?t.data.fax:"Not Added"},{headerName:"Notes",headerTooltip:"PayGrade Notes",field:"notes",cellEditor:I,cellEditorPopup:!0,cellRenderer:t=>{const a=document.createElement("div");a.innerHTML=t.value||"<i>No Notes</i>";const n=a.textContent||a.innerText||"";return n.length>100?n.substring(0,100)+"...":n}},{headerName:"Action",filter:!1,editable:!1,sortable:!1,pinned:"right",cellRenderer:t=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx(u,{title:"View Department With Full Record",color:"green",placement:"leftTop",children:e.jsx("button",{className:"btn btn-success btn-sm me-1",onClick:()=>m("view",t.data),children:e.jsx(V,{})})}),e.jsx(u,{title:"Edit Department",color:"orange",placement:"leftTop",children:e.jsx("button",{className:"btn btn-warning btn-sm me-1",onClick:()=>m("edit",t.data),children:e.jsx(O,{})})}),e.jsx(u,{title:"Delete Deparment",color:"red",placement:"leftTop",children:e.jsx(M,{title:`Are you sure you want to delete "${t.data.name}"?`,onConfirm:()=>A(t.data.id),okText:"Yes",cancelText:"No",children:e.jsx(z,{className:"btn btn-danger btn-sm"})})})]})})}]);r.useEffect(()=>{R(h)},[h]);const[c,i]=r.useState(!1),[b,g]=r.useState(!1),[o,P]=r.useState("add"),[E,j]=r.useState(null),m=(t,a=null)=>{g(!0),P(t),j(a)},l=()=>{g(!1),j(null)},s=r.useRef(),w=()=>{s.current&&s.current.submitForm()},A=t=>new Promise(a=>{const n=N("department.destroy",t);y.delete(n,{preserveScroll:!0,onSuccess:()=>{a()},onError:()=>{message.error("Failed to delete department")}})}),{flash:p,errors:d}=S().props,[D,_]=$.useNotification();return r.useEffect(()=>{p.message&&D.success({message:"Success",description:p.message,placement:"topRight"})},[p]),r.useEffect(()=>{d&&Object.keys(d).length>0&&Object.entries(d).forEach(([t,a])=>{const n=Array.isArray(a)?a.join(", "):a;D.error({message:"Validation Error",description:n,placement:"topRight"})})},[d]),e.jsxs(e.Fragment,{children:[_,e.jsxs("div",{className:"container-fluid p-0",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center ps-2 pe-2 mt-2",children:[e.jsx(H,{className:"breadCrumb",items:[{title:e.jsx(L,{href:"/",children:"Home"})},{title:"Department"}]}),e.jsx("button",{icon:c?e.jsx(G,{spin:!0}):null,className:"btn btn-primary btn-sm",onClick:()=>{i(!0),m("add"),setTimeout(()=>{i(!1)},300)},children:"Add Department"})]}),e.jsx("div",{className:"ag-grid-wrapper",children:e.jsx(k,{rowData:T,columnDefs:C,defaultColDef:B,theme:F,pagination:!0,paginationAutoPageSize:!0})})]}),e.jsx(J,{title:o==="add"?"Add Department":o==="edit"?"Edit Department":"View Department Full Detail: ",closable:{"aria-label":"Close Button"},placement:"left",width:"90%",onClose:l,open:b,maskClosable:!1,extra:o==="view"?e.jsx("button",{className:"btn btn-primary btn-sm",onClick:l,children:"Close"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary btn-sm me-2",disabled:c,onClick:l,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:w,disabled:c,children:o==="add"?"Add Department":o==="edit"?"Save Changes":"Close"})]}),children:e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading form..."}),children:b&&(o==="add"?e.jsx(W,{branches:x,setParentLoading:i,ref:s,onClose:l}):o==="edit"?e.jsx(Y,{branches:x,data:E,setParentLoading:i,ref:s,onClose:l}):e.jsx(q,{data:E}))})})]})};export{be as default};
