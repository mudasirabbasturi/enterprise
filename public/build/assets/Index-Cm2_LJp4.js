const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AddDesignation-CUn6WFSB.js","assets/app-BNvUUmEl.js","assets/Editor-CDggPmT6.js","assets/skin-DY8BMAJN.js","assets/skin-C_AE50If.css","assets/index-CaKXPVzR.js","assets/pickAttrs-B-O1NeT5.js","assets/useVariants-BWWb-x4p.js","assets/useLocale-DhOjA_vR.js","assets/CheckOutlined-UVMpW3zu.js","assets/CloseCircleFilled-12r7ww41.js","assets/CloseOutlined-DZW4jfaN.js","assets/DownOutlined-BiWLPvuA.js","assets/SearchOutlined-CqZ0Ampv.js","assets/index-CRvW1yVg.js","assets/BaseInput-DZa833Tk.js","assets/TextArea-BZPq0bZ8.js","assets/EyeOutlined-DiEETj_p.js","assets/EditDesignation-JKxmxN88.js","assets/ViewDesignation-Dn-ohTGg.js","assets/Collapse-DNOFyZYK.js","assets/PhoneOutlined-CHa3bdgD.js","assets/MailOutlined-lkoHv3Q8.js"])))=>i.map(i=>d[i]);
import{C as P,r as t,j as e,T as u,S,J as A,t as L,a as f}from"./app-BNvUUmEl.js";import{A as k,g as I,d as F}from"./AgGridConfig-DKTRhQwD.js";import V from"./MyRichTextEditor-DIZfoaaM.js";import{R as O}from"./EyeOutlined-DiEETj_p.js";import{R as B}from"./EditOutlined-D08rt_V1.js";import{P as M}from"./index-CMRs0_Xi.js";import{R as z}from"./DeleteOutlined-DGkp8rPa.js";import{s as $}from"./index-D3jEMiZi.js";import{B as H}from"./Breadcrumb-BMFXy4AL.js";import{R as G}from"./SyncOutlined-liXqSQFG.js";import{D as J}from"./index-D8ScAOOO.js";import"./Editor-CDggPmT6.js";import"./skin-DY8BMAJN.js";import"./ExclamationCircleFilled-BCKDqmzc.js";import"./useLocale-DhOjA_vR.js";import"./context-D9W1Owti.js";import"./pickAttrs-B-O1NeT5.js";import"./CloseCircleFilled-12r7ww41.js";import"./CloseOutlined-DZW4jfaN.js";import"./DownOutlined-BiWLPvuA.js";import"./Skeleton-xgPywAPc.js";const W=t.lazy(()=>f(()=>import("./AddDesignation-CUn6WFSB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),Y=t.lazy(()=>f(()=>import("./EditDesignation-JKxmxN88.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),q=t.lazy(()=>f(()=>import("./ViewDesignation-Dn-ohTGg.js"),__vite__mapDeps([19,1,20,6,21,22]))),xe=({designations:g,departments:h})=>{const N=P(),[T,C]=t.useState([]),[R,K]=t.useState([{headerName:"Name",headerTooltip:"Designation Name",field:"name",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0,pinned:"left"},{headerName:"Department",headerTooltip:"Department Name",field:"department.name",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0},{headerName:"Branch",headerTooltip:"Branch Name",field:"department.branch.name",cellEditor:"agLargeTextCellEditor",cellEditorPopup:!0},{headerName:"Notes",headerTooltip:"PayGrade Notes",field:"notes",cellEditor:V,cellEditorPopup:!0,cellRenderer:r=>{const o=document.createElement("div");o.innerHTML=r.value||"<i>No Notes</i>";const i=o.textContent||o.innerText||"";return i.length>100?i.substring(0,100)+"...":i}},{headerName:"Action",filter:!1,editable:!1,sortable:!1,pinned:"right",cellRenderer:r=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"btn-group btn-group-sm",children:[e.jsx(u,{title:"View Designation With Full Record",color:"green",placement:"leftTop",children:e.jsx("button",{className:"btn btn-success btn-sm me-1",onClick:()=>m("view",r.data),children:e.jsx(O,{})})}),e.jsx(u,{title:"Edit Designation",color:"orange",placement:"leftTop",children:e.jsx("button",{className:"btn btn-warning btn-sm me-1",onClick:()=>m("edit",r.data),children:e.jsx(B,{})})}),e.jsx(u,{title:"Delete Designation",color:"red",placement:"leftTop",children:e.jsx(M,{title:`Are you sure you want to delete "${r.data.name}"?`,onConfirm:()=>v(r.data.id),okText:"Yes",cancelText:"No",children:e.jsx(z,{className:"btn btn-danger btn-sm"})})})]})})}]);t.useEffect(()=>{C(g)},[g]);const[c,a]=t.useState(!1),[x,b]=t.useState(!1),[n,w]=t.useState("add"),[j,D]=t.useState(null),m=(r,o=null)=>{b(!0),w(r),D(o)},s=()=>{b(!1),D(null)},l=t.useRef(),_=()=>{l.current&&l.current.submitForm()},v=r=>new Promise(o=>{const i=N("designation.destroy",r);S.delete(i,{preserveScroll:!0,onSuccess:()=>{o()},onError:()=>{message.error("Failed to delete designation")}})}),{flash:p,errors:d}=A().props,[E,y]=$.useNotification();return t.useEffect(()=>{p.message&&E.success({message:"Success",description:p.message,placement:"topRight"})},[p]),t.useEffect(()=>{d&&Object.keys(d).length>0&&Object.entries(d).forEach(([r,o])=>{const i=Array.isArray(o)?o.join(", "):o;E.error({message:"Validation Error",description:i,placement:"topRight"})})},[d]),e.jsxs(e.Fragment,{children:[y,e.jsxs("div",{className:"container-fluid p-0",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center ps-2 pe-2 mt-2",children:[e.jsx(H,{className:"breadCrumb",items:[{title:e.jsx(L,{href:"/",children:"Home"})},{title:"Designation"}]}),e.jsx("button",{icon:c?e.jsx(G,{spin:!0}):null,className:"btn btn-primary btn-sm",onClick:()=>{a(!0),m("add"),setTimeout(()=>{a(!1)},300)},children:"Add Designation"})]}),e.jsx("div",{className:"ag-grid-wrapper",children:e.jsx(k,{rowData:T,columnDefs:R,defaultColDef:F,theme:I,pagination:!0,paginationAutoPageSize:!0})})]}),e.jsx(J,{title:n==="add"?"Add Designation":n==="edit"?"Edit Designation":"View Designation Full Detail: ",closable:{"aria-label":"Close Button"},placement:"left",width:"90%",onClose:s,open:x,maskClosable:!1,extra:n==="view"?e.jsx("button",{className:"btn btn-primary btn-sm",onClick:s,children:"Close"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-primary btn-sm me-2",disabled:c,onClick:s,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:_,disabled:c,children:n==="add"?"Add Designation":n==="edit"?"Save Changes":"Close"})]}),children:e.jsx(t.Suspense,{fallback:e.jsx("div",{children:"Loading form..."}),children:x&&(n==="add"?e.jsx(W,{departments:h,setParentLoading:a,ref:l,onClose:s}):n==="edit"?e.jsx(Y,{departments:h,data:j,setParentLoading:a,ref:l,onClose:s}):e.jsx(q,{data:j}))})})]})};export{xe as default};
