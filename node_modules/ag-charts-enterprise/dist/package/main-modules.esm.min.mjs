var Pu=Object.defineProperty,Lu=Object.getOwnPropertyDescriptor,h=(e,t,i,s)=>{for(var o=s>1?void 0:s?Lu(t,i):t,a=e.length-1,r;a>=0;a--)(r=e[a])&&(o=(s?r(t,i,o):r(o))||o);return s&&o&&Pu(t,i,o),o};import{_ModuleSupport as Ru}from"ag-charts-community";import{_ModuleSupport as Ou}from"ag-charts-community";import"ag-charts-core";import{_ModuleSupport as Cu}from"ag-charts-community";import{isNumberEqual as qn}from"ag-charts-core";function Aa(e,t,i){const s=(a,r,n,l)=>{let c=e[0];for(let p=a;n>0?p<=r:p>r;p+=n){const d=e[p];if(l(c,d))return!0;c=d}return!1},o=Math.floor(e.length/2);return s(t,o,t,i)?!0:s(e.length-t,o,-t,i)}import{_ModuleSupport as Tu}from"ag-charts-community";var{AxisInterval:wu,Property:_u}=Tu,Na=class extends wu{};h([_u],Na.prototype,"minSpacing",2);import{_ModuleSupport as Bs}from"ag-charts-community";import{countFractionDigits as Fu,isNumberEqual as Ri}from"ag-charts-core";import{_ModuleSupport as Un}from"ag-charts-community";import{isNumberEqual as jn}from"ag-charts-core";import{_ModuleSupport as Eu}from"ag-charts-community";import{createId as Bu}from"ag-charts-core";var{BaseProperties:Jn,ChartAxisDirection:Gu,Property:Ae,Group:Pa,FONT_SIZE:Wu}=Eu,Mt=class extends Jn{constructor(){super(...arguments),this.fontSize=Wu.LARGE,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};h([Ae],Mt.prototype,"enabled",2),h([Ae],Mt.prototype,"text",2),h([Ae],Mt.prototype,"fontStyle",2),h([Ae],Mt.prototype,"fontWeight",2),h([Ae],Mt.prototype,"fontSize",2),h([Ae],Mt.prototype,"fontFamily",2),h([Ae],Mt.prototype,"padding",2),h([Ae],Mt.prototype,"color",2),h([Ae],Mt.prototype,"parallel",2);var Ze=class extends Jn{constructor(){super(...arguments),this.id=Bu(this),this.defaultColorRange=[],this.shape="polygon",this.label=new Mt,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Gu.Angle,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new Pa({name:this.id}),this.rangeGroup=new Pa({name:this.id}),this.labelGroup=new Pa({name:this.id}),this._isRange=void 0}assignCrossLineGroup(e,t){e!==this._isRange&&(e?this.rangeGroup.appendChild(t):this.lineGroup.appendChild(t)),this._isRange=e}setSectorNodeProps(e){e.fill=this.fill,e.fillOpacity=this.fillOpacity??1,e.stroke=this.stroke,e.strokeOpacity=this.strokeOpacity??1,e.strokeWidth=this.strokeWidth??1,e.lineDash=this.lineDash}setLabelNodeProps(e,t,i,s,o){const{label:a}=this;e.x=t,e.y=i,e.text=a.text,e.textAlign="center",e.textBaseline=s,e.rotation=o,e.rotationCenterX=t,e.rotationCenterY=i,e.fill=a.color,e.fontFamily=a.fontFamily,e.fontSize=a.fontSize,e.fontStyle=a.fontStyle,e.visible=!0}};h([Ae],Ze.prototype,"enabled",2),h([Ae],Ze.prototype,"type",2),h([Ae],Ze.prototype,"range",2),h([Ae],Ze.prototype,"value",2),h([Ae],Ze.prototype,"defaultColorRange",2),h([Ae],Ze.prototype,"fill",2),h([Ae],Ze.prototype,"fillOpacity",2),h([Ae],Ze.prototype,"stroke",2),h([Ae],Ze.prototype,"strokeWidth",2),h([Ae],Ze.prototype,"strokeOpacity",2),h([Ae],Ze.prototype,"lineDash",2),h([Ae],Ze.prototype,"shape",2),h([Ae],Ze.prototype,"label",2);var{ChartAxisDirection:Vu,getCrossLineValue:Ku,validateCrossLineValue:zu,normalizeAngle360:La,Group:$u,Path:Zn,Sector:Hu,RotatableText:Xu,ContinuousScale:Yu}=Un,Ra=class extends Ze{constructor(){super(),this.direction=Vu.Angle,this.polygonNode=new Zn,this.sectorNode=new Hu,this.lineNode=new Zn,this.crossLineRange=new $u,this.labelNode=new Xu,this.ticks=[],this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}visibilityCheck(){if(!Yu.is(this.scale))return!0;const[e,t]=this.scale.domain,i=Ku(this);if(this.type==="range"){const[s,o]=i;return s>=e&&s<=t&&o>=s&&o<=t}else return i>=e&&i<=t}update(e){const{scale:t}=this;if(!t||!zu(this,t)||!this.visibilityCheck()){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){const{scale:t,type:i,value:s,lineNode:o}=this;if(!e||i!=="line"||!t){o.visible=!1;return}const a=t.convert(s);if(isNaN(a)){o.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:n}=this;o.visible=!0,o.stroke=this.stroke,o.strokeOpacity=this.strokeOpacity??1,o.strokeWidth=this.strokeWidth??1,o.fill=void 0,o.lineDash=this.lineDash;const l=n*Math.cos(a),c=n*Math.sin(a),p=r*Math.cos(a),d=r*Math.sin(a);o.path.clear(!0),o.path.moveTo(p,d),o.path.lineTo(l,c),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(e){const{polygonNode:t,range:i,scale:s,shape:o,type:a,ticks:r}=this;if(!e||a!=="range"||o!=="polygon"||!s||!i){t.visible=!1;return}const{axisInnerRadius:n,axisOuterRadius:l}=this,c=r.indexOf(i[0]),p=r.indexOf(i[1]),u=(c<=p?r.slice(c,p+1):r.slice(c).concat(r.slice(0,p+1))).map(y=>s.convert(y));t.visible=!0,this.setSectorNodeProps(t);const{path:f}=t;f.clear(!0),u.forEach((y,g)=>{const m=l*Math.cos(y),S=l*Math.sin(y);g===0?f.moveTo(m,S):f.lineTo(m,S)}),n===0?f.lineTo(0,0):u.slice().reverse().forEach(y=>{const g=n*Math.cos(y),m=n*Math.sin(y);f.lineTo(g,m)}),t.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(e){const{sectorNode:t,range:i,scale:s,shape:o,type:a}=this;if(!e||a!=="range"||o!=="circle"||!s||!i){t.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:n}=this,l=i.map(d=>s.convert(d)),c=s.step??0,p=s instanceof Un.BandScale?c/2:0;t.visible=!0,this.setSectorNodeProps(t),t.centerX=0,t.centerY=0,t.innerRadius=r,t.outerRadius=n,t.startAngle=l[0]-p,t.endAngle=l[1]+p,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(e){const{label:t,labelNode:i,range:s,scale:o,type:a,ticks:r}=this;if(!e||t.enabled===!1||!t.text||!o||a==="range"&&!s){i.visible=!1;return}i.visible=!0;const{axisInnerRadius:n,axisOuterRadius:l}=this;let c,p,d,u;if(a==="line"){const f=La(o.convert(this.value)),y=1.5*Math.PI,g=jn(f,y)||f>y||f<Math.PI/2,m=(n+l)/2*Math.cos(f),S=(n+l)/2*Math.sin(f);c=m+t.padding*Math.cos(f+Math.PI/2),p=S+t.padding*Math.sin(f+Math.PI/2),u=g?"top":"bottom",d=g?f:f-Math.PI}else{const[f,y]=s.map(x=>La(o.convert(x)));let g=(f+y)/2;f>y&&(g-=Math.PI),g=La(g);const m=(jn(g,0)||g>0)&&g<Math.PI;let S;this.shape==="circle"||r.length<3?S=l-t.padding:S=l*Math.cos(Math.PI/r.length)-t.padding,c=S*Math.cos(g),p=S*Math.sin(g),u=m?"bottom":"top",d=m?g-Math.PI/2:g+Math.PI/2}this.setLabelNodeProps(i,c,p,u,d)}};Ra.className="AngleCrossLine";var{ChartAxisDirection:qu,TextWrapper:Uu,TextUtils:ju,Property:Oa,toRadians:is,normalizeAngle360:Ut,normalizeAngle360Inclusive:Ju,Path:Zu,RotatableText:Qu,Transformable:ef,BBox:tf,Selection:Qn,Line:el}=Bs,Ca=class extends Bs.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};h([Oa],Ca.prototype,"orientation",2);var ss=class extends Bs.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.tickLineGroupSelection=Qn.select(this.tickLineGroup,el,!1),this.gridLineGroupSelection=Qn.select(this.gridLineGroup,el,!1),this.labelData=[],this.tickData=[],this.radiusLineGroup=this.axisGroup.appendChild(new Bs.TransformableGroup),this.radiusLine=this.radiusLineGroup.appendChild(new Zu),this.includeInvisibleDomains=!0}get direction(){return qu.Angle}createLabel(){return new Ca}calculateRotations(){const e=is(this.startAngle),t=Ut(e),i=Ut(e-Math.PI/2);return{rotation:e,parallelFlipRotation:t,regularFlipRotation:i}}calculateTickLayout(e){const{nice:t,scale:i}=this,s={nice:t,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},o=t?i.niceDomain(s,e):e,a=this.generateAngleTicks(o);this.tickData=a;const r=a.map(l=>l.value),n=r.reduce((l,c)=>Math.max(typeof c=="number"?Fu(c):0,l),0);return{niceDomain:o,tickDomain:o,ticks:r,rawTickCount:void 0,fractionDigits:n,timeInterval:void 0,bbox:this.getBBox()}}update(){super.update(),this.updateRadiusLine(),this.updateGridLines(),this.updateTickLines()}normalizedAngles(){const e=Ut(-Math.PI/2+is(this.startAngle)),t=this.endAngle!=null?Ju(is(this.endAngle)-is(this.startAngle)):2*Math.PI,i=e+t;return[e,i]}computeRange(){this.range=this.normalizedAngles()}updateSelections(){const e=this.tickData;this.gridLineGroupSelection.update(this.gridLength&&this.gridLine.enabled?e:[]),this.tickLineGroupSelection.update(this.tick.enabled?e:[]),this.tickLabelGroupSelection.update(this.label.enabled?e:[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup()}updatePosition(){super.updatePosition();const{translation:e,radiusLineGroup:t}=this,i=Math.floor(e.x),s=Math.floor(e.y);t.translationX=i,t.translationY=s}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear(!0);const{points:i,closePath:s}=this.getAxisLinePoints();i.forEach(({x:o,y:a,moveTo:r,arc:n,radius:l=0,startAngle:c=0,endAngle:p=0})=>{n?t.arc(o,a,l,c,p):r?t.moveTo(o,a):t.lineTo(o,a)}),s&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.stroke,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){const{scale:e,shape:t,gridLength:i}=this,[s,o]=this.range,a=Ri(o-s,2*Math.PI),r=[];if(t==="circle")a?r.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):r.push({x:i*Math.cos(s),y:i*Math.sin(s),moveTo:!0},{x:0,y:0,radius:i,startAngle:Ut(s),endAngle:Ut(o),arc:!0,moveTo:!1});else if(t==="polygon"){const n=e.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(l=>e.convert(l));n&&n.length>2&&n.forEach((l,c)=>{const p=i*Math.cos(l),d=i*Math.sin(l),u=c===0;r.push({x:p,y:d,moveTo:u})})}return{points:r,closePath:a}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{style:i,width:s},innerRadiusRatio:o}=this;if(!(i&&t>0))return;const a=t*o,r=i.length;this.gridLineGroupSelection.each((n,l,c)=>{const{value:p}=l,{stroke:d,lineDash:u}=i[c%r],f=e.convert(p);n.x1=a*Math.cos(f),n.y1=a*Math.sin(f),n.x2=t*Math.cos(f),n.y2=t*Math.sin(f),n.stroke=d,n.strokeWidth=s,n.lineDash=u,n.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this;t.each((i,s,o)=>{const a=this.labelData[o];if(!a||a.hidden){i.visible=!1;return}i.text=a.text,i.setFont(e),i.fill=e.color,i.x=a.x,i.y=a.y,i.textAlign=a.textAlign,i.textBaseline=a.textBaseline,i.visible=!0,a.rotation?(i.rotation=a.rotation,i.rotationCenterX=a.x,i.rotationCenterY=a.y):i.rotation=0})}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:s}=this;s.each((o,a)=>{const{value:r}=a,n=e.convert(r),l=Math.cos(n),c=Math.sin(n);o.x1=t*l,o.y1=t*c,o.x2=(t+i.size)*l,o.y2=(t+i.size)*c,o.stroke=i.stroke,o.strokeWidth=i.width})}createLabelNodeData(e,t,i){const{label:s,gridLength:o,scale:a,tick:r}=this;if(!s.enabled)return[];const n=new Qu,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,{fractionDigits:p}=this.layout.label,d=this.tickFormatter(this.scale.domain,this.tickData,!1,p),u=e.map((f,y)=>{const{value:g}=f,m=o+s.spacing+r.size,S=a.convert(g),x=Math.cos(S),b=Math.sin(S),v=m*x,k=m*b,{textAlign:L,textBaseline:A}=this.getLabelAlign(S),D=y===e.length-1&&g!==e[0]&&Ri(Ut(S),Ut(a.convert(e[0]))),I=this.getLabelRotation(S);let M=d(g,y);n.text=M,n.x=v,n.y=k,n.setFont(s),n.textAlign=L,n.textBaseline=A,n.rotation=I,I&&(n.rotationCenterX=v,n.rotationCenterY=k);let P=I?ef.toCanvas(n):n.getBBox();if(P&&t.hideWhenNecessary&&!I){const R=l-P.x,w=P.x+P.width-c,N=1;if(R>N||w>N){const C=P.width-Math.max(R,w);M=Uu.wrapText(M,{maxWidth:C,font:s,textWrap:"never"}),M===ju.EllipsisChar&&(M=""),n.text=M,P=n.getBBox()}}return{text:M,x:v,y:k,textAlign:L,textBaseline:A,hidden:M===""||f.hidden||D,rotation:I,box:P}});return s.avoidCollisions&&this.avoidLabelCollisions(u),u}computeLabelsBBox(e,t){this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map(({box:s})=>s).filter(s=>s!=null);return!this.label.enabled||i.length===0?null:tf.merge(i)}getLabelOrientation(){const{label:e}=this;return e instanceof Ca?e.orientation:"fixed"}getLabelRotation(e){let t=is(this.label.rotation??0);e=Ut(e);const i=this.getLabelOrientation();return i==="parallel"?(t+=e,e>=0&&e<Math.PI?t-=Math.PI/2:t+=Math.PI/2):i==="perpendicular"&&(t+=e,e>=Math.PI/2&&e<1.5*Math.PI&&(t+=Math.PI)),t}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let s,o;const a=this.getLabelOrientation(),r=Ri(t,0),n=Ri(i,0),l=Ri(t,1),c=Ri(i,-1),p=t>0&&!r,d=i>0&&!n;return a==="parallel"?(s="center",o=l&&n||d?"top":"bottom"):a==="perpendicular"?(s=c||p?"left":"right",o="middle"):(s="right",r?s="center":p&&(s="left"),o="bottom",n?o="middle":d&&(o="top")),{textAlign:s,textBaseline:o}}updateCrossLines(){const{shape:e,gridLength:t,innerRadiusRatio:i}=this;this.crossLines.forEach(s=>{s instanceof Ra&&(s.ticks=this.tickData.map(o=>o.value),s.shape=e,s.axisOuterRadius=t,s.axisInnerRadius=t*i)}),super.updateCrossLines()}};ss.CrossLineConstructor=Ra,h([Oa],ss.prototype,"startAngle",2),h([Oa],ss.prototype,"endAngle",2);var{Property:Ta,CategoryScale:sf}=Cu,ni=class extends ss{constructor(e){super(e,new sf),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new Na}generateAngleTicks(e){const{scale:t,gridLength:i}=this,{values:s,minSpacing:o}=this.interval,a={nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},r=s??t.ticks(a,e)?.ticks??[];if(r.length<2||o==null)return r.map(d=>({value:d,visible:!0}));const n=r[0],l=t.convert(n),c=i*Math.cos(l),p=i*Math.sin(l);for(let d=1;d<r.length-1;d++){const u=r[d],f=t.convert(u);if(f-l>Math.PI)break;const y=i*Math.cos(f),g=i*Math.sin(f);if(Math.sqrt((y-c)**2+(g-p)**2)>o){const S=new Set([n]);return Aa(r,d,(x,b)=>{S.add(b)}),r.map(x=>{const b=S.has(x);return{value:x,visible:b}})}}return[{value:n,visible:!0}]}avoidLabelCollisions(e){const{minSpacing:t}=this.label;if(e.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;if(t==null)return l.box.collidesBBox(c.box);const p=l.box.clone().grow(t/2),d=c.box.clone().grow(t/2);return p.collidesBBox(d)},s=e[0],o=e.at(-1),a=new Set([s]),r=qn(s.x,o.x)&&qn(s.y,o.y),n=Math.floor(e.length/2);for(let l=1;l<=n;l++){const c=r?e.slice(0,-1):e;if(!Aa(c,l,i)){Aa(c,l,(d,u)=>{a.add(u)});break}}e.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:s,legendItemName:o,key:a,source:r,property:n,domain:l,boundSeries:c}=t;return{type:"category",value:e,datum:i,seriesId:s,legendItemName:o,key:a,source:r,property:n,domain:l,boundSeries:c}}};ni.className="AngleCategoryAxis",ni.type="angle-category",h([Ta],ni.prototype,"groupPaddingInner",2),h([Ta],ni.prototype,"paddingInner",2),h([Ta],ni.prototype,"interval",2);import{_ModuleSupport as of}from"ag-charts-community";import{isNumberEqual as tl}from"ag-charts-core";import{_ModuleSupport as af}from"ag-charts-community";import{isNumberEqual as rf}from"ag-charts-core";var{range:il,isDenseInterval:nf,LinearScale:wa}=af,sl=class Yn extends wa{constructor(){super(...arguments),this.arcLength=0}static getNiceStepAndTickCount(t,i){const[s,o]=i;let a=wa.getTickStep(s,o,t);const r=isNaN(t.maxTickCount)?1/0:t.maxTickCount,n=Math.abs(o-s)/a;let l=Math.pow(2,Math.ceil(Math.log(n)/Math.log(2)));return l>r&&(l/=2,a*=2),{count:l,step:a}}ticks(t,i=this.domain){const{arcLength:s}=this;if(!i||i.length<2||i.some(c=>!isFinite(c))||s<=0)return{ticks:[],count:0};const{nice:o,interval:a}=t,[r,n]=i;if(a){const c=Math.abs(a),p=this.getPixelRange();if(!nf((n-r)/c,p))return il(r,n,c)}let l;if(o&&this.hasNiceRange()){const c=super.niceDomain(t,i);l=Yn.getNiceStepAndTickCount(t,c).step}else l=wa.getTickStep(r,n,t);return il(r,n,l)}hasNiceRange(){const t=this.range.slice().sort((s,o)=>s-o);return[Math.PI,2*Math.PI].some(s=>rf(s,t[1]-t[0]))}niceDomain(t,i=this.domain){const s=super.niceDomain(t,i);if(!this.hasNiceRange())return s;const o=s[0]>s[1],a=o?s[1]:s[0],{step:r,count:n}=Yn.getNiceStepAndTickCount(t,s),l=1/r,c=r>=1?Math.ceil(a/r+n)*r:Math.ceil((a+n*r)*l)/l;return o?[c,a]:[a,c]}getPixelRange(){return this.arcLength}},{Property:_a,angleBetween:lf,normalisedExtentWithMetadata:cf,findMinMax:pf}=of,Oi=class extends ss{constructor(e){super(e,new sl),this.shape="circle",this.interval=new Na}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:o}=cf(e,t,i);return{domain:s,clipped:o}}updateScale(){super.updateScale(),this.scale.arcLength=this.getRangeArcLength()}getRangeArcLength(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e),s=lf(t,i)||2*Math.PI,o=this.gridLength;return s*o}generateAngleTicks(e){const{scale:t,range:i,nice:s}=this,{values:o,step:a,minSpacing:r,maxSpacing:n}=this.interval;let l;if(o==null){const{arcLength:c}=t,p=n?Math.floor(c/n):1,d=r?Math.floor(c/r):1/0,u=Math.floor(4/Math.PI*Math.abs(i[0]-i[1])),f=Math.max(p,Math.min(d,u)),y={nice:s,interval:a,tickCount:f,minTickCount:p,maxTickCount:d};l=t.ticks(y,e)?.ticks??[]}else{const[c,p]=pf(e.map(Number));l=o.filter(d=>d>=c&&d<=p).sort((d,u)=>d-u)}return l.map(c=>({value:c,visible:!0}))}avoidLabelCollisions(e){const{minSpacing:t}=this.label,i=(a,r)=>{if(a.hidden||r.hidden)return!1;if(t==null)return a.box.collidesBBox(r.box);const n=a.box.clone().grow(t/2),l=r.box.clone().grow(t/2);return n.collidesBBox(l)},s=e[0],o=e.at(-1);s!==o&&tl(s.x,o.x)&&tl(s.y,o.y)&&(o.hidden=!0);for(let a=1;a<e.length;a*=2){let r=!1;for(let n=a;n<e.length;n+=a){const l=e[n],c=e[n-a];if(i(c,l)){r=!0;break}}if(!r){e.forEach((n,l)=>{l%a>0&&(n.hidden=!0,n.box=void 0)});return}}e.forEach((a,r)=>{r>0&&(a.hidden=!0,a.box=void 0)})}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:s,seriesId:o,legendItemName:a,key:r,source:n,property:l,domain:c,boundSeries:p}=t;return{type:"number",value:e,datum:s,seriesId:o,legendItemName:a,key:r,source:n,property:l,domain:c,boundSeries:p,fractionDigits:i}}};Oi.className="AngleNumberAxis",Oi.type="angle-number",h([_a],Oi.prototype,"min",2),h([_a],Oi.prototype,"max",2),h([_a],Oi.prototype,"interval",2);import{_ModuleSupport as ol}from"ag-charts-community";var{OrdinalTimeScale:hf,Property:df,TimeAxisParentLevel:uf,lowestGranularityUnitForTicks:ff,lowestGranularityUnitForValue:gf,minimumTimeAxisDatumGranularity:yf,dateTruncationForDomain:mf,intervalUnit:al,intervalStep:rl,intervalEpoch:nl,intervalMilliseconds:ll}=ol,Gs=class extends ol.CategoryAxis{constructor(e){super(e,new hf),this.parentLevel=new uf,this.minGranularity=void 0}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}updateScale(){super.updateScale();const{boundSeries:e,direction:t}=this;this.minGranularity=yf(e,t,void 0,void 0)}tickFormatParams(e,t,i,s){s??(s=ff(t));const o=mf(e),a=al(s),r=rl(s),n=nl(s);return{type:"date",unit:a,step:r,epoch:n,truncateDate:o}}datumFormatParams(e,t,i,s,o){if(typeof e=="number"&&(e=new Date(e)),s==null){const{minGranularity:m}=this,S=gf(e);m!=null&&ll(m)<ll(S)?s=m:s=S}const{datum:a,seriesId:r,legendItemName:n,key:l,source:c,property:p,domain:d,boundSeries:u}=t,f=al(s),y=rl(s),g=nl(s);return{type:"date",value:e,datum:a,seriesId:r,legendItemName:n,key:l,source:c,property:p,domain:d,boundSeries:u,unit:f,step:y,epoch:g,style:o}}};Gs.className="OrdinalTimeAxis",Gs.type="ordinal-time",h([df],Gs.prototype,"parentLevel",2);import{_ModuleSupport as Sf}from"ag-charts-community";import{_ModuleSupport as Ws}from"ag-charts-community";import{isNumberEqual as xf}from"ag-charts-core";import{_ModuleSupport as cl}from"ag-charts-community";import{clamp as pl,isNumberEqual as bf}from"ag-charts-core";var{ChartAxisDirection:Df,Property:vf,validateCrossLineValue:kf,normalizeAngle360FromDegrees:Mf,Group:If,Path:Af,Sector:Nf,RotatableText:Pf}=cl,hl=class extends Mt{constructor(){super(...arguments),this.positionAngle=void 0}};h([vf],hl.prototype,"positionAngle",2);var Fa=class extends Ze{constructor(){super(),this.direction=Df.Radius,this.label=new hl,this.polygonNode=new Af,this.sectorNode=new Nf,this.crossLineRange=new If,this.labelNode=new Pf,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t}=this;if(!t||!kf(this,t)){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.updateRadii();const{innerRadius:i,outerRadius:s}=this;e&&(e=i>=this.axisInnerRadius&&s<=this.axisOuterRadius),this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.assignCrossLineGroup(this.type==="range",this.crossLineRange)}updateRadii(){const{range:e,scale:t,type:i,axisInnerRadius:s,axisOuterRadius:o}=this;if(!t)return{innerRadius:0,outerRadius:0};const a=l=>o+s-l;let r,n;if(i==="line")r=a(t.convert(this.value)),n=r;else{const l=Math.abs(t?.bandwidth??0),c=e.map(p=>t.convert(p));r=a(Math.max(...c)),n=a(Math.min(...c))+l}this.outerRadius=r,this.innerRadius=n}drawPolygon(e,t,i){t.forEach((s,o)=>{const a=e*Math.cos(s),r=e*Math.sin(s);o===0?i.path.moveTo(a,r):i.path.lineTo(a,r)}),i.path.closePath()}updatePolygonNode(e){const{gridAngles:t,polygonNode:i,scale:s,shape:o,type:a,innerRadius:r,outerRadius:n}=this;if(!e||o!=="polygon"||!s||!t){i.visible=!1;return}i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(n-l,t,i);const c=t.slice().reverse(),p=a==="line"?n-l:r+l;this.drawPolygon(p,c,i),this.setSectorNodeProps(i)}updateSectorNode(e){const{axisInnerRadius:t,axisOuterRadius:i,scale:s,sectorNode:o,shape:a,innerRadius:r,outerRadius:n}=this;if(!e||a!=="circle"||!s){o.visible=!1;return}o.visible=!0,o.startAngle=0,o.endAngle=2*Math.PI;const l=this.getPadding(),c=pl(t,r+l,i),p=pl(t,n-l,i);o.innerRadius=Math.min(c,p),o.outerRadius=Math.max(c,p),this.setSectorNodeProps(o)}updateLabelNode(e){const{innerRadius:t,label:i,labelNode:s,scale:o,shape:a,type:r}=this;if(!e||i.enabled===!1||!i.text||!o){s.visible=!1;return}const n=Mf((i.positionAngle??0)-90),l=(bf(n,0)||n>0)&&n<Math.PI,c=l?n-Math.PI/2:n+Math.PI/2;let p;const d=this.gridAngles??[];r==="line"?p=t+i.padding:a==="circle"||d.length<3?p=t-i.padding:p=t*Math.cos(Math.PI/d.length)-i.padding;const u=p*Math.cos(n),f=p*Math.sin(n);let y;r==="line"?y=l?"top":"bottom":y=l?"bottom":"top",this.setLabelNodeProps(s,u,f,y,c)}getPadding(){const{scale:e}=this;if(!e)return 0;const t=Math.abs(e.bandwidth??0),i=Math.abs(e.step??0);return e instanceof cl.BandScale?(i-t)/2:0}};Fa.className="RadiusCrossLine";var{ChartAxisDirection:Lf,ZIndexMap:Rf,Property:Ea,normalizeAngle360:dl,toRadians:Of,Caption:Cf,Group:Tf,TransformableGroup:ul,Path:wf,Line:fl,Selection:gl,AxisTickGenerator:_f,AxisGroupZIndexMap:Ff}=Ws,Ba=class extends Ws.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};h([Ea],Ba.prototype,"autoRotate",2),h([Ea],Ba.prototype,"autoRotateAngle",2);var Vs=class extends Ws.PolarAxis{constructor(e,t){super(e,t),this.positionAngle=0,this.gridLineGroupSelection=gl.select(this.gridLineGroup,fl,!1),this.tickGenerator=new _f(this),this.generatedTicks=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new ul({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new ul({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new fl({name:`${this.id}-Axis-line`,zIndex:Ff.AxisLine})),this.gridPathGroup=this.gridGroup.appendChild(new Tf({name:`${this.id}-gridPaths`,zIndex:Rf.AXIS_GRID})),this.gridPathSelection=gl.select(this.gridPathGroup,wf),this.headingLabelGroup.appendChild(this.title.caption.node),this.cleanup.register(this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}get direction(){return Lf.Radius}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:s}=this,o=e*s,a=Of(i);return{translationX:t.x,translationY:t.y-e-o,rotation:a,rotationCenterX:0,rotationCenterY:e+o}}update(){super.update(),this.updateTitle(),this.updateGridLines();const{enabled:e,stroke:t,width:i}=this.line;this.lineNode.setProperties({stroke:t,strokeWidth:e?i:0,x1:0,y1:this.range[0],x2:0,y2:this.range[1]})}updatePosition(){super.updatePosition();const e=this.getAxisTransform();this.tickLineGroup.setProperties(e),this.tickLabelGroup.setProperties(e),this.lineNodeGroup.setProperties(e),this.headingLabelGroup.setProperties(e)}calculateRotations(){return{rotation:0,parallelFlipRotation:0,regularFlipRotation:-Math.PI/2}}calculateTickLayout(e,t,i){const o=-Math.PI/2,a=[0,1],r=this.label.getSideFlag(),n=r*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),{range:l,reverse:c,defaultTickMinSpacing:p}=this,d=this.tickGenerator.generateTicks({domain:e,range:l,reverse:c,niceMode:t,visibleRange:a,primaryTickCount:void 0,defaultTickMinSpacing:p,parallelFlipRotation:0,regularFlipRotation:o,labelX:n,sideFlag:r,removeOverflowLabels:!1}),{tickData:u}=d,{ticks:f,rawTicks:y,rawTickCount:g,tickDomain:m,fractionDigits:S,niceDomain:x=e}=u,b=f.map(v=>this.getTickLabelProps(v,d));return this.generatedTicks={ticks:f,labels:b},{ticks:y,tickDomain:m,niceDomain:x,rawTickCount:g,fractionDigits:S,timeInterval:void 0}}updateSelections(){const{generatedTicks:e}=this;if(!e)return;const{ticks:t,labels:i}=e;this.gridLineGroupSelection.update(this.gridLength?t:[]),this.tickLabelGroupSelection.update(i),this.gridPathSelection.update(this.gridLine.enabled?this.prepareGridPathTickData(t):[]),this.gridLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup(),this.gridPathSelection.cleanup()}updateLabels(){if(!this.label.enabled)return;const e=Ws.resetAxisLabelSelectionFn();this.tickLabelGroupSelection.each((t,i)=>{t.fill=i.fill,t.fontFamily=i.fontFamily,t.fontSize=i.fontSize,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.text=i.text,t.textBaseline=i.textBaseline,t.textAlign=i.textAlign??"center",t.setProperties(e(t,i))})}updateGridLines(){const{gridLine:{style:e,width:t},shape:i,generatedTicks:s}=this;if(!e||!s)return;const o=e.length,a=(u,f)=>{const{stroke:y,lineDash:g}=e[f%o];u.stroke=y,u.strokeWidth=t,u.lineDash=g,u.fill=void 0},[r,n]=this.gridRange??[0,2*Math.PI],l=xf(n-r,2*Math.PI),d=i==="circle"?(u,f)=>{const{path:y}=u;y.clear(!0);const g=this.getTickRadius(f);l?(y.moveTo(g,0),y.arc(0,0,g,0,2*Math.PI)):(y.moveTo(g*Math.cos(r),g*Math.sin(r)),y.arc(0,0,g,dl(r),dl(n))),l&&y.closePath()}:(u,f)=>{const{path:y}=u,g=this.gridAngles;if(y.clear(!0),!g||g.length<3)return;const m=this.getTickRadius(f);g.forEach((S,x)=>{const b=m*Math.cos(S),v=m*Math.sin(S);x===0?y.moveTo(b,v):y.lineTo(b,v),g.forEach((k,L)=>{const A=m*Math.cos(k),D=m*Math.sin(k);L===0?y.moveTo(A,D):y.lineTo(A,D)}),y.closePath()}),y.closePath()};this.gridPathSelection.each((u,f,y)=>{a(u,y),d(u,f)})}updateTitle(){const e=r=>r.defaultValue,{title:t,range:i}=this,{formatter:s=e}=this.title;t.caption.enabled=t.enabled,t.caption.fontFamily=t.fontFamily,t.caption.fontSize=t.fontSize,t.caption.fontStyle=t.fontStyle,t.caption.fontWeight=t.fontWeight,t.caption.color=t.color,t.caption.wrapping=t.wrapping;let o=!1;const a=t.caption.node;t.enabled&&(o=!0,a.rotation=Math.PI/2,a.x=Math.floor((i[0]+i[1])/2),a.y=-Cf.SMALL_PADDING,a.textAlign="center",a.textBaseline="bottom",a.text=this.callWithContext(s,this.getTitleFormatterParams(this.scale.domain))),a.visible=o}updateCrossLines(){this.crossLines.forEach(e=>{if(e instanceof Fa){const{shape:t,gridAngles:i,range:s,innerRadiusRatio:o}=this,a=s[0];e.shape=t,e.gridAngles=i,e.axisOuterRadius=a,e.axisInnerRadius=a*o}}),super.updateCrossLines()}createLabel(){return new Ba}getTickLabelProps(e,t){const{label:i}=this,{rotation:s,textBaseline:o,textAlign:a}=t,r=this.scale.range,n=e.tickLabel??"",c=i.getSideFlag()*(this.getTickSize()+i.spacing+this.seriesAreaPadding),p=n!==""&&n!=null,d=s;return{...this.getLabelStyles({value:e.tickLabel}),tickId:e.tickId,rotation:d,text:n,textAlign:a,textBaseline:o,visible:p,x:c,y:e.translation,rotationCenterX:c,rotationCenterY:e.translation,range:r}}};Vs.CrossLineConstructor=Fa,h([Ea],Vs.prototype,"positionAngle",2);var{ProxyPropertyOnWrite:yl,Property:Ga,CategoryScale:ml}=Sf,li=class extends Vs{constructor(e){super(e,new ml),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}normaliseDataDomain(e){return{domain:e,clipped:!1}}prepareGridPathTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t,innerRadiusRatio:i}=this,s=t.range[0],o=s*i;if(ml.is(t)){const a=t.domain,r=a.length-1-a.indexOf(e.tick);return r===0?o:t.inset+t.step*(r-.5)+t.bandwidth/2}else{const a=(s-o)/t.domain.length;return s-e.translation+o-a/2}}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:s,legendItemName:o,key:a,source:r,property:n,domain:l,boundSeries:c}=t;return{type:"category",value:e,datum:i,seriesId:s,legendItemName:o,key:a,source:r,property:n,domain:l,boundSeries:c}}};li.className="RadiusCategoryAxis",li.type="radius-category",h([Ga],li.prototype,"groupPaddingInner",2),h([yl("scale","paddingInner"),Ga],li.prototype,"paddingInner",2),h([yl("scale","paddingOuter"),Ga],li.prototype,"paddingOuter",2);import{_ModuleSupport as Ef}from"ag-charts-community";var{Property:Sl,normalisedExtentWithMetadata:Bf,LinearScale:Gf}=Ef,os=class extends Vs{constructor(e){super(e,new Gf),this.shape="polygon"}prepareGridPathTickData(e){const{scale:t}=this,i=t.domain[1];return e.filter(({tick:s})=>s!==i).sort((s,o)=>o.tick-s.tick)}getTickRadius(e){const{scale:t}=this,i=t.range[0],s=i*this.innerRadiusRatio;return i-e.translation+s}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:o}=Bf(e,t,i);return{domain:s,clipped:o}}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:s,seriesId:o,legendItemName:a,key:r,source:n,property:l,domain:c,boundSeries:p}=t;return{type:"number",value:e,datum:s,seriesId:o,legendItemName:a,key:r,source:n,property:l,domain:c,boundSeries:p,fractionDigits:i}}};os.className="RadiusNumberAxis",os.type="radius-number",h([Sl],os.prototype,"min",2),h([Sl],os.prototype,"max",2);var{ordinalTimeAxisOptionsDefs:Wf,angleNumberAxisOptionsDefs:Vf,angleCategoryAxisOptionsDefs:Kf,radiusNumberAxisOptionsDefs:zf,radiusCategoryAxisOptionsDefs:$f}=Ou,xl={type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,options:Wf,create:e=>new Gs(e)},bl={type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,options:Vf,create:e=>new Oi(e)},Dl={type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,options:Kf,create:e=>new ni(e)},vl={type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,options:zf,create:e=>new os(e)},kl={type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,options:$f,create:e=>new li(e)};import{_ModuleSupport as Hf}from"ag-charts-community";import{_ModuleSupport as Xf}from"ag-charts-community";var{Chart:Yf,Property:qf}=Xf;function Uf(e){return e.type==="sankey"||e.type==="chord"}var Ks=class extends Yf{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();const e=this.getOptions();this.nodes!==e.nodes&&(this.nodes=e.nodes);const{nodes:t}=this;this.series.forEach(i=>{Uf(i)&&i.setChartNodes(t)})}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const o=s.clone();this.seriesRect=o,this.animationRect=o,t.visible=this.series.some(a=>a.visible);for(const a of[t,i])a.translationX=Math.floor(o.x),a.translationY=Math.floor(o.y);this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:o,paddedRect:o}})}};Ks.className="FlowProportionChart",Ks.type="flow-proportion",h([qf],Ks.prototype,"nodes",2);var{isAgFlowProportionChartOptions:jf,flowProportionChartOptionsDefs:Jf}=Hf,Ml={type:"chart",name:"flow-proportion",enterprise:!0,options:Jf,detect:jf,create(e,t){return new Ks(e,t)}};import{_ModuleSupport as Zf}from"ag-charts-community";import{_ModuleSupport as Qf}from"ag-charts-community";var{Chart:eg}=Qf,Wa=class extends eg{getChartType(){return"gauge"}performLayout(e){const{seriesRoot:t,annotationRoot:i,series:s,seriesArea:o}=this,{layoutBox:a}=e,r=a.clone();a.shrink(o.padding.toJson()),this.seriesRect=r.clone().translate(r.x-a.x,r.y-a.y),this.animationRect=a,t.visible=s.some(n=>n.visible);for(const n of[t,i])n.translationX=Math.floor(a.x),n.translationY=Math.floor(a.y);this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:r,paddedRect:a}})}getAriaLabel(){const e=[],t=this.getCaptionText();t.length!==0&&e.push(t);for(const s of this.series)e.push(s.getCaptionText());const i=e.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}};Wa.className="GaugeChart",Wa.type="gauge";var{isAgGaugeChartOptions:tg,gaugeChartOptionsDefs:ig}=Zf,Il={type:"chart",name:"gauge",enterprise:!0,options:ig,detect:tg,create(e,t){return new Wa(e,t)}};import{_ModuleSupport as sg}from"ag-charts-community";import{_ModuleSupport as og}from"ag-charts-community";var{Chart:ag}=og,Va=class extends ag{getChartType(){return"hierarchy"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const o=s.clone();this.seriesRect=o,this.animationRect=o;for(const a of[t,i])a.translationX=Math.floor(o.x),a.translationY=Math.floor(o.y);t.visible=this.series[0].visible,t.setClipRect(o.clone()),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:o,paddedRect:o}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};Va.className="HierarchyChart",Va.type="hierarchy";var{isAgHierarchyChartOptions:rg,hierarchyChartOptionsDefs:ng}=sg,Al={type:"chart",name:"hierarchy",enterprise:!0,options:ng,detect:rg,create(e,t){return new Va(e,t)}};import{_ModuleSupport as lg}from"ag-charts-community";import{_ModuleSupport as cg}from"ag-charts-community";var{Chart:pg}=cg,Ka=class extends pg{getChartType(){return"standalone"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const o=s.clone();this.seriesRect=o,this.animationRect=o;for(const a of[t,i])a.translationX=Math.floor(s.x),a.translationY=Math.floor(s.y);t.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:o,paddedRect:s}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};Ka.className="StandaloneChart",Ka.type="standalone";var{isAgStandaloneChartOptions:hg,standaloneChartOptionsDefs:dg}=lg,Nl={type:"chart",name:"standalone",enterprise:!0,options:dg,detect:hg,create(e,t){return new Ka(e,t)}};import{_ModuleSupport as ug}from"ag-charts-community";import{_ModuleSupport as fg}from"ag-charts-community";var{Chart:gg,MercatorScale:Pl,NumberAxis:Ll,Property:yg}=fg;function Rl(e){return e.type==="map-shape"||e.type==="map-line"||e.type==="map-marker"||e.type==="map-shape-background"||e.type==="map-line-background"}var zs=class extends gg{constructor(e,t){super(e,t),this.xAxis=new Ll(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new Ll(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const e=this.getOptions();this.topology!==e.topology&&(this.topology=e.topology);const{topology:t}=this;this.series.forEach(i=>{Rl(i)&&i.setChartTopology(t)})}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const o=s.clone();this.seriesRect=o,this.animationRect=o;const a=this.series.filter(Rl),r=a.reduce((c,p)=>{if(!p.visible)return c;const d=p.topologyBounds;return d==null?c:c==null?d:c.merge(d)},void 0);let n;if(r!=null){const{lon0:c,lat0:p,lon1:d,lat1:u}=r,f=[[c,p],[d,u]],y=Pl.bounds(f),{width:g,height:m}=o,S=Math.min(g/y.width,m/y.height),x=y.width*S,b=y.height*S,v=(g-x)/2,k=(m-b)/2,L=v,A=k,D=v+x,I=k+b,M=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),P=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),R=(D-L)/(M.max-M.min),w=L-R*M.min,N=(I-A)/(1-P.min-(1-P.max)),C=A-N*(1-P.max);n=new Pl(f,[[w,C],[w+R,C+N]])}a.forEach(c=>{c.scale=n});const l=this.series.some(c=>c.visible);t.visible=l;for(const c of[t,i])c.translationX=Math.floor(o.x),c.translationY=Math.floor(o.y),c.setClipRect(o.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:l,rect:o,paddedRect:o}})}};zs.className="TopologyChart",zs.type="topology",h([yg],zs.prototype,"topology",2);var{isAgTopologyChartOptions:mg,topologyChartOptionsDefs:Sg}=ug,Ol={type:"chart",name:"topology",enterprise:!0,options:Sg,detect:mg,create(e,t){return new zs(e,t)}};import{_ModuleSupport as xg}from"ag-charts-community";import{_ModuleSupport as bg}from"ag-charts-community";import{and as $s,arrayOf as Dg,arrayOfDefs as Cl,boolean as ci,constant as Tl,greaterThan as wl,lessThan as _l,number as pi,numberRange as vg,optionsDefs as Fl,or as hi,positiveNumber as za,ratio as Hs,required as kg,string as It,typeUnion as Mg,union as Ig}from"ag-charts-core";var{annotationCalloutStylesDefs:Ag,annotationNoteStylesDefs:Ng,annotationTextStylesDef:Pg,annotationCommentStylesDefs:Lg,annotationMeasurerStylesDefs:$a,annotationShapeStylesDefs:El,annotationChannelTextDefs:Rg,annotationCrossLineStyleDefs:Bl,annotationFibonacciStylesDefs:Gl,annotationLineStyleDefs:Wl,annotationLineTextDefs:Og,annotationDisjointChannelStyleDefs:Cg,annotationParallelChannelStyleDefs:Tg}=bg,as=Fl({__type:kg(Tl("date")),value:hi(It,pi)},"a serializable date object"),Vl=hi(It,pi,as),Ha=hi(Vl,Fl({value:Vl,groupPercentage:vg(-1,1)})),Kl={...Rg,label:It},Kt={...Og,label:It},fe={x:Ha,y:pi},wg=Mg({line:{...Wl,start:fe,end:fe,text:Kt},"horizontal-line":{...Bl,value:Ha,text:Kt},"vertical-line":{...Bl,value:Ha,text:Kt},"disjoint-channel":{...Cg,startHeight:za,endHeight:za,start:fe,end:fe,text:Kl},"parallel-channel":{...Tg,height:za,start:fe,end:fe,text:Kl},"fibonacci-retracement":{...Gl,start:fe,end:fe,text:Kt,reverse:ci},"fibonacci-retracement-trend-based":{...Gl,start:fe,end:fe,endRetracement:fe,text:Kt,reverse:ci},callout:{...Ag,start:fe,end:fe,text:It},comment:{...Lg,...fe,text:It},note:{...Ng,...fe,text:It},text:{...Pg,...fe,text:It},arrow:{...Wl,text:Kt,start:fe,end:fe},"arrow-up":{...El,...fe},"arrow-down":{...El,...fe},"date-range":{...$a,extendAbove:ci,extendBelow:ci,text:Kt,start:fe,end:fe},"price-range":{...$a,extendLeft:ci,extendRight:ci,text:Kt,start:fe,end:fe},"date-price-range":{...$a,text:Kt,start:fe,end:fe}},"an annotation initial state object"),_g={chartType:Ig("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),annotations:Cl(wg),legend:Cl({visible:ci,seriesId:It,itemId:It,legendItemName:It},"legend state array"),zoom:{rangeX:{start:hi(pi,as),end:hi(pi,as)},rangeY:{start:hi(pi,as),end:hi(pi,as)},ratioX:{start:$s(Hs,_l("end")),end:$s(Hs,wl("start"))},ratioY:{start:$s(Hs,_l("end")),end:$s(Hs,wl("start"))},autoScaledAxes:Dg(Tl("y"))}};import{_ModuleSupport as Fg}from"ag-charts-community";import{array as Eg,arrayOfDefs as Bg,boolean as rs,callback as Gg,color as Xs,fontOptionsDef as Wg,number as zl,positiveNumber as ft,ratio as Vg,typeUnion as Kg}from"ag-charts-core";import{_ModuleSupport as zg}from"ag-charts-community";import{_ModuleSupport as Xa}from"ag-charts-community";import"ag-charts-core";function $l(e){return typeof e?.datum=="object"?e.datum:null}function $g(e){return{from:e?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function Hg(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}import{_ModuleSupport as Hl}from"ag-charts-community";import{Logger as Xg}from"ag-charts-core";var{ScalableGroup:Yg,Rect:ns,Line:ls,BBox:qg,Selection:Xl,applyShapeFillBBox:Ug}=Hl,jg=class extends Yg{constructor(){super(),this.append([new ns({tag:0}),new ns({tag:2}),new ns({tag:1}),new ls({tag:3}),new ls({tag:3}),new ls({tag:4}),new ls({tag:4})])}updateDatumStyles(e,t,i,s,o){const{bandwidth:a,scaledValues:{xValue:r,medianValue:n}}=e;let{minValue:l,q1Value:c,q3Value:p,maxValue:d}=e.scaledValues;(i&&!s||!i&&s)&&([d,p,c,l]=[l,c,p,d]);const u=(G,W,V,K)=>i?{y:G,x:W,width:K,height:V}:{x:G,y:W,width:V,height:K},f=(G,W,V)=>i?{y1:G,y2:W,x:V}:{x1:G,x2:W,y:V},y=(G,W,V)=>i?{x1:W,x2:V,y:G}:{x:G,y1:W,y2:V},g=(G,W,V,K)=>({x:G,y:W,width:V,height:K}=u(G,W,V,K),new qg(G,W,V,K)),{opacity:m,fill:S,fillOpacity:x,stroke:b,strokeWidth:v,strokeOpacity:k,lineDash:L,lineDashOffset:A,cornerRadius:D,cap:I,whisker:M}=t;this.opacity=m??1;const P=Xl.select(this,ns),[R]=P.selectByTag(0),[w]=P.selectByTag(2),[N]=P.selectByTag(1),C=P.selectByTag(3),T=P.selectByTag(4);M.strokeWidth>a&&(M.strokeWidth=a);const O=u(c,r,p-c,a);w.setProperties(O),R.setProperties(O),R.setProperties({cornerRadius:D});const _=Math.max(Math.round(n-v/2),c+v),F=Math.min(Math.round(n+v/2),p-v);N.setProperties(O),N.setProperties({visible:_<F,cornerRadius:D,clipBBox:g(_,r+v,F-_,Math.max(0,a-v*2))});const E=Math.floor(r+a*(1-I.lengthRatio)/2),B=Math.ceil(r+a*(1+I.lengthRatio)/2);T[0].setProperties(y(l,E,B)),T[1].setProperties(y(d,E,B)),C[0].setProperties(f(Math.round(l+M.strokeWidth/2),c,Math.floor(r+a/2))),C[1].setProperties(f(p,Math.round(d-M.strokeWidth/2),Math.floor(r+a/2))),Ug(R,S,o),R.setProperties({fill:S,fillOpacity:x,strokeWidth:v*2,strokeOpacity:0}),N.setProperties({fill:b,fillOpacity:k,strokeWidth:0});for(const G of[...C,...T])G.setProperties(M);w.setProperties({stroke:b,strokeWidth:v,strokeOpacity:k,lineDash:L,lineDashOffset:A,cornerRadius:D,fillOpacity:0})}distanceSquared(e,t){const i=Xl.selectByClass(this,ns,ls);return Hl.nearestSquared(e,t,i).distanceSquared}get midPoint(){const e=this.datum;return e.midPoint===void 0?(Xg.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):e.midPoint}};import{_ModuleSupport as Jg}from"ag-charts-community";var{BaseProperties:Yl,FillGradientDefaults:Zg,FillPatternDefaults:Qg,FillImageDefaults:ey,AbstractBarSeriesProperties:ty,makeSeriesTooltip:iy,Property:ne,mergeDefaults:sy}=Jg,ql=class extends Yl{constructor(){super(...arguments),this.lengthRatio=.5}};h([ne],ql.prototype,"lengthRatio",2);var Ci=class extends Yl{};h([ne],Ci.prototype,"stroke",2),h([ne],Ci.prototype,"strokeWidth",2),h([ne],Ci.prototype,"strokeOpacity",2),h([ne],Ci.prototype,"lineDash",2),h([ne],Ci.prototype,"lineDashOffset",2);var ce=class extends ty{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Zg,this.fillPatternDefaults=new Qg,this.fillImageDefaults=new ey,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new ql,this.whisker=new Ci,this.tooltip=iy()}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:o}=this,a=super.toJson();return a.whisker=sy(a.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:o}),a}};h([ne],ce.prototype,"xKey",2),h([ne],ce.prototype,"minKey",2),h([ne],ce.prototype,"q1Key",2),h([ne],ce.prototype,"medianKey",2),h([ne],ce.prototype,"q3Key",2),h([ne],ce.prototype,"maxKey",2),h([ne],ce.prototype,"xName",2),h([ne],ce.prototype,"yName",2),h([ne],ce.prototype,"minName",2),h([ne],ce.prototype,"q1Name",2),h([ne],ce.prototype,"medianName",2),h([ne],ce.prototype,"q3Name",2),h([ne],ce.prototype,"maxName",2),h([ne],ce.prototype,"fill",2),h([ne],ce.prototype,"fillGradientDefaults",2),h([ne],ce.prototype,"fillPatternDefaults",2),h([ne],ce.prototype,"fillImageDefaults",2),h([ne],ce.prototype,"fillOpacity",2),h([ne],ce.prototype,"stroke",2),h([ne],ce.prototype,"strokeWidth",2),h([ne],ce.prototype,"strokeOpacity",2),h([ne],ce.prototype,"lineDash",2),h([ne],ce.prototype,"lineDashOffset",2),h([ne],ce.prototype,"cornerRadius",2),h([ne],ce.prototype,"itemStyler",2),h([ne],ce.prototype,"cap",2),h([ne],ce.prototype,"whisker",2),h([ne],ce.prototype,"tooltip",2);var{extractDecoratedProperties:Ul,fixNumericExtent:oy,keyProperty:ay,mergeDefaults:Ya,SeriesNodePickMode:jl,SMALLEST_KEY_INTERVAL:ry,valueProperty:cs,diff:ny,animationValidation:ly,computeBarFocusBounds:cy,createDatumId:Jl,ContinuousScale:py,ChartAxisDirection:hy,motion:Zl,isGradientFill:dy,getShapeStyle:ps}=Xa,uy=class extends Xa.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.minKey=s.properties.minKey,this.q1Key=s.properties.q1Key,this.medianKey=s.properties.medianKey,this.q3Key=s.properties.q3Key,this.maxKey=s.properties.maxKey}},Ys=class extends Xa.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[jl.NEAREST_NODE,jl.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},propertyNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},categoryKey:"xValue",pathsPerSeries:[],hasHighlightedLabels:!0}),this.properties=new ce,this.NodeEvent=uy}async processData(e){if(!this.visible)return;const{xKey:t,minKey:i,q1Key:s,medianKey:o,q3Key:a,maxKey:r}=this.properties,n=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:p,xScaleType:d,yScaleType:u}=this.getScaleInformation({xScale:l,yScale:c}),f=[];n&&this.processedData&&f.push(ny(this.id,this.processedData)),n&&f.push(ly());const{processedData:y}=await this.requestDataModel(e,this.data,{props:[ay(t,d,{id:"xValue"}),cs(i,u,{id:"minValue"}),cs(s,u,{id:"q1Value"}),cs(o,u,{id:"medianValue"}),cs(a,u,{id:"q3Value"}),cs(r,u,{id:"maxValue"}),...p?[ry]:[],...f]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:o,def:a}=i.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[o];return a.type==="key"&&a.valueType==="category"?r:this.padBandExtent(r)}const s=this.domainForClippedRange(e,["minValue","maxValue"],"xValue");return oy(s)}getSeriesRange(e,t){return this.domainForVisibleRange(hy.Y,["maxValue","minValue"],"xValue",t)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&i&&s&&o))return;const{xKey:a,fill:r,fillOpacity:n,stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:d,lineDashOffset:u,cap:f,whisker:y}=this.properties,g=[],m=t.resolveKeysById(this,"xValue",i),S=t.resolveColumnById(this,"minValue",i),x=t.resolveColumnById(this,"q1Value",i),b=t.resolveColumnById(this,"medianValue",i),v=t.resolveColumnById(this,"q3Value",i),k=t.resolveColumnById(this,"maxValue",i),{barWidth:L,groupIndex:A}=this.updateGroupScale(s),D=py.is(s.scale)?L*-.5:0,{groupScale:I}=this,M=this.isVertical(),P={itemId:a,nodeData:g,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};return e&&(i.dataSources.get(this.id)??[]).forEach((w,N)=>{const C=m[N];if(C==null)return;const T=S[N],O=x[N],_=b[N],F=v[N],E=k[N];if([T,O,_,F,E].some(U=>typeof U!="number")||T>O||O>_||_>F||F>E)return;const B={xValue:Math.round(s.scale.convert(C)),minValue:Math.round(o.scale.convert(T)),q1Value:Math.round(o.scale.convert(O)),medianValue:Math.round(o.scale.convert(_)),q3Value:Math.round(o.scale.convert(F)),maxValue:Math.round(o.scale.convert(E))};B.xValue+=Math.round(I.convert(String(A)))+D;const G=Math.round(L),W=Math.abs(B.q3Value-B.q1Value),V=B.xValue+G/2,K=Math.min(B.q3Value,B.q1Value)+W/2,$={x:M?V:K,y:M?K:V};let X;M?X={x:$.x-G/2,y:B.minValue,width:G,height:B.maxValue-B.minValue}:X={x:B.minValue,y:$.y-G/2,width:B.maxValue-B.minValue,height:G},g.push({series:this,itemId:C,datum:w,datumIndex:N,xKey:a,bandwidth:G,scaledValues:B,cap:f,whisker:y,fill:r,fillOpacity:n,stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:d,lineDashOffset:u,midPoint:$,focusRect:X})}),P}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:r,fillGradientDefaults:n,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:ps({fill:e,fillOpacity:t,stroke:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:r},n,l,c)}}getLegendData(e){const{id:t,ctx:{legendManager:i},visible:s}=this,{xKey:o,yName:a,showInLegend:r,legendItemName:n}=this.properties;return!o||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:t}),label:{text:n??a??t},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!r}]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:r,yName:n,medianKey:l,medianName:c,q1Key:p,q1Name:d,q3Key:u,q3Name:f,minKey:y,minName:g,maxKey:m,maxName:S,legendItemName:x,tooltip:b}=o,v=this.getCategoryAxis(),k=this.getValueAxis();if(!i||!s||!v||!k)return;const L=s.dataSources.get(this.id)?.[e],A=i.resolveKeysById(this,"xValue",s)[e],D=i.resolveColumnById(this,"minValue",s)[e],I=i.resolveColumnById(this,"q1Value",s)[e],M=i.resolveColumnById(this,"medianValue",s)[e],P=i.resolveColumnById(this,"q3Value",s)[e],R=i.resolveColumnById(this,"maxValue",s)[e];if(A==null)return;const w=this.getItemBaseStyle(!1);Object.assign(w,this.getItemStyleOverrides(String(e),L,w,!1));const N=[{label:g,fallbackLabel:y,value:k.formatDatum(D,"tooltip",t,x,L,y)},{label:d,fallbackLabel:p,value:k.formatDatum(I,"tooltip",t,x,L,p)},{label:c,fallbackLabel:l,value:k.formatDatum(M,"tooltip",t,x,L,l)},{label:f,fallbackLabel:u,value:k.formatDatum(P,"tooltip",t,x,L,u)},{label:S,fallbackLabel:m,value:k.formatDatum(R,"tooltip",t,x,L,m)}];return this.formatTooltipWithContext(b,{heading:v.formatDatum(A,"tooltip",t,x,L,a),title:x??n,symbol:this.legendItemSymbol(),data:N},{seriesId:t,datum:L,title:n,xKey:a,xName:r,yName:n,medianKey:l,medianName:c,q1Key:p,q1Name:d,q3Key:u,q3Name:f,minKey:y,minName:g,maxKey:m,maxName:S,...w})}animateEmptyUpdateReady({datumSelection:e}){const t=this.isVertical(),{from:i,to:s}=$g(t);Zl.resetMotion([e],Hg(t)),Zl.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[e],i,s,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}getItemBaseStyle(e){const{properties:t}=this,{cornerRadius:i,cap:s,whisker:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}=t,l=this.getHighlightStyle(e),c=this.getStrokeWidth(t.strokeWidth);return ps({fill:l?.fill??t.fill,fillOpacity:l?.fillOpacity??t.fillOpacity,stroke:l?.stroke??t.stroke,strokeWidth:l?.strokeWidth??c,strokeOpacity:l?.strokeOpacity??t.strokeOpacity,lineDash:l?.lineDash??t.lineDash??[],lineDashOffset:l?.lineDashOffset??t.lineDashOffset,cornerRadius:l?.cornerRadius??i,cap:s,whisker:o,opacity:l?.opacity??1},a,r,n)}getItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{xKey:r,minKey:n,q1Key:l,medianKey:c,q3Key:p,maxKey:d,fillGradientDefaults:u,fillPatternDefaults:f,fillImageDefaults:y,itemStyler:g}=a;if(g==null)return;const m=this.cachedDatumCallback(Jl(e,s?"highlight":"node"),()=>this.callWithContext(g,{seriesId:o,datum:t,xKey:r,minKey:n,q1Key:l,medianKey:c,q3Key:p,maxKey:d,highlighted:s,...i}));return ps(m,u,f,y)}updateDatumNodes({datumSelection:e,isHighlight:t}){const i=this.isVertical(),s=this.getValueAxis()?.isReversed();e.each((o,a)=>{let r=this.getFormattedStyles(a,t?"highlight":"node");const n=this.getHighlightStyle(t,a?.datumIndex);r=Ya(n,r);const{stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:d,lineDashOffset:u}=r;r.whisker=Ya(r.whisker,{stroke:l,strokeWidth:c,strokeOpacity:p,lineDash:d,lineDashOffset:u});const f=this.getShapeFillBBox();o.updateDatumStyles(a,r,i,s,f)})}updateLabelNodes(){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}nodeFactory(){return new jg}getFormattedStyles(e,t){const{id:i,properties:s}=this,{xKey:o,minKey:a,q1Key:r,medianKey:n,q3Key:l,maxKey:c,itemStyler:p,cornerRadius:d,fillGradientDefaults:u,fillPatternDefaults:f,fillImageDefaults:y}=s,{stroke:g,strokeWidth:m,strokeOpacity:S,lineDash:x,lineDashOffset:b,cap:v,whisker:k}=e,L=$l(e);let A,D=1;dy(e.fill)?A=e.fill:(A=e.fill,D=s.fillOpacity);let I=ps({fill:A,fillOpacity:D,stroke:g,strokeWidth:m,strokeOpacity:S,lineDash:x,lineDashOffset:b,cornerRadius:d,cap:Ul(v),whisker:Ul(k)},u,f,y);if(p){const M=this.cachedDatumCallback(Jl(e.datumIndex,t),()=>this.callWithContext(p,{datum:L,seriesId:i,highlighted:t==="highlight",...I,xKey:o,minKey:a,q1Key:r,medianKey:n,q3Key:l,maxKey:c}));M&&(I=ps(Ya(M,I),u,f,y))}return I}computeFocusBounds({datumIndex:e}){return cy(this,this.contextNodeData?.nodeData[e].focusRect)}};Ys.className="BoxPlotSeries",Ys.type="box-plot";import{_ModuleSupport as fy}from"ag-charts-community";import{boolean as gy,constant as yy,required as di,string as it}from"ag-charts-core";var{boxPlotSeriesThemeableOptionsDef:my,commonSeriesOptionsDefs:Sy}=fy,xy={...Sy,...my,type:di(yy("box-plot")),xKey:di(it),minKey:di(it),q1Key:di(it),medianKey:di(it),q3Key:di(it),maxKey:di(it),xName:it,yName:it,minName:it,q1Name:it,medianName:it,q3Name:it,maxName:it,grouped:gy,legendItemName:it};import{_ModuleSupport as qs}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:Ql},multiSeriesHighlightStyle:by}=qs,Dy={series:{direction:"vertical",fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fill"},{$mix:[qs.SAFE_FILL_OPERATION,{$ref:"chartBackgroundColor"},.7]}]},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:qs.FILL_PATTERN_DEFAULTS,fillImageDefaults:qs.FILL_IMAGE_DEFAULTS,strokeWidth:2,highlight:by()},axes:{[Ql.NUMBER]:{crosshair:{snap:!1}},[Ql.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},ML={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:e=>new Ys(e),defaultAxes:zg.DIRECTION_SWAP_AXES,themeTemplate:Dy,groupable:!0},qa={type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,options:xy,create:e=>new Ys(e)};import{_ModuleSupport as vy}from"ag-charts-community";import{_ModuleSupport as ky}from"ag-charts-community";import{_ModuleSupport as Ua}from"ag-charts-community";import{Logger as ec}from"ag-charts-core";import{_ModuleSupport as My}from"ag-charts-community";var{findMinMax:Iy}=My,st=0,gt=1,yt=2,mt=3,At=4;function ja(e,t=1){let i=Math.ceil(Math.log2(e.length/t))-1;return i=Math.min(Math.max(i,0),16),2**i|0}function Ja(e){return Iy(e.map(t=>Number(t)))}function Za(e,t,i){return(e.valueOf()-t)/(i-t)}function Qa(e,t){return Math.min(Math.floor(e*t),t-1)*At|0}function er(e,t,i,s,o,a){const r=new Int32Array(a*At).fill(-1),n=new Float64Array(a*At).fill(NaN);for(let l=0;l<e.length;l+=1){const c=e[l],p=t[l],d=i[l];if(c==null||p==null||d==null)continue;const u=Za(c,s,o),f=p.valueOf(),y=d.valueOf(),g=Qa(u,a),m=r[g+st]===-1;(m||u<n[g+st])&&(r[g+st]=l,n[g+st]=u),(m||u>n[g+gt])&&(r[g+gt]=l,n[g+gt]=u),(m||y<n[g+yt])&&(r[g+yt]=l,n[g+yt]=y),(m||f>n[g+mt])&&(r[g+mt]=l,n[g+mt]=f)}return{indexData:r,valueData:n}}function tr(e,t,i,{inPlace:s=!1}={}){const o=i/2|0,a=s?e:new Int32Array(o*At),r=s?t:new Float64Array(o*At);for(let n=0;n<o;n+=1){const l=n*At|0,c=l*2|0,p=c+At|0,d=e[p+st]===-1,u=d||t[c+st]<t[p+st]?c:p;a[l+st]=e[u+st],r[l+st]=t[u+st];const f=d||t[c+gt]>t[p+gt]?c:p;a[l+gt]=e[f+gt],r[l+gt]=t[f+gt];const y=d||t[c+yt]<t[p+yt]?c:p;a[l+yt]=e[y+yt],r[l+yt]=t[y+yt];const g=d||t[c+mt]>t[p+mt]?c:p;a[l+mt]=e[g+mt],r[l+mt]=t[g+mt]}return{maxRange:o,indexData:a,valueData:r}}var Ay=1e3,tc=st,Ny=mt,Py=yt,ic=gt;function Ly(e,t,i,s){if(e.length<Ay)return;const[o,a]=Ja(s);let r=ja(e),{indexData:n,valueData:l}=er(e,t,i,o,a,r);const c=[{maxRange:r,indexData:n}];for(;r>64;)({indexData:n,valueData:l,maxRange:r}=tr(n,l,r)),c.push({maxRange:r,indexData:n});return c.reverse(),c}var{fixNumericExtent:Ry,keyProperty:Oy,createDatumId:sc,SeriesNodePickMode:oc,ChartAxisDirection:ac,SMALLEST_KEY_INTERVAL:Cy,valueProperty:Us,diff:Ty,animationValidation:wy,computeBarFocusBounds:_y,visibleRangeIndices:rc,ContinuousScale:Fy,DiscreteTimeScale:Ey,BandScale:By,getShapeStyle:ir}=Ua,Gy=class extends Ua.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.openKey=s.properties.openKey,this.closeKey=s.properties.closeKey,this.highKey=s.properties.highKey,this.lowKey=s.properties.lowKey}},nc=class extends Ua.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[oc.AXIS_ALIGNED,oc.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},propertyNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.NodeEvent=Gy,this.dataAggregationFilters=void 0}async processData(e){if(!this.visible)return;const{xKey:t,openKey:i,closeKey:s,highKey:o,lowKey:a}=this.properties,r=!this.ctx.animationManager.isSkipped(),n=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:p,yScaleType:d}=this.getScaleInformation({xScale:n,yScale:l}),u=[];r&&(this.processedData&&u.push(Ty(this.id,this.processedData)),u.push(wy())),i&&u.push(Us(i,d,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:f,processedData:y}=await this.requestDataModel(e,this.data,{props:[Oy(t,p,{id:"xValue"}),Us(s,d,{id:"closeValue"}),Us(o,d,{id:"highValue"}),Us(a,d,{id:"lowValue"}),...c?[Cy]:[],...u]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(f,y),this.animationState.transition("updateData")}aggregateData(e,t){const i=this.axes[ac.X];if(i==null||!(Fy.is(i.scale)||Ey.is(i.scale)))return;const s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"highValue",t),a=e.resolveColumnById(this,"lowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[r];return Ly(s,o,a,n)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:o,def:a}=i.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[o];return a.type==="key"&&a.valueType==="category"?r:this.padBandExtent(r)}const s=this.domainForClippedRange(e,["highValue","lowValue"],"xValue");return Ry(s)}getSeriesRange(e,t){return this.domainForVisibleRange(ac.Y,["highValue","lowValue"],"xValue",t)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["highValue","lowValue"],e,t,i)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&i&&s&&o))return;const a=[],{xKey:r,highKey:n,lowKey:l}=this.properties,c=i.dataSources.get(this.id)??[],p=t.resolveKeysById(this,"xValue",i),d=t.resolveColumnById(this,"openValue",i),u=t.resolveColumnById(this,"closeValue",i),f=t.resolveColumnById(this,"highValue",i),y=t.resolveColumnById(this,"lowValue",i),{groupScale:g}=this,{barWidth:m,groupIndex:S}=this.updateGroupScale(s),x=g.convert(String(S)),b=m>=1?m:g.rawBandwidth,v=By.is(s.scale),k={itemId:r,nodeData:a,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!e)return k;const L=(N,C,T,O,_,F,E,B)=>{const G=c[N],W=v?E/2:0,V=s.scale.convert(C)+x+W,K=o.scale.convert(T),$=o.scale.convert(O),X=o.scale.convert(_),U=o.scale.convert(F),J=O>T,oe=J?"up":"down",j=Math.min(X,U),Y=Math.max(X,U)-j,le={x:V,y:j+Y/2};a.push({series:this,itemId:oe,datum:G,datumIndex:N,xKey:r,xValue:C,openValue:T,closeValue:O,highValue:_,lowValue:F,midPoint:le,aggregatedValue:O,isRising:J,centerX:V,width:E,y:j,height:Y,yOpen:K,yClose:$,crisp:B})},{dataAggregationFilters:A}=this,D=s.scale,[I,M]=D.range,P=M-I,R=N=>D.convert(p[N])+x,w=A?.find(N=>N.maxRange>P);if(w==null){let[N,C]=rc(1,c.length,s.range,T=>{const O=R(T);return[O,O+b]});i.input.count<1e3&&(N=0,C=i.input.count);for(let T=N;T<C;T+=1){const O=p[T];if(O==null)continue;const _=d[T],F=u[T],E=f[T],B=y[T],G=B!=null&&B<=_&&B<=F,W=E!=null&&E>=_&&E>=F;if(!G){ec.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);continue}if(!W){ec.warnOnce(`invalid high value for key [${n}] in data element, high value cannot be lower than datum open or close values.`);continue}L(T,O,_,F,E,B,b,!0)}}else{const{maxRange:N,indexData:C}=w,[T,O]=rc(1,N,s.range,_=>{const F=_*At,E=C[F+tc],B=C[F+ic];if(E!==-1)return[R(E),R(B)+b]});for(let _=T;_<O;_+=1){const F=_*At,E=C[F+tc],B=C[F+ic],G=C[F+Ny],W=C[F+Py];if(E===-1)continue;const V=(E+B)/2|0,K=p[V];if(K==null)continue;const $=d[E],X=u[B],U=f[G],J=y[W],oe=Math.abs(R(B)-R(E))+b;L(V,K,$,X,U,J,oe,!1)}}return k}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}updateLabelNodes(e){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}getItemBaseStyle(e,t){const{properties:i}=this,s=i.item[e],o=t?i.highlightStyle.item:void 0,a={fill:o?.fill??s.fill,fillOpacity:o?.fillOpacity??s.fillOpacity,stroke:o?.stroke??s.stroke,strokeWidth:o?.strokeWidth??s.strokeWidth,strokeOpacity:o?.strokeOpacity??s.strokeOpacity,lineDash:o?.lineDash??s.lineDash,lineDashOffset:o?.lineDashOffset??s.lineDashOffset};return s.fillGradientDefaults&&s.fillPatternDefaults&&s.fillImageDefaults?ir(a,s.fillGradientDefaults,s.fillPatternDefaults,s.fillImageDefaults):a}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,n=r.item[i],{itemStyler:l}=r;if(l==null)return;const{xKey:c,openKey:p,closeKey:d,highKey:u,lowKey:f}=r,y=this.cachedDatumCallback(sc(e,o?"highlight":"node"),()=>this.callWithContext(l,{seriesId:a,datum:t,itemId:i,xKey:c,openKey:p,closeKey:d,highKey:u,lowKey:f,highlighted:o,...s}));return n.fillGradientDefaults&&n.fillPatternDefaults&&n.fillImageDefaults?ir(y,n.fillGradientDefaults,n.fillPatternDefaults,n.fillImageDefaults):y}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:r,yName:n,openKey:l,openName:c,highKey:p,highName:d,lowKey:u,lowName:f,closeKey:y,closeName:g,legendItemName:m,tooltip:S}=o,x=this.getCategoryAxis(),b=this.getValueAxis();if(!i||!s||!x||!b)return;const v=s.dataSources.get(this.id)?.[e],k=i.resolveKeysById(this,"xValue",s)[e],L=i.resolveColumnById(this,"openValue",s)[e],A=i.resolveColumnById(this,"highValue",s)[e],D=i.resolveColumnById(this,"lowValue",s)[e],I=i.resolveColumnById(this,"closeValue",s)[e];if(k==null)return;const M=I>=L?"up":"down",P=this.properties.item[M],R=this.getItemBaseStyle(M,!1);Object.assign(R,this.getItemStyleOverrides(String(e),v,M,R,!1));let w={fill:P.fill??P.stroke,fillOpacity:P.fillOpacity??P.strokeOpacity??1,stroke:P.stroke,strokeWidth:P.strokeWidth??1,strokeOpacity:P.strokeOpacity??1,lineDash:P.lineDash??[0],lineDashOffset:P.lineDashOffset??0};return P.fillGradientDefaults&&P.fillPatternDefaults&&P.fillImageDefaults&&(w=ir(w,P.fillGradientDefaults,P.fillPatternDefaults,P.fillImageDefaults)),this.formatTooltipWithContext(S,{heading:x.formatDatum(k,"tooltip",t,m,v,a),title:m,symbol:{marker:w},data:[{label:c,fallbackLabel:l,value:b.formatDatum(L,"tooltip",t,m,v,l)},{label:d,fallbackLabel:p,value:b.formatDatum(A,"tooltip",t,m,v,p)},{label:f,fallbackLabel:u,value:b.formatDatum(D,"tooltip",t,m,v,u)},{label:g,fallbackLabel:y,value:b.formatDatum(I,"tooltip",t,m,v,y)}]},{seriesId:t,datum:v,title:n,itemId:M,xKey:a,xName:r,yName:n,openKey:l,openName:c,highKey:p,highName:d,lowKey:u,lowName:f,closeKey:y,closeName:g,...R})}getDatumId(e){return sc(e.xValue)}computeFocusBounds(e){const t=this.getNodeData()?.at(e.datumIndex);if(t==null)return;const{centerX:i,y:s,width:o,height:a}=t,r={x:i-o/2,y:s,width:o,height:a};return _y(this,r)}};import{_ModuleSupport as Wy}from"ag-charts-community";import{_ModuleSupport as Vy}from"ag-charts-community";var{Path:Ky,SceneChangeDetection:jt,BBox:zy}=Vy,Ft=class extends Ky{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1,this.strokeAlignment=0}computeBBox(){const{centerX:e,y:t,width:i,height:s}=this;return new zy(e-i/2,t,i,s)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:e,width:t,height:i,crisp:s,strokeAlignment:o}=this;let{centerX:a,yOpen:r,yClose:n}=this,l=a-t/2,c=a+t/2,p=e,d=e+i;if(s&&t>1){a=this.align(a),r=this.align(r),n=this.align(n);const f=this.align(t/2);l=a-f,c=a+f,p=this.align(e),d=p+this.align(p,i)}const u=(p+d)/2;return a+=o,l+=o,c+=o,p-=o,d+=o,r+=r<u?o:-o,n+=n<u?o:-o,{centerX:a,x0:l,x1:c,y0:p,y1:d,yOpen:r,yClose:n}}executeStroke(e,t){const{width:i,strokeWidth:s}=this;i<s&&(e.lineWidth=i),super.executeStroke(e,t)}};h([jt()],Ft.prototype,"centerX",2),h([jt()],Ft.prototype,"y",2),h([jt()],Ft.prototype,"width",2),h([jt()],Ft.prototype,"height",2),h([jt()],Ft.prototype,"yOpen",2),h([jt()],Ft.prototype,"yClose",2),h([jt()],Ft.prototype,"crisp",2),h([jt()],Ft.prototype,"strokeAlignment",2);var $y=class extends Ft{updatePath(){const{path:e}=this,{centerX:t,x0:i,x1:s,y0:o,y1:a,yOpen:r,yClose:n}=this.alignedCoordinates();e.clear(),e.moveTo(t,o),e.lineTo(t,a),Math.abs(s-i)>1&&(e.moveTo(i,r),e.lineTo(t,r),e.moveTo(t,n),e.lineTo(s,n))}},{SceneArrayChangeDetection:Hy,SceneChangeDetection:js,ExtendedPath2D:Xy,BBox:Yy}=Wy,Ti=class extends Ft{constructor(){super(...arguments),this.wickPath=new Xy,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0}computeDefaultGradientFillBBox(){const{width:e,centerX:t,yOpen:i,yClose:s}=this,o=Math.min(i,s),r=Math.max(i,s)-o,n=t-e/2,l=t+e/2;return new Yy(n,o,l-n,r)}updatePath(){const{path:e,stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,lineDashOffset:a,wickStroke:r,wickStrokeWidth:n,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:p,strokeAlignment:d}=this,{centerX:u,x0:f,x1:y,y0:g,y1:m,yOpen:S,yClose:x}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const v=r!=null&&r!==t||n!=null&&n!==i||l!=null&&l!==s||c!=null&&c!==o||p!=null&&p!==a?this.wickPath:e;if(Math.abs(y-f)<=3){v.moveTo(u,g),v.lineTo(u,m);return}const k=Math.min(S,x),L=Math.max(S,x);v.moveTo(u,g),v.lineTo(u,k+i/2),v.moveTo(u,m),v.lineTo(u,L-i/2);const A=d+i/2,D=L-k-2*A;if(D>0)e.rect(f+A,k+A,y-f-2*A,D);else{const I=(k+L)/2;e.moveTo(f,I),e.lineTo(y,I)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:r,wickStroke:n=i,wickStrokeWidth:l=s,wickStrokeOpacity:c=o,wickLineDash:p=a,wickLineDashOffset:d=r}=this;l!==0&&(e.globalAlpha*=c,typeof n=="string"&&(e.strokeStyle=n),e.lineWidth=l,p!=null&&e.setLineDash([...p]),e.lineDashOffset=d,e.stroke(t.getPath2D()))}};h([js()],Ti.prototype,"wickStroke",2),h([js()],Ti.prototype,"wickStrokeWidth",2),h([js()],Ti.prototype,"wickStrokeOpacity",2),h([Hy()],Ti.prototype,"wickLineDash",2),h([js()],Ti.prototype,"wickLineDashOffset",2);import{_ModuleSupport as qy}from"ag-charts-community";import{_ModuleSupport as Uy}from"ag-charts-community";var{BaseProperties:lc,Property:Re,AbstractBarSeriesProperties:jy,makeSeriesTooltip:Jy}=Uy,ui=class extends lc{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([Re],ui.prototype,"stroke",2),h([Re],ui.prototype,"strokeWidth",2),h([Re],ui.prototype,"strokeOpacity",2),h([Re],ui.prototype,"lineDash",2),h([Re],ui.prototype,"lineDashOffset",2);var sr=class extends lc{constructor(){super(...arguments),this.up=new ui,this.down=new ui}};h([Re],sr.prototype,"up",2),h([Re],sr.prototype,"down",2);var rt=class extends jy{};h([Re],rt.prototype,"xKey",2),h([Re],rt.prototype,"openKey",2),h([Re],rt.prototype,"closeKey",2),h([Re],rt.prototype,"highKey",2),h([Re],rt.prototype,"lowKey",2),h([Re],rt.prototype,"xName",2),h([Re],rt.prototype,"yName",2),h([Re],rt.prototype,"openName",2),h([Re],rt.prototype,"closeName",2),h([Re],rt.prototype,"highName",2),h([Re],rt.prototype,"lowName",2);var Js=class extends rt{constructor(){super(...arguments),this.tooltip=Jy(),this.item=new sr}};h([Re],Js.prototype,"tooltip",2),h([Re],Js.prototype,"item",2),h([Re],Js.prototype,"itemStyler",2);var{FillGradientDefaults:Zy,FillPatternDefaults:Qy,FillImageDefaults:em,BaseProperties:or,makeSeriesTooltip:tm,Property:Ne}=qy,wi=class extends or{};h([Ne],wi.prototype,"stroke",2),h([Ne],wi.prototype,"strokeWidth",2),h([Ne],wi.prototype,"strokeOpacity",2),h([Ne],wi.prototype,"lineDash",2),h([Ne],wi.prototype,"lineDashOffset",2);var ot=class extends or{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Zy,this.fillPatternDefaults=new Qy,this.fillImageDefaults=new em,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new wi}};h([Ne],ot.prototype,"fill",2),h([Ne],ot.prototype,"fillGradientDefaults",2),h([Ne],ot.prototype,"fillPatternDefaults",2),h([Ne],ot.prototype,"fillImageDefaults",2),h([Ne],ot.prototype,"fillOpacity",2),h([Ne],ot.prototype,"stroke",2),h([Ne],ot.prototype,"strokeWidth",2),h([Ne],ot.prototype,"strokeOpacity",2),h([Ne],ot.prototype,"lineDash",2),h([Ne],ot.prototype,"lineDashOffset",2),h([Ne],ot.prototype,"cornerRadius",2),h([Ne],ot.prototype,"wick",2);var ar=class extends or{constructor(){super(...arguments),this.up=new ot,this.down=new ot}};h([Ne],ar.prototype,"up",2),h([Ne],ar.prototype,"down",2);var Zs=class extends rt{constructor(){super(),this.item=new ar,this.tooltip=tm(),this.highlightStyle.deprecated=!1}};h([Ne],Zs.prototype,"item",2),h([Ne],Zs.prototype,"tooltip",2),h([Ne],Zs.prototype,"itemStyler",2);var{createDatumId:im,isGradientFill:cc,isPatternFill:rr,isImageFill:nr,getShapeFill:pc,applyShapeStyle:sm,getShapeStyle:lr}=ky,Qs=class extends nc{constructor(){super(...arguments),this.properties=new Zs}nodeFactory(){return new Ti}updateDatumNodes({datumSelection:e,isHighlight:t}){const{id:i,properties:s}=this,{xKey:o,highKey:a,lowKey:r,openKey:n,closeKey:l,item:c,itemStyler:p}=s,{up:d,down:u}=c,f=lr({fill:d.fill,fillOpacity:d.fillOpacity,stroke:d.stroke,strokeWidth:d.strokeWidth,strokeOpacity:d.strokeOpacity,lineDash:d.lineDash,lineDashOffset:d.lineDashOffset},d.fillGradientDefaults,d.fillPatternDefaults,d.fillImageDefaults),y=lr({fill:u.fill,fillOpacity:u.fillOpacity,stroke:u.stroke,strokeWidth:u.strokeWidth,strokeOpacity:u.strokeOpacity,lineDash:u.lineDash,lineDashOffset:u.lineDashOffset},u.fillGradientDefaults,u.fillPatternDefaults,u.fillImageDefaults);e.each((g,m)=>{const{isRising:S,centerX:x,width:b,y:v,height:k,yOpen:L,yClose:A,crisp:D}=m;let I;if(p!=null){const{fill:N,fillOpacity:C,stroke:T,strokeWidth:O,strokeOpacity:_,lineDash:F,lineDashOffset:E}=S?f:y;I=lr(this.cachedDatumCallback(im(this.getDatumId(m),t?"highlight":"node"),()=>this.callWithContext(p,{seriesId:i,itemId:m.itemId,xKey:o,highKey:a,lowKey:r,openKey:n,closeKey:l,datum:m.datum,fill:N,fillOpacity:C,strokeOpacity:_,stroke:T,strokeWidth:O,lineDash:F,lineDashOffset:E,highlighted:t})),S?d.fillGradientDefaults:u.fillGradientDefaults,S?d.fillPatternDefaults:u.fillPatternDefaults,S?d.fillImageDefaults:u.fillImageDefaults)}g.centerX=x,g.width=b,g.y=v,g.height=k,g.yOpen=L,g.yClose=A,g.crisp=D;const M=S?f:y,P=S?d.wick:u.wick,R=this.getHighlightStyle(t,m.datumIndex);sm(g,{fill:R?.fill??I?.fill??M.fill,fillOpacity:R?.fillOpacity??I?.fillOpacity??M.fillOpacity,stroke:R?.stroke??I?.stroke??M.stroke,strokeWidth:R?.strokeWidth??I?.strokeWidth??M.strokeWidth,strokeOpacity:R?.strokeOpacity??I?.strokeOpacity??M.strokeOpacity,lineDash:R?.lineDash??I?.lineDash??M.lineDash,lineDashOffset:R?.lineDashOffset??I?.lineDashOffset??M.lineDashOffset,opacity:R.opacity??1},void 0,this.getShapeFillBBox());const w=I?.wick;g.wickStroke=R?.stroke??w?.stroke??P.stroke,g.wickStrokeWidth=R?.strokeWidth??w?.strokeWidth??P.strokeWidth,g.wickStrokeOpacity=R?.strokeOpacity??w?.strokeOpacity??P.strokeOpacity,g.wickLineDash=R?.lineDash??w?.lineDash??P.lineDash,g.wickLineDashOffset=R?.lineDashOffset??w?.lineDashOffset??P.lineDashOffset,g.strokeAlignment=(I?.strokeWidth??M.strokeWidth)/2})}legendItemSymbol(){const{up:e,down:t}=this.properties.item,i=pc(e.fill,e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults),s=cc(i)?i.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:rr(i)||nr(i)?e.stroke:i,stop:0},{color:rr(i)||nr(i)?e.stroke:i,stop:.5}],o=pc(t.fill,t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults),a=cc(o)?o.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:rr(o)||nr(o)?t.stroke:o,stop:.5}],r={type:"gradient",gradient:"linear",rotation:90,colorStops:[...s,...a],reverse:!1},n={type:"gradient",gradient:"linear",rotation:90,colorStops:[{color:e.stroke,stop:0},{color:e.stroke,stop:.5},{color:t.stroke,stop:.5}],reverse:!1};return{marker:{fill:r,fillOpacity:e.fillOpacity,stroke:n,strokeWidth:e.strokeWidth??1,strokeOpacity:e.strokeOpacity??1,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset}}}getLegendData(e){const{id:t,data:i,visible:s,ctx:{legendManager:o}}=this,{xKey:a,yName:r,showInLegend:n,legendItemName:l}=this.properties;return!i?.length||!a||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:s&&o.getItemEnabled({seriesId:t,itemId:t}),label:{text:l??r??t},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!n}]}};Qs.className="CandleStickSeries",Qs.type="candlestick";import{_ModuleSupport as om}from"ag-charts-community";import{boolean as am,constant as rm,number as nm,required as _i,string as Nt,undocumented as hc}from"ag-charts-core";var{commonSeriesOptionsDefs:lm,candlestickSeriesThemeableOptionsDef:cm}=om,cr={...lm,...cm,type:_i(rm("candlestick")),xKey:_i(Nt),openKey:_i(Nt),highKey:_i(Nt),lowKey:_i(Nt),closeKey:_i(Nt),xName:Nt,yName:Nt,openName:Nt,highName:Nt,lowName:Nt,closeName:Nt};cr.pickOutsideVisibleMinorAxis=hc(am),cr.focusPriority=hc(nm);import{_ModuleSupport as pr}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:dc},multiSeriesHighlightStyle:pm}=pr;function uc(e){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},e==="up"?"transparent":{$palette:"fill"},{$palette:`${e}.fill`}]},stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:`${e}.stroke`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:{$palette:`${e}.fill`}},{$isPattern:{$palette:`${e}.fill`}},{$isImage:{$palette:`${e}.fill`}}]},{$map:[{$path:["/color",void 0,{$value:"$1"}]},{$path:["/colorStops",void 0,{$palette:`${e}.fill`}]}]},[{$mix:[{$palette:`${e}.fill`},"black",.15]},{$mix:[{$palette:`${e}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:pr.FILL_PATTERN_DEFAULTS,fillImageDefaults:pr.FILL_IMAGE_DEFAULTS}}var hm={series:{item:{up:uc("up"),down:uc("down")},highlightStyle:{item:{strokeWidth:3}},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:pm()},animation:{enabled:!1},axes:{[dc.NUMBER]:{crosshair:{snap:!1}},[dc.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:fc,CARTESIAN_POSITION:gc}=vy.ThemeConstants,EL={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:e=>new Qs(e),defaultAxes:[{type:fc.NUMBER,position:gc.LEFT},{type:fc.ORDINAL_TIME,position:gc.BOTTOM}],themeTemplate:hm,groupable:!1},hr={type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,options:cr,create:e=>new Qs(e)};import{_ModuleSupport as dm}from"ag-charts-community";import{_ModuleSupport as dr}from"ag-charts-community";import{Logger as um}from"ag-charts-core";import{_ModuleSupport as fm}from"ag-charts-community";import{Logger as gm,findMaxValue as yc}from"ag-charts-core";var{CachedTextMeasurerPool:mc,TextUtils:Sc,TextWrapper:eo}=fm;function ym(e,t){const{fontSize:i,minimumFontSize:s=i}=e,{fontSize:o,minimumFontSize:a=o}=t,r=i-s,n=o-a;let l=e.fontSize,c=t.fontSize;const p=[{labelFontSize:i,secondaryLabelFontSize:o}];for(;l>s||c>a;){const d=r>0?(l-s)/r:-1,u=n>0?(c-a)/n:-1;d>u?l--:c--,p.push({labelFontSize:l,secondaryLabelFontSize:c})}return p.reverse(),p}function Fi(e,t){return e.lineHeight!=null&&e.fontSize!=null?e.lineHeight*t/e.fontSize:Sc.getLineHeight(t)}function xc(e,t,i,s,{padding:o},a){const{spacing:r=0}=t,n=2*o,l=2*o+r,c=(t.minimumFontSize??t.fontSize)+(s.minimumFontSize??s.fontSize);if(c>a(c+l,!1).height-l)return;const p=ym(t,s),d={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},u={fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let f,y;return yc(0,p.length-1,g=>{const{labelFontSize:m,secondaryLabelFontSize:S}=p[g],x=g===0,b=Fi(t,m),v=Fi(s,S),k=a(b+v+l,x),L=k.width-n,A=k.height-l;if(b+v>A||((f==null||f.fontSize!==m)&&(d.fontSize=m,f=Dc(t,e,L,A,d,t.wrapping,x?t.overflowStrategy:"hide")),f==null||f.width>L||f.height>A)||((y==null||y.fontSize!==S)&&(u.fontSize=S,y=Dc(s,i,L,A,u,s.wrapping,x?s.overflowStrategy:"hide")),y==null))return;const D=f.height+y.height;if(!(y.width>L||D>A))return{width:Math.max(f.width,y.width),height:D+r,meta:k.meta,label:f,secondaryLabel:y}})}function hs(e,t,{padding:i},s){const o=2*i,a=Math.min(t.minimumFontSize??t.fontSize,t.fontSize),r={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return yc(a,t.fontSize,n=>{const l=Fi(t,n),c=n===a,p=s(l+o,c),d=p.width-o,u=p.height-o;if(l>u)return;r.fontSize=n;const f=eo.wrapLines(e,{maxWidth:d,maxHeight:u,font:r,textWrap:t.wrapping,overflow:(c?t.overflowStrategy:void 0)??"hide"});if(!f.length)return;const y=mm(f,{lineHeight:l,font:r,maxWidth:d,maxHeight:u});if(y)return[{fontSize:n,lineHeight:l,...y},p.meta]})}function bc(e){return e?.minimumFontSize!=null&&e?.fontSize!=null&&e?.minimumFontSize>e?.fontSize}function ur(e,t,i,s,o,a){const r=t.enabled?e:void 0,n=s.enabled?i:void 0;(bc(t)||bc(s))&&gm.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;r!=null&&n!=null&&(l=xc(r,t,n,s,o,a));let c;if(l==null&&r!=null&&(c=hs(r,t,o,a)),c!=null){const[d,u]=c;l={width:d.width,height:d.height,meta:u,label:d,secondaryLabel:void 0}}let p;if(l==null&&r==null&&n!=null&&(p=hs(n,s,o,a)),p!=null){const[d,u]=p;l={width:d.width,height:d.height,meta:u,label:void 0,secondaryLabel:d}}return l}function Dc(e,t,i,s,o,a,r){const n=eo.wrapLines(t,{maxWidth:i,maxHeight:s,font:o,textWrap:a,overflow:r});if(!n.length)return;const l=Fi(e,o.fontSize),{width:c}=mc.measureLines(n,{font:o});return{width:c,lineHeight:l,text:n.join(`
`),height:n.length*l,fontSize:o.fontSize}}function mm(e,{font:t,lineHeight:i=Sc.defaultLineHeight,maxWidth:s,maxHeight:o=1/0}){let a=i*e.length;for(;a>o;){if(e.length===1)return;e.pop(),e[e.length-1]=eo.appendEllipsis(e.at(-1)),a=i*e.length}const r=mc.measureLines(e,{font:t});let n,l;if(r.width>s){const c=[];l=0;for(const p of r.lineMetrics){if(p.width>s){if(!c.length)return;break}c.push(p.text),l=Math.max(l,p.width)}n=eo.appendEllipsis(c.join(`
`))}else n=e.join(`
`),l=r.width;return{text:n,width:l,height:a}}import{_ModuleSupport as Sm}from"ag-charts-community";import{_ModuleSupport as vc}from"ag-charts-community";var{Property:ds}=vc,Ei=class extends vc.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};h([ds],Ei.prototype,"wrapping",2),h([ds],Ei.prototype,"overflowStrategy",2),h([ds],Ei.prototype,"lineHeight",2),h([ds],Ei.prototype,"minimumFontSize",2);var Et=class extends Ei{constructor(){super(...arguments),this.spacing=0}};h([ds],Et.prototype,"spacing",2);var us=class extends Ei{},{CartesianSeriesProperties:xm,makeSeriesTooltip:bm,Property:$e}=Sm,Ve=class extends xm{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new Et,this.tooltip=bm()}};h([$e],Ve.prototype,"title",2),h([$e],Ve.prototype,"xKey",2),h([$e],Ve.prototype,"yKey",2),h([$e],Ve.prototype,"colorKey",2),h([$e],Ve.prototype,"xName",2),h([$e],Ve.prototype,"yName",2),h([$e],Ve.prototype,"colorName",2),h([$e],Ve.prototype,"colorRange",2),h([$e],Ve.prototype,"stroke",2),h([$e],Ve.prototype,"strokeOpacity",2),h([$e],Ve.prototype,"strokeWidth",2),h([$e],Ve.prototype,"textAlign",2),h([$e],Ve.prototype,"verticalAlign",2),h([$e],Ve.prototype,"itemPadding",2),h([$e],Ve.prototype,"itemStyler",2),h([$e],Ve.prototype,"label",2),h([$e],Ve.prototype,"tooltip",2);var{SeriesNodePickMode:kc,computeBarFocusBounds:Dm,getMissCount:vm,valueProperty:fr,ChartAxisDirection:St,DEFAULT_CARTESIAN_DIRECTION_KEYS:km,DEFAULT_CARTESIAN_DIRECTION_NAMES:Mm,createDatumId:Im,ColorScale:Am,Rect:Nm,PointerEvents:Pm,applyShapeStyle:Lm,formatValue:Rm}=dr,Om=class extends dr.CartesianSeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.colorKey=s.properties.colorKey}},Cm={left:-.5,center:0,right:-.5},Tm={top:-.5,middle:0,bottom:-.5},to=class extends dr.CartesianSeries{constructor(e){super({moduleCtx:e,propertyKeys:{...km,color:["colorKey"]},propertyNames:{...Mm,color:["colorName"]},categoryKey:void 0,pickModes:[kc.NEAREST_NODE,kc.EXACT_SHAPE_MATCH],pathsPerSeries:[],hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new Ve,this.NodeEvent=Om,this.colorScale=new Am}async processData(e){const t=this.axes[St.X],i=this.axes[St.Y];if(!t||!i||!this.data?.length)return;const{xKey:s,yKey:o,colorRange:a,colorKey:r}=this.properties,n=this.axes[St.X]?.scale,l=this.axes[St.Y]?.scale,{xScaleType:c,yScaleType:p}=this.getScaleInformation({xScale:n,yScale:l}),d=this.colorScale.type,{dataModel:u,processedData:f}=await this.requestDataModel(e,this.data,{props:[fr(s,c,{id:"xValue"}),fr(o,p,{id:"yValue"}),...r?[fr(r,d,{id:"colorValue",invalidValue:null})]:[]]});if(this.isColorScaleValid()){const y=u.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=f.domain.values[y],this.colorScale.range=a,this.colorScale.update()}}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=vm(this,i.defs.values[s].missing);return!(o===0||o===a)}xCoordinateRange(e,t){const i=this.axes[St.X].scale,s=t*(i.bandwidth??0)/2,o=i.convert(e)+s,a=t*(i.bandwidth??10);return[o,o+a]}yCoordinateRange(e,t){const i=this.axes[St.Y].scale,s=t*(i.bandwidth??0)/2,o=i.convert(e[0])+s,a=t*(i.bandwidth??10);return[o,o+a]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;return!t||!i?[]:e===St.X?t.getDomain(this,"xValue","value",i):t.getDomain(this,"yValue","value",i)}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{data:e,visible:t,axes:i,dataModel:s,processedData:o}=this,a=i[St.X],r=i[St.Y];if(!(e&&s&&o&&t&&a&&r))return;if(a.type!=="category"||r.type!=="category"){um.warnOnce(`Heatmap series expected axes to have "category" type, but received "${a.type}" and "${r.type}" instead.`);return}const{xKey:n,xName:l,yKey:c,yName:p,colorKey:d,colorName:u,textAlign:f,verticalAlign:y,itemPadding:g,label:m}=this.properties,S=s.resolveColumnById(this,"xValue",o),x=s.resolveColumnById(this,"yValue",o),b=d?s.resolveColumnById(this,"colorValue",o):void 0,v=s.getDomain(this,"colorValue","value",o),k=a.scale,L=r.scale,A=(k.bandwidth??0)/2,D=(L.bandwidth??0)/2,I=[],M=[],P=k.bandwidth??10,R=L.bandwidth??10,w=(P-2*g)*Cm[f],N=(R-2*g)*Tm[y],C=()=>({width:P,height:R,meta:null});return(o.dataSources.get(this.id)??[]).forEach((O,_)=>{const F=S[_],E=x[_],B=k.convert(F)+A,G=L.convert(E)+D,W=b?.[_],V=W==null?void 0:this.getLabelText(W,O,d,"color",v,m,{value:W,datum:O,colorKey:d,colorName:u,xKey:n,yKey:c,xName:l,yName:p}),K=ur(V,this.properties.label,void 0,this.properties.label,{padding:g},C),$={x:B,y:G,size:0};if(I.push({series:this,itemId:c,datumIndex:_,yKey:c,xKey:n,xValue:F,yValue:E,colorValue:W,datum:O,point:$,width:P,height:R,midPoint:{x:B,y:G},missing:b!=null&&W==null}),K?.label!=null){const{text:X,fontSize:U,lineHeight:J,height:oe}=K.label,{fontStyle:j,fontFamily:Y,fontWeight:le,color:de}=this.properties.label,Z=$.x+w*(P-2*g),Q=$.y+N*(R-2*g)-(K.height-oe)*.5;M.push({series:this,itemId:c,datum:O,datumIndex:_,text:X,fontSize:U,lineHeight:J,fontStyle:j,fontFamily:Y,fontWeight:le,color:de,textAlign:f,verticalAlign:y,x:Z,y:Q})}}),{itemId:this.properties.yKey??this.id,nodeData:I,labelData:M,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new Nm}update(e){return this.ctx.animationManager.skipCurrentBatch(),super.update(e)}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s)}getItemBaseStyle(e,t){const{properties:i}=this,s=this.getHighlightStyle(e,t?.datumIndex);return{fill:s?.fill,fillOpacity:s?.fillOpacity??1,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,opacity:s.opacity??1}}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{xKey:n,yKey:l,itemStyler:c}=r,p=this.isColorScaleValid()&&i!=null?this.colorScale.convert(i):"transparent";let d=s.fill==null?{fill:p}:void 0;if(c!=null){d??(d={});const u=this.cachedDatumCallback(Im(e,o?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:t,xKey:n,yKey:l,highlighted:o,...s,fill:p}));Object.assign(d,u)}return d}updateDatumNodes(e){const{isHighlight:t}=e,i=this.axes[St.X],[s,o]=i?.visibleRange??[],r=!(s!==0||o!==1);e.datumSelection.each((n,l)=>{const{datumIndex:c,colorValue:p,datum:d,point:u,width:f,height:y}=l,g=this.getItemBaseStyle(t,l),m=this.getItemStyleOverrides(String(c),d,p,g,t);n.crisp=r,n.x=Math.floor(u.x-f/2),n.y=Math.floor(u.y-y/2),n.width=Math.ceil(f),n.height=Math.ceil(y),Lm(n,g,m)})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e,{enabled:s}=this.properties.label,o=s?t:[];return i.update(o)}updateLabelNodes(e){e.labelSelection.each((t,i)=>{t.text=i.text,t.fontSize=i.fontSize,t.lineHeight=i.lineHeight,t.fontStyle=i.fontStyle,t.fontFamily=i.fontFamily,t.fontWeight=i.fontWeight,t.fill=i.color,t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex)?.opacity??1,t.textAlign=i.textAlign,t.textBaseline=i.verticalAlign,t.x=i.x,t.y=i.y,t.pointerEvents=Pm.None})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a,colorScale:r,ctx:n}=this,{formatManager:l}=n,{xKey:c,xName:p,yKey:d,yName:u,colorKey:f,colorName:y,colorRange:g,title:m,legendItemName:S,tooltip:x}=a,b=o[St.X],v=o[St.Y];if(!i||!s||!b||!v)return;const k=s.dataSources.get(this.id)?.[e],L=i.resolveColumnById(this,"xValue",s)[e],A=i.resolveColumnById(this,"yValue",s)[e],D=f!=null&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",s)[e]:void 0;if(L==null)return;const I=[];let M;if(D==null)M=g[0];else{M=r.convert(D);const w=i.getDomain(this,"colorValue","value",s),N=l.format(this.callWithContext.bind(this),{type:"number",value:D,datum:k,seriesId:t,legendItemName:S,key:f,source:"tooltip",property:"color",domain:w,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});I.push({label:y,fallbackLabel:f,value:N??Rm(D)})}I.push({label:p,fallbackLabel:c,value:b.formatDatum(L,"tooltip",t,S,k,c)},{label:u,fallbackLabel:d,value:v.formatDatum(A,"tooltip",t,S,k,d)});const P=this.getItemBaseStyle(!1);Object.assign(P,this.getItemStyleOverrides(String(e),k,D,P,!1)),P.fill!=null&&(M=P.fill);const R=M!=null?{marker:{shape:"square",fill:M,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}}:void 0;return this.formatTooltipWithContext(x,{title:m??S,symbol:R,data:I},{seriesId:t,datum:k,title:m,xKey:c,xName:p,yKey:d,yName:u,colorKey:f,colorName:y,...P})}getLegendData(e){return e!=="gradient"||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,series:this.getFormatterContext("color"),colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:e}){const t=this.contextNodeData?.nodeData[e];if(t===void 0)return;const{width:i,height:s,midPoint:o}=t,a={x:o.x-i/2,y:o.y-s/2,width:i,height:s};return Dm(this,a)}};to.className="HeatmapSeries",to.type="heatmap";import{_ModuleSupport as wm}from"ag-charts-community";import{arrayOf as _m,color as Fm,constant as Em,required as gr,string as Bi}from"ag-charts-core";var{commonSeriesOptionsDefs:Bm,heatmapSeriesThemeableOptionsDef:Gm,without:Mc}=wm,Wm={...Mc(Gm,["showInLegend"]),...Mc(Bm,["showInLegend"]),type:gr(Em("heatmap")),xKey:gr(Bi),yKey:gr(Bi),colorKey:Bi,xName:Bi,yName:Bi,colorName:Bi,colorRange:_m(Fm)};import{_ModuleSupport as Ic}from"ag-charts-community";var Vm={series:{stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$path:["/0",{$palette:"stroke"},{$palette:"strokes"}]}]},strokeWidth:{$isUserOption:["./stroke",2,void 0]},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},Ic.SAFE_RANGE2_OPERATION]},label:{enabled:!1,color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3,highlight:Ic.singleSeriesHighlightStyle()},gradientLegend:{enabled:!0}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:Ac,CARTESIAN_POSITION:Nc}}=dm,qL={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:e=>new to(e),defaultAxes:[{type:Ac.CATEGORY,position:Nc.LEFT},{type:Ac.CATEGORY,position:Nc.BOTTOM}],themeTemplate:Vm},yr={type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,options:Wm,create:e=>new to(e)};import{_ModuleSupport as Km}from"ag-charts-community";import{_ModuleSupport as zm}from"ag-charts-community";var{createDatumId:$m,applyShapeStyle:Hm}=zm,io=class extends nc{constructor(){super(...arguments),this.properties=new Js}nodeFactory(){return new $y}updateDatumNodes({datumSelection:e,isHighlight:t}){const{id:i,properties:s}=this,{xKey:o,highKey:a,lowKey:r,openKey:n,closeKey:l,item:c,itemStyler:p}=s,{up:d,down:u}=c,{stroke:f,strokeWidth:y,strokeOpacity:g,lineDash:m,lineDashOffset:S}=d,{stroke:x,strokeWidth:b,strokeOpacity:v,lineDash:k,lineDashOffset:L}=u;e.each((A,D)=>{const{isRising:I,centerX:M,width:P,y:R,height:w,yOpen:N,yClose:C,crisp:T}=D;let O;if(p!=null){const{stroke:F,strokeWidth:E,strokeOpacity:B,lineDash:G,lineDashOffset:W}=I?d:u;O=this.cachedDatumCallback($m(this.getDatumId(D),t?"highlight":"node"),()=>this.callWithContext(p,{seriesId:i,itemId:D.itemId,xKey:o,highKey:a,lowKey:r,openKey:n,closeKey:l,datum:D.datum,strokeOpacity:B,stroke:F,strokeWidth:E,lineDash:G,lineDashOffset:W,highlighted:t}))}A.centerX=M,A.width=P,A.y=R,A.height=w,A.yOpen=N,A.yClose=C,A.crisp=T;const _=this.getHighlightStyle(t,D.datumIndex);Hm(A,{stroke:_?.stroke??O?.stroke??(I?f:x),strokeWidth:_?.strokeWidth??O?.strokeWidth??(I?y:b),strokeOpacity:_?.strokeOpacity??O?.strokeOpacity??(I?g:v),lineDash:_?.lineDash??O?.lineDash??(I?m:k),lineDashOffset:_?.lineDashOffset??O?.lineDashOffset??(I?S:L),opacity:_?.opacity??1}),A.strokeAlignment=(O?.strokeWidth??(I?y:b))/2})}getLegendData(e){const{id:t,data:i,ctx:{legendManager:s},visible:o}=this,{xKey:a,yName:r,item:{up:n,down:l},showInLegend:c,legendItemName:p}=this.properties;if(!i?.length||!a||e!=="category")return[];const d={type:"gradient",gradient:"linear",colorSpace:"rgb",colorStops:[{color:n.stroke,stop:0},{color:n.stroke,stop:.5},{color:l.stroke,stop:.5}],rotation:90};return[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:o&&s.getItemEnabled({seriesId:t,itemId:t}),label:{text:p??r??t},symbol:{marker:{fill:d,fillOpacity:n.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}},legendItemName:p,hideInLegend:!c}]}};io.className="ohlc",io.type="ohlc";import{_ModuleSupport as Xm}from"ag-charts-community";import{boolean as Ym,constant as qm,number as Um,required as Gi,string as Pt,undocumented as Pc}from"ag-charts-core";var{commonSeriesOptionsDefs:jm,ohlcSeriesThemeableOptionsDef:Jm}=Xm,mr={...jm,...Jm,type:Gi(qm("ohlc")),xKey:Gi(Pt),openKey:Gi(Pt),highKey:Gi(Pt),lowKey:Gi(Pt),closeKey:Gi(Pt),xName:Pt,yName:Pt,openName:Pt,highName:Pt,lowName:Pt,closeName:Pt};mr.pickOutsideVisibleMinorAxis=Pc(Ym),mr.focusPriority=Pc(Um);var{ThemeConstants:{CARTESIAN_AXIS_TYPE:so,CARTESIAN_POSITION:Lc},multiSeriesHighlightStyle:Zm}=Km,QL={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:e=>new io(e),defaultAxes:[{type:so.NUMBER,position:Lc.LEFT},{type:so.ORDINAL_TIME,position:Lc.BOTTOM}],themeTemplate:{animation:{enabled:!1},series:{item:{up:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"up.stroke"}]}},down:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"down.stroke"}]}}},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:Zm(!1)},axes:{[so.NUMBER]:{crosshair:{snap:!1}},[so.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1},Sr={type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,options:mr,create:e=>new io(e)};import{_ModuleSupport as Qm}from"ag-charts-community";import{_ModuleSupport as oo}from"ag-charts-community";var eS=1e3;function Rc(e,t,i,s,o,a){const r=e[a];if(r==null)return!1;const n=Za(r,t,i),l=Qa(n,o);return a===s[l+mt]}function Oc(e,t,i,s,o,a){const r=e[a];if(r==null)return!1;const n=Za(r,t,i),l=Qa(n,o);return a===s[l+yt]}function tS(e,t,i,s){if(e.length<eS)return;const[o,a]=Ja(s);let r=ja(e);const{indexData:n,valueData:l}=er(e,t,i,o,a,r);let c=[],p=[];for(let u=0;u<e.length;u+=1)Rc(e,o,a,n,r,u)&&c.push(u),Oc(e,o,a,n,r,u)&&p.push(u);const d=[{maxRange:r,topIndices:c,bottomIndices:p}];for(;r>64;)({maxRange:r}=tr(n,l,r,{inPlace:!0})),c=c.filter(Rc.bind(null,e,o,a,n,r)),p=p.filter(Oc.bind(null,e,o,a,n,r)),d.push({maxRange:r,topIndices:c,bottomIndices:p});return d.reverse(),d}import{_ModuleSupport as iS}from"ag-charts-community";var{CartesianSeriesProperties:sS,FillGradientDefaults:oS,FillPatternDefaults:aS,FillImageDefaults:rS,InterpolationProperties:nS,SeriesMarker:lS,makeSeriesTooltip:cS,Property:ye,DropShadow:pS,Label:hS}=iS,xr=class extends hS{constructor(){super(...arguments),this.placement="outside",this.padding=6}};h([ye],xr.prototype,"placement",2),h([ye],xr.prototype,"padding",2);var xe=class extends sS{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new oS,this.fillPatternDefaults=new aS,this.fillImageDefaults=new rS,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new nS,this.shadow=new pS().set({enabled:!1}),this.marker=new lS,this.label=new xr,this.tooltip=cS(),this.connectMissingData=!1}};h([ye],xe.prototype,"xKey",2),h([ye],xe.prototype,"yLowKey",2),h([ye],xe.prototype,"yHighKey",2),h([ye],xe.prototype,"xName",2),h([ye],xe.prototype,"yName",2),h([ye],xe.prototype,"yLowName",2),h([ye],xe.prototype,"yHighName",2),h([ye],xe.prototype,"fill",2),h([ye],xe.prototype,"fillGradientDefaults",2),h([ye],xe.prototype,"fillPatternDefaults",2),h([ye],xe.prototype,"fillImageDefaults",2),h([ye],xe.prototype,"fillOpacity",2),h([ye],xe.prototype,"stroke",2),h([ye],xe.prototype,"strokeWidth",2),h([ye],xe.prototype,"strokeOpacity",2),h([ye],xe.prototype,"lineDash",2),h([ye],xe.prototype,"lineDashOffset",2),h([ye],xe.prototype,"interpolation",2),h([ye],xe.prototype,"shadow",2),h([ye],xe.prototype,"marker",2),h([ye],xe.prototype,"label",2),h([ye],xe.prototype,"tooltip",2),h([ye],xe.prototype,"connectMissingData",2);import{_ModuleSupport as dS}from"ag-charts-community";var{CollapseMode:ao,isScaleValid:Cc,pairUpSpans:ro,prepareAreaFillAnimationFns:uS,plotInterpolatedLinePathStroke:Wi,prepareLinePathPropertyAnimation:fS,areScalingEqual:Tc}=dS;function gS(e,t,i,s){const o=(l,c)=>{Wi(l,c,t.removed),Wi(l,c,i.removed)},a=(l,c)=>{Wi(l,c,t.moved),Wi(l,c,i.moved)},r=(l,c)=>{Wi(l,c,t.added),Wi(l,c,i.added)},n=fS(e,s);return{status:e,path:{addPhaseFn:r,updatePhaseFn:a,removePhaseFn:o},pathProperties:n}}function yS(e,t,i){const s=e.scales.x?.type==="category",o=t.scales.x?.type==="category";if(s!==o||!Cc(e.scales.x)||!Cc(t.scales.x))return;let a="updated";t.visible&&!e.visible?a="removed":!t.visible&&e.visible&&(a="added");const r=ro({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},ao.Split);if(r==null)return;const n=ro({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},ao.Split);if(n==null)return;const l=ro({scales:e.scales,data:e.highStrokeData.spans},{scales:t.scales,data:t.highStrokeData.spans},ao.Split);if(l==null)return;const c=ro({scales:e.scales,data:e.lowStrokeData.spans},{scales:t.scales,data:t.lowStrokeData.spans},ao.Split);if(c==null)return;const p="fade",d=uS(a,r,n,p),u=gS(a,l,c,p),f=(i?.changed??!0)||!Tc(e.scales.x,t.scales.x)||!Tc(e.scales.y,t.scales.y)||a!=="updated";return{status:a,fill:d,stroke:u,hasMotion:f}}var{valueProperty:wc,keyProperty:mS,ChartAxisDirection:He,mergeDefaults:_c,updateLabelNode:SS,fixNumericExtent:Fc,buildResetPathFn:xS,resetLabelFn:bS,resetMarkerFn:DS,resetMarkerPositionFn:Ec,pathSwipeInAnimation:vS,resetMotion:kS,markerSwipeScaleInAnimation:MS,seriesLabelFadeInAnimation:br,animationValidation:IS,diff:AS,updateClipPath:Bc,computeMarkerFocusBounds:Gc,plotAreaPathFill:NS,plotLinePathStroke:Wc,interpolatePoints:Vc,pathFadeInAnimation:Kc,markerFadeInAnimation:zc,fromToMotion:$c,pathMotion:Hc,extent:PS,createDatumId:LS,applyShapeFillBBox:RS,PointerEvents:Dr,Group:OS,BBox:CS,ContinuousScale:TS,DiscreteTimeScale:wS,findMinMax:_S,getShapeStyle:FS,getShapeFill:ES,applyShapeStyle:BS}=oo,GS=class extends oo.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},no=class extends oo.CartesianSeries{constructor(e){super({moduleCtx:e,hasMarkers:!0,pathsPerSeries:["fill","stroke"],pickModes:[oo.SeriesNodePickMode.AXIS_ALIGNED],propertyKeys:{[He.X]:["xKey"],[He.Y]:["yLowKey","yHighKey"]},propertyNames:{[He.X]:["xName"],[He.Y]:["yLowName","yHighName","yName"]},categoryKey:"xValue",animationResetFns:{path:xS({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:bS,marker:(t,i)=>({...DS(t),...Ec(t,i)})},clipFocusBox:!1}),this.properties=new xe,this.NodeEvent=GS,this.dataAggregationFilters=void 0}async processData(e){const{xKey:t,yLowKey:i,yHighKey:s}=this.properties,o=this.axes[He.X]?.scale,a=this.axes[He.Y]?.scale,{xScaleType:r,yScaleType:n}=this.getScaleInformation({xScale:o,yScale:a}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(AS(this.id,this.processedData)),c&&l.push(IS());const{dataModel:p,processedData:d}=await this.requestDataModel(e,this.data,{props:[mS(t,r,{id:"xValue"}),wc(i,n,{id:"yLowValue"}),wc(s,n,{id:"yHighValue"}),...l]});this.dataAggregationFilters=this.aggregateData(p,d),this.animationState.transition("updateData")}aggregateData(e,t){const i=this.axes[He.X];if(i==null||!(TS.is(i.scale)||wS.is(i.scale)))return;const s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"yHighValue",t),a=e.resolveColumnById(this,"yLowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[r];return tS(s,o,a,n)}xCoordinateRange(e){const t=this.axes[He.X].scale.convert(e);return[t,t]}yCoordinateRange(e){const t=this.axes[He.Y].scale.convert(e[0]);return[t,t]}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];const{domain:{keys:[s]}}=t;if(e===He.X){const o=i.resolveProcessedDataDefById(this,"xValue");return o?.def.type==="key"&&o.def.valueType==="category"?s:Fc(PS(s))}else{const o=this.domainForClippedRange(He.Y,["yHighValue","yLowValue"],"xValue"),a=_S(o);return Fc(a)}}getSeriesRange(e,t){return this.domainForVisibleRange(He.Y,["yHighValue","yLowValue"],"xValue",t)}createNodeData(){const{data:e,dataModel:t,processedData:i,axes:s}=this,o=s[He.X],a=s[He.Y];if(!(e&&o&&a&&t&&i))return;const r=o.scale,n=a.scale,{xKey:l,yLowKey:c,yHighKey:p,connectMissingData:d,marker:u,interpolation:f}=this.properties,y=i.dataSources.get(this.id)??[],g=(r.bandwidth??0)/2,m=t.resolveKeysById(this,"xValue",i),S=t.resolveColumnById(this,"yHighValue",i),x=t.resolveColumnById(this,"yLowValue",i),b=E=>r.convert(m[E])+g,v=[],k=[],L=[],A=(E,B,G)=>{const W=y[E],V=m[E];if(V==null)return;const K=L[L.length-1];if(Number.isFinite(B)&&Number.isFinite(G)){const $=(le,de,Z)=>{k.push({index:E,series:this,itemId:le,datum:W,datumIndex:E,midPoint:{x:U,y:Z},yHighValue:B,yLowValue:G,xValue:V,xKey:l,yLowKey:c,yHighKey:p,point:{x:U,y:Z,size:j},enabled:!0});const Q=this.createLabelData({datumIndex:E,point:{x:U,y:Z},value:de,yLowValue:G,yHighValue:B,itemId:le,inverted:X,datum:W,series:this});v.push(Q)},X=G>B,U=b(E),J=n.convert(B),oe=n.convert(G),{size:j}=u;$("high",B,J),$("low",G,oe);const Y={high:{point:{x:U,y:J},xDatum:V,yDatum:B},low:{point:{x:U,y:oe},xDatum:V,yDatum:G}};Array.isArray(K)?K.push(Y):K!=null?(K.skip+=1,L.push([Y])):L.push([Y])}else d||(Array.isArray(K)||K==null?L.push({skip:0}):K.skip+=1)},{dataAggregationFilters:D}=this,[I,M]=r.range,P=M-I,R=D?.find(E=>E.maxRange>P),w=R?.topIndices,N=R?.bottomIndices;let[C,T]=this.visibleRange("xValue",o.range,w);C=Math.max(C-1,0),T=Math.min(T+1,w?.length??m.length),i.input.count<1e3&&(C=0,T=i.input.count);for(let E=C;E<T;E+=1){const B=w?.[E]??E,G=N?.[E]??E;A(B,S[B],x[G])}const O=L.flatMap(E=>{if(!Array.isArray(E))return[];const B=E.map(G=>G.high);return Vc(B,f)}),_=L.flatMap(E=>{if(!Array.isArray(E))return[];const B=E.map(G=>G.low);return Vc(B,f)});return{itemId:`${c}-${p}`,labelData:v,nodeData:k,fillData:{itemId:"high",spans:O,phantomSpans:_},highStrokeData:{itemId:"high",spans:O},lowStrokeData:{itemId:"low",spans:_},scales:this.calculateScaling(),visible:this.visible}}createLabelData({datumIndex:e,point:t,value:i,itemId:s,inverted:o,datum:a,series:r}){const{xKey:n,yLowKey:l,yHighKey:c,xName:p,yName:d,yLowName:u,yHighName:f,label:y}=this.properties,{placement:g,padding:m=10}=y;let S=s;o&&(S=s==="low"?"high":"low");const x=g==="outside"&&S==="high"||g==="inside"&&S==="low"?-1:1,b=this.getSeriesDomain(He.Y);return{x:t.x,y:t.y+m*x,series:r,itemId:s,datum:a,datumIndex:e,text:this.getLabelText(i,a,s==="high"?c:l,"y",b,y,{value:i,datum:a,itemId:s,xKey:n,yLowKey:l,yHighKey:c,xName:p,yLowName:u,yHighName:f,yName:d}),textAlign:"center",textBaseline:x===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{visible:t}=e,[i,s]=e.paths,{strokeWidth:o,stroke:a,strokeOpacity:r,lineDash:n,lineDashOffset:l,fill:c,fillOpacity:p,opacity:d}=_c(this.getHighlightStyle(),this.properties);s.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:Dr.None,stroke:a,strokeWidth:o,strokeOpacity:r,lineDash:n,lineDashOffset:l,opacity:d,visible:t});const u=ES(c,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),f=this.getShapeFillBBox();RS(i,u,f),BS(i,{stroke:void 0,fill:u,fillOpacity:p,lineDash:n,lineDashOffset:l,strokeOpacity:r,strokeWidth:o,opacity:d},void 0,f),i.setProperties({pointerEvents:Dr.None,lineJoin:"round",fillShadow:this.properties.shadow,opacity:d,visible:t}),Bc(this,s),Bc(this,i)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("RangeArea")}updateFillPath(e,t){const[i]=e;i.path.clear(),NS(i,t.fillData),i.markDirty("RangeArea")}updateStrokePath(e,t){const[,i]=e;i.path.clear(),Wc(i,t.highStrokeData.spans),Wc(i,t.lowStrokeData.spans),i.markDirty("RangeArea")}updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}getMarkerItemBaseStyle(e,t){const{properties:i}=this,{marker:s}=i,o=this.getHighlightStyle(e,t?.datumIndex);return{shape:s.shape,size:s.size,fill:o?.fill??s.fill,fillOpacity:o?.fillOpacity??s.fillOpacity,stroke:o?.stroke??s.stroke,strokeWidth:o?.strokeWidth??this.getStrokeWidth(s.strokeWidth),strokeOpacity:o?.strokeOpacity??s.strokeOpacity,lineDash:o?.lineDash??s.lineDash,lineDashOffset:o?.lineDashOffset??s.lineDashOffset,opacity:o.opacity??1}}getMarkerItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{xKey:r,yHighKey:n,yLowKey:l,marker:c}=a,{itemStyler:p}=c;if(p!=null)return this.cachedDatumCallback(LS(e,s?"highlight":"node"),()=>this.callWithContext(p,{seriesId:o,datum:t,xKey:r,yHighKey:n,yLowKey:l,highlighted:s,...i}))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yLowKey:o,yHighKey:a,marker:r,fill:n,stroke:l,strokeWidth:c,fillOpacity:p,strokeOpacity:d}=this.properties,u=this.getShapeFillBBox(),f=r.getStyle();t.each((y,g)=>{const m=_c(this.getHighlightStyle(i,g?.datumIndex),f,{fill:n,fillOpacity:p,stroke:l,strokeWidth:c,strokeOpacity:d});this.updateMarkerStyle(r,y,g.datum,g.point,{xKey:s,yHighKey:a,yLowKey:o},i,m,u)}),i||this.properties.marker.markClean()}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,s=>{s.pointerEvents=Dr.None})}updateLabelNodes(e){e.labelSelection.each((t,i)=>{t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1,SS(t,this.properties.label,i)})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}getHighlightData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}getTooltipContent(e,t){const{id:i,dataModel:s,processedData:o,axes:a,properties:r}=this,{xName:n,yName:l,yLowKey:c,yLowName:p,xKey:d,yHighKey:u,yHighName:f,tooltip:y,legendItemName:g}=r,m=a[He.X],S=a[He.Y];if(!s||!o||!m||!S)return;const x=o.dataSources.get(this.id)?.[e],b=s.resolveKeysById(this,"xValue",o)[e],v=s.resolveColumnById(this,"yHighValue",o)[e],k=s.resolveColumnById(this,"yLowValue",o)[e];if(b==null)return;const L=this.getMarkerItemBaseStyle(!1);Object.assign(L,this.getMarkerItemStyleOverrides(String(e),e,L,!1));const A=`${S.formatDatum(k,"tooltip",i,g,x,c)} - ${S.formatDatum(v,"tooltip",i,g,x,u)}`;return this.formatTooltipWithContext(y,{heading:m.formatDatum(b,"tooltip",i,g,x,d),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:`${p??c} - ${f??u}`,value:A}]},{seriesId:i,datum:x,title:l,itemId:t?.itemId??"unknown",xName:n,yName:l,yLowKey:c,yLowName:p,xKey:d,yHighKey:u,yHighName:f,...L})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,marker:a}=this.properties;return{marker:FS({shape:a.shape,fill:a.fill??e,stroke:a.stroke??t,fillOpacity:a.fillOpacity,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset},a.fillGradientDefaults,a.fillPatternDefaults,a.fillImageDefaults),line:{stroke:t,strokeOpacity:s,strokeWidth:i,lineDash:o}}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yLowKey:s,yHighKey:o,yName:a,yLowName:r,yHighName:n,showInLegend:l}=this.properties,c=a??`${r??s} - ${n??o}`,p=`${s}-${o}`;return[{legendType:"category",id:t,itemId:p,seriesId:t,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new OS}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,contextData:s,paths:o}=e,{animationManager:a}=this.ctx;this.updateAreaPaths(o,s),vS(this,a,...o),kS([t],Ec),MS(this,a,t),br(this,"labels",a,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:s,contextData:o,paths:a,previousContextData:r}=e,[n,l]=a;if(n==null&&l==null)return;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(a,o)},p=()=>{t.skipCurrentBatch(),c()};if(o==null||r==null){c(),zc(this,t,"added",i),Kc(this,"fill_path_properties",t,"add",n),Kc(this,"stroke_path_properties",t,"add",l),br(this,"labels",t,s);return}const d=yS(o,r,this.processedData?.reduced?.diff?.[this.id]);if(d===void 0){p();return}else if(d.status==="no-op")return;$c(this.id,"fill_path_properties",t,[n],d.fill.pathProperties),$c(this.id,"stroke_path_properties",t,[l],d.stroke.pathProperties),d.status==="added"?this.updateAreaPaths(a,o):d.status==="removed"?this.updateAreaPaths(a,r):(Hc(this.id,"fill_path_update",t,[n],d.fill.path),Hc(this.id,"stroke_path_update",t,[l],d.stroke.path)),d.hasMotion&&(zc(this,t,void 0,i),br(this,"labels",t,s)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(a,o)})}getFormattedMarkerStyle(e){const{xKey:t,yLowKey:i,yHighKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,e.datum,{xKey:t,yLowKey:i,yHighKey:s},!0)}computeFocusBounds(e){const t=Gc(this,e),i=Gc(this,{...e,datumIndex:e.datumIndex+1});if(t&&i)return CS.merge([t,i])}isDatumEnabled(e,t){return t%2===0&&super.isDatumEnabled(e,t)}};no.className="RangeAreaSeries",no.type="range-area";import{_ModuleSupport as WS}from"ag-charts-community";import{boolean as VS,constant as KS,number as zS,required as lo,string as fi,undocumented as Xc}from"ag-charts-core";var{commonSeriesOptionsDefs:$S,rangeAreaSeriesThemeableOptionsDef:HS}=WS,vr={...$S,...HS,type:lo(KS("range-area")),xKey:lo(fi),yLowKey:lo(fi),yHighKey:lo(fi),xName:fi,yName:fi,yLowName:fi,yHighName:fi};vr.pickOutsideVisibleMinorAxis=Xc(VS),vr.focusPriority=Xc(zS);import{_ModuleSupport as fs}from"ag-charts-community";var XS={series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:fs.FILL_PATTERN_DEFAULTS,stroke:{$palette:"stroke"},fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:fs.FILL_PATTERN_DEFAULTS,fillImageDefaults:fs.FILL_IMAGE_DEFAULTS,size:6,strokeWidth:2},label:{enabled:!1,placement:"outside",padding:10,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},interpolation:{type:"linear"},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:fs.multiSeriesHighlightStyle()},axes:{[fs.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:Yc,CARTESIAN_POSITION:qc}}=Qm,nR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:e=>new no(e),defaultAxes:[{type:Yc.NUMBER,position:qc.LEFT},{type:Yc.CATEGORY,position:qc.BOTTOM}],themeTemplate:XS},kr={type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,options:vr,create:e=>new no(e)};import{_ModuleSupport as YS}from"ag-charts-community";import{_ModuleSupport as co}from"ag-charts-community";var qS=1e3,US=5;function jS(e,t,i,s){if(e.length<qS)return;const[o,a]=Ja(s);let r=ja(e,US),{indexData:n,valueData:l}=er(e,t,i,o,a,r);const c=[{maxRange:r,indexData:n}];for(;r>64;)({indexData:n,valueData:l,maxRange:r}=tr(n,l,r)),c.push({maxRange:r,indexData:n});return c.reverse(),c}import{_ModuleSupport as JS}from"ag-charts-community";var{AbstractBarSeriesProperties:ZS,FillGradientDefaults:QS,FillPatternDefaults:ex,FillImageDefaults:tx,makeSeriesTooltip:ix,Property:me,DropShadow:sx,Label:ox}=JS,Mr=class extends ox{constructor(){super(...arguments),this.placement="inside",this.padding=6}};h([me],Mr.prototype,"placement",2),h([me],Mr.prototype,"padding",2);var be=class extends ZS{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new QS,this.fillPatternDefaults=new ex,this.fillImageDefaults=new tx,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new sx().set({enabled:!1}),this.label=new Mr,this.tooltip=ix(),this.fastDataProcessing=!1}};h([me],be.prototype,"xKey",2),h([me],be.prototype,"yLowKey",2),h([me],be.prototype,"yHighKey",2),h([me],be.prototype,"xName",2),h([me],be.prototype,"yName",2),h([me],be.prototype,"yLowName",2),h([me],be.prototype,"yHighName",2),h([me],be.prototype,"fill",2),h([me],be.prototype,"fillGradientDefaults",2),h([me],be.prototype,"fillPatternDefaults",2),h([me],be.prototype,"fillImageDefaults",2),h([me],be.prototype,"fillOpacity",2),h([me],be.prototype,"stroke",2),h([me],be.prototype,"strokeWidth",2),h([me],be.prototype,"strokeOpacity",2),h([me],be.prototype,"lineDash",2),h([me],be.prototype,"lineDashOffset",2),h([me],be.prototype,"cornerRadius",2),h([me],be.prototype,"itemStyler",2),h([me],be.prototype,"shadow",2),h([me],be.prototype,"label",2),h([me],be.prototype,"tooltip",2),h([me],be.prototype,"fastDataProcessing",2);var{SeriesNodePickMode:Uc,valueProperty:jc,keyProperty:ax,ChartAxisDirection:gs,checkCrisp:rx,updateLabelNode:nx,SMALLEST_KEY_INTERVAL:lx,LARGEST_KEY_INTERVAL:cx,diff:px,prepareBarAnimationFunctions:Jc,midpointStartingBarPosition:Zc,resetBarSelectionsFn:hx,fixNumericExtent:dx,seriesLabelFadeInAnimation:Qc,resetLabelFn:ux,animationValidation:fx,computeBarFocusBounds:gx,visibleRangeIndices:ep,createDatumId:yx,ContinuousScale:tp,DiscreteTimeScale:mx,Rect:Sx,PointerEvents:xx,motion:ip,applyShapeStyle:bx,findMinMax:Dx,getShapeStyle:Ir,areScalingEqual:vx}=co,kx=class extends co.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},po=class extends co.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Uc.AXIS_ALIGNED,Uc.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,propertyKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},propertyNames:{x:["xName"],y:["yLowName","yHighName","yName"]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:hx,label:ux}}),this.properties=new be,this.dataAggregationFilters=void 0,this.NodeEvent=kx}async processData(e){const{xKey:t,yLowKey:i,yHighKey:s,fastDataProcessing:o}=this.properties,a=!o,r=this.getCategoryAxis()?.scale,n=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:p}=this.getScaleInformation({xScale:r,yScale:n}),d=[];this.ctx.animationManager.isSkipped()||(this.processedData&&d.push(px(this.id,this.processedData)),d.push(fx()));const u=this.visible?{}:{forceValue:0},{dataModel:f,processedData:y}=await this.requestDataModel(e,this.data,{props:[ax(t,c,{id:"xValue"}),jc(i,p,{id:"yLowValue",invalidValue:null,...u}),jc(s,p,{id:"yHighValue",invalidValue:null,...u}),...l?[lx,cx]:[],...d],groupByKeys:a});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.largestDataInterval=y.reduced?.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(f,y),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="grouped")return;const i=this.axes[gs.X];if(i==null||!(tp.is(i.scale)||mx.is(i.scale)))return;const s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"yHighValue",t),a=e.resolveColumnById(this,"yLowValue",t),{index:r}=e.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[r];return jS(s,o,a,n)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[s]}=t.domain;if(e===this.getCategoryDirection()){const o=i.resolveProcessedDataDefById(this,"xValue");return o?.def.type==="key"&&o?.def.valueType==="category"?s:this.padBandExtent(s)}else{const o=this.domainForClippedRange(e,["yHighValue","yLowValue"],"xValue"),a=Dx(o);return dx(a)}}getSeriesRange(e,t){return this.domainForVisibleRange(gs.Y,["yHighValue","yLowValue"],"xValue",t)}createNodeData(){const{data:e,dataModel:t,groupScale:i,processedData:s,visible:o}=this,a=this.getCategoryAxis(),r=this.getValueAxis();if(!(e&&a&&r&&t&&s?.dataSources))return;const n=a.scale,l=r.scale,c=this.getBarDirection()===gs.X,{xKey:p,yLowKey:d,yHighKey:u,strokeWidth:f}=this.properties,y=`${d}-${u}`,g={itemId:y,nodeData:[],labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!o)return g;const m=s.dataSources.get(this.id)??[],S=t.resolveKeysById(this,"xValue",s),x=t.resolveColumnById(this,"yLowValue",s),b=t.resolveColumnById(this,"yHighValue",s),{barWidth:v,groupIndex:k}=this.updateGroupScale(a),L=tp.is(n)?v*-.5:0,A=i.convert(String(k)),D=rx(a?.scale,a?.visibleRange,this.smallestDataInterval,this.largestDataInterval),I=T=>Math.round(n.convert(S[T]))+A+L,M=(T,O,_,F,E,B,G)=>{const W=m[T],V=S[T];if(V==null)return;const K=x[T],$=b[T];if(!Number.isFinite(K?.valueOf())||!Number.isFinite($?.valueOf()))return;const[X,U]=K<$?[K,$]:[$,K],J=Math.round(l.convert(B)),oe=Math.round(l.convert(E)),j=Math.max(f,Math.abs(oe-J)),Y={x:c?Math.min(J,oe):_,y:c?_:Math.min(J,oe),width:c?j:F,height:c?F:j},le={x:Y.x+Y.width/2,y:Y.y+Y.height/2},de=this.createLabelData({datumIndex:T,rect:Y,barAlongX:c,yLowValue:X,yHighValue:U,datum:W,series:this}),Z={index:O,valueIndex:T,series:this,itemId:y,datum:W,datumIndex:T,xValue:V,yLowValue:K,yHighValue:$,yLowKey:d,yHighKey:u,xKey:p,x:Y.x,y:Y.y,width:Y.width,height:Y.height,midPoint:le,crisp:G,labels:de};g.nodeData.push(Z),g.labelData.push(...de)},{dataAggregationFilters:P}=this,[R,w]=n.range,N=w-R,C=P?.find(T=>T.maxRange>N);if(C!=null){const{maxRange:T,indexData:O}=C,[_,F]=ep(1,T,a.range,E=>{const B=E*At,G=O[B+st],W=O[B+gt];if(G===-1)return;const V=(G+W)/2|0;return[I(V),I(W)+v]});for(let E=_;E<F;E+=1){const B=E*At,G=O[B+st],W=O[B+gt],V=O[B+yt],K=O[B+mt];if(G===-1)continue;const $=(G+W)/2|0;if(S[$]==null)continue;const U=I($),J=Math.abs(I(G)-I(W))+v,oe=x[V],j=b[K];M($,0,U,J,oe,j,!1)}}else if(s.type==="ungrouped"){let[T,O]=ep(1,m.length,a.range,_=>[I(_),v]);s.input.count<1e3&&(T=0,O=s.input.count);for(let _=T;_<O;_+=1){const F=I(_),E=v,B=x[_],G=b[_];M(_,0,F,E,B,G,D)}}else for(const{datumIndex:T,groupIndex:O}of t.forEachGroupDatum(this,s)){const _=I(T),F=v,E=x[T],B=b[T];M(T,O,_,F,E,B,D)}return g}createLabelData({datumIndex:e,rect:t,barAlongX:i,yLowValue:s,yHighValue:o,datum:a,series:r}){const{xKey:n,yLowKey:l,yHighKey:c,xName:p,yLowName:d,yHighName:u,yName:f,label:y}=this.properties,g={datum:a,xKey:n,yLowKey:l,yHighKey:c,xName:p,yLowName:d,yHighName:u,yName:f},{placement:m,padding:S}=y,b=S*(m==="outside"?1:-1),v=this.getSeriesDomain(gs.Y),k={datumIndex:e,x:t.x+(i?-b:t.width/2),y:t.y+(i?t.height/2:t.height+b),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(s,a,l,"y",v,y,{itemId:"low",value:s,...g}),itemId:"low",datum:a,series:r},L={datumIndex:e,x:t.x+(i?t.width+b:t.width/2),y:t.y+(i?t.height/2:-b),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(o,a,c,"y",v,y,{itemId:"high",value:o,...g}),itemId:"high",datum:a,series:r};return m==="outside"&&(k.textAlign=i?"right":"center",k.textBaseline=i?"middle":"top",L.textAlign=i?"left":"center",L.textBaseline=i?"middle":"bottom"),[k,L]}nodeFactory(){return new Sx}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s,void 0,o=>this.getDatumId(o))}getItemBaseStyle(e,t){const{properties:i}=this,{cornerRadius:s,fillGradientDefaults:o,fillPatternDefaults:a,fillImageDefaults:r}=i,n=this.getHighlightStyle(e,t?.datumIndex);return Ir({fill:n?.fill??i.fill,fillOpacity:n?.fillOpacity??i.fillOpacity,stroke:n?.stroke??i.stroke,strokeWidth:n?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:n?.strokeOpacity??i.strokeOpacity,lineDash:n?.lineDash??i.lineDash??[],lineDashOffset:n?.lineDashOffset??i.lineDashOffset,cornerRadius:n?.cornerRadius??s,opacity:n?.opacity??1},o,a,r)}getItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{xKey:r,yHighKey:n,yLowKey:l,itemStyler:c,fillGradientDefaults:p,fillPatternDefaults:d,fillImageDefaults:u}=a;if(c==null)return;const f=this.cachedDatumCallback(yx(e,s?"highlight":"node"),()=>this.callWithContext(c,{seriesId:o,datum:t,xKey:r,yHighKey:n,yLowKey:l,highlighted:s,...i}));return Ir(f,p,d,u)}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getCategoryDirection()===gs.X,o=this.getShapeFillBBox();t.each((a,r)=>{const n=this.getItemBaseStyle(i,r),l=this.getItemStyleOverrides(String(r.datumIndex),r.datum,n,i);bx(a,n,l,o),a.cornerRadius=l?.cornerRadius??n.cornerRadius,a.visible=s?r.width>0:r.height>0,a.crisp=r.crisp})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=xx.None})}updateLabelNodes(e){e.labelSelection.each((t,i)=>{t.fillOpacity=this.getHighlightStyle(!1,i?.datumIndex).opacity??1,nx(t,this.properties.label,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:r,yName:n,yLowKey:l,yHighKey:c,yLowName:p,yHighName:d,tooltip:u,legendItemName:f}=o,y=this.getCategoryAxis(),g=this.getValueAxis();if(!i||!s||!y||!g)return;const m=s.dataSources.get(this.id)?.[e],S=i.resolveKeysById(this,"xValue",s)[e],x=i.resolveColumnById(this,"yHighValue",s)[e],b=i.resolveColumnById(this,"yLowValue",s)[e];if(S==null)return;const v=this.getItemBaseStyle(!1);Object.assign(v,this.getItemStyleOverrides(String(e),m,v,!1));const k=`${g.formatDatum(b,"tooltip",t,f,m,l)} - ${g.formatDatum(x,"tooltip",t,f,m,c)}`;return this.formatTooltipWithContext(u,{heading:y.formatDatum(S,"tooltip",t,f,m,a),symbol:this.legendItemSymbol(),data:[{label:n,fallbackLabel:`${p??l} - ${d??c}`,value:k}]},{seriesId:t,datum:m,title:n,xKey:a,xName:r,yName:n,yLowKey:l,yHighKey:c,yLowName:p,yHighName:d,...v})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:s,strokeOpacity:o,lineDash:a,lineDashOffset:r,fillGradientDefaults:n,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:Ir({fill:e,stroke:t,fillOpacity:s,strokeOpacity:o,strokeWidth:i,lineDash:a,lineDashOffset:r},n,l,c)}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yName:s,yLowName:o,yHighName:a,yLowKey:r,yHighKey:n,showInLegend:l}=this.properties,c=s??`${o??r} - ${a??n}`,p=`${r}-${n}`;return[{legendType:"category",id:t,itemId:p,seriesId:t,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){const i=Jc(Zc(this.isVertical(),"normal"));ip.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],i),Qc(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:s,previousContextData:o}=e,a=co.calculateDataDiff(this.id,t,this.getDatumId.bind(this),s,o,this.processedData);this.ctx.animationManager.stopByAnimationGroupId(this.id);const r=o==null?"fade":"normal",n=Jc(Zc(this.isVertical(),r));ip.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n,(l,c)=>this.getDatumId(c),a),(a?.changed||!vx(s.groupScale,o?.groupScale))&&Qc(this,"labels",this.ctx.animationManager,i)}getDatumId(e){return`${e.xValue}-${e.valueIndex}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return gx(this,this.contextNodeData?.nodeData[e])}};po.className="RangeBarSeries",po.type="range-bar";import{_ModuleSupport as Mx}from"ag-charts-community";import{boolean as sp,constant as Ix,number as Ax,required as ho,string as gi,undocumented as Ar}from"ag-charts-core";var{commonSeriesOptionsDefs:Nx,rangeBarSeriesThemeableOptionsDef:Px}=Mx,uo={...Nx,...Px,type:ho(Ix("range-bar")),xKey:ho(gi),yLowKey:ho(gi),yHighKey:ho(gi),xName:gi,yName:gi,yLowName:gi,yHighName:gi};uo.pickOutsideVisibleMinorAxis=Ar(sp),uo.fastDataProcessing=Ar(sp),uo.focusPriority=Ar(Ax);import{_ModuleSupport as fo}from"ag-charts-community";var Lx={series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:fo.FILL_PATTERN_DEFAULTS,fillImageDefaults:fo.FILL_IMAGE_DEFAULTS,strokeWidth:{$isUserOption:["./stroke",2,0]},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},placement:"inside"},highlight:fo.multiSeriesHighlightStyle()},axes:{[fo.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},fR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:e=>new po(e),defaultAxes:YS.DIRECTION_SWAP_AXES,themeTemplate:Lx,groupable:!0},Nr={type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,options:uo,create:e=>new po(e)};import{_ModuleSupport as Rx}from"ag-charts-community";import{_ModuleSupport as yi}from"ag-charts-community";import{_ModuleSupport as Ox}from"ag-charts-community";var{AbstractBarSeriesProperties:Cx,BaseProperties:ys,FillGradientDefaults:Tx,FillPatternDefaults:wx,FillImageDefaults:_x,PropertiesArray:Fx,makeSeriesTooltip:Ex,Property:ie,DropShadow:Bx,Label:Gx}=Ox,go=class extends ys{};h([ie],go.prototype,"totalType",2),h([ie],go.prototype,"index",2),h([ie],go.prototype,"axisLabel",2);var op=class extends ys{};h([ie],op.prototype,"renderer",2);var Pr=class extends Gx{constructor(){super(...arguments),this.placement="outside-end",this.padding=6}};h([ie],Pr.prototype,"placement",2),h([ie],Pr.prototype,"padding",2);var Be=class extends ys{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Tx,this.fillPatternDefaults=new wx,this.fillImageDefaults=new _x,this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new Bx().set({enabled:!1}),this.label=new Pr,this.tooltip=new op}};h([ie],Be.prototype,"name",2),h([ie],Be.prototype,"fill",2),h([ie],Be.prototype,"fillGradientDefaults",2),h([ie],Be.prototype,"fillPatternDefaults",2),h([ie],Be.prototype,"fillImageDefaults",2),h([ie],Be.prototype,"stroke",2),h([ie],Be.prototype,"fillOpacity",2),h([ie],Be.prototype,"strokeOpacity",2),h([ie],Be.prototype,"lineDash",2),h([ie],Be.prototype,"lineDashOffset",2),h([ie],Be.prototype,"strokeWidth",2),h([ie],Be.prototype,"cornerRadius",2),h([ie],Be.prototype,"itemStyler",2),h([ie],Be.prototype,"shadow",2),h([ie],Be.prototype,"label",2),h([ie],Be.prototype,"tooltip",2);var mi=class extends ys{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};h([ie],mi.prototype,"enabled",2),h([ie],mi.prototype,"stroke",2),h([ie],mi.prototype,"strokeOpacity",2),h([ie],mi.prototype,"lineDash",2),h([ie],mi.prototype,"lineDashOffset",2),h([ie],mi.prototype,"strokeWidth",2);var yo=class extends ys{constructor(){super(...arguments),this.positive=new Be,this.negative=new Be,this.total=new Be}};h([ie],yo.prototype,"positive",2),h([ie],yo.prototype,"negative",2),h([ie],yo.prototype,"total",2);var zt=class extends Cx{constructor(){super(...arguments),this.item=new yo,this.totals=new Fx(go),this.line=new mi,this.tooltip=Ex()}};h([ie],zt.prototype,"xKey",2),h([ie],zt.prototype,"yKey",2),h([ie],zt.prototype,"xName",2),h([ie],zt.prototype,"yName",2),h([ie],zt.prototype,"item",2),h([ie],zt.prototype,"totals",2),h([ie],zt.prototype,"line",2),h([ie],zt.prototype,"tooltip",2);var{adjustLabelPlacement:Wx,SeriesNodePickMode:ap,fixNumericExtent:Vx,valueProperty:rp,keyProperty:Kx,accumulativeValueProperty:mo,trailingAccumulatedValueProperty:zx,ChartAxisDirection:So,createDatumId:$x,checkCrisp:Hx,updateLabelNode:Xx,prepareBarAnimationFunctions:Yx,collapsedStartingBarPosition:qx,resetBarSelectionsFn:Ux,seriesLabelFadeInAnimation:jx,resetLabelFn:Jx,animationValidation:Zx,DEFAULT_CARTESIAN_DIRECTION_KEYS:Qx,DEFAULT_CARTESIAN_DIRECTION_NAMES:eb,computeBarFocusBounds:tb,isContinuous:np,Rect:ib,motion:sb,applyShapeStyle:ob,getShapeStyle:Lr}=yi,xo=class extends yi.AbstractBarSeries{constructor(e){super({moduleCtx:e,propertyKeys:Qx,propertyNames:eb,categoryKey:void 0,pickModes:[ap.NEAREST_NODE,ap.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:Ux,label:Jx}}),this.properties=new zt,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(e){const{xKey:t,yKey:i,totals:s}=this.properties,{data:o=[]}=this;if(!this.visible)return;const a=x=>np(x)&&Number(x)>=0,r=x=>np(x)&&Number(x)>=0,n=x=>x==="total"||x==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],p=s.reduce((x,b)=>{const v=x.get(b.index);return v?v.push(b):x.set(b.index,[b]),x},new Map);o.forEach((x,b)=>{c.push(x),p.get(b)?.forEach(v=>c.push({...v.toJson(),[t]:v.axisLabel}))});const d=[];this.ctx.animationManager.isSkipped()||d.push(Zx());const u=this.getCategoryAxis()?.scale,f=this.getValueAxis()?.scale,{isContinuousX:y,xScaleType:g,yScaleType:m}=this.getScaleInformation({xScale:u,yScale:f}),{processedData:S}=await this.requestDataModel(e,c,{props:[Kx(t,g,{id:"xValue"}),mo(i,m,{...l,id:"yCurrent"}),mo(i,m,{...l,missingValue:0,id:"yCurrentTotal"}),mo(i,m,{...l,id:"yCurrentPositive",validation:a}),mo(i,m,{...l,id:"yCurrentNegative",validation:r}),zx(i,m,{...l,id:"yPrevious"}),rp(i,m,{id:"yRaw"}),rp("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:n}),...y?[yi.SMALLEST_KEY_INTERVAL,yi.LARGEST_KEY_INTERVAL]:[],...d]});this.smallestDataInterval=S.reduced?.smallestKeyInterval,this.largestDataInterval=S.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[s],values:o}=t.domain;if(e===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue");if(a?.def.type==="key"&&a?.def.valueType==="category")return s;const r=e===So.Y,n=this.getCategoryAxis().isReversed();return this.padBandExtent(s,n!==r)}else{const a=i.resolveProcessedDataIndexById(this,"yCurrent"),r=o[a],n=[Math.min(0,r[0]),Math.max(0,r[1])];return Vx(n)}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{data:e,dataModel:t,processedData:i}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!e||!s||!o||!t||!i)return;const{line:a}=this.properties,r=s.scale,n=o.scale,l=this.getBarDirection()===So.X,c=this.getBandwidth(s)??10,p=s.isReversed(),d=o.isReversed();if(i.type!=="ungrouped")return;const u={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!this.visible)return u;const f=[],y=t.resolveKeysById(this,"xValue",i),g=t.resolveColumnById(this,"yRaw",i),m=t.resolveColumnById(this,"totalTypeValue",i),S=t.resolveColumnById(this,"yCurrent",i),x=t.resolveColumnById(this,"yPrevious",i),b=t.resolveColumnById(this,"yCurrentTotal",i),v=this.getSeriesDomain(So.Y),k=Hx(s?.scale,s?.visibleRange,this.smallestDataInterval,this.largestDataInterval);function L(C,T,O){return C||T?{cumulativeValue:b[O],trailingValue:T?D:0}:{cumulativeValue:S[O],trailingValue:x[O]}}function A(C,T,O,_,F){return C?_:T?(_??0)-(F??0):O}let D=0;const{xKey:I,yKey:M,xName:P,yName:R}=this.properties;(i.dataSources.get(this.id)??[]).forEach((C,T)=>{const O=m[T],_=this.isSubtotal(O),F=this.isTotal(O),E=F||_,B=y[T];if(B==null)return;const G=Math.round(r.convert(B)),W=g[T],{cumulativeValue:V,trailingValue:K}=L(F,_,T);E&&(D=V??0);const $=Math.round(n.convert(V)),X=Math.round(n.convert(K)),U=A(F,_,W,V,K),J=(U??0)>=0,oe=this.getSeriesItemType(J,O),{strokeWidth:j,label:Y}=this.getItemConfig(oe),le=J?$:X,de=J?X:$,Z=Math.max(j,Math.abs(de-le)),Q={x:l?Math.min(le,de):G,y:l?G:Math.min(le,de),width:l?Z:c,height:l?c:Z},Ee={x:Q.x+Q.width/2,y:Q.y+Q.height/2},ze=E?$:X,ve=Math.floor(a.strokeWidth)%2/2,ee=p?$:ze,ue=p?ze:$;let pe,We;l?(pe={x:ee+ve,y:Q.y},We={x:ue+ve,y:Q.y+Q.height}):(pe={x:Q.x,y:ee+ve},We={x:Q.x+Q.width,y:ue+ve});const kt={x:p?We.x:pe.x,y:p?We.y:pe.y,x2:p?pe.x:We.x,y2:p?pe.y:We.y,size:0};f.push(kt);const Vt=oe==="subtotal"?"total":oe,Li=this.getLabelText(U,C,M,"y",v,Y,{itemId:Vt,value:U,datum:C,xKey:I,yKey:M,xName:P,yName:R}),ut={index:T,series:this,itemId:oe,datum:C,datumIndex:T,cumulativeValue:V??0,xValue:B,yValue:U,yKey:M,xKey:I,x:Q.x,y:Q.y,width:Q.width,height:Q.height,midPoint:Ee,crisp:k,label:{text:Li,...Wx({isUpward:(U??-1)>=0!==d,isVertical:!l,placement:Y.placement,padding:Y.padding,rect:Q})}};u.nodeData.push(ut),u.labelData.push(ut)});const N=this.properties.line.enabled;return S!=null&&N&&(u.pointData=f),u}updateSeriesItemTypes(){const{dataModel:e,seriesItemTypes:t,processedData:i}=this;if(!e||!i)return;t.clear();const s=e.resolveProcessedDataIndexById(this,"yCurrentPositive"),o=e.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=e.resolveProcessedDataIndexById(this,"totalTypeValue"),r=i.domain.values[s]??[],n=i.domain.values[o]??[];r.length>0&&t.add("positive"),n.length>0&&t.add("negative");const l=i?.domain.values[a];l&&l.forEach(c=>{(c==="total"||c==="subtotal")&&t.add("total")})}isSubtotal(e){return e==="subtotal"}isTotal(e){return e==="total"}nodeFactory(){return new ib}getSeriesItemType(e,t){return t??(e?"positive":"negative")}getItemConfig(e){switch(e){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s)}getItemStyle(e,t,i,s,o){const{id:a,properties:r}=this,n=r.item[i==="subtotal"?"total":i],l=this.getHighlightStyle(s,o?.datumIndex),{itemStyler:c,fillGradientDefaults:p,fillPatternDefaults:d,fillImageDefaults:u}=n,{xKey:f,yKey:y}=r,g=Lr({fill:l?.fill??n.fill,fillOpacity:l?.fillOpacity??n.fillOpacity,stroke:l?.stroke??n.stroke,strokeWidth:l?.strokeWidth??n.strokeWidth,strokeOpacity:l?.strokeOpacity??n.strokeOpacity,lineDash:l?.lineDash??n.lineDash??[],lineDashOffset:l?.lineDashOffset??n.lineDashOffset,cornerRadius:l?.cornerRadius??n.cornerRadius,opacity:l?.opacity??1},p,d,u);if(c!=null){let m=this.cachedDatumCallback($x(e,s?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,itemId:i,datum:t,xKey:f,yKey:y,highlighted:s,...g}));m=Lr(m,p,d,u),Object.assign(g,m)}return g}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getCategoryDirection()===So.X,o=this.getShapeFillBBox();t.each((a,r)=>{const n=r.itemId,l=this.getItemStyle(String(r.datumIndex),r.datum,n,i,r);ob(a,l,void 0,o),a.visible=s?r.width>0:r.height>0,a.crisp=r.crisp})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;if(t.length===0)return i.update([]);const s=t.filter(o=>{const{label:a}=this.getItemConfig(o.itemId);return a.enabled});return i.update(s)}updateLabelNodes(e){e.labelSelection.each((t,i)=>{t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex)?.opacity??1,Xx(t,this.getItemConfig(i.itemId).label,i.label)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:r,yKey:n,yName:l,tooltip:c,legendItemName:p}=o,d=this.getCategoryAxis(),u=this.getValueAxis();if(!i||!s||!d||!u)return;const f=s.dataSources.get(this.id)?.[e],y=i.resolveKeysById(this,"xValue",s)[e],g=i.resolveColumnById(this,"yRaw",s)[e],m=i.resolveColumnById(this,"yCurrentTotal",s),S=i.resolveColumnById(this,"totalTypeValue",s);if(y==null)return;const x=S[e],b=(g??0)>=0,v=this.getSeriesItemType(b,x);let k;if(this.isTotal(x))k=m[e];else if(this.isSubtotal(x)){k=m[e];for(let A=e-1;A>=0;A-=1)if(this.isSubtotal(S[A])){k=k-m[A];break}}else k=g;const L=this.getItemStyle(String(e),f,v,!1);return this.formatTooltipWithContext(c,{heading:d.formatDatum(y,"tooltip",t,p,f,a),symbol:this.legendItemSymbol(v),data:[{label:l,fallbackLabel:n,value:u.formatDatum(k,"tooltip",t,p,f,n)}]},{seriesId:t,datum:f,title:l,itemId:v,xKey:a,xName:r,yKey:n,yName:l,...L})}legendItemSymbol(e){const{fill:t,stroke:i,fillOpacity:s,strokeOpacity:o,strokeWidth:a,lineDash:r,lineDashOffset:n,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:p}=this.getItemConfig(e);return{marker:Lr({fill:t,stroke:i,fillOpacity:s,strokeOpacity:o,strokeWidth:a,lineDash:r,lineDashOffset:n},l,c,p)}}getLegendData(e){if(e!=="category")return[];const{id:t,seriesItemTypes:i}=this,s=[],o=r=>r.charAt(0).toUpperCase()+r.substring(1),{showInLegend:a}=this.properties;return i.forEach(r=>{const{name:n}=this.getItemConfig(r);s.push({legendType:"category",id:t,itemId:r,seriesId:t,enabled:!0,label:{text:n??o(r)},symbol:this.legendItemSymbol(r),hideInLegend:!a,isFixed:!0})}),s}toggleSeriesItem(){}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:s}=e,o=Yx(qx(this.isVertical(),this.axes,"normal"));sb.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o),jx(this,"labels",this.ctx.animationManager,i);const{pointData:a}=s;a&&(this.isVertical()?this.animateConnectorLinesVertical(e):this.animateConnectorLinesHorizontal(e))}animateConnectorLinesHorizontal(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:s}=i;this.updateLineNode(i);const o=this.getValueAxis(),a=o?.isReversed(),r=a?(p,d)=>p<d:(p,d)=>p>d,n=o?.scale.convert(0),l=t.reduce((p,d)=>(r(d.x,p)&&(p=d.x),p),a?1/0:0),c=(p,d,u,f,y)=>(p-d)/(u-d)*(y-f)+f;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:n,to:l,ease:yi.Motion.easeOut,collapsable:!1,onUpdate(p){s.clear(!0),t.forEach((d,u)=>{const f=c(p,n,l,n,d.x),y=c(p,n,l,n,d.x2);u!==0&&s.lineTo(f,d.y),s.moveTo(y,d.y2)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateConnectorLinesVertical(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:s}=i;this.updateLineNode(i);const o=this.getValueAxis(),a=o?.isReversed(),r=a?(p,d)=>p>d:(p,d)=>p<d,n=o?.scale.convert(0),l=t.reduce((p,d)=>(r(d.y,p)&&(p=d.y),p),a?0:1/0),c=(p,d,u,f,y)=>(p-d)/(u-d)*(y-f)+f;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:n,to:l,ease:yi.Motion.easeOut,collapsable:!1,onUpdate(p){s.clear(!0),t.forEach((d,u)=>{const f=c(p,n,l,n,d.y),y=c(p,n,l,n,d.y2);u!==0&&s.lineTo(d.x,f),s.moveTo(d.x2,y)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateReadyResize(e){super.animateReadyResize(e),this.resetConnectorLinesPath(e)}updatePaths(e){this.resetConnectorLinesPath({contextData:e.contextData,paths:e.paths})}resetConnectorLinesPath({contextData:e,paths:t}){if(t.length===0)return;const[i]=t;this.updateLineNode(i);const{path:s}=i;s.clear(!0);const{pointData:o}=e;o&&(o.forEach((a,r)=>{r!==0&&s.lineTo(a.x,a.y),s.moveTo(a.x2,a.y2)}),i.checkPathDirty())}updateLineNode(e){const{stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,lineDashOffset:a}=this.properties.line;e.setProperties({fill:void 0,stroke:t,strokeWidth:this.getStrokeWidth(i),strokeOpacity:s,lineDash:o,lineDashOffset:a,lineJoin:"round",pointerEvents:yi.PointerEvents.None})}isLabelEnabled(){const{positive:e,negative:t,total:i}=this.properties.item;return e.label.enabled||t.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return tb(this,this.contextNodeData?.nodeData[e])}};xo.className="WaterfallSeries",xo.type="waterfall";import{_ModuleSupport as ab}from"ag-charts-community";import{arrayOfDefs as rb,constant as nb,positiveNumber as lb,required as Vi,string as ms,union as cb}from"ag-charts-core";var{commonSeriesOptionsDefs:pb,waterfallSeriesThemeableOptionsDef:hb}=ab,db={...hb,...pb,type:Vi(nb("waterfall")),xKey:Vi(ms),yKey:Vi(ms),xName:ms,yName:ms,totals:rb({totalType:Vi(cb("total","subtotal")),index:Vi(lb),axisLabel:Vi(ms)},"a total definition options array")};import{_ModuleSupport as Rr}from"ag-charts-community";function Or(e,t){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$path:[`/${t}`,{$palette:"fill"},{$palette:"fills"}]},{$palette:`${e}.fill`}]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$if:[{$or:[{$isGradient:{$palette:`${e}.fill`}},{$isPattern:{$palette:`${e}.fill`}},{$isImage:{$palette:`${e}.fill`}}]},{$map:[{$path:["/color",void 0,{$value:"$1"}]},{$path:["/colorStops",void 0,{$palette:`${e}.fill`}]}]},[{$mix:[{$palette:`${e}.fill`},"black",.15]},{$mix:[{$palette:`${e}.fill`},"white",.15]}]]},rotation:0,reverse:!1},fillPatternDefaults:Rr.FILL_PATTERN_DEFAULTS,fillImageDefaults:Rr.FILL_IMAGE_DEFAULTS,stroke:{$palette:`${e}.stroke`},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{enabled:!1,fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},formatter:void 0,placement:"outside-end"}}}var ub={series:{item:{positive:Or("altUp",0),negative:Or("altDown",1),total:Or("neutral",2)},line:{stroke:{$palette:"neutral.stroke"},strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2},highlight:Rr.singleSeriesHighlightStyle()},legend:{enabled:!0,toggleSeries:!1}},DR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:e=>new xo(e),defaultAxes:Rx.DIRECTION_SWAP_AXES,themeTemplate:ub},Cr={type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,options:db,create:e=>new xo(e)},{NewAreaSeriesModule:fb,NewBarSeriesModule:gb,NewBubbleSeriesModule:yb,NewHistogramSeriesModule:mb,NewLineSeriesModule:Sb,NewScatterSeriesModule:xb,numberFormatValidator:bb,without:nt}=Fg,lp={width:ft,height:ft,grip:rs,fill:Xs,stroke:Xs,strokeWidth:ft,cornerRadius:ft},lt=["cursor","highlightStyle","listeners","nodeClickRange","showInLegend","showInMiniChart","tooltip","visible","xName","yName"],Db=[...lt,"errorBar","label","legendItemName","direction"],vb=[...lt,"direction","legendItemName","minName","q1Name","medianName","q3Name","maxName"],kb=[...lt,"title","label","labelKey","labelName","sizeName"],Mb=[...lt,"title","label","colorName","textAlign","verticalAlign","itemPadding","colorRange"],Ib=[...lt,"label"],Ab=[...lt,"errorBar","title","label"],Nb=[...lt,"label","yLowName","yHighName"],Pb=[...lt,"direction","label","yLowName","yHighName"],Lb=[...lt,"errorBar","title","label","labelKey","labelName"],Rb=[...lt,"direction"],Ob={enabled:rs,height:ft,spacing:ft,cornerRadius:zl,mask:{fill:Xs,fillOpacity:Vg,stroke:Xs,strokeWidth:ft},minHandle:lp,maxHandle:lp,miniChart:{enabled:rs,padding:{top:ft,bottom:ft},label:{enabled:rs,avoidCollisions:rs,spacing:ft,format:bb,formatter:Gg,interval:{minSpacing:ft,maxSpacing:ft,values:Eg,step:zl},...Wg},series:Bg(Kg({area:nt(fb.options,[...lt,"type"]),bar:nt(gb.options,[...Db,"type"]),"box-plot":nt(qa.options,[...vb,"type"]),bubble:nt(yb.options,[...kb,"type"]),candlestick:nt(hr.options,[...lt,"type"]),heatmap:nt(yr.options,[...Mb,"type"]),histogram:nt(mb.options,[...Ib,"type"]),line:nt(Sb.options,[...Ab,"type"]),ohlc:nt(Sr.options,[...lt,"type"]),"range-area":nt(kr.options,[...Nb,"type"]),"range-bar":nt(Nr.options,[...Pb,"type"]),scatter:nt(xb.options,[...Lb,"type"]),waterfall:nt(Cr.options,[...Rb,"type"])},"miniChart series options"))}},{annotationOptionsDef:Cb}=xg,Tb={type:"plugin",name:"annotations",chartType:"cartesian",options:Cb,create(){return null}},wb={type:"plugin",name:"navigator",chartType:"cartesian",options:Ob,create(){return null}},_b={type:"plugin",name:"initialState",options:_g,create(){return null}};import{_ModuleSupport as Tr}from"ag-charts-community";import{_ModuleSupport as Fb}from"ag-charts-community";import{Logger as Eb}from"ag-charts-core";import{_ModuleSupport as cp}from"ag-charts-community";import{Logger as Bb}from"ag-charts-core";function pp(e,t,i){i||(t=Gb(t));const s=new Map;for(const a of e)s.set(a.id,{datum:a,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let o=0;return s.forEach((a,r)=>{o=Math.max(o,wr(s,t,a,r,-1,[])+wr(s,t,a,r,1,[])+1)}),{links:t,nodeGraph:s,maxPathLength:o}}function hp(e,t,i,s){const o=s.indexOf(t);if(o!==-1){for(let r=o;r<s.length;r+=1)i.add(s[r]);return}s.push(t);const{toNode:a}=t;for(const r of e)r.fromNode===a&&hp(e,r,i,s);s.pop()}function Gb(e){const t=new Set;for(const i of e)hp(e,i,t,[]);return t.size!==0&&Bb.warnOnce("Some links formed circular references. These will be removed from the output."),t.size===0?e:e.filter(i=>!t.has(i))}function wr(e,t,i,s,o,a){if(a.includes(s))return 1/0;let r=o===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(r===-1){r=0;const n=o===-1?i.linksBefore:i.linksAfter;for(const l of t){const{fromNode:c,toNode:p}=l,d=o===-1?p.id:c.id,u=o===-1?c.id:p.id,f=s===d?e.get(u):void 0;f!=null&&(n.push({node:f,link:l}),a?.push(s),r=Math.max(r,wr(e,t,f,u,o,a)+1),a?.pop())}o===-1?i.maxPathLengthBefore=r:i.maxPathLengthAfter=r}return r}var{Series:Wb,DataController:Vb,keyProperty:Kb,valueProperty:bo,Selection:Si,Group:Ki,TransformableText:zb}=cp,$b=class extends cp.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s);const{datumIndex:o}=i,a=s.contextNodeData?.nodeData.find(r=>r.datumIndex.type===o.type&&r.datumIndex.index===o.index);this.size=a?.size,this.label=a?.type===1?a?.label:void 0}},dp=class extends Wb{constructor(){super(...arguments),this.NodeEvent=$b,this._chartNodes=void 0,this.nodeCount=0,this.linkCount=0,this.linksDataModel=void 0,this.linksProcessedData=void 0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Ki({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Ki({name:"nodeGroup"})),this.focusLinkGroup=this.highlightNode.appendChild(new Ki({name:"linkGroup"})),this.focusNodeGroup=this.highlightNode.appendChild(new Ki({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightNode.appendChild(new Ki({name:"linkGroup"})),this.highlightNodeGroup=this.highlightNode.appendChild(new Ki({name:"nodeGroup"})),this.labelSelection=Si.select(this.labelGroup,zb),this.linkSelection=Si.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=Si.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=Si.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=Si.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=Si.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=Si.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes??this._chartNodes}setChartNodes(e){this._chartNodes=e,this.nodes===e&&(this.nodeDataRefresh=!0)}async processData(e){const{data:t,nodes:i}=this;if(t==null)return;const{fromKey:s,toKey:o,sizeKey:a,idKey:r,labelKey:n}=this.properties,l=new Vb("standalone",e.suppressFieldDotNotation),c=i!=null?l.request(this.id,i,{props:[Kb(r,void 0,{id:"idValue",includeProperty:!1}),...n!=null?[bo(n,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,p=e.request(this.id,t,{props:[bo(s,void 0,{id:"fromValue",includeProperty:!1}),bo(o,void 0,{id:"toValue",includeProperty:!1}),...a!=null?[bo(a,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});i!=null&&l.execute();const[d,u]=await Promise.all([c,p]);this.nodesDataModel=d?.dataModel,this.nodesProcessedData=d?.processedData,this.linksDataModel=u?.dataModel,this.linksProcessedData=u?.processedData;const f=new Map;if(d==null){const y=u.dataModel.resolveColumnById(this,"fromValue",u.processedData),g=u.dataModel.resolveColumnById(this,"toValue",u.processedData),m=S=>{const x=f.size;return{series:this,itemId:void 0,datum:{},datumIndex:{type:1,index:x},type:1,index:x,linksBefore:[],linksAfter:[],id:S,size:0,label:S}};u.processedData.dataSources.get(this.id)?.forEach((S,x)=>{const b=y[x],v=g[x];b==null||v==null||(f.has(b)||f.set(b,m(b)),f.has(v)||f.set(v,m(v)))})}else{const y=d.dataModel.resolveColumnById(this,"idValue",d.processedData),g=n!=null?d.dataModel.resolveColumnById(this,"labelValue",d.processedData):void 0;d.processedData.dataSources.get(this.id)?.forEach((m,S)=>{const x=y[S],b=g?.[S];f.set(x,{series:this,itemId:void 0,datum:m,datumIndex:{type:1,index:S},type:1,index:S,linksBefore:[],linksAfter:[],id:x,size:0,label:b})})}this.processedNodes=f}getNodeGraph(e,t,{includeCircularReferences:i}){const{linksDataModel:s,linksProcessedData:o}=this;if(s==null||o==null){const{links:y,nodeGraph:g,maxPathLength:m}=pp(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:g,links:y,maxPathLength:m}}const{sizeKey:a}=this.properties,r=s.resolveColumnById(this,"fromValue",o),n=s.resolveColumnById(this,"toValue",o),l=a!=null?s.resolveColumnById(this,"sizeValue",o):void 0,c=new Map;this.processedNodes.forEach(y=>{const g=e(y);c.set(y.id,g)});const p=[];o.dataSources.get(this.id)?.forEach((y,g)=>{const m=r[g],S=n[g],x=l!=null?l[g]:1,b=c.get(m),v=c.get(S);if(x<=0||b==null||v==null)return;const k=t({series:this,itemId:void 0,datum:y,datumIndex:{type:0,index:g},type:0,index:g,fromNode:b,toNode:v,size:x});p.push(k)});const{links:d,nodeGraph:u,maxPathLength:f}=pp(c.values(),p,i);return u.forEach(y=>{y.datum.linksBefore=y.linksBefore.map(g=>g.link),y.datum.linksAfter=y.linksAfter.map(g=>g.link)}),this.nodeCount=u.size,this.linkCount=d.length,{nodeGraph:u,links:d,maxPathLength:f}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(e){const{seriesRect:t}=e,i={seriesRectWidth:t?.width??0,seriesRectHeight:t?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),this.updateSelections();const s=this.contextNodeData?.nodeData??[],o=this.contextNodeData?.labelData??[];let a=this.ctx.highlightManager?.getActiveHighlight();if(a?.series===this&&a.type==null){const{itemId:p}=a;a=p!=null?s.find(d=>d.type===1&&d.id===p):void 0}else a?.series!==this&&(a=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=a!=null?this.properties.highlight.unhighlightedItem.opacity??1:1,this.labelSelection=this.updateLabelSelection({labelData:o,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:s.filter(p=>p.type===0),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:s.filter(p=>p.type===1),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let r,n,l,c;a?.type===1?(r=s.filter(p=>p.type===0&&(p.toNode===a||p.fromNode===a)),n=r.map(p=>p.fromNode===a?p.toNode:p.fromNode),n.push(a),l=[],c=[a]):a?.type===0?(r=[a],n=[a.fromNode,a.toNode],l=[a],c=[]):(r=[],n=[],l=[],c=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:r,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:n,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(e){}dataCount(){return NaN}getSeriesDomain(e){return[]}getSeriesRange(e,t){return[NaN,NaN]}legendItemSymbol(e,t,i={}){const{fills:s,strokes:o}=this.properties,{fill:a=s[t%s.length],fillOpacity:r=1,stroke:n=o[t%o.length],strokeWidth:l=0,strokeOpacity:c=1,lineDash:p=[0],lineDashOffset:d=0}=i;return{marker:{fill:a,fillOpacity:r,stroke:n,strokeWidth:l,strokeOpacity:c,lineDash:p,lineDashOffset:d}}}getLegendData(e){if(e!=="category")return[];const{showInLegend:t}=this.properties;return Array.from(this.processedNodes.values(),({id:i,label:s},o)=>({legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:!0,label:{text:s??i},symbol:this.legendItemSymbol(1,o),hideInLegend:!t,isFixed:!0}))}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.linkSelection.each((o,a)=>{const r=o.containsPoint(e,t)?0:1/0;r<i&&(i=r,s=a)}),this.nodeSelection.each((o,a)=>{const r=o.distanceSquared(e,t);r<i&&(i=r,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}getDatumAriaText(e,t){if(e.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:e.index+1,count:this.linkCount,from:e.fromNode.id,to:e.toNode.id,size:e.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(e.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:e.index+1,count:this.nodeCount,description:t})}pickFocus(e){const{datumIndexDelta:t,otherIndexDelta:i}=e,s=this.contextNodeData?.nodeData[e.datumIndex-e.datumIndexDelta];let o=s;if(i!==0||t===0)return;if(s?.type===0){const n=Array.from(this.linkSelection,p=>p.datum),c=n.indexOf(s)+t;if(c>=0&&c<n.length)o=n[c];else if(c>0)o=n[n.length-1];else{const p=Array.from(this.nodeSelection,d=>d.datum);o=p[p.length-1]}}else if(s?.type===1){const n=Array.from(this.nodeSelection,p=>p.datum),c=n.indexOf(s)+t;c>=0&&c<n.length?o=n[c]:c<0?o=n[0]:o=Array.from(this.linkSelection,d=>d.datum)[0]}if(o==null)return;const a=o.type===1?Array.from(this.nodeSelection).find(n=>n.datum===o):Array.from(this.linkSelection).find(n=>n.datum===o);if(a==null)return;const r=this.computeFocusBounds(a.node);if(r!=null)return{datum:a.datum,datumIndex:this.contextNodeData?.nodeData.indexOf(a.datum)??0,otherIndex:0,bounds:r,clipFocusBox:!0}}getCategoryValue(e){}datumIndexForCategoryValue(e){}};import{_ModuleSupport as Hb}from"ag-charts-community";var{Path:Xb,SceneChangeDetection:Jt}=Hb;function up({radius:e,startAngle:t,endAngle:i,tension:s}){const o=e*Math.cos(t),a=e*Math.sin(t),r=e*Math.cos(i),n=e*Math.sin(i),l=o*s,c=a*s,p=r*s,d=n*s;return{x:[o,l,p,r],y:[a,c,d,n]}}var $t=class extends Xb{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}tensionedCurveTo(e,t,i,s,o,a,r,n){const{path:l,tension:c}=this,p=1-c;l.cubicCurveTo((i-e)*p+e,(s-t)*p+t,(o-r)*p+r,(a-n)*p+n,r,n)}updatePath(){const{path:e,centerX:t,centerY:i,radius:s}=this;let{startAngle1:o,endAngle1:a,startAngle2:r,endAngle2:n}=this;o>r&&([o,r]=[r,o],[a,n]=[n,a]),e.clear();const l=t+s*Math.cos(o),c=i+s*Math.sin(o);e.moveTo(l,c),this.tensionedCurveTo(l,c,t,i,t,i,t+s*Math.cos(n),i+s*Math.sin(n)),e.arc(t,i,s,n,r,!0),this.tensionedCurveTo(t+s*Math.cos(r),i+s*Math.sin(r),t,i,t,i,t+s*Math.cos(a),i+s*Math.sin(a)),e.arc(t,i,s,a,o,!0),e.closePath()}};h([Jt()],$t.prototype,"centerX",2),h([Jt()],$t.prototype,"centerY",2),h([Jt()],$t.prototype,"radius",2),h([Jt()],$t.prototype,"startAngle1",2),h([Jt()],$t.prototype,"endAngle1",2),h([Jt()],$t.prototype,"startAngle2",2),h([Jt()],$t.prototype,"endAngle2",2),h([Jt()],$t.prototype,"tension",2);import{_ModuleSupport as Yb}from"ag-charts-community";var{FillGradientDefaults:qb,FillPatternDefaults:Ub,FillImageDefaults:jb,BaseProperties:fp,makeSeriesTooltip:Jb,SeriesProperties:Zb,Property:se,Label:Qb}=Yb,_r=class extends Qb{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};h([se],_r.prototype,"spacing",2),h([se],_r.prototype,"maxWidth",2);var Bt=class extends fp{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}};h([se],Bt.prototype,"fill",2),h([se],Bt.prototype,"fillOpacity",2),h([se],Bt.prototype,"stroke",2),h([se],Bt.prototype,"strokeOpacity",2),h([se],Bt.prototype,"strokeWidth",2),h([se],Bt.prototype,"lineDash",2),h([se],Bt.prototype,"lineDashOffset",2),h([se],Bt.prototype,"tension",2),h([se],Bt.prototype,"itemStyler",2);var Lt=class extends fp{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};h([se],Lt.prototype,"spacing",2),h([se],Lt.prototype,"width",2),h([se],Lt.prototype,"fill",2),h([se],Lt.prototype,"fillOpacity",2),h([se],Lt.prototype,"stroke",2),h([se],Lt.prototype,"strokeOpacity",2),h([se],Lt.prototype,"strokeWidth",2),h([se],Lt.prototype,"lineDash",2),h([se],Lt.prototype,"lineDashOffset",2),h([se],Lt.prototype,"itemStyler",2);var Ge=class extends Zb{constructor(){super(),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fillGradientDefaults=new qb,this.fillPatternDefaults=new Ub,this.fillImageDefaults=new jb,this.fills=[],this.strokes=[],this.label=new _r,this.link=new Bt,this.node=new Lt,this.tooltip=Jb(),this.highlightStyle.deprecated=!1}};h([se],Ge.prototype,"fromKey",2),h([se],Ge.prototype,"toKey",2),h([se],Ge.prototype,"idKey",2),h([se],Ge.prototype,"idName",2),h([se],Ge.prototype,"labelKey",2),h([se],Ge.prototype,"labelName",2),h([se],Ge.prototype,"sizeKey",2),h([se],Ge.prototype,"sizeName",2),h([se],Ge.prototype,"nodes",2),h([se],Ge.prototype,"fillGradientDefaults",2),h([se],Ge.prototype,"fillPatternDefaults",2),h([se],Ge.prototype,"fillImageDefaults",2),h([se],Ge.prototype,"fills",2),h([se],Ge.prototype,"strokes",2),h([se],Ge.prototype,"label",2),h([se],Ge.prototype,"link",2),h([se],Ge.prototype,"node",2),h([se],Ge.prototype,"tooltip",2);var{SeriesNodePickMode:gp,CachedTextMeasurerPool:eD,TextWrapper:tD,TextUtils:iD,createDatumId:Do,angleBetween:vo,normalizeAngle360:sD,isBetweenAngles:yp,Sector:oD,evaluateBezier:ko,applyShapeStyle:mp,getShapeStyle:Mo,BBox:aD}=Fb,Io=e=>e.startAngle+vo(e.startAngle,e.endAngle)/2,Ao=class extends dp{constructor(e){super({moduleCtx:e,pickModes:[gp.NEAREST_NODE,gp.EXACT_SHAPE_MATCH]}),this.properties=new Ge}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new $t}nodeFactory(){return new oD}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:o,sizeKey:a,labelKey:r,label:{spacing:n,maxWidth:l,fontSize:c},node:{width:p,spacing:d}}=this.properties,u=t/2,f=i/2;let y=[];const{nodeGraph:g,links:m}=this.getNodeGraph(N=>({...N,centerX:u,centerY:f,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN}),N=>({...N,centerX:u,centerY:f,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let S=0;g.forEach(({datum:N,linksBefore:C,linksAfter:T},O)=>{const _=C.reduce((F,{link:E})=>F+E.size,0)+T.reduce((F,{link:E})=>F+E.size,0);if(_===0)g.delete(O);else{N.size=_,S+=N.size;const F=this.getLabelText(N.label,N.datum,r,"label",[],this.properties.label,{datum:N.datum,value:N.label,fromKey:s,toKey:o,sizeKey:a,size:N.size});N.label=String(F)}});let x=0;if(this.isLabelEnabled()){const N=eD.getMeasurer({font:this.properties.label});let C=0;g.forEach(({datum:T})=>{const{id:O,label:_}=T;if(_==null)return;const F=tD.wrapText(_,{maxWidth:l,font:this.properties.label,textWrap:"never"}),{width:E}=N.measureText(F);C=Math.max(E,C),y.push({id:O,text:F,centerX:u,centerY:f,angle:NaN,radius:NaN})}),x=C+n}const b=g.size;let v=Math.min(t,i)/2-p-x,k=d/v;if(x!==0&&(b*k>=1.5*Math.PI||v<=0)&&(y=[],v=Math.min(t,i)/2-p,k=d/v),b*k>=2*Math.PI||v<=0){Eb.warnOnce("There was insufficient space to display the Chord Series.");return}const L=v,A=v+p,D=Math.max((2*Math.PI-b*k)/S,0);let I=0;g.forEach(({datum:N})=>{N.innerRadius=L,N.outerRadius=A,N.startAngle=I,N.endAngle=I+N.size*D,I=N.endAngle+k;const C=(N.innerRadius+N.outerRadius)/2,T=Io(N);N.midPoint={x:N.centerX+C*Math.cos(T),y:N.centerY+C*Math.sin(T)}});const M=[];g.forEach(({datum:N,linksBefore:C,linksAfter:T})=>{const O=Io(N),_=[...C.map(E=>({link:E.link,distance:vo(Io(E.node.datum),O),after:!1})),...T.map(E=>({link:E.link,distance:vo(Io(E.node.datum),O),after:!0}))];let F=N.startAngle;_.toSorted((E,B)=>E.distance-B.distance).forEach(({link:E,after:B})=>{const G=E.size*D;B?(E.startAngle1=F,E.endAngle1=F+G):(E.startAngle2=F,E.endAngle2=F+G),F+=E.size*D}),M.push(N)});const{tension:P}=this.properties.link;m.forEach(N=>{N.radius=v;const C=up({radius:v,startAngle:N.startAngle1,endAngle:N.endAngle2,tension:P}),T=up({radius:v,startAngle:N.startAngle2,endAngle:N.endAngle1,tension:P}),O=ko(...C.x,.5),_=ko(...C.y,.5),F=ko(...T.x,.5),E=ko(...T.y,.5);N.midPoint={x:N.centerX+(O+F)/2,y:N.centerY+(_+E)/2},M.push(N)}),y.forEach(N=>{const C=g.get(N.id)?.datum;C!=null&&(N.radius=A+n,N.angle=sD(C.startAngle+vo(C.startAngle,C.endAngle)/2))}),y.sort((N,C)=>N.angle-C.angle);let R=1/0,w=-1/0;return y=y.filter(N=>{const C=iD.getLineHeight(c),T=Math.atan2(C/2,N.radius),O=N.angle-T,_=N.angle+T;return yp(R,O,_)||yp(w,O,_)?!1:(R=Math.min(O,R),w=Math.max(_,w),!0)}),{itemId:e,nodeData:M,labelData:y}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:r}=this.properties.label;t.each((n,{text:l,centerX:c,centerY:p,radius:d,angle:u})=>{n.visible=!0,n.translationX=c+d*Math.cos(u),n.translationY=p+d*Math.sin(u),n.text=l,n.fill=i,n.fontStyle=s,n.fontWeight=o,n.fontSize=a,n.fontFamily=r,n.textBaseline="middle",Math.cos(u)>=0?(n.textAlign="left",n.rotation=u):(n.textAlign="right",n.rotation=u-Math.PI)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Do([t.type,t.id]))}getBaseNodeStyle(e,t){const{properties:i}=this,{fill:s,fillOpacity:o,stroke:a,strokeOpacity:r,lineDash:n,lineDashOffset:l}=i.node,c=this.getHighlightStyle(e,t?.datumIndex);return Mo({fill:c?.fill??s,fillOpacity:c?.fillOpacity??o,stroke:c?.stroke??a,strokeOpacity:c?.strokeOpacity??r,strokeWidth:c?.strokeWidth??this.getStrokeWidth(i.node.strokeWidth),lineDash:c?.lineDash??n,lineDashOffset:c?.lineDashOffset??l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getNodeStyleOverrides(e,t,i,s,o,a,r){const{id:n,properties:l}=this,{fills:c,strokes:p}=l,{itemStyler:d}=l.node,u=a.fill??c[i%c.length],f=a.stroke??p[i%p.length];let y;if(r||(y??(y={}),y.fill=u,y.stroke=f),d!=null){const g=this.cachedDatumCallback(Do(e,"node",r?"highlight":"node"),()=>{const{fillOpacity:m=1,strokeOpacity:S=1,strokeWidth:x=0,lineDash:b=[],lineDashOffset:v=0}=a;return this.callWithContext(d,{seriesId:n,datum:t,highlighted:r,label:o,size:s,fill:u,fillOpacity:m,stroke:f,strokeOpacity:S,strokeWidth:x,lineDash:b,lineDashOffset:v})});y??(y={}),Object.assign(y,g)}return Mo(y,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getShapeFillBBox();t.each((o,a)=>{const{datumIndex:r,size:n,label:l}=a,c=this.getBaseNodeStyle(i,a),p=this.getNodeStyleOverrides(String(r.index),a.datum,r.index,n,l,c,i);mp(o,c,p,s),o.centerX=a.centerX,o.centerY=a.centerY,o.innerRadius=a.innerRadius,o.outerRadius=a.outerRadius,o.startAngle=a.startAngle,o.endAngle=a.endAngle,o.inset=o.strokeWidth/2})}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Do([t.type,t.index,t.fromNode.id,t.toNode.id]))}getBaseLinkStyle(e,t){const{properties:i}=this,{fill:s,fillOpacity:o,stroke:a,strokeOpacity:r,lineDash:n,lineDashOffset:l,tension:c}=i.link,p=this.getHighlightStyle(e,t?.datumIndex);return Mo({fill:p?.fill??s,fillOpacity:p?.fillOpacity??o,stroke:p?.stroke??a,strokeOpacity:p?.strokeOpacity??r,strokeWidth:p?.strokeWidth??this.getStrokeWidth(i.link.strokeWidth),lineDash:p?.lineDash??n,lineDashOffset:p?.lineDashOffset??l,tension:c},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getLinkStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{fills:n,strokes:l}=r,{itemStyler:c}=r.link,p=s.fill??n[i%n.length],d=s.stroke??l[i%l.length];let u;if(o||(u??(u={}),u.fill=p,u.stroke=d),c!=null){const f=this.cachedDatumCallback(Do(e,"link",o?"highlight":"node"),()=>{const{fillOpacity:y=1,strokeOpacity:g=1,strokeWidth:m=0,lineDash:S=[],lineDashOffset:x=0,tension:b}=s;return this.callWithContext(c,{seriesId:a,datum:t,highlighted:o,tension:b,fill:p,fillOpacity:y,stroke:d,strokeOpacity:g,strokeWidth:m,lineDash:S,lineDashOffset:x})});u??(u={}),Object.assign(u,f)}return Mo(u,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getShapeFillBBox();t.each((o,a)=>{const{datumIndex:r}=a,n=a.fromNode.datumIndex,l=this.getBaseLinkStyle(i,a),c=this.getLinkStyleOverrides(String(r.index),a.datum,n.index,l,i);o.centerX=a.centerX,o.centerY=a.centerY,o.radius=a.radius,o.startAngle1=a.startAngle1,o.endAngle1=a.endAngle1,o.startAngle2=a.startAngle2,o.endAngle2=a.endAngle2,mp(o,l,c,s),o.tension=c?.tension??l.tension})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=Math.min(e,t),s=(e-i)/2,o=(t-i)/2,a=new aD(s,o,e,t);return{series:a,axis:a}}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:s,properties:o,ctx:{formatManager:a}}=this,{fromKey:r,toKey:n,sizeKey:l,sizeName:c,tooltip:p}=o,d=this.contextNodeData?.nodeData.find(x=>x.datumIndex.type===e.type&&x.datumIndex.index===e.index);if(d==null)return;const u=d.type===0?d.fromNode.index:d.index,f=d.type===0?`${d.fromNode.label} - ${d.toNode.label}`:d.label,y=e.type===0?i?.dataSources.get(this.id)?.[e.index]:s?.dataSources.get(this.id)?.[e.index],g=d.size;let m;if(d.type===0){const x=d.fromNode.datumIndex,b=this.getBaseLinkStyle(!1);Object.assign(b,this.getLinkStyleOverrides(String(e.index),y,x.index,b,!1)),m=b}else{const x=d.label,b=this.getBaseNodeStyle(!1);Object.assign(b,this.getNodeStyleOverrides(String(e.index),y,e.index,g,x,b,!1)),m=b}const S=[];if(l!=null){const x=a.format(this.callWithContext.bind(this),{type:"number",value:g,datum:y,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});S.push({label:c,fallbackLabel:l,value:x??String(g)})}return this.formatTooltipWithContext(p,{title:f,symbol:this.legendItemSymbol(d.type,u,m),data:S},{seriesId:t,datum:y,title:f,fromKey:r,toKey:n,sizeKey:l,sizeName:c,size:g,...m})}computeFocusBounds(e){return e}};Ao.className="ChordSeries",Ao.type="chord";import{_ModuleSupport as rD}from"ag-charts-community";import{constant as nD,fillGradientDefaults as lD,fillImageDefaults as cD,fillPatternDefaults as pD,required as Fr,string as No,undocumented as Er}from"ag-charts-core";var{commonSeriesOptionsDefs:hD,chordSeriesThemeableOptionsDef:dD}=rD,Po={...dD,...hD,type:Fr(nD("chord")),fromKey:Fr(No),toKey:Fr(No),sizeKey:No,sizeName:No};Po.fillGradientDefaults=Er(lD),Po.fillPatternDefaults=Er(pD),Po.fillImageDefaults=Er(cD);var OR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"chord",moduleFactory:e=>new Ao(e),themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Tr.FILL_PATTERN_DEFAULTS,fillImageDefaults:Tr.FILL_IMAGE_DEFAULTS,highlightStyle:{series:{dimOpacity:.2}},highlight:Tr.singleSeriesHighlightStyle(),label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]},tension:.4}},legend:{enabled:!1,toggleSeries:!1}}},Sp={type:"series",name:"chord",chartType:"flow-proportion",enterprise:!0,options:Po,create:e=>new Ao(e)};import"ag-charts-community";import{_ModuleSupport as Lo}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:zi,CARTESIAN_POSITION:$i},ThemeSymbols:{DEFAULT_SHADOW_COLOUR:uD}}=Lo,Hi={$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},xp={autoRotate:{$path:"/series/0/stageLabel/autoRotate"},autoRotateAngle:{$path:"/series/0/stageLabel/autoRotateAngle"},avoidCollisions:{$path:["/series/0/stageLabel/avoidCollisions",!0]},color:{$path:["/series/0/stageLabel/color",{$ref:"textColor"}]},enabled:{$if:[{$eq:[{$path:"/series/0/stageLabel/enabled"},void 0]},!0,{$path:"/series/0/stageLabel/enabled"}]},fontSize:{$path:["/series/0/stageLabel/fontSize",{$ref:"fontSize"}]},fontStyle:{$path:["/series/0/stageLabel/fontStyle",{$ref:"fontStyle"}]},fontWeight:{$path:["/series/0/stageLabel/fontWeight",{$ref:"fontWeight"}]},format:{$path:"/series/0/stageLabel/format"},formatter:{$path:"/series/0/stageLabel/formatter"},itemStyler:{$path:"/series/0/stageLabel/itemStyler"},minSpacing:{$path:"/series/0/stageLabel/minSpacing"},rotation:{$path:["/series/0/stageLabel/rotation",0]}},wR=[{type:{$if:[Hi,zi.NUMBER,zi.CATEGORY]},position:{$if:[Hi,$i.LEFT,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"after"]},$i.RIGHT,$i.LEFT]}]},label:{$if:[Hi,void 0,xp]}},{type:{$if:[Hi,zi.CATEGORY,zi.NUMBER]},position:{$if:[Hi,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"before"]},$i.TOP,$i.BOTTOM]},$i.BOTTOM]},label:{$if:[Hi,xp,void 0]}}],_R={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacingRatio:.25,fills:[{$palette:"fill"}],strokes:[{$palette:"stroke"}],fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Lo.FILL_PATTERN_DEFAULTS,fillImageDefaults:Lo.FILL_IMAGE_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:{$isUserOption:["./stroke",2,0]}},shadow:{enabled:!1,color:uD,xOffset:3,yOffset:3,blur:5},highlight:Lo.singleSeriesHighlightStyle()},axes:{[zi.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[zi.CATEGORY]:{line:{enabled:!1}}}};import{_ModuleSupport as fD}from"ag-charts-community";import{_ModuleSupport as Br}from"ag-charts-community";import{_ModuleSupport as gD}from"ag-charts-community";var{lineDistanceSquared:Ro,BBox:yD,Path:mD,SceneChangeDetection:Zt}=gD,bp=1e-6;function Dp([e,t],[i,s]){return Math.abs(e-i)<=bp&&Math.abs(t-s)<=bp}var Gt=class extends mD{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:e,y0:t,x1:i,y1:s,x2:o,y2:a,x3:r,y3:n}=this;return{x:(e+i+o+r)/4,y:(t+s+a+n)/4}}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const{x0:i,y0:s,x1:o,y1:a,x2:r,y2:n,x3:l,y3:c}=this;return Math.min(Ro(e,t,i,s,o,a,1/0),Ro(e,t,o,a,r,n,1/0),Ro(e,t,r,n,l,c,1/0),Ro(e,t,l,c,i,s,1/0))}computeBBox(){const{x0:e,y0:t,x1:i,y1:s,x2:o,y2:a,x3:r,y3:n}=this,l=Math.min(e,i,o,r),c=Math.max(e,i,o,r)-l,p=Math.min(t,s,a,n),d=Math.max(t,s,a,n)-p;return new yD(l,p,c,d)}updatePath(){const{path:e,x0:t,y0:i,x1:s,y1:o,x2:a,y2:r,x3:n,y3:l}=this,c=[[t,i],[s,o],[a,r],[n,l]];e.clear();let p,d;c.forEach(u=>{if(p!=null&&Dp(p,u)||d!=null&&Dp(d,u))return;const[f,y]=u;p==null?e.moveTo(f,y):e.lineTo(f,y),p??(p=u),d=u}),e.closePath()}};h([Zt()],Gt.prototype,"x0",2),h([Zt()],Gt.prototype,"y0",2),h([Zt()],Gt.prototype,"x1",2),h([Zt()],Gt.prototype,"y1",2),h([Zt()],Gt.prototype,"x2",2),h([Zt()],Gt.prototype,"y2",2),h([Zt()],Gt.prototype,"x3",2),h([Zt()],Gt.prototype,"y3",2);import{_ModuleSupport as SD}from"ag-charts-community";var{NODE_UPDATE_STATE_TO_PHASE_MAPPING:xD}=SD;function vp(e,t,i,s){const{x0:o,y0:a,x1:r,y1:n,x2:l,y2:c,x3:p,y3:d,opacity:u}=e;return i?{x0:(o+p)/2,y0:(a+d)/2,x1:(r+l)/2,y1:(n+c)/2,x2:(r+l)/2,y2:(n+c)/2,x3:(o+p)/2,y3:(a+d)/2,opacity:u}:{x0:(o+r)/2,y0:(a+n)/2,x1:(o+r)/2,y1:(a+n)/2,x2:(l+p)/2,y2:(c+d)/2,x3:(l+p)/2,y3:(c+d)/2,opacity:u}}function bD(e,t){const i=a=>a==null;return{fromFn:(a,r,n)=>{n==="updated"&&i(r)?n="removed":n==="updated"&&i(a.previousDatum)&&(n="added");let l;n==="added"&&a.previousDatum==null&&t==="fade"?l={...Ss(a,r),opacity:0}:n==="unknown"||n==="added"?l=vp(r,a.previousDatum,e,t):l={x0:a.x0,y0:a.y0,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,x3:a.x3,y3:a.y3,opacity:a.opacity};const c=xD[n];return{...l,phase:c}},toFn:(a,r,n)=>{let l;return n==="removed"&&a.datum==null&&t==="fade"?l={...Ss(a,r),opacity:0}:n==="removed"||i(r)?l=vp(r,a.previousDatum,e,t):l=Ss(a,r),l}}}function Ss(e,t){const{x0:i,y0:s,x1:o,y1:a,x2:r,y2:n,x3:l,y3:c,opacity:p}=t;return{x0:i,y0:s,x1:o,y1:a,x2:r,y2:n,x3:l,y3:c,opacity:p}}var{SeriesNodePickMode:kp,SeriesZIndexMap:Mp,valueProperty:DD,keyProperty:vD,ChartAxisDirection:kD,updateLabelNode:MD,SMALLEST_KEY_INTERVAL:ID,LARGEST_KEY_INTERVAL:AD,diff:ND,fixNumericExtent:PD,seriesLabelFadeInAnimation:Ip,resetMotion:LD,resetLabelFn:RD,animationValidation:OD,computeBarFocusBounds:CD,ContinuousScale:TD,Group:wD,Selection:_D,PointerEvents:Ap,motion:FD,checkCrisp:ED,createDatumId:BD,applyShapeStyle:GD,getShapeStyle:WD,getShapeFill:VD}=Br,KD=class extends Br.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.stageKey,this.yKey=s.properties.valueKey}},Np=class extends Br.AbstractBarSeries{constructor({moduleCtx:e,animationResetFns:t}){super({moduleCtx:e,pickModes:[kp.AXIS_ALIGNED,kp.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,propertyKeys:{x:["stageKey"],y:["valueKey"]},propertyNames:{x:[],y:[]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:t.datum,label:RD}}),this.NodeEvent=KD,this.connectorNodeGroup=this.contentGroup.appendChild(new wD({name:`${this.id}-series-connectorNodes`,zIndex:Mp.BACKGROUND})),this.connectorSelection=_D.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=Ap.None}get pickModeAxis(){return"main-category"}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.connectorNodeGroup.zIndex=[Mp.BACKGROUND,e],!0):!1}isVertical(){return!super.isVertical()}connectionFactory(){return new Gt}async processData(e){const{stageKey:t,valueKey:i}=this.properties,{visible:s,id:o}=this,a=(y,g,m)=>s&&this.ctx.legendManager.getItemEnabled({seriesId:o,itemId:m}),r=this.getCategoryAxis()?.scale,n=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:p}=this.getScaleInformation({xScale:r,yScale:n}),d=[];this.ctx.animationManager.isSkipped()||(this.processedData&&d.push(ND(this.id,this.processedData)),d.push(OD()));const u=this.visible?{}:{forceValue:0},{processedData:f}=await this.requestDataModel(e,this.data,{props:[vD(t,c,{id:"xValue"}),DD(i,p,{id:"yValue",...u,validation:a,invalidValue:0}),...l?[ID,AD]:[],...d],groupByKeys:!1});this.smallestDataInterval=f.reduced?.smallestKeyInterval,this.largestDataInterval=f.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i,id:s,ctx:{legendManager:o}}=this;if(!t||!i)return[];const{keys:[a]}=t.domain;if(e===this.getCategoryDirection()){const r=i.resolveProcessedDataDefById(this,"xValue");return r?.def.type==="key"&&r?.def.valueType==="category"?this.hasData?a.filter((n,l)=>o.getItemEnabled({seriesId:s,itemId:l})):[]:this.padBandExtent(a)}else{const r=this.domainForClippedRange(e,["yValue"],"xValue"),n=Math.max(...r),l=[-n,n];return PD(l)}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{hasData:e,data:t,dataModel:i,groupScale:s,processedData:o,id:a,ctx:{legendManager:r}}=this,n=this.getCategoryAxis(),l=this.getValueAxis();if(!(e&&t&&n&&l&&i&&o?.type==="ungrouped"))return;const c=n.scale,p=l.scale,d=this.getBarDirection()===kD.X,{stageKey:u,valueKey:f}=this.properties,{strokeWidth:y}=this.barStyle(),g=`${f}`,m={itemId:g,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible},S=this.visible;if(!S)return m;const x=i.resolveKeysById(this,"xValue",o),b=i.resolveColumnById(this,"yValue",o),{barWidth:v,groupIndex:k}=this.updateGroupScale(n),L=TD.is(c)?v*-.5:0,A=ED(n?.scale,n?.visibleRange,this.smallestDataInterval,this.largestDataInterval);let D;return(o.dataSources.get(this.id)??[]).forEach((M,P)=>{const R=S&&r.getItemEnabled({seriesId:a,itemId:P}),w=x[P];if(w==null)return;const N=Math.round(c.convert(w))+s.convert(String(k))+L,C=b[P],T=Math.round(p.convert(-C)),O=Math.round(p.convert(C)),_=Math.max(y,Math.abs(O-T)),F={x:d?Math.min(O,T):N,y:d?N:Math.min(O,T),width:d?_:v,height:d?v:_},E={x:F.x+F.width/2,y:F.y+F.height/2},B=this.createLabelData({datumIndex:P,rect:F,barAlongX:d,yDatum:C,datum:M,visible:R}),G={index:P,series:this,itemId:g,datum:M,datumIndex:P,xValue:w,yValue:C,xKey:u,yKey:f,x:F.x,y:F.y,width:F.width,height:F.height,midPoint:E,strokeWidth:y,crisp:A,label:B,visible:R};if(m.nodeData.push(G),B!=null&&m.labelData.push(B),D!=null){const W=D.rect,V=D.nodeDatum,K=D.datumIndex;d?m.connectorData.push({datum:V,datumIndex:K,x0:W.x,y0:W.y+W.height,x1:W.x+W.width,y1:W.y+W.height,x2:F.x+F.width,y2:F.y,x3:F.x,y3:F.y,opacity:1}):m.connectorData.push({datum:V,datumIndex:K,x0:W.x+W.width,y0:W.y,x1:F.x,y1:F.y,x2:F.x,y2:F.y+F.height,x3:W.x+W.width,y3:W.y+W.height,opacity:1})}R&&(D={itemId:g,rect:F,nodeDatum:G,datumIndex:P})}),m}updateNodes(e,t,i,s){super.updateNodes(e,t,i,s);const{connectorSelection:o}=this,a=this.contextNodeData?.connectorData??[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:o,connectorData:a}),this.updateConnectorNodes({connectorSelection:o})}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s,void 0,o=>this.getDatumId(o))}updateConnectorSelection(e){const{connectorData:t,connectorSelection:i}=e;return i.update(this.connectorEnabled()?t:[],void 0,s=>this.getDatumId(s.datum))}updateConnectorNodes(e){const{fills:t,strokes:i,fillGradientDefaults:s,fillPatternDefaults:o,fillImageDefaults:a}=this.properties,{fill:r,fillOpacity:n,stroke:l,strokeOpacity:c,strokeWidth:p,lineDash:d,lineDashOffset:u}=this.connectorStyle(),f=this.getShapeFillBBox();e.connectorSelection.each((y,g)=>{const{datumIndex:m}=g;y.setProperties(Ss(y,g));const S=VD(r??t[m%t.length],s,o,a);GD(y,{fill:S,stroke:l??i[m%i.length],fillOpacity:n,strokeOpacity:c,strokeWidth:p,lineDash:d,lineDashOffset:u},void 0,f)})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=Ap.None})}updateLabelNodes(e){e.labelSelection.each((t,i)=>{t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1,MD(t,this.properties.label,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{stageKey:a,valueKey:r,tooltip:n,legendItemName:l}=o,c=this.getCategoryAxis(),p=this.getValueAxis();if(!i||!s||!c||!p)return;const d=s.dataSources.get(this.id)?.[e],u=i.resolveKeysById(this,"xValue",s)[e],f=i.resolveColumnById(this,"yValue",s)[e];if(u!=null)return this.formatTooltipWithContext(n,{symbol:this.legendItemSymbol(e),data:[{label:c.formatDatum(u,"tooltip",t,l,d,a),value:p.formatDatum(f,"tooltip",t,l,d,r)}]},{seriesId:t,datum:d,title:a,stageKey:a,valueKey:r,...this.tooltipStyle(d,e)})}resetAllAnimation(e){super.resetAllAnimation(e),LD([this.connectorSelection],Ss)}animateEmptyUpdateReady({labelSelection:e}){const{connectorSelection:t}=this,i=this.isVertical(),o=bD(i,"normal");FD.fromToMotion(this.id,"connectors",this.ctx.animationManager,[t],o),Ip(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(e){const{labelSelection:t}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id),Ip(this,"labels",this.ctx.animationManager,t)}getDatumId(e){return BD(e.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){return CD(this,this.contextNodeData?.nodeData[e])}legendItemSymbol(e){const{strokeWidth:t,fillOpacity:i,strokeOpacity:s,lineDash:o,lineDashOffset:a,fillGradientDefaults:r,fillPatternDefaults:n,fillImageDefaults:l}=this.barStyle(),{fills:c,strokes:p}=this.properties,d=c[e%c.length]??"black",u=p[e%p.length]??"black";return{marker:WD({fill:d,fillOpacity:i,stroke:u,strokeWidth:t,strokeOpacity:s,lineDash:o,lineDashOffset:a},r,n,l)}}getLegendData(e){const{id:t,processedData:i,dataModel:s,ctx:{legendManager:o},visible:a}=this;if(!s||!i||e!=="category")return[];const{showInLegend:r}=this.properties,n=s.resolveKeysById(this,"xValue",i);return(i.dataSources.get(this.id)??[]).map((l,c)=>{const p=n[c];if(p!=null)return{legendType:"category",id:t,datum:l,itemId:c,seriesId:t,enabled:a&&o.getItemEnabled({seriesId:t,itemId:c}),label:{text:String(p)},symbol:this.legendItemSymbol(c),skipAnimations:!0,hideInLegend:!r}}).filter(l=>l!=null)}};import{_ModuleSupport as zD}from"ag-charts-community";var{FillGradientDefaults:$D,FillPatternDefaults:HD,FillImageDefaults:XD,Label:YD,AbstractBarSeriesProperties:qD,makeSeriesTooltip:UD,AxisLabel:jD,Property:Ke}=zD,Gr=class extends YD{constructor(){super(...arguments),this.spacing=0}};h([Ke],Gr.prototype,"placement",2),h([Ke],Gr.prototype,"spacing",2);var Pp=class extends jD{};h([Ke],Pp.prototype,"placement",2);var qe=class extends qD{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new $D,this.fillPatternDefaults=new HD,this.fillImageDefaults=new XD,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new Gr,this.stageLabel=new Pp,this.tooltip=UD()}};h([Ke],qe.prototype,"stageKey",2),h([Ke],qe.prototype,"valueKey",2),h([Ke],qe.prototype,"fills",2),h([Ke],qe.prototype,"fillGradientDefaults",2),h([Ke],qe.prototype,"fillPatternDefaults",2),h([Ke],qe.prototype,"fillImageDefaults",2),h([Ke],qe.prototype,"fillOpacity",2),h([Ke],qe.prototype,"strokes",2),h([Ke],qe.prototype,"strokeWidth",2),h([Ke],qe.prototype,"strokeOpacity",2),h([Ke],qe.prototype,"lineDash",2),h([Ke],qe.prototype,"lineDashOffset",2),h([Ke],qe.prototype,"label",2),h([Ke],qe.prototype,"stageLabel",2),h([Ke],qe.prototype,"tooltip",2);function Lp(e,{x:t,y:i,width:s,height:o,opacity:a}){return{x1:t,y1:i,x2:t+s,y2:i+o,opacity:a??1}}var{Line:JD,ChartAxisDirection:ZD}=fD,Wr=class extends Np{constructor(e){super({moduleCtx:e,animationResetFns:{datum:Lp}}),this.properties=new qe}get hasData(){const{id:e,ctx:{legendManager:t}}=this,i=this.data?.reduce((s,o,a)=>s+(t.getItemEnabled({seriesId:e,itemId:a})?1:0),0);return i!=null&&i>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}barStyle(){return{fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[],lineDashOffset:0,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults,fillImageDefaults:this.properties.fillImageDefaults}}connectorStyle(){const{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}=this.properties;return{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}}nodeFactory(){return new JD}createLabelData({datumIndex:e,rect:t,barAlongX:i,yDatum:s,datum:o,visible:a}){const{stageKey:r,valueKey:n,label:l}=this.properties,{spacing:c,placement:p}=l;let d,u,f,y;if(i)switch(d=t.x+t.width/2,f="center",p){case"before":u=t.y-c,y="bottom";break;case"after":u=t.y+t.height+c,y="top";break;default:u=t.y+t.height/2,y="middle"}else switch(u=t.y+t.height/2,y="middle",p){case"before":d=t.x-c,f="right";break;case"after":d=t.x+t.width+c,f="left";break;default:d=t.x+t.width/2,f="center"}const g=this.getSeriesDomain(ZD.Y),m=this.getLabelText(s,o,n,"y",g,l,{itemId:n,value:s,datum:o,stageKey:r,valueKey:n});return{x:d,y:u,textAlign:f,textBaseline:y,text:m,itemId:n,datum:o,datumIndex:e,series:this,visible:a}}updateDatumNodes(e){const t=this.getHighlightStyle(e.isHighlight);e.datumSelection.each((i,s)=>{i.setProperties(Lp(i,s)),i.stroke=t?.stroke,i.strokeWidth=t?.strokeWidth??0,i.strokeOpacity=t?.strokeOpacity??1,i.lineDash=t?.lineDash,i.lineDashOffset=t?.lineDashOffset??0,i.opacity=t?.opacity??1})}tooltipStyle(e,t){const{fills:i,strokes:s}=this.properties,o=i[t%i.length]??"black",a=s[t%s.length]??"black",{fillOpacity:r,strokeOpacity:n,strokeWidth:l,lineDash:c,lineDashOffset:p}=this.barStyle();return{fill:o,fillOpacity:r,stroke:a,strokeOpacity:n,strokeWidth:l,lineDash:c,lineDashOffset:p}}};Wr.className="ConeFunnelSeries",Wr.type="cone-funnel";import{_ModuleSupport as QD}from"ag-charts-community";import{constant as ev,required as Vr,string as Rp}from"ag-charts-core";var{commonSeriesOptionsDefs:tv,coneFunnelSeriesThemeableOptionsDef:iv,without:sv}=QD,ov={...sv(tv,["showInLegend"]),...iv,type:Vr(ev("cone-funnel")),stageKey:Vr(Rp),valueKey:Vr(Rp)};import{_ModuleSupport as Xi}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:Op}}=Xi,$R={series:{direction:"vertical",fills:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},Xi.SAFE_RANGE2_OPERATION]},strokes:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},Xi.SAFE_RANGE2_OPERATION]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Xi.FILL_PATTERN_DEFAULTS,fillImageDefaults:Xi.FILL_IMAGE_DEFAULTS,strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},placement:"before",spacing:4},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:Xi.singleSeriesHighlightStyle(!1)},seriesArea:{padding:{top:20,bottom:20}},axes:{[Op.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[Op.CATEGORY]:{line:{enabled:!1}}}},Cp={type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,options:ov,create:e=>new Wr(e)};import"ag-charts-community";import{_ModuleSupport as av}from"ag-charts-community";import{_ModuleSupport as rv}from"ag-charts-community";var{FillGradientDefaults:nv,FillPatternDefaults:lv,FillImageDefaults:cv,Label:pv,DropShadow:hv,AbstractBarSeriesProperties:dv,BaseProperties:uv,makeSeriesTooltip:fv,AxisLabel:gv,Property:he}=rv,yv=class extends pv{},Tp=class extends gv{};h([he],Tp.prototype,"placement",2);var Ht=class extends uv{constructor(){super(...arguments),this.enabled=!0,this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([he],Ht.prototype,"enabled",2),h([he],Ht.prototype,"fill",2),h([he],Ht.prototype,"fillOpacity",2),h([he],Ht.prototype,"stroke",2),h([he],Ht.prototype,"strokeWidth",2),h([he],Ht.prototype,"strokeOpacity",2),h([he],Ht.prototype,"lineDash",2),h([he],Ht.prototype,"lineDashOffset",2);var Fe=class extends dv{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new nv,this.fillPatternDefaults=new lv,this.fillImageDefaults=new cv,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new Ht,this.shadow=new hv().set({enabled:!1}),this.label=new yv,this.stageLabel=new Tp,this.tooltip=fv()}};h([he],Fe.prototype,"stageKey",2),h([he],Fe.prototype,"valueKey",2),h([he],Fe.prototype,"fills",2),h([he],Fe.prototype,"fillGradientDefaults",2),h([he],Fe.prototype,"fillPatternDefaults",2),h([he],Fe.prototype,"fillImageDefaults",2),h([he],Fe.prototype,"fillOpacity",2),h([he],Fe.prototype,"strokes",2),h([he],Fe.prototype,"strokeWidth",2),h([he],Fe.prototype,"strokeOpacity",2),h([he],Fe.prototype,"lineDash",2),h([he],Fe.prototype,"lineDashOffset",2),h([he],Fe.prototype,"spacingRatio",2),h([he],Fe.prototype,"itemStyler",2),h([he],Fe.prototype,"dropOff",2),h([he],Fe.prototype,"shadow",2),h([he],Fe.prototype,"label",2),h([he],Fe.prototype,"stageLabel",2),h([he],Fe.prototype,"tooltip",2);var{ChartAxisDirection:wp,resetBarSelectionsFn:mv,prepareBarAnimationFunctions:_p,midpointStartingBarPosition:Fp,createDatumId:Sv,Rect:xv,motion:Ep,applyShapeStyle:bv,getShapeStyle:Bp}=av,Kr=class extends Np{constructor(e){super({moduleCtx:e,animationResetFns:{datum:mv}}),this.properties=new Fe}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}barStyle(){const{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}=this.properties;return{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:r,fillImageDefaults:n}}connectorStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r}=this.properties.dropOff;return{fill:e,fillOpacity:t,stroke:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults,fillImageDefaults:this.properties.fillImageDefaults}}nodeFactory(){return new xv}createLabelData({datumIndex:e,rect:t,yDatum:i,datum:s,visible:o}){const{valueKey:a,stageKey:r,label:n}=this.properties,l=this.getSeriesDomain(wp.Y),c=this.getLabelText(i,s,a,"y",l,n,{itemId:a,value:i,datum:s,stageKey:r,valueKey:a});return{x:t.x+t.width/2,y:t.y+t.height/2,textAlign:"center",textBaseline:"middle",text:c,itemId:r,datum:s,datumIndex:e,series:this,visible:o}}getItemBaseStyle(e,t){const{properties:i}=this,s=this.getHighlightStyle(e,t?.datumIndex);return Bp({fill:s?.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset,opacity:s?.opacity??1},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults)}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{stageKey:n,valueKey:l,fills:c,strokes:p,itemStyler:d}=r,u=s.fill??c[i%c.length]??"black",f=s.stroke??p[i%p.length]??"black",y={};if(o||(y.fill=u,y.stroke=f),d!=null){const g=this.cachedDatumCallback(Sv(e,o?"highlight":"node"),()=>{const{fillOpacity:m,strokeOpacity:S,strokeWidth:x,lineDash:b,lineDashOffset:v}=s;return this.callWithContext(d,{seriesId:a,datum:t,highlighted:o,stageKey:n,valueKey:l,fill:u,fillOpacity:m,stroke:f,strokeOpacity:S,strokeWidth:x,lineDash:b,lineDashOffset:v})});Object.assign(y,g)}return Bp(y,r.fillGradientDefaults,r.fillPatternDefaults,r.fillImageDefaults)}updateDatumNodes(e){const{shadow:t}=this.properties,{datumSelection:i,isHighlight:s}=e,o=this.getCategoryDirection()===wp.X,a=this.getShapeFillBBox();i.each((r,n)=>{const{datumIndex:l}=n,c=this.getItemBaseStyle(s,n),p=this.getItemStyleOverrides(String(n.datumIndex),n.datum,l,c,s);bv(r,c,p,a),r.visible=o?n.width>0:n.height>0,r.crisp=n.crisp,r.fillShadow=t})}tooltipStyle(e,t){const i=this.getItemBaseStyle(!1);return Object.assign(i,this.getItemStyleOverrides(String(t),e,t,i,!1)),i}animateEmptyUpdateReady(e){super.animateEmptyUpdateReady(e);const{datumSelection:t}=e,i=this.isVertical(),o=_p(Fp(i,"normal"));Ep.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e);const{datumSelection:t}=e,{processedData:i}=this,s=i?.reduced?.diff?.[this.id],o=_p(Fp(this.isVertical(),"fade"));Ep.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o,(a,r)=>r.xValue,s)}};Kr.className="FunnelSeries",Kr.type="funnel";import{_ModuleSupport as Dv}from"ag-charts-community";import{constant as vv,required as zr,string as Gp}from"ag-charts-core";var{commonSeriesOptionsDefs:kv,funnelSeriesThemeableOptionsDef:Mv,without:Iv}=Dv,Av={...Mv,...Iv(kv,["showInLegend"]),type:zr(vv("funnel")),stageKey:zr(Gp),valueKey:zr(Gp)},Wp={type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,options:Av,create:e=>new Kr(e)};import{_ModuleSupport as Oo}from"ag-charts-community";import{_ModuleSupport as Yi}from"ag-charts-community";import{_ModuleSupport as Nv}from"ag-charts-community";function $r(e,t,i){return Nv.callWithContext(e.chartService,t,i)}var Vp=class{*[Symbol.iterator](){const{node:e,datum:t}=this;e&&t&&(yield{node:e,datum:t})}nodes(){return this.node?[this.node]:[]}update(e,t,i,s){const o=e.nodes();if(o.length===0)this.node?.remove(),this.node=void 0;else{this.node===void 0&&(this.node=new i,this.node.fillOpacity=0,this.node.strokeOpacity=0,t.appendChild(this.node));const a=o[0],r=o.toReversed().find(n=>n.datum.datum.value>n.datum.datum.segmentStart)??o[o.length-1];this.node.datum=this.datum=a.datum,s(this.node,a,r)}}};import"ag-charts-community";var Kp={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function zp(e,t){if(e==null)return"";const{min:i,max:s}=t,o=i!==0?Math.ceil(Math.log10(Math.abs(i))):0,a=s!==0?Math.ceil(Math.log10(Math.abs(s))):0,r=Math.max(2-Math.max(o,a),0);return e.toFixed(r)}function xs(e,t,i,s){if(i.text!=null)return i.text;const o=s??i.value;let a;if(i?.formatter!=null&&(a=$r(t,i.formatter,{seriesId:e,datum:void 0,value:o})),a!=null)return String(a)}import"ag-charts-community";function $p({path:e,x:t,y:i,size:s}){e.moveTo(t,i-s/2),e.lineTo(t,i+s/2)}import"ag-charts-community";import{clamp as Hp,iterate as Pv}from"ag-charts-core";function Xp(e,t){const i=Pv(e.datumUnion.nodes(),e.targetSelection.nodes());return e.pickNodeNearestDistantObject(t,i)}function Yp(e,t){const i=[{data:e.contextNodeData?.nodeData,selection:e.datumUnion},{data:e.contextNodeData?.targetData,selection:e.targetSelection}].filter(l=>l.data&&l.data.length>0),s=Hp(0,t.otherIndex+t.otherIndexDelta,i.length-1);if(i.length===0)return;const{data:o,selection:a}=i[s];if(o==null||o.length===0)return;const r=Hp(0,t.datumIndex,o.length-1),n=o[r];for(const l of a)if(l.datum===n)return{bounds:l.node,clipFocusBox:!0,datum:n,datumIndex:r,otherIndex:s}}import{_ModuleSupport as Hr}from"ag-charts-community";import{_ModuleSupport as Lv}from"ag-charts-community";import{Logger as Rv}from"ag-charts-core";var{BaseProperties:qp,Property:qi}=Lv,Co=class extends qp{getSegments(e,t){const{values:i,step:s,count:o}=this,a=Math.min(...e.domain),r=Math.max(...e.domain);let n;if(i!=null){const l=i.filter(c=>c>a&&c<r).sort((c,p)=>c-p);n=[a,...l,r]}else if(s!=null){const l=[];for(let c=a;c<r;c+=s)l.push(c);l.push(r),n=l}else if(o!=null){const l=o+1;n=Array.from({length:l+1},(c,p)=>p/l*(r-a)+a)}else{const l=e.ticks({nice:!0,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.filter(c=>c>a&&c<r);n=l!=null?[a,...l,r]:void 0}return n!=null&&n.length>t&&(Rv.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),n=void 0),n??(n=[a,r]),n}};h([qi],Co.prototype,"values",2),h([qi],Co.prototype,"step",2),h([qi],Co.prototype,"count",2);var bs=class extends qp{constructor(){super(...arguments),this.enabled=!1,this.interval=new Co,this.spacing=0}};h([qi],bs.prototype,"enabled",2),h([qi],bs.prototype,"interval",2),h([qi],bs.prototype,"spacing",2);var{BaseProperties:To,makeSeriesTooltip:Ov,SeriesProperties:Cv,PropertiesArray:Xr,Property:H,Label:Tv,AxisLabel:wv}=Hr,Up=class extends Tv{};h([H],Up.prototype,"spacing",2);var Xe=class extends To{constructor(){super(...arguments),this.value=0,this.label=new Up}};h([H],Xe.prototype,"text",2),h([H],Xe.prototype,"value",2),h([H],Xe.prototype,"shape",2),h([H],Xe.prototype,"placement",2),h([H],Xe.prototype,"spacing",2),h([H],Xe.prototype,"size",2),h([H],Xe.prototype,"rotation",2),h([H],Xe.prototype,"fill",2),h([H],Xe.prototype,"fillOpacity",2),h([H],Xe.prototype,"stroke",2),h([H],Xe.prototype,"strokeWidth",2),h([H],Xe.prototype,"strokeOpacity",2),h([H],Xe.prototype,"lineDash",2),h([H],Xe.prototype,"lineDashOffset",2),h([H],Xe.prototype,"label",2);var ct=class extends To{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new Xr(Hr.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([H],ct.prototype,"enabled",2),h([H],ct.prototype,"thickness",2),h([H],ct.prototype,"thicknessRatio",2),h([H],ct.prototype,"fills",2),h([H],ct.prototype,"fillMode",2),h([H],ct.prototype,"fill",2),h([H],ct.prototype,"fillOpacity",2),h([H],ct.prototype,"stroke",2),h([H],ct.prototype,"strokeWidth",2),h([H],ct.prototype,"strokeOpacity",2),h([H],ct.prototype,"lineDash",2),h([H],ct.prototype,"lineDashOffset",2);var Ds=class extends To{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};h([H],Ds.prototype,"values",2),h([H],Ds.prototype,"step",2),h([H],Ds.prototype,"minSpacing",2),h([H],Ds.prototype,"maxSpacing",2);var jp=class extends wv{constructor(){super(...arguments),this.placement=void 0}};h([H],jp.prototype,"placement",2);var Ue=class extends To{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new Xr(Hr.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new Ds,this.label=new jp}};h([H],Ue.prototype,"min",2),h([H],Ue.prototype,"max",2),h([H],Ue.prototype,"fills",2),h([H],Ue.prototype,"fillMode",2),h([H],Ue.prototype,"fill",2),h([H],Ue.prototype,"fillOpacity",2),h([H],Ue.prototype,"stroke",2),h([H],Ue.prototype,"strokeWidth",2),h([H],Ue.prototype,"strokeOpacity",2),h([H],Ue.prototype,"lineDash",2),h([H],Ue.prototype,"lineDashOffset",2),h([H],Ue.prototype,"defaultFill",2),h([H],Ue.prototype,"interval",2),h([H],Ue.prototype,"label",2);var wo=class extends Et{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};h([H],wo.prototype,"text",2),h([H],wo.prototype,"placement",2),h([H],wo.prototype,"avoidCollisions",2);var je=class extends Cv{constructor(){super(...arguments),this.value=0,this.segmentation=new bs,this.defaultColorRange=[],this.targets=new Xr(Xe),this.defaultTarget=new Xe,this.defaultScale=new Ue,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new Ue,this.bar=new ct,this.label=new wo,this.tooltip=Ov()}};h([H],je.prototype,"value",2),h([H],je.prototype,"segmentation",2),h([H],je.prototype,"defaultColorRange",2),h([H],je.prototype,"targets",2),h([H],je.prototype,"defaultTarget",2),h([H],je.prototype,"defaultScale",2),h([H],je.prototype,"direction",2),h([H],je.prototype,"thickness",2),h([H],je.prototype,"cornerRadius",2),h([H],je.prototype,"cornerMode",2),h([H],je.prototype,"margin",2),h([H],je.prototype,"scale",2),h([H],je.prototype,"bar",2),h([H],je.prototype,"label",2),h([H],je.prototype,"tooltip",2);import{_ModuleSupport as _v}from"ag-charts-community";var{CachedTextMeasurerPool:Fv,BBox:Ev}=_v;function Yr(e){const{x0:t,y0:i,x1:s,y1:o,horizontalInset:a,verticalInset:r}=e,n=Math.min(t,s)+a,l=Math.min(i,o)+r,c=Math.max(Math.abs(s-t)-2*a,0),p=Math.max(Math.abs(o-i)-2*r,0);return{x:n,y:l,width:c,height:p}}function Bv(e,t){if(t==null)return!0;const i=Yr(e),s=1e-6,o=i.x+s,a=i.y+s,r=i.x+i.width-s,n=i.y+i.height-s,l=t.x,c=t.x+t.width,p=t.y,d=t.y+t.height;return Math.max(o,l)<=Math.min(r,c)&&Math.max(a,p)<=Math.min(n,d)}function qr(e){const{clipX0:t,clipX1:i,clipY0:s,clipY1:o}=e;return t!=null&&i!=null||s!=null&&o!=null}function Gv(e){if(!qr(e))return;const{x0:t,y0:i,x1:s,y1:o}=e,{x:a,y:r,width:n,height:l}=Yr(e);let{clipX0:c,clipX1:p,clipY0:d,clipY1:u}=e;(c==null||p==null)&&(c=t,p=s),(d==null||u==null)&&(d=i,u=o);const f=Math.min(c,p),y=Math.min(d,u),g=Math.abs(p-c),m=Math.abs(u-d);return c=Math.max(a,f),d=Math.max(r,y),p=Math.min(a+n,f+g),u=Math.min(r+l,y+m),new Ev(Math.min(c,p),Math.min(d,u),Math.abs(p-c),Math.abs(u-d))}function Jp(e,t){const i=e?"initial":"update";return{node:{fromFn(o,a){const r=o.previousDatum;let{x0:n,y0:l,x1:c,y1:p,clipX0:d,clipY0:u,clipX1:f,clipY1:y}=r??a;const{horizontalInset:g,verticalInset:m}=a,S=r!=null&&qr(r),x=qr(a);return S&&x||(!S&&x?({x0:n,y0:l,x1:c,y1:p,clipX0:d,clipY0:u,clipX1:f,clipY1:y}=a,e&&(t?f=a.clipX0:y=a.clipY0)):S&&!x?({x0:n,y0:l,x1:c,y1:p}=a,d=void 0,u=void 0,f=void 0,y=void 0):e&&(t?c=n:p=l)),{x0:n,y0:l,x1:c,y1:p,clipX0:d,clipY0:u,clipX1:f,clipY1:y,horizontalInset:g,verticalInset:m,phase:i}},toFn(o,a){const{x0:r,y0:n,x1:l,y1:c,clipX0:p,clipY0:d,clipX1:u,clipY1:f,horizontalInset:y,verticalInset:g}=a;return{x0:r,y0:n,x1:l,y1:c,clipX0:p,clipY0:d,clipX1:u,clipY1:f,horizontalInset:y,verticalInset:g}},applyFn(o,a){o.setProperties(_o(o,a))}}}}function _o(e,t){const{x:i,y:s,width:o,height:a}=Yr(t),r=Gv(t),n=Bv(t,r);return{x:i,y:s,width:o,height:a,clipBBox:r,visible:n}}var Wv={Before:"right",Center:"center",After:"left"},Vv={Before:"top",Center:"middle",After:"bottom"},Kv={Before:-1,Center:-.5,After:0},zv={Before:0,Center:-.5,After:-1};function $v(e,t,i,s,o,a){const{seriesRect:r,gaugeRect:n,barRect:l}=o,{padding:c,horizontal:p}=s;i.each((d,u)=>{const f=xs(e.id,t,u,a?.label);let y,g;u.placement==="outside-start"?p?(y=n.x,g=r.height):(y=r.width,g=r.height-(n.y+n.height)):u.placement==="outside-end"?p?(y=r.width-(n.x+n.width),g=r.height):(y=r.width,g=n.y):u.avoidCollisions&&(y=n.width,g=n.height);let m;if(f==null)return;if(y!=null&&g!=null)m=hs(f,u,{padding:c},()=>({width:y,height:g,meta:null}))?.[0];else{const C={fontSize:u.fontSize,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontFamily:u.fontFamily,lineHeight:u.lineHeight},{width:T,height:O}=Fv.measureText(f,{font:C});m={text:f,fontSize:u.fontSize,lineHeight:Fi(u,u.fontSize),width:T,height:O}}if(m==null){d.visible=!1;return}const S=p?n.x:n.y+n.height,x=p?n.x+n.width:n.y,b=p?l.x:l.y+l.height,v=p?l.x+l.width:l.y,k=u.spacing*(p?1:-1);let L,A,D,I;switch(u.placement){case"outside-start":L=-1/0,A=1/0,D=S-k,I="Before";break;case"outside-end":L=-1/0,A=1/0,D=x+k,I="After";break;case"inside-start":L=S,A=v,D=S+k,I="After";break;case"inside-end":L=v,A=x,D=x-k,I="Before";break;case"inside-center":L=S,A=x,D=(S+x)/2,I="Center";break;case"bar-inside":L=b,A=v,D=(b+v)/2,I="Center";break;case"bar-inside-end":L=b,A=v,D=v-k,I="Before";break;case"bar-outside-end":L=v,A=x,D=v+k,I="After";break;case"bar-end":L=-1/0,A=1/0,D=v,I="Center";break}const M=p?D:n.x+n.width/2,P=p?n.y+n.height/2:D;let R,w;p?(R=M+Kv[I]*m.width,w=R+m.width):(R=P+zv[I]*m.height,w=R+m.height);const N=Math.min(R,w)>=Math.min(L,A)&&Math.max(R,w)<=Math.max(L,A);if(u.avoidCollisions&&!N){d.visible=!1;return}d.visible=!0,d.text=m.text,d.fontSize=m.fontSize,d.lineHeight=m.lineHeight,d.textAlign=p?Wv[I]:"center",d.textBaseline=p?"middle":Vv[I],d.x=M,d.y=P})}var{fromToMotion:Ur,resetMotion:Hv,SeriesNodePickMode:Zp,StateMachine:Xv,createDatumId:Qp,CachedTextMeasurerPool:Yv,toRadians:eh,BBox:Qt,Group:xi,PointerEvents:th,Selection:bi,Rect:qv,Text:ih,TransformableText:Uv,Marker:jv,LinearScale:Jv,AxisTickGenerator:Zv,NiceMode:Qv,easing:ek,getColorStops:tk,findRangeExtent:ik,tickFormat:sk}=Yi,ok={before:180,middle:0,after:0},ak={before:90,middle:0,after:-90},rk=class{constructor(e,t){this.gauge=e,this.ctx=t}get scale(){return this.gauge.scale}get label(){return this.gauge.properties.scale.label}get interval(){return this.gauge.properties.scale.interval}tickFormatter(e,t,i,s,o){const{format:a}=this.label;let r;return a!=null&&(r=sk(t,typeof a=="string"?a:void 0)),(n,l)=>{const{formatter:c}=this.label;let p;return c&&(p??(p=$r(this.ctx,c,{value:n,index:l,domain:e,boundSeries:void 0}))),p??(p=r?.(n)),p??this.gauge.formatLabel(n)}}inRange(){return!0}},Fo=class extends Yi.Series{constructor(e){super({moduleCtx:e,pickModes:[Zp.EXACT_SHAPE_MATCH,Zp.NEAREST_NODE]}),this.properties=new je,this.seriesRect=Qt.NaN,this.gaugeRect=Qt.NaN,this.scale=new Jv,this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new xi({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new xi({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new xi({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new xi({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new xi({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new xi({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new xi({name:"tickGroup"})),this.scaleSelection=bi.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=bi.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=bi.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=bi.select(this.itemTargetLabelGroup,ih),this.labelSelection=bi.select(this.itemLabelGroup,ih),this.highlightTargetSelection=bi.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=bi.select(this.tickGroup,Uv),this.datumUnion=new Vp,this.axis=new rk(this,e),this.tickGenerator=new Zv(this.axis),this.animationState=new Xv("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=th.None,this.tickGroup.pointerEvents=th.None}get range(){return this.horizontal?[0,this.gaugeRect.width]:[0,this.gaugeRect.height]}get horizontal(){return this.properties.direction==="horizontal"}get hasData(){return!0}nodeFactory(){const e=new qv;return e.crisp=!0,e}markerFactory(){return new jv}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){return zp(e,this.properties.scale)}createLinearGradient(e,t,i){const{properties:s,horizontal:o}=this,{defaultColorRange:a}=s;return{type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:tk(t,a,e.domain,i),rotation:o?90:0}}getShapeFillBBox(){const{properties:e,originX:t,originY:i,horizontal:s,scale:o}=this,{thickness:a}=e,r=ik(o.range);return new Qt(t,i,s?r:a,s?a:r)}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:s=t.text,value:o=t.value??0,shape:a=t.shape??"triangle",rotation:r=t.rotation??0,strokeWidth:n=t.strokeWidth??0,placement:l=t.placement??"middle",spacing:c=t.spacing??0,size:p=t.size??0,fill:d=t.fill??"black",fillOpacity:u=t.fillOpacity??1,stroke:f=t.stroke??"black",strokeOpacity:y=t.strokeOpacity??1,lineDash:g=t.lineDash??[0],lineDashOffset:m=t.lineDashOffset??0}=i,{enabled:S=t.label.enabled,color:x=t.label.color??"black",fontStyle:b=t.label.fontStyle??"normal",fontWeight:v=t.label.fontWeight??"normal",fontSize:k=t.label.fontSize,fontFamily:L=t.label.fontFamily,spacing:A=t.label.spacing??0}=i.label;return{text:s,value:o,shape:a,placement:l,spacing:c,size:p,rotation:r,fill:d,fillOpacity:u,stroke:f,strokeWidth:n,strokeOpacity:y,lineDash:g,lineDashOffset:m,label:{enabled:S,color:x,fontStyle:b,fontWeight:v,fontSize:k,fontFamily:L,spacing:A}}})}getTargetPoint(e){const{properties:t,originX:i,originY:s,horizontal:o,scale:a,gaugeRect:r}=this,{thickness:n}=t,{value:l,placement:c,spacing:p,size:d}=e,u=a.convert(l);let f;switch(c){case"before":f=-(p+d/2);break;case"after":f=n+p+d/2;break;default:f=n/2;break}return{x:i+r.x+(o?u:f),y:s+r.y+(o?f:u)}}getTargetLabel(e){const{size:t,placement:i,label:s}=e,{spacing:o,color:a,fontStyle:r,fontWeight:n,fontSize:l,fontFamily:c}=s,p=void 0,d=t/2+o;let u,f,y=0,g=0;return this.horizontal?(u="center",i==="after"?(f="top",g=d):(f="bottom",g=-d)):(f="middle",i==="before"?(u="right",y=-d):(u="left",y=d)),{offsetX:y,offsetY:g,fill:a,textAlign:u,textBaseline:f,fontStyle:r,fontWeight:n,fontSize:l,fontFamily:c,lineHeight:p}}labelDatum(e,t){const{placement:i,avoidCollisions:s,spacing:o,text:a,color:r,fontSize:n,minimumFontSize:l,fontStyle:c,fontWeight:p,fontFamily:d,lineHeight:u,wrapping:f,overflowStrategy:y,formatter:g=m=>this.formatLabel(m.value)}=e;return{placement:i,avoidCollisions:s,spacing:o,text:a,value:t,fill:r,fontSize:n,minimumFontSize:l,fontStyle:c,fontWeight:p,fontFamily:d,lineHeight:u,wrapping:f,overflowStrategy:y,formatter:g}}verticalLabelInset(){const{properties:e}=this,{label:t}=e,i=t.text?.split(`
`),s=Fi(t,t.fontSize)*(i?.length??1);return t.spacing+s}horizontalLabelInset(){const{scale:e,properties:t}=this,{scale:i,label:s}=t,o=s.text?.split(`
`),a=Yv.getMeasurer({font:s}),r=i.interval.values??e.ticks({nice:!1,interval:i.interval.step,minTickCount:0,maxTickCount:6,tickCount:5})?.ticks??[],l=(o??r?.map(c=>xs(this.id,this.ctx,this.labelDatum(s,c))??"")).reduce((c,p)=>{const{width:d}=a.measureText(p);return Math.max(c,d)},0);return s.spacing+l}createNodeData(){const{id:e,properties:t,horizontal:i,scale:s,seriesRect:o}=this,{value:a,segmentation:r,thickness:n,cornerRadius:l,cornerMode:c,bar:p,scale:d,label:u}=t;s.domain=[d.min,d.max],s.range=i?[0,o.width]:[o.height,0];let f,y;i?(y=1,f=Math.PI/2):d.label.placement==="before"?(y=1,f=0):(y=-1,f=0);const g=f-Math.PI/2;let m,S,x,b;i?(m=0,S=o.width,x=(o.height-n)/2,b=x+n,u.placement==="outside-start"?m+=this.horizontalLabelInset():u.placement==="outside-end"&&(S-=this.horizontalLabelInset())):(m=(o.width-n)/2,S=m+n,b=0,x=o.height,u.placement==="outside-start"?x-=this.verticalLabelInset():u.placement==="outside-end"&&(b+=this.verticalLabelInset())),this.gaugeRect=new Qt(Math.min(m,S),Math.min(x,b),Math.abs(S-m),Math.abs(b-x));const v=0,k=0;s.domain=[d.min,d.max],s.range=i?[m,S]:[x,b];const{ticks:L}=this.tickGenerator.generateTicks({domain:s.domain,range:this.range,reverse:!1,primaryTickCount:void 0,defaultTickMinSpacing:0,visibleRange:[0,1],niceMode:Qv.Off,labelX:0,parallelFlipRotation:f,regularFlipRotation:g,sideFlag:y,removeOverflowLabels:!1}).tickData,A=!1,D=this.getTargets(),I=[],M=[],P=[],R=[],[w,N]=s.range,C=Math.abs(N-w),T=i?s.convert(a):S,O=i?b:s.convert(a),_=r.enabled?r.spacing/2:0,F=i?_:0,E=i?0:_,B=Math.min(p.thickness??Math.round(p.thicknessRatio*n),n),G=-(n-B)/2,W=i?0:G,V=i?G:0,K=c==="item",$=Math.ceil(C);let X=r.enabled?r.interval.getSegments(s,$):void 0;const U=p.fill??this.createLinearGradient(s,p.fills,p.fillMode),J=d.fill??(p.enabled&&d.fills.length===0?d.defaultFill:void 0)??this.createLinearGradient(s,d.fills,d.fillMode);if(X==null&&K){const j=Math.min(...s.domain),Y=Math.max(...s.domain),le={value:a,segmentStart:j,segmentEnd:Y};if(p.enabled){const ve=Math.min(l,B/2,C/2)*(A?-1:1),ee=i?ve:0,ue=i?0:ve;I.push({series:this,itemId:"value",datum:le,datumIndex:{type:0},type:0,x0:v+m-ee-W,y0:k+x-ue-V,x1:v+T+ee+W,y1:k+O+ue+V,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:U,horizontalInset:F,verticalInset:E})}const Z=Math.min(l,n/2,C/2)*(A?-1:1),Q=i?Z:0,Ee=i?0:Z;R.push({series:this,itemId:"scale",datum:le,datumIndex:{type:0},type:0,x0:v+m-Q,y0:k+x-Ee,x1:v+S+Q,y1:k+b+Ee,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:J,horizontalInset:F,verticalInset:E})}else{X??(X=s.domain);const j=v+m-W,Y=k+x-V,le=v+T+W,de=k+O+V;for(let Z=0;Z<X.length-1;Z+=1){const Q=X[Z+0],Ee=X[Z+1],ze={value:a,segmentStart:Q,segmentEnd:Ee},ve=Z===0,ee=Z===X.length-2,ue=s.convert(Q),pe=s.convert(Ee),We=K||ve?l:0,kt=K||ee?l:0,Vt=i?We:kt,Li=kt,ut=i?kt:We,qt=We;p.enabled&&I.push({series:this,itemId:`value-${Z}`,datum:ze,datumIndex:{type:0},type:0,x0:v+(i?ue:m),y0:k+(i?x:ue),x1:v+(i?pe:S),y1:k+(i?b:pe),clipX0:j,clipY0:Y,clipX1:le,clipY1:de,topLeftCornerRadius:Vt,topRightCornerRadius:Li,bottomRightCornerRadius:ut,bottomLeftCornerRadius:qt,fill:U,horizontalInset:F,verticalInset:E}),R.push({series:this,itemId:`scale-${Z}`,datum:ze,datumIndex:{type:0},type:0,x0:v+(i?ue:m),y0:k+(i?x:ue),x1:v+(i?pe:S),y1:k+(i?b:pe),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:Vt,topRightCornerRadius:Li,bottomRightCornerRadius:ut,bottomLeftCornerRadius:qt,fill:J,horizontalInset:F,verticalInset:E})}}u.enabled&&P.push(this.labelDatum(u,a));const oe=i?ok:ak;for(let j=0;j<D.length;j+=1){const Y=D[j],{value:le,text:de,shape:Z,size:Q,fill:Ee,fillOpacity:ze,stroke:ve,strokeWidth:ee,strokeOpacity:ue,lineDash:pe,lineDashOffset:We}=Y,kt=this.getTargetPoint(Y),Vt=eh(Y.rotation+oe[Y.placement]);M.push({series:this,itemId:`target-${j}`,midPoint:kt,datum:{value:le},datumIndex:{type:1,index:j},type:1,value:le,text:de,x:kt.x,y:kt.y,shape:Z,size:Q,rotation:Vt,fill:Ee,fillOpacity:ze,stroke:ve,strokeOpacity:ue,strokeWidth:ee,lineDash:pe,lineDashOffset:We,label:this.getTargetLabel(Y)})}return{itemId:e,nodeData:I,tickData:L,targetData:M,labelData:P,scaleData:R}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,targetSelection:s,targetLabelSelection:o,scaleSelection:a,highlightTargetSelection:r,tickSelection:n}=this;this.seriesRect=e??Qt.NaN;const l=this.checkResize(e);this.updateSelections(l),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const c=this.contextNodeData?.nodeData??[],p=this.contextNodeData?.labelData??[],d=this.contextNodeData?.targetData??[],u=this.contextNodeData?.scaleData??[],f=this.contextNodeData?.tickData??[],y=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:u,scaleSelection:a}),this.updateScaleNodes({scaleSelection:a}),this.targetSelection=this.updateTargetSelection({targetData:d,targetSelection:s}),this.updateTargetNodes({targetSelection:s,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:d,targetLabelSelection:o}),this.updateTargetLabelNodes({targetLabelSelection:o}),this.datumSelection=this.updateDatumSelection({nodeData:c,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:p,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:y!=null?[y]:[],targetSelection:r}),this.updateTargetNodes({targetSelection:r,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:f,tickSelection:n}),this.updateTickNodes({tickSelection:n}),l&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Qp(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i,properties:s}=this,{bar:o}=s,{fillOpacity:a,stroke:r,strokeOpacity:n,lineDash:l,lineDashOffset:c}=o,p=this.getStrokeWidth(o.strokeWidth),d=i.animationManager.isSkipped(),u=this.getShapeFillBBox();t.each((f,y)=>{const{topLeftCornerRadius:g,topRightCornerRadius:m,bottomRightCornerRadius:S,bottomLeftCornerRadius:x,fill:b}=y;f.fill=b,f.fillBBox=u,f.fillOpacity=a,f.stroke=r,f.strokeOpacity=n,f.strokeWidth=p,f.lineDash=l,f.lineDashOffset=c,f.topLeftCornerRadius=g,f.topRightCornerRadius=m,f.bottomRightCornerRadius=S,f.bottomLeftCornerRadius=x,f.pointerEvents=this.properties.bar.enabled?Yi.PointerEvents.All:Yi.PointerEvents.None,(d||f.previousDatum==null)&&f.setProperties(_o(f,y))}),this.datumUnion.update(t,this.itemGroup,Yi.Rect,(f,y,g)=>{f.pointerEvents=Yi.PointerEvents.None,f.clipBBox??(f.clipBBox=new Qt(NaN,NaN,NaN,NaN)),f.x=y.x,f.y=y.y,f.clipBBox.x=y.clipBBox?.x??y.x,f.clipBBox.y=y.clipBBox?.y??y.y,this.horizontal?(f.height=f.clipBBox.height=g.height,f.width=g===y?g.width:g.x+g.width,f.clipBBox.width=f.width-(g.width-(g.clipBBox?.width??g.width)),f.topLeftCornerRadius=y.topLeftCornerRadius,f.bottomLeftCornerRadius=y.bottomLeftCornerRadius,f.topRightCornerRadius=g.topRightCornerRadius,f.bottomRightCornerRadius=g.bottomRightCornerRadius):(f.width=f.clipBBox.width=g.width,f.height=g===y?g.height:g.x+g.height,f.clipBBox.height=f.height-(g.height-(g.clipBBox?.height??g.height)),f.topLeftCornerRadius=y.topLeftCornerRadius,f.topRightCornerRadius=y.topRightCornerRadius,f.bottomLeftCornerRadius=g.bottomLeftCornerRadius,f.bottomRightCornerRadius=g.bottomRightCornerRadius)})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>Qp(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,{scale:i}=this.properties,{fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:r,lineDash:n,lineDashOffset:l}=i,c=this.getShapeFillBBox();t.each((p,d)=>{const{topLeftCornerRadius:u,topRightCornerRadius:f,bottomRightCornerRadius:y,bottomLeftCornerRadius:g,fill:m}=d;p.fill=m,p.fillBBox=c,p.fillOpacity=s,p.stroke=o,p.strokeOpacity=a,p.strokeWidth=r,p.lineDash=n,p.lineDashOffset=l,p.topLeftCornerRadius=u,p.topRightCornerRadius=f,p.bottomRightCornerRadius=y,p.bottomLeftCornerRadius=g,p.setProperties(_o(p,d))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e,s=i?this.properties.highlightStyle.item:void 0;t.each((o,a)=>{const{x:r,y:n,shape:l,size:c,rotation:p,fill:d,fillOpacity:u,stroke:f,strokeOpacity:y,strokeWidth:g,lineDash:m,lineDashOffset:S}=a;o.size=c,o.shape=l==="line"?$p:l,o.fill=s?.fill??d,o.fillOpacity=s?.fillOpacity??u,o.stroke=s?.stroke??f,o.strokeOpacity=s?.strokeOpacity??y,o.strokeWidth=s?.strokeWidth??g,o.lineDash=s?.lineDash??m,o.lineDashOffset=s?.lineDashOffset??S,o.translationX=r,o.translationY=n,o.rotation=p})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,s)=>{const{x:o,y:a,text:r}=s,{offsetX:n,offsetY:l,fill:c,fontStyle:p,fontWeight:d,fontSize:u,fontFamily:f,textAlign:y,textBaseline:g}=s.label;i.visible=!0,i.x=o+n,i.y=a+l,i.text=r,i.fill=c,i.fontStyle=p,i.fontWeight=d,i.fontSize=u,i.fontFamily=f,i.textAlign=y,i.textBaseline=g})}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.tickId)}updateTickNodes(e){const{gaugeRect:t,properties:i}=this,s=i.defaultScale,{enabled:o,color:a,fontFamily:r=s.label.fontFamily,fontSize:n=s.label.fontSize,fontStyle:l,fontWeight:c=s.label.fontWeight,spacing:p}=i.scale.label;let{placement:d}=i.scale.label;const u=eh(i.scale.label.rotation??0);let f,y,g,m;this.horizontal?(d??(d="after"),f="center",y=d==="before"?"bottom":"top",m=this.originY+t.y+(d==="before"?-p:t.height+p)):(d??(d="before"),f=d==="before"?"end":"start",y="middle",g=this.originX+t.x+(d==="before"?-p:t.width+p)),e.tickSelection.each((S,x)=>{if(!o){S.visible=!1;return}const b=g??x.translation,v=m??x.translation;S.visible=!0,S.text=x.tickLabel,S.fill=a,S.fontFamily=r,S.fontSize=n,S.fontStyle=l,S.fontWeight=c,S.textBaseline=y,S.textAlign=f,S.x=b,S.y=v,S.rotationCenterX=b,S.rotationCenterY=v,S.rotation=u})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>"primary")}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((s,o)=>{s.fill=o.fill,s.fontStyle=o.fontStyle,s.fontWeight=o.fontWeight,s.fontFamily=o.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,horizontal:i,scale:s,seriesRect:o,gaugeRect:a}=this,{x:r,y:n,width:l,height:c}=a,p=e?.label??this.properties.value;let d;if(i){const y=s.convert(p);d=new Qt(r,n,y-r,c)}else{const y=s.convert(p);d=new Qt(r,y,l,c-y)}const u={seriesRect:o,gaugeRect:a,barRect:d},{margin:f}=this.properties;$v(this,this.ctx,t,{padding:f,horizontal:i},u,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),Hv([this.datumSelection],_o),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i=0,s=0;if(this.labelSelection.each((o,a)=>{o.opacity=1,i=o.previousDatum?.value??e.from??a.value,s=a.value}),!this.labelsHaveExplicitText())if(i===s)this.formatLabelText({label:s});else{const o=`${this.id}_labels`;t.animate({id:o,groupId:"label",from:{label:i},to:{label:s},phase:e.phase??"update",ease:ek.easeOut,onUpdate:a=>this.formatLabelText(a)})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Jp(!0,this.horizontal);Ur(this.id,"node",e,[this.datumSelection],t,(i,s)=>s.itemId),Ur(this.id,"label",e,[this.labelSelection],Kp,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Jp(!1,this.horizontal);Ur(this.id,"node",e,[this.datumSelection],t,(i,s)=>s.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[0,1]}dataCount(){return NaN}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:s}=i;let o,a;if(e.type===0?(o=i.value,a=i.label.text):{value:o,text:a}=i.targets[e.index],o!=null)return this.formatTooltipWithContext(s,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(o)}]},{seriesId:t,title:void 0,datum:void 0,value:o})}pickNodeClosestDatum(e){return Xp(this,e)}pickFocus(e){return Yp(this,e)}getCaptionText(){return this.formatLabel(this.properties.value)}getCategoryValue(e){}datumIndexForCategoryValue(e){}};Fo.className="LinearGaugeSeries",Fo.type="linear-gauge";var nO={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"linear-gauge",moduleFactory:e=>new Fo(e),themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{thickness:50,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},Oo.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",Oo.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{spacing:11}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},defaultScale:{label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},label:{enabled:!1,placement:"inside-start",fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:2},minimumFontSize:Oo.FONT_SIZE.SMALL,spacing:18,color:{$ref:"chartBackgroundColor"}},margin:4,tooltip:{range:{$path:["/tooltip/range",10]}}}}},sh={type:"series",name:"linear-gauge",chartType:"gauge",enterprise:!0,options:Oo.linearGaugeSeriesOptionsDef,create:e=>new Fo(e)};import{_ModuleSupport as jr}from"ag-charts-community";import{_ModuleSupport as oh}from"ag-charts-community";var vs={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer",buttons:{anchorPointX:"middle",anchorPointY:"middle"}},legend:{enabled:!1},gradientLegend:{enabled:!1}};function pt(e){const t=oh.deepClone(e);return oh.jsonWalk(t,i=>{typeof i=="object"&&"$palette"in i&&(i.$mapPalette=i.$palette,delete i.$palette)}),t}import{_ModuleSupport as ah}from"ag-charts-community";import{Logger as rh}from"ag-charts-core";import{_ModuleSupport as nk}from"ag-charts-community";var lk=1e-9;function nh(e,t,i,s){const[o,a]=e,[r,n]=t,l=r-o,c=n-a,p=l*l+c*c;let d,u;if(Math.abs(p)<lk)d=o,u=a;else{let g=((i-o)*l+(s-a)*c)/p;g=Math.max(0,Math.min(1,g)),d=o+g*(r-o),u=a+g*(n-a)}const f=i-d,y=s-u;return f*f+y*y}function lh(e,t,i){let s=1/0,o=e[e.length-1];for(const a of e)s=Math.min(s,nh(o,a,t,i)),o=a;return Math.sqrt(s)}function Jr(e){let[t,i]=e[0],s=0;for(let o=1;o<e.length;o+=1){const[a,r]=e[o],n=Math.hypot(a-t,r-i);s+=n,t=a,i=r}return s}function Eo(e){if(e.length===0)return;const t=Jr(e)/2;let[i,s]=e[0],o=0;for(let a=1;a<e.length;a+=1){const[r,n]=e[a],l=Math.hypot(r-i,n-s),c=o+l;if(c>t){const p=(t-o)/l,d=[i+(r-i)*p,s+(n-s)*p],u=Math.atan2(n-s,r-i);return{point:d,angle:u}}o=c,i=r,s=n}}import{_ModuleSupport as ck}from"ag-charts-community";var{LonLatBBox:pk}=ck;function Di(e,t){return e.forEach(i=>{const[s,o]=i;t=pk.extend(t,s,o,s,o)}),t}function hk(e){if(e.length===0)return;let t=0,i=0,s=0,[o,a]=e[e.length-1];for(const[r,n]of e){const l=o*n-r*a;s+=l,t+=(o+r)*l,i+=(a+n)*l,o=r,a=n}return s*=3,[t/s,i/s]}function Bo(e,t,i){let s=!1,o=1/0;for(const a of e){let r=a[a.length-1],[n,l]=r;for(const c of a){const[p,d]=c;d>i!=l>i&&t<(n-p)*(i-d)/(l-d)+p&&(s=!s),o=Math.min(o,nh(r,c,t,i)),r=c,n=p,l=d}}return(s?-1:1)*Math.sqrt(o)}var{Path:dk,ExtendedPath2D:uk,BBox:fk,SceneChangeDetection:gk,SceneObjectChangeDetection:yk,objectsEqual:mk}=nk,Ui=class extends dk{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new uk}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:e}=this;this.strokePath.clear(),this.path.clear(),this.bbox=e!=null?this.drawGeometry(e,void 0):void 0}drawPath(e){super.drawPath(e),this.renderStroke(e,this.strokePath.getPath2D())}containsPoint(e,t){const{projectedGeometry:i}=this;return i==null||!this.getBBox().containsPoint(e,t)?!1:this.geometryDistance(i,e,t)<=0}distanceSquared(e,t){const{projectedGeometry:i}=this;if(i==null)return 1/0;const s=this.geometryDistance(i,e,t);return s>0?s*s:0}geometryDistance(e,t,i){const{renderMode:s,strokeWidth:o}=this,a=(s&1)!==0,r=(s&2)!==0,n=Math.max(o/2,1)+1;switch(e.type){case"GeometryCollection":return e.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,t,i)),1/0);case"MultiPolygon":return a?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(Bo(c,t,i),0)),1/0):1/0;case"Polygon":return a?Math.max(Bo(e.coordinates,t,i),0):1/0;case"MultiLineString":return r?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(lh(c,t,i)-n,0)),1/0):1/0;case"LineString":return r?Math.max(lh(e.coordinates,t,i)-n,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(e,t){const{renderMode:i,path:s,strokePath:o}=this,a=(i&1)!==0,r=(i&2)!==0;switch(e.type){case"GeometryCollection":e.geometries.forEach(n=>{t=this.drawGeometry(n,t)});break;case"MultiPolygon":a&&e.coordinates.forEach(n=>{t=this.drawPolygon(s,n,t)});break;case"Polygon":a&&(t=this.drawPolygon(s,e.coordinates,t));break;case"LineString":r&&(t=this.drawLineString(o,e.coordinates,t,!1));break;case"MultiLineString":r&&e.coordinates.forEach(n=>{t=this.drawLineString(o,n,t,!1)});break;case"Point":case"MultiPoint":break}return t}drawPolygon(e,t,i){if(t.length<1)return i;i=this.drawLineString(e,t[0],i,!0);for(let s=1;s<t.length;s+=1){const o=t[s];this.drawLineString(e,o,void 0,!0)}return i}drawLineString(e,t,i,s){if(t.length<2)return i;const o=s?t.length-1:t.length;for(let a=0;a<o;a+=1){const[r,n]=t[a];if(a===0?e.moveTo(r,n):e.lineTo(r,n),i==null)i=new fk(r,n,0,0);else{const{x:l,y:c}=i,p=l+i.width,d=c+i.height;i.x=Math.min(l,r),i.y=Math.min(c,n),i.width=Math.max(p,r)-i.x,i.height=Math.max(d,n)-i.y}}return s&&e.closePath(),i}};h([yk({equals:mk})],Ui.prototype,"projectedGeometry",2),h([gk()],Ui.prototype,"renderMode",2);import{_ModuleSupport as Sk}from"ag-charts-community";var{LonLatBBox:Zr}=Sk;function ji(e,t){if(e.bbox!=null){const[i,s,o,a]=e.bbox;return t=Zr.extend(t,i,s,o,a),t}switch(e.type){case"GeometryCollection":e.geometries.forEach(i=>{t=ji(i,t)});break;case"MultiPolygon":e.coordinates.forEach(i=>{i.length>0&&(t=Di(i[0],t))});break;case"Polygon":e.coordinates.length>0&&(t=Di(e.coordinates[0],t));break;case"MultiLineString":e.coordinates.forEach(i=>{t=Di(i,t)});break;case"LineString":t=Di(e.coordinates,t);break;case"MultiPoint":e.coordinates.forEach(i=>{const[s,o]=i;t=Zr.extend(t,s,o,s,o)});break;case"Point":{const[i,s]=e.coordinates;t=Zr.extend(t,i,s,i,s);break}}return t}function Go(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach(s=>{const o=Go(s);if(o==null)return;const a=Di(o[0],void 0);if(a==null)return;const r=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(t==null||r>t)&&(t=r,i=o)}),i}case"MultiPolygon":{let t,i;return e.coordinates.forEach(s=>{const o=Di(s[0],void 0);if(o==null)return;const a=Math.abs(o.lat1-o.lat0)*Math.abs(o.lon1-o.lon0);(t==null||a>t)&&(t=a,i=s)}),i}case"Polygon":return e.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function Wo(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach(s=>{const o=Wo(s);if(o==null)return;const a=Jr(o);a!=null&&(t==null||a>t)&&(t=a,i=o)}),i}case"MultiLineString":{let t=0,i;return e.coordinates.forEach(s=>{const o=Jr(s);o>t&&(t=o,i=s)}),i}case"LineString":return e.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function Qr(e,t){if(e==null)return!1;switch(e.type){case"GeometryCollection":return e.geometries.some(i=>Qr(i,t));case"MultiPolygon":case"Polygon":return(t&1)!==0;case"MultiLineString":case"LineString":return(t&2)!==0;case"MultiPoint":case"Point":return(t&4)!==0}}function ei(e,t){switch(e.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:e.geometries.map(i=>ei(i,t))};case"Polygon":return{type:"Polygon",coordinates:en(e.coordinates,t)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:xk(e.coordinates,t)};case"MultiLineString":return{type:"MultiLineString",coordinates:en(e.coordinates,t)};case"LineString":return{type:"LineString",coordinates:tn(e.coordinates,t)};case"MultiPoint":return{type:"MultiPoint",coordinates:tn(e.coordinates,t)};case"Point":return{type:"Point",coordinates:t.convert(e.coordinates)}}}function xk(e,t){return e.map(i=>en(i,t))}function en(e,t){return e.map(i=>tn(i,t))}function tn(e,t){return e.map(i=>t.convert(i))}function bk(){return{fromFn:(i,s,o)=>o==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,s,o)=>o==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function ch(e,t){const i=e.contextNodeData?.nodeData[t.datumIndex];if(i!==void 0){for(const s of e.datumSelection.nodes())if(s.datum===i)return s}}import{_ModuleSupport as ph}from"ag-charts-community";var yO=class extends ph.SeriesProperties{},ks=class extends ph.DataModelSeries{addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>{this.onLegendItemClick(e)}),this.ctx.eventsHub.on("legend:item-double-click",e=>{this.onLegendItemDoubleClick(e)}))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}};import{_ModuleSupport as Dk}from"ag-charts-community";var{Property:ke,SeriesProperties:vk,makeSeriesTooltip:kk,Label:Mk}=Dk,De=class extends vk{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new Mk,this.tooltip=kk()}};h([ke],De.prototype,"topology",2),h([ke],De.prototype,"title",2),h([ke],De.prototype,"legendItemName",2),h([ke],De.prototype,"idKey",2),h([ke],De.prototype,"topologyIdKey",2),h([ke],De.prototype,"idName",2),h([ke],De.prototype,"labelKey",2),h([ke],De.prototype,"labelName",2),h([ke],De.prototype,"sizeKey",2),h([ke],De.prototype,"sizeName",2),h([ke],De.prototype,"colorKey",2),h([ke],De.prototype,"colorName",2),h([ke],De.prototype,"sizeDomain",2),h([ke],De.prototype,"colorRange",2),h([ke],De.prototype,"maxStrokeWidth",2),h([ke],De.prototype,"stroke",2),h([ke],De.prototype,"strokeOpacity",2),h([ke],De.prototype,"strokeWidth",2),h([ke],De.prototype,"lineDash",2),h([ke],De.prototype,"lineDashOffset",2),h([ke],De.prototype,"itemStyler",2),h([ke],De.prototype,"label",2),h([ke],De.prototype,"tooltip",2);var{getMissCount:Ik,createDatumId:hh,SeriesNodePickMode:dh,valueProperty:Ms,CachedTextMeasurerPool:Ak,ColorScale:Nk,LinearScale:Pk,Selection:sn,Text:Lk,Transformable:Rk}=ah,Vo=class extends ks{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[dh.EXACT_SHAPE_MATCH,dh.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new De,this._chartTopology=void 0,this.colorScale=new Nk,this.sizeScale=new Pk,this.datumSelection=sn.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=sn.select(this.labelGroup,Lk),this.highlightDatumSelection=sn.select(this.highlightNode,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0):!1}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new Ui;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:s,colorScale:o}=this,{topologyIdKey:a,idKey:r,sizeKey:n,colorKey:l,labelKey:c,sizeDomain:p,colorRange:d}=this.properties,u=new Map;i?.features.forEach(b=>{const v=b.properties?.[a];v==null||!Qr(b.geometry,2)||u.set(v,b)});const f=this.sizeScale.type,y=this.colorScale.type,g=this.scale?.type,{dataModel:m,processedData:S}=await this.requestDataModel(e,t,{props:[Ms(r,g,{id:"idValue",includeProperty:!1}),Ms(r,g,{id:"featureValue",includeProperty:!1,processor:()=>b=>u.get(b)}),...c!=null?[Ms(c,"band",{id:"labelValue"})]:[],...n!=null?[Ms(n,f,{id:"sizeValue"})]:[],...l!=null?[Ms(l,y,{id:"colorValue"})]:[]]}),x=m.resolveColumnById(this,"featureValue",S);if(this.topologyBounds=x.reduce((b,v)=>{const k=v?.geometry;return k==null?b:ji(k,b)},void 0),n!=null){const b=m.resolveProcessedDataIndexById(this,"sizeValue"),v=S.domain.values[b]??[];s.domain=p??v}if(d!=null&&this.isColorScaleValid()){const b=m.resolveProcessedDataIndexById(this,"colorValue");o.domain=S.domain.values[b],o.range=d,o.update()}i==null&&rh.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=Ik(this,i.defs.values[s].missing);return!(o===0||o===a)}getLabelDatum(e,t,i,s){if(t==null||i==null)return;const o=Wo(i);if(o==null)return;const{idKey:a,idName:r,sizeKey:n,sizeName:l,colorKey:c,colorName:p,labelKey:d,labelName:u,label:f}=this.properties;if(d==null)return;const y=this.getLabelText(t,e,d,"label",[],f,{value:t,datum:e,idKey:a,idName:r,sizeKey:n,sizeName:l,colorKey:c,colorName:p,labelKey:d,labelName:u});if(y==null)return;const g=s.measureText(String(y)),m=Eo(o);if(m==null)return;const[S,x]=m.point,{width:b,height:v}=g;return{point:{x:S,y:x,size:0},label:{width:b,height:v,text:y},anchor:void 0,placement:void 0}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:s,properties:o,scale:a}=this,{idKey:r,sizeKey:n,colorKey:l,labelKey:c,label:p,legendItemName:d}=o;if(t==null||i==null)return;const u=t.resolveColumnById(this,"idValue",i),f=t.resolveColumnById(this,"featureValue",i),y=c!=null?t.resolveColumnById(this,"labelValue",i):void 0,g=n!=null?t.resolveColumnById(this,"sizeValue",i):void 0,m=l!=null?t.resolveColumnById(this,"colorValue",i):void 0,S=o.maxStrokeWidth??o.strokeWidth;s.range=[Math.min(o.strokeWidth,S),S];const x=Ak.getMeasurer({font:p}),b=new Map;i.dataSources.get(this.id)?.forEach((I,M)=>{const P=u[M],R=f[M]?.geometry??void 0,w=R!=null&&a!=null?ei(R,a):void 0;P!=null&&w!=null&&b.set(P,w)});const v=[],k=[],L=[];(i.dataSources.get(this.id)??[]).forEach((I,M)=>{const P=u[M],R=m?.[M],w=g?.[M],N=y?.[M],C=b.get(P);C==null&&L.push(P);const T=this.getLabelDatum(I,N,C,x);T!=null&&k.push(T),v.push({series:this,itemId:r,datum:I,datumIndex:M,idValue:P,labelValue:N,colorValue:R,sizeValue:w,projectedGeometry:C,legendItemName:d})});const D=10;if(L.length>D){const I=L.length-D;L.length=D,L.push(`(+${I} more)`)}return L.length>0&&rh.warnOnce("some data items do not have matches in the provided topology",L),{itemId:e,nodeData:v,labelData:k}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,highlightDatumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible;let i=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:s}=this.properties,o=s!=null&&i?.datum==null&&s===i?.legendItemName;i!=null&&(i.series!==this&&!o||i.datum==null)&&(i=void 0);const a=this.contextNodeData?.nodeData??[];this.datumSelection=this.updateDatumSelection({nodeData:a,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:i!=null?[i]:[],datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>hh(t.idValue))}getItemBaseStyle(e,t){const{properties:i}=this,s=this.getHighlightStyle(e,t?.datumIndex);return{stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset,opacity:s?.opacity??1}}getItemStyleOverrides(e,t,i,s,o,a){const{id:r,properties:n,colorScale:l,sizeScale:c}=this,{colorRange:p,itemStyler:d}=n;let u;if(!a&&i!=null&&(u??(u={}),u.stroke=this.isColorScaleValid()?l.convert(i):p?.[0]??n.stroke),s!=null&&(u??(u={}),u.strokeWidth=c.convert(s,{clamp:!0})),d!=null){const f=this.cachedDatumCallback(hh(e,a?"highlight":"node"),()=>this.callWithContext(d,{seriesId:r,datum:t,highlighted:a,...o,...u}));u??(u={}),Object.assign(u,f)}return u}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e;t.each((s,o)=>{const{datum:a,datumIndex:r,colorValue:n,sizeValue:l,projectedGeometry:c}=o;if(c==null){s.visible=!1,s.projectedGeometry=void 0;return}const p=this.getItemBaseStyle(i,o),d=this.getItemStyleOverrides(String(r),a,n,l,p,i);s.visible=!0,s.projectedGeometry=c,s.stroke=d?.stroke??p.stroke,s.strokeWidth=d?.strokeWidth??p.strokeWidth,s.strokeOpacity=d?.strokeOpacity??p.strokeOpacity,s.lineDash=d?.lineDash??p.lineDash,s.lineDashOffset=d?.lineDashOffset??p.lineDashOffset})}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=ah.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:r}=this.properties.label;t.each((n,{x:l,y:c,width:p,height:d,text:u},f)=>{n.visible=!0,n.x=l+p/2,n.y=c+d/2,n.text=u,n.fill=i,n.fontStyle=s,n.fontWeight=o,n.fontSize=a,n.fontFamily=r,n.textAlign="center",n.textBaseline="middle",n.fillOpacity=this.getHighlightStyle(!1,f).opacity??1})}resetAnimation(){}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.datumSelection.each((o,a)=>{const r=o.distanceSquared(e,t);r<i&&(i=r,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,s=i!=null?Wo(i):void 0,o=s!=null?Eo(s)?.point:void 0,a=o!=null?{x:o[0],y:o[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:a},a}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:s}=this,{strokeWidth:o,strokeOpacity:a,lineDash:r}=s;let{stroke:n}=s;if(e!=null&&this.isColorScaleValid()){const c=t.resolveColumnById(this,"colorValue",i)[e];n=this.colorScale.convert(c)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,lineDash:[0],lineDashOffset:0,enabled:!1},line:{stroke:n,strokeWidth:o,strokeOpacity:a,lineDash:r}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:s,visible:o}=this,{title:a,legendItemName:r,idKey:n,idName:l,colorKey:c,colorRange:p,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&p!=null){const u=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:s,series:this.getFormatterContext("color"),colorRange:p,colorDomain:u}]}else return e==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:o,label:{text:r??a??l??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o,ctx:{formatManager:a}}=this,{idKey:r,idName:n,colorKey:l,colorName:c,sizeKey:p,sizeName:d,labelKey:u,labelName:f,title:y,legendItemName:g,tooltip:m}=o;if(!i||!s)return;const S=s.dataSources.get(this.id)?.[e],x=i.resolveColumnById(this,"idValue",s),b=p!=null?i.resolveColumnById(this,"sizeValue",s)[e]:void 0,v=l!=null?i.resolveColumnById(this,"colorValue",s)[e]:void 0,k=[];if(this.isLabelEnabled()&&u!=null&&u!==r){const A=i.resolveColumnById(this,"labelValue",s)[e],D=a.format(this.callWithContext.bind(this),{type:"category",value:A,datum:S,seriesId:t,legendItemName:g,key:u,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});k.push({label:f,fallbackLabel:u,value:D??A})}if(b!=null&&p!=null){const A=i.getDomain(this,"sizeValue","value",s),D=a.format(this.callWithContext.bind(this),{type:"number",value:b,datum:S,seriesId:t,legendItemName:g,key:p,source:"tooltip",property:"size",domain:A,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});k.push({label:d,fallbackLabel:p,value:D??String(b)})}if(v!=null&&l!=null){const A=i.getDomain(this,"colorValue","value",s),D=a.format(this.callWithContext.bind(this),{type:"number",value:v,datum:S,seriesId:t,legendItemName:g,key:l,source:"tooltip",property:"color",domain:A,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});k.push({label:c,fallbackLabel:l,value:D??String(v)})}const L=this.getItemBaseStyle(!1);return Object.assign(L,this.getItemStyleOverrides(String(e),e,v,b,L,!1)),this.formatTooltipWithContext(m,{heading:x[e],title:y??g,symbol:this.legendItemSymbol(e),data:k},{seriesId:t,datum:S,title:y,idKey:r,idName:n,colorKey:l,colorName:c,sizeKey:p,sizeName:d,labelKey:u,labelName:f,...L})}computeFocusBounds(e){const t=ch(this,e);return t?Rk.toCanvas(this.contentGroup,t.getBBox()):void 0}};Vo.className="MapLineSeries",Vo.type="map-line";import{_ModuleSupport as Ok}from"ag-charts-community";import{and as Ck,arrayLength as Tk,arrayOf as wk,color as _k,constant as Fk,geoJson as Ek,required as uh,string as Rt,undocumented as Bk}from"ag-charts-core";var{commonSeriesOptionsDefs:Gk,mapLineSeriesThemeableOptionsDef:Wk,without:Vk}=Ok,fh={...Vk(Gk,["highlightStyle","highlight"]),...Wk,type:uh(Fk("map-line")),idKey:uh(Rt),sizeKey:Rt,colorKey:Rt,labelKey:Rt,idName:Rt,sizeName:Rt,colorName:Rt,labelName:Rt,topology:Ek,topologyIdKey:Rt,legendItemName:Rt,title:Rt};fh.colorRange=Bk(Ck(wk(_k),Tk(1)));var bO={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:e=>new Vo(e),themeTemplate:{...vs,series:{stroke:pt(jr.SAFE_STROKE_FILL_OPERATION),colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},pt(jr.SAFE_RANGE2_OPERATION)]},strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:pt(jr.multiSeriesHighlightStyle(!1))},tooltip:{range:"exact"}}},gh={type:"series",name:"map-line",chartType:"topology",enterprise:!0,options:fh,create:e=>new Vo(e)};import"ag-charts-community";import{_ModuleSupport as Kk}from"ag-charts-community";import{Logger as zk}from"ag-charts-core";import{_ModuleSupport as $k}from"ag-charts-community";var{Property:vi,SeriesProperties:Hk,makeSeriesTooltip:Xk}=$k,ti=class extends Hk{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=Xk()}};h([vi],ti.prototype,"topology",2),h([vi],ti.prototype,"stroke",2),h([vi],ti.prototype,"strokeOpacity",2),h([vi],ti.prototype,"strokeWidth",2),h([vi],ti.prototype,"lineDash",2),h([vi],ti.prototype,"lineDashOffset",2),h([vi],ti.prototype,"tooltip",2);var{createDatumId:Yk,SeriesNodePickMode:qk,Group:Uk,Selection:jk,PointerEvents:Jk}=Kk,Ko=class extends ks{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[qk.EXACT_SHAPE_MATCH]}),this.properties=new ti,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Uk({name:"itemGroup"})),this.datumSelection=jk.select(this.itemGroup,()=>this.nodeFactory())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0):!1}nodeFactory(){const e=new Ui;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e.pointerEvents=Jk.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const s=i.geometry;return s==null?t:ji(s,t)},void 0),e==null&&zk.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i}=this;if(t==null)return;const s=[],o=[];return t.features.forEach((a,r)=>{const{geometry:n}=a,l=n!=null&&i!=null?ei(n,i):void 0;l!=null&&s.push({series:this,itemId:r,datum:a,datumIndex:0,index:r,projectedGeometry:l})}),{itemId:e,nodeData:s,labelData:o}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Yk(t.index))}updateDatumNodes(e){const{properties:t}=this,{datumSelection:i}=e,{stroke:s,strokeOpacity:o,lineDash:a,lineDashOffset:r}=t,n=this.getStrokeWidth(t.strokeWidth);i.each((l,c)=>{const{projectedGeometry:p}=c;if(p==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=p,l.stroke=s,l.strokeWidth=n,l.strokeOpacity=o,l.lineDash=a,l.lineDashOffset=r})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}computeFocusBounds(e){}};Ko.className="MapLineBackgroundSeries",Ko.type="map-line-background";import{_ModuleSupport as Zk}from"ag-charts-community";import{constant as Qk,geoJson as e0,required as t0}from"ag-charts-core";var{mapLineBackgroundSeriesThemeableOptionsDef:i0}=Zk,s0={...i0,type:t0(Qk("map-line-background")),topology:e0},NO={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:e=>new Ko(e),themeTemplate:{...vs,series:{stroke:{$path:["/1",{$mapPalette:"stroke"},{$mapPalette:"secondHierarchyColors"}]},strokeWidth:1,lineDash:[0],lineDashOffset:0}}},yh={type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,options:s0,create:e=>new Ko(e)};import{_ModuleSupport as zo}from"ag-charts-community";import{ValidationError as o0,validate as a0}from"ag-charts-core";import{_ModuleSupport as mh}from"ag-charts-community";import{Logger as r0}from"ag-charts-core";var n0=void 0,l0=void 0;l0=n0;var c0=void 0,p0=void 0;p0=c0;var h0=void 0,d0=void 0;d0=h0;var u0=void 0,f0=void 0;f0=u0;import{insertListItemsSorted as g0}from"ag-charts-core";function Sh(e,t,i){const s=Di(e[0],void 0);if(s==null)return;const o=(s.lon0+s.lon1)/2,a=(s.lat0+s.lat1)/2,r=Math.abs(s.lon1-s.lon0),n=Math.abs(s.lat1-s.lat0),l=hk(e[0]),[c,p]=l,d=-Bo(e,c,p);let u;const f=(k,L)=>{const D=Math.max(L-d,0);return k-.5*D},y=(k,L,A)=>{const{distance:D,maxDistance:I}=i(e,k,L,A),M=Math.hypot(c-k,p-L),P=Math.min(Math.max(c,k-A/2),k+A/2),R=Math.min(Math.max(p,L-A/2),L+A/2),w=Math.hypot(c-P,p-R),N=f(D,M),C=f(I,w);return{distance:D,maxDistance:I,value:N,maxValue:C,x:k,y:L,stride:A}},g=(k,L,A,D)=>{const I=y(L,A,D);I.maxDistance>=0&&k.push(I)},m=Math.min(r,n)/2;let S={value:y(o,a,m),next:null};for(;S!=null;){const k=S.value,{distance:L,value:A,maxValue:D,x:I,y:M,stride:P}=k;if(S=S.next,L>0&&(u==null||A>u.value)&&(u=k),u!=null&&D-u.value<=t)continue;const R=P/2,w=[];g(w,I-R,M-R,R),g(w,I+R,M-R,R),g(w,I-R,M+R,R),g(w,I+R,M+R,R),w.sort(xh),S=g0(S,w,xh)}if(u==null)return;const{distance:x,x:b,y:v}=u;return{x:b,y:v,distance:x}}var xh=(e,t)=>t.maxValue-e.maxValue;function on(e,t){const i=Sh(e,t,(a,r,n,l)=>{const c=-Bo(a,r,n),p=c+l*Math.SQRT2;return{distance:c,maxDistance:p}});if(i==null)return;const{x:s,y:o}=i;return[s,o]}function bh(e,t){let i;switch(e.type){case"GeometryCollection":return e.geometries.flatMap(s=>bh(s,t));case"MultiPoint":return e.coordinates;case"Point":return[e.coordinates];case"MultiPolygon":{const s=Go(e);i=s!=null?on(s,t):void 0;break}case"Polygon":{const s=e.coordinates;i=s!=null?on(s,t):void 0;break}case"MultiLineString":{const s=Wo(e);i=s!=null?Eo(s)?.point:void 0;break}case"LineString":{const s=e.coordinates;i=Eo(s)?.point;break}}return i!=null?[i]:[]}import{_ModuleSupport as y0}from"ag-charts-community";var{BBox:m0}=y0;function Dh(e){if(!e)return;const{range:t}=e,i=t[0][0],s=t[0][1],o=t[1][0]-i,a=t[1][1]-s,r=new m0(i,s,o,a);return{series:r,axis:r}}import{_ModuleSupport as S0}from"ag-charts-community";var{FillGradientDefaults:x0,FillPatternDefaults:b0,FillImageDefaults:D0,Property:ae,SeriesProperties:v0,makeSeriesTooltip:k0,Label:M0}=S0,vh=class extends M0{constructor(){super(...arguments),this.placement="bottom"}};h([ae],vh.prototype,"placement",2);var re=class extends v0{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillGradientDefaults=new x0,this.fillPatternDefaults=new b0,this.fillImageDefaults=new D0,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new vh,this.tooltip=k0()}};h([ae],re.prototype,"topology",2),h([ae],re.prototype,"title",2),h([ae],re.prototype,"legendItemName",2),h([ae],re.prototype,"idKey",2),h([ae],re.prototype,"topologyIdKey",2),h([ae],re.prototype,"idName",2),h([ae],re.prototype,"latitudeKey",2),h([ae],re.prototype,"latitudeName",2),h([ae],re.prototype,"longitudeKey",2),h([ae],re.prototype,"longitudeName",2),h([ae],re.prototype,"labelKey",2),h([ae],re.prototype,"labelName",2),h([ae],re.prototype,"sizeKey",2),h([ae],re.prototype,"sizeName",2),h([ae],re.prototype,"colorKey",2),h([ae],re.prototype,"colorName",2),h([ae],re.prototype,"colorRange",2),h([ae],re.prototype,"shape",2),h([ae],re.prototype,"size",2),h([ae],re.prototype,"maxSize",2),h([ae],re.prototype,"sizeDomain",2),h([ae],re.prototype,"fill",2),h([ae],re.prototype,"fillGradientDefaults",2),h([ae],re.prototype,"fillPatternDefaults",2),h([ae],re.prototype,"fillImageDefaults",2),h([ae],re.prototype,"fillOpacity",2),h([ae],re.prototype,"stroke",2),h([ae],re.prototype,"strokeWidth",2),h([ae],re.prototype,"strokeOpacity",2),h([ae],re.prototype,"lineDash",2),h([ae],re.prototype,"lineDashOffset",2),h([ae],re.prototype,"itemStyler",2),h([ae],re.prototype,"label",2),h([ae],re.prototype,"tooltip",2);var{CachedTextMeasurerPool:I0,fromToMotion:A0,StateMachine:N0,getMissCount:P0,createDatumId:kh,SeriesNodePickMode:Mh,valueProperty:ki,computeMarkerFocusBounds:L0,ColorScale:R0,LinearScale:O0,Group:C0,Selection:an,Text:T0,Marker:rn,applyShapeStyle:w0,getShapeStyle:Ih,LonLatBBox:_0}=mh,$o=class extends ks{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[Mh.EXACT_SHAPE_MATCH,Mh.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new re,this._chartTopology=void 0,this.colorScale=new R0,this.sizeScale=new O0,this.markerGroup=this.contentGroup.appendChild(new C0({name:"markerGroup"})),this.labelSelection=an.select(this.labelGroup,T0,!1),this.markerSelection=an.select(this.markerGroup,rn,!1),this.highlightMarkerSelection=an.select(this.highlightNode,rn),this.animationState=new N0("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const e=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||e)}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[3,e],this.highlightGroup.zIndex=[4,e],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:s,colorScale:o}=this,{topologyIdKey:a,idKey:r,latitudeKey:n,longitudeKey:l,sizeKey:c,colorKey:p,labelKey:d,sizeDomain:u,colorRange:f}=this.properties,y=new Map;i?.features.forEach(D=>{const I=D.properties?.[a];I!=null&&y.set(I,D)});const g=this.sizeScale.type,m=this.colorScale.type,S=this.scale?.type,x=n!=null&&l!=null,{dataModel:b,processedData:v}=await this.requestDataModel(e,t,{props:[...r!=null?[ki(r,S,{id:"idValue",includeProperty:!1}),ki(r,S,{id:"featureValue",includeProperty:!1,processor:()=>D=>y.get(D)})]:[],...x?[ki(n,S,{id:"latValue"}),ki(l,S,{id:"lonValue"})]:[],...d?[ki(d,"band",{id:"labelValue"})]:[],...c?[ki(c,g,{id:"sizeValue"})]:[],...p?[ki(p,m,{id:"colorValue"})]:[]]}),k=r!=null?b.resolveColumnById(this,"featureValue",v):void 0,L=x?b.resolveColumnById(this,"latValue",v):void 0,A=x?b.resolveColumnById(this,"lonValue",v):void 0;if(this.topologyBounds=v.dataSources.get(this.id)?.reduce((D,I,M)=>{const R=k?.[M]?.geometry;if(R!=null&&(D=ji(R,D)),L!=null&&A!=null){const w=A[M],N=L[M];D=_0.extend(D,w,N,w,N)}return D},void 0),c!=null){const D=b.resolveProcessedDataIndexById(this,"sizeValue"),I=v.domain.values[D]??[];s.domain=u??I}if(f!=null&&this.isColorScaleValid()){const D=b.resolveProcessedDataIndexById(this,"colorValue");o.domain=v.domain.values[D],o.range=f,o.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=P0(this,i.defs.values[s].missing);return!(o===0||o===a)}getLabelDatum(e,t,i,s,o,a){if(t==null)return;const{idKey:r,idName:n,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:d,sizeKey:u,sizeName:f,colorKey:y,colorName:g,labelKey:m,labelName:S,label:x,shape:b}=this.properties;if(m==null)return;const{placement:v}=x,k=this.getLabelText(t,e,m,"label",[],x,{value:t,datum:e,idKey:r,idName:n,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:d,sizeKey:u,sizeName:f,colorKey:y,colorName:g,labelKey:m,labelName:S});if(k==null)return;const{width:L,height:A}=a.measureText(String(k)),D=rn.anchor(b);return{point:{x:i,y:s,size:o},label:{width:L,height:A,text:k},anchor:D,placement:v}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:s,properties:o,scale:a}=this,{idKey:r,latitudeKey:n,longitudeKey:l,sizeKey:c,colorKey:p,labelKey:d,label:u,legendItemName:f}=o;if(t==null||i==null||a==null)return;const y=n!=null&&l!=null,g=r!=null?t.resolveColumnById(this,"idValue",i):void 0,m=r!=null?t.resolveColumnById(this,"featureValue",i):void 0,S=y?t.resolveColumnById(this,"latValue",i):void 0,x=y?t.resolveColumnById(this,"lonValue",i):void 0,b=d!=null?t.resolveColumnById(this,"labelValue",i):void 0,v=c!=null?t.resolveColumnById(this,"sizeValue",i):void 0,k=p!=null?t.resolveColumnById(this,"colorValue",i):void 0,L=o.maxSize??o.size;s.range=[Math.min(o.size,L),L];const A=I0.getMeasurer({font:u});let D;g!=null&&m!=null&&(D=new Map,i.dataSources.get(this.id)?.forEach((N,C)=>{const T=g[C],O=m[C]?.geometry??void 0,_=O!=null&&a!=null?ei(O,a):void 0;T!=null&&_!=null&&D.set(T,_)}));const I=[],M=[],P=[];(i.dataSources.get(this.id)??[]).forEach((N,C)=>{const T=g?.[C],O=x?.[C],_=S?.[C],F=k?.[C],E=v?.[C],B=b?.[C],G=E!=null?s.convert(E,{clamp:!0}):o.size,W=T!=null?D?.get(T):void 0;if(T!=null&&ei==null&&P.push(T),O!=null&&_!=null){const[V,K]=a.convert([O,_]),$=this.getLabelDatum(N,B,V,K,G,A);$&&M.push($),I.push({series:this,itemId:n,datum:N,datumIndex:C,index:-1,idValue:T,lonValue:O,latValue:_,labelValue:B,sizeValue:E,colorValue:F,point:{x:V,y:K,size:G},midPoint:{x:V,y:K},legendItemName:f})}else W!=null&&bh(W,1).forEach(([V,K],$)=>{const X=this.getLabelDatum(N,B,V,K,G,A);X&&M.push(X),I.push({series:this,itemId:n,datum:N,datumIndex:C,index:$,idValue:T,lonValue:O,latValue:_,labelValue:B,sizeValue:E,colorValue:F,point:{x:V,y:K,size:G},midPoint:{x:V,y:K},legendItemName:f})})});const w=10;if(P.length>w){const N=P.length-w;P.length=w,P.push(`(+${N} more)`)}return P.length>0&&r0.warnOnce("some data items do not have matches in the provided topology",P),{itemId:e,nodeData:I,labelData:M}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update({seriesRect:e}){const t=this.checkResize(e),i=this.checkScaleChange(),{markerSelection:s,highlightMarkerSelection:o}=this;this.updateSelections(),this.contentGroup.visible=this.visible;let a=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:r}=this.properties,n=r!=null&&a?.datum==null&&r===a?.legendItemName;a!=null&&(a.series!==this&&!n||a.datum==null)&&(a=void 0);const l=this.contextNodeData?.nodeData??[];this.markerSelection=this.updateMarkerSelection({markerData:l,markerSelection:s}),this.updateMarkerNodes({markerSelection:s,isHighlight:!1,highlightedDatum:a}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:a!=null?[a]:[],markerSelection:o}),this.updateMarkerNodes({markerSelection:o,isHighlight:!0,highlightedDatum:a}),(i||t)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=mh.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:r}=this.properties.label;t.each((n,{x:l,y:c,width:p,height:d,text:u},f)=>{n.visible=!0,n.x=l+p/2,n.y=c+d/2,n.text=u,n.fill=i,n.fontStyle=s,n.fontWeight=o,n.fontSize=a,n.fontFamily=r,n.textAlign="center",n.textBaseline="middle",n.fillOpacity=this.getHighlightStyle(!1,f).opacity??1})}updateMarkerSelection(e){const{markerData:t,markerSelection:i}=e;return i.update(t,void 0,s=>kh([s.index,s.idValue,s.lonValue,s.latValue]))}getMarkerItemBaseStyle(e,t){const{properties:i}=this,s=this.getHighlightStyle(e,t?.datumIndex);return Ih({shape:i.shape,size:i.size,fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset,opacity:s.opacity??1},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getMarkerItemStyleOverrides(e,t,i,s,o,a){const{id:r,properties:n,colorScale:l,sizeScale:c}=this,{colorRange:p,itemStyler:d}=n;let u;if(u??(u={}),!a&&i!=null&&(u.fill=this.isColorScaleValid()?l.convert(i):p?.[0]??n.fill),s!=null&&(u.size=c.convert(s,{clamp:!0})),d!=null){const f=this.cachedDatumCallback(kh(e,a?"highlight":"node"),()=>this.callWithContext(d,{seriesId:r,datum:t,highlighted:a,...o,...u}));u??(u={}),Object.assign(u,f)}return u}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i,highlightedDatum:s}=e,o=Dh(this.scale);t.each((a,r)=>{const{datumIndex:n,datum:l,point:c,colorValue:p,sizeValue:d}=r,u=this.getMarkerItemBaseStyle(i,r),f=this.getMarkerItemStyleOverrides(String(n),l,p,d,u,i);a.shape=f?.shape??u.shape,a.size=f?.size??u.size,w0(a,u,f,o),a.x=c.x,a.y=c.y,a.scalingCenterX=c.x,a.scalingCenterY=c.y,a.zIndex=!i&&s!=null&&l===s.datum?1:0})}isProcessedDataAnimatable(){return!0}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:e}=this.ctx,t=bk();A0(this.id,"markers",e,[this.markerSelection,this.highlightMarkerSelection],t)}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum(e){const{x:t,y:i}=e;let s=1/0,o;return this.contextNodeData?.nodeData.forEach(a=>{const{x:r,y:n,size:l}=a.point,c=Math.max(Math.abs(r-t)-l,0),p=Math.max(Math.abs(n-i)-l,0),d=c*c+p*p;d<s&&(s=d,o=a)}),o!=null?{datum:o,distance:Math.sqrt(s)}:void 0}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:s}=this,{shape:o,fillOpacity:a,stroke:r,strokeWidth:n,strokeOpacity:l,lineDash:c,lineDashOffset:p}=s;let{fill:d}=s;if(e!=null&&this.isColorScaleValid()){const f=t.resolveColumnById(this,"colorValue",i)[e];d=this.colorScale.convert(f)}return{marker:Ih({shape:o,fill:d,fillOpacity:a,stroke:r,strokeWidth:n,strokeOpacity:l,lineDash:c,lineDashOffset:p},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:s,visible:o}=this,{title:a,legendItemName:r,idName:n,idKey:l,colorKey:c,colorRange:p,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&p!=null){const u=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:s,series:this.getFormatterContext("color"),colorRange:p,colorDomain:u}]}else return e==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:o,label:{text:r??a??n??l??s},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o,ctx:{formatManager:a}}=this,{idKey:r,idName:n,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:d,colorKey:u,colorName:f,sizeKey:y,sizeName:g,labelKey:m,labelName:S,title:x,legendItemName:b,tooltip:v}=o;if(!i||!s)return;const k=s.dataSources.get(this.id)?.[e],L=y!=null?i.resolveColumnById(this,"sizeValue",s)[e]:void 0,A=u!=null?i.resolveColumnById(this,"colorValue",s)[e]:void 0,D=[];if(this.isLabelEnabled()&&m!=null&&m!==r){const P=i.resolveColumnById(this,"labelValue",s)[e],R=a.format(this.callWithContext.bind(this),{type:"category",value:P,datum:k,seriesId:t,legendItemName:b,key:m,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});D.push({label:S,fallbackLabel:m,value:R??P})}if(y!=null&&L!=null){const P=i.getDomain(this,"sizeValue","value",s),R=a.format(this.callWithContext.bind(this),{type:"number",value:L,datum:k,seriesId:t,legendItemName:b,key:y,source:"tooltip",property:"size",domain:P,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});D.push({label:g,fallbackLabel:y,value:R??String(L)})}if(u!=null&&A!=null){const P=i.getDomain(this,"colorValue","value",s),R=a.format(this.callWithContext.bind(this),{type:"number",value:A,datum:k,seriesId:t,legendItemName:b,key:u,source:"tooltip",property:"color",domain:P,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});D.push({label:f,fallbackLabel:u,value:R??String(A)})}let I;if(r!=null)I=i.resolveColumnById(this,"idValue",s)[e];else if(l!=null&&p!=null){const P=i.resolveColumnById(this,"latValue",s)[e],R=i.resolveColumnById(this,"lonValue",s)[e];I=`${Math.abs(P).toFixed(4)}\xB0 ${P>=0?"N":"S"}, ${Math.abs(R).toFixed(4)}\xB0 ${R>=0?"W":"E"}`}const M=this.getMarkerItemBaseStyle(!1);return Object.assign(M,this.getMarkerItemStyleOverrides(String(e),e,A,L,M,!1)),this.formatTooltipWithContext(v,{heading:I,title:x??b,symbol:this.legendItemSymbol(e),data:D},{seriesId:t,datum:k,title:x,idKey:r,idName:n,latitudeKey:l,latitudeName:c,longitudeKey:p,longitudeName:d,colorKey:u,colorName:f,sizeKey:y,sizeName:g,labelKey:m,labelName:S,...M})}getFormattedMarkerStyle(e){const{datumIndex:t,colorValue:i,sizeValue:s}=e,o=this.getMarkerItemBaseStyle(!1);return Object.assign(o,this.getMarkerItemStyleOverrides(String(t),t,i,s,o,!1)),{size:o.size}}computeFocusBounds(e){return L0(this,e)}};$o.className="MapMarkerSeries",$o.type="map-marker";import{_ModuleSupport as F0}from"ag-charts-community";import{constant as E0,geoJson as B0,required as G0,string as Qe}from"ag-charts-core";var{commonSeriesOptionsDefs:W0,mapMarkerSeriesThemeableOptionsDef:V0,without:K0}=F0,z0={...K0(W0,["highlightStyle","highlight"]),...V0,type:G0(E0("map-marker")),idKey:Qe,latitudeKey:Qe,longitudeKey:Qe,sizeKey:Qe,colorKey:Qe,labelKey:Qe,idName:Qe,latitudeName:Qe,longitudeName:Qe,sizeName:Qe,colorName:Qe,labelName:Qe,topology:B0,topologyIdKey:Qe,legendItemName:Qe,title:Qe},EO={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:e=>new $o(e),themeTemplate:{...vs,series:{shape:"circle",maxSize:30,fill:{$mapPalette:"fill"},stroke:{$mapPalette:"stroke"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},pt(zo.SAFE_RANGE2_OPERATION)]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$mapPalette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:pt(zo.FILL_PATTERN_DEFAULTS),fillImageDefaults:pt(zo.FILL_IMAGE_DEFAULTS),fillOpacity:.5,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:pt(zo.multiSeriesHighlightStyle())},tooltip:{range:"exact"}}},Ah={type:"series",name:"map-marker",chartType:"topology",enterprise:!0,options:z0,create:e=>new $o(e),validate(e,t,i){const s=a0(e,t,i),{cleared:o,invalid:a}=s;if(o?.idKey==null&&(o?.latitudeKey==null||o?.longitudeKey==null)){const r=l=>i?`${i}.${l}`:l,n=`Either \`${r("idKey")}\` or both \`${r("latitudeKey")}\` and \`${r("longitudeKey")}\` are required.`;a.push(new o0("required",n,null,i))}return s}};import{_ModuleSupport as Ho}from"ag-charts-community";import{_ModuleSupport as Nh}from"ag-charts-community";import{Logger as Ph}from"ag-charts-core";function $0(e,{aspectRatio:t,precision:i}){const s=Sh(e,i,(l,c,p,d)=>{const u=X0(l,c,p,t),f=u+2*d*t,y=u*Math.SQRT2,g=f*Math.SQRT2;return{distance:y,maxDistance:g}});if(s==null)return;const{x:o,y:a,distance:r}=s,n=r/Math.SQRT2;return{x:o,y:a,maxWidth:n}}function H0(e,t,i,s,o){const[a,r]=e,[n,l]=t,c=1/o,p=n-a,d=l-r,[u,f]=r<=l?e:t,[y,g]=a<=n?e:t,[m,S]=r<=l?t:e,[x,b]=a<=n?t:e;let v=1/0;if(p!==0){const M=d/p;for(let P=0;P<=1;P+=1){const R=P===0?c:-c,w=(M*a-r-R*i+s)/(M-R);if(w>=y&&w<=x){const N=Math.abs(i-w)*2;v=Math.min(v,N)}}}else for(let M=0;M<=1;M+=1){const R=(M===0?c:-c)*(a-i)+s;if(R>=f&&R<=S){const N=Math.abs(s-R)*2*o;v=Math.min(v,N)}}const k=o,L=Math.abs((u-i)/(f-s)),A=Math.abs((m-i)/(S-s));if(S<s&&A<k){const P=Math.abs(s-S)*2*o;v=Math.min(v,P)}else if(f>s&&L<k){const P=Math.abs(s-f)*2*o;v=Math.min(v,P)}const D=Math.abs((g-s)/(y-i)),I=Math.abs((b-s)/(x-i));if(x<i&&I<c){const M=Math.abs(i-x)*2;v=Math.min(v,M)}else if(y>i&&D<c){const M=Math.abs(i-y)*2;v=Math.min(v,M)}return v}function X0(e,t,i,s){let o=!1,a=1/0;for(const r of e){let n=r[r.length-1],[l,c]=n;for(const p of r){const[d,u]=p;u>i!=c>i&&t<(l-d)*(i-u)/(c-u)+d&&(o=!o);const f=H0(n,p,t,i,s);a=Math.min(a,f),n=p,l=d,c=u}}return(o?1:-1)*a}function Xo(e,t,i){i>=t&&(e.maxX=Math.min(e.maxX,i-t)),i<=t&&(e.minX=Math.max(e.minX,i-t))}function Y0(e,t,i,s,o,a){const r=o-a/2,n=o+a/2,[l,c]=t,[p,d]=i,u=p-l,f=d-c,[y,g]=l<=p?t:i,[m,S]=l<=p?i:t;if(u!==0){const x=f/u;for(let b=0;b<=1;b+=1){const k=((b===0?r:n)-c)/x+l;k>=y&&k<=m&&Xo(e,s,k)}}else Math.max(r,Math.min(c,d))<=Math.min(n,Math.max(c,d))&&Xo(e,s,l);return m<s&&S>=r&&S<=n?Xo(e,s,m):y>s&&g>=r&&g<=n&&Xo(e,s,y),e}function q0(e,t,i,s){const o={minX:-1/0,maxX:1/0};for(const n of e){let l=n[n.length-1];for(const c of n)Y0(o,l,c,t,i,s),l=c}const{minX:a,maxX:r}=o;return Number.isFinite(a)&&Number.isFinite(r)?{x:t+(a+r)/2,width:r-a}:{x:t,width:0}}import{_ModuleSupport as U0}from"ag-charts-community";var{Property:Se,SeriesProperties:j0,makeSeriesTooltip:J0,FillGradientDefaults:Z0,FillPatternDefaults:Q0,FillImageDefaults:eM}=U0,ge=class extends j0{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillGradientDefaults=new Z0,this.fillPatternDefaults=new Q0,this.fillImageDefaults=new eM,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new us,this.tooltip=J0()}};h([Se],ge.prototype,"topology",2),h([Se],ge.prototype,"title",2),h([Se],ge.prototype,"legendItemName",2),h([Se],ge.prototype,"idKey",2),h([Se],ge.prototype,"idName",2),h([Se],ge.prototype,"topologyIdKey",2),h([Se],ge.prototype,"labelKey",2),h([Se],ge.prototype,"labelName",2),h([Se],ge.prototype,"colorKey",2),h([Se],ge.prototype,"colorName",2),h([Se],ge.prototype,"colorRange",2),h([Se],ge.prototype,"fill",2),h([Se],ge.prototype,"fillGradientDefaults",2),h([Se],ge.prototype,"fillPatternDefaults",2),h([Se],ge.prototype,"fillImageDefaults",2),h([Se],ge.prototype,"fillOpacity",2),h([Se],ge.prototype,"stroke",2),h([Se],ge.prototype,"strokeOpacity",2),h([Se],ge.prototype,"strokeWidth",2),h([Se],ge.prototype,"lineDash",2),h([Se],ge.prototype,"lineDashOffset",2),h([Se],ge.prototype,"padding",2),h([Se],ge.prototype,"itemStyler",2),h([Se],ge.prototype,"label",2),h([Se],ge.prototype,"tooltip",2);var{getMissCount:tM,createDatumId:Lh,SeriesNodePickMode:Rh,valueProperty:Yo,CachedTextMeasurerPool:iM,TextUtils:Oh,ColorScale:sM,Group:Ch,Selection:nn,Text:oM,PointerEvents:aM,applyShapeStyle:rM,getShapeStyle:ln}=Nh,Th=Nh.MercatorScale.fixedScale(),qo=class extends ks{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{color:["colorKey"],label:["labelKey"]},propertyNames:{color:["colorName"],label:["labelName"]},pickModes:[Rh.EXACT_SHAPE_MATCH,Rh.NEAREST_NODE]}),this.properties=new ge,this._chartTopology=void 0,this.colorScale=new sM,this.itemGroup=this.contentGroup.appendChild(new Ch({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Ch({name:"itemLabelGroup"})),this.datumSelection=nn.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=nn.select(this.itemLabelGroup,oM),this.highlightDatumSelection=nn.select(this.highlightNode,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=aM.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0):!1}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new Ui;return e.renderMode=1,e.lineJoin="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,colorScale:s}=this,{topologyIdKey:o,idKey:a,colorKey:r,labelKey:n,colorRange:l}=this.properties,c=new Map;i?.features.forEach(g=>{const m=g.properties?.[o];m==null||!Qr(g.geometry,1)||c.set(m,g)});const p=this.colorScale.type,d=this.scale?.type,{dataModel:u,processedData:f}=await this.requestDataModel(e,t,{props:[Yo(a,d,{id:"idValue",includeProperty:!1}),Yo(a,d,{id:"featureValue",includeProperty:!1,processor:()=>g=>c.get(g)}),...n?[Yo(n,"band",{id:"labelValue"})]:[],...r?[Yo(r,p,{id:"colorValue"})]:[]]}),y=u.resolveColumnById(this,"featureValue",f);if(this.topologyBounds=y.reduce((g,m)=>{const S=m?.geometry;return S==null?g:ji(S,g)},void 0),l!=null&&this.isColorScaleValid()){const g=u.resolveProcessedDataIndexById(this,"colorValue");s.domain=f.domain.values[g],s.range=l,s.update()}i==null&&Ph.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=tM(this,i.defs.values[s].missing);return!(o===0||o===a)}getLabelLayout(e,t,i,s,o){if(t==null||s==null)return;const{idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:p,padding:d,label:u}=this.properties;if(c==null)return;const f=this.getLabelText(t,e,c,"label",[],u,{value:t,datum:e,idKey:a,idName:r,colorKey:n,colorName:l,labelKey:c,labelName:p});if(f==null)return;const y=i.measureText(String(f)),g=f.split(`
`).length,m=(y.width+2*d)/(g*Oh.getLineHeight(u.fontSize)+2*d);if(o?.geometry===s&&o?.labelText===f&&o?.aspectRatio===m)return o;const S=ei(s,Th),x=Go(S);if(x==null)return;const b=$0(x,{aspectRatio:m,precision:.001});if(b==null)return;const{x:v,y:k,maxWidth:L}=b;return{geometry:s,labelText:f,aspectRatio:m,x:v,y:k,maxWidth:L,fixedPolygon:x}}getLabelDatum(e,t){const{scale:i}=this;if(i==null)return;const{padding:s,label:o}=this.properties,{labelText:a,aspectRatio:r,x:n,y:l,maxWidth:c,fixedPolygon:p}=e,d={width:Math.ceil(c*t),height:Math.ceil(c*t/r),meta:n},u=hs(a,o,{padding:s},(v,k)=>{if(!k)return d;const L=q0(p,n,l,v/t);return{width:L.width*t,height:v,meta:L.x}});if(u==null)return;const[{text:f,fontSize:y,lineHeight:g,width:m},S]=u;if(f===Oh.EllipsisChar)return;const x=m<d.width?n:S,b=this.scale.convert(Th.invert([x,l]));return{x:b[0],y:b[1],text:f,fontSize:y,lineHeight:g}}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:s,scale:o,previousLabelLayouts:a}=this,{idKey:r,colorKey:n,labelKey:l,label:c,legendItemName:p}=s;if(t==null||i==null)return;const d=o!=null?(o.range[1][0]-o.range[0][0])/o.bounds.width:NaN,u=t.resolveColumnById(this,"idValue",i),f=t.resolveColumnById(this,"featureValue",i),y=l!=null?t.resolveColumnById(this,"labelValue",i):void 0,g=n!=null?t.resolveColumnById(this,"colorValue",i):void 0,m=iM.getMeasurer({font:c}),S=new Map;this.previousLabelLayouts=S;const x=[],b=[],v=[];(i.dataSources.get(this.id)??[]).forEach((A,D)=>{const I=u[D],M=g?.[D],P=y?.[D],R=f[D]?.geometry??void 0;R==null&&v.push(I);const w=this.getLabelLayout(A,P,m,R,a?.get(I));w!=null&&S.set(I,w);const N=w!=null&&o!=null?this.getLabelDatum(w,d):void 0;N!=null&&b.push(N);const C=R!=null&&o!=null?ei(R,o):void 0;x.push({series:this,itemId:r,datum:A,datumIndex:D,idValue:I,colorValue:M,labelValue:P,projectedGeometry:C,legendItemName:p})});const L=10;if(v.length>L){const A=v.length-L;v.length=L,v.push(`(+${A} more)`)}return v.length>0&&Ph.warnOnce("some data items do not have matches in the provided topology",v),{itemId:e,nodeData:x,labelData:b}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,labelSelection:t,highlightDatumSelection:i}=this;this.updateSelections(),this.contentGroup.visible=this.visible;let s=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:o}=this.properties,a=o!=null&&s?.datum==null&&o===s?.legendItemName;s!=null&&(s.series!==this&&!a||s.datum==null)&&(s=void 0);const r=this.contextNodeData?.nodeData??[],n=this.contextNodeData?.labelData??[];this.datumSelection=this.updateDatumSelection({nodeData:r,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:n,labelSelection:t}),this.updateLabelNodes({labelSelection:t}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:s!=null?[s]:[],datumSelection:i}),this.updateDatumNodes({datumSelection:i,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Lh(t.idValue))}getItemBaseStyle(e,t){const{properties:i}=this,s=this.getHighlightStyle(e,t?.datumIndex);return ln({fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset,opacity:s?.opacity??1},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r,colorScale:n}=this,{colorRange:l,itemStyler:c}=r;let p;if(!o&&i!=null&&(p??(p={}),p.fill=this.isColorScaleValid()?n.convert(i):l?.[0]??r.fill),c!=null){const d=this.cachedDatumCallback(Lh(e,o?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:t,highlighted:o,...s,...p}));p??(p={}),Object.assign(p,d)}return ln(p,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=Dh(this.scale);t.each((o,a)=>{const{datum:r,datumIndex:n,colorValue:l,projectedGeometry:c}=a;if(c==null){o.visible=!1,o.projectedGeometry=void 0;return}const p=this.getItemBaseStyle(i,a),d=this.getItemStyleOverrides(String(n),r,l,p,i);o.visible=!0,o.projectedGeometry=c,rM(o,p,d,s)})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontFamily:a}=this.properties.label;t.each((r,{x:n,y:l,text:c,fontSize:p,lineHeight:d},u)=>{r.visible=!0,r.x=n,r.y=l,r.text=c,r.fill=i,r.fontStyle=s,r.fontWeight=o,r.fontSize=p,r.lineHeight=d,r.fontFamily=a,r.textAlign="center",r.textBaseline="middle",r.fillOpacity=this.getHighlightStyle(!1,u).opacity??1})}resetAnimation(){}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.datumSelection.each((o,a)=>{const r=o.distanceSquared(e,t);r<i&&(i=r,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,s=i!=null?Go(i):void 0,o=s!=null?on(s,2):void 0,a=o!=null?{x:o[0],y:o[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:a},a}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:s}=this,{fillOpacity:o,stroke:a,strokeWidth:r,strokeOpacity:n,lineDash:l,lineDashOffset:c}=s;let{fill:p}=s;if(e!=null&&this.isColorScaleValid()){const u=t.resolveColumnById(this,"colorValue",i)[e];p=this.colorScale.convert(u)}return{marker:ln({fill:p,fillOpacity:o,stroke:a,strokeWidth:r,strokeOpacity:n,lineDash:l,lineDashOffset:c},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:s,visible:o}=this,{title:a,legendItemName:r,idKey:n,idName:l,colorKey:c,colorRange:p,showInLegend:d}=this.properties;if(e==="gradient"&&c!=null&&p!=null){const u=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:s,series:this.getFormatterContext("color"),colorRange:p,colorDomain:u}]}else return e==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:o,label:{text:r??a??l??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!d}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o,ctx:{formatManager:a}}=this,{idKey:r,idName:n,colorKey:l,colorName:c,labelKey:p,labelName:d,legendItemName:u,title:f,tooltip:y}=o;if(!i||!s)return;const g=s.dataSources.get(this.id)?.[e],m=i.resolveColumnById(this,"idValue",s)[e],S=l!=null?i.resolveColumnById(this,"colorValue",s)[e]:void 0,x=[];if(this.isLabelEnabled()&&p!=null&&p!==r){const v=i.resolveColumnById(this,"labelValue",s)[e],k=a.format(this.callWithContext.bind(this),{type:"category",value:v,datum:g,seriesId:t,legendItemName:u,key:p,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});x.push({label:d,fallbackLabel:p,value:k??v})}if(S!=null){const v=i.getDomain(this,"colorValue","value",s),k=a.format(this.callWithContext.bind(this),{type:"number",value:S,datum:g,seriesId:t,legendItemName:u,key:l,source:"tooltip",property:"color",domain:v,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});x.push({label:c,fallbackLabel:l,value:k??String(S)})}const b=this.getItemBaseStyle(!1);return Object.assign(b,this.getItemStyleOverrides(String(e),e,S,b,!1)),this.formatTooltipWithContext(y,{heading:m,title:f??u,symbol:this.legendItemSymbol(e),data:x},{seriesId:t,datum:g,title:f,idKey:r,idName:n,colorKey:l,colorName:c,labelKey:p,labelName:d,...b})}computeFocusBounds(e){return ch(this,e)}};qo.className="MapShapeSeries",qo.type="map-shape";import{_ModuleSupport as nM}from"ag-charts-community";import{constant as lM,geoJson as cM,required as wh,string as Xt}from"ag-charts-core";var{commonSeriesOptionsDefs:pM,mapShapeSeriesThemeableOptionsDef:hM,without:dM}=nM,uM={...dM(pM,["highlightStyle","highlight"]),...hM,type:wh(lM("map-shape")),idKey:wh(Xt),colorKey:Xt,labelKey:Xt,idName:Xt,colorName:Xt,labelName:Xt,topology:cM,topologyIdKey:Xt,legendItemName:Xt,title:Xt},$O={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:e=>new qo(e),themeTemplate:{...vs,series:{fill:{$mapPalette:"fill"},stroke:{$ref:"chartBackgroundColor"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},pt(Ho.SAFE_RANGE2_OPERATION)]},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$mapPalette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:pt(Ho.FILL_PATTERN_DEFAULTS),fillImageDefaults:pt(Ho.FILL_IMAGE_DEFAULTS),fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:{$ref:"chartBackgroundColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:"bold",overflowStrategy:"hide"},highlight:pt(Ho.multiSeriesHighlightStyle())},tooltip:{range:"exact"}}},_h={type:"series",name:"map-shape",chartType:"topology",enterprise:!0,options:uM,create:e=>new qo(e)};import{_ModuleSupport as Fh}from"ag-charts-community";import{_ModuleSupport as fM}from"ag-charts-community";import{Logger as gM}from"ag-charts-core";import{_ModuleSupport as yM}from"ag-charts-community";var{FillGradientDefaults:mM,FillPatternDefaults:SM,FillImageDefaults:xM,Property:xt,SeriesProperties:bM,makeSeriesTooltip:DM}=yM,ht=class extends bM{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillGradientDefaults=new mM,this.fillPatternDefaults=new SM,this.fillImageDefaults=new xM,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=DM()}};h([xt],ht.prototype,"topology",2),h([xt],ht.prototype,"fill",2),h([xt],ht.prototype,"fillGradientDefaults",2),h([xt],ht.prototype,"fillPatternDefaults",2),h([xt],ht.prototype,"fillImageDefaults",2),h([xt],ht.prototype,"fillOpacity",2),h([xt],ht.prototype,"stroke",2),h([xt],ht.prototype,"strokeOpacity",2),h([xt],ht.prototype,"strokeWidth",2),h([xt],ht.prototype,"lineDash",2),h([xt],ht.prototype,"lineDashOffset",2),h([xt],ht.prototype,"tooltip",2);var{createDatumId:vM,SeriesNodePickMode:kM,Selection:MM,Group:IM,PointerEvents:AM,getShapeStyle:NM}=fM,Uo=class extends ks{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[kM.EXACT_SHAPE_MATCH]}),this.properties=new ht,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new IM({name:"itemGroup"})),this.datumSelection=MM.select(this.itemGroup,()=>this.nodeFactory())}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0):!1}nodeFactory(){const e=new Ui;return e.renderMode=1,e.lineJoin="round",e.pointerEvents=AM.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const s=i.geometry;return s==null?t:ji(s,t)},void 0),e==null&&gM.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i}=this;if(t==null)return;const s=[],o=[];return t.features.forEach((a,r)=>{const{geometry:n}=a,l=n!=null&&i!=null?ei(n,i):void 0;l!=null&&s.push({series:this,itemId:r,datum:a,datumIndex:0,index:r,projectedGeometry:l})}),{itemId:e,nodeData:s,labelData:o}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>vM(t.index))}updateDatumNodes(e){const{properties:t}=this,{datumSelection:i}=e,{fill:s,fillOpacity:o,stroke:a,strokeOpacity:r,lineDash:n,lineDashOffset:l}=t,c=this.getStrokeWidth(t.strokeWidth);i.each((p,d)=>{const{projectedGeometry:u}=d;if(u==null){p.visible=!1,p.projectedGeometry=void 0;return}p.visible=!0,p.projectedGeometry=u;const f=NM({fill:s,fillOpacity:o,stroke:a,strokeWidth:c,strokeOpacity:r,lineDash:n,lineDashOffset:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);p.setProperties(f)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}pickFocus(){}computeFocusBounds(e){}};Uo.className="MapShapeBackgroundSeries",Uo.type="map-shape-background";import{_ModuleSupport as PM}from"ag-charts-community";import{constant as LM,geoJson as RM,required as OM}from"ag-charts-core";var{commonSeriesOptionsDefs:CM,mapShapeBackgroundSeriesThemeableOptionsDef:TM}=PM,wM={...TM,...CM,type:OM(LM("map-shape-background")),topology:RM},JO={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:e=>new Uo(e),themeTemplate:{...vs,series:{fill:{$path:["/1",{$mapPalette:"fill"},{$mapPalette:"hierarchyColors"}]},stroke:{$ref:"chartBackgroundColor"},strokeWidth:1,fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:[{$mix:[{$path:["/1",{$mapPalette:"fill"},{$mapPalette:"hierarchyColors"}]},"black",.15]},{$mix:[{$path:["/1",{$mapPalette:"fill"},{$mapPalette:"hierarchyColors"}]},"white",.15]}],rotation:0,reverse:!1},fillPatternDefaults:{...pt(Fh.FILL_PATTERN_DEFAULTS),fill:{$path:["/1",{$mapPalette:"fill"},{$mapPalette:"hierarchyColors"}]},stroke:{$path:["/1",{$mapPalette:"fill"},{$mapPalette:"hierarchyColors"}]}},fillImageDefaults:pt(Fh.FILL_IMAGE_DEFAULTS)}}},Eh={type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,options:wM,create:e=>new Uo(e)};import{_ModuleSupport as _M}from"ag-charts-community";import{_ModuleSupport as FM}from"ag-charts-community";import{_ModuleSupport as jo}from"ag-charts-community";import{isDefined as EM}from"ag-charts-core";var{DEFAULT_POLAR_DIRECTION_KEYS:BM,DEFAULT_POLAR_DIRECTION_NAMES:GM,ChartAxisDirection:Wt,PolarAxis:WM,diff:VM,fixNumericExtent:KM,groupAccumulativeValueProperty:Bh,keyProperty:zM,normaliseGroupTo:$M,resetLabelFn:HM,seriesLabelFadeInAnimation:XM,seriesLabelFadeOutAnimation:YM,valueProperty:qM,animationValidation:UM,createDatumId:Gh,SeriesNodePickMode:Wh,normalizeAngle360:Vh,CategoryScale:jM,motion:Kh,applyShapeStyle:JM,isGradientFill:ZM,getShapeStyle:cn}=jo,QM=class extends jo.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},zh=class extends jo.PolarSeries{constructor(e,{animationResetFns:t}){super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:BM,propertyNames:GM,canHaveAxes:!0,pickModes:[Wh.NEAREST_NODE,Wh.EXACT_SHAPE_MATCH],animationResetFns:{...t,label:HM}}),this.NodeEvent=QM,this.groupScale=new jM,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Wt.Angle)return t.getDomain(this,"angleValue","key",i);{const s=t.getDomain(this,"radiusValue-end","value",i),o=Number.isFinite(s[1]-s[0])?[s[0]>0?0:s[0],s[1]<0?0:s[1]]:[];return KM(o)}}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:s}=this.properties,o=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),r=`${a}-trailing`,n=[];EM(s)&&n.push($M([a,r],Math.abs(s))),o&&this.processedData&&n.push(VM(this.id,this.processedData)),o&&n.push(UM());const l=this.visible?{}:{forceValue:0},c=this.axes[Wt.Radius]?.scale.type,p=this.axes[Wt.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[zM(t,p,{id:"angleValue"}),qM(i,c,{id:"radiusValue-raw",invalidValue:null,...l}),...Bh(i,"normal","current",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},c),...Bh(i,"trailing","current",{id:"radiusValue-start",invalidValue:null,groupId:r,separateNegative:!0,...l},c),...n],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e!==s.r||t!==s.cx||i!==s.cy?(this.circleCache={r:e,cx:t,cy:i},!0):!1}isRadiusAxisReversed(){return this.axes[Wt.Radius]?.isReversed()}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=this.createNodeData()??{};this.nodeData=t,this.nodeDataRefresh=!1}getAxisInnerRadius(){const e=this.axes[Wt.Radius];return e instanceof WM?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t,groupScale:i}=this;if(!t||!e||e.type!=="grouped")return;const s=this.axes[Wt.Angle],o=this.axes[Wt.Radius],a=s?.scale,r=o?.scale;if(!a||!r)return;const n=t.resolveKeysById(this,"angleValue",e),l=t.resolveColumnById(this,"radiusValue-start",e),c=t.resolveColumnById(this,"radiusValue-end",e),p=t.resolveColumnById(this,"radiusValue-raw",e),d=t.resolveProcessedDataIndexById(this,"radiusValue-range");let u=0,f=0;s instanceof ni&&(u=s.groupPaddingInner,f=s.paddingInner);const g=(a.bandwidth??0)*(1-f),{index:m,visibleGroupCount:S}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:S}).map((O,_)=>String(_)),i.range=[-g/2,g/2],i.paddingInner=S>1?u:0;const x=this.isRadiusAxisReversed(),b=x?this.radius:this.getAxisInnerRadius(),v=x?this.getAxisInnerRadius():this.radius,k=v+b,{angleKey:L,radiusKey:A,angleName:D,radiusName:I,label:M}=this.properties,P=this.getSeriesDomain(Wt.Radius),R=(O,_,F,E)=>{const B=this.getLabelText(_,O,A,"radius",P,M,{value:_,datum:O,angleKey:L,radiusKey:A,angleName:D,radiusName:I});if(B)return{x:F,y:E,text:B,textAlign:"center",textBaseline:"middle"}},w=[],N={itemId:A,nodeData:w,labelData:w};if(!this.visible)return N;const{dataSources:C}=e,T=C.get(this.id)??[];for(const{datumIndex:O,group:_}of t.forEachGroupDatum(this,e)){const F=T[O],E=n[O];if(E==null)return;const B=p[O],G=B>=0&&!Object.is(B,-0),W=l[O],V=c[O],K=_.aggregation[d][G?1:0]??0,$=G===x;if(W===void 0||V===void 0)return;let X,U;if(T.length===1)X=-.5*Math.PI,U=1.5*Math.PI;else{const ve=a.convert(E);X=Vh(ve+i.convert(String(m))),U=Vh(X+i.bandwidth)}const J=X+i.bandwidth/2,oe=k-r.convert(W),j=k-r.convert(V),Y=(oe+j)/2,le=k-r.convert(0),de=k-r.convert(K),Z=Math.cos(J)*Y,Q=Math.sin(J)*Y,Ee=this.properties.label.enabled?R(F,B,Z,Q):void 0,ze=this.getColumnWidth(X,U);w.push({series:this,datum:F,datumIndex:O,point:{x:Z,y:Q,size:0},midPoint:{x:Z,y:Q},label:Ee,angleValue:E,radiusValue:B,negative:$,innerRadius:oe,outerRadius:j,stackInnerRadius:le,stackOuterRadius:de,startAngle:X,endAngle:U,midAngle:J,axisInnerRadius:b,axisOuterRadius:v,columnWidth:ze,index:O})}return{itemId:A,nodeData:w,labelData:w}}getColumnWidth(e,t){return NaN}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(e,t){const{properties:i}=this,s=this.getHighlightStyle(e,t?.datumIndex);return cn({fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset,cornerRadius:s?.cornerRadius??i.cornerRadius,opacity:s?.opacity??1},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults)}getItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{angleKey:r,radiusKey:n,itemStyler:l,fillGradientDefaults:c,fillPatternDefaults:p,fillImageDefaults:d}=a;if(l==null)return;const u=this.cachedDatumCallback(Gh(e,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:o,datum:t,highlighted:s,angleKey:r,radiusKey:n,...i}));return cn(u,c,p,d)}updateSectorSelection(e,t){let i=[];if(t){const n=this.ctx.highlightManager?.getActiveHighlight();n?.datum&&n.series===this&&i.push(n)}else i=this.nodeData;const s=this.isRadiusAxisReversed(),o=s?this.radius:this.getAxisInnerRadius(),a=s?this.getAxisInnerRadius():this.radius,r=this.getShapeFillBBox();e.update(i,void 0,n=>this.getDatumId(n)).each((n,l)=>{const{datum:c,datumIndex:p,midPoint:d}=l,u=this.getItemBaseStyle(t,l),f=this.getItemStyleOverrides(String(p),c,u,t),y=f?.fill??u.fill,m=ZM(y)&&y.bounds==="item"?{centerX:d?.x??0,centerY:d?.y??0}:{centerX:0,centerY:0,innerRadius:o,outerRadius:a};this.updateItemPath(n,l,t),JM(n,u,f,r,m),n.cornerRadius=f?.cornerRadius??u.cornerRadius,n.lineJoin="round"})}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1,t.visible=!0):t.visible=!1})}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();Kh.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),XM(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();Kh.fromToMotion(this.id,"datums",t,[e],i),YM(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a}=this,{angleKey:r,angleName:n,radiusKey:l,radiusName:c,tooltip:p}=a,d=o[Wt.Angle],u=o[Wt.Radius];if(!i||!s||!d||!u)return;const f=s.dataSources.get(this.id)?.[e],y=i.resolveKeysById(this,"angleValue",s)[e],g=i.resolveColumnById(this,"radiusValue-raw",s)[e];if(y==null)return;const m=this.getItemBaseStyle(!1);return Object.assign(m,this.getItemStyleOverrides(String(e),e,m,!1)),this.formatTooltipWithContext(p,{heading:d.formatDatum(y,"tooltip",t,void 0,f,r),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:u.formatDatum(g,"tooltip",t,void 0,f,l)}]},{seriesId:t,datum:f,title:n,angleKey:r,angleName:n,radiusKey:l,radiusName:c,...m})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r,fillGradientDefaults:n,fillPatternDefaults:l,fillImageDefaults:c}=this.properties,p=cn({fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r},n,l,c);return jo.isGradientFill(p.fill)&&(p.fill={...p.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:p}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{radiusKey:s,radiusName:o,showInLegend:a}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i,label:{text:o??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(e){return Gh(e.angleValue)}computeLabelsBBox(){return null}};import{_ModuleSupport as eI}from"ag-charts-community";var{SeriesProperties:tI,FillGradientDefaults:iI,FillPatternDefaults:sI,FillImageDefaults:oI,makeSeriesTooltip:aI,Property:Oe,Label:rI}=eI,Me=class extends tI{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new iI,this.fillPatternDefaults=new sI,this.fillImageDefaults=new oI,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new rI,this.tooltip=aI()}};h([Oe],Me.prototype,"angleKey",2),h([Oe],Me.prototype,"angleName",2),h([Oe],Me.prototype,"radiusKey",2),h([Oe],Me.prototype,"radiusName",2),h([Oe],Me.prototype,"fill",2),h([Oe],Me.prototype,"fillGradientDefaults",2),h([Oe],Me.prototype,"fillPatternDefaults",2),h([Oe],Me.prototype,"fillImageDefaults",2),h([Oe],Me.prototype,"fillOpacity",2),h([Oe],Me.prototype,"stroke",2),h([Oe],Me.prototype,"strokeWidth",2),h([Oe],Me.prototype,"strokeOpacity",2),h([Oe],Me.prototype,"lineDash",2),h([Oe],Me.prototype,"lineDashOffset",2),h([Oe],Me.prototype,"cornerRadius",2),h([Oe],Me.prototype,"itemStyler",2),h([Oe],Me.prototype,"rotation",2),h([Oe],Me.prototype,"stackGroup",2),h([Oe],Me.prototype,"normalizedTo",2),h([Oe],Me.prototype,"label",2),h([Oe],Me.prototype,"tooltip",2);import{_ModuleSupport as nI}from"ag-charts-community";import{_ModuleSupport as lI}from"ag-charts-community";var{motion:cI}=lI;function $h(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(r,n,l)=>{t.forEach(c=>{const p=e[c];let d=(l==="removed"||l==="updated"?r:n)[c],u=(l==="removed"?r:n)[c];isNaN(u)&&(u=r.previousDatum?.[c]??NaN);const f=d-u;Math.abs(f)>Math.PI&&(d-=Math.sign(f)*2*Math.PI),p.set(n,{from:d,to:u})})},s=(r,n)=>({startAngle:e.startAngle.get(r)[n],endAngle:e.endAngle.get(r)[n]});return{calculate:i,from:r=>s(r,"from"),to:r=>s(r,"to")}}function Hh(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.startAngle)||isNaN(e.previousDatum.endAngle))return"added";if(isNaN(t.startAngle)||isNaN(t.endAngle))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function pI(e){const t=$h();return{toFn:(o,a,r)=>{const{startAngle:n,endAngle:l}=t.to(a);let c,p,d,u,f;return r==="removed"?(c=o.innerRadius,p=o.innerRadius,d=o.columnWidth,u=o.axisInnerRadius,f=o.axisOuterRadius):(c=isNaN(a.innerRadius)?e:a.innerRadius,p=isNaN(a.outerRadius)?e:a.outerRadius,d=isNaN(a.columnWidth)?o.columnWidth:a.columnWidth,u=a.axisInnerRadius,f=a.axisOuterRadius),{innerRadius:c,outerRadius:p,columnWidth:d,axisInnerRadius:u,axisOuterRadius:f,startAngle:n,endAngle:l}},fromFn:(o,a,r)=>{r=Hh(o,a,r),t.calculate(o,a,r);const{startAngle:n,endAngle:l}=t.from(a);let c,p,d,u,f;r==="removed"||r==="updated"?(c=o.innerRadius,p=o.outerRadius,d=o.columnWidth,u=o.axisInnerRadius,f=o.axisOuterRadius):(c=e,p=e,d=a.columnWidth,u=a.axisInnerRadius,f=a.axisOuterRadius);const y=cI.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:p,columnWidth:d,axisInnerRadius:u,axisOuterRadius:f,startAngle:n,endAngle:l,phase:y}}}}function hI(e,{innerRadius:t,outerRadius:i,columnWidth:s,axisInnerRadius:o,axisOuterRadius:a,startAngle:r,endAngle:n}){return{innerRadius:t,outerRadius:i,columnWidth:s,axisInnerRadius:o,axisOuterRadius:a,startAngle:r,endAngle:n}}var{SectorBox:Jo,motion:dI}=nI;function pn(e){const{negative:t,innerRadius:i,outerRadius:s,stackInnerRadius:o,stackOuterRadius:a}=e;return{innerRadius:t?a:o,outerRadius:t?o:a,clipInnerRadius:t?s:i,clipOuterRadius:t?i:s}}function uI(e){const t=$h();return{toFn:(o,a,r)=>{const{startAngle:n,endAngle:l}=t.to(a);let c,p,d;if(r==="removed")c=e,p=e,d=new Jo(n,l,c,p);else{let u,f;({innerRadius:c,outerRadius:p,clipInnerRadius:u,clipOuterRadius:f}=pn(a)),isNaN(c)&&(c=e),isNaN(p)&&(p=e),isNaN(u)&&(u=e),isNaN(f)&&(f=e),d=new Jo(n,l,u,f)}return{innerRadius:c,outerRadius:p,startAngle:n,endAngle:l,clipSector:d}},fromFn:(o,a,r)=>{r=Hh(o,a,r),t.calculate(o,a,r);const{startAngle:n,endAngle:l}=t.from(a);let c,p,d;r==="removed"||r==="updated"?(c=o.innerRadius,p=o.outerRadius,d=o.clipSector):(c=e,p=e),d??(d=new Jo(n,l,c,p));const u=dI.NODE_UPDATE_STATE_TO_PHASE_MAPPING[r];return{innerRadius:c,outerRadius:p,startAngle:n,endAngle:l,clipSector:d,phase:u}}}}function fI(e,t){const{startAngle:i,endAngle:s}=t,{innerRadius:o,outerRadius:a,clipInnerRadius:r,clipOuterRadius:n}=pn(t),l=new Jo(i,s,r,n);return{innerRadius:o,outerRadius:a,startAngle:i,endAngle:s,clipSector:l}}var{Sector:gI,SectorBox:yI,PolarZIndexMap:hn}=FM,Zo=class extends zh{constructor(e){super(e,{animationResetFns:{item:fI}}),this.properties=new Me}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[0,hn.FOREGROUND,e],this.highlightGroup.zIndex=[0,hn.HIGHLIGHT,e],this.labelGroup.zIndex=[0,hn.LABEL,e],!0):!1}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new gI}updateItemPath(e,t,i){const{negative:s}=t;if(e.centerX=0,e.centerY=0,e.startOuterCornerRadius=s?0:this.properties.cornerRadius,e.endOuterCornerRadius=s?0:this.properties.cornerRadius,e.startInnerCornerRadius=s?this.properties.cornerRadius:0,e.endInnerCornerRadius=s?this.properties.cornerRadius:0,i){const{startAngle:o,endAngle:a}=t,{innerRadius:r,outerRadius:n,clipInnerRadius:l,clipOuterRadius:c}=pn(t);e.innerRadius=r,e.outerRadius=n,e.startAngle=o,e.endAngle=a,e.clipSector=new yI(o,a,l,c)}}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return uI(e)}};Zo.className="NightingaleSeries",Zo.type="nightingale";import{_ModuleSupport as mI}from"ag-charts-community";import{boolean as Xh,constant as SI,number as xI,required as dn,string as Is}from"ag-charts-core";var{commonSeriesOptionsDefs:bI,nightingaleSeriesThemeableOptionsDef:DI}=mI,vI={...bI,...DI,type:dn(SI("nightingale")),angleKey:dn(Is),radiusKey:dn(Is),angleName:Is,radiusName:Is,grouped:Xh,stacked:Xh,stackGroup:Is,normalizedTo:xI};import{_ModuleSupport as Qo}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:Yh,POLAR_AXIS_SHAPE:qh}}=Qo,kI={series:{fill:{$palette:"fill"},stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$palette:"stroke"}]},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Qo.FILL_PATTERN_DEFAULTS,fillImageDefaults:Qo.FILL_IMAGE_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:Qo.multiSeriesHighlightStyle()},axes:{[Yh.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:qh.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[Yh.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:qh.CIRCLE}}}},{ThemeConstants:{POLAR_AXIS_TYPE:Uh}}=_M,lC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:e=>new Zo(e),defaultAxes:[{type:Uh.ANGLE_CATEGORY},{type:Uh.RADIUS_NUMBER}],themeTemplate:kI,stackable:!0,groupable:!0,stackedByDefault:!0},jh={type:"series",name:"nightingale",chartType:"polar",enterprise:!0,options:vI,create:e=>new Zo(e)};import"ag-charts-community";import{_ModuleSupport as Jh}from"ag-charts-community";import{_ModuleSupport as MI}from"ag-charts-community";var{SeriesProperties:II,FillGradientDefaults:AI,FillPatternDefaults:NI,FillImageDefaults:PI,makeSeriesTooltip:LI,Property:Ie,Label:Zh,DropShadow:RI}=MI,OI=class extends Zh{},un=class extends Zh{constructor(){super(...arguments),this.spacing=0}};h([Ie],un.prototype,"spacing",2),h([Ie],un.prototype,"placement",2);var Pe=class extends II{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new AI,this.fillPatternDefaults=new NI,this.fillImageDefaults=new PI,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=new RI().set({enabled:!1}),this.label=new OI,this.stageLabel=new un,this.tooltip=LI()}};h([Ie],Pe.prototype,"stageKey",2),h([Ie],Pe.prototype,"valueKey",2),h([Ie],Pe.prototype,"fills",2),h([Ie],Pe.prototype,"fillGradientDefaults",2),h([Ie],Pe.prototype,"fillPatternDefaults",2),h([Ie],Pe.prototype,"fillImageDefaults",2),h([Ie],Pe.prototype,"fillOpacity",2),h([Ie],Pe.prototype,"strokes",2),h([Ie],Pe.prototype,"strokeWidth",2),h([Ie],Pe.prototype,"strokeOpacity",2),h([Ie],Pe.prototype,"lineDash",2),h([Ie],Pe.prototype,"lineDashOffset",2),h([Ie],Pe.prototype,"direction",2),h([Ie],Pe.prototype,"reverse",2),h([Ie],Pe.prototype,"spacing",2),h([Ie],Pe.prototype,"aspectRatio",2),h([Ie],Pe.prototype,"itemStyler",2),h([Ie],Pe.prototype,"shadow",2),h([Ie],Pe.prototype,"label",2),h([Ie],Pe.prototype,"stageLabel",2),h([Ie],Pe.prototype,"tooltip",2);function Qh(e,{x:t,y:i,top:s,right:o,bottom:a,left:r}){e.x0=t-s/2,e.x1=t+s/2,e.x2=t+a/2,e.x3=t-a/2,e.y0=i-r/2,e.y1=i-o/2,e.y2=i+o/2,e.y3=i+r/2}function CI(e){return{fromFn:(o,a)=>{const{x:r,y:n}=a;let{top:l,right:c,bottom:p,left:d}=a;return e==="vertical"?(l=0,p=0):(d=0,c=0),{x:r,y:n,top:l,right:c,bottom:p,left:d}},toFn:(o,a)=>{const{x:r,y:n,top:l,right:c,bottom:p,left:d}=a;return{x:r,y:n,top:l,right:c,bottom:p,left:d}},applyFn:Qh}}var{StateMachine:TI,valueProperty:ed,SeriesNodePickMode:td,CachedTextMeasurerPool:wI,TextUtils:_I,createDatumId:FI,BBox:fn,Group:gn,Selection:ea,Text:id,PointerEvents:sd,applyShapeStyle:EI,fromToMotion:BI,seriesLabelFadeInAnimation:GI,getShapeStyle:yn}=Jh,mn=class extends Jh.DataModelSeries{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[td.EXACT_SHAPE_MATCH,td.NEAREST_NODE]}),this.properties=new Pe,this.itemGroup=this.contentGroup.appendChild(new gn({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new gn({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new gn({name:"stageLabelGroup"})),this.datumSelection=ea.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=ea.select(this.itemLabelGroup,id),this.stageLabelSelection=ea.select(this.stageLabelGroup,id),this.highlightDatumSelection=ea.select(this.highlightNode,()=>this.nodeFactory()),this.animationState=new TI("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{clear:"empty",reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.itemLabelGroup.pointerEvents=sd.None,this.stageLabelGroup.pointerEvents=sd.None}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)))}nodeFactory(){return new Gt}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}async processData(e){if(this.data==null)return;const{id:t,visible:i,ctx:{legendManager:s}}=this,{stageKey:o,valueKey:a}=this.properties,r="band",n="number",l=(p,d,u)=>i&&s.getItemEnabled({seriesId:t,itemId:u}),c=this.visible?{}:{forceValue:0};await this.requestDataModel(e,this.data,{props:[ed(o,r,{id:"xValue"}),ed(a,n,{id:"yValue",...c,validation:l,invalidValue:0})]})}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:s,visible:o,ctx:{legendManager:a}}=this,{stageKey:r,valueKey:n,direction:l,reverse:c=l==="horizontal",spacing:p,aspectRatio:d,label:u,stageLabel:f}=s;if(t==null||i==null)return;const y=l==="horizontal",g=t.resolveColumnById(this,"xValue",i),m=t.resolveColumnById(this,"yValue",i),S=t.getDomain(this,"xValue","value",i),x=t.getDomain(this,"yValue","value",i),b=wI.getMeasurer({font:f});let v,k;y?(v="center",k=f.placement==="before"?"bottom":"top"):(v=f.placement==="after"?"left":"right",k="middle");const L=f.enabled?[]:void 0;let A=0,D=0,I=0;const M=i.dataSources.get(this.id)??[];M.forEach((G,W)=>{const V=g[W],K=m[W],$=o&&a.getItemEnabled({seriesId:e,itemId:W});if(I+=K,L==null)return;const X=this.getLabelText(V,G,r,"x",S,this.properties.stageLabel,{datum:G,value:K,stageKey:r,valueKey:n}),{width:U}=b.measureText(X),J=X.split(`
`).length*_I.getLineHeight(u.fontSize);A=Math.max(A,U),D=Math.max(D,J),L.push({x:NaN,y:NaN,text:X,textAlign:v,textBaseline:k,visible:$})});const P=this._nodeDataDependencies?.seriesRectWidth??0,R=this._nodeDataDependencies?.seriesRectHeight??0,w=p*(i.input.count-1);let N;if(y){const G=D+f.spacing;N=new fn(0,f.placement==="before"?G:0,P,R-G)}else{const G=A+f.spacing;N=new fn(f.placement==="after"?0:G,0,P-G,R)}if(d!=null&&d!==0){const G=l==="horizontal"?1/d:d,W=Math.min(N.width,N.height*G),V=W/G;N=new fn(N.x+(N.width-W)/2,N.y+(N.height-V)/2,W,V)}let C,T;y?T=f.placement==="before"?N.y-f.spacing:N.y+N.height+f.spacing:C=f.placement==="after"?N.x+N.width+f.spacing:N.x-f.spacing;const O=N.width-(y?w:0),_=N.height-(y?0:w);if(O<0||_<0)return;const F=[],E=[];let B=0;return M.forEach((G,W)=>{const V=g[W],K=m[W],$=o&&a.getItemEnabled({seriesId:e,itemId:W}),X=B+K,U=(B+X)/(2*I),J=(X-B)/I,oe=y?O*U+p*W:O*.5,j=y?_*.5:_*U+p*W,Y=N.x+oe,le=N.y+j;if(L!=null){const ee=L[W];ee.x=C??Y,ee.y=T??le}let de,Z,Q,Ee;if(y){const ee=O*J;de=ee,Q=ee;const ue=(oe+ee/2)*(_/N.width),pe=(oe-ee/2)*(_/N.width);Z=c?N.height-ue:ue,Ee=c?N.height-pe:pe}else{const ee=_*J;Z=ee,Ee=ee;const ue=(j-ee/2)*(O/N.height),pe=(j+ee/2)*(O/N.height);de=c?N.width-ue:ue,Q=c?N.width-pe:pe}const ze=this.getLabelText(K,G,n,"y",x,u,{datum:G,value:K,stageKey:r,valueKey:n}),ve={x:Y,y:le,text:ze,textAlign:"center",textBaseline:"middle",visible:$};E.push(ve),F.push({series:this,itemId:n,datum:G,datumIndex:W,index:W,xValue:V,yValue:K,x:Y,y:le,top:de,right:Z,bottom:Q,left:Ee,label:ve,enabled:$,midPoint:{x:Y,y:le}}),B=X}),{itemId:e,nodeData:F,labelData:E,stageLabelData:L,bounds:N}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update({seriesRect:e}){this.checkResize(e);const{datumSelection:t,labelSelection:i,stageLabelSelection:s,highlightDatumSelection:o}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const r=this.contextNodeData?.nodeData??[],n=this.contextNodeData?.labelData??[],l=this.contextNodeData?.stageLabelData??[];this.datumSelection=this.updateDatumSelection({nodeData:r,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:n,labelSelection:i}),this.updateLabelNodes({labelSelection:i,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:l,stageLabelSelection:s}),this.updateLabelNodes({labelSelection:s,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:a!=null?[a]:[],datumSelection:o}),this.updateDatumNodes({datumSelection:o,isHighlight:!0}),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData)}getItemBaseStyle(e,t){const{properties:i}=this,s=this.getHighlightStyle(e,t?.datumIndex);return yn({fill:s?.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset,opacity:s?.opacity??1},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getItemStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{fills:n,strokes:l,stageKey:c,valueKey:p,itemStyler:d}=r,u=s.fill??n[i%n.length],f=s.stroke??l[i%l.length],y={};if(o||(y.fill=u,y.stroke=f),d!=null){const g=this.cachedDatumCallback(FI(e,o?"highlight":"node"),()=>this.callWithContext(d,{seriesId:a,datum:t,stageKey:c,valueKey:p,highlighted:o,fill:u,stroke:f,...s}));Object.assign(y,g)}return yn(y,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{properties:s}=this,{shadow:o}=s,a=this.contextNodeData?.bounds,r=a?{series:a,axis:a}:void 0;t.each((n,l)=>{const{datumIndex:c,datum:p}=l,d=this.getItemBaseStyle(i,l),u=this.getItemStyleOverrides(String(c),p,c,d,i);EI(n,d,u,r),Qh(n,l),n.fillShadow=o})}updateLabelSelection(e){return e.labelSelection.update(this.properties.label.enabled?e.labelData:[])}updateStageLabelSelection(e){return e.stageLabelSelection.update(e.stageLabelData)}updateLabelNodes(e){const{labelSelection:t,labelProperties:i}=e,{color:s,fontSize:o,fontStyle:a,fontWeight:r,fontFamily:n}=i;t.each((l,{visible:c,x:p,y:d,text:u,textAlign:f,textBaseline:y},g)=>{l.visible=c,l.x=p,l.y=d,l.text=u,l.fill=s,l.fontStyle=a,l.fontWeight=r,l.fontSize=o,l.fontFamily=n,l.textAlign=f,l.textBaseline=y,l.fillOpacity=this.getHighlightStyle(!1,g).opacity??1})}computeFocusBounds(e){const t=this.getNodeData()?.[e.datumIndex];if(t!==void 0){for(const i of this.datumSelection)if(i.datum===t)return i.node}}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{stageKey:a,valueKey:r,tooltip:n}=o;if(!i||!s)return;const l=s.dataSources.get(this.id)?.[e],c=i.resolveColumnById(this,"xValue",s)[e],p=i.resolveColumnById(this,"yValue",s)[e];if(c==null)return;const d=this.getLabelText(c,l,a,"x",i.getDomain(this,"xValue","value",s),this.properties.stageLabel,{datum:l,value:c,stageKey:a,valueKey:r}),u=this.getLabelText(p,l,r,"y",i.getDomain(this,"yValue","value",s),this.properties.stageLabel,{datum:l,value:p,stageKey:a,valueKey:r}),f=this.getItemBaseStyle(!1);return Object.assign(f,this.getItemStyleOverrides(String(e),e,e,f,!1)),this.formatTooltipWithContext(n,{symbol:this.legendItemSymbol(e),data:[{label:d,value:u}]},{seriesId:t,datum:l,title:void 0,stageKey:a,valueKey:r,...f})}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.datumSelection.each((o,a)=>{const r=o.distanceSquared(e,t);r<i&&(i=r,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}legendItemSymbol(e){const{fills:t,strokes:i,strokeWidth:s,fillOpacity:o,strokeOpacity:a,lineDash:r,lineDashOffset:n}=this.properties,l=t[e%t.length]??"black",c=i[e%i.length]??"black";return{marker:yn({fill:l,fillOpacity:o,stroke:c,strokeWidth:s,strokeOpacity:a,lineDash:r,lineDashOffset:n},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(e){const{processedData:t,dataModel:i,id:s,ctx:{legendManager:o},visible:a}=this;if(!i||!t||e!=="category")return[];const{showInLegend:r}=this.properties,n=[],l=i.resolveColumnById(this,"xValue",t);return(t.dataSources.get(this.id)??[]).forEach((p,d)=>{const u=l[d];n.push({legendType:"category",id:s,itemId:d,seriesId:s,enabled:a&&o.getItemEnabled({seriesId:s,itemId:d}),label:{text:u},symbol:this.legendItemSymbol(d),hideInLegend:!r})}),n}animateReset(){this.ctx.animationManager.skipCurrentBatch(),this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(){const{datumSelection:e,labelSelection:t,properties:i}=this,s=CI(i.direction);BI(this.id,"nodes",this.ctx.animationManager,[e],s),GI(this,"labels",this.ctx.animationManager,t)}};mn.className="PyramidSeries",mn.type="pyramid";import{_ModuleSupport as WI}from"ag-charts-community";import{constant as VI,required as Sn,string as od}from"ag-charts-core";var{commonSeriesOptionsDefs:KI,pyramidSeriesThemeableOptionsDef:zI}=WI,$I={...zI,...KI,type:Sn(VI("pyramid")),stageKey:Sn(od),valueKey:Sn(od)};import{_ModuleSupport as ta}from"ag-charts-community";var{ThemeSymbols:{DEFAULT_SHADOW_COLOUR:HI}}=ta,gC={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacing:2,fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:ta.FILL_PATTERN_DEFAULTS,fillImageDefaults:ta.FILL_IMAGE_DEFAULTS,label:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},stageLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:12},shadow:{enabled:!1,color:HI,xOffset:3,yOffset:3,blur:5},highlight:ta.singleSeriesHighlightStyle()}},ad={type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,options:$I,create:e=>new mn(e)};import{_ModuleSupport as XI}from"ag-charts-community";import{_ModuleSupport as Ot}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:YI}}=Ot,rd={series:{stroke:{$palette:"stroke"},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},marker:{enabled:!0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:Ot.FILL_PATTERN_DEFAULTS,fillImageDefaults:Ot.FILL_IMAGE_DEFAULTS,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",1,0]}},highlight:Ot.multiSeriesHighlightStyle(),tooltip:{range:{$path:["/tooltip/range","nearest"]}}},axes:{[YI.ANGLE_CATEGORY]:{label:{spacing:10}}}},qI=Ot.mergeDefaults({series:{stroke:Ot.SAFE_STROKE_FILL_OPERATION,strokeWidth:2}},rd),UI=Ot.mergeDefaults({series:{fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:Ot.FILL_PATTERN_DEFAULTS,fillImageDefaults:Ot.FILL_IMAGE_DEFAULTS,fillOpacity:.8,strokeWidth:2,marker:{enabled:!1,fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:Ot.FILL_PATTERN_DEFAULTS,fillImageDefaults:Ot.FILL_IMAGE_DEFAULTS}}},rd);import{_ModuleSupport as nd}from"ag-charts-community";import{_ModuleSupport as xn}from"ag-charts-community";import{isFiniteNumber as ld,isNumberEqual as cd}from"ag-charts-core";import{_ModuleSupport as jI}from"ag-charts-community";var{Label:JI,SeriesMarker:ZI,SeriesProperties:QI,makeSeriesTooltip:e2,Property:at}=jI,Je=class extends QI{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new ZI,this.label=new JI,this.tooltip=e2(),this.connectMissingData=!1}};h([at],Je.prototype,"angleKey",2),h([at],Je.prototype,"radiusKey",2),h([at],Je.prototype,"angleName",2),h([at],Je.prototype,"radiusName",2),h([at],Je.prototype,"stroke",2),h([at],Je.prototype,"strokeWidth",2),h([at],Je.prototype,"strokeOpacity",2),h([at],Je.prototype,"lineDash",2),h([at],Je.prototype,"lineDashOffset",2),h([at],Je.prototype,"rotation",2),h([at],Je.prototype,"marker",2),h([at],Je.prototype,"label",2),h([at],Je.prototype,"tooltip",2),h([at],Je.prototype,"connectMissingData",2);var{DEFAULT_POLAR_DIRECTION_KEYS:t2,DEFAULT_POLAR_DIRECTION_NAMES:i2,ChartAxisDirection:bt,PolarAxis:s2,SeriesNodePickMode:pd,valueProperty:hd,fixNumericExtent:o2,seriesLabelFadeInAnimation:a2,markerFadeInAnimation:r2,resetMarkerFn:n2,animationValidation:l2,computeMarkerFocusBounds:c2,extent:p2,BBox:h2,Group:d2,Path:u2,PointerEvents:f2,Selection:dd,Text:g2,Marker:y2,mergeDefaults:ud,getShapeStyle:m2}=xn,S2=class extends xn.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},bn=class extends xn.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:t2,propertyNames:i2,pickModes:[pd.NEAREST_NODE,pd.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:n2},clipFocusBox:!1}),this.properties=new Je,this.NodeEvent=S2,this.lineGroup=this.contentGroup.appendChild(new d2({name:"radar-line"})),this.lineSelection=dd.select(this.lineGroup,u2),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0},this.lineGroup.zIndex=0,this.itemGroup.zIndex=1}nodeFactory(){return new y2}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===bt.Angle)return t.getDomain(this,"angleValue","value",i);{const s=t.getDomain(this,"radiusValue","value",i),o=p2(s.length===0?s:[0].concat(s));return o2(o)}}async processData(e){const{angleKey:t,radiusKey:i}=this.properties,s=[];this.ctx.animationManager.isSkipped()||s.push(l2());const o=this.axes[bt.Radius]?.scale.type,a=this.axes[bt.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[hd(t,a,{id:"angleValue"}),hd(i,o,{id:"radiusValue",invalidValue:void 0}),...s]}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e===s.r&&t===s.cx&&i===s.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[bt.Radius];return e instanceof s2?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=this.createNodeData()??{};this.nodeData=t,this.nodeDataRefresh=!1}createNodeData(){const{processedData:e,dataModel:t}=this;if(!e||!t)return;const{angleKey:i,radiusKey:s,angleName:o,radiusName:a,marker:r,label:n}=this.properties,l=this.axes[bt.Angle]?.scale,c=this.axes[bt.Radius]?.scale;if(!l||!c)return;const p=t.resolveColumnById(this,"angleValue",e),d=t.resolveColumnById(this,"radiusValue",e),u=this.getAxisInnerRadius(),f=this.getSeriesDomain(bt.Radius),g=(e.dataSources.get(this.id)??[]).map((m,S)=>{const x=p[S],b=d[S],v=l.convert(x),k=this.radius+u-c.convert(b),L=Math.cos(v),A=Math.sin(v),D=L*k,I=A*k;let M;if(n.enabled){const P=this.getLabelText(b,m,s,"radius",f,n,{value:b,datum:m,angleKey:i,radiusKey:s,angleName:o,radiusName:a});if(P){let R="right";cd(L,0)?R="center":L>0&&(R="left");let w="bottom";cd(A,0)?w="middle":A>0&&(w="top"),M={x:D+L*r.size,y:I+A*r.size,text:P,textAlign:R,textBaseline:w}}}return{series:this,datum:m,datumIndex:S,index:S,point:{x:D,y:I,size:r.size},midPoint:{x:D,y:I},label:M,angleValue:x,radiusValue:b,missing:!ld(v)||!ld(k)}});return{itemId:s,nodeData:g,labelData:g}}update({seriesRect:e}){const t=this.checkResize(e),i=!this.ctx.animationManager.isSkipped(),{series:s}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&s===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updatePathNodes(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=dd.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(e){return e?.fill??this.properties.marker.fill}getDatumStylerProperties(e){const{id:t,properties:i}=this,{angleKey:s,radiusKey:o}=i;return{seriesId:t,datum:e,angleKey:s,radiusKey:o}}updateMarkers(e,t){const{visible:i}=this,{marker:s,stroke:o,strokeWidth:a,strokeOpacity:r}=this.properties;let n=[];if(i&&s.shape&&s.enabled)if(t){const p=this.ctx.highlightManager?.getActiveHighlight();p?.datum&&(n=[p])}else n=this.nodeData;const l=s.getStyle(),c=this.getShapeFillBBox();e.update(n).each((p,d)=>{const u=this.getHighlightStyle(t,d.datumIndex),f=ud(u,l,{stroke:o,strokeWidth:a,strokeOpacity:r});this.updateMarkerStyle(s,p,d.datum,d.point,this.getDatumStylerProperties(d),t,f,c)})}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1,t.visible=!0):t.visible=!1})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a}=this,{angleKey:r,angleName:n,radiusKey:l,radiusName:c,tooltip:p,marker:d}=a,u=o[bt.Angle],f=o[bt.Radius];if(!i||!s||!u||!f)return;const y=s.dataSources.get(this.id)?.[e],g=i.resolveColumnById(this,"angleValue",s)[e],m=i.resolveColumnById(this,"radiusValue",s)[e];if(g==null)return;const S=this.getMarkerStyle(d,y,this.getDatumStylerProperties(y),!1);return this.formatTooltipWithContext(p,{heading:u.formatDatum(g,"tooltip",t,void 0,y,r),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:f.formatDatum(m,"tooltip",t,void 0,y,l)}]},{seriesId:t,datum:y,title:n,angleKey:r,radiusKey:l,angleName:n,radiusName:c,...S})}legendItemSymbol(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,marker:o}=this.properties;return{marker:m2({shape:o.shape,enabled:o.enabled||t<=0,fill:this.getMarkerFill()??o.stroke??e??"rgba(0, 0, 0, 0)",stroke:o.stroke??e??"rgba(0, 0, 0, 0)",fillOpacity:o.fillOpacity,strokeOpacity:o.strokeOpacity,strokeWidth:o.strokeWidth,lineDash:o.lineDash,lineDashOffset:o.lineDashOffset},o.fillGradientDefaults,o.fillPatternDefaults,o.fillImageDefaults),line:{stroke:e,strokeOpacity:i,strokeWidth:t,lineDash:s}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{radiusKey:o,radiusName:a,showInLegend:r}=this.properties;return[{legendType:"category",id:t,itemId:o,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:o}),label:{text:a??o},symbol:this.legendItemSymbol(),hideInLegend:!r}]}pickNodeClosestDatum(e){const{nodeData:t,centerX:i,centerY:s}=this,{x:o,y:a}=e,r=this.radius;if(Math.sqrt((o-i)**2+(a-s)**2)>r+this.properties.marker.size)return;let l=1/0,c;for(const p of t){const{point:{x:d=NaN,y:u=NaN}={}}=p;if(isNaN(d)||isNaN(u))continue;const f=Math.sqrt((e.x-d-i)**2+(e.y-u-s)**2);f<l&&(l=f,c=p)}if(c){const p=Math.max(l-(c.point?.size??0),0);return{datum:c,distance:p}}}computeLabelsBBox(){const{label:e}=this.properties;this.maybeRefreshNodeData();const t=[],i=new g2;return this.nodeData.forEach(s=>{if(!e.enabled||!s.label)return;i.text=s.label.text,i.x=s.label.x,i.y=s.label.y,i.setFont(e),i.setAlign(s.label);const o=i.getBBox();t.push(o)}),t.length===0?null:h2.merge(t)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){this.updatePathNodes()}updatePathNodes(){const e=this.getLineNode();if(!e)return;const{strokeWidth:t,stroke:i,strokeOpacity:s,lineDash:o,lineDashOffset:a,opacity:r}=ud(this.getHighlightStyle(),this.properties);e.setProperties({fill:void 0,lineJoin:"round",lineCap:"round",pointerEvents:f2.None,opacity:r,stroke:i,strokeWidth:t,strokeOpacity:s,lineDash:o,lineDashOffset:a})}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(e.length===0)return[];const s=this.axes[bt.Radius],a=this.axes[bt.Angle]?.isReversed(),n=s?.isReversed()&&!a?[...e].reverse():e,l=[];let c=!1,p;return n.forEach((d,u)=>{let{x:f,y}=d.point;const g=isNaN(f)||isNaN(y);g||(p??(p=d)),g&&!i&&(f=0,y=0);const m=u===0||!t&&!i&&(g||c);l.push({x:f,y,moveTo:m}),c=g}),p!==void 0&&l.push({x:p.point.x,y:p.point.y,moveTo:!1}),l}animateSinglePath(e,t,i){const{path:s}=e;s.clear(!0);const o=this.getAxisInnerRadius(),a=this.axes[bt.Radius],n=a?.isReversed()?this.radius+o-a?.scale.convert(0):o;t.forEach(l=>{const{x:c,y:p,arc:d,radius:u=0,startAngle:f=0,endAngle:y=0,moveTo:g}=l,m=Math.atan2(p,c),S=n*Math.cos(m),x=n*Math.sin(m),b=i,v=S*(1-b)+c*b,k=x*(1-b)+p*b;d?s.arc(c,p,u,f,y):g?s.moveTo(v,k):s.lineTo(v,k)}),e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:s=>this.animatePaths(s),onStop:()=>this.animatePaths(1)}),r2(this,i,"added",e),a2(this,"labels",i,t)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints();e.fill=void 0,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,t.clear(!0);for(const{x:s,y:o,moveTo:a}of i)a?t.moveTo(s,o):t.lineTo(s,o);e.checkPathDirty()}}getFormattedMarkerStyle(e){const{angleKey:t,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,e.datum,{angleKey:t,radiusKey:i},!0)}computeFocusBounds(e){return c2(this,e)}};bn.className="RadarSeries";import{_ModuleSupport as x2}from"ag-charts-community";var{FillGradientDefaults:b2,FillPatternDefaults:D2,FillImageDefaults:v2,Property:As}=x2,Ji=class extends Je{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new b2,this.fillPatternDefaults=new D2,this.fillImageDefaults=new v2,this.fillOpacity=1}};h([As],Ji.prototype,"fill",2),h([As],Ji.prototype,"fillGradientDefaults",2),h([As],Ji.prototype,"fillPatternDefaults",2),h([As],Ji.prototype,"fillImageDefaults",2),h([As],Ji.prototype,"fillOpacity",2);var{Group:k2,Path:M2,PointerEvents:I2,Selection:A2,ChartAxisDirection:fd,applyShapeStyle:gd,getShapeFill:N2,getShapeStyle:P2,mergeDefaults:L2}=nd,ia=class extends bn{constructor(e){super(e),this.properties=new Ji,this.areaGroup=this.contentGroup.appendChild(new k2({name:"radar-area"})),this.areaSelection=A2.select(this.areaGroup,M2),this.resetInvalidToZero=!0,this.areaGroup.zIndex=-1}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(e){return e?.fill??this.properties.marker.fill??this.properties.fill}updatePathNodes(){super.updatePathNodes();const{fill:e,fillOpacity:t,opacity:i}=L2(this.getHighlightStyle(),this.properties),{fill:s,fillOpacity:o}=P2({fill:e,fillOpacity:t},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),a=this.getAreaNode();a&&(gd(a,{fill:s,fillOpacity:o,stroke:void 0},void 0,this.getShapeFillBBox()),a.setProperties({lineJoin:"round",pointerEvents:I2.None,opacity:i}))}animatePaths(e){super.animatePaths(e);const t=this.getAreaNode();t&&this.animateSinglePath(t,this.getAreaPoints(),e)}getAreaPoints(){const e=this.getLinePoints(),t=r=>{const n=this.axes[r];return n instanceof nd.PolarAxis?n:void 0},i=t(fd.Radius),s=t(fd.Angle);if(!i?.isReversed())return e;const a=s?.getAxisLinePoints()?.points??[];return e.concat(...a)}resetPaths(){super.resetPaths();const e=this.getAreaNode();if(e){const{path:t}=e,i=this.getAreaPoints(),s=N2(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),o=this.getShapeFillBBox();gd(e,{fill:s,stroke:void 0,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset},void 0,o),e.lineJoin=e.lineCap="round",t.clear(!0),i.forEach(({x:a,y:r,moveTo:n,arc:l,radius:c=0,startAngle:p=0,endAngle:d=0})=>{l?t.arc(a,r,c,p,d):n?t.moveTo(a,r):t.lineTo(a,r)}),t.closePath(),e.checkPathDirty()}}};ia.className="RadarAreaSeries",ia.type="radar-area";import{_ModuleSupport as R2}from"ag-charts-community";import{constant as O2,required as Dn,string as sa}from"ag-charts-core";var{commonSeriesOptionsDefs:C2,radarAreaSeriesThemeableOptionsDef:T2}=R2,w2={...C2,...T2,type:Dn(O2("radar-area")),angleKey:Dn(sa),radiusKey:Dn(sa),angleName:sa,radiusName:sa},{ThemeConstants:{POLAR_AXIS_TYPE:yd}}=XI,IC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:e=>new ia(e),defaultAxes:[{type:yd.ANGLE_CATEGORY},{type:yd.RADIUS_NUMBER}],themeTemplate:UI},md={type:"series",name:"radar-area",chartType:"polar",enterprise:!0,options:w2,create:e=>new ia(e)};import{_ModuleSupport as _2}from"ag-charts-community";var oa=class extends bn{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};oa.className="RadarLineSeries",oa.type="radar-line";import{_ModuleSupport as F2}from"ag-charts-community";import{constant as E2,required as vn,string as aa}from"ag-charts-core";var{commonSeriesOptionsDefs:B2,radarLineSeriesThemeableOptionsDef:G2}=F2,W2={...B2,...G2,type:vn(E2("radar-line")),angleKey:vn(aa),radiusKey:vn(aa),angleName:aa,radiusName:aa},{POLAR_AXIS_TYPE:Sd}=_2.ThemeConstants,LC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:e=>new oa(e),defaultAxes:[{type:Sd.ANGLE_CATEGORY},{type:Sd.RADIUS_NUMBER}],themeTemplate:qI},xd={type:"series",name:"radar-line",chartType:"polar",enterprise:!0,options:W2,create:e=>new oa(e)};import{_ModuleSupport as V2}from"ag-charts-community";import{_ModuleSupport as Ns}from"ag-charts-community";import{isDefined as K2}from"ag-charts-core";import{_ModuleSupport as z2}from"ag-charts-community";var{SeriesProperties:$2,FillGradientDefaults:H2,FillPatternDefaults:X2,FillImageDefaults:Y2,makeSeriesTooltip:q2,Property:Ce,Label:U2}=z2,Le=class extends $2{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new H2,this.fillPatternDefaults=new X2,this.fillImageDefaults=new Y2,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new U2,this.tooltip=q2()}};h([Ce],Le.prototype,"angleKey",2),h([Ce],Le.prototype,"radiusKey",2),h([Ce],Le.prototype,"angleName",2),h([Ce],Le.prototype,"radiusName",2),h([Ce],Le.prototype,"fill",2),h([Ce],Le.prototype,"fillGradientDefaults",2),h([Ce],Le.prototype,"fillPatternDefaults",2),h([Ce],Le.prototype,"fillImageDefaults",2),h([Ce],Le.prototype,"fillOpacity",2),h([Ce],Le.prototype,"stroke",2),h([Ce],Le.prototype,"strokeWidth",2),h([Ce],Le.prototype,"strokeOpacity",2),h([Ce],Le.prototype,"lineDash",2),h([Ce],Le.prototype,"lineDashOffset",2),h([Ce],Le.prototype,"cornerRadius",2),h([Ce],Le.prototype,"itemStyler",2),h([Ce],Le.prototype,"rotation",2),h([Ce],Le.prototype,"stackGroup",2),h([Ce],Le.prototype,"normalizedTo",2),h([Ce],Le.prototype,"label",2),h([Ce],Le.prototype,"tooltip",2);import{_ModuleSupport as j2}from"ag-charts-community";var{SectorBox:bd,motion:J2}=j2;function Z2(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.innerRadius)||isNaN(e.previousDatum.outerRadius))return"added";if(isNaN(t.innerRadius)||isNaN(t.outerRadius))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function Dd(e){return{toFn:(s,o,a)=>{let r,n,l,c,p;return a==="removed"?(r=e,n=e,l=o.innerRadius,c=o.outerRadius,p=new bd(r,n,l,c)):(r=o.startAngle,n=o.endAngle,l=isNaN(o.innerRadius)?s.innerRadius:o.innerRadius,c=isNaN(o.outerRadius)?s.outerRadius:o.outerRadius,p=o.clipSector),{startAngle:r,endAngle:n,innerRadius:l,outerRadius:c,clipSector:p}},fromFn:(s,o,a)=>{a=Z2(s,o,a);let r,n,l,c,p;a==="removed"||a==="updated"?(r=s.startAngle,n=s.endAngle,l=s.innerRadius,c=s.outerRadius,p=s.clipSector):(r=e,n=e,l=o.innerRadius,c=o.outerRadius),p??(p=new bd(r,n,l,c));const d=J2.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:r,endAngle:n,innerRadius:l,outerRadius:c,clipSector:p,phase:d}}}}function Q2(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle,clipSector:t.clipSector}}var{DEFAULT_POLAR_DIRECTION_KEYS:eA,DEFAULT_POLAR_DIRECTION_NAMES:tA,ChartAxisDirection:Ct,PolarAxis:iA,diff:sA,groupAccumulativeValueProperty:vd,keyProperty:oA,normaliseGroupTo:aA,valueProperty:rA,fixNumericExtent:nA,resetLabelFn:lA,seriesLabelFadeInAnimation:cA,seriesLabelFadeOutAnimation:pA,animationValidation:hA,angleBetween:dA,createDatumId:kd,CategoryScale:uA,Sector:fA,SectorBox:gA,motion:Md,isGradientFill:yA,applyShapeStyle:mA,getShapeStyle:kn}=Ns,SA=class extends Ns.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},ra=class extends Ns.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"radiusValue",propertyKeys:eA,propertyNames:tA,canHaveAxes:!0,animationResetFns:{item:Q2,label:lA}}),this.properties=new Le,this.NodeEvent=SA,this.groupScale=new uA,this.circleCache={r:0,cx:0,cy:0}}get defaultShapeStyle(){const e=this.axes[Ct.Angle]?.scale;return{...this.properties.fillGradientDefaults.toJson(),rotation:Ns.toDegrees(e.range[0])+90}}nodeFactory(){return new fA}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Ct.Angle){const s=t.getDomain(this,"angleValue-end","value",i),o=[s[0]>0?0:s[0],s[1]<0?0:s[1]];return nA(o)}else return t.getDomain(this,"radiusValue","key",i)}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:s}=this.properties,o=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),r=`${a}-trailing`,n=[];K2(s)&&n.push(aA([a,r],Math.abs(s))),o&&(this.processedData&&n.push(sA(this.id,this.processedData)),n.push(hA()));const l=this.visible?{}:{forceValue:0},c=this.axes[Ct.Radius]?.scale.type,p=this.axes[Ct.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[oA(i,c,{id:"radiusValue"}),rA(t,p,{id:"angleValue-raw",invalidValue:null,...l}),...vd(t,"normal","current",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},p),...vd(t,"trailing","current",{id:"angleValue-start",invalidValue:null,groupId:r,separateNegative:!0,...l},p),...n],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e===s.r&&t===s.cx&&i===s.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=this.createNodeData()??{};this.nodeData=t,this.nodeDataRefresh=!1}getAxisInnerRadius(){const e=this.axes[Ct.Radius];return e instanceof iA?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t}=this;if(!t||!e||e.type!=="grouped")return;const i=this.axes[Ct.Angle],s=this.axes[Ct.Radius],o=i?.scale,a=s?.scale;if(!o||!a)return;const r=t.resolveKeysById(this,"radiusValue",e),n=t.resolveColumnById(this,"angleValue-start",e),l=t.resolveColumnById(this,"angleValue-end",e),c=t.resolveColumnById(this,"angleValue-raw",e),p=t.resolveProcessedDataIndexById(this,"angleValue-range");let d=0;s instanceof li&&(d=s.groupPaddingInner);const{groupScale:u}=this,{index:f,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);u.domain=Array.from({length:y}).map((T,O)=>String(O)),u.range=[0,Math.abs(a.bandwidth??0)],u.paddingInner=y>1?d:0;const g=u.bandwidth>=1?u.bandwidth:u.rawBandwidth,m=i.isReversed(),S=s.isReversed(),x=S?this.radius:this.getAxisInnerRadius(),v=(S?this.getAxisInnerRadius():this.radius)+x,k=this.getSeriesDomain(Ct.Angle),{angleKey:L,radiusKey:A,angleName:D,radiusName:I,label:M}=this.properties,P=(T,O,_,F)=>{const E=this.getLabelText(O,T,L,"angle",k,M,{value:O,datum:T,angleKey:L,radiusKey:A,angleName:D,radiusName:I});if(E)return{x:_,y:F,text:E,textAlign:"center",textBaseline:"middle"}},R=[],w={itemId:A,nodeData:R,labelData:R};if(!this.visible)return w;const{dataSources:N}=e,C=N.get(this.id)??[];for(const{datumIndex:T,group:O}of t.forEachGroupDatum(this,e)){const _=C[T],F=r[T];if(F==null)return;const E=c[T],B=n[T],G=l[T],W=E>=0&&!Object.is(E,-0),V=O.aggregation[p][W?1:0],K=W===m;let $=o.convert(B,{clamp:!0}),X=o.convert(G,{clamp:!0}),U=o.convert(0,{clamp:!0}),J=o.convert(V,{clamp:!0});K&&([U,J]=[J,U],[$,X]=[X,$]);const j=v-a.convert(F)+u.convert(String(f)),Y=j+g,le=(j+Y)/2,de=$+dA($,X)/2,Z=Math.cos(de)*le,Q=Math.sin(de)*le,Ee=this.properties.label.enabled?P(_,E,Z,Q):void 0,ze=new gA($,X,j,Y);R.push({series:this,datum:_,datumIndex:T,point:{x:Z,y:Q,size:0},midPoint:{x:Z,y:Q},label:Ee,angleValue:E,radiusValue:F,innerRadius:j,outerRadius:Y,startAngle:U,endAngle:J,clipSector:ze,reversed:K,index:T})}return w}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemBaseStyle(e,t){const{properties:i}=this,s=this.getHighlightStyle(e,t?.datumIndex);return kn({fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??this.getStrokeWidth(i.strokeWidth),strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset,cornerRadius:s?.cornerRadius??i.cornerRadius,opacity:s.opacity??1},this.defaultShapeStyle,i.fillPatternDefaults,i.fillImageDefaults)}getItemStyleOverrides(e,t,i,s){const{id:o,properties:a}=this,{angleKey:r,radiusKey:n,itemStyler:l}=a;let c;return l!=null&&(c=this.cachedDatumCallback(kd(e,s?"highlight":"node"),()=>this.callWithContext(l,{seriesId:o,datum:t,highlighted:s,angleKey:r,radiusKey:n,...i}))),kn(c,this.defaultShapeStyle,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateSectorSelection(e,t){let i=[];if(t){const o=this.ctx.highlightManager?.getActiveHighlight();o?.datum&&o.series===this&&i.push(o)}else i=this.nodeData;const s=this.getShapeFillBBox();e.update(i,void 0,o=>this.getDatumId(o)).each((o,a)=>{const{datumIndex:r}=a,n=$l(a);if(n==null)return;const l=this.getItemBaseStyle(t,a),c=this.getItemStyleOverrides(String(r),n,l,t),p=c?.cornerRadius??l.cornerRadius,d=c?.fill??l.fill,u=Ns.isGradientFill(d)&&d.bounds!=="item"?{centerX:0,centerY:0}:void 0;mA(o,l,c,s,u),o.lineJoin="round",o.inset=o.stroke!=null?o.strokeWidth/2:0,o.startInnerCornerRadius=n.reversed?p:0,o.startOuterCornerRadius=n.reversed?p:0,o.endInnerCornerRadius=n.reversed?0:p,o.endOuterCornerRadius=n.reversed?0:p,t&&(o.startAngle=a.startAngle,o.endAngle=a.endAngle,o.clipSector=a.clipSector,o.innerRadius=a.innerRadius,o.outerRadius=a.outerRadius)})}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1,t.visible=!0):t.visible=!1})}getBarTransitionFunctions(){const e=this.axes[Ct.Angle]?.scale;let t=0;if(!e)return Dd(t);const i=Math.min(e.domain[0],e.domain[1]),s=Math.max(e.domain[0],e.domain[1]);return i<=0&&s>=0&&(t=e.convert(0)),Dd(t)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();Md.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),cA(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();Md.fromToMotion(this.id,"datums",t,[e],i),pA(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a}=this,{angleKey:r,angleName:n,radiusKey:l,radiusName:c,tooltip:p}=a,d=o[Ct.Angle],u=o[Ct.Radius];if(!i||!s||!d||!u)return;const f=s.dataSources.get(this.id)?.[e],y=i.resolveKeysById(this,"radiusValue",s)[e],g=i.resolveColumnById(this,"angleValue-raw",s)[e];if(y==null)return;const m=this.getItemBaseStyle(!1);return Object.assign(m,this.getItemStyleOverrides(String(e),e,m,!1)),this.formatTooltipWithContext(p,{heading:u.formatDatum(y,"tooltip",t,void 0,f,l),symbol:this.legendItemSymbol(),data:[{label:n,fallbackLabel:r,value:d.formatDatum(g,"tooltip",t,void 0,f,r)}]},{seriesId:t,datum:f,title:n,angleKey:r,angleName:n,radiusKey:l,radiusName:c,...m})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r,fillPatternDefaults:n,fillImageDefaults:l}=this.properties,c=kn({fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:r},this.defaultShapeStyle,n,l);return yA(c.fill)&&(c.fill={...c.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:c}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{angleKey:s,angleName:o,showInLegend:a}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i,label:{text:o??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(e){return kd(e.radiusValue)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}};ra.className="RadialBarSeries",ra.type="radial-bar";import{_ModuleSupport as xA}from"ag-charts-community";import{boolean as Id,constant as bA,number as DA,required as Mn,string as Ps}from"ag-charts-core";var{commonSeriesOptionsDefs:vA,radialBarSeriesThemeableOptionsDef:kA}=xA,MA={...vA,...kA,type:Mn(bA("radial-bar")),angleKey:Mn(Ps),radiusKey:Mn(Ps),angleName:Ps,radiusName:Ps,grouped:Id,stacked:Id,stackGroup:Ps,normalizedTo:DA};import{_ModuleSupport as na}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:IA}}=na,AA={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"conic",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:na.FILL_PATTERN_DEFAULTS,fillImageDefaults:na.FILL_IMAGE_DEFAULTS,strokeWidth:{$isUserOption:["./stroke",1,0]},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},highlight:na.multiSeriesHighlightStyle()},axes:{[IA.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:Ad}=V2.ThemeConstants,BC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:e=>new ra(e),defaultAxes:[{type:Ad.ANGLE_NUMBER},{type:Ad.RADIUS_CATEGORY}],themeTemplate:AA,stackable:!0,groupable:!0},Nd={type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,options:MA,create:e=>new ra(e)};import{_ModuleSupport as NA}from"ag-charts-community";import{_ModuleSupport as PA}from"ag-charts-community";import{_ModuleSupport as LA}from"ag-charts-community";var{Property:Pd}=LA,In=class extends Me{};h([Pd],In.prototype,"columnWidthRatio",2),h([Pd],In.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:RA,PolarAxis:OA,RadialColumnShape:CA,getRadialColumnWidth:TA}=PA,la=class extends zh{constructor(e){super(e,{animationResetFns:{item:hI}}),this.properties=new In}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new CA}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return pI(e)}isRadiusAxisCircle(){const e=this.axes[RA.Radius];return e instanceof OA?e.shape==="circle":!1}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),e.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:s=.5}=this.properties;return TA(e,t,this.radius,i,s)}};la.className="RadialColumnSeries",la.type="radial-column";import{_ModuleSupport as wA}from"ag-charts-community";import{boolean as Ld,constant as _A,number as FA,required as An,string as Ls}from"ag-charts-core";var{commonSeriesOptionsDefs:EA,radialColumnSeriesThemeableOptionsDef:BA}=wA,GA={...EA,...BA,type:An(_A("radial-column")),angleKey:An(Ls),radiusKey:An(Ls),angleName:Ls,radiusName:Ls,grouped:Ld,stacked:Ld,stackGroup:Ls,normalizedTo:FA};import{_ModuleSupport as ca}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:Rd,POLAR_AXIS_SHAPE:Od}}=ca,WA={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:ca.FILL_PATTERN_DEFAULTS,fillImageDefaults:ca.FILL_IMAGE_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:{$isUserOption:["./stroke",1,0]},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:ca.multiSeriesHighlightStyle()},axes:{[Rd.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:Od.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[Rd.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:Od.CIRCLE},innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:Cd}=NA.ThemeConstants,HC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:e=>new la(e),defaultAxes:[{type:Cd.ANGLE_CATEGORY},{type:Cd.RADIUS_NUMBER}],themeTemplate:WA,stackable:!0,groupable:!0},Td={type:"series",name:"radial-column",chartType:"polar",enterprise:!0,options:GA,create:e=>new la(e)};import{_ModuleSupport as pa}from"ag-charts-community";import{_ModuleSupport as Mi}from"ag-charts-community";import{_ModuleSupport as VA}from"ag-charts-community";var{SvgPath:KA,Rotatable:zA,Translatable:$A,Scalable:HA}=VA,Nn=class extends zA(HA($A(KA))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};Nn.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";import{_ModuleSupport as Pn}from"ag-charts-community";import"ag-charts-core";var{BaseProperties:Rs,makeSeriesTooltip:XA,SeriesProperties:YA,PropertiesArray:Ln,AxisLabel:qA,Property:z,Label:UA}=Pn,wd=class extends UA{};h([z],wd.prototype,"spacing",2);var Ye=class extends Rs{constructor(){super(...arguments),this.label=new wd}};h([z],Ye.prototype,"text",2),h([z],Ye.prototype,"value",2),h([z],Ye.prototype,"shape",2),h([z],Ye.prototype,"placement",2),h([z],Ye.prototype,"spacing",2),h([z],Ye.prototype,"size",2),h([z],Ye.prototype,"rotation",2),h([z],Ye.prototype,"fill",2),h([z],Ye.prototype,"fillOpacity",2),h([z],Ye.prototype,"stroke",2),h([z],Ye.prototype,"strokeWidth",2),h([z],Ye.prototype,"strokeOpacity",2),h([z],Ye.prototype,"lineDash",2),h([z],Ye.prototype,"lineDashOffset",2),h([z],Ye.prototype,"label",2);var Tt=class extends Rs{constructor(){super(...arguments),this.enabled=!0,this.fills=new Ln(Pn.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([z],Tt.prototype,"enabled",2),h([z],Tt.prototype,"fills",2),h([z],Tt.prototype,"fillMode",2),h([z],Tt.prototype,"fill",2),h([z],Tt.prototype,"fillOpacity",2),h([z],Tt.prototype,"stroke",2),h([z],Tt.prototype,"strokeWidth",2),h([z],Tt.prototype,"strokeOpacity",2),h([z],Tt.prototype,"lineDash",2),h([z],Tt.prototype,"lineDashOffset",2);var Os=class extends Rs{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};h([z],Os.prototype,"values",2),h([z],Os.prototype,"step",2),h([z],Os.prototype,"minSpacing",2),h([z],Os.prototype,"maxSpacing",2);var jA=class extends qA{},et=class extends Rs{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new Ln(Pn.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new Os,this.label=new jA}};h([z],et.prototype,"min",2),h([z],et.prototype,"max",2),h([z],et.prototype,"fills",2),h([z],et.prototype,"fillMode",2),h([z],et.prototype,"fill",2),h([z],et.prototype,"fillOpacity",2),h([z],et.prototype,"stroke",2),h([z],et.prototype,"strokeWidth",2),h([z],et.prototype,"strokeOpacity",2),h([z],et.prototype,"lineDash",2),h([z],et.prototype,"lineDashOffset",2),h([z],et.prototype,"defaultFill",2),h([z],et.prototype,"interval",2),h([z],et.prototype,"label",2);var wt=class extends Rs{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};h([z],wt.prototype,"enabled",2),h([z],wt.prototype,"radiusRatio",2),h([z],wt.prototype,"spacing",2),h([z],wt.prototype,"fill",2),h([z],wt.prototype,"fillOpacity",2),h([z],wt.prototype,"stroke",2),h([z],wt.prototype,"strokeWidth",2),h([z],wt.prototype,"strokeOpacity",2),h([z],wt.prototype,"lineDash",2),h([z],wt.prototype,"lineDashOffset",2);var _d=class extends Et{};h([z],_d.prototype,"text",2);var Fd=class extends us{};h([z],Fd.prototype,"text",2);var Te=class extends YA{constructor(){super(...arguments),this.startAngle=0,this.endAngle=0,this.segmentation=new bs,this.defaultColorRange=[],this.targets=new Ln(Ye),this.defaultTarget=new Ye,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new et,this.bar=new Tt,this.needle=new wt,this.label=new _d,this.secondaryLabel=new Fd,this.tooltip=XA()}};h([z],Te.prototype,"value",2),h([z],Te.prototype,"startAngle",2),h([z],Te.prototype,"endAngle",2),h([z],Te.prototype,"segmentation",2),h([z],Te.prototype,"defaultColorRange",2),h([z],Te.prototype,"targets",2),h([z],Te.prototype,"defaultTarget",2),h([z],Te.prototype,"outerRadiusRatio",2),h([z],Te.prototype,"innerRadiusRatio",2),h([z],Te.prototype,"outerRadius",2),h([z],Te.prototype,"innerRadius",2),h([z],Te.prototype,"cornerRadius",2),h([z],Te.prototype,"cornerMode",2),h([z],Te.prototype,"spacing",2),h([z],Te.prototype,"scale",2),h([z],Te.prototype,"bar",2),h([z],Te.prototype,"needle",2),h([z],Te.prototype,"label",2),h([z],Te.prototype,"secondaryLabel",2),h([z],Te.prototype,"tooltip",2);import{_ModuleSupport as JA}from"ag-charts-community";var{SectorBox:Rn}=JA;function ZA(e){const{startAngle:t,endAngle:i,clipStartAngle:s,clipEndAngle:o,innerRadius:a,outerRadius:r}=e;if(!(s==null||o==null))return new Rn(Math.max(s,t),Math.min(o,i),a,r)}function Ed(e,t,i){return Math.max(e,i.startAngle)<=Math.min(t,i.endAngle)}function On(e){return e.clipStartAngle!=null&&e.clipEndAngle!=null}function Cn(e,t){const{clipStartAngle:i,clipEndAngle:s,innerRadius:o,outerRadius:a}=e;return new Rn(i,t?i:s,o,a)}function Bd(e,t){const i=e?"initial":"update";return{node:{fromFn(a,r){const n=a.previousDatum;let{startAngle:l,endAngle:c}=n??r;const p=n!=null&&On(n)?Cn(n,e):void 0,d=On(r)?Cn(r,e):void 0;let u;return p!=null&&d!=null?u=p:p==null&&d!=null?(u=d,l=r.startAngle,c=r.endAngle):p!=null&&d==null?(u=void 0,l=r.startAngle,c=r.endAngle):e&&(c=l),{startAngle:l,endAngle:c,clipSector:u,phase:i}},toFn(a,r){const{startAngle:n,endAngle:l}=r;let c;return On(r)&&(c=Cn(r,!1)),{startAngle:n,endAngle:l,clipSector:c}},applyFn(a,r){const{startAngle:n,endAngle:l}=r;let{clipSector:c}=r;c!=null&&(c=new Rn(Math.max(n,c.startAngle),Math.min(l,c.endAngle),c.innerRadius,c.outerRadius));const p=c==null||Ed(n,l,c);a.startAngle=n,a.endAngle=l,a.clipSector=c,a.visible=p}},needle:{fromFn(a){let{angle:r}=a.previousDatum??a.datum;return e&&(r=t),{rotation:r,phase:i}},toFn(a,r){const{angle:n}=r;return{rotation:n}}}}}function Tn(e,t){const{startAngle:i,endAngle:s}=t,o=ZA(t),a=o==null||Ed(i,s,o);return{startAngle:i,endAngle:s,clipSector:o,visible:a}}function Gd(e,t){const{angle:i}=t;return{rotation:i}}var QA={top:0,middle:.5,bottom:1};function eN(e,t,i,s,o,a){const{padding:r,textAlign:n,verticalAlign:l}=s;let c,p;if(i.each((k,L)=>{L.label==="primary"?c=L:L.label==="secondary"&&(p=L)}),c==null)return;const d=xs(e.id,t,c,a?.label);if(d==null)return;const u=p!=null?xs(e.id,t,p,a?.secondaryLabel):void 0,f={padding:r},y=n==="center"?2:1,g=l==="middle"?2:1,m=k=>({width:Math.sqrt(Math.max(o**2-(k/g)**2,0))*y,height:Math.min(k,g*o),meta:null});let S,x,b;if(p!=null&&u!=null){const k=xc(d,c,u,p,f,m);S=k?.label,x=k?.secondaryLabel,b=k?.height??0}else{const k=hs(d,c,f,m);S=k?.[0],x=void 0,b=k?.[0].height??0}const v=b*QA[l];i.each((k,L)=>{let A;if(L.label==="primary"?A=S:L.label==="secondary"&&(A=x),A==null){k.visible=!1;return}k.visible=!0,k.text=A.text,k.fontSize=A.fontSize,k.lineHeight=A.lineHeight,k.textAlign=n,k.textBaseline="middle";const D=L.label==="primary"?A.height/2:b-A.height/2;k.y=L.centerY+D-v,k.x=L.centerX})}var{fromToMotion:Cs,resetMotion:Wd,CachedTextMeasurerPool:tN,SeriesNodePickMode:Vd,StateMachine:iN,createDatumId:wn,normalizeAngle360:Kd,normalizeAngle360Inclusive:_n,isBetweenAngles:ha,sectorBox:sN,toDegrees:oN,toRadians:da,BBox:aN,Group:ii,PointerEvents:ua,Selection:si,Sector:rN,SectorBox:nN,Text:zd,Marker:lN,getColorStops:cN,tickFormat:pN}=Mi,hN={inside:90,middle:0,outside:-90},dN=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],uN=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],fa=class extends Mi.Series{constructor(e){super({moduleCtx:e,pickModes:[Vd.EXACT_SHAPE_MATCH,Vd.NEAREST_NODE]}),this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.properties=new Te,this.scale=new sl,this.scaleGroup=this.contentGroup.appendChild(new ii({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new ii({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new ii({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new ii({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new ii({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new ii({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new ii({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new ii({name:"tickGroup"})),this.scaleSelection=si.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=si.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=si.select(this.itemNeedleGroup,Nn),this.targetSelection=si.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=si.select(this.itemTargetLabelGroup,zd),this.labelSelection=si.select(this.itemLabelGroup,zd),this.highlightTargetSelection=si.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=si.select(this.tickGroup,Mi.TransformableText),this.datumUnion=new Vp,this.animationState=new iN("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=ua.None,this.tickGroup.pointerEvents=ua.None,this.itemNeedleGroup.pointerEvents=ua.None,this.itemLabelGroup.pointerEvents=ua.None}get hasData(){return this.properties.value!=null}nodeFactory(){return new rN}markerFactory(){const e=new lN;return e.size=1,e}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){const{min:t,max:i}=this.properties.scale;return zp(e,{min:t,max:i})}layoutScale(){const{scale:e,properties:t}=this,{seriesRectWidth:i,seriesRectHeight:s}=this.nodeDataDependencies,{scale:o,outerRadius:a}=this.properties,{min:r,max:n,label:l,interval:c}=o,p=da(t.startAngle-90),d=da(t.endAngle-90),f=_n(d-p)>Math.PI,y=f||ha(1.5*Math.PI,p,d),g=f||ha(0*Math.PI,p,d),m=f||ha(.5*Math.PI,p,d),S=f||ha(1*Math.PI,p,d);let x;S&&!g?x="right":!S&&g?x="left":x="center";let b;y&&!m?b="bottom":!y&&m?b="top":b="middle";const v=sN({startAngle:p,endAngle:d,innerRadius:0,outerRadius:.5}),k=-(v.x+v.width/2)*2,L=-(v.y+v.height/2)*2,A=Math.min(i/v.width,s/v.height);e.domain=[r,n],e.range=[p,d],e.arcLength=A/2;const{maxSpacing:D,minSpacing:I}=c,{arcLength:M}=e,P=D?Math.floor(M/D):1,R=I?Math.floor(M/I):1/0,w=Math.floor(4/Math.PI*Math.abs(e.range[0]-e.range[1])),N=Math.max(P,Math.min(R,w)),C=c.values??e.ticks({nice:!1,interval:c.step,minTickCount:P,maxTickCount:R,tickCount:N})?.ticks??[],T=pN(C,typeof l.format=="string"?l.format:void 0),O=tN.getMeasurer({font:l}),_=C.map((V,K)=>{let $;if(l.formatter&&($=$r(this.ctx,l.formatter,{value:V,index:K,domain:e.domain,boundSeries:void 0})),$??($=T?.(V)),$==null)return;const{width:X,height:U}=O.measureText($);return{index:K,value:V,text:$,width:X,height:U}}).filter(V=>V!=null),F=_.reduce((V,K)=>Math.max(V,K.width),0),E=_.reduce((V,K)=>Math.max(V,K.height),0),B=l.enabled?Math.max(F,E)+l.spacing:0,G=Math.max(.5*A-B,0),W=a??G;return this.centerX=i/2+k*W,this.centerY=s/2+L*W,this.radius=W,this.textAlign=x,this.verticalAlign=b,_}createConicGradient(e,t){const{scale:i}=this,{domain:s,range:o}=i,[a,r]=o,{defaultColorRange:n}=this.properties,l=Kd((a+r)/2+Math.PI),c=_n(r-a);return{type:"gradient",gradient:"conic",colorSpace:"oklch",colorStops:cN(e,n,s,t).map(({color:d,stop:u})=>(u=Math.min(Math.max(u,0),1),u=(a+c*u-l)/(2*Math.PI),u=(u%1+1)%1,{stop:u,color:d})),rotation:oN(l)+90}}getShapeFillBBox(){const{centerX:e,centerY:t,radius:i}=this;return new aN(e-i,t-i,2*i,2*i)}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:s=t.text,value:o=t.value??0,shape:a=t.shape??"triangle",rotation:r=t.rotation??0,strokeWidth:n=t.strokeWidth??0,placement:l=t.placement??"middle",spacing:c=t.spacing??0,size:p=t.size??0,fill:d=t.fill??"black",fillOpacity:u=t.fillOpacity??1,stroke:f=t.stroke??"black",strokeOpacity:y=t.strokeOpacity??1,lineDash:g=t.lineDash??[0],lineDashOffset:m=t.lineDashOffset??0}=i,{enabled:S=t.label.enabled,color:x=t.label.color??"black",fontStyle:b=t.label.fontStyle??"normal",fontWeight:v=t.label.fontWeight??"normal",fontSize:k=t.label.fontSize,fontFamily:L=t.label.fontFamily,spacing:A=t.label.spacing??0}=i.label;return{text:s,value:o,shape:a,placement:l,spacing:c,size:p,rotation:r,fill:d,fillOpacity:u,stroke:f,strokeWidth:n,strokeOpacity:y,lineDash:g,lineDashOffset:m,label:{enabled:S,color:x,fontStyle:b,fontWeight:v,fontSize:k,fontFamily:L,spacing:A}}})}getTargetRadius(e){const{radius:t,properties:i}=this,{innerRadiusRatio:s,outerRadiusRatio:o}=i,{placement:a,spacing:r,size:n}=e,l=t*o,c=t*s;switch(a){case"inside":return Math.max(c-r-n/2,0);case"outside":return l+r+n/2;default:return(c+l)/2}}getTargetLabel(e){const{scale:t}=this,{value:i,size:s,placement:o,label:a}=e,{spacing:r,color:n,fontStyle:l,fontWeight:c,fontSize:p,fontFamily:d}=a,u=void 0,f=t.convert(i),y=Kd(f)/(Math.PI/2)|0,g=s/2+r;let m,S,x,b;switch(o){case"outside":({textAlign:m,textBaseline:S}=dN[y]),x=g*Math.cos(f),b=g*Math.sin(f);break;case"inside":({textAlign:m,textBaseline:S}=uN[y]),x=-g*Math.cos(f),b=-g*Math.sin(f);break;default:m="center",S="bottom",x=0,b=-g;break}return{offsetX:x,offsetY:b,fill:n,textAlign:m,textBaseline:S,fontStyle:l,fontWeight:c,fontSize:p,fontFamily:d,lineHeight:u}}createNodeData(){const e=this.layoutScale(),{id:t,scale:i,properties:s,radius:o,centerX:a,centerY:r}=this,{value:n,innerRadiusRatio:l,outerRadiusRatio:c,segmentation:p,cornerRadius:d,cornerMode:u,needle:f,bar:y,scale:g,label:m,secondaryLabel:S}=s,{outerRadius:x=o*c,innerRadius:b=o*l}=s,v=this.getTargets(),k=[],L=[],A=[],D=[],I=[],M=u==="item",P=i.convert(i.domain[0]),R=i.convert(n),w=Math.ceil(_n(R-P)*o);let N=p.enabled?p.interval.getSegments(i,w):void 0;const C=y.enabled?y.fill??this.createConicGradient(y.fills,y.fillMode):"rgba(0,0,0,0)",T=g.fill??(y.enabled&&g.fills.length===0?g.defaultFill:void 0)??this.createConicGradient(g.fills,g.fillMode);if(N==null&&M){const O=Math.min(...i.domain),_=Math.max(...i.domain),F={value:n,segmentStart:O,segmentEnd:_},B=Math.min(d,(x-b)/2)/((b+x)/2);k.push({series:this,itemId:"value",datum:F,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:x,innerRadius:b,startAngle:P-B,endAngle:R+B,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:d,endCornerRadius:d,fill:C}),I.push({series:this,itemId:"scale",datum:F,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:x,innerRadius:b,startAngle:i.range[0]-B,endAngle:i.range[1]+B,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:d,endCornerRadius:d,fill:T})}else{N??(N=i.domain);for(let O=0;O<N.length-1;O++){const _=N[O],F=N[O+1],E={value:n,segmentStart:_,segmentEnd:F},B=O===0,G=O===N.length-2,W=i.convert(_),V=i.convert(F);k.push({series:this,itemId:`value-${O}`,datum:E,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:x,innerRadius:b,startAngle:W,endAngle:V,clipStartAngle:P,clipEndAngle:R,startCornerRadius:M||B?d:0,endCornerRadius:M||G?d:0,fill:C}),I.push({series:this,itemId:`scale-${O}`,datum:E,datumIndex:{type:0},type:0,centerX:a,centerY:r,outerRadius:x,innerRadius:b,startAngle:W,endAngle:V,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:M||B?d:0,endCornerRadius:M||G?d:0,fill:T})}}if(!f.enabled&&m.enabled){const{text:O,color:_,fontSize:F,minimumFontSize:E,fontStyle:B,fontWeight:G,fontFamily:W,lineHeight:V,formatter:K=$=>this.formatLabel($.value)}=m;D.push({label:"primary",centerX:a,centerY:r,text:O,value:n,fill:_,fontSize:F,minimumFontSize:E,fontStyle:B,fontWeight:G,fontFamily:W,lineHeight:V,formatter:K})}if(!f.enabled&&S.enabled){const{text:O,color:_,fontSize:F,minimumFontSize:E,fontStyle:B,fontWeight:G,fontFamily:W,lineHeight:V,formatter:K}=S;D.push({label:"secondary",centerX:a,centerY:r,text:O,value:n,fill:_,fontSize:F,minimumFontSize:E,fontStyle:B,fontWeight:G,fontFamily:W,lineHeight:V,formatter:K})}if(f.enabled){let O=f.radiusRatio!=null?o*f.radiusRatio:b;O=Math.max(O-f.spacing,0);const _=i.convert(n);A.push({centerX:a,centerY:r,radius:O,angle:_,series:this})}for(let O=0;O<v.length;O+=1){const _=v[O],{value:F,text:E,size:B,shape:G,fill:W,fillOpacity:V,stroke:K,strokeWidth:$,strokeOpacity:X,lineDash:U,lineDashOffset:J}=_;if(F<Math.min(...i.domain)||F>Math.max(...i.domain))continue;const oe=this.getTargetRadius(_),j=i.convert(F),Y=da(_.rotation+hN[_.placement]);L.push({series:this,itemId:`target-${O}`,midPoint:{x:oe*Math.cos(j)+a,y:oe*Math.sin(j)+r},datum:{value:F},datumIndex:{type:1,index:O},type:1,value:F,text:E,centerX:a,centerY:r,shape:G,radius:oe,angle:j,rotation:Y,size:B,fill:W,fillOpacity:V,stroke:K,strokeOpacity:X,strokeWidth:$,lineDash:U,lineDashOffset:J,label:this.getTargetLabel(_)})}return{itemId:t,nodeData:k,needleData:A,targetData:L,labelData:D,scaleData:I,tickData:e}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,needleSelection:s,targetSelection:o,targetLabelSelection:a,scaleSelection:r,highlightTargetSelection:n,tickSelection:l}=this,c=this.checkResize(e);this.updateSelections(c),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const p=this.contextNodeData?.nodeData??[],d=this.contextNodeData?.labelData??[],u=this.contextNodeData?.needleData??[],f=this.contextNodeData?.targetData??[],y=this.contextNodeData?.scaleData??[],g=this.contextNodeData?.tickData??[],m=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:y,scaleSelection:r}),this.updateScaleNodes({scaleSelection:r}),this.needleSelection=this.updateNeedleSelection({needleData:u,needleSelection:s}),this.updateNeedleNodes({needleSelection:s}),this.targetSelection=this.updateTargetSelection({targetData:f,targetSelection:o}),this.updateTargetNodes({targetSelection:o,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:f,targetLabelSelection:a}),this.updateTargetLabelNodes({targetLabelSelection:a}),this.datumSelection=this.updateDatumSelection({nodeData:p,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:d,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:m!=null?[m]:[],targetSelection:n}),this.updateTargetNodes({targetSelection:n,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:g,tickSelection:l}),this.updateTickNodes({tickSelection:l}),c&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>wn(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i,properties:s}=this,{bar:o,segmentation:a}=s,r=a.spacing??0,{fillOpacity:n,stroke:l,strokeOpacity:c,lineDash:p,lineDashOffset:d}=o,u=this.getStrokeWidth(o.strokeWidth),f=i.animationManager.isSkipped(),y=this.getShapeFillBBox();t.each((g,m)=>{const{centerX:S,centerY:x,innerRadius:b,outerRadius:v,startCornerRadius:k,endCornerRadius:L,fill:A}=m;g.centerX=S,g.centerY=x,g.innerRadius=b,g.outerRadius=v,g.pointerEvents=this.properties.bar.enabled?Mi.PointerEvents.All:Mi.PointerEvents.None,g.fill=A,g.fillBBox=y,g.fillOpacity=n,g.stroke=l,g.strokeOpacity=c,g.strokeWidth=u,g.lineDash=p,g.lineDashOffset=d,g.startOuterCornerRadius=k,g.startInnerCornerRadius=k,g.endOuterCornerRadius=L,g.endInnerCornerRadius=L,g.radialEdgeInset=(r+g.strokeWidth)/2,g.concentricEdgeInset=g.strokeWidth/2,(f||g.previousDatum==null)&&g.setProperties(Tn(g,m))}),this.datumUnion.update(t,this.itemGroup,Mi.Sector,(g,m,S)=>{g.clipSector??(g.clipSector=new nN(NaN,NaN,NaN,NaN)),g.centerX=m.centerX,g.centerY=m.centerY,g.outerRadius=g.clipSector.outerRadius=m.outerRadius,g.innerRadius=g.clipSector.innerRadius=m.innerRadius,g.startAngle=g.clipSector.startAngle=m.startAngle,g.startInnerCornerRadius=m.startInnerCornerRadius,g.startOuterCornerRadius=m.startOuterCornerRadius,g.endAngle=S.endAngle,g.clipSector.endAngle=S.clipSector?.endAngle??S.endAngle,g.endInnerCornerRadius=S.endInnerCornerRadius,g.endOuterCornerRadius=S.endOuterCornerRadius,g.pointerEvents=Mi.PointerEvents.None})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>wn(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,{scale:i,segmentation:s}=this.properties,o=s.spacing??0,{fillOpacity:a,stroke:r,strokeOpacity:n,strokeWidth:l,lineDash:c,lineDashOffset:p}=i,d=this.getShapeFillBBox();t.each((u,f)=>{const{centerX:y,centerY:g,innerRadius:m,outerRadius:S,startCornerRadius:x,endCornerRadius:b,fill:v}=f;u.centerX=y,u.centerY=g,u.innerRadius=m,u.outerRadius=S,u.fill=v,u.fillBBox=d,u.fillOpacity=a,u.stroke=r,u.strokeOpacity=n,u.strokeWidth=l,u.lineDash=c,u.lineDashOffset=p,u.startOuterCornerRadius=x,u.startInnerCornerRadius=x,u.endOuterCornerRadius=b,u.endInnerCornerRadius=b,u.radialEdgeInset=(o+u.strokeWidth)/2,u.concentricEdgeInset=u.strokeWidth/2,u.setProperties(Tn(u,f))})}updateNeedleSelection(e){return e.needleSelection.update(e.needleData,void 0,()=>wn([]))}updateNeedleNodes(e){const{needleSelection:t}=e,{fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:r,lineDash:n,lineDashOffset:l}=this.properties.needle,c=this.ctx.animationManager.isSkipped();t.each((p,d)=>{const{centerX:u,centerY:f,radius:y}=d,g=y*2;p.d=Nn.defaultPathData,p.fill=i,p.fillOpacity=s,p.stroke=o,p.strokeOpacity=a,p.strokeWidth=r/g,p.lineDash=n.map(m=>m/g),p.lineDashOffset=l/g,p.translationX=u,p.translationY=f,p.scalingX=g,p.scalingY=g,c&&p.setProperties(Gd(p,d))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e,s=i?this.properties.highlightStyle.item:void 0;t.each((o,a)=>{const{centerX:r,centerY:n,angle:l,radius:c,shape:p,size:d,rotation:u,fill:f,fillOpacity:y,stroke:g,strokeOpacity:m,strokeWidth:S,lineDash:x,lineDashOffset:b}=a;o.shape=p==="line"?$p:p,o.size=d,o.fill=s?.fill??f,o.fillOpacity=s?.fillOpacity??y,o.stroke=s?.stroke??g,o.strokeOpacity=s?.strokeOpacity??m,o.strokeWidth=s?.strokeWidth??S,o.lineDash=s?.lineDash??x,o.lineDashOffset=s?.lineDashOffset??b,o.translationX=r+c*Math.cos(l),o.translationY=n+c*Math.sin(l),o.rotation=l+u})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,s)=>{const{centerX:o,centerY:a,radius:r,angle:n,text:l}=s,{offsetX:c,offsetY:p,fill:d,fontStyle:u,fontWeight:f,fontSize:y,fontFamily:g,textAlign:m,textBaseline:S}=s.label;if(l==null){i.visible=!1;return}i.visible=!0,i.x=o+r*Math.cos(n)+c,i.y=a+r*Math.sin(n)+p,i.text=l,i.fill=d,i.fontStyle=u,i.fontWeight=f,i.fontSize=y,i.fontFamily=g,i.textAlign=m,i.textBaseline=S})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>t.label)}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((s,o)=>{s.fill=o.fill,s.fontStyle=o.fontStyle,s.fontWeight=o.fontWeight,s.fontFamily=o.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.index)}updateTickNodes(e){const{scale:t,radius:i,centerX:s,centerY:o,properties:a}=this,{enabled:r,color:n,fontFamily:l,fontSize:c,fontStyle:p,fontWeight:d,spacing:u}=a.scale.label,f=da(a.scale.label.rotation??0);e.tickSelection.each((y,g)=>{if(!r){y.visible=!1;return}y.visible=!0,y.text=g.text,y.fill=n,y.fontFamily=l,y.fontSize=c,y.fontStyle=p,y.fontWeight=d,y.textAlign="center",y.textBaseline="middle";const m=t.convert(g.value),{width:S,height:x}=g,b=Math.abs(i*Math.cos(m)),v=Math.abs(i*Math.sin(m)),k=Math.min(Math.max(Math.abs(i/Math.tan(m)),b-S/2),b+S/2),L=Math.min(Math.max(Math.abs(i*Math.tan(m)),v-x/2),v+x/2),A=Math.hypot(k,L),D=s+(A+u)*Math.cos(m),I=o+(A+u)*Math.sin(m);y.x=D,y.y=I,y.rotationCenterX=D,y.rotationCenterY=I,y.rotation=f})}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,radius:i,textAlign:s,verticalAlign:o}=this,{spacing:a,innerRadiusRatio:r}=this.properties;eN(this,this.ctx,t,{padding:a,textAlign:s,verticalAlign:o},i*r,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),Wd([this.datumSelection],Tn),Wd([this.needleSelection],Gd),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i,s,o,a;if(this.labelSelection.each((r,n)=>{r.opacity=1,n.label==="primary"?(i=r.previousDatum?.value??e.from??n.value,s=n.value):n.label==="secondary"&&(o=r.previousDatum?.value??e.from??n.value,a=n.value)}),!this.labelsHaveExplicitText())if(s==null||a==null)this.formatLabelText();else if(i===s&&o===a)this.formatLabelText({label:s,secondaryLabel:a});else{const r=`${this.id}_labels`;t.animate({id:r,groupId:"label",from:{label:i,secondaryLabel:o},to:{label:s,secondaryLabel:a},phase:e.phase??"update",onUpdate:n=>this.formatLabelText(n)})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=Bd(!0,this.scale.range[0]);Cs(this.id,"node",e,[this.datumSelection],t,(s,o)=>o.itemId),Cs(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),Cs(this.id,"label",e,[this.labelSelection],Kp,(s,o)=>o.label),this.animateLabelText({from:this.properties.scale.min,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=Bd(!1,this.scale.range[0]);Cs(this.id,"node",e,[this.datumSelection],t,(s,o)=>o.itemId),Cs(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}dataCount(){return NaN}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:s}=i;let o,a;if(e.type===0?(o=i.value,a=i.label.text):{value:o,text:a}=i.targets[e.index],o!=null)return this.formatTooltipWithContext(s,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(o)}]},{seriesId:t,title:void 0,datum:void 0,value:o})}pickNodeClosestDatum(e){return Xp(this,e)}pickFocus(e){return Yp(this,e)}getCaptionText(){const{value:e}=this.properties,t=[];return t.push(this.formatLabel(e)),this.labelSelection.each((i,s)=>{const o=xs(this.id,this.ctx,s);o!=null&&t.push(o)}),t.join(". ")}getCategoryValue(e){}datumIndexForCategoryValue(e){}};fa.className="RadialGaugeSeries",fa.type="radial-gauge";var{FONT_SIZE_RATIO:fN}=pa,ZC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["gauge"],identifier:"radial-gauge",moduleFactory:e=>new fa(e),themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{outerRadiusRatio:1,innerRadiusRatio:.8,startAngle:270,endAngle:450,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},pa.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",pa.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:12}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},needle:{enabled:!1,fill:{$ref:"foregroundColor"},spacing:10},label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:56,minimumFontSize:18/56,fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},secondaryLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:fN.LARGE},minimumFontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"}},tooltip:{range:{$path:["/tooltip/range",10]}}}}},$d={type:"series",name:"radial-gauge",chartType:"gauge",enterprise:!0,options:pa.radialGaugeSeriesOptionsDef,create:e=>new fa(e)};import{_ModuleSupport as ga}from"ag-charts-community";import{_ModuleSupport as gN}from"ag-charts-community";import{Logger as yN}from"ag-charts-core";function Hd(e){e.nodes.sort((t,i)=>Math.round((t.datum.y-i.datum.y)*100)/100||-(t.datum.size-i.datum.size))}function mN({nodes:e,size:t},{seriesRectHeight:i,nodeSpacing:s,sizeScale:o}){const a=i*t*o;let r=(i-(a+s*(e.length-1)))/2;e.forEach(({datum:n})=>{const l=i*n.size*o;n.y=r,n.height=l,r+=l+s})}function SN(e,t){const{nodes:i}=e,{seriesRectHeight:s,nodeSpacing:o}=t;Hd(e);let a=0,r=0;for(const{datum:c}of i){const p=Math.max(r-c.y,0);c.y+=p,a+=p,r=c.y+c.height+o}if(r-o<s)return a>0;let l=s;for(let c=i.length-1;c>=0;c-=1){const{datum:p}=i[c],d=p.y+p.height,u=Math.min(l-d,0);p.y+=u,a+=u,l=p.y-o}return!0}function Fn(e,t,i,s,o,a,r,n){const l=(i-e)/(s-t),c=(r-o)/(n-a),p=((a-t)*(l*c)+e*c-o*l)/(c-l);return e<i?p>e&&p<Math.min(i,r):p<e&&p>Math.max(i,r)}function Xd(e,t){let i=!1;const s=e.nodes.filter(a=>t(a).length===1);let o=!0;for(let a=0;o&&a<s.length;a+=1){o=!1;for(let r=0;r<s.length-1;r+=1){const{datum:n}=s[r],l=t(s[r])[0].node.datum,{datum:c}=s[r+1],p=t(s[r+1])[0].node.datum;if(!(Fn(n.x,n.y,l.x,l.y,c.x,c.y,p.x,p.y)||Fn(n.x,n.y+n.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,p.x,p.y+p.height/2)||Fn(n.x,n.y+n.height,l.x,l.y+l.height,c.x,c.y+c.height,p.x,p.y+p.height)))continue;const u=s[r];s[r]=s[r+1],s[r+1]=u;const f=n.y;n.y=c.y+c.height-n.height,c.y=f,i=!0,o=!0}}return i}function xN(e){let t=!1;return Hd(e),t=Xd(e,i=>i.linksBefore)||t,t=Xd(e,i=>i.linksAfter)||t,t}function bN(e){if(e.length===0)return;let t=0,i=0;for(const{node:{datum:s}}of e)t+=s.y*s.size,i+=s.size;return t/i}function Yd(e,t,i,s){return e.nodes.forEach(({datum:o,linksBefore:a,linksAfter:r})=>{const n=s===1?a:r,l=s===1?r:a,c=bN(n);if(c!=null){const p=l.length!==0?i:1;o.y=o.y+(c-o.y)*p}}),SN(e,t)}function qd(e,t,i){let s=!1;for(const o of e)s=Yd(o,t,i,1)||s;return s}function DN(e,t,i){let s=!1;for(let o=e.length-1;o>=0;o-=1)s=Yd(e[o],t,i,-1)||s;return s}function Ud(e){let t=!1;for(let i=e.length-1;i>=0;i-=1)t=xN(e[i])||t;return t}function vN(e,t){e.forEach(s=>{mN(s,t)});let i=!1;for(let s=0;s<6;s+=1){const o=qd(e,t,1);i=DN(e,t,.5);const a=Ud(e);if(!o&&!i&&!a)break}i&&(qd(e,t,1),Ud(e))}import{_ModuleSupport as kN}from"ag-charts-community";var{BBox:MN,Path:IN,SceneChangeDetection:Zi,splitBezier2D:AN}=kN;function ya(e,t,i,s,o,a,r,n,l,c){let p,d;if(o!==i&&l!==r){const L=-(s-t)/(o-i),A=-(n-a)/(l-r);p=(r-i+L*t-A*a)/(L-A),d=L*(p-t)+i}else if(o===i&&l!==r)p=t,d=-(n-a)/(l-r)*(p-n)+l;else if(o!==i&&l===r)p=n,d=-(s-t)/(o-i)*(p-t)+i;else throw new Error("Offsetting flat bezier curve");const u=Math.hypot(i-d,t-p),f=(u+c)/u,y=Math.hypot(l-d,n-p),g=(y+c)/y,m=p+(s-p)*f,S=d+(o-d)*f,x=p+(a-p)*g,b=d+(r-d)*g,v=p+(n-p)*g,k=d+(l-d)*g;e.cubicCurveTo(m,S,x,b,v,k)}var Ii=class extends IN{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const e=Math.min(this.x1,this.x2),t=Math.max(this.x1,this.x2)-e,i=Math.min(this.y1,this.y2),s=Math.max(this.y1,this.y2)-i+this.height;return new MN(e,i,t,s)}updatePath(){const{path:e,inset:t}=this;e.clear();const i=this.x1+t,s=this.x2-t,o=this.y1+t,a=this.y2+t,r=this.height-2*t;if(r<0||i>s)return;const n=i,l=o+r/2,c=(i+s)/2,p=o+r/2,d=(i+s)/2,u=a+r/2,f=s,y=a+r/2;if(e.moveTo(n,l-r/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)e.cubicCurveTo(c,p-r/2,d,u-r/2,f,y-r/2),e.lineTo(f,y+r/2),e.cubicCurveTo(d,u+r/2,c,p+r/2,n,l+r/2);else{const[g,m]=AN(n,l,c,p,d,u,f,y,.5),S=(a>o?1:-1)*r/2;ya(e,g[0].x,g[0].y,g[1].x,g[1].y,g[2].x,g[2].y,g[3].x,g[3].y,S),ya(e,m[0].x,m[0].y,m[1].x,m[1].y,m[2].x,m[2].y,m[3].x,m[3].y,-S),e.lineTo(f,y+r/2),ya(e,m[3].x,m[3].y,m[2].x,m[2].y,m[1].x,m[1].y,m[0].x,m[0].y,S),ya(e,g[3].x,g[3].y,g[2].x,g[2].y,g[1].x,g[1].y,g[0].x,g[0].y,-S)}e.closePath()}};h([Zi()],Ii.prototype,"x1",2),h([Zi()],Ii.prototype,"x2",2),h([Zi()],Ii.prototype,"y1",2),h([Zi()],Ii.prototype,"y2",2),h([Zi()],Ii.prototype,"height",2),h([Zi()],Ii.prototype,"inset",2);import{_ModuleSupport as NN}from"ag-charts-community";var{BaseProperties:jd,FillGradientDefaults:PN,FillPatternDefaults:LN,FillImageDefaults:RN,makeSeriesTooltip:ON,SeriesProperties:CN,Property:te,Label:TN}=NN,Jd=class extends TN{constructor(){super(...arguments),this.spacing=1}};h([te],Jd.prototype,"spacing",2);var Yt=class extends jd{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};h([te],Yt.prototype,"fill",2),h([te],Yt.prototype,"fillOpacity",2),h([te],Yt.prototype,"stroke",2),h([te],Yt.prototype,"strokeOpacity",2),h([te],Yt.prototype,"strokeWidth",2),h([te],Yt.prototype,"lineDash",2),h([te],Yt.prototype,"lineDashOffset",2),h([te],Yt.prototype,"itemStyler",2);var Dt=class extends jd{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};h([te],Dt.prototype,"spacing",2),h([te],Dt.prototype,"width",2),h([te],Dt.prototype,"alignment",2),h([te],Dt.prototype,"fill",2),h([te],Dt.prototype,"fillOpacity",2),h([te],Dt.prototype,"stroke",2),h([te],Dt.prototype,"strokeOpacity",2),h([te],Dt.prototype,"strokeWidth",2),h([te],Dt.prototype,"lineDash",2),h([te],Dt.prototype,"lineDashOffset",2),h([te],Dt.prototype,"itemStyler",2);var we=class extends CN{constructor(){super(),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fillGradientDefaults=new PN,this.fillPatternDefaults=new LN,this.fillImageDefaults=new RN,this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=[],this.strokes=[],this.label=new Jd,this.link=new Yt,this.node=new Dt,this.tooltip=ON(),this.highlightStyle.deprecated=!1}};h([te],we.prototype,"nodes",2),h([te],we.prototype,"fromKey",2),h([te],we.prototype,"toKey",2),h([te],we.prototype,"idKey",2),h([te],we.prototype,"idName",2),h([te],we.prototype,"labelKey",2),h([te],we.prototype,"labelName",2),h([te],we.prototype,"sizeKey",2),h([te],we.prototype,"sizeName",2),h([te],we.prototype,"fillGradientDefaults",2),h([te],we.prototype,"fillPatternDefaults",2),h([te],we.prototype,"fillImageDefaults",2),h([te],we.prototype,"defaultColorRange",2),h([te],we.prototype,"defaultPatternFills",2),h([te],we.prototype,"fills",2),h([te],we.prototype,"strokes",2),h([te],we.prototype,"label",2),h([te],we.prototype,"link",2),h([te],we.prototype,"node",2),h([te],we.prototype,"tooltip",2);var{Transformable:wN,applyShapeStyle:Zd,SeriesNodePickMode:Qd,CachedTextMeasurerPool:_N,TextWrapper:eu,TextUtils:tu,createDatumId:ma,getShapeStyle:Sa,Rect:iu,BBox:su}=gN,xa=class extends dp{constructor(e){super({moduleCtx:e,pickModes:[Qd.NEAREST_NODE,Qd.EXACT_SHAPE_MATCH]}),this.properties=new we}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Ii}nodeFactory(){return new iu}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:o,sizeKey:a,labelKey:r,label:{spacing:n},node:{spacing:l,width:c,alignment:p}}=this.properties,{nodeGraph:d,links:u,maxPathLength:f}=this.getNodeGraph(D=>({...D,x:NaN,y:NaN,width:c,height:NaN}),D=>({...D,x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),y=d,g=this.isLabelEnabled()?(t-c)*(1-f/(f+1)):0,m=(t-c-2*g)/(f-1),S=[];for(let D=0;D<f;D+=1){const I=g+D*m;S.push({index:D,size:0,nodes:[],x:I})}y.forEach(D=>{const{datum:I,linksBefore:M,linksAfter:P,maxPathLengthBefore:R,maxPathLengthAfter:w}=D,N=Math.max(M.reduce((O,{link:_})=>O+_.size,0),P.reduce((O,{link:_})=>O+_.size,0));if(M.length===0&&P.length===0||N===0){D.columnIndex=-1;return}let C;switch(p){case"left":C=S[R];break;case"right":C=S[f-1-w];break;case"center":{if(M.length!==0)C=S[R];else if(P.length!==0){const O=P.reduce((_,F)=>Math.min(_,F.node.maxPathLengthBefore),f)-1;C=S[O]}else C=S[0];break}case"justify":{C=P.length===0?S[f-1]:S[R];break}}I.x=C.x,I.size=N;const T=this.getLabelText(I.label,I.datum,r,"label",[],this.properties.label,{datum:I.datum,value:I.label,fromKey:s,toKey:o,sizeKey:a,size:N});I.label=String(T),C.nodes.push(D),C.size+=N,D.columnIndex=C.index}),y.forEach(D=>{let I=1/0,M=0;D.linksAfter.forEach(P=>{const R=P.node,{columnIndex:w}=R;w<I?(I=w,M=R.datum.size):w===I&&(M=Math.max(M,R.datum.size))}),D.closestColumnIndex=I,D.maxSizeOfClosestNodesAfter=M});const x=S.reduce((D,{size:I,nodes:M})=>{const P=(1-(M.length-1)*(l/i))/I;return Math.min(D,P)},1/0);for(let D=S.length-1;D>=0;D-=1)S[D].nodes.sort((M,P)=>M.closestColumnIndex-P.closestColumnIndex||M.maxSizeOfClosestNodesAfter-P.maxSizeOfClosestNodesAfter||M.datum.size-P.datum.size);vN(S,{seriesRectHeight:i,nodeSpacing:l,sizeScale:x});let b=!1;if(y.forEach(({datum:D,linksBefore:I,linksAfter:M})=>{b||(b=D.height<0);const P=D.y+D.height,R=C=>C.sort((T,O)=>{const _=T.node.datum,F=O.node.datum,E=_.y+_.height,B=F.y+F.height,G=Math.atan2(_.y-D.y,Math.abs(_.x-D.x))-Math.atan2(F.y-D.y,Math.abs(F.x-D.x)),W=Math.atan2(E-P,Math.abs(_.x-D.x))-Math.atan2(B-P,Math.abs(F.x-D.x));return G+W});let w=D.y;R(I).forEach(({link:C})=>{C.y2=w,w+=C.size*i*x});let N=D.y;R(M).forEach(({link:C})=>{C.y1=N,N+=C.size*i*x})}),b){yN.warnOnce("There was insufficient space to display the Sankey Series. Reduce the node spacing, or provide a larger container.");return}const v=[],k=[],{fontSize:L}=this.properties.label,A=_N.getMeasurer({font:this.properties.label});return S.forEach((D,I)=>{const M=I===0,P=I===S.length-1;let R=-1/0;D.nodes.sort((w,N)=>w.datum.y-N.datum.y),D.nodes.forEach(({datum:w})=>{if(w.midPoint={x:w.x+w.width/2,y:w.y+w.height/2},v.push(w),w.label==null)return;const N=M?w.x-n:w.x+w.width+n,C=w.y+w.height/2;let T;if(!M&&!P){const E=C-tu.getLineHeight(L),B=C+tu.getLineHeight(L);let G=t;y.forEach(({datum:V})=>{V.x>w.x&&Math.max(V.y,E)<=Math.min(V.y+V.height,B)&&(G=Math.min(G,V.x-n))});const W=G-w.x-2*n;T=eu.wrapText(w.label,{maxWidth:W,maxHeight:w.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(T==null||T===""){const E=M||P?n:n*2;T=eu.wrapText(w.label,{maxWidth:m-E,maxHeight:w.height,font:this.properties.label,textWrap:"never"})}if(T==="")return;const{height:O}=A.measureText(T),_=C-O/2,F=C+O/2;_>=R&&(k.push({x:N,y:C,leading:M,text:T}),R=F)})}),u.forEach(D=>{const{fromNode:I,toNode:M,size:P}=D;D.height=i*P*x,D.x1=I.x+c,D.x2=M.x,D.midPoint={x:(D.x1+D.x2)/2,y:(D.y1+D.y2)/2+D.height/2},v.push(D)}),{itemId:e,nodeData:v,labelData:k}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{color:i,fontStyle:s,fontWeight:o,fontSize:a,fontFamily:r}=this.properties.label;t.each((n,{x:l,y:c,leading:p,text:d})=>{n.visible=!0,n.x=l,n.y=c,n.text=d,n.fill=i,n.fontStyle=s,n.fontWeight=o,n.fontSize=a,n.fontFamily=r,n.textAlign=p?"right":"left",n.textBaseline="middle"})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>ma([t.type,t.id]))}getBaseNodeStyle(e,t){const{properties:i}=this,{fill:s,fillOpacity:o,stroke:a,strokeOpacity:r,lineDash:n,lineDashOffset:l}=i.node,c=this.getHighlightStyle(e,t?.datumIndex);return Sa({fill:c?.fill??s,fillOpacity:c?.fillOpacity??o,stroke:c?.stroke??a,strokeOpacity:c?.strokeOpacity??r,strokeWidth:c?.strokeWidth??this.getStrokeWidth(i.node.strokeWidth),lineDash:c?.lineDash??n,lineDashOffset:c?.lineDashOffset??l},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults)}getNodeStyleOverrides(e,t,i,s,o,a,r){const{id:n,properties:l}=this,{fills:c,strokes:p,defaultColorRange:d,defaultPatternFills:u}=l,{itemStyler:f}=l.node,y=a.fill??c[i%c.length],g=a.stroke??p[i%p.length],m=d[i%d.length].map(b=>({color:b})),S=u[i%u.length];let x;if(r||(x??(x={}),x.fill=y,x.stroke=g),f!=null){const b=this.cachedDatumCallback(ma(e,"node",r?"highlight":"node"),()=>{const{fillOpacity:v=1,strokeOpacity:k=1,strokeWidth:L=0,lineDash:A=[],lineDashOffset:D=0}=a;return this.callWithContext(f,{seriesId:n,datum:t,highlighted:r,label:o,size:s,fill:y,fillOpacity:v,stroke:g,strokeOpacity:k,strokeWidth:L,lineDash:A,lineDashOffset:D})});x??(x={}),Object.assign(x,b)}return Sa(x,{...this.properties.fillGradientDefaults.toJson(),colorStops:m},{...this.properties.fillPatternDefaults.toJson(),fill:S,stroke:S},this.properties.fillImageDefaults)}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getShapeFillBBox();t.each((o,a)=>{const{datumIndex:r,size:n,label:l}=a,c=this.getBaseNodeStyle(i,a),p=this.getNodeStyleOverrides(String(r.index),a.datum,r.index,n,l,c,i);o.x=a.x,o.y=a.y,o.width=Math.max(a.width,0),o.height=Math.max(a.height,0),Zd(o,c,p,s)})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=new su(0,0,e,t);return{series:i,axis:i}}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>ma([t.type,t.index,t.fromNode.id,t.toNode.id]))}getBaseLinkStyle(e,t){const{properties:i}=this,{fill:s,fillOpacity:o,stroke:a,strokeOpacity:r,lineDash:n,lineDashOffset:l}=i.link,c=this.getHighlightStyle(e,t?.datumIndex);return Sa({fill:c?.fill??s,fillOpacity:c?.fillOpacity??o,stroke:c?.stroke??a,strokeOpacity:c?.strokeOpacity??r,strokeWidth:c?.strokeWidth??this.getStrokeWidth(i.link.strokeWidth),lineDash:c?.lineDash??n,lineDashOffset:c?.lineDashOffset??l},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults)}getLinkStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{fills:n,strokes:l,defaultColorRange:c,defaultPatternFills:p}=r,{itemStyler:d}=r.link,u=s.fill??n[i%n.length],f=s.stroke??l[i%l.length],y=c[i%c.length].map(S=>({color:S})),g=p[i%p.length];let m;if(o||(m??(m={}),m.fill=u,m.stroke=f),d!=null){const S=this.cachedDatumCallback(ma(e,"link",o?"highlight":"node"),()=>{const{fillOpacity:x=1,strokeOpacity:b=1,strokeWidth:v=0,lineDash:k=[],lineDashOffset:L=0}=s;return this.callWithContext(d,{seriesId:a,datum:t,highlighted:o,fill:u,fillOpacity:x,stroke:f,strokeOpacity:b,strokeWidth:v,lineDash:k,lineDashOffset:L})});m??(m={}),Object.assign(m,S)}return Sa(m,{...this.properties.fillGradientDefaults.toJson(),colorStops:y},{...this.properties.fillPatternDefaults.toJson(),fill:g,stroke:g},this.properties.fillImageDefaults)}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getShapeFillBBox();t.each((o,a)=>{const{datumIndex:r}=a,n=a.fromNode.datumIndex,l=this.getBaseLinkStyle(i,a),c=this.getLinkStyleOverrides(String(r.index),a.datum,n.index,l,i);o.x1=a.x1,o.y1=a.y1,o.x2=a.x2,o.y2=a.y2,o.height=a.height,Zd(o,l,c,s),o.inset=o.strokeWidth/2})}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:s,properties:o,ctx:{formatManager:a}}=this,{fromKey:r,toKey:n,sizeKey:l,sizeName:c,tooltip:p}=o,d=this.contextNodeData?.nodeData.find(x=>x.datumIndex.type===e.type&&x.datumIndex.index===e.index);if(d==null)return;const u=d.type===0?d.fromNode.index:d.index,f=d.type===0?`${d.fromNode.label} - ${d.toNode.label}`:d.label,y=e.type===0?i?.dataSources.get(this.id)?.[e.index]:s?.dataSources.get(this.id)?.[e.index],g=d.size;let m;if(d.type===0){const x=d.fromNode.datumIndex,b=this.getBaseLinkStyle(!1);Object.assign(b,this.getLinkStyleOverrides(String(e.index),y,x.index,b,!1)),m=b}else{const x=d.label,b=this.getBaseNodeStyle(!1);Object.assign(b,this.getNodeStyleOverrides(String(e.index),y,e.index,g,x,b,!1)),m=b}const S=[];if(l!=null){const x=a.format(this.callWithContext.bind(this),{type:"number",value:g,datum:y,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});S.push({label:c,fallbackLabel:l,value:x??String(g)})}return this.formatTooltipWithContext(p,{title:f,symbol:this.legendItemSymbol(d.type,u,m),data:S},{seriesId:t,datum:y,title:f,fromKey:r,toKey:n,sizeKey:l,sizeName:c,size:g,...m})}computeFocusBounds(e){if(e instanceof iu){const{x:t,y:i,width:s,height:o}=e,a=new su(t,i,s,o);return wN.toCanvas(this.contentGroup,a)}return e}};xa.className="SankeySeries",xa.type="sankey";import{_ModuleSupport as FN}from"ag-charts-community";import{arrayOf as En,color as ou,constant as EN,fillGradientDefaults as BN,fillImageDefaults as GN,fillPatternDefaults as WN,required as Bn,string as ba,undocumented as Ts}from"ag-charts-core";var{commonSeriesOptionsDefs:VN,sankeySeriesThemeableOptionsDef:KN}=FN,Qi={...KN,...VN,type:Bn(EN("sankey")),fromKey:Bn(ba),toKey:Bn(ba),sizeKey:ba,sizeName:ba};Qi.fillGradientDefaults=Ts(BN),Qi.fillPatternDefaults=Ts(WN),Qi.fillImageDefaults=Ts(GN),Qi.defaultColorRange=Ts(En(En(ou))),Qi.defaultPatternFills=Ts(En(ou));var rT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["flow-proportion"],solo:!0,identifier:"sankey",moduleFactory:e=>new xa(e),themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:ga.FILL_PATTERN_DEFAULTS,fillImageDefaults:ga.FILL_IMAGE_DEFAULTS,defaultColorRange:{$palette:"gradients"},defaultPatternFills:ga.SAFE_FILLS_OPERATION,highlightStyle:{series:{dimOpacity:.2}},highlight:{...ga.singleSeriesHighlightStyle()},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:10},node:{spacing:20,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]}}},legend:{enabled:!1,toggleSeries:!1}}},au={type:"series",name:"sankey",chartType:"flow-proportion",enterprise:!0,options:Qi,create:e=>new xa(e)};import{_ModuleSupport as Gn}from"ag-charts-community";import{_ModuleSupport as ws}from"ag-charts-community";import{_ModuleSupport as zN}from"ag-charts-community";var{HierarchySeriesProperties:$N,HighlightStyle:HN,makeSeriesTooltip:XN,Property:_e}=zN,oi=class extends HN{constructor(){super(!1),this.label=new Et,this.secondaryLabel=new Et}};h([_e],oi.prototype,"fill",2),h([_e],oi.prototype,"fillOpacity",2),h([_e],oi.prototype,"stroke",2),h([_e],oi.prototype,"strokeWidth",2),h([_e],oi.prototype,"strokeOpacity",2),h([_e],oi.prototype,"label",2),h([_e],oi.prototype,"secondaryLabel",2);var tt=class extends $N{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new oi,this.label=new Et,this.secondaryLabel=new us,this.tooltip=XN()}};h([_e],tt.prototype,"sizeName",2),h([_e],tt.prototype,"labelKey",2),h([_e],tt.prototype,"secondaryLabelKey",2),h([_e],tt.prototype,"fillOpacity",2),h([_e],tt.prototype,"strokeWidth",2),h([_e],tt.prototype,"strokeOpacity",2),h([_e],tt.prototype,"cornerRadius",2),h([_e],tt.prototype,"sectorSpacing",2),h([_e],tt.prototype,"padding",2),h([_e],tt.prototype,"itemStyler",2),h([_e],tt.prototype,"highlightStyle",2),h([_e],tt.prototype,"label",2),h([_e],tt.prototype,"secondaryLabel",2),h([_e],tt.prototype,"tooltip",2);var{fromToMotion:YN,normalizeAngle360:qN,createDatumId:UN,Sector:Wn,Group:Da,ScalableGroup:jN,Selection:Vn,TransformableText:Kn,BBox:ru,applyShapeStyle:JN,getShapeStyle:zn}=ws,ZN=class extends ws.HierarchyNode{constructor(){super(...arguments),this.label=void 0,this.secondaryLabel=void 0,this.contentHeight=0,this.bbox=void 0,this.startAngle=0,this.endAngle=0}};function nu(e,t=0,i=2*Math.PI/e.sumSize){for(const s of e.children){const o=t+s.sumSize*i;s.startAngle=t,s.endAngle=o,nu(s,t,i),t=o}}var va=class extends ws.HierarchySeries{constructor(){super(...arguments),this.NodeClass=ZN,this.properties=new tt,this.scalingGroup=this.contentGroup.appendChild(new jN),this.sectorGroup=this.scalingGroup.appendChild(new Da),this.sectorLabelGroup=this.scalingGroup.appendChild(new Da),this.highlightSectorGroup=this.scalingGroup.appendChild(new Da),this.datumSelection=Vn.select(this.sectorGroup,Wn),this.labelSelection=Vn.select(this.sectorLabelGroup,Da),this.highlightSelection=Vn.select(this.highlightSectorGroup,Wn)}processData(){super.processData(),nu(this.rootNode)}updateSelections(){const e=this.ctx.highlightManager?.getActiveHighlight();if(this.highlightSelection.update(e!=null?[e]:[],void 0,a=>this.getDatumId(a)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(t==null||t.seriesRect==null)return;const s=Array.from(this.rootNode),o=a=>{a.append([new Kn({tag:0}),new Kn({tag:1})])};this.datumSelection.update(s,void 0,a=>this.getDatumId(a)),this.labelSelection.update(s,o,a=>this.getDatumId(a))}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle:void 0;return zn({fill:i?.fill,fillOpacity:i?.fillOpacity??t.fillOpacity,stroke:i?.stroke,strokeWidth:i?.strokeWidth??this.getStrokeWidth(t.strokeWidth),strokeOpacity:i?.strokeOpacity??t.strokeOpacity},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getItemStyleOverrides(e,t,i,s,o,a){const{id:r,properties:n,colorScale:l}=this,{fills:c,strokes:p,itemStyler:d}=n,u=e[0],f=o.fill??c[u%c.length],y=o.stroke??p[u%p.length],g={};if(a||(g.fill=s!=null?l.convert(s):f,g.stroke=y),d!=null){const m=this.cachedDatumCallback(UN(e.join(":"),a?"highlight":"node"),()=>this.callWithContext(d,{seriesId:r,datum:t,depth:i,highlighted:a,fill:f,stroke:y,...o}));Object.assign(g,m)}return zn(g,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateNodes(){const{chart:e,data:t,maxDepth:i}=this;if(e==null||t==null)return;const{width:s,height:o}=e.seriesRect,{sectorSpacing:a=0,padding:r=0,cornerRadius:n,childrenKey:l,colorKey:c,colorName:p,labelKey:d,secondaryLabelKey:u,sizeKey:f,sizeName:y}=this.properties;this.contentGroup.translationX=s/2,this.contentGroup.translationY=o/2;const g=a*.5,m=Math.min(s,o)/2,S=m/(i+1),x=-Math.PI/2,b={series:new ru(-m,-m,2*m,2*m),axis:new ru(-m,-m,2*m,2*m)};this.rootNode?.walk(I=>{const{startAngle:M,endAngle:P}=I;if(I.depth!=null){const R=(M+P)/2+x,w=(I.depth+.5)*S;I.midPoint.x=Math.cos(R)*w,I.midPoint.y=Math.sin(R)*w}}),this.rootNode?.walk(I=>{const{datum:M,depth:P,startAngle:R,endAngle:w,parent:N,sumSize:C}=I;I.label=void 0,I.secondaryLabel=void 0,I.contentHeight=0;let T;if(M!=null&&P!=null&&d!=null){const ee=M[d];T=this.getLabelText(ee,M,d,"label",[],this.properties.label,{depth:P,datum:M,childrenKey:l,colorKey:c,colorName:p,labelKey:d,secondaryLabelKey:u,sizeKey:f,sizeName:y,value:ee})}T===""&&(T=void 0);let O;if(M!=null&&P!=null&&u!=null){const ee=M[u];O=this.getLabelText(ee,M,u,"secondaryLabel",[],this.properties.secondaryLabel,{depth:P,datum:M,childrenKey:l,colorKey:c,colorName:p,labelKey:d,secondaryLabelKey:u,sizeKey:f,sizeName:y,value:ee})}if(O===""&&(O=void 0),P==null)return;const _=P*S+g,F=(P+1)*S-g,E=_>g?g/_:g,B=F>g?g/F:g,G=R+E,V=w+E-G,K=R+B,X=w+B-K,U=ee=>{if(P===0&&N?.sumSize===C)return{width:2*Math.sqrt(F**2-(ee*.5)**2),height:ee,meta:0};const pe=ee,We=2*Math.sqrt(F**2-(_+pe)**2),kt=V<Math.PI?2*_*Math.tan(V*.5):1/0,Vt=Math.min(We,kt),Li=Math.PI/4;let ut,qt;return P===0?(ut=ee,qt=Math.sqrt(F**2-(ut/2)**2)-ee/(2*Math.tan(X*.5))):qN(V)<Li?(ut=2*_*Math.tan(V*.5),qt=Math.sqrt(F**2-(ut/2)**2)-_):(qt=0,ut=0),Vt>=qt?{width:Vt,height:pe,meta:1}:{width:qt,height:ut,meta:2}},J=ur(T,this.properties.label,O,this.properties.secondaryLabel,{padding:r},U);if(J==null)return;const{width:oe,height:j,meta:Y,label:le,secondaryLabel:de}=J,Z=x+(R+w)/2,Q=Math.sin(Z)>=0,Ee=Math.cos(Z)>=0,ze=(Q?3:12)&(Ee?6:9);let ve;switch(Y){case 0:ve=0;break;case 1:{const ue=F-(S-j)*.58,pe=Math.sqrt((F-r)**2-(oe/2)**2);ve=Math.min(ue,pe);break}case 2:if(P===0){const ee=j/(2*Math.tan(V*.5))+oe*.5,ue=Math.sqrt(F**2-(j*.5)**2)-oe*.5;ve=(ee+ue)*.5}else ve=(_+F)*.5;break}if(le!=null){const{fontStyle:ee="normal",fontFamily:ue,fontWeight:pe="normal",color:We="black"}=this.properties.label;I.label={...le,fontStyle:ee,fontFamily:ue,fontWeight:pe,color:We,labelPlacement:Y,circleQuarter:ze,radius:ve,theta:Z}}if(de!=null){const{fontStyle:ee="normal",fontFamily:ue,fontWeight:pe="normal",color:We="black"}=this.properties.secondaryLabel;I.secondaryLabel={...de,fontStyle:ee,fontFamily:ue,fontWeight:pe,color:We,labelPlacement:Y,circleQuarter:ze,radius:ve,theta:Z}}I.contentHeight=J.height});const v=(I,M,P,R)=>{const{datum:w,datumIndex:N,depth:C,colorValue:T,startAngle:O,endAngle:_}=I;if(C==null){M.visible=!1;return}M.visible=!0;const F=this.getItemStyleOverrides(N,w,C,T,P,R),E=F.fill??P.fill,B=F.strokeWidth??P.strokeWidth,G=ws.isGradientFill(E)&&E.bounds!=="item"?b:void 0;JN(M,P,F,G),M.centerX=0,M.centerY=0,M.innerRadius=C*S,M.outerRadius=(C+1)*S,M.startAngle=O+x,M.endAngle=_+x,M.inset=g+B*.5,M.cornerRadius=n},k=this.getItemBaseStyle(!1);this.datumSelection.each((I,M)=>{v(M,I,k,!1)});const L=this.getItemBaseStyle(!0);this.highlightSelection.each((I,M)=>{v(M,I,L,!0)});const A=(I,M,P,R)=>{const{depth:w,contentHeight:N}=I,C=P===0,T=C?I.label:I.secondaryLabel;if(w==null||T==null){M.visible=!1;return}const{labelPlacement:O,circleQuarter:_,radius:F,theta:E}=T;let B;switch(R&&(B=(C?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),M.text=T.text,M.fontSize=T.fontSize,M.lineHeight=T.lineHeight,M.fontStyle=T.fontStyle,M.fontFamily=T.fontFamily,M.fontWeight=T.fontWeight,M.fill=B??T.color,M.fillOpacity=this.getHighlightStyle(R,I.datumIndex)?.opacity??1,O){case 0:M.textAlign="center",M.textBaseline="top",M.translationX=0,M.translationY=(C?0:N-T.height)-N*.5,M.rotation=0;break;case 1:{const G=(_&3)!==0,W=C===!G?F:F-(N-T.height);M.textAlign="center",M.textBaseline=G?"bottom":"top",M.translationX=Math.cos(E)*W,M.translationY=Math.sin(E)*W,M.rotation=G?E-Math.PI*.5:E+Math.PI*.5;break}case 2:{const G=(_&6)!==0,W=C===!G?(N-T.height)*.5:(T.height-N)*.5;M.textAlign="center",M.textBaseline="middle",M.translationX=Math.cos(E)*F+Math.cos(E+Math.PI/2)*W,M.translationY=Math.sin(E)*F+Math.sin(E+Math.PI/2)*W,M.rotation=G?E:E+Math.PI;break}}M.visible=!0},D=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(Kn).forEach(I=>{const M=I.closestDatum();A(M,I,I.tag,M===D)})}getTooltipContent(e){const{id:t,properties:i}=this,{labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,tooltip:p}=i,d=e.reduce((v,k)=>v?.children[k],this.rootNode);if(d==null)return;const{datum:u,depth:f}=d;if(u==null||f==null)return;const y=[],g=r!=null?u[r]:void 0;g!=null&&y.push({label:n,fallbackLabel:r,value:g});const m=l!=null?u[l]:void 0;m!=null&&y.push({label:c,fallbackLabel:l,value:m});const S=this.getItemBaseStyle(!1);Object.assign(S,this.getItemStyleOverrides(e,u,f,m,S,!1));const x=S.fill,b=zn({shape:"square",fill:x,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults);return ws.isGradientFill(b.fill)&&(b.fill={...b.fill,gradient:"linear",rotation:0,reverse:!1}),this.formatTooltipWithContext(p,{title:s!=null?u[s]:void 0,symbol:{marker:b},data:y},{seriesId:t,datum:u,title:void 0,depth:f,labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,...S})}createNodeData(){}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.datumSelection.selectByClass(Wn))}animateEmptyUpdateReady(){YN(this.id,"nodes",this.ctx.animationManager,[this.scalingGroup],{toFn(){return{scalingX:1,scalingY:1}},fromFn(){return{scalingX:0,scalingY:0}}})}computeFocusBounds(e){return e}};va.className="SunburstSeries",va.type="sunburst";import{_ModuleSupport as QN}from"ag-charts-community";import{constant as eP,required as tP,string as Ai}from"ag-charts-core";var{commonSeriesOptionsDefs:iP,sunburstSeriesThemeableOptionsDef:sP,without:oP}=QN,aP={...sP,...oP(iP,["highlightStyle","highlight","showInLegend"]),type:tP(eP("sunburst")),labelKey:Ai,secondaryLabelKey:Ai,childrenKey:Ai,sizeKey:Ai,colorKey:Ai,sizeName:Ai,colorName:Ai},{BASE_FONT_SIZE:lu,FONT_SIZE_RATIO:cu}=Gn,dT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",moduleFactory:e=>new va(e),solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"series",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:Gn.FILL_PATTERN_DEFAULTS,fillImageDefaults:Gn.FILL_IMAGE_DEFAULTS,strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:cu.LARGE},minimumFontSize:{$rem:9/lu},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontFamily:{$ref:"fontFamily"},fontSize:{$rem:cu.SMALLEST},minimumFontSize:{$rem:7/lu},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:{$ref:"chartBackgroundColor"}},secondaryLabel:{color:{$ref:"chartBackgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}}},pu={type:"series",name:"sunburst",chartType:"hierarchy",enterprise:!0,options:aP,create:e=>new va(e)};import{_ModuleSupport as $n}from"ag-charts-community";import{_ModuleSupport as _s}from"ag-charts-community";import{isNumberEqual as rP}from"ag-charts-core";import{_ModuleSupport as nP}from"ag-charts-community";var{BaseProperties:ka,HierarchySeriesProperties:lP,HighlightStyle:cP,makeSeriesTooltip:pP,Property:q,Label:hP}=nP,hu=class extends hP{constructor(){super(...arguments),this.spacing=0}};h([q],hu.prototype,"spacing",2);var vt=class extends ka{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new hu}};h([q],vt.prototype,"fill",2),h([q],vt.prototype,"fillOpacity",2),h([q],vt.prototype,"stroke",2),h([q],vt.prototype,"strokeWidth",2),h([q],vt.prototype,"strokeOpacity",2),h([q],vt.prototype,"cornerRadius",2),h([q],vt.prototype,"textAlign",2),h([q],vt.prototype,"gap",2),h([q],vt.prototype,"padding",2),h([q],vt.prototype,"interactive",2),h([q],vt.prototype,"label",2);var dt=class extends ka{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new Et,this.secondaryLabel=new us}};h([q],dt.prototype,"fill",2),h([q],dt.prototype,"fillOpacity",2),h([q],dt.prototype,"stroke",2),h([q],dt.prototype,"strokeWidth",2),h([q],dt.prototype,"strokeOpacity",2),h([q],dt.prototype,"cornerRadius",2),h([q],dt.prototype,"textAlign",2),h([q],dt.prototype,"verticalAlign",2),h([q],dt.prototype,"gap",2),h([q],dt.prototype,"padding",2),h([q],dt.prototype,"label",2),h([q],dt.prototype,"secondaryLabel",2);var Ni=class extends ka{constructor(){super(...arguments),this.label=new Et}};h([q],Ni.prototype,"fill",2),h([q],Ni.prototype,"fillOpacity",2),h([q],Ni.prototype,"stroke",2),h([q],Ni.prototype,"strokeWidth",2),h([q],Ni.prototype,"strokeOpacity",2),h([q],Ni.prototype,"label",2);var ai=class extends ka{constructor(){super(...arguments),this.label=new Et,this.secondaryLabel=new us}};h([q],ai.prototype,"fill",2),h([q],ai.prototype,"fillOpacity",2),h([q],ai.prototype,"stroke",2),h([q],ai.prototype,"strokeWidth",2),h([q],ai.prototype,"strokeOpacity",2),h([q],ai.prototype,"label",2),h([q],ai.prototype,"secondaryLabel",2);var Hn=class extends cP{constructor(){super(!1),this.group=new Ni,this.tile=new ai}};h([q],Hn.prototype,"group",2),h([q],Hn.prototype,"tile",2);var _t=class extends lP{constructor(){super(...arguments),this.highlightStyle=new Hn,this.tooltip=pP(),this.group=new vt,this.tile=new dt,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};h([q],_t.prototype,"sizeName",2),h([q],_t.prototype,"labelKey",2),h([q],_t.prototype,"secondaryLabelKey",2),h([q],_t.prototype,"itemStyler",2),h([q],_t.prototype,"highlightStyle",2),h([q],_t.prototype,"tooltip",2),h([q],_t.prototype,"group",2),h([q],_t.prototype,"tile",2),h([q],_t.prototype,"undocumentedGroupFills",2),h([q],_t.prototype,"undocumentedGroupStrokes",2);var{TextUtils:dP,TextWrapper:uP,createDatumId:du,Rect:uu,Group:fu,BBox:es,Selection:Xn,Text:Ma,Transformable:fP,applyShapeStyle:gP,getShapeStyle:Fs}=_s,yP=class extends _s.HierarchyNode{constructor(){super(...arguments),this.labelValue=void 0,this.secondaryLabelValue=void 0,this.label=void 0,this.secondaryLabel=void 0,this.bbox=void 0,this.padding=void 0}},gu=new Ma;function mP(e,t){const{fontStyle:i,fontWeight:s,fontSize:o,fontFamily:a}=t;gu.setProperties({text:e,fontStyle:i,fontWeight:s,fontSize:o,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:r,height:n}=gu.getBBox();return{width:r,height:n}}function ri(e){return e.children.length>0?e.sumSize-e.sizeValue:e.sizeValue}var yu={left:0,center:.5,right:1},SP={top:0,middle:.5,bottom:1},mT=class extends _s.Group{distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}},Ia=class extends _s.HierarchySeries{constructor(){super(...arguments),this.NodeClass=yP,this.properties=new _t,this.rectGroup=this.contentGroup.appendChild(new fu),this.datumSelection=Xn.select(this.rectGroup,uu),this.labelSelection=Xn.select(this.labelGroup,fu),this.highlightSelection=Xn.select(this.rectGroup,uu)}groupTitleHeight(e,t){const{labelValue:i}=e,{label:s}=this.properties.group,o=3;if(i!=null){if(s.fontSize>t.width/o||s.fontSize>t.height/o)return;{const{height:a}=mP(i,s);return Math.max(a,s.fontSize)}}}getNodePadding(e,t){if(e.parent==null)return{top:0,right:0,bottom:0,left:0};if(e.children.length===0){const{padding:r}=this.properties.tile;return{top:r,right:r,bottom:r,left:r}}const{label:{spacing:i},padding:s}=this.properties.group,o=this.groupTitleHeight(e,t),a=o!=null?o+i:0;return{top:s+a,right:s,bottom:s,left:s}}sortChildren({children:e}){const t=Array.from(e,(s,o)=>o).filter(s=>ri(e[s])>0).sort((s,o)=>ri(e[o])-ri(e[s]));return{sortedChildrenIndices:t,childAt:s=>{const o=t[s];return e[o]}}}squarify(e,t){const{datum:i,children:s}=e;if(t.width<=0||t.height<=0){e.bbox=void 0,e.padding=void 0,e.midPoint.x=NaN,e.midPoint.y=NaN;return}const o=i!=null?this.getNodePadding(e,t):{top:0,right:0,bottom:0,left:0};e.parent==null?(e.bbox=void 0,e.padding=void 0,e.midPoint.x=NaN,e.midPoint.y=NaN):(e.bbox=t,e.padding=o,e.midPoint.x=t.x+t.width/2,e.midPoint.y=t.y);const{sortedChildrenIndices:a,childAt:r}=this.sortChildren(e),n=a.every(k=>s[k].children.length===0),l=1,c=t.width-o.left-o.right,p=t.height-o.top-o.bottom;if(c<=0||p<=0)return;const d=a.length;let u=0,f=0,y=1/0,g=a.reduce((k,L)=>k+ri(s[L]),0);const m=new es(t.x+o.left,t.y+o.top,c,p),S=m.clone();let x=0;for(;x<d;){const k=ri(r(x)),L=ri(r(f)),A=S.width<S.height;u+=k;const D=A?S.height:S.width,I=A?S.width:S.height,M=I*L/u;let P=D*u/g;const R=Math.max(M,P)/Math.min(M,P),w=Math.abs(l-R);if(w<y){y=w,x++;continue}u-=k,P=D*u/g;let N=A?S.x:S.y;for(let C=f;C<x;C++){const T=r(C),O=ri(T),_=A?N:S.x,F=A?S.y:N,E=I*O/u,B=A?E:P,G=A?P:E,W=new es(_,F,B,G);this.applyGap(m,W,n),this.squarify(T,W),g-=O,N+=E}A?(S.y+=P,S.height-=P):(S.x+=P,S.width-=P),f=x,u=0,y=1/0}const b=S.width<S.height;let v=b?S.x:S.y;for(let k=f;k<d;k++){const L=r(k),A=b?v:S.x,D=b?S.y:v,I=ri(L)/g,M=S.width*(b?I:1),P=S.height*(b?1:I),R=new es(A,D,M,P);this.applyGap(m,R,n),this.squarify(L,R),v+=b?M:P}}applyGap(e,t,i){const s=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,o=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),a=o(e),r=o(t);["top","right","bottom","left"].forEach(l=>{rP(a[l],r[l])||t.shrink(s,l)})}createNodeData(){}getGroupBaseStyle(e){const{properties:t}=this,{group:i}=t,s=e?t.highlightStyle.group:void 0;return Fs({fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getGroupStyleOverrides(e,t,i,s,o){const{id:a,properties:r}=this,{undocumentedGroupFills:n,undocumentedGroupStrokes:l,itemStyler:c}=r,p=s.fill??n[Math.min(i??0,n.length)],d=s.stroke??l[Math.min(i??0,l.length)],u={};if(o||(u.fill=p,u.stroke=d),c!=null){const f=this.cachedDatumCallback(du(e.join(":"),o?"highlight":"node"),()=>this.callWithContext(c,{seriesId:a,datum:t,depth:i,highlighted:o,fill:p,stroke:d,...s}));Object.assign(u,f)}return Fs(u,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}getTileBaseStyle(e){const{properties:t}=this,{tile:i}=t,s=e?t.highlightStyle.tile:void 0;return Fs({fill:s?.fill??i.fill,fillOpacity:s?.fillOpacity??i.fillOpacity,stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity},t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults)}getTileStyleOverrides(e,t,i,s,o,a){const{id:r,properties:n,colorScale:l}=this,{fills:c,strokes:p,itemStyler:d}=n,u=e[0],f=o.fill??c[u%c.length],y=o.stroke??p[u%p.length],g={};if(a||(g.fill=s!=null?l.convert(s):f,g.stroke=y),d!=null){const m=this.cachedDatumCallback(du(e.join(":"),a?"highlight":"node"),()=>this.callWithContext(d,{seriesId:r,datum:t,depth:i,highlighted:a,fill:f,stroke:y,...o}));Object.assign(g,m)}return Fs(g,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}updateSelections(){let e=this.ctx.highlightManager?.getActiveHighlight();if(e!=null&&!this.properties.group.interactive&&e.children.length!==0&&(e=void 0),this.highlightSelection.update(e!=null?[e]:[],void 0,o=>this.getDatumId(o)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:t}=this.chart??{};if(!t)return;const i=Array.from(this.rootNode),s=o=>{o.append([new Ma({tag:0}),new Ma({tag:1})])};this.datumSelection.update(i,void 0,o=>this.getDatumId(o)),this.labelSelection.update(i,s,o=>this.getDatumId(o))}updateNodes(){const{rootNode:e,data:t}=this,{childrenKey:i,colorKey:s,colorName:o,labelKey:a,secondaryLabelKey:r,sizeKey:n,sizeName:l,highlightStyle:c,tile:p,group:d}=this.properties,{seriesRect:u}=this.chart??{};if(!u||!t)return;this.rootNode?.walk(A=>{const{datum:D,depth:I,children:M}=A,P=M.length===0,R=P?p.label:d.label;let w;if(D!=null&&I!=null&&a!=null){const C=D[a];w=this.getLabelText(C,D,a,"label",[],R,{depth:I,datum:D,childrenKey:i,colorKey:s,colorName:o,labelKey:a,secondaryLabelKey:r,sizeKey:n,sizeName:l,value:C})}w===""&&(w=void 0);let N;if(P&&D!=null&&I!=null&&r!=null){const C=D[r];N=this.getLabelText(C,D,r,"secondaryLabel",[],p.secondaryLabel,{depth:I,datum:D,childrenKey:i,colorKey:s,colorName:o,labelKey:a,secondaryLabelKey:r,sizeKey:n,sizeName:l,value:C})}N===""&&(N=void 0),A.labelValue=w,A.secondaryLabelValue=N});const{width:f,height:y}=u;this.squarify(e,new es(0,0,f,y)),this.rootNode?.walk(A=>{const{bbox:D,children:I,labelValue:M,secondaryLabelValue:P}=A;if(A.label=void 0,A.secondaryLabel=void 0,D!=null)if(I.length===0){const R={width:D.width,height:D.height,meta:null},w=ur(M,this.properties.tile.label,P,this.properties.tile.secondaryLabel,{padding:p.padding},()=>R);if(w==null)return;const{height:N,label:C,secondaryLabel:T}=w,{textAlign:O,verticalAlign:_,padding:F}=p,E=yu[O]??.5,B=D.x+F+(D.width-2*F)*E,G=SP[_]??.5,W=D.y+F+N*.5+(D.height-2*F-N)*G;if(C!=null){const{fontStyle:V="normal",fontFamily:K,fontWeight:$="normal",color:X="black"}=this.properties.tile.label;A.label={text:C.text,fontSize:C.fontSize,lineHeight:C.lineHeight,fontStyle:V,fontFamily:K,fontWeight:$,color:X,textAlign:O,verticalAlign:"middle",x:B,y:W-(N-C.height)*.5}}if(T!=null){const{fontStyle:V="normal",fontFamily:K,fontWeight:$="normal",color:X="black"}=this.properties.tile.secondaryLabel;A.secondaryLabel={text:T.text,fontSize:T.fontSize,lineHeight:T.fontSize,fontStyle:V,fontFamily:K,fontWeight:$,color:X,textAlign:O,verticalAlign:"middle",x:B,y:W+(N-T.height)*.5}}}else{if(M==null)return;{const{padding:R,textAlign:w}=d,N=this.groupTitleHeight(A,D);if(N==null)return;const C=D.width-2*R,T=uP.wrapText(M,{maxWidth:D.width-2*R,font:d.label,textWrap:"never"}),O=yu[w]??.5,{fontStyle:_="normal",fontFamily:F,fontWeight:E="normal",color:B="black"}=this.properties.group.label;A.label={text:T,fontSize:d.label.fontSize,lineHeight:dP.getLineHeight(d.label.fontSize),fontStyle:_,fontFamily:F,fontWeight:E,color:B,textAlign:w,verticalAlign:"middle",x:D.x+R+C*O,y:D.y+R+N*.5}}}});const g={series:new es(0,0,f,y),axis:new es(0,0,f,y)},m=(A,D,I,M,P)=>{const{bbox:R}=A;if(R==null){D.visible=!1;return}const{datum:w,depth:N=-1,datumIndex:C,colorValue:T}=A,O=A.children.length===0,_=O?M:I,F=O?this.getTileStyleOverrides(C,w,N,T,_,P):this.getGroupStyleOverrides(C,w,N,_,P);D.crisp=!0,gP(D,_,F,g),D.cornerRadius=O?p.cornerRadius:d.cornerRadius,D.zIndex=[0,N,P?1:0];const E=A.parent?.children.every(W=>W.children.length===0),B=A.parent!=null?A.parent.bbox:void 0,G=A.parent!=null?A.parent.padding:void 0;E===!0&&B!=null&&G!=null?(D.clipBBox=R,D.x=B.x+G.left,D.y=B.y+G.top,D.width=B.width-(G.left+G.right),D.height=B.height-(G.top+G.bottom)):(D.clipBBox=void 0,D.x=R.x,D.y=R.y,D.width=R.width,D.height=R.height),D.visible=!0},S=this.getGroupBaseStyle(!1),x=this.getTileBaseStyle(!1);this.datumSelection.each((A,D)=>m(D,A,S,x,!1));const b=this.getGroupBaseStyle(!0),v=this.getTileBaseStyle(!0);this.highlightSelection.each((A,D)=>{m(D,A,b,v,!0)});const k=(A,D,I,M)=>{const P=A.children.length===0,R=I===0?A.label:A.secondaryLabel;if(R==null){D.visible=!1;return}let w;if(M){const{tile:N,group:C}=c;w=N.secondaryLabel.color,P?I===0&&(w=N.label.color):w=C.label.color}D.text=R.text,D.fontSize=R.fontSize,D.lineHeight=R.lineHeight,D.fontStyle=R.fontStyle,D.fontFamily=R.fontFamily,D.fontWeight=R.fontWeight,D.fill=w??R.color,D.fillOpacity=this.getHighlightStyle(M,A.datumIndex)?.opacity??1,D.textAlign=R.textAlign,D.textBaseline=R.verticalAlign,D.x=R.x,D.y=R.y,D.visible=!0,D.zIndex=1},L=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(Ma).forEach(A=>{const D=A.closestDatum();k(D,A,A.tag,D===L)})}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort((i,s)=>s.datumIndex.length-i.datumIndex.length),t}pickNodeClosestDatum(e){const t=this.pickNodesExactShape(e);return t.length!==0?{datum:t[0],distance:0}:this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}getTooltipContent(e){const{id:t,properties:i}=this,{labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,tooltip:p}=i,d=e.reduce((A,D)=>A?.children[D],this.rootNode);if(d==null)return;const{datum:u,depth:f,children:y}=d;if(u==null||f==null)return;const g=y.length===0,m=[],S=r!=null?u[r]:void 0;S!=null&&m.push({label:n,fallbackLabel:r,value:S});const x=l!=null?u[l]:void 0;x!=null&&m.push({label:c,fallbackLabel:l,value:x});let b;g?(b=this.getTileBaseStyle(!1),Object.assign(b,this.getTileStyleOverrides(e,u,f,x,b,!1))):(b=this.getGroupBaseStyle(!1),Object.assign(b,this.getGroupStyleOverrides(e,u,f,b,!1)));const v=b.fill,k=Fs({shape:"square",fill:v,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);_s.isGradientFill(k.fill)&&(k.fill={...k.fill,gradient:"linear",rotation:0,reverse:!1});const L=g?{marker:k}:void 0;return this.formatTooltipWithContext(p,{title:s!=null?u[s]:void 0,symbol:L,data:m},{seriesId:t,datum:u,title:void 0,depth:f,labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:r,sizeName:n,colorKey:l,colorName:c,...b})}computeFocusBounds(e){return fP.toCanvas(this.contentGroup,e.getBBox())}};Ia.className="TreemapSeries",Ia.type="treemap";import{_ModuleSupport as xP}from"ag-charts-community";import{arrayOf as mu,color as Su,constant as bP,fillGradientDefaults as DP,fillImageDefaults as vP,fillPatternDefaults as kP,required as MP,string as Pi,undocumented as Es}from"ag-charts-core";var{commonSeriesOptionsDefs:IP,treemapSeriesThemeableOptionsDef:AP,without:NP}=xP,ts={...AP,...NP(IP,["highlightStyle","highlight","showInLegend"]),type:MP(bP("treemap")),labelKey:Pi,secondaryLabelKey:Pi,childrenKey:Pi,sizeKey:Pi,colorKey:Pi,sizeName:Pi,colorName:Pi};ts.fillGradientDefaults=Es(DP),ts.fillPatternDefaults=Es(kP),ts.fillImageDefaults=Es(vP),ts.undocumentedGroupFills=Es(mu(Su)),ts.undocumentedGroupStrokes=Es(mu(Su));var{FONT_SIZE_RATIO:xu}=$n,bT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",moduleFactory:e=>new Ia(e),solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:$n.FILL_PATTERN_DEFAULTS,fillImageDefaults:$n.FILL_IMAGE_DEFAULTS,undocumentedGroupFills:{$palette:"hierarchyColors"},undocumentedGroupStrokes:{$palette:"secondHierarchyColors"},group:{label:{enabled:!0,color:{$ref:"textColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:1.5},minimumFontSize:{$rem:xu.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:void 0,fontSize:{$ref:"fontSize"},minimumFontSize:{$rem:xu.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:{$isUserOption:["../strokes/0",2,{$isUserOption:["./stroke",2,0]}]},padding:3,gap:1},highlightStyle:{group:{label:{color:{$ref:"textColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:{$ref:"chartBackgroundColor"}},secondaryLabel:{color:{$ref:"chartBackgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}}},bu={type:"series",name:"treemap",chartType:"hierarchy",enterprise:!0,options:ts,create:e=>new Ia(e)},PP=Ru.ModuleRegistry,Du=[xl,qa,hr,Cp,Wp,yr,Sr,kr,Nr,Cr],vu=[bl,Dl,vl,kl,jh,md,xd,Nd,Td],ku=[Ml,Sp,au],Mu=[Il,sh,$d],Iu=[Al,pu,bu],Au=[Nl,ad],Nu=[Ol,gh,yh,Ah,_h,Eh],LP=[...Du,...vu,...ku,...Mu,...Iu,...Au,...Nu,Tb,wb,_b];export{Du as AllCartesianEnterpriseModules,LP as AllEnterpriseModules,ku as AllFlowProportionEnterpriseModules,Mu as AllGaugeEnterpriseModules,Iu as AllHierarchyEnterpriseModules,vu as AllPolarEnterpriseModules,Au as AllStandaloneEnterpriseModules,Nu as AllTopologyEnterpriseModules,Dl as AngleCategoryAxisModule,bl as AngleNumberAxisModule,qa as BoxPlotSeriesModule,hr as CandlestickSeriesModule,Sp as ChordSeriesModule,Cp as ConeFunnelSeriesModule,Ml as FlowProportionChartModule,Wp as FunnelSeriesModule,Il as GaugeChartModule,yr as HeatmapSeriesModule,Al as HierarchyChartModule,sh as LinearGaugeSeriesModule,yh as MapLineBackgroundSeriesModule,gh as MapLineSeriesModule,Ah as MapMarkerSeriesModule,Eh as MapShapeBackgroundSeriesModule,_h as MapShapeSeriesModule,PP as ModuleRegistry,jh as NightingaleSeriesModule,Sr as OhlcSeriesModule,xl as OrdinalTimeAxisModule,ad as PyramidSeriesModule,md as RadarAreaSeriesModule,xd as RadarLineSeriesModule,Nd as RadialBarSeriesModule,Td as RadialColumnSeriesModule,$d as RadialGaugeSeriesModule,kl as RadiusCategoryAxisModule,vl as RadiusNumberAxisModule,kr as RangeAreaSeriesModule,Nr as RangeBarSeriesModule,au as SankeySeriesModule,Nl as StandaloneChartModule,pu as SunburstSeriesModule,Ol as TopologyChartModule,bu as TreemapSeriesModule,Cr as WaterfallSeriesModule};
